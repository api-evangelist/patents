---
title: Enhanced drug dispensing system
abstract: In an automated prescription pill dispensing system, a multiplicity of pill dispensers are provided each operable to count out and dispense pills from supply hoppers. The dispensers are controlled by a computer which selects up to five of the dispensers to operate and control the selected pill dispensers to count out pills simultaneously. The pill dispensers dispense the pills into the first set of output hoppers, from which the pills can be released into a second output hopper under the control of the computer. The computer will release the pills from the second output hopper corresponding to a selected pill dispenser through a snout into a pill vial in response to sensing the presence of a pill vial at the snout. The computer controls a prescription label printer to print prescription labels for the pill vials. The computer also controls indicator lights to indicate which dispensing cell is selected and ready to have pills released from the second output hopper corresponding thereto. Automatically controlled security doors control access to supply hoppers for each of the pill dispensers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=RE040453&OS=RE040453&RS=RE040453
owner: Medco Health Solutions, Inc.
number: RE040453
owner_city: Franklin Lakes
owner_country: US
publication_date: 20000224
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application is a continuation application of application Ser. No. 08\/250,435, filed May 27, 1994, now abandoned.","The present invention relates to a system for dispensing articles and, more particularly, to a system for dispensing different drugs in the form of pills, capsules, etc. with high speed and with the assurance that the right amount of drug is dispensed into the proper container associated with a particular drug prescription.","Devices are known for precisely counting and dispensing drugs, such as the device disclosed in U.S. Pat. No. 4,111,332. It is known to use a plurality of such counting and dispensing devices, each associated with one drug, to fill large numbers of prescriptions. However, the need for filling large numbers of prescriptions at high speed has exceeded the capacity of mere banks of such devices. It has been found that the article counting and dispensing devices require too frequent filling with the drugs to be dispensed and that the time for dispensing the drugs to fill a prescription is too slow.","Idle time in the operation of such devices as presently employed is caused by the fact that the operator must now wait on the average of 12 seconds for every prescription filled. Another 25% of time is spent replenishing the counting and dispensing devices with drugs. The operator must obtain the bottles of drugs, break the seals, open each bottle, and remove desiccants and packing material. The operator opens a cabinet in which a counting and dispensing device is contained, moves the device to a position in which the device projects from the cabinet, and removes a fill cap on the device. The contents of the drug bottles are emptied into the hopper of the counting and dispensing device, filling the hopper to the recommended capacity. The operator then replaces the fill cap, moves the device back into the cabinet in its dispensing position, and disposes of drug bottles, caps, cotton, desiccants and other dunnage. This procedure is followed for each of the counting and dispensing devices, wherein one drug is associated with each of the devices.","In order to overcome the drawbacks of the known counting and dispensing devices, the present invention provides additional structure and controls to be used with such devices. The enhancements to the known counting and dispensing devices include a backfill replenishment system, a front buffer assembly, a new arrangement for the operator station, and a novel control system.","In preparation for the operation of the system according to the present invention, prescriptions go through an order entry sequence which includes data entry, protocol management, professional review, and order scheduling. The system according to the present invention then fills the orders in cooperation with an operator.","The backfill replenishment system provides a much larger volume of pill storage for the known counting and dispensing devices. It provides access and security for replenishing the drugs in the counting and dispensing devices from the backside of a cabinet in which the devices are positioned. It provides replenishment of the drugs to the counting and the dispensing devices without the need for opening the front of the cabinet and moving the counting and dispensing devices to a projecting position. The backfill replenishment is accomplished by a panel provided for the counting and dispensing devices at the rear of the cabinet and a hopper for feeding each of the counting and dispensing devices. The hoppers replenish the drugs to the counting and dispensing devices on an as-needed basis. A sensor in the hopper indicates to the control system when replenishment is required.","Also provided for each of the counting and dispensing devices is a front buffer assembly which receives the drugs from the associated counting and dispensing device. The front buffer assembly includes a first, upper chamber, which receives the pills or the like from the counting and dispensing device. The control system transfers the pills from the upper chamber to a second, lower chamber. The pills are then available to the operator by contacting the associated dispensing snout with an appropriate receptacle.","The system according to the present invention includes an operator station including a console equipped with a key pad, display monitor, label printer, and hands-free bar code reader, as well as pill bottles, bottle caps and cotton provided in bins having indicator lamps known as pick-to-lights. Additional indicator lamps are provided, respectively, on the left and right sides of the work station to indicate whether the next order for delivery will be available to the left or the right of the operator console. The system further includes an indicator lamp at each of a plurality of dispensing snouts to indicate at which dispensing snout the order will be available for delivery. The order is delivered into a receptacle when the operator places the receptacle in contact with the appropriate dispensing snout.","In operation, using the bar-code scanner to scan a bar code on the operator's personal identification badge, the operator signs on to a computer embodying the control system. A prescription label containing a bar-coded label for the next prescription to be filled is printed by the label printer on a command from the control system. The indicator lamp associated with the bin holding the appropriate receptacle flashes. The operator places the label on the container and verifies to the control system the bar code on the label by using the hands-free bar code reader. The indicator lamp associated with either the left side or the right side of the operator workstation flashes to indicate the general area where the next order will be delivered. The indicator lamp associated with the particular dispensing snout where the order will be delivered also flashes. The operator fills the order by engaging the indicated snout with the receptacle. The system will not release the drugs into the receptacles without bar code verification by the bar code reader, thus assuring that the proper drugs go into the proper receptacle. The operator puts cotton into the container and a cap onto the container and places the container into a delivery chute. It is contemplated that the operating station can include a large plurality of counting and dispensing devices in increments of six devices arranged in a vertical slice through the cabinet and an unlimited number of slices each containing six dispensing units can be provided at one workstation, with each dispensing device having a dispensing snout at a convenient dispensing height.","Another person at the backside of the cabinet fills the hoppers supplying the counting and dispensing devices. The filling is done independently of the dispensing and without interfering with the dispensing operation. When a counting and dispensing device requires replenishment, the technician at the back of the cabinet reads with a scanner, which can be of the hand-held type, a bar-coded label on a bulk supply container of drugs. In response to the reading, the control system causes an indicator lamp to flash adjacent to a security door of the hopper for the counting and dispensing device used to fill orders for the drug whose container label was scanned. All of the security doors are initially locked. The scanning of the bulk container label also releases the lock of the appropriate security door so that access to the supply hopper protected by the door is permitted. After the supply hopper is filled, the security door is closed, whereupon it locks automatically. Unless the security door is closed, all of the other security doors remain locked, and access to any other supply hopper is denied. In case of a malfunction of any of the counting and dispensing units, the malfunctioning unit is removed through the back wall of the cabinet and replaced with a spare unit. The removed unit can be repaired without interrupting the dispensing operation. Removal can only be done by an authorized technician as each dispensing unit is locked into place by the control system.","Upon a command from the dispensing control system, the counting and dispensing device counts a desired number of pills and advances them to a buffer assembly. The buffer assembly includes an upper hopper having a solenoid-operated outlet door, which releases the pills in the upper hopper into a lower hopper, also having a solenoid-operated outlet door. The pills are released from the lower hopper in response to the presence of the receptacle at the dispensing snout, the pills falling from the lower hopper through a tube to the dispensing snout.","Dispensing of drug orders is accomplished in less than half the time as in previously known systems. Also with the present invention, there is no operator waiting time for pills to be counted.","As can be seen from , the enhanced drug dispensing system according to the present invention, which is designated generally by the reference numeral , can be employed as a part of a larger, high volume prescription filling and distribution operation. The dispensing system  includes one or more cabinets , each containing a large plurality of dispensing subsystems or subassemblies , each of which has an inlet  at the rear of the cabinet and a dispensing snout  at the front of the cabinet. The cabinet  comprises a plurality of modules , each defined by a vertical slice through the cabinet in which a plurality, for example six, of the dispensing subassemblies are arranged, one above another. An operator at a workstation at the front of the cabinet  controls the dispensing operation with the help of a control system embodied in a computer. The replenishment of the drugs at the rear of the cabinet  is performed by a technician, also in cooperation with the control system. It can be seen that a conveyor  is provided so that boxes  of drugs from the manufacturers can be received at the prescription filling and distribution center. Storage shelves  are provided at the rear of the cabinet  so that a large volume supply of all drugs are on hand. A waste disposal chute  can be provided which leads to a waste conveyor  for removing dunnage from the drug replenishment area. A chute  having an inlet  at the front side of the cabinet  leads to one or more conveyors  for transporting filled prescription receptacles  to a packing and shipping area. A sensor  (FIG. ), such as a photocell, is positioned at the inlet  of the chute  to send a signal to the control system that a filled drug receptacle  has been deposited in the chute after the receptacle has been filled with the prescription drug. In the prescription filling and distribution center illustrated in , the drug replenishment technician stands on a platform  raised above the level of the surface on which the dispensing system operator stands. The near end of the platform  is shown broken away in  to illustrate the height of the platform above the floor of the workstation and to show, in , the conveyors  and  below the platform. A wall at the near end of the cabinet  and a portion of the top of the cabinet are omitted in order to show the arrangement of dispensing subsystems  in the slice or module  at the near end of the cabinet.","As can best be seen from , the operator work station includes a console  provided at the front side of the cabinet  containing the dispensing subsystems . The dispensing snouts  of the dispensing subsystems  project through the forward wall of the cabinet  and are arranged in close proximity to one another in order to minimize the amount of movement required by the operator to reach all of the snouts. The dispensing snouts  are also positioned at heights convenient for the operator to fill a receptacle  from them. For each module , the dispensing snouts are arranged, for example, in two horizontal rows of three snouts each. An indicator lamp  is positioned adjacent to each dispensing snout  to indicate to the operator the snout through which the next pill delivery will take place. There is also an indicator lamp  on each side of the console  to indicate the area of the operator station where the next pill delivery will occur. Centrally located at the console  is a printer  which provides, one by one, labels associated with a series of prescriptions to be filled, each label bearing a bar code representing a unique prescription number identifying the prescription being filled. A plurality of bins  are provided adjacent to the printer  for containing a variety of sizes of pill receptacles , so that the appropriate size receptacle can be used for each of the prescriptions to be filled. Each bin  holes one specific size of receptacle , and an indicator lamp  is located at each bin to signal the operator which bin holds receptacles suitable for receiving the next prescription to be dispensed. The console  also has a hands-free bar code reader  for reading the bar codes on the labels supplied by the printer . The delivery chute  receives the labeled, filled receptacles , each holding pills filling a specific prescription. Compartments  and  holding container caps and cotton are also provided at the console . Bin labels (not shown) are provided at each of the bins ,  and  to indicate whether receptacles , caps or cotton are in the bin and, in the case of the receptacles and the caps, to indicate the size of the receptacles or caps in the bin. A computer keypad  is located at the console  so that the operator may sign-on to the computer and thereby enable the dispensing control system. A computer monitor  is also positioned in the console . A transparent pill sample case  is provided adjacent to each of the dispensing snouts  to serve as a check that the pills being dispensed from the dispensing snout  are the pills which should be dispensed from that dispensing snout. A sample pill is placed in the transparent sample case  as a reference for comparison with the pills issuing from the dispensing snout . A discrepancy between the sample pill and the disposed pills is an indication that one or the other is incorrect. A similar sample case containing a sample pill is provided at each inlet  at the rear of the cabinet as will be described below.","As can be seen from , a large supply hopper  is mounted at the inlet  to the dispensing subsystem  in order to hold a large supply of pills so that the frequency of human-assisted filling of the dispensing subsystem is greatly reduced. The supply hopper  is supported on a conventional counting and dispensing device or cell  so that the supply hopper slopes from back to front. The counting and dispensing device  is mounted in the cabinet  at approximately the same slope from back to front as the supply hopper . The supply hopper  is generally a rectangular parallelepiped having a top , a bottom , a rear end , and a forward end , and sides , except that the supply hopper tapers at its forward end. The rear end  of the supply hopper  is open to receive pills from bulk containers  () in which the pills are shipped from the factory. At the forward end  of the supply hopper , the sides  of the hopper are angled toward one another to guide the pills in the hopper to an outlet opening  in the bottom  of the hopper at the forward end . The top  of the supply hopper  has a portion which is angled upward, from front to rear, with respect to the bottom  of the hopper, and a rear wall  projects upwardly at an oblique angle relative to the bottom of the hopper, so that the opening at the rear end  of the hopper is angled upward for receiving the pills from their bulk containers .","The outlet opening  of the supply hopper  feeds the inlet of the conventional counting and dispensing cell , which inlet could, in conventional use, receive pills directly from their bulk containers . Suitable counting and dispensing cells are disclosed in U.S. Pat. Nos. 4,111,332 and 4,869,394 and are available under the trademark BAKER CELLS from Automated Prescription Systems, Inc. of Pineville, La. Such counting and dispensing cells each have their own, circular rotating hopper mounted on a support and rotated by connection with a drive shaft of a motor projecting through the support. The bottom of the rotating hopper is undercut to form a circumvential series of radial, angularly spaced pill receiving slots, with the innermost ends of the slots overlying an outlet opening in the support. Upon rotation of the hopper, the pills move along the slots, and each pill trips a switch before falling through the outlet opening in order to count each pill as it is dispensed. When the accumulated count of dispensed pills equal a preselected count, operation of the cell is stopped.","As can best be seen from , the supply hopper  is mounted above the counting and dispensing cell  by means of a bracket  having an inverted U-shape. The bracket  has a base portion  from which studs  project upwardly and sides  which extend down for connection to plates . The base portion defines an opening (not shown) which is positioned for alignment with the outlet opening  in the supply hopper , so that pills can pass from the supply hopper to the counting and dispensing cell . Each plate  defines upwardly open slots  for receiving thumb screws  projecting laterally from the sides of the bracket. A forwardly extending flange  at the forward end  of the supply hopper  defines apertures which receive the studs  on the bracket .","The rear end  of the supply hopper  is connected to a rear panel . The rear panel  is positioned within an opening in the rear wall of the cabinet  so that the rear panel fits flush with the rear wall. A vibrator  for the supply hopper  is mounted on a front panel  connected with the counting and dispensing cell  and is connected to an angle plate  in which the tapering forward end  of the supply hopper  nestles. Operation of the vibrator  assures that the pills in the supply hopper  move through the outlet opening  into the counting and dispensing cell .","An outlet tube  projects from the counting and dispensing cell  through the front panel  for connection to a drop tube  (FIG. ). Guide rails  are mounted parallel to one another along opposite sides of the counting and dispensing cell  between the rear panel  and the front panel  so that the assembly of the supply hopper  and the counting and dispensing cell  can be slid from an operative position of the assembly, in which the rear panel  is flush with the rear wall of the cabinet , to an inoperative, extended position, in which the supply hopper  can be detached from the counting and dispensing cell , and the counting and dispensing cell can be removed for repair and\/or replacement. A limit switch  is mounted on one of the guide rails  adjacent to the rear panel  for actuation when the assembly of the supply hopper  and the counting and dispensing cell  is in the operative position. Upon the actuation of the limit switch , a signal is sent to the control system for the enhanced drug dispensing system according to the present invention. A holdout latch  is arranged on one or both of the guide rails so that the assembly can be retained in its extended, inoperative position.","Upon a command from the dispensing control system, the counting and dispensing cell  counts a desired number of pills and advances them in the dispensing subsystem . As can be appreciated from , in the present invention the counted pills are advanced through the drop tube  to an upper hopper  of a buffer assembly , which is positioned inside the cabinet . The upper hopper  has an inlet  at or near its upper end to receive the pills from the counting and dispensing cell . The upper hopper  has a sloped bottom  to direct pills to an outlet having a trap door . The trap door  is hinged to the sloped bottom  and is pivotable from a position closing the outlet of the upper hopper  to a position in which the outlet is open to allow the pills to pass through the outlet. The pivoting of the trap door  of the outlet is controlled by a solenoid  connected to the trap door  and mounted on a bracket  secured to the upper hopper . A micro switch  senses the open or closed position of trap door .","The outlet of the upper hopper  of the buffer assembly  feeds an inlet of a lower hopper  of the buffer assembly. The lower hopper  is similar in size and shape to the upper hopper  and has an inlet opening  at or near its upper end to receive pills from the outlet of the upper hopper . The lower hopper  has a sloped bottom  to direct pills to an outlet controlled by a trap door . The trap door  is pivotable between a closed position preventing the movement of pills through the outlet and an open position permitting pills to fall through the outlet. Movement of the trap door  is controlled by a solenoid  mounted on a bracket  and connected to the trap door in a manner similar to the solenoid  of the upper hopper .","The pills released from the lower hopper  of the buffer assembly  fall through a tube  () to the dispensing snout  projecting through the front wall of the cabinet . As shown in , the dispensing snout  has mounted thereon a microswitch  which is actuated by placing a pill receptacle under the snout  in engagement with the microswitch actuator. The actuation of the microswitch , combined with computer agreement that the correct dispensing snout is being selected by the operator, will cause energization of the solenoid  controlling the trap door  of the lower hopper  of the buffer assembly , so that the trap door is opened, allowing the pills in the lower hopper to fall through the tube  and the snout . The operator engages the actuator of the microswitch  with an appropriate receptacle  for the prescription and actuates the microswitch . In addition to causing release of pills from the lower hopper , the actuation of the switch  sends a signal to the control system that dispensing from the snout  is complete. It is preferred that the supply hopper , the buffer assembly , the tube , and the snout  be made of transparent polycarbonate material.","The inlet  for each of the dispensing subsystems  is defined by a opening in a rear wall of the cabinet . A security door  () is hinged to the rear wall of the cabinet  at the bottom of the opening defining the inlet  and is pivotable between a closed position, in which the door covers the opening and prevents access to the inlet , and an open position, in which the door uncovers the opening and provides access to the inlet. A latching mechanism  is provided at the security door  to lock the door in its closed position and, thereby, prevent access to the associated dispensing subsystem . As can be seen from , the latching mechanism  includes an L-shaped pivot arm  mounted for movement in a short arc about a pivot member . A tension spring  is connected to the pivot arm  to bias the arm to one end of the arc defining the travel of the arm. In this position, the pivot arm  locks the security door . A movable element  of a solenoid  is connected to the pivot arm  and, when actuated, overcomes the force of the spring  to move the pivot arm to the opposite end of its arc for unlocking the security door . A limit switch  is positioned adjacent the latching mechanism  where a control arm  for the switch is engaged by the security door  when the door is in its closed position. The switch  is electrically connected to the control system to signal the open or closed state of the security door . The various elements of the latching mechanism  are mounted on a bracket  which can be secured to the cabinet . The pivot arm  engages a lock catch  secured to the security door  in order to hold the door locked closed when the pivot arm is in its locking position. A knob  is provided on the security door . It is preferred that the security door  employ a hinge arrangement which limits the travel of the door so that, in its fully open position, the door  slopes from its free edge down to its hinged edge and thereby defines a guide to direct pills through the opening  of the dispensing subassembly .","A refiller console is provided at the back side of the dispensing system array opposite the dispensing operators front console as shown in FIG. . The refiller console comprises a bar code scanner , which may be of a hand held type, a key pad  and a display screen . The display screen  displays messages to the refill operator.","The computer of the control system keeps track of the quality of pills in the hopper of each cell. In addition, a sensor is provided in the hopper of each cell to detect when the pill quantity is low. When the pill quantity is low, the control computer of the system will direct a synthesized voice message through speaker  on the back console to advise the refill technician that a refill of the hopper is needed.","The bar-code reader  is used to scan the refill operator's personal identification badge to log in the refill operator and enable refill operations to be carried out. The bar code reading is also used to scan the bar codes on the labels of the drug containers  from the factories. In response to the scanning of the bar code or the label of a container, the solenoid  of the appropriate security door  is actuated to unlock the security door and to provide access to the dispensing subassembly  which the door protects. All of the other security doors  remain locked. At the same time, a refill indicator lamp  adjacent to the appropriate security door  lights to indicate the door to be opened for replenishment from the scanned bulk supply container .","A transparent pill sample case  () similar to the pill sample cases  on the front wall of the cabinet  are provided adjacent to each of the indicator lamps . A sample pill is placed in each of the pill sample cases to serve a check that the pills being poured into the supply hoppers  from the bulk supply containers  are the pills which should be poured into the supply hopper. A handle is provided on each of the rear panels so that the assemblies of supply hoppers  and counting and dispensing devices  can be pulled out of the cabinet  from their operative positions to their extended, inoperative positions. The assemblies are locked in place and can only be removed under control the computer system by an authorized technician. Access panels are also provided in the rear wall of the cabinet , below the platform , to provide access to each of the slice I\/O boards.","In operation, using the bar-code scanner and employee badge, the operator logs into a computer embodying the control system. A prescription label for the next prescription to be filled is printed by the label printer  on a command from the control system. The indicator lamp  associated with the bin  holding the appropriate receptacle  flashes. The operator places the label on the receptacle  and verifies to the control system the bar code on the label by using the hands-free bar code reader . The indicator lamp  associated with either the left side or the right side of the operator workstation flashes to indicate the general area where the next order will be delivered. The indicator lamp  associated with the particular dispensing snout  where the order will be delivered also flashes. The operator fills the order by engaging the indicated snout  with the receptacle . The dispensing system  will not release drugs into the receptacle  without bar code verification by the bar code reader , thus assuring that the proper drugs go into the proper receptacles. The operator puts cotton into the receptacle  and a cap onto the receptacle and places the receptacle in the delivery chute . The sensor  at the inlet  of the delivery chute  detects the placement of the receptacle  in the chute and sends a signal to the control system, which turns the indicator lamp  at the dispensing snout  off. The signal also indicates to the control system that the lower hopper  of the buffer assembly  is ready to receive pills for another prescription. It is contemplated that the operator station can include the dispensing snouts  of a large plurality of subassemblies  in increments of six dispensing snouts associated with one slice or module , and that any number of dispensing subassemblies can be provided at one workstation, all have dispensing snouts at a convenient dispensing height.","Another person at the backside of the cabinet , after logging in by means of the bar code reader, fills the hoppers  supplying the counting and dispensing cells . The filling is done independently of the dispensing operation and without interfering with the dispensing operation. All of the security doors  are initially locked. When a counting and dispensing device  requires replenishment, the refill operator at the back of the cabinet  reads with the scanner , the bar-coded label on a bulk supply container  of drugs. In response to the reading, the control system causes the indicator lamp  to flash adjacent to the security door  of the hopper  for the counting and dispensing cell  used to fill orders for the drug whose container label was scanned. The scanning of the bulk container label also causes the release of the lock  of the appropriate security door  so that access to the supply hopper  protected by the door is permitted. After the supply hopper  is filled, the security door  is closed, whereupon it locks automatically. Unless the security door  is closed, all of the other security doors remain locked, and access to any other supply hopper  is prevented. In case of a malfunction of any of the counting and dispensing cells , the malfunctioning cell is removed through the back wall of the cabinet  and replaced with a spare cell. The removed cell can be repaired without interrupting the dispensing operation.","Upon a command from the dispensing control system, the appropriate counting and dispensing cell  counts a desired number of pills and advances them to the buffer assembly . The solenoid-operated trap door  controlling the outlet of the buffer assembly upper hopper  opens, releasing the pills in the upper hopper. The pills released from the upper hopper  are directed to the lower hopper . After verification of the prescription number by bar code reader sensing the bar code printed on the prescription label, the solenoid-operated trap door  controlling the outlet of the lower hopper  opens to release the pills from the lower hopper in response to the presence of the receptacle  at the dispensing snout , the pills falling from the lower hopper through the tube  to the dispensing snout . Only that dispensing snout will activate as the computer has disabled all others assuring the operator went to the correct location.","The electronic control system of the invention as shown in  comprises a control computer  which is connected with a host computer . The host computer  on receiving a ready message from the control computer  transmits packets of data each representing an individual prescription and containing all of the data of the prescription, including the doctor's name, the patient's name, the drug of the prescription, the number of pills in the prescription, the prescription number, and the identification of the particular dispensing subsystem  containing the particular dispensing cell which contains the drug to be dispensed. These individual packets of data are referred to as scripts and are stored in a portion of the internal memory of the control computer  set aside to receive the scripts and referred to as the script buffer.","The control computer  is programmed to receive signals from the key pads  and  on the front and back consoles of the system and to receive signals from bar code readers  and . The control computer  also controls the label printer  which prints the prescription labels and controls the display screens  and .","The control computer  sends output signals to an operator station I\/O board  which in response to the signals from the control computer  will energize the appropriate one of the vial size indicator lamps  and will also energize the appropriate one of the right and left indicator lamps  to indicate to the dispensing operator on which side of the array the selected dispensing cell is located.","The computer  selects and communicates with a slice I\/O board  by means of an interface board . As explained above, the dispensing cells are arranged into a multiplicity of subgroups called slices each containing six vertically arranged dispensing cells as shown in  and each slice of dispensing cells is controlled by a separate slice I\/O board . Each slice I\/O board  selects one of six dispensing cells in the corresponding slice to operate and count out pills, controls the dispensing cell to count the correct number of pills, and communicates back with the control computer  via the interface board  to advise the control computer  when the dispensing operation has been completed. Each slice I\/O board can act to fill up to six prescriptions at the same time. The slice I\/O board controls the energization of the solenoids  and  to open the trap doors  and  at the appropriate times for each dispensing cell and also controls the energization of the indicator lamps  to indicate which dispensing snout a drug is to be dispensed from. The slice I\/O board receives signals indicating the status of the switches  each detecting the positioning of a vial at a snout  to receive a drug, the status of the switches  indicating the open and closed state of the upper hopper trap doors , the status of the switches  indicating the open and closed state of the security doors  and the interlock switches  indicating the presence or absence of dispensing cells.","The block diagram in  illustrates the circuit of the interface block  in more detail. As shown in , the interface block  connects with the control computer  via an address bus , a data bus  and control signal bus . The signals on the address bus  are used to select the interface board of  to transmit or receive signals over the data bus . If the address signals on the bus  match an address represented by address switches , this match will be detected by an address comparator  and the interface board  will be selected. When the address comparator  detects a match of the address on the bus  with the address switches , it signals the occurrence of the match by applying a match signal to control logic and timing circuit , which is enabled by the match signal. The signals on the data bus  can represent either an address to select a slice I\/O board and an output register on the selected slice I\/O board or they can be data signals to be stored in a selected register on the slice I\/O board. When signals are transmitted from the computer  to the interface board over the bus , the enabled control logic and timing circuit  will enable transceivers  to transmit these signals to local data bus . When the signals are transmitted on the data bus  represent an address, one bit of the address signals on the address bus  called an address control bit will indicate this fact and this address control bit is received by the control logic and timing circuit . When the address control bit indicates that the signals on the local data bus are address signals the control logic and timing circuit  enables the address latch  to receive the address signals. When the selected bit of an address bus  indicates that the signals on data bus  are data signals, the signals are not latched into the address latch  and the control logic and timing circuit  will produce a write signal on local control bus  indicating that the transmitted signals are local data signals.","When the control logic and timing circuit  latches signals into the address latch , these signals will be applied to an address check register  where they will be restored in response to a signal from the control logic and timing circuit  and these address signals will be transmitted back over the local data bus , the transceiver  and the data bus  to the computer  for a comparison in the computer  to insure that the address latched in the address latch  matches the address sent to the address latch. The address latched in the address latch  is transmitted by differential drivers  over an output address bus  to each of the slice I\/O boards . When the signals on the data bus  do not represent an address to select a slice I\/O board , but instead are local data signals, the circuit  will enable differential transceivers  address so that each of the slice I\/O boards may be individually selected by the matching carried out by the address comparator . The read and write signals transmitted over output control bus  to each of the slice I\/O boards  are transmitted by differential receivers  to the control and logic timing circuit . When a write signal is received on the control bus , the control and logic timing circuit , if enabled by the address comparator , will enable an input register location decoder  to respond to respond to the three least significant bits in the address signals transmitted from the interface board over address bus . In response to the three least significant bits, the input register location detector will select one of seven output registers  through  or the FIFO register  to store received data signals. When the control logic and timing circuit  receives a write signal, it will also enable differential transceivers  to transmit data signals received over the data bus  from the interface board to the output registers  through  and to the FIFO register . Thus, when the signals on the control bus  comprise a write signal, one of the registers  through  or the FIFO register  will be enabled to receive and store data signals and data signals received on bus  will be stored in the selected register. The data signals received in the output registers  through  each serves to select one of the six dispensing subsystems  in the slice corresponding to the activated slice I\/O board . The output register  controls the solenoids  and, accordingly, controls the opening of the trap door  at the outlet openings of the upper hoppers . Thus, when the output register  is selected by the output register location detector , data signals will be stored in the register  to select one of the six dispensing subsystems  in the slice and energize the solenoid  in the selected dispensing subsystem. Accordingly, the pills will be dumped from the upper hopper  to the lower hopper  in the selected subsystem . The output register  controls the solenoids  in the dispensing subsystems  in the slice corresponding to the activated slice I\/O board . Accordingly, when the output register  is selected by the location decoder  and receives data, it will select and energize a solenoid  and release the pills from the lower hopper  to pass through the corresponding output snout  into a vial. The output register  controls the snout indicating lamps  for the selected slice. When the output register location detector  selects the output register , the register  receives and stores data signals and the data signals in the register  will select and energize a selected snout indicator lamp  corresponding to the dispensing cell selected by the data in the output register . The output register  corresponds to the indicator lamps  to indicate the refill door to be opened in the back panel in response to the wanding on the bar code on a bulk package of drugs by the refill operator prior to refilling. Thus, when the output register  is selected and receives data, it will select and cause the energization of an indicator lamp  adjacent to a refill security door to indicate to the refill operator that the adjacent refill security door is to be opened to access the corresponding supply hopper .","The output register  controls the solenoids  in the selected dispensing subsystem for unlocking the rear refill doors when the output register  is selected by the location decoder  and receives data. The data in the register  will select and energize a solenoid  and thus unlock the selected refill door. The registers  and  are unused in the current preferred embodiment and are provided for future modification of the existing system.","When the location decoder  selects the FIFO , the data received on the data bus by the differential transceiver  will be what is referred as a script packet which contains the cell number of the selected dispensing cell in the slice and also the number of pills to be dispensed. In response to the selection of the FIFO register , this script packet will be stored in the FIFO register  to be used by a micro-controller  in controlling the operation of the selected dispensing cell in a manner described in more detail below.","Depending on the data placed in the registers  through , the outputs from the registers  through  can also select vibration drivers. These vibration drivers are used in the case of a dispenser dispensing too slowly or failing to dispense in the manner as described in more detail below.","As described above, each dispensing subsystem has four microswitches which indicate the status of the dispensing subsystem. One microswitch  is located at the snout  and detects the presence of a vial at the snout  to receive pills from a second buffer . A second microswitch  detects whether  has been actuated and has opened the trap door  is open or closed. A third microswitch  detects that the refill door  as shown in  is open or closed. The fourth microswitch  is the cell interlock switch and detects whether the dispensing cell is present in the dispensing cell array. With four switches for each dispensing subsystem , a slice of six dispensing subsystems has 24 such switches. These 24 switches generate most of the slice status signals, designated in  by reference number . In addition to the signals generated by the dispensing subsystem microswitches, the slice status signals  also include the signals generated by the low level sensors in the hoppers of the dispensing cells. The slice status signals  are applied to input registers  to . When the control logic and timing circuit  receives a read signal through the differential receiver  over the local control signal bus  from the interface board  and the slice I\/O board has been selected as detected by the address compare circuit , the control logic and timing circuit  will enable an input register location decoder  to respond to the three least significant bits on address bus. In response to these three bits, the input register location decoder  may select one of the input registers  through  to apply output signals representing eight of the slice status signals  through the differential receiver  over the data bus to the I\/O interface board  and from the I\/O board interface  to the control computer . In this manner, the computer  can read out and obtain the status of the 24 switches and the six hopper level sensors in a selected slice of six dispensing subsystems .","As described with reference to , each time the operator filling prescriptions has filled a vial, he places it in the chute  and the placing of a vial in the chute  is detected by a photodetector  which generates a chute signal indicating that vial has been deposited in the chute . The chute signal generated by the photodetector  is applied to one of the slice I\/O boards , in which the chute signal is temporarily stored in a chute sensor interface . The stored chute signal is applied to the input register  where it will be read out to the computer  through the I\/O board interface  when the register  is selected to read out by the input register location detector . The chute sensor interface  is reset upon the stored chute signal being read out.","The slice I\/O board, as shown in , also has an input FIFO  and the output FIFO  can be selected by the input register location decoder  for readout. When a read signal is received over the control bus through the differential receivers  by the control and timing logic  and the input registration location decoder  selects the input FIFO  in response to the address signals received through the differential receivers  over the address bus  from the interface board , the data in the FIFO  will be read out through the differential transceivers  and through the interface board  to the computer .","Each slice I\/O board, as shown in , contains a microcontroller  which responds to the script packets stored in the FIFO  and stores status packets in the FIFO  to provide data to the computer  representing the current status of any prescription being filled in the slice. The microcontroller  operates under the control of a program stored in EPROM  and employs control logic  to route data between a random access memory  and the FIFOs  and  and also to output register  and from input registers  and . When a script packet has been stored in the FIFO register , the microprocessor  will read out this packet of data and process it by first storing a bit in the output register  corresponding to the cell selected by the script packet of data and when this bit is stored in the output register , the cell motor driver will energize the motor to drive the selected dispensing cell. The microprocessor  will also store the script packet in the random access memory . As the motor operates and is energized to dispense pills, the actuated cell will produce output pulses each time a pill is dispensed and these pulses are received in input register  and counted in the random access memory  by the microcontroller . When the number of pills dispensed as determined by this count registered in the RAM  equals the count in the script packet, the microprocessor  stops the cell motor by changing the corresponding bit in the register  so that the cell motor is de-energized and stops dispensing pills. If the cell motor does not draw current in response to power applied from the corresponding cell motor driver, the cell operating generates an output signal indicative of this fact and this output is stored in the corresponding bit position of the register  to indicate that the dispensing cell is not available.","In addition, each time a script packet is stored in the FIFO , the microprocessor  will store a status packet in the FIFO  containing the number of the dispensing cell which has been selected by an incoming script packet stored in the input FIFO  and a character representing the present status of the prescription represented in the corresponding script packet. The status of the prescription may be indicated as F meaning that the cell is filling the prescription, W meaning that the cell is filling the prescription with a slow delivery, G meaning that the filling of the prescription has been completed, H meaning that the cell for the prescription is not available. A meaning that the cell is busy filling a prescription in response to a prior script packet received by the FIFO , and X meaning that the dispensing cell microswitch, which generates a pulse as each pill is dispensed to enable the dispensed pill to be counted, is stuck. The microcontroller determines the status of the prescription of the script packet and then sets the character representing the status in the corresponding status packet in the input FIFO . The microcontroller determines that the cell is not available by checking the input register  and determines that a cell is busy by determining that the cell selected by the script packet is in the process of filling a prescription represented in a previously received script packet in the FIFO . The status conditions indicated by characters A and H should not occur, but should they occur through malfunction, the microcontroller stores the corresponding character in the corresponding status packet in input FIFO . If the cell selected by the script packet is present and is not busy, the microcontroller sets the character F in the status packet to indicate that the prescription is being filled. The microcontroller compares the rate of pulses representing counts received back from the counter with a timer and if the pulse rate is below a predetermined minimum, then it sets a character W in the corresponding status packet to indicate that the cell is slow in dispensing the pills. If the microcontroller receives no pulses from an energized cell within a preselected time period, the microcontroller sets the character X in the corresponding status packet to indicate that the dispensing cell has a stuck microswitch. When the dispensing cell has completed dispensing the selected number of pills, as indicated by the count of the number of pills registered in the random access memory  equalling the pill count provided in the script packet in the FIFO , the microcontroller sets the character G in the corresponding status packet in the FIFO . When the script register location detector  selects the input FIFO , the cell status packets stored in the input FIFO  will be read out and transmitted to the computer .","The program by which the computer  controls operation of the dispensing system is represented by the flowchart shown in  source code listing of the program in \u201cC\u201d is submitted herewith as an appendix to the application.","As shown in the flowchart, the program upon being started enters into an initialization routine  in which the constants and variables are set to their initial values whereupon the routine enters into a decision sequence  to determine whether a 18.2 hertz timer has timed out. If the timer has timed out, the program enters into the control sequence of the program and if the timer has not timed out, the control sequence of the program is skipped. Accordingly, the program will sequence through the control sequence of the program about every 0.05 seconds. Upon entering the control sequence of the program, the program first enters into a routine  wherein each of the timers used in the control sequence are incremented and then the program enters into routine  in which the program sets up and controls the display on the front display screen  and also the display on the refill operator's display screen  on the back side of the array for the refill operator.","Following the display handler routine , the program enters the routine  to read the slice inputs from all of the slice I\/O boards  in the system. It is during this routine that the computer receives the data from the input registers  through  on each slice I\/O board. Following the routine , the program enters into the decision sequence  in which the program determines whether or not a power up test is to be performed. The program is designed to have a maintenance technician to log into the system to start up the system or for maintenance purposes. During start-up, the power up test is performed. In the power up test, the status of the switches in each of the I\/O boards is checked and the output pill hoppers  and  are flushed of any stray pills left in these hoppers. After start-up, during normal on-going operation, the power-up test is skipped and the program proceeds directly into the next routine of the control sequence, which is the cell interlock test. In this routine, the program checks the open or closed status of the cell interlock switches , which are closed when the dispensing sub-systems are present in the dispensing array from the data received from the slice I\/O boards in routine . The routine  displays a message on the display screens indicating which cells are not present. Following the cell interlock check routine , the program enters the decision sequence  wherein the program determines whether or not the prescription dispensing operator has logged in. If the prescription dispensing operator has not logged in, the program returns to the decision sequence .","If the dispensing operator has logged on, the program enters into the operator station routine  in which the major control functions of the dispensing operation of the dispensing system are carried out. These functions include selecting a selected dispensing subsystem  in response to a received prescription and causing the cell motor of the dispensing cell  in the selected subsystem to be energized to cause it to begin dispensing pills into an upper hopper , printing prescription labels from each received prescription in turn, energizing the solenoid  to dump the pills from the upper hopper  to the lower hopper , to energize the solenoid  to release the pills from the lower hopper  to the output snout  to be received by a pill bottle or vial. In addition, the operator station routine  also controls the energization of the right and left side indicator lamps to indicate which side of the array the prescription is to be dispensed from and controls energization of the snout indicator lamps  to indicate from which snout a prescription ready to be released is to be dispensed. In addition, the operator station routine controls the energization of the bin indicator lamps  to indicate from which bin the vial is to be obtained for the prescription being filled.","After completing the operator station routine , the program proceeds into the refill station routine  wherein the program causes the appropriate functions to be carried out with respect to the refill operation carried out on the back side of the array of dispensing subsystems . Specifically, the refill routine checks to determine that the refill operator has logged in and then responds to the data received from wanding of the bar code on refill cartons to unlock the security door  of the corresponding dispensing subassembly  so that the refill operator can open the unlocked door and dump the drugs into the supply hopper  of the appropriate dispensing subassembly. Before unlocking the selected door, the routine first determines whether all the security doors are closed. The selected door will not be unlocked unless all doors are closed. In this routine, the program also controls the energization of the appropriate signal lamp to indicate to the refill operator which door has been unlocked in response to the scanning of the bar code on the refill carton. The program maintains a count of the number of pills in the input hopper of each dispensing cell. This count is called the hopper quantity. As part of the refill station routine, this hopper quantity is updated by adding the number of pills supplied in the refill operation to the hopper quantity. This hopper quantity is used by the computer to determine when the quantity of pills in a dispensing sub-system supply hopper is low and needs refilling. As stated above, the control system also includes a low level sensor in each hopper to indicate when the pill quantity in a given hopper is low.","Following the routine , the program enters into the write slice outputs routine  in which the computer  performs the function of transmitting the data to the registers  through  to complete the functions of energization of the selected solenoid drivers and the selected lamp drivers. Following the write slice output routine , the program proceeds through routines  and  to service the scroll of the display on the front display screen  and to perform a similar function for the display screen  for the refill operator. After the routines  and  have been completed, the program will have completed each of the routines and functions of the control sequence, which are performed once every 20th of a second, that is, every time the 18.2 hertz time flag has timed out when the program enters the decision sequence .","If in decision sequence , the time flag is not timed out, the program skips the control sequence to enter the routine  and it will also enter the routine  after performing the scroll display routine . Thus, the control sequence comprising routines , , , , , , , ,  and  are performed about once every 20th of a second. The routine  and the routines following this routine in the flow chart are performed at a much higher frequency.","In the routine , the program receives the key pad input signals and also the bar code reader input signals. Following the routine , the program enters into routine  wherein the program carries out the front mean display control function when this control function is called for in response to keyboard input signals from key pad . Following the routine , the program enters into the routine  wherein the program controls the menu display on the refiller display screen when this menu display is called for by key pad input signals.","Following the routine , the program enters into routine  wherein the program handles any log in by the operator or the technician at the front keyboard  as well as any log in by the refill operator at a key pad on the back side of the dispensing array. Following the log in handler routine, the program proceeds into the host interface routine  in which the program transmits a ready signal to the host computer and receives new scripts from the host computer in response to the ready signal. Following the routine , the program enters into the cell control interface routine  in which the computer receives the characters representing the status of each prescription which is the subject of the script packet sent to the output FIFO  to start the prescription filling process. As described above, this status information is received from the status packets in the input FIFO  and is in the form of letter characters A, F, W, G, H, and X, wherein A means that dispensing cell is busy filling a prescription under the control of a previous script packet in the output FIFO , F means that the prescription is in the process of having the pills dispensed, W meaning that the cell is counting out the pills, but the counting process is too slow, G meaning that the filling process of the prescription has been completed, H means the dispensing cell is not present, and X means that the counting microswitch of the dispensing cell is stuck. The computer  responds to the received characters in the routine  as described in more detail with reference to .","Following the routine , the program enters into the exit decision sequence , from which the program returns again to the timer decision sequence , unless an exit has been called for. If an exit has been called for in response to a entry of a command by a technician, then the program will exit the program and the program will end. Upon returning to the decision sequence , the program again determines whether the 18.2 hertz timer has timed out and the process repeats.","The system is designed to act on five different prescriptions essentially simultaneously doing different parts of the functions required for the different prescriptions at the same time. One prescription may be in the process of being started to commence counting out pills. Additional prescriptions may be in the process of being counted and dispensed into the respective upper hoppers. Another prescription may be having the pills dumped from the upper hopper to the lower hopper, a fourth prescription may be having its label printed or having its pills released from the lower hopper into a vial. The way that this simultaneous dispensing is accomplished is by having each script containing the information for a prescription to be dispensed stored in a different one of five buffer registers assigned to this purpose. This set of buffer registers is called the script buffer. The status characters A, F, W, G, H, and X representing the current status of these prescriptions are received and stored in the corresponding script buffer register in routine .","In successive iterations through operator station routine , the computer  performs sequential steps of the dispensing process, from starting the pill counting by the dispensing cell to releasing the pills from the lower hopper into the vial, for each script in the script buffer. Each time the computer  iterates through the routine  every 1\/20 th of a second, a portion of the dispensing sequence is effected for each of the five scripts. In this manner, five scripts stored in the script buffer can be processed essentially simultaneously. The operator station routine  is a case variable switching routine wherein the particular function performed for each script buffer during each iteration through the routine depends upon the case variable or status word which may be READY, PRESTART, START, STARTED, FILLING, FULL, DUMPING, LABELWAIT, LABEL, SNOUTWAIT, RELEASE, and CHUTEWAIT. The program changes the status word in the above listed sequence as a given script is being processed unless a malfunction occurs, in which case the stats word is changed to CANCEL.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":["FIGS. 17a through 17d","FIG. 17a"],"b":["321","321","338","338","150","321","321","85","321","218","218","242","240","242","321","340","240","340"]},"In the routine , when the status word is STARTED, the program determines in successive iterations through the routine whether the status word changes to FILLING within two seconds. If the status word does not change from STARTED to FILLING within two seconds, the program branches to change the status word to CANCELED to cancel the prescription. When the status word has been changed to FILLING, then the program iterates through the routine  successively until the status word changes to FULL. As indicated above, the microcontroller  will change the status character in the status packet in the input FIFO  to G indicating that the prescription filling has been completed when the prescription count reaches the count provided in the script packet received in the FIFO . When this happens, the microcontroller  stops the cell from counting without any further instruction from the computer . The computer in the cell interface routine  in response to receiving the status character G from the microprocessor  will change the status word in the script buffer register to FULL. When the status word has been changed to FULL, then in the routine , the program updates the dispensing cell hopper quantity by subtracting the number of pills called for to be dispensed by the prescription from the hopper quantity. As pointed out above, the hopper quantity is a value maintained by the computer for each dispensing cell representing the number of pills remaining in the input hopper of a dispensing cell. After updating the hopper quantity, the computer program determines whether the hopper quantity is low by comparing the hopper quantity with a minimum value. If the hopper quantity is low, the program branches to send a refill message by synthesized voice to the refill operator on the back side of the dispensing array. The synthesized voice indicating a low quantity of pills is also generated in response to the low level indicator in such supply hopper of the dispensing system.","In the next iteration through the operator station routine  while the status word is FULL, the program checks the lower hopper use flag. If the lower hopper use flag shows that the lower hopper is in use, meaning that there are pills in the lower hopper, as may be the case from an earlier prescription, the program status word will remain FULL. Accordingly, the status of this lower hopper use flag will be repeatedly checked during each successive iteration through the operator station routine. When the lower hopper use flag is cleared showing that the lower hopper is not in use and meaning that there are no pills in the lower hopper, the routine then sets the lower hopper use flag and changes the status word to DUMPING. Then in a subsequent iteration through the routine , when the status word is DUMPING, the program will dump the pills from the upper hopper to the lower hopper by energizing the solenoid . When the dumping has been completed, the routine  changes the status word to LABELWAIT. Then, in successive iterations, after the status word has been changed to LABELWAIT, the routine  clears the upper hopper use flag and then waits for that script buffer register's to turn to print a prescription label. The computer can only print one label at a time and, accordingly each script in the script buffer must wait for its turn to print the label. When the turn comes for a particular script buffer register, then a pointer will point to that script buffer register. When this happens, the program in the following iteration through routine  will change the status word to LABEL. Then, in a following iteration through the routine , after the status word has been changed to LABEL, the program will energize the bottle size indicator lamp which indicates the size of the bottle to be used by the operator. The bottle size will have been previously determined from the pill quantity as described above. Following the energization of the bottle size lamp, the program will energize the right or left indicator lamp to indicate whether the prescription will be filled from a snout on the right or left side of the operator station. Following the energization of the right or left indicator lamp, the program proceeds to the print label subroutine wherein the label is printed from the script data in the script buffer register. The printed label in addition to having the usual prescription information will also include a bar code which identifies the prescription number. Following of the printing of the label, the program changes the status word to WANDWAIT. Then after the status word has been changed to WANDWAIT, in a following iteration through the routine , the program compares the prescription number indicated by the bar code read from the prescription label in routine  with the prescription number in the script buffer. If the bar code does not correspond to the prescription number, then program causes an error message to be displayed on the front console display screen . If an error message is displayed, the operator can rescan the bar code to recheck the bar code prescription number against the prescription number in the script buffer. If a match cannot be obtained, the system has malfunctioned and the program cannot proceed. Accordingly, the technician must be called to correct the malfunction. If the prescription numbers represented by the bar code is the same as the prescription number in the prescription buffer, the program changes the status word to SNOUTWAIT. After the status word has been changed to SNOUTWAIT, in a following iteration through the routine , the program turns off the vial size indicator and turns on the snout indicator lamp which indicates the snout from which the prescription is to be dispensed. The snout indicator lamp is selected by the cell number and slice number in the script in the prescription buffer register. The program then waits for the snout switch  to be activated by a vial being positioned at the snout to receive the pills released from the lower buffer. When the snout switch has been activated, the program in the routine  changes the status word to RELEASE. Then in a successive iteration through the routine , after the status word has been changed to RELEASE, the program clears a chute detection flag which is set in response to a vial containing pills being placed in the chute  at the operator station. Then, with the status word RELEASE, the program releases the pills into the vial by energizing the solenoid  to open the lower hopper trap door and then changes the status to CHUTEWAIT. After the status word has been changed to CHUTEWAIT in a later iteration through the routine , the program turns off the snout indicator lamp, then clears the lower hopper use flag and then waits in successive iterations through the routine  for the chute detection flag to be set. When the chute detection flag has been set, the program enables the next script in the script buffer to be printed by incrementing the pointer to point to the next script buffer register containing a script to be printed. The program then turns off the left and right side indicator lamps and changes the status to READY so that the control computer  will send a READY message to the host computer  to indicate that the corresponding script buffer register is ready to receive another script to be processed.","As described above, the status word gets changed to FILLING and FULL in the cell interface routine  in response to receiving the characters F and G from the input FIFO. If the character received in the cell interface routine is A, X, or H, the cell interface routine changes the status word to CANCELED. If the characters received in the cell interface routine is W, meaning that the pill count is slow, the cell interface routine calls on the vibration, which causes a bit to be set in the appropriate bit location of the appropriate output register - to vibrate the slow counting cell.","After a status word has been changed to CANCELED, the control computer  causes a message to be sent to the host computer that the prescription has been canceled, and then sets the status word in the corresponding script buffer register to READY so that the host computer can send another script to be stored in the script buffer register.","As indicated above, a step of the above described process illustrated in  is performed for each of the five scripts in the script buffer registers each time the program iterates through the operator station routine . Each script buffer register may have a different status word and, accordingly, the program will perform different steps of the dispensing process for each script in the script buffer register. Thus, while the label for one script is being printed, the pills for other scripts may be in the process of being counted, being dumped from the upper hopper to the lower hopper, or be waiting in the lower hopper for their scripts turn to have a label printed. In this manner, the dispensing operation for up to five prescriptions can be processed simultaneously. However, only one printer is provided so each script must wait its turn for printing a label. To reduce the chances of error, a new label will not be printed until the filled prescription of the previous label has been deposited in the chute. Accordingly, the last part of the dispensing process from printing the label to detecting the filled prescription vial in the chute is performed for only one script at a time.","It will be apparent to those skilled in the art and it is contemplated that variations and\/or changes in the embodiments illustrated and described herein maybe made without departure from the present invention. Accordingly, it is intended that the foregoing description is illustrative only, not limiting, and that the true spirit and scope of the present invention will be determined by the appended claims."],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 5","FIG. 4"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIG. 6","FIG. 3"]},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 7","FIG. 4"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 8","FIG. 3"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":["FIG. 10","FIG. 10"]},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 11","FIG. 11"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 14","FIG. 14"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIGS. 15A and 15B","FIG. 14"]},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIGS. 17A through 17D"}]},"DETDESC":[{},{}]}
