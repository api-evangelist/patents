---
title: Client diversity policy sharing with the transport layer
abstract: Diversity constraints with respect to connections or links in a client layer are conveyed to a server layer where those links or connections are served by paths in the server layer. A network device in the server layer stores data associated paths in the server layer with identifiers for connections in the client layer. The network device in the server layer receives from a network device in the client layer a request to set up a path in the server layer for a connection in the client layer. The network device in the server layer receives information describing the diversity requirements associated with connections in the client layer. The server layer network device computes a route in the server layer for the connection specified in the request based on the diversity requirements.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08743679&OS=08743679&RS=08743679
owner: Cisco Technology, Inc.
number: 08743679
owner_city: San Jose
owner_country: US
publication_date: 20110228
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","DESCRIPTION OF EXAMPLE EMBODIMENTS"],"p":["The present disclosure relates to networking systems and environments.","In networking environments that employ an optical network (L0) layer (server layer), the communication of \u201crisk\u201d information between a client network (L3) layer (client layer) and the server layer ensures that a single optical failure does not impair a network device's ability in the client layer to protect traffic around the failure. When switching capabilities are added to the server layer, the risks within the server layer can change over time. Moreover, often, light paths in the server layer need to be re-routed due to maintenance activities and these changes are done in the field by service providers, making it difficult for network operators to stay up to date with these changes. The dynamic nature of the server layer makes it more difficult for the client layer to route traffic around a failure or to maintain desired diversity requirements for a connection.","Overview","Diversity constraints with respect to connections or links in a client layer are conveyed to a server layer where those links or connections are served by paths in the server layer. A network device in the server layer stores data associated paths in the server layer with identifiers for connections in the client layer. The network device in the server layer receives from a network device in the client layer a request to set up a path in the server layer for a connection in the client layer. The network device in the server layer receives information describing the diversity requirements associated with connections in the client layer. The server layer network device computes a route in the server layer for the connection specified in the request based on the diversity requirements.","Example Embodiments","Referring first to , a networking environment is shown at  comprising a client layer  and a server layer . In one form, the client layer  comprises an Internet Protocol (IP) network and the connections in the client layer are between IP addresses, and the server layer  comprises an optical network and the routes in the server layer are light paths. For example, the server layer  uses optical dense wavelength division multiplexing (DWDM) transport and routing or Optical Transport Network (OTN) and Synchronous Optical Network (SONET) transport and routing. This is only an example. In another form, the server layer  is an Ethernet network and the routes in the server layer are between devices with medium access control (MAC) addresses.","In the client layer , there are a plurality of network devices ()-() that perform routing\/forwarding operations. Examples of such network devices are Layer 3 (L3) routers, access switches, aggregation switches, etc.  shows six network devices by way of example only and for purposes of describing the techniques herein, and it should be understood that there are many more devices in a network deployment. A network management station  is also provided to configure the network devices in the client layer  and to provide diversity requirements information, as described further hereinafter.","Similarly, in the server layer , there is a plurality of network devices () and () and ()-(). In one example, these network devices are optical switches, repeaters, add-drop modules, etc. Network devices () and () in the server layer  are shown with a connection to network devices () and (), respectively, in the client layer . This connection is meant to indicate that information is communicated (in both directions) between the client layer  and the server layer  at these devices. Moreover, these connections represent communication between a control plane in the client layer  and a control plane in the server layer  and an eventual data plane connection between the client layer  and server layer .","Certain network elements in the client layer  may be integrated with corresponding network elements in the server layer . For example, the client layer control plane intelligence in network element () in the client layer may be integrated with or configured to communicate over an application programming interface with the server layer control plane intelligence in network element () in the server layer. The same would hold true for network element () in the client layer  and network element () in the server layer . Thus, the communication between the network devices () and () and the network devices () and (), respectively, in the server layer  may be by way of an application programming interface.","Paths between network elements in the server layer  may be re-routed for a variety of reasons. For example, light paths are re-routed for maintenance purposes. In addition, optical equipment may fail, thereby destroying a light path until a failover to a protection path can occur. The client layer  sends connection requests to the server layer  and these requests may involve underlying assumptions as to diversity requirements between the connections the client layer  is seeking to be served by the server layer . However, when the light paths in the server layer  are re-routed, there is no way to know whether the re-routed paths have respected the diversity requirements.","Accordingly, the client layer  provides information describing its diversity requirements to the server layer , and the server layer  performs the routing necessary to comply with the diversity requirements, assuming the conditions in the server layer  can accommodate those diversity requirements. There may be situations when the server layer  cannot accommodate the diversity requirements of the client layer .","For example, as depicted in , network device () in the client layer sends a message to network device () in the server layer  indicating that Link Z in the client layer  needs to be diverse from Links X and Y in the client layer . In another example, the diversity requirements may be defined in terms of multiple connections, as described further hereinafter in connection with . The network device () may derive this diversity information on its own or may receive it from the network management station . Network device () in the server layer  receives the diversity information from network device () in the client layer  and generates a light path, e.g., Light Path  shown in , for Link Z. In addition, one of the network devices in the server layer , e.g., network device () or () stores data (e.g., an association or mapping table) that indicates that \u201cLink Z is implemented by Light Path \u201d, thus associating or mapping a link the client layer  with a path in the server layer . The link or connection in the client layer , e.g., \u201cLink Z,\u201d may be represented by IP link names or IP addresses (e.g., IP address of network device () and IP address of network device ()), and the server layer  associates these names or addresses with a path, e.g., an optical path, in the server layer . In another form, a link name can be a user-selected name (e.g., \u201cSFO-NYC #\u201d). The network device () in the client layer will likewise maintain data for global link names (e.g., X, Y and Z). The network device () may send the diversity requirements information to the server layer  at the time that it sends the connection request for Link Z or any time thereafter. Moreover, the network device () may send updated diversity requirement information as conditions change in the client layer  and the server layer  will attempt to accommodate the updated diversity requirements. The interface protocol that the client layer  uses to send diversity information to the server  is, for example, the User Network Interface (UNI) protocol and it is sent using an application programming interface between the client layer network device and the server layer network device, e.g., between devices () and ().","The diversity constraints in the client layer  may be obtained through any of a variety of means. In one example, a network planning tool executed on the network management station  generates the diversity constraints during the network planning process and\/or network adjustment phases. In another example, a network device in the client layer  knows what needs to be diverse based on working\/protection Multiple Protocol Label Switching-Traffic Engineering (MPLS-TE) Fast Re-Route (FRR) tunnels. The MPLS-TE FRR feature allows a network element to obtain link and node protection using the Bidirectional Forwarding Detection (BFD) protocol to provide fast forwarding path failure detection times for all media types, encapsulations, topologies, and routing protocols. In addition to fast forwarding path failure detection, the BFD protocol provides a consistent failure detection method for network administrators. In another example, there is \u201cdual-homing\u201d from an edge network device to a core network device and the diversity constraints are readable available. In still another example, there are two or more links between the same network devices that protect each other and the diversity constraints from such a situation are available. In another example, there is a triangle formed for a Next Hop (NHOP) MPLS-TE FRR tunnel and the diversity constraints are thus available. In yet another example, an IP Fast Reroute loop-free alternate (LFA) computation is performed at a network device in the client layer to provide protection against link failure, in which case locally computed repair paths are used to prevent packet loss caused by loops that occur during network re-convergence after a failure. This LFA computation can therefore reveal diversity constraints in the client layer.","Referring now to , a block diagram is shown for an example of a network device in the client layer  that is configured to send a connection request and diversity requirements information to the server layer . The device depicted in  is, for example, network device () or network device () that routes data in the client layer  and also communicates with a network device in the server layer . The client layer network device comprises a controller , a network interface unit , routing\/forwarding hardware , queuing memory  and working memory . The controller  is, for example, a microprocessor or microcontroller, and executes one or more software programs comprising instructions encoded or stored in memory , such as instructions for the client layer path diversity process logic . The network interface unit  is a network interface card or similar device that transmits and receives data using an applicable protocol, e.g., Ethernet or IP, etc. The routing\/forwarding hardware  is a device that performs the packet forwarding\/routing functions in the client layer . In one form, the routing\/forwarding hardware  is implemented with one or more application specific integrated circuits (ASICs). The queuing memory  is a memory device, e.g., random access memory (RAM), allocated to store packets that are to be routed\/forwarded by the network device.","The working memory  is a memory device and may comprise RAM, read only memory (ROM), magnetic disk storage media devices, optical storage media devices, flash memory devices, electrical, optical, or other physical\/tangible memory storage devices. Thus, in general, the memory  may comprise one or more computer readable storage media (e.g., a memory device) encoded with software comprising computer executable instructions and when the software is executed (by the controller ) it is operable to perform the operations described herein in connection with process logic . The process logic  is described hereinafter in connection with . Also stored in memory  is data  for the global link names of the links that are managed by the network device in the client layer. Examples of global link names are \u201cX,\u201d \u201cY,\u201d and \u201cZ\u201d in , and these names may take the form of IP addresses between two points in the client layer, or other identifiers between points in the client layer. The network device uses data  when sending a connection request to the server layer  and also when specifying diversity requirements to the server layer. In other words, the connection request and diversity requirements information may be expressed in terms of global link names that are contained in a message to the network device in the server layer.","Reference is now made to  for an example block diagram of a network device in the server layer , e.g., network device () and () that participates in the diversity policy sharing techniques described herein. The server layer network device comprises a controller , server layer switching hardware  and a memory device . The controller  is, for example, a microprocessor or microcontroller, such as that described above in connection with the client layer network device shown in . The server layer switching hardware  comprises suitable switching hardware depending on the server layer implementation, e.g., DWDM, SONET, OTN, etc. In one example, the server layer switching hardware comprises an optical switching unit, as well as one or more other optical components such as add-drop modules, cross-connect modules, etc. The network interface unit  is a network interface card or suitable device that enables the server layer network device to communicate with the client layer network device for purposes of exchanging messages to enable the diversity policy sharing techniques described herein. The memory  may take any of the forms described above for memory device  in . The memory  stores instructions for server layer path routing process logic . The controller  executes the instructions for process logic  to perform the operations described hereinafter in connection with . In addition, the memory  stores mapping data  that maps or associates a connection\/link identifier (e.g., link name) in the client layer with a path identifier in the server layer. For the example shown in , the mapping data  would store data indicating that \u201cLink Z is implemented with Light Path .\u201d Link Z may be represented by IP addresses for network device () and (), as explained above.","Turning now to , the client layer path diversity process logic  is described. The process logic  is executed in a client layer network device that is capable of communicating with a server layer network device for diversity policy sharing as depicted in . Reference is also made to  for the description of . At , the client layer network device, e.g., network device () or () in the example of , receives client layer diversity requirements from manual input, e.g., from a network administrator at network management station  or generated by a network planning software tool on the network management station . In another form, the client layer network device automatically derives the diversity requirements as described above. At , the client layer network device stores data for the global link names (e.g., IP addresses) and data representing the diversity requirements (obtained at ), as depicted by the data  shown in . At , the client layer network device sends a message to the server layer network element, e.g., network device () or (), containing a connection request to set up a connection for a link. The connection request contains the link name for the link, e.g., IP addresses of the devices in the client layer for the link. The connection request may be generated by retrieving a link name from the stored data of link names. At , at the same time that the connection request is sent or sometime thereafter (but before the connection is actually set up in the server layer), the client layer network device sends to the server layer network device information describing diversity requirements associated with the link. At this point, the server layer network device can begin implementing a path in the server layer for the link specified in the connection request and in compliance with the diversity requirements.","After the diversity requirements are initially sent at , it is determined at  whether the client layer diversity requirements have changed. Changes in the client layer due to equipment failures or reconfigurations may result in changes in the diversity requirements. When it is determined that changes have occurred in the client layer diversity requirements, then at , the client layer network device sends updated client layer diversity requirements to the server layer network element. Otherwise, the process loops back to operation  until and if changes occur in the client layer diversity requirements.","In sum, the flow chart of  depicts a method in which, at a network device in a client layer that comprises a plurality of connections, data is stored identifying the plurality of connections. The network device in the client layer sends to a network device in the server layer a request to set up a path in the server layer for a connection in the client layer. The network device in the client layer sends information describing diversity requirements associated with connections in the client layer.","Reference is now made to  for a description of the server layer path routing process logic  executed in a server layer network device, e.g., network element () and (). The process logic  operates in a complementary fashion to the process logic  in a client layer network device. At , the server layer network device stores data maintaining a mapping or association between paths, e.g., light paths, in the server layer and identifiers for connections in the client layer, e.g., link names. This corresponds to data  shown in . At , the server layer receives a message containing a connection request from the client layer network device, in response to operation  in . At , the server layer network device receives the diversity requirements information for the connection, in response to operation  in . At , the server layer network device computes a route in the server layer for the connection specified in the request in compliance with (i.e., respecting) the original diversity requirements or updated diversity requirements, and routes the connection in a path in the server layer for the connection based on the computed route. In addition, at , the server layer network devices updates the path route computations to re-route the path as needed based on changing conditions in the server network layer in order to respect the diversity requirements. Furthermore, as explained hereinafter in connection with the example scenarios of , the route computed in the server layer is based further on shared risk group link data representing paths in the server layer that share connectivity risks.","At , it is determined whether the server layer network device receives updated client layer diversity requirements from the client layer. If updated client layer diversity requirements are received, then the path route computations and routing at  are repeated based on the updated client layer diversity requirements.","At , a determination is made as to whether, based on the routing in the server layer, it is possible to route the connection in the server layer to comply with the diversity requirements, i.e., whether the client layer diversity requirements are violated. A situation may arise in which it is not possible for the server layer to accommodate the client layer diversity requirements. If the diversity requirements cannot be accommodated, then at , one or more actions may be performed. For example, a warning message is generated and sent to a server layer network administrator, a message is sent to the client layer network device to re-route the link at the client layer (with perhaps different diversity requirements) and\/or a message is sent to alert a client layer network administrator (e.g., at the network management station ) that the diversity requirements are violated. In general, the warning message can be sent to a network device in the client layer and\/or a network device in the server layer when it is determined that the diversity requirements are violated. When it is determined at  that the diversity requirements are not violated, then the process goes back to .","As explained above in connection with , a link diversity policy can be conveyed from the client layer to the server layer as part of a connection request for setting up a link. However, the link diversity policy information can also be sent separately after link set up over a separate application programming interface. When the server layer network device receives the link diversity policy information in a message from the client layer, it conveys the new diversity constraint information along the relevant paths in the server layer.","Thus, in sum, the flow chart of  depicts a method in which diversity constraints with respect to connections or links in a client layer are conveyed to a server layer where those links or connections are served by paths in the server layer. A network device in the server layer stores data associated paths in the server layer with identifiers for connections in the client layer. The network device in the server layer receives from a network device in the client layer a request to set up a path in the server layer for a connection in the client layer. The network device in the server layer receives information describing the diversity requirements associated with connections in the client layer. The server layer network device computes a route in the server layer for the connection specified in the request based on the diversity requirements.","Reference is now made to  for examples of the diversity policy sharing techniques. Beginning first with , a diagram is shown for a network topology comprising links W, X, Y and Z in the client layer and network devices A, B, C and D that bridge between corresponding nodes or points in the client layer and server layer. Links W, X, Y and Z are identified by reference numerals , ,  and , respectively, and network devices A, B, C and D are denoted , ,  and . There are intervening nodes in the server layer shown at -. The paths in the server layer pass through the intervening network nodes - and some of these paths are labeled with reference numerals , , , , ,  and . For the example network topology shown in , the client layer diversity constraint is that the connections {X,Y} be diverse from the connections {W,Z}. This diversity constraint is passed from the client layer to the server layer during the set up of one of the links W, X, Y and Z or before or after the setup of these links, using a separate application programming interface as explained above. This example of a diversity constraint refers to at least one non-local link. For example, if a connection request is received at network device A  for a route to another network device, e.g., network device B , the diversity constraint {X,Y} must be diverse from {W,Z} refers to at least one link not local to network device A, e.g., link Z. This is to be distinguished from existing schemes that allow for specifying the diversity constraint only with respect to paths that are local to the two nodes for which the path is to be routed.","Turning now to , the network topology of  is shown together with shared risk link group data provisioned into the server layer. A shared risk link group is a group of links that share a common fiber or physical attribute such that if one of the links in the group fails, the other links in the group fail. The shared risk link group data is provisioned into the server layer and disseminated by a suitable protocol, such as the Interior Gateway Protocol but is not relayed to the client layer. Alternatively, the shared risk link group for each server layer path (e.g., light path) is disseminated in the server layer. Examples of shared risk link groups (SRLGs) in  are denoted by reference numerals \u201c\u201d, \u201c\u201d and \u201c\u201d, where SRLG  is associated with server layer paths  and , SRLG  is associated with server layer paths , and SRLG  is associated with server layer paths  and .","Turning now to , the network topology of  is shown in which network device A  sends a connection request to the server layer for the set up of a link to network device B , i.e., set up of link X. In this example, there are two possible paths for link X, denoted X-path  and X-path  in . If the diversity constraints were conveyed to the server layer before the set up request, the server layer would already know that link X must be diverse from both links W and Z. In the optical shared risk link groups, X-path  shares shared risk link group \u201c\u201d with link W and therefore X-path , that corresponds to link W, is rejected. The server layer selects X-path , i.e., path  in the server layer, to comply with the client layer diversity constraints for this example.","Proceeding to , the scenario of  is continued but now a maintenance activity is performed on link W such that link W is re-routed to a new path, path . The server layer checks this new path against the diversity policy received for link X. The server layer will determine that this new path is still diverse from links X and Y (and is also SRLG-diverse from X and Y) and it is accepted.","If, on the other hand, the server layer determines that the new path conflicts with the diversity policy, then the following escalation may take place. A warning message may be sent to the server layer network or system administrator from a server layer network device suitably equipped as described above in connection with . If the network administrator decides to proceed despite the warning message about the diversity conflict, an alarm message may be generated in the server layer network device. In another example, the server layer network device sends a message to the client layer network device and ultimately to a network management station (e.g., network management station ) to report the diversity policy violation. The client layer network device may then initiate a re-route of tunnels to another path (not shown) to protect paths {X, Y} from {W, Z}","Turning to , the scenario of  is continued in which now the shared risk link group \u201c\u201d on link W is updated to shared risk link group \u201c\u201d due, for example, to a fiber being routed over a different physical route. The server layer then needs to determine whether the link X can be routed in the server layer by the path shown by the dotted line in . If shared risk link group information were used to determine whether the server layer could accommodate this update, the server layer would determine that link X could be re-routed as shown in  because the original set up request for link X would have contained the requirement \u201cexclude shared risk link group .\u201d However, the server layer was provided with the diversity policy information that link X must be diverse from link W, and therefore determines that link X cannot be re-routed on the path as shown in .",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 11","FIG. 9"],"b":"1"},"In summary, techniques are provided herein to allow, upon client layer link set up or at any other point in time, specifying client layer links that must be diverse from the new link (or groups of links\/paths that must be diverse from each other), so that the server layer can ensure diversity during the server layer path selection process and maintain this diversity in the presence of rerouting of paths in the server layer.","These techniques maintain the required diversity in the presence of server layer rerouting. Diversity constraints can be tracked at the time of the link setup, and any time thereafter as more links are added or as other changes occur over time in the server layer that may cause violations of the diversity constraints. Subsequent violations of the diversity constraints are reported back to the client layer. According to the techniques described herein, the diversity constraints can refer to at least one non-local link with respect to the network device that receives the connection request. In addition, the amount of data that must be disseminated in the protocol used in the server layer, e.g., the Interior Gateway Protocol is greatly reduced. For example, a few link identifiers are set instead of potentially hundreds of shared risk link groups. Further still, these techniques enable several additional features in the server layer, such as alarming the user if the diversity is not maintained, and signaling to the network device in the client layer to re-route Label Switch Paths in such cases. Moreover, as depicted in the examples of , the diversity constraints can be specified as groups of links that must be pair-wise diverse from each other (reflecting client path diversity constraints\u2014not just link diversity).","The techniques described herein may be embodied by methods as described herein and depicted by the flow charts of , and in an apparatus as depicted by the block diagrams of , and in computer readable medium storage media encoded with software comprising computer executable instructions. In another form, an apparatus is provided (as depicted in ) that comprises routing\/forwarding hardware configured to switch data among connections in a client layer; a controller coupled to the routing\/forwarding hardware; a memory configured to store data identifying a plurality of connections; wherein the controller is configured to: send to a network device in a server layer a request to set up a path in the server layer for a connection in the client layer; and send to the network device in the server layer information describing diversity requirements associated with the connections in the client layer.","In another form, an apparatus (as depicted in ) is provided that comprises switching hardware configured to switch data among paths in a server layer that routes paths for connections in a client layer; a controller coupled to the switching hardware; a memory configured to store data including data associating paths in the server layer with identifiers for connections in the client layer; wherein the controller is configured to: receive a request to set up a path in the server layer for a connection in the client layer; receive information describing diversity requirements associated with connections in the client layer; and compute a route in the server layer for the connection specified in the request based on the diversity requirements.","In still another form, one or more computer readable storage media encoded with software comprising computer executable instructions and when the software is executed operable to: at a network device in a server layer that routes paths in the server layer for connections in a client layer, store data associating paths in the server layer with identifiers for connections in the client layer; and compute a route in the server layer for a connection specified in a request based on information describing diversity requirements associated with connections in the client layer.","The above description is intended by way of example only."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIGS. 6-11"}]},"DETDESC":[{},{}]}
