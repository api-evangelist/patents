---
title: Method, system, and program for managing a speed at which data is transmitted between network adaptors
abstract: Provided are a method, system, and program for managing data transmissions at a local network device communicating with a linked network device over a network, wherein each network device is capable of transmitting data at different speeds. An operation is initiated to change a current transmission speed at which data is transmitted between the local and linked network devices in response to a speed change event. A determination is made of a new transmission speed different from the current transmission speed. A register is set in the local network device to indicate the new transmission speed. A speed change request and the new transmission speed are transmitted to the linked network device to cause the local and linked network devices to communicate at the new transmission speed, wherein the transmission occurs without terminating a linked exchange occurring between the local and linked network devices.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08019887&OS=08019887&RS=08019887
owner: Intel Corporation
number: 08019887
owner_city: Santa Clara
owner_country: US
publication_date: 20030904
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","Additional Embodiment Details"],"p":["1. Field of the Invention","The present invention relates to a method, system, and program for managing a speed at which data is transmitted between network adaptors.","2. Description of the Related Art","In a network environment, a network adaptor card on a host computer, such as an Ethernet card, Fibre Channel card, etc., will receive Input\/Output (I\/O) requests or responses to I\/O requests initiated from the host. Often, the host computer operating system includes a device driver to communicate with the network adaptor, and provide an interface between the host operating system and the network adaptor.","When two Ethernet cards communicate over a network, they both engage in an auto-negotiation protocol to select a highest possible common mode speed at which both are capable of communicating, such as 10 megabits per second (Mbps), 100 Mbs, 1000 Mbs, half duplex, full duplex, etc. During auto-negotiation, the Ethernet devices transmit a series of link pulses that advertise their capabilities to the other device that shares the link segment. Devices transmit a Link Code Word (LCW) that is encoded with the device transmission capabilities. The hardware in the Ethernet cards is configured to select the highest common speed between the two devices based on the capabilities communicated in the link pulses. Further details of the auto-negotiation process to select a highest common speed between two network devices is described in the publication IEEE Standard 802.3-2002 (Copyright by the Institute of Electrical and Electronic Engineers (IEEE), 2002), which publication is incorporated herein by reference in its entirety.","With prior art Ethernet auto-negotiation, the two linked devices communicate at the highest common speed, regardless of whether the highest speed is needed. Transmissions at higher speeds consume greater power than lower speed transmissions. Moreover, devices may be consuming additional power to transmit at the highest common link speed when such high speeds are not needed. For instance, lower speed transmissions may be sufficient when checking electronic mail or \u201csurfing\u201d the Internet. Power conservation may be especially important for battery powered computing devices, such as laptops, hand held computers, etc., and computers deployed in an energy conservation sensitive environment.","For these reasons, there is a need in the art to provide improved techniques for managing the transmission speed between network devices.","In the following description, reference is made to the accompanying drawings which form a part hereof and which illustrate several embodiments of the present invention. It is understood that other embodiments may be utilized and structural and operational changes may be made without departing from the scope of the present invention.",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1","b":["2","2","4","4","6","6","8","8","10","10","10","10","2","2","2","2","10","10","2","2","2","2","10","10","4","4","8","8","10","10","12","12","10","10","10","10","14","14","16","10","10","12","12"],"i":["a","b ","a","b","a","b","a","b","a","b","a","b ","a","b ","a","b ","a","b ","a","b","a","b ","a","b ","a","b ","a","b ","a","b ","a","b ","a","b","a","b ","a","b ","a","b ","a","b "]},"The computers , further include a device driver , that executes in memory , and includes network adaptor , specific interfaces to communicate with and control the network adaptor , and interface between the operating system , and the network adaptor , . The computers , may further include a transport protocol driver (not shown) executing in memory that processes the content of messages included in the packets received at the network adaptor , that are wrapped in a transport layer, such as TCP and\/or IP, Internet Small Computer System Interface (iSCSI), Fibre Channel SCSI, parallel SCSI transport, or any other transport layer protocol known in the art. In further embodiments, the transport protocol driver operations may be performed within the network adaptor , hardware, such as the case with a Transport Offload Engine (TOE) adaptor.","The computers , also include one or more application programs , that execute in memory , to perform various operations, including transmitting and receiving data through the network adaptors , ",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2","b":["50","10","10","50","52","54","56","10","10","50","50","10","10"],"i":["a","b ","a","b","a","b "]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3","b":["70","50","72","74","70"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":["FIGS. 4 and 5","FIGS. 4 and 5","FIGS. 4 and 5"],"b":["12","12","10","10","12","12","10","10","18","18","2","2","18","18","20","20","20","20","16","20","20","18","18","18","18","20","20","18","18","2","2","10","10","10","10","12","12","10","10","10","12","12","10","10"],"i":["a","b ","a","b ","a","b ","a","b","a","b ","a","b","a","b ","a","b ","a","b ","a","b ","a","b ","a","b ","a","b ","a","b ","a","b ","a","b ","a","b","a","b ","a ","b ","a","a","b ","a","b "]},"With respect to , after initiating an operation to change the speed (at block ), the local network adaptor generates (at block ) a speed change request  including a new transmission speed  (), such as 10BASE-T, 100BASE-TX, 100BASE-T4, 100BASE-T, 1000BASE-X, 1000BASE-T, etc., and transmits (at block ) the speed change request to the linked network adaptor ",{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 5","FIG. 5"],"b":["12","10","106","10","108","74","14","10","108","1","74","10","110","14","74","112","10","10","108","10","74","14","10","114","10","10","74"],"i":["b ","b","b ","b ","b","b ","a ","b ","a ","b","b ","b ","b","a ","b "]},"With respect to , upon the local network adaptor , receiving (at block ) the acknowledgment request, if (at block ) acknowledgment is positive, then the local network adaptor sets (at block ) the configuration registers to indicate data transmission at the requested new transmission speed. Otherwise, if negative acknowledgment was returned, then the local network adaptor enters (at block ) an error handling mode. In this error handling mode, the network adaptor may continue to transmit at the previously negotiated speed, which would be the highest common transmission speed between the local and linked adaptors , . Alternatively, the local network adaptor may determine the next higher or lower transmission speed the local network adaptor supports, depending upon whether the speed change request was to increase or decrease the transmission speed, respectively, and then perform the logic of  with respect to a next higher or lower transmission speed.","In still further alternative embodiments, the local network adaptor may be aware of the transmission capabilities of the linked network adaptor , which would be determined when the local and linked network adaptors , initially establish communication. In such embodiments, the local network adaptor would select the next highest or lowest common transmission speed between the local and linked network adaptors , as the new transmission speed, depending on whether the speed change request is to increase or decrease the transmission speed, respectively. Such embodiments would avoid the situation where the linked network adaptor returns negative acknowledgment due to the local network adaptor requesting a new transmission speed the linked network adaptor does not support.","Still further, the speed change request may request that the speed change be to an absolute highest or lowest speed, which would cause the local network adaptor to attempt communication at the very highest or lowest supported speed, respectively. Additionally, the speed change request may request a speed that is some number of levels higher or lower than the current speed, assuming the local device supports multiple different speed levels. In such case, the local network adaptor would attempt to establish communication at the requested number of levels higher or lower than the current transmission speed.",{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 6","b":["18","18","10","10","18","18","20","20","10","10","18","18","10","18","18","10","10","18","18","18","18","150","18","152","18","18","20","18","20","12"],"i":["a","b ","a","b ","a","b ","a","b ","a","b","a ","a ","a ","b ","b ","b ","a","a","b ","a","b","a ","a ","a ","a ","a","a ","a "]},"If (at block ) the new transmission speed is slower than the current transmission speed, then the device driver calls (at block ) the network protocol to update the configuration registers including advertised capabilities to eliminate any settings indicating transmission speeds capabilities greater than the determined transmission speed. Otherwise if the new transmission speed is greater than the current speed, then the device driver calls the network protocol to update (at block ) the configuration registers including advertised capabilities to eliminate any transmission speeds capabilities less than determined transmission speed. Before updating the transmission speed at blocks  or , the device driver may reset the registers including the advertised capabilities to the initial default values to undo any previous speed setting changes before the current updating is performed to eliminate advertised speed capabilities above or below the determined speed capability. From block  or , the device driver calls the network protocol to restart (at block ) the auto-negotiation process to negotiate with the linked network adaptor to transmit at the highest common speed based on the new advertised capabilities of the local network adaptor set by the device driver . Thus, if the device driver had eliminated the higher speed transmission in the advertised capabilities registers , then the network adaptors , would establish communication at the highest common speed of the remaining speeds indicated in the capability registers of the local network adaptor ","In certain embodiments, the local device driver may be aware of the transmission speed capabilities of the linked network adaptor . In such embodiments, the local device driver may set the new transmission speed to the next highest or lowest common speed depending on whether the speed adjustment is to increase or decrease the speed, respectively.","With the described embodiments of , changing the network transmission speed can occur without any noticeable delay to the user because the request change is transmitted during normal packet transmissions within a packet or within a preamble, so that the change occurs almost immediately once the linked network adaptor determines that the requested new speed is supported and returns positive acknowledgment. Thus, the speed change request is transmitted without terminating the linked exchange occurring between the local and linked network devices. Once the positive acknowledgment is returned, both network adaptors may begin transmitting at the requested new transmission speed. Until the positive acknowledgment is returned, the network adaptors communicate using the previously negotiated transmission speed. The described embodiment of  may take longer to implement the new transmission speed than the embodiment of  because the device driver causes the speed to change by restarting the auto-negotiation process to negotiate a speed with the new advertised capabilities of the network adaptor having fewer indicated capabilities. With the embodiment of , transmissions are delayed until the new transmission speed is auto-negotiated, which may be noticeable to a user. However, with , the speed change request occurs without terminating the linked exchange occurring between the local and linked network devices.","The described embodiments provide techniques to change the transmission speed used to transmit data between network adaptors. The described embodiments allows a change to a slower transmission speed if current network traffic is relatively low. Lowering the transmission speed can conserve energy consumed by the network adaptor, which may be important for portable devices and energy conservation. Moreover, the described embodiments allow an increase in the transmission speed in the event that traffic has increased at the network adaptor or an application program anticipates a need for additional network transmission speed and bandwidth to accommodate anticipated large data transmissions.","The described techniques for changing the data transmission speed between network adaptors may be implemented as a method, apparatus or article of manufacture using standard programming and\/or engineering techniques to produce software, firmware, hardware, or any combination thereof. The term \u201carticle of manufacture\u201d as used herein refers to code or logic implemented in hardware logic (e.g., an integrated circuit chip, Programmable Gate Array (PGA), Application Specific Integrated Circuit (ASIC), etc.) or a computer readable medium, such as magnetic storage medium (e.g., hard disk drives, floppy disks, tape, etc.), optical storage (CD-ROMs, optical disks, etc.), volatile and non-volatile memory devices (e.g., EEPROMs, ROMs, PROMs, RAMs, DRAMs, SRAMs, firmware, programmable logic, etc.). Code in the computer readable medium is accessed and executed by a processor. The code in which preferred embodiments are implemented may further be accessible through a transmission media or from a file server over a network. In such cases, the article of manufacture in which the code is implemented may comprise a transmission media, such as a network transmission line, wireless transmission media, signals propagating through space, radio waves, infrared signals, etc. Thus, the \u201carticle of manufacture\u201d may comprise the medium in which the code is embodied. Additionally, the \u201carticle of manufacture\u201d may comprise a combination of hardware and software components in which the code is embodied, processed, and executed. Of course, those skilled in the art will recognize that many modifications may be made to this configuration without departing from the scope of the present invention, and that the article of manufacture may comprise any information bearing medium known in the art.","In the described embodiments, certain operations were described as being performed by the device driver , and network protocol , . In alternative embodiments, operations described as performed by the device driver , may be performed by the network protocol , , and vice versa.","In described embodiments, the speed adjustment to a higher or lower transmission speed may include going to a higher or lower megabits per second rate, going from either full duplex to half duplex, or vice versa, or changing to any transmission mode known in the art that is supported by the network adaptors and provides a higher or lower data transmission rate than the current transmission rate.","In the described embodiments, the network protocol comprised the Ethernet protocol. In alternative embodiments, the network protocol may comprise any network protocol known in the art, including Fibre Channel, Wireless Fidelity (WiFi), etc.","In the described embodiments, the network adaptors are shown as being included in different devices or enclosures. In alternative embodiments, the network adaptors may be included in a same device or enclosure.","In certain implementations, the device driver and network adaptor embodiments may be included in a computer system including a storage controller, such as a SCSI, Integrated Drive Electronics (IDE), Redundant Array of Independent Disk (RAID), etc., controller, that manages access to a non-volatile storage device, such as a magnetic disk drive, tape media, optical disk, etc. In alternative implementations, the network adaptor embodiments may be included in a system that does not include a storage controller, such as certain hubs and switches.","In certain implementations, the device driver and network adaptor embodiments may be implemented in a computer system including a video controller to render information to display on a monitor coupled to the computer system including the device driver and network adaptor, such as a computer system comprising a desktop, workstation, server, mainframe, laptop, handheld computer, etc. Alternatively, the network adaptor and device driver embodiments may be implemented in a computing device that does not include a video controller, such as a switch, router, etc.","In certain implementations, the network adaptor may be configured to transmit data across a cable connected to a port on the network adaptor. Alternatively, the network adaptor embodiments may be configured to transmit data over a wireless network or connection, such as wireless LAN, Bluetooth, Wireless Fidelity (Wi-Fi), etc.","The illustrated logic of , , and  show certain events occurring in a certain order. In alternative embodiments, certain operations may be performed in a different order, modified or removed. Moreover, steps may be added to the above described logic and still conform to the described embodiments. Further, operations described herein may occur sequentially or certain operations may be processed in parallel. Yet further, operations may be performed by a single processing unit or by distributed processing units.","The foregoing description of various embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto. The above specification, examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention, the invention resides in the claims hereinafter appended."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Referring now to the drawings in which like reference numbers represent corresponding parts throughout:",{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIGS. 4","b":["5","6"]}]},"DETDESC":[{},{}]}
