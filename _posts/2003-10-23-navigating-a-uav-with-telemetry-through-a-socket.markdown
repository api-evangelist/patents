---
title: Navigating a UAV with telemetry through a socket
abstract: Navigating a UAV, including receiving in a remote control device a user's selection of a GUI map pixel that represents a waypoint for UAV navigation, the pixel having a location on the GUI; mapping the pixel's location on the GUI to Earth coordinates of the waypoint; receiving downlink telemetry, including a starting position from a GPS receiver on the UAV, from the UAV through a socket on the remote control device; calculating a heading in dependence upon the starting position, the coordinates of the waypoint, and a navigation algorithm; identifying flight control instructions for flying the UAV on the heading; and transmitting uplink telemetry, including the flight control instructions, through the socket to the UAV. In some embodiments the UAV is piloted, under control of a navigation computer on the UAV, from the starting position to the waypoint in accordance with a navigation algorithm.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07286913&OS=07286913&RS=07286913
owner: International Business Machines Corporation
number: 07286913
owner_city: Armonk
owner_country: US
publication_date: 20031023
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS","Introduction","Definitions","Navigating a UAV with a Telemetry through a Socket","Macros","Pixel Mapping","Navigation on a Heading to a Waypoint","Navigation with Headings set to a Cross Track Direction","Headings set to Cross Track Direction with Angular Thresholds","Macros","Navigation on a Course to a Waypoint","Navigation on a Course set to a Cross Track Direction"],"p":["1. Field of the Invention","The field of the invention is data processing, or, more specifically, methods, systems, and products for navigating a UAV.","2. Description of Related Art","Many forms of UAV are available in prior art, both domestically and internationally. Their payload weight carrying capability, their accommodations (volume, environment), their mission profiles (altitude, range, duration), and their command, control and data acquisition capabilities vary significantly. Routine civil access to these various UAV assets is in an embryonic state.","Conventional UAVs are typically manually controlled by an operator who may view aspects of a UAV's flight using cameras installed on the UAV with images provided through downlink telemetry. Navigating such UAVs from a starting position to one or more waypoints requires an operator to have specific knowledge of the UAV's flight, including such aspects as starting location, the UAV's current location, waypoint locations, and so on. Operators of prior art UAVs usually are required generally to manually control the UAV from a starting position to a waypoint with little aid from automation. There is therefore an ongoing need for improvement in the area of UAV navigations.","Methods, systems, and products are described for UAV navigation that enable an operator to input a single interface operation, a mouseclick or joystick button click, for example, thereby selecting a GUI pixel from a displayed GUI map of the surface of the Earth. The selected pixel maps to a waypoint. The waypoint coordinates are uploaded through uplink telemetry to a UAV which calculates a heading and flies, according to a navigation algorithm, a course to the waypoint. Alternatively, a remote control device can calculate a heading and uplink flight control instructions to a UAV. The heading is not necessarily the course if wind is present, depending on the navigation algorithm chosen for the flight. All this occurs with a single keystroke or mouseclick from the operator.","The operator's remote control device from which the pixel is selected is enabled according to some embodiments of the present invention to be very thin. Often the remote control device can be a browser in a laptop or personal computer or a microbrowser in a PDA enhanced only with client-side scripting sufficient to map a pixel to a waypoint and transmit the waypoint to the UAV. The UAV itself in such embodiments may comprise the intelligence, the navigation algorithms, a web server to download map images to a client browser in a remote control device, a repository of Landsat maps from which HTML screens are formulated for download to the remote control device, and so on. Alternatively, navigation algorithms and Landsat maps or other satellite imaging maps may reside on a more intelligent remote control device that uplinks flight control instructions to a UAV whose on-board computing capacity is relatively thin.","In addition to navigating with a single waypoint, operators of remote control devices according to embodiments of the present invention are enabled to enter through a user interface and upload to the UAV many waypoints which taken in sequence form an entire mission for a UAV that flies from waypoint to waypoint. In addition to providing for a mission route comprising many waypoints, typical embodiments also support \u2018macros,\u2019 sets of UAV instructions associated with waypoints. Such UAV instructions can include, for example, instructions to orbit, take photographs or stream video, and continue flying a route or mission to a next waypoint. Because waypoints are entered with selected pixels and macros may be created by selecting UAV instructions from a pull down menu in a GUI, complex missions may be established with a few keystrokes of mouseclicks on an interface of a remote control device. In embodiments where the waypoints and UAV instructions are uploaded and stored on the UAV along with the navigation algorithms needed to travel from waypoint to waypoint, the remote control device may lose communications with the UAV or even be destroyed completely, and the UAV will simply continue its mission.","More particularly, methods, systems, and products are disclosed in this specification for navigating a UAV. Typical embodiments include receiving in a remote control device a user's selection of a GUI map pixel that represents a waypoint for UAV navigation, the pixel having a location on the GUI; mapping the pixel's location on the GUI to Earth coordinates of the waypoint; receiving downlink telemetry, including a starting position from a GPS receiver on the UAV, from the UAV through a socket on the remote control device; calculating a heading in dependence upon the starting position, the coordinates of the waypoint, and a navigation algorithm; identifying flight control instructions for flying the UAV on the heading; and transmitting uplink telemetry, including the flight control instructions, through the socket to the UAV.","In typical embodiments, receiving downlink telemetry also includes listening on the socket for downlink data; storing downlink data in computer memory; and exposing the stored downlink data through an API to a navigation application. In typical embodiments, the downlink telemetry further comprises flight control instructions. In typical embodiments, The transmitting uplink telemetry further comprises monitoring computer memory for uplink data from a navigation application and, when uplink data is presented, sending the uplink data through the socket to the UAV.","Many embodiments also include receiving user selections of a multiplicity of GUI map pixels representing waypoints, each pixel having a location on the GUI; mapping each pixel location to Earth coordinates of a waypoint; assigning one or more UAV instructions to each waypoint; storing the coordinates of the waypoints and UAV instructions in computer memory on the remote control device; flying the UAV to each waypoint in accordance with one or more navigation algorithms; and operating the UAV at each waypoint in accordance with the UAV instructions for each waypoint. In such embodiments, operating the UAV at each waypoint in accordance with the UAV instructions also includes identifying flight control instructions in dependence upon the UAV instructions for each waypoint and transmitting the flight control instructions in the uplink telemetry through the socket from the remote control device to the UAV.","In many embodiments, mapping the pixel's location on the GUI to Earth coordinates of the waypoint also include mapping pixel boundaries of the GUI map to Earth coordinates; identifying a range of latitude and a range of longitude represented by each pixel; and locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map. In many embodiments, locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map is carried out by multiplying the range of longitude represented by each pixel by a column number of the selected pixel, yielding a first multiplicand; multiplying the range of longitude represented by each pixel by 0.5, yielding a second multiplicand; adding the first and second multiplicands to an origin longitude of the GUI map; multiplying the range of latitude represented by each pixel by a row number of the selected pixel, yielding a third multiplicand; multiplying the range of latitude represented by each pixel by 0.5, yielding a fourth multiplicand; and adding the third and fourth multiplicands to an origin latitude of the GUI map.","Also disclosed in this specification are methods, systems, and products for navigating a UAV that include receiving in a remote control device a user's selection of a GUI map pixel that represents a waypoint for UAV navigation, the pixel having a location on the GUI; mapping the pixel's location on the GUI to Earth coordinates of the waypoint; transmitting uplink telemetry, including the coordinates of the waypoint, to the UAV through a socket on the remote control device; receiving downlink telemetry, include a starting position from a GPS receiver, from the UAV through the socket; and piloting the UAV, under control of a navigation computer on the UAV, from the starting position to the waypoint in accordance with a navigation algorithm.","In such embodiments, transmitting uplink telemetry typically also includes monitoring computer memory for uplink data from a navigation application and, when uplink data is presented, sending the uplink data through the socket to the UAV. In such embodiments, receiving downlink telemetry is typically carried out by listening on the socket for downlink data; storing downlink data in computer memory; and exposing the stored downlink data through an API to a navigation application. In many embodiments, downlink telemetry may include Earth coordinates of waypoints or UAV instructions.","Typical embodiments also include receiving user selections of a multiplicity of GUI map pixels representing waypoints, each pixel having a location on the GUI; mapping each pixel location to Earth coordinates of a waypoint; assigning one or more UAV instructions to each waypoint; transmitting the coordinates of the waypoints and the UAV instructions in the uplink telemetry through the socket to the UAV; storing the coordinates of the waypoints and UAV instructions in computer memory on the UAV; piloting the UAV to each waypoint in accordance with one or more navigation algorithms; and operating the UAV at each waypoint in accordance with the UAV instructions for each waypoint.","In such embodiments, mapping the pixel's location on the GUI to Earth coordinates of the waypoint is carried out by mapping pixel boundaries of the GUI map to Earth coordinates; identifying a range of latitude and a range of longitude represented by each pixel; and locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map. In such embodiments, locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map typically is carried out by multiplying the range of longitude represented by each pixel by a column number of the selected pixel, yielding a first multiplicand; multiplying the range of longitude represented by each pixel by 0.5, yielding a second multiplicand; adding the first and second multiplicands to an origin longitude of the GUI map; multiplying the range of latitude represented by each pixel by a row number of the selected pixel, yielding a third multiplicand; multiplying the range of latitude represented by each pixel by 0.5, yielding a fourth multiplicand; and adding the third and fourth multiplicands to an origin latitude of the GUI map.","The foregoing and other objects, features and advantages of the invention will be apparent from the following more particular descriptions of exemplary embodiments of the invention as illustrated in the accompanying drawings wherein like reference numbers generally represent like parts of exemplary embodiments of the invention.","The present invention is described to a large extent in this specification in terms of methods for navigating a UAV. Persons skilled in the art, however, will recognize that any computer system that includes suitable programming means for operating in accordance with the disclosed methods also falls well within the scope of the present invention. Suitable programming means include any means for directing a computer system to execute the steps of the method of the invention, including for example, systems included of processing units and arithmetic-logic circuits coupled to computer memory, which systems have the capability of storing in computer memory, which computer memory includes electronic circuits configured to store data and program instructions, programmed steps of the method of the invention for execution by a processing unit.","The invention also may be embodied in a computer program product, such as a diskette or other recording medium, for use with any suitable data processing system. Embodiments of a computer program product may be implemented by use of any recording medium for machine-readable information, including magnetic media, optical media, or other suitable media. Persons skilled in the art will immediately recognize that any computer system having suitable programming means will be capable of executing the steps of the method of the invention as embodied in a program product. Persons skilled in the art will recognize immediately that, although most of the exemplary embodiments described in this specification are oriented to software installed and executing on computer hardware, nevertheless, alternative embodiments implemented as firmware or as hardware are well within the scope of the present invention.","\u201cAir speed\u201d means UAV air speed, the speed of the UAV through the air.","A \u201ccross track\u201d is a fixed course from a starting point directly to a waypoint. A cross track has a direction, a \u2018cross track direction,\u2019 that is the direction straight from a starting point to a waypoint. That is, a cross track direction is the heading that a UAV would fly directly from a starting point to a waypoint in the absence of wind.","\u201cGUI\u201d means graphical user interface, a display means for a computer screen.","\u201cHeading\u201d means the compass heading of the UAV. \u201cCourse\u201d means the direction of travel of the UAV over the ground. In the absence of wind, or in the presence of a straight tailwind or straight headwind, the course and the heading are the same direction. In the presence of crosswind, the course and the heading are different directions.","\u201cPosition\u201d refers to a location in the air or over the ground. \u2018Position\u2019 is typically specified as Earth coordinates, latitude and longitude. A specification of position may also include altitude.","A \u201cwaypoint\u201d is a position chosen as a destination for navigation of a route. A route has one or more waypoints. That is, a route is composed of waypoints, including at least one final waypoint, and one or more intermediate waypoints.","\u201cTDMA\u201d stands for Time Division Multiple Access, a technology for delivering digital wireless service using time-division multiplexing. TDMA works by dividing a radio frequency into time slots and then allocating slots to multiple calls. In this way, a single frequency can support multiple, simultaneous data channels. TDMA is used by GSM.","\u201cGSM\u201d stands for Global System for Mobile Communications, a digital cellular standard. GSM at this time is the de facto standard for wireless digital communications in Europe and Asia.","\u201cCDPD\u201d stands for Cellular Digital Packet Data, a data transmission technology developed for use on cellular phone frequencies. CDPD uses unused cellular channels to transmit data in packets. CDPD supports data transfer rates of up to 19.2 Kbps.","\u201cGPRS\u201d stands for General Packet Radio Service, a standard for wireless data communications which runs at speeds up to 150 Kbps, compared with current GSM systems which cannot support more than about 9.6 Kbps. GPRS, which supports a wide range of speeds, is an efficient use of limited bandwidth and is particularly suited for sending and receiving small bursts of data, such as e-mail and Web browsing, as well as large volumes of data.","\u201cEDGE\u201d stands for Enhanced Data Rates for GSM Evolution, a standard for wireless data communications supporting data transfer rates of more than 300 Kbps. GPRS and EDGE are considered interim steps on the road to UMTS.","\u201cUMTS\u201d stands for Universal Mobile Telecommunication System, a standard for wireless data communications supporting data transfer rates of up to 2 Mpbs. UMTS is also referred to W-CDMA for Wideband Code Division Multiple Access.","Methods, systems, and products for navigating a UAV are explained with reference to the accompanying drawings, beginning with .  sets forth a system diagram illustrating relations among components of an exemplary system for navigating a UAV. The system of  includes UAV () which includes a GPS (Global Positioning System) receiver (not shown) that receives a steady stream of GPS data from satellites (, ). For convenience of explanation, only two GPS satellites are shown in , although the GPS satellite network in fact includes 24 GPS satellites.","The system of  operates to navigate a UAV by receiving in a remote control device a user's selection of a GUI map pixel that represents a waypoint for UAV navigation. Each such pixel has a location on a GUI map, typically specified as a row and column position. Examples of remote control devices in  include mobile telephone (), workstation (), laptop computer (), and PDA (Personal Digital Assistant) (). Each such remote control device is capable of supporting a GUI display of a map of the surface of the Earth in which each pixel on the GUI map represents a position on the Earth.","Each remote control device also supports at least one user input device through which a user may enter the user's selection of a pixel. Examples of user input devices in the system of  include telephone keypad (), workstation keyboard (), workstation joystick (), laptop keyboard () and PDA touch screen ().","The system of  typically is capable of operating a remote control device to map the pixel's location on the GUI to Earth coordinates of a waypoint. The remote control device is often capable of receiving downlink telemetry including starting position from a GPS receiver on the UAV through the socket. In fact, the remote control device is often receiving downlink telemetry that includes a steady stream of GPS positions of the UAV. Receiving a starting position therefore is typically carried out by taking the current position of the UAV when the user selects the pixel as the starting position. In the example of , the remote control device generally receives the starting position from the UAV through wireless network (). The remote control device is often capable of transmitting uplink telemetry including the coordinates of the waypoint, flight control instructions, or UAV instructions through a socket on the remote control devices.","Wireless network () is implemented using any wireless data transmission technology as will occur to those of skill in the art including, for example, TDMA, GSM, CDPD, GPRS, EDGE, and UMTS. In a one embodiment, a data communications link layer is implemented using one of these technologies, a data communications network layer is implemented with the Internet Protocol (\u201cIP\u201d), and a data communications transmission layer is implemented using the Transmission Control Protocol (\u201cTCP\u201d). In such systems, telemetry between the UAV and remote control devices, including starting positions, UAV instructions, and flight control instructions, are transmitted using an application-level protocol such as, for example, the HyperText Transmission Protocol (\u201cHTTP\u201d), the Wireless Application Protocol (\u201cWAP\u201d), the Handheld Device Transmission Protocol (\u201cHDTP\u201d), or any other data communications protocol as will occur to those of skill in the art.","The system of  typically is capable of calculating a heading in dependence upon the starting position, the coordinates of the waypoint, and a navigation algorithm, identifying flight control instructions for flying the UAV on the heading, and transmitting () the flight control instructions from the remote control device to the UAV.","UAVs according to embodiments of the present invention typically include, not only an aircraft, but also automated computing machinery capable of receiving GPS data, operating telemetry between the UAV and one or more remote control devices, and navigating a UAV among waypoints.  is a block diagram of an exemplary UAV showing relations among components of included automated computing machinery. In , UAV () includes a processor (), also typically referred to as a central processing unit or \u2018CPU.\u2019 The processor may be a microprocessor, a programmable control unit, or any other form of processor useful according to the form factor of a particular UAV as will occur to those of skill in the art. Other components of UAV () are coupled for data transfer to processor () through system bus ().","UAV () includes random access memory or \u2018RAM\u2019 (). Stored in RAM () is an application program () that implements inventive methods according to embodiments of the present invention. In some embodiments, the application programming runs on an OSGi services framework (). OSGi Stands for \u2018Open Services Gateway Initiative.\u2019 The OSGi specification is a Java-based application layer framework that provides vendor neutral application layer APIs and functions. An OSGi service framework () is written in Java and therefore typically runs on a Java Virtual Machine (JVM) () which in turn runs on an operating system ().","Examples of operating systems useful in UAVs according to the present invention include Unix, AIX\u2122, and Microsoft Windows\u2122.","In OSGi, the framework is a hosting platform for running \u2018services\u2019. Services are the main building blocks for creating applications according to the OSGi. A service is a group of Java classes and interfaces that implement a certain feature. The OSGi specification provides a number of standard services. For example, OSGi provides a standard HTTP service that can respond to requests from HTTP clients, such as, for example, remote control devices according to embodiments of the present invention. That is, such remote control devices are enabled to communicate with a UAV having an HTTP service by use of data communications messages in the HTTP protocol.","Services in OSGi are packaged in \u2018bundles\u2019 with other files, images, and resources that the services need for execution. A bundle is a Java archive or \u2018JAR\u2019 file including one or more service implementations, an activator class, and a manifest file. An activator class is a Java class that the service framework uses to start and stop a bundle. A manifest file is a standard text file that describes the contents of the bundle.","The services framework in OSGi also includes a service registry. The service registry includes a service registration including the service's name and an instance of a class that implements the service for each bundle installed on the framework and registered with the service registry. A bundle may request services that are not included in the bundle, but are registered on the framework service registry. To find a service, a bundle performs a query on the framework's service registry.","In the UAV () of , software programs and other useful information may be stored in RAM or in non-volatile memory (). Non-volatile memory () may be implemented as a magnetic disk drive such as a micro-drive, an optical disk drive, static read only memory (\u2018ROM\u2019), electrically erasable programmable read-only memory space (\u2018EEPROM\u2019 or \u2018flash\u2019 memory), or otherwise as will occur to those of skill in the art.","UAV () includes communications adapter () implementing data communications connections () to other computers (), which may be wireless networks, satellites, remote control devices, servers, or others as will occur to those of skill in the art. Communications adapter () advantageously facilitates receiving flight control instructions from a remote control device. Communications adapters implement the hardware level of data communications connections through which UAVs transmit wireless data communications. Examples of communications adapters include wireless modems for dial-up connections through wireless telephone networks.","UAV () includes servos (). Servos () are proportional control servos that convert digital control signals from system bus () into actual proportional displacement of flight control surfaces, ailerons, elevators, and the rudder. The displacement of flight control surfaces is \u2018proportional\u2019 to values of digital control signals, as opposed to the \u2018all or nothing\u2019 motion produced by some servos. In this way, ailerons, for example, may be set to thirty degrees, sixty degrees, or any other supported angle rather than always being only neutral or fully rotated. Several proportional control servos useful in various UAVs according to embodiments of the present invention are available from Futaba\u00ae.","UAV () includes a servo control adapter (). A servo control adapter () is multi-function input\/output servo motion controller capable of controlling several servos. An example of such a servo control adapter is the \u201cIOSERVO\u201d model from National Control Devices of Osceola, Mo. The IOSERVO is described on National Control Devices website at www.controlanything.com.","UAV () includes a flight stabilizer system (). A flight stabilizer system is a control module that operates servos () to automatically return a UAV to straight and level flight, thereby simplifying the work that must be done by navigation algorithms. An example of a flight stabilizer system useful in various embodiments of UAVs according to the present invention is model Co-Pilot\u2122 from FMA, Inc., of Frederick, Maryland. The Co-Pilot flight stabilizer system identifies a horizon with heat sensors, identifies changes in aircraft attitude relative to the horizon, and sends corrective signals to the servos () to keep the UAV flying straight and level.","UAV () includes an AVCS gyro (). An AVCS gryo is an angular vector control system gyroscope that provides control signal to the servos to counter undesired changes in attitude such as those caused by sudden gusts of wind. An example of an AVCS gyro useful in various UAVs according to the present invention is model GYA350 from Futaba\u00ae.","Remote control devices according to embodiments of the present invention typically include automated computing machinery capable of receiving user selections of pixel on GUI maps, mapping the pixel to a waypoint location, receiving downlink telemetry including for example a starting position from a GPS receiver on the UAV, calculating a heading in dependence upon the starting position, the coordinates of the waypoint, and a navigation algorithm, identifying flight control instructions for flying the UAV on the heading, and transmitting the flight control instructions as uplink telemetry from the remote control device to the UAV.  is a block diagram of an exemplary remote control device showing relations among components of included automated computing machinery. In , remote control device () includes a processor (), also typically referred to as a central processing unit or \u2018CPU.\u2019 The processor may be a microprocessor, a programmable control unit, or any other form of processor useful according to the form factor of a particular remote control device as will occur to those of skill in the art. Other components of remote control device () are coupled for data transfer to processor () through system bus ().","Remote control device () includes random access memory or \u2018RAM\u2019 (). Stored in RAM () an application program  that implements inventive methods of the present invention. In some embodiments, the application program () is OSGi compliant an therefore runs on an OSGi services framework installed (not shown) on a JVM (not shown). In addition, software programs and further information for use in implementing methods of navigating a UAV according to embodiments of the present invention may be stored in RAM or in non-volatile memory (). Non-volatile memory () may be implemented as a magnetic disk drive such as a micro-drive, an optical disk drive, static read only memory (\u2018ROM\u2019), electrically erasable programmable read-only memory space (\u2018EEPROM\u2019 or \u2018flash\u2019 memory), or otherwise as will occur to those of skill in the art.","Remote control device () includes communications adapter () implementing data communications connections () to other computers (), including particularly computers on UAVs. Communications adapters implement the hardware level of data communications connections through which remote control devices communicate with UAVs directly or through networks. Examples of communications adapters include modems for wired dial-up connections, Ethernet (IEEE 802.3) adapters for wired LAN connections, 802.11b adapters for wireless LAN connections, and Bluetooth adapters for wireless microLAN connections.","The example remote control device () of  includes one or more input\/output interface adapters (). Input\/output interface adapters in computers implement user-oriented input\/output through, for example, software drivers and computer hardware for controlling output to display devices () such as computer display screens, as well as user input from user input devices () such as keypads, joysticks, keyboards, and touch screens.",{"@attributes":{"id":"p-0074","num":"0073"},"figref":"FIG. 4","b":["402","412"]},"The method of  includes mapping () the pixel's location on the GUI to Earth coordinates () of the waypoint. As discussed in more detail below with reference to , mapping () the pixel's location on the GUI to Earth coordinates of the waypoint () typically includes mapping pixel boundaries of the GUI map to corresponding Earth coordinates and identifying a range of latitude and a range of longitude represented by each pixel. Mapping () the pixel's location on the GUI to Earth coordinates of the waypoint () also typically includes locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map.","The method of  also includes receiving () downlink telemetry, including a starting position from a GPS receiver on the UAV, from the UAV through a socket on the remote control device. In fact, the remote control device is receiving downlink telemetry that includes a steady stream of GPS positions of the UAV. Receiving a starting position therefore is typically carried out by taking the current position of the UAV when the user selects the pixel as the starting position.","A socket is one end-point of a two-way communication link between two application programs running on a network. In Java, socket classes are used to represent a connection between a client program and a server program. The java.net package provides two Java classes\u2014Socket and ServerSocket\u2014that implement the client side of the connection and the server side of the connection, respectively. In some embodiments of the present invention, a Java web server, is included in an OSGi framework on a remote control device. Often then, a socket on the remote control device would be considered a server-side socket, and a socket on the UAV would be considered a client socket. In other embodiments of the present invention, a Java web server, is included in an OSGi framework on the UAV. In such embodiments, a socket on the UAV would be considered a server-side socket, and a socket on a remote control device would be considered a client socket.","Use of a socket requires creating a socket and creating data streams for writing to and reading from the socket. One way of creating a socket and two data streams for use with the socket is shown in the following exemplary pseudocode segment:",{"@attributes":{"id":"p-0079","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"uavSocket = new Socket( \u201ccomputerAddress\u201d, 7);"]},{"entry":[{},"outStream = new PrintWriter(uavSocket.getOutputStream( ), true);"]},{"entry":[{},"inStream = new BufferedReader(new"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"InputStreamReader(uavSocket.getInputStream( )));"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The first statement in this segment creates a new socket object and names it \u201cuavSocket.\u201d The socket constructor used here requires a fully qualified IP address of the machine the socket is to connect to, in this case the Java server on a remote control device or a UAV, and the port number to connect to. In this example, \u201ccomputerAddress\u201d is taken as a domain name that resolves to a fully qualified dotted decimal IP address. Alternatively, a dotted decimal IP address may be employed directly, as, for example, \u201c195.123.001.001.\u201d The second argument in the call to the socket constructor is the port number. Port number 7 is the port on which the server listens in this example, whether the server is on a remote control device or on a UAV.","The second statement in this segment gets the socket's output stream and opens a Java PrintWriter object on it. Similarly, the third statement gets the socket's input stream and opens a Java BufferedReader object on it. To send data through the socket, an application writes to the PrintWriter, as, for example:\n\n","To receive data through the socket, an application reads from the BufferedReader, as show here for example:\n\n","The method of  also includes calculating () a heading in dependence upon the starting position, the coordinates of the waypoint, and a navigation algorithm. Methods of calculating a heading are discussed in detail below in this specification.","The method of  includes identifying () flight control instructions for flying the UAV on the heading. Flight control instructions are specific commands that affect the flight control surfaces of the UAV. That is, instructions to move the flight control surfaces to affect the UAV's flight causing the UAV to turn, climb, descend, and so on. As an aid to further explanation, an exemplary method of identifying flight control instructions for flying on a calculated heading is provided:\n\n","The method of  includes transmitting () uplink telemetry, including the flight instructions, through the socket to the UAV. Transmitting () the flight control instructions from the remote control device to the UAV may be carried out by use of any data communications protocol, including, for example, transmitting the flight control instructions as form data, URI encoded data, in an HTTP message, a WAP message, an HDML message, or any other data communications protocol message as will occur to those of skill in the art.",{"@attributes":{"id":"p-0086","num":"0093"},"figref":["FIG. 4A","FIG. 4A"],"b":["450","456","458"]},{"@attributes":{"id":"p-0087","num":"0094"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"uavSocket = new Socket( \u201ccomputerAddress\u201d, 7);"]},{"entry":[{},"inStream = new BufferedReader(new"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"InputStreamReader(uavSocket.getInputStream( )));"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String downLinkData = inStream.readLine( );"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"This segment opens a socket object named \u201cuavSocket\u201d with an input stream named \u201cinStream.\u201d Listening for downlink data on the socket is accomplished with a blocking call to inStream.readLine() which returns a String object name \u201cdownLinkData.\u201d","The method of  includes storing () downlink data () in computer memory () and exposing.() the stored downlink data () through an API () to a navigation application (). Downlink data typically is exposed through an \u2018API\u2019 (Application Programming Interface) by providing in a Java interface class public accessor functions for reading from member data elements in which the downlink data is stored. A navigation application wishing to access downlink data then may access the data by calling a public accessor methods, as, for example: String someDownLinkData=APIimpl.getDownLinkData().","In the method of , the downlink telemetry () further comprises flight control instructions. It is counterintuitive that downlink telemetry contains flight control instruction when the expected data communications direction for flight control instructions ordinarily is in uplink from a remote control device to a UAV. It is useful to note, however, that flight control instructions can be uplinked from a multiplicity of remote control devices, not just one. A flight line technician with a handheld PDA can issue flight control instructions to a UAV that is also linked for flight control to a computer in a ground station. It is sometimes advantageous, therefore, for downlink telemetry to include flight control instructions so that one remote control device can be advised of the fact that some other remote control device issued flight control instructions to the same UAV.",{"@attributes":{"id":"p-0091","num":"0098"},"figref":["FIG. 4B","FIG. 4B"],"b":["466","166","464","464"]},"When uplink data () is presented, the method of  includes sending () the uplink data through the socket () to the UAV (). Sending uplink data through a socket may be implemented by opening a socket, creating an output stream for a socket, and writing the uplink data to the output stream, as illustrated, for example, in the following segment of pseudocode:",{"@attributes":{"id":"p-0093","num":"0100"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"uavSocket = new Socket( \u201ccomputerAddress\u201d, 7);"]},{"entry":[{},"outStream = new PrintWriter(uavSocket.getOutputStream( ), true);"]},{"entry":[{},"outStream.println(String someUplinkData);"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"This segment opens a socket object named \u201cuavSocket\u201d with an output stream named \u201coutStream.\u201d Sending uplink data through the socket is accomplished with a call to outStream.println() which takes as a call parameter a String object named \u201csomeUplinkData.\u201d","Although the flow chart of  illustrates navigating a UAV to a single waypoint, as a practical matter, embodiments of the present invention typically support navigating a UAV along a route having many waypoints, including a final waypoint and one or more intermediate waypoints. That is, methods of the kind illustrated in  may also include receiving user selections of a multiplicity of GUI map pixels representing waypoints, where each pixel has a location on the GUI and mapping each pixel location to Earth coordinates of a waypoint.","Such methods for navigating a UAV can also include assigning one or more UAV instructions to each waypoint and storing the coordinates of the waypoints and the UAV instructions in computer memory on the remote control device. A UAV instruction typically includes one or more instructions for a UAV to perform a task in connection with a waypoint. Exemplary tasks include turning on or off a camera installed on the UAV, turning on or off a light installed on the UAV, orbiting a waypoint, or any other task that will occur to those of skill in the art.","UAV instructions to perform tasks in connection with a waypoint may be encoded in, for example, XML (the eXtensible Markup Language) as shown in the following exemplary XML segment:",{"@attributes":{"id":"p-0098","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<UAV-Instructions>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<macro>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<waypoint> 33\u00b0 44\u2032 10\u2033 N 30\u00b0 15\u2032 50\u2033 W <\/waypoint>"]},{"entry":[{},"<instruction> orbit <\/instruction>"]},{"entry":[{},"<instruction> videoCameraON <\/instruction>"]},{"entry":[{},"<instruction> wait30minutes <\/instruction>"]},{"entry":[{},"<instruction> videoCameraOFF <\/instruction>"]},{"entry":[{},"<instruction> nextWaypoint <\/instruction>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/macro>"]},{"entry":[{},"<macro> <\/macro>"]},{"entry":[{},"<macro> <\/macro>"]},{"entry":[{},"<macro> <\/macro>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<UAV-instructions>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"This XML example has a root element named \u2018UAV-instructions.\u2019 The example contains several subelements named \u2018macro.\u2019 One \u2018macro\u2019 subelement contains a waypoint location representing an instruction to fly to 33\u00b0 44\u203210\u2033 N 30\u00b0 15\u203250\u2033 W.","That macro subelement also contains several instructions for tasks to be performed when the UAV arrives at the waypoint coordinates, including orbiting around the waypoint coordinates, turning on an on-board video camera, continuing to orbit for thirty minutes with the camera on, turning off the video camera, and continuing to a next waypoint. Only one macro set of UAV instructions is shown in this example, but that is not a limitation of the invention. In fact, such sets of UAV instructions may be of any useful size as will occur to those of skill in the art.","Exemplary methods of navigating a UAV also include flying the UAV to each waypoint in accordance with one or more navigation algorithms and operating the UAV at each waypoint in accordance with the UAV instructions for each waypoint. Operating the UAV at the waypoint in accordance with the UAV instructions for each waypoint typically includes identifying flight control instructions in dependence upon the UAV instructions for each waypoint and transmitting the flight control instructions as uplink telemetry through a socket. Flight control instructions identified in dependence upon the UAV instructions for each waypoint typically include specific flight controls to move the flight control surfaces of the UAV causing the UAV to fly in accordance with the UAV instructions. For example, in the case of a simple orbit, a flight control instruction to move the ailerons and hold them at a certain position causing the UAV to bank at an angle can effect an orbit around a waypoint.","Operating the UAV at the waypoint in accordance with the UAV instructions for each way point typically includes transmitting the flight control instructions as uplink data from the remote control device to the UAV. Transmitting the flight control instructions as uplink data from the remote control device to the UAV may be carried out by use of any data communications protocol, including, for example, transmitting the flight control instructions as form data, URI encoded data, in an HTTP message, a WAP message, an HDML message, or any other data communications protocol message as will occur to those of skill in the art.","For further explanation of the process of mapping pixels' locations to Earth coordinates,  sets forth a block diagram that includes a GUI () displaying a map (not shown) and a corresponding area of the surface of the Earth (). The GUI map has pixel boundaries identified as Row, Col; Row, Col; Row, Col; and Row, Col. In this example, the GUI map is assumed to include 100 rows of pixels and 100 columns of pixels. This example of 100 rows and columns is presented for convenience of explanation; it is not a limitation of the invention. GUI maps according to embodiments of the present invention may include any number of pixels as will occur to those of skill in the art.","The illustrated area of the surface of the Earth has corresponding boundary points identified as Lat, Lon; Lat, Lon; Lat, Lon; and Lat, Lon. This example assumes that the distance along one side of surface area () is 100 nautical miles, so that the distance expressed in terms of latitude or longitude between boundary points of surface area () is 100 minutes or 1\u00b0 40\u2032.","In typical embodiments, mapping a pixel's location on the GUI to Earth coordinates of a waypoint includes mapping pixel boundaries of the GUI map to Earth coordinates. In this example, the GUI map boundary at Row, Colmaps to the surface boundary point at Lat, Lon; the GUI map boundary at Row, Colmaps to the surface boundary point at Lat, Lon; the GUI map boundary at Row, Colmaps to the surface boundary point at Lat, Lon; the GUI map boundary at Row, Colmaps to the surface boundary point at Lat, Lon.","Mapping a pixel's location on the GUI to Earth coordinates of a waypoint typically also includes identifying a range of latitude and a range of longitude represented by each pixel. The range of latitude represented by each pixel may be described as (Lat\u2212Lat)\/N, where (Lat\u2212Lat) is the length in degrees of the vertical side of the corresponding surface (), and Nis the number of rows of pixels. In this example, (Lat\u2212Lat) is 1\u00b0 40\u2032 or 100 nautical miles, and Nis 100 rows of pixels. The range of latitude represented by each pixel in this example therefore is one minute of arc or one nautical mile.","Similarly, the range of longitude represented by each pixel may be described as (Lon\u2212Lon)\/N, where (Lon\u2212Lon) is the length in degrees of the horizontal side of the corresponding surface (), and Nis the number of columns of pixels. In this example, (Lon\u2212Lon) is 1\u00b0 40\u2032 or 100 nautical miles, and Nis 100 columns of pixels. The range of longitude represented by each pixel in this example therefore is one minute of arc or one nautical mile.","Mapping a pixel's location on the GUI to Earth coordinates of a waypoint typically also includes locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map. The region is the portion of the surface corresponding the pixel itself. That region is located generally by multiplying in both dimension, latitude and longitude, the range of latitude and longitude by column or row numbers of the pixel location on the GUI map. That is, a latitude for the surface region of interest is given by Expression 1.\n\n(()\/)\u2003\u2003(Exp. 1)\n","In Expression 1:\n\n","Similarly, a longitude for the surface region of interest is given by Expression 2.\n\n(()\/)\u2003\u2003(Exp. 2)\n","In Expression 2:\n\n","Referring to  for further explanation, Expressions 1 and 2 taken together identify a region () of surface area () that corresponds to the location of pixel () mapping the pixel location to the bottom left corner () of the region ().","Advantageously, however, many embodiments of the present invention further map the pixel to the center of the region by adding one half of the length of the region's sides to the location of the bottom left corner ().","More particularly, locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map, as illustrated by Expression 3, may include multiplying the range of longitude represented by each pixel by a column number of the selected pixel, yielding a first multiplicand; and multiplying the range of longitude represented by each pixel by 0.5, yielding a second multiplicand; adding the first and second multiplicands to an origin longitude of the GUI map.\n\n(()\/)+0.5(()\/)\u2003\u2003(Exp. 3)\n","In Expression 3, the range of longitude represented by each pixel is given by ((Lon\u2212Lon)\/N), and the first multiplicand is P((Lon\u2212Lon)\/N). The second multiplicand is given by 0.5((Lon\u2212Lon)\/N).","Similarly, locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map, as illustrated by Expression 4, typically also includes multiplying the range of latitude represented by each pixel by a row number of the selected pixel, yielding a third multiplicand; multiplying the range of latitude represented by each pixel by 0.5, yielding a fourth multiplicand; and adding the third and fourth multiplicands to an origin latitude of the GUI map.\n\n(()\/)+0.5(()\/)\u2003\u2003(Exp. 4)\n","In Expression 4, the range of latitude represented by each pixel is given by ((Lat\u2212Lat)\/N), and the third multiplicand is P((Lat\u2212Lat)\/N). The fourth multiplicand is given by 0.5((Lat\u2212Lat)\/N). Expressions 3 and 4 taken together map the location of pixel () to the center () of the located region ().","An exemplary method of navigating in accordance with a navigation algorithm is explained with reference to .  sets forth a flow chart illustrating an exemplary method of navigating a UAV in accordance with a navigation algorithm, and  sets forth a line drawing illustrating a flight path produced by application of the method of .","The method of  includes periodically repeating () the steps of, receiving () in the remote control device from the GPS receiver a current position of the UAV, and calculating () a new heading from the current position to the waypoint. The method of  also includes identifying () flight control instructions for flying the UAV on the new heading, and transmitting (), from the remote control device to the UAV, the flight control instructions for flying the UAV on the new heading. In this method, if Lon, Latis taken as the current position, and Lon, Latis taken as the waypoint position, then the new heading may be calculated generally as the inverse tangent of ((Lat\u2212Lat)\/(Lon\u2212Lon)).",{"@attributes":{"id":"p-0120","num":"0133"},"figref":["FIG. 7","FIG. 6","FIG. 7"],"b":["708","716"]},{"@attributes":{"id":"p-0121","num":"0134"},"figref":["FIG. 6","FIG. 7","FIG. 6"],"b":["710","712","714"]},"A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to .  sets forth a flow chart illustrating an exemplary method of navigating a UAV in accordance with a navigation algorithm, and  sets forth a line drawing illustrating a flight path produced by application of the method of . The method of  includes identifying () a cross track between the starting point and the waypoint. A cross track is a fixed course from a starting point directly to a waypoint. If Lon, Latis taken as the position of a starting point, and Lon, Latis taken as the waypoint position, then a cross track is identified by Lon, Latand Lon, Lat. A cross track has a direction, a \u2018cross track direction,\u2019 that is the direction straight from a starting point to a waypoint, and it is often useful to characterize a cross track by its cross track direction. The cross track direction for a cross track identified by starting point Lon, Latand waypoint position Lon, Latmay be calculated generally as the inverse tangent of ((Lat\u2212Lat)\/(Lon\u2212Lon)).","The method of  includes periodically repeating () the steps of receiving () in the remote control device from the GPS receiver a current position of the UAV, and calculating () a shortest distance between the current position and the cross track. If the shortest distance between the current position and the cross track is greater than a threshold distance (), the method of  includes transmitting () flight control instructions that pilot the UAV toward the cross track, and, when the UAV arrives at the cross track, transmitting () flight control instructions that pilot the UAV in a cross track direction toward the waypoint.",{"@attributes":{"id":"p-0124","num":"0137"},"figref":["FIG. 9","FIG. 9","FIG. 9"],"b":["912","704","912","704","914","912","704"],"sub":["1","1 ","2","2","2","1","2","1"],"sup":["2","2"]},"In this example, calculating a shortest distance between the current position and a cross track also includes calculating the angle () between a direction from the current position () to the waypoint () and a cross track direction. In the example of , the direction from the current position () to the waypoint () is represented as the direction of line (). In the example of , the cross track direction is the direction of cross track (). The angle between a direction from the current position to the waypoint and a cross track direction is the difference between those directions.","In the current example, calculating a shortest distance between the current position and a cross track also includes calculating the tangent of the angle between a direction from the current position to the waypoint and a cross track direction and multiplying the tangent of the angle by the distance from the current position to the waypoint.",{"@attributes":{"id":"p-0127","num":"0140"},"figref":["FIG. 9","FIG. 8","FIG. 9","FIG. 8"],"b":["708","904","706"]},"A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to .  sets forth a flow chart illustrating an exemplary method of navigating a UAV in accordance with a navigation algorithm, and  sets forth a line drawing illustrating a flight path produced by application of the method of .","In the method of , piloting in accordance with a navigation algorithm includes identifying () a cross track having a cross track direction between the starting point and the waypoint. As described above, a cross track is identified by a position of a starting point and a waypoint position. For a starting point position of Lon, Latand a waypoint position of Lon, Lat, a cross track is identified by Lon, Latand Lon, Lat. In addition, it is often also useful to characterize a cross track by its cross track direction. The cross track direction for a cross track identified by starting point Lon, Latand waypoint position Lon, Latmay be calculated generally as the inverse tangent of ((Lat\u2212Lat)\/(Lon\u2212Lon)).","In the method of , navigating a UAV in accordance with a navigation algorithm includes periodically repeating () the steps of receiving () in the remote control device from the GPS receiver a current position and a current heading of the UAV, and calculating () an angle between the direction from the current position to the waypoint and a cross track direction. If the angle is greater than a threshold angle (), the method of  includes transmitting () flight control instructions that pilot the UAV toward the cross track, and, upon arriving at the cross track, transmitting () flight control instructions that pilot the UAV in the cross track direction toward the waypoint.","Transmitting () flight control instructions that pilot the UAV toward the cross track is carried out by transmitting flight control instructions to turn to a heading no more than ninety degrees from the cross track direction, turning to the left if the current position is right of the cross track and to the right if the current position is left of the cross track. Transmitting () flight control instructions that pilot the UAV in the cross track direction toward the waypoint transmitting flight control instructions to turn the UAV to the cross track direction and then flying straight and level on the cross track direction.",{"@attributes":{"id":"p-0132","num":"0145"},"figref":["FIG. 11","FIG. 10","FIG. 11","FIG. 10"],"b":["708","1104"]},"In many embodiments of the method of , the threshold angle is a variable whose value varies in dependence upon a distance between the UAV and the waypoint. In typical embodiments that vary the threshold angle, the threshold angle is increased as the UAV flies closer to the waypoint. It is useful to increase the threshold angle as the UAV flies closer to the waypoint to reduce the risk of excessive \u2018hunting.\u2019 That is, because the heading is the cross track direction, straight to the WP rather than cross-wind, if the angle remains the same, the distance that the UAV needs to be blown off course to trigger transmitting flight control signals instructing the UAV to return to the cross track gets smaller and smaller until the UAV is flying to the cross track, turning to the cross track direction, getting blown immediately across the threshold, flying back the cross track, turning to the cross track direction, getting blown immediately across the threshold, and so on, and so on, in rapid repetition. Increasing the threshold angle as the UAV flies closer to the waypoint increases the lateral distance available for wind error before triggering the transmission of flight instructions to return to the cross track, thereby reducing this risk of excessive hunting.",{"@attributes":{"id":"p-0134","num":"0147"},"figref":"FIG. 12","b":["402","412"]},"The method of  includes mapping () the pixel's location on the GUI to Earth coordinates of the waypoint (). As discussed in more detail below with reference to , mapping () the pixel's location on the GUI to Earth coordinates of the waypoint () typically includes mapping pixel boundaries of the GUI map to corresponding Earth coordinates and identifying a range of latitude and a range of longitude represented by each pixel. Mapping () the pixel's location on the GUI to Earth coordinates of the waypoint () also typically includes locating a region on the surface of the Earth in dependence upon the boundaries, the ranges, and the location of the pixel on the GUI map.","The method of  also includes transmitting () uplink telemetry, including the coordinates of the waypoint, to the UAV through a socket on the remote control device. Transmitting () uplink telemetry, including the coordinates of the waypoint, to the UAV through a socket on the remote control device may be carried out by use of any data communications protocol, including, for example, transmitting the coordinates as form data, URI encoded data, in an HTTP message, a WAP message, an HDML message, or any other data communications protocol message as will occur to those of skill in the art. Transmitting uplink telemetry through a socket may be implemented by opening a socket, creating an output stream for the socket, and writing uplink telemetry data to the output stream, as illustrated, for example, in the following segment of pseudocode:",{"@attributes":{"id":"p-0137","num":"0150"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"uavSocket = new Socket( \u201ccomputerAddress\u201d, 7);"]},{"entry":[{},"outStream = new PrintWriter(uavSocket.getOutputStream( ), true);"]},{"entry":[{},"outStream.println(String someUplinkData);"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"This segment opens a socket object named \u201cuavSocket\u201d with an output stream named \u201coutStream.\u201d Transmitting uplink telemetry through the socket is accomplished with a call to outStream.println() which takes as a call parameter a String object named \u201csomeUplinkData.\u201d","The method of  also includes receiving () downlink telemetry, include a starting position from a GPS receiver, from the UAV through the socket and piloting () the UAV, under control of a navigation computer on the UAV, from the starting position to the waypoint in accordance with a navigation algorithm. Methods of piloting a UAV according to a navigation algorithm are discussed in detail below in this specification.","Receiving downlink telemetry through a socket may be implemented by opening a socket, creating an input stream for the socket, and reading data from the input stream, as illustrated, for example, in the following segment of pseudocode:",{"@attributes":{"id":"p-0141","num":"0154"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"uavSocket = new Socket( \u201ccomputerAddress\u201d, 7);"]},{"entry":[{},"inStream = new BufferedReader(new"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"InputStreamReader(uavSocket.getInputStream( )));"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String downLinkTelemetry = inStream.readLine( );"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"This segment opens a socket object named \u201cuavSocket\u201d with an input stream named \u201cinStream.\u201d Receiving downlink telemetry through the socket is accomplished with a blocking call to inStream.readLine() which returns a String object name \u201cdownLinkTelemetry.\u201d","In the method of , downlink telemetry may include Earth coordinates of waypoints as well as one or more UAV instructions. It is counterintuitive that downlink telemetry contains waypoint coordinates and UAV instructions when the expected data communications direction for waypoint coordinates and UAV instructions ordinarily is in uplink from a remote control device to a UAV. It is useful to note, however, that waypoint coordinates and UAV instructions can be uplinked from a multiplicity of remote control devices, not just one. A flight line technician with a handheld PDA can issue waypoint coordinates and UAV instructions to a UAV that is also linked for flight control to a computer in a ground station. It is sometimes advantageous, therefore, for downlink telemetry to include waypoint coordinates or UAV instructions so that one remote control device can be advised of the fact that some other remote control device issued waypoint coordinates or UAV instructions to the same UAV.","As mentioned above, embodiments of the present invention often support navigating a UAV along a route having many waypoints, including a final waypoint and one or more intermediate waypoints. That is, methods of the kind illustrated in  may also include receiving user selections of a multiplicity of GUI map pixels representing waypoints, where each pixel has a location on the GUI and mapping each pixel location to Earth coordinates of a waypoint.","Such methods of navigating a UAV can also include assigning one or more UAV instructions to each waypoint and transmitting the coordinates of the waypoints and the UAV instructions in the uplink telemetry through the socket to the UAV. A UAV instruction typically includes one or more instructions for a UAV to perform a task in connection with a waypoint. Exemplary tasks include turning on or off a camera installed on the UAV, turning on or off a light installed on the UAV, orbiting a waypoint, or any other task that will occur to those of skill in the art. Such exemplary methods of navigating a UAV also include storing the coordinates of the waypoints and the UAV instructions in computer memory on the UAV, piloting the UAV to each waypoint in accordance with one or more navigation algorithms, and operating the UAV at each waypoint in accordance with the UAV instructions for each waypoint.","A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to , , and .  sets forth a flow chart illustrating an exemplary method of piloting in accordance with a navigation algorithm.  sets forth a line drawing illustrating a method of calculating a heading with a cross wind to achieve a particular ground course. And  sets forth a line drawing illustrating a flight path produced by application of the method of .","In the method of , piloting in accordance with a navigation algorithm comprises periodically repeating () the steps of reading () from the GPS receiver a current position of the UAV; calculating () a direction to the waypoint from the current position; calculating () a heading in dependence upon wind speed, wind direction, air speed, and the direction to the waypoint; turning () the UAV to the heading; and flying () the UAV on the heading.",{"@attributes":{"id":"p-0148","num":"0161"},"figref":["FIG. 14","FIG. 14","FIG. 14"],"b":["1206","1222","1224","1226"]},"In , angle A represents the difference between the wind direction E and the direction to the waypoint D. In , the wind velocity vector () is presented twice, once to show the wind direction as angle E and again to illustrate angle A as the difference between angles E and D. Drawing wind velocity () to form angle A with the resultant velocity () also helps explain how to calculate wind correction angle B using the law of sines. Knowing two sides of a triangle and the angle opposite one of them, the angle opposite the other may be calculated, in this example, by B=sin(b (sin A)\/a). The two known sides are airspeed \u2018a\u2019 and wind speed \u2018b.\u2019 The known angle is A, the angle opposite side \u2018a,\u2019 representing the difference between wind direction E and direction to the waypoint D. Calculating a heading, angle F on , is then carried out by subtracting the wind correction angle B from the direction to the waypoint D.",{"@attributes":{"id":"p-0150","num":"0163"},"figref":["FIG. 15","FIG. 13","FIG. 15","FIG. 13","FIG. 15","FIG. 13"],"b":["708","1316","1310","1312","1314"]},"A further exemplary method of navigating in accordance with a navigation algorithm is explained with reference to .  sets forth a flow chart illustrating an exemplary method of piloting in accordance with a navigation algorithm, and  sets forth a line drawing illustrating a flight path produced by application of the method of .","The method of  includes identifying () a cross track and calculating () a cross track direction from the starting position to the waypoint. In the method of , piloting in accordance with a navigation algorithm is carried out by periodically repeating the steps of reading () from the GPS receiver a current position of the UAV; calculating () a shortest distance between the cross track and the current position; and, if the shortest distance between the cross track and the current position is greater than a threshold distance, piloting () the UAV to the cross track. Upon arriving at the cross track, the method includes: reading () from the GPS receiver a new current position of the UAV; calculating (), in dependence upon wind speed, wind direction, air speed, and the cross track direction, a new heading; turning () the UAV to the new heading; and flying () the UAV on the new heading.",{"@attributes":{"id":"p-0153","num":"0166"},"figref":["FIG. 17","FIG. 16","FIG. 17","FIG. 16"],"b":["708","1304","706"]},"It will be understood from the foregoing description that modifications and changes may be made in various embodiments of the present invention without departing from its true spirit. The descriptions in this specification are for purposes of illustration only and are not to be construed in a limiting sense. The scope of the present invention is limited only by the language of the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 4B"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 7","FIG. 6"]},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 9","FIG. 8"]},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 11","FIG. 10"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 15","FIG. 13"]},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 17","FIG. 16"]}]},"DETDESC":[{},{}]}
