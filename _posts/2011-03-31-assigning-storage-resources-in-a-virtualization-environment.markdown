---
title: Assigning storage resources in a virtualization environment
abstract: A storage pool manager (SPM) simplifies the provisioning of storage in virtualized environments (VEs). The SPM pushes the provisioning of storage from a storage administrator out to virtualization users and administrators. By de-centralizing storage administration, storage provisioning is made as dynamic as server provisioning in a virtualization environment. Use of the SPM enables virtualization users to select storage for provisioning based on selection of a type of storage and an amount without having to be knowledgeable about storage provisioning operations. Details of creating the storage and performing masking operations to the servers are done automatically. Using a virtual container, the storage administrator is able to control the storage that is accessible to virtualization users for provisioning and is able to set boundaries and policies around what storage the virtualization users can provision from. Additionally, the virtualization administrator is allowed to sub-divide the storage made accessible from the storage administrator.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08898402&OS=08898402&RS=08898402
owner: EMC Corporation
number: 08898402
owner_city: Hopkinton
owner_country: US
publication_date: 20110331
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF VARIOUS EMBODIMENTS"],"p":["This application relates to the field of computer networks, and more particularly to the field of assigning and provisioning resources in a computer environment.","In a virtualization environment, hosts use virtual switches to join clients (or tenants) in a network fabric local to a server. Uplink ports on the switch may be connected to other virtual fabrics or to a real LAN through the host's physical network card. Co-locating diverse clients in a virtualization environment requires a significant degree of resource isolation. Clients of one virtual machine should not be able to access CPU processes, stored data, or the network traffic of another. Techniques, such as assigning unique virtual local area network (VLAN) IDs, may be used to insure that traffic belonging to each unique client is sufficiently isolated. Virtual switches automatically tag traffic from a particular client, transparently providing data isolation from other clients.","Tenancies in a virtualization environment may require dynamic allocation, termination and\/or modification (increasing or decreasing capacity) according to requirements of the clients. This can make network management a difficult and costly proposition as known virtual machine provisioning processes for given tasks may be resource intensive and require significant human involvement and configuration. In particular, it may difficult to optimize resource allocation to meet the different requirements of multiple clients. Furthermore, additional inefficiencies and\/or disadvantages may occur as a result of the administrator for the provisioning and assigning of resources being different from an administrator for the virtualization environment, and users thereof, who may be unfamiliar with the requirements for resource provisioning.","Accordingly, it would be desirable to provide a system that allows for the improved assigning and provisioning resources, including storage resources, in a virtualization environment.","According to the system described herein, a method for managing storage in a virtualization environment includes identifying a storage pool having at least a first storage type in a storage array. A storage pool manager is provided that manages provisioning of storage corresponding to the storage pool according to a request. Access to the storage corresponding to the storage pool is controlled, in which access to the storage corresponding to the storage pool is controlled using a virtual container which is administrated separately from the provisioning of the storage. The request may correspond to provisioning of at least one virtual machine and includes a requested storage type and an amount of requested storage. The virtual container may include the storage corresponding to the storage pool, and the virtual container may be assigned to a virtual center used in connection with the provisioning of the storage. The provisioning of the storage according to the request may be performed using the storage pool manager that is accessed by a user via a user interface. The user interface may be provided using a browser plug-in. The storage pool may be a thin pool and\/or other appropriate kind of storage pool. A storage administrator may assign the storage corresponding to the storage pool to the virtual container, and a virtualization entity, that is an entity separate from the storage administrator, may provision storage according to the request from the virtual container.","According further to the system described herein, a non-transitory computer readable medium stores software for managing storage in a virtualization environment. The software includes executable code that identifies a storage pool having at least a first storage type in a storage array. Executable code is provided that provides a storage pool manager that manages provisioning of storage corresponding to the storage pool according to a request. Executable code is provided that controls access to the storage corresponding to the storage pool, in which access to the storage corresponding to the storage pool is controlled using a virtual container which is administrated separately from the provisioning of the storage. the request corresponds to provisioning of at least one virtual machine and includes a requested storage type and an amount of requested storage. The request may correspond to provisioning of at least one virtual machine and includes a requested storage type and an amount of requested storage. The virtual container may include the storage corresponding to the storage pool, and the virtual container may be assigned to a virtual center used in connection with the provisioning of the storage. The provisioning of the storage according to the request may be performed using the storage pool manager that is accessed by a user via a user interface. The user interface may be provided using a plug-in. The storage pool may be a thin pool and\/or other appropriate kind of storage pool. Executable may be provided that enables a storage administrator to assign the storage corresponding to the storage pool to the virtual container. Executable may be provided that enables a virtualization entity, that is an entity separate from the storage administrator, to provision storage according to the request from the virtual container.","According further to the system described herein, a storage system includes a storage array and at least one storage server coupled to the storage array. At least one server provides functions of a storage pool manager. The functions of the storage pool manager include: identifying a storage pool having at least a first storage type in the storage array; providing a storage pool manager that manages provisioning of storage corresponding to the storage pool according to a request; and controlling access to the storage corresponding to the storage pool, in which access to the storage corresponding to the storage pool is controlled using a virtual container which is administrated separately from the provisioning of the storage. The request may correspond to provisioning of at least one virtual machine and includes a requested storage type and an amount of requested storage. The virtual container may include the storage corresponding to the storage pool, and the virtual container may be assigned to a virtual center used in connection with the provisioning of the storage. A storage administrator may assign the storage corresponding to the storage pool to the virtual container, and a virtualization entity, that is an entity separate from the storage administrator, may provision storage according to the request from the virtual container. The provisioning of the storage according to the request may be performed using the storage pool manager that is accessed by a user via a user interface. The storage pool may be a thin pool and\/or other appropriate kind of storage pool.",{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 1","b":["10","32","34","42","44","42","44","51","59","51","59","51","59","32","34","51","59"]},"The server system  may include at least one other additional router  that manages data communication between the server system  and a network, such as the Internet and\/or another network or location. Note that it is possible to eliminate the router  altogether and have one or more of the other routers - manage communication to and from the server system . In an embodiment herein, the router  also provides appropriate security services, such as firewall protection.","Note also that, although each of the subnets - is shown as having three servers, the number of servers coupled to a subnet may be any number, possibly limited only by the physical address space of the subnet. In addition, there may be any number of subnets and, in some instances, the topology of the server system  may be different than that shown. Generally, a server system should be understood as including any system having a plurality of separately addressable servers that may be externally accessible (e.g., through the Internet and\/or other network).","Using virtualization software, one or more of the servers - may be subdivided into a plurality of virtual machines. A virtual machine (VM) is a software implementation of a machine that executes programs like a physical machine. Virtualization software allows multiple virtual machines with separate operating systems, to run in isolation on the same physical machine. Each virtual machine may have its own set of virtual hardware (e.g., RAM, CPU, NIC, etc.) upon which an operating system and applications are loaded. The operating system sees a consistent, normalized set of hardware regardless of the actual physical hardware components. The term \u201cvirtualization software\u201d is used herein to generally refer to any and all software that supports the operation of one or more virtual machines. A number of virtualization software products exist, including the VMware product family provided by EMC Corporation of Hopkinton, Mass. A benefit of providing virtual machines is the ability to host multiple, unrelated, tenants (users) in a single physical server. For example, three unrelated clients, each hosting their own Web site, may all reside on a single one of the servers - that is running virtualization software to present what looks like a single stand-alone server to each of the clients as well as other visitors to the Web sites. The virtualization software may maintain separation of each of the clients, which each separately access their own virtual server(s).","Operations of virtual machine may include using virtual machines images. A virtual machine image is a file containing a program that may be loaded and executed by a virtual machine and may include additional information used in connection with executing the program. A virtual machine image may be obtained for an operating virtual machine and transferred to another location where another virtual machine may use the virtual machine image to continue execution of the program from the state defined by the virtual machine image. In this way, the virtual machine image may be a snapshot of an execution state of a program by a virtual machine that may be moved between different locations and processing thereafter continued without interruption.","Configuring and deploying virtual machines is known in the field of computer science. For example, U.S. Pat. No. 7,577,722 to Khandekar, et al., entitled \u201cProvisioning of Computer Systems Using Virtual Machines,\u201d which is incorporated herein by reference, discloses techniques for configuring and deploying a virtual machine according to user specifications. Virtual machines may be provisioned with respect to any appropriate computing resource, including, for example, CPU processing resources and\/or memory.","In a virtualization environment, a virtual center, that may be referred to as a vCenter, may provide a central point of control for managing, monitoring, provisioning and migrating virtual machines, as further discussed elsewhere herein. The virtual center provides for managing virtual machines to be deployed and may perform virtual machine lifecycle management tasks, administer users and roles, and view usage metrics, among other functionality. Virtual centers may operate to control virtual machines in data centers and in connection with cloud computing including using both internal and external cloud infrastructures and hybrids thereof.",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 2","b":["80","80","82","84","90","91","93","82","84","82","80","51","59","84","80","82","90","84","51","59","91","93","90","82","80","80"]},"Virtual machines may be grouped into groups having similar configurations. Usage of resources of the different groups may be tracked. Virtual machine usage metrics may be measured according to the system described herein and may include meter usage of CPU (e.g., in GHz-hours), memory (e.g., in GB-hours) and\/or virtual machine image storage (e.g., in GB-days), among others. Data for current usage and\/or historical usage may be accessed using a management console. The management console may provide a graphical tool for managing a virtual compute environment allow: browsing the compute service environment to view details of an a virtual center, a data center, the state of deployed virtual machines, networks, and tasks; manage the lifecycle of virtual machines from upload to deployment, and power on\/off, suspend and clone; assign the compute service admin role to users so that the users can access the compute service; view system metrics for resource usage including storage, CPU, and memory; and enable access to other online services, such as a storage service. Other service tools that may be provided in connection with operation of the system described herein may include a command line interface that lets a user prepare virtual management image files for upload to a data center. Further, an application programming interface (API) may be provided that lets a user perform management and administration actions on the data center and the virtual machines. Other software tools may be used in connection with the system described herein.","A service level agreement (SLA) may include various customer requirements and service provider objectives in connection with providing services, such as cloud computing services. For example, the SLA may indicate how many virtual machines a customer estimates would be required over certain time periods, for example, on a hourly, daily, weekly basis, etc. In other embodiments, the SLA may indicate processing performance requirements (for example processing requirements measured in GHz-hours), network performance requirements and\/or storage requirements, among any other suitable requirements set forth in the SLA. The SLA may be stored in a computer-readable format in which requirements of the SLA may be harvested for use in connection with the system described herein. The SLAs may be stored on and\/or accessible by the servers - and\/or the client . The properties of virtual machines allow users' provisioned virtual machines to be migrated between different servers as needed and, accordingly, may be grouped according to particular configurations and requirements as further discussed elsewhere herein. It may be noted that although the system described herein is described principally in connection with the use of virtual machines, and processes corresponding thereto, it may be understood that other types of processing resources may also be used in connection with the system and techniques described herein.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 3","FIG. 3"],"b":["100","102","104","106","102","104"]},"The data centers ,  may contain any number of processors and storage devices that are configured to provide the functionality described herein. In an embodiment herein, the storage devices may be Symmetrix storage arrays provided by EMC Corporation of Hopkinton, Mass. Other appropriate types of storage devices and different types of processing devices may also be used in connection with the system described herein. The data centers ,  may be configured similarly to each other or may be configured differently. The network  may be any network or similar mechanism allowing data communication between the data centers , . In an embodiment herein, the network  may be the Internet and\/or any other appropriate network and each of the data centers ,  may be coupled thereto using any appropriate mechanism. In other embodiments, the network  may represent a direct connection (e.g., a physical connection) between the data centers , .",{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 4","b":["102","112","114","122","124","104","112","114","104","122","124","104","122","124"]},"The active VMs - may be provided in an active repository , which includes one or more logical storage volumes for maintaining the active VMs -. Similarly, the passive VMs - may be provided in a passive repository , which includes one or more logical volumes. Each of the volumes of the active and passive repositories may include multiple VMs. In various embodiments, VMs may be migrated from a source one of the data centers ,  to a target one of the data centers , . Reference is made to U.S. patent application Ser. No. 12\/932,080 to Meiri et al., filed Feb. 17, 2011, entitled \u201cVM Mobility Over Distance,\u201d which is incorporated herein by reference and is assigned to the assignee of the present application.","As further discussed elsewhere herein, one or more of the data centers ,  may use thin provisioning with a mechanism for reclaiming released storage space and\/or for reserving storage space. Such mechanisms are disclosed in U.S. patent application Ser. No. 12\/924,388 to Balcha et al., filed Sep. 27, 2010 entitled \u201cStorage Space Reclaiming for Virtual Provisioning,\u201d and U.S. patent application Ser. No. 12\/924,474 to Fradkin et al., filed Sep. 28, 2010, entitled \u201cVirtual Provisioning Space Reservation,\u201d which are both incorporated by reference herein and are assigned to the assignee of the present application.",{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 5","b":["200","202","202","204","204","206"]},"After the step , processing proceeds to a test step  where it is determined whether the allocation of resources for one or more of the clusters needs to a modified to reflect changed processing requirements. For example, the changes to the processing requirements may include a change to one or more of the SLAs of current users' reflecting changes in the virtual machines required for the current users, may include a change to assign virtual machines from a new user and\/or may reflect the tracking of usage metrics of the users, as further discussed elsewhere herein. Alternatively, the system may automatically periodically review the allocation of resources to determine if changes are necessary for current user SLA requirements. If at the test step , it is determined that resource allocation is to be modified, processing may proceed back to the step . If at the test step , it is determined that the resource allocation is not to be modified, then processing is complete.","According to the system described herein, a storage pool manager (SPM) may simplify the provisioning and assigning of resources, including storage, for virtualized environments (VEs). Virtualized server environments, for example, as represented by VMware, may be highly dynamic. For example, users may provision a new server on a virtual machine (VM) in minutes in a VE. However, with known storage systems, storage provisioning may not be dynamic, but rather be intended to be done by a centralized resource, the storage administrator, who has the specialized skills necessary to provision storage from the storage array. As a consequence of this, under known techniques, provisioning new storage from a storage array for a VM can take days, for example. The SPM according to the system described herein may make storage provisioning as dynamic as the virtualized server provisioning. The SPM may accomplish this by pushing the provisioning of storage to the VE end-user and by simplifying it so that a non-storage savvy VE user can provision the storage.","According to various embodiments, the SPM may involve use of a storage type and a virtual container, e.g., called a root sandbox, to provide capability of storage provisioning to non-storage savvy VE users according to the system described herein. A storage type may be a label for a particular kind of storage. This makes it simple for a user to provision the type of storage that is desired. Thus, instead of a VE user provisioning 50 GB of RAIDS 3+1 storage on 10,000 RPM FC drives, the VE user may simply provision 50 GB of \u201cSilver\u201d or 50 GB of \u201cTier2\u201d storage. The storage administrator may define the types of storage available. The storage administrator may do this by using defined storage tiers, such as in a fully automated storage tiering (FAST) system, and\/or by creating a custom type. The storage administrator may create custom types by selecting the properties of the physical storage: disk type (e.g., SATA, FC, SSD), disk speed (e.g., 7200, 10,000, 15,000), and RAID configuration (e.g., RAID6 14+2, RAID6 6+2, RAIDS 7+1, RAIDS 3+1). In various embodiments, the storage administrator may also define storage types according to a FAST policy or a FAST SLA.","While SPM allows VE users to provision storage, it is recognized that the storage administrator may still own and control the storage array, and thus may need to be able to set boundaries or parameters around what storage the users can provision. These boundaries and parameters may be defined by the sandbox.","A sandbox is an example of a logical storage construct (virtual container) that may be configured using one or more physical storage arrays (e.g., Symmetrix) in which the storage administrator has given VE users permission to create LUNs. In an embodiment, the storage of the sandbox may include one or more thin pools of storage. A thin pool of storage corresponds to the storage concept of thin or virtual provisioning that allows for the creation of logical volumes of storage space where allocation of physical storage space occurs only when space is actually needed (e.g., when data is written the first time to the storage space). For further discussion of storage techniques involving thin provisioning and the use thin devices in one or more thin pools, reference is made, for example, to U.S. patent application Ser. No. 11\/823,152 to Burke, filed Jun. 27, 2007, entitled \u201cStorage Management for Fine Grained Tiered Storage with Thin Provisioning,\u201d and to U.S. Pat. No. 7,822,939 to Veprinsky et al., entitled \u201cData De-duplication using Thin Provisioning,\u201d which are both incorporated herein by reference. In other embodiments, the storage of the sandbox may include storage pools other than thin pools, such as thick pools, pools for FAST policies, etc.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 6","b":["300","320","321","323","310","320","321","321","321","310","310","310"]},"Once the storage administrator fills the sandbox  with various types of physical storage, the storage administrator may assign the sandbox  to a VE virtual center instance, such as a vCenter. This makes the storage in the sandbox  available to that virtual center and allows VE administrators and users of that virtual center to provision storage from the sandbox according to the system described herein. It is noted that the sandbox  may be configured by the storage administrator using the graphical user interface (GUI) of a storage management console (SMC), as further discussed elsewhere herein.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 7","b":["400","410","420","430","435","440","450","460","470","410","440","460","450","420","400","440","460","461","451","452","450"]},"In the VE , CPU cycles and memory may be managed as resources that can be allocated to create virtual machines. For instance, the sum of all the CPU cycles on all the processors on all the servers in a cluster may be used to create a \u201cpool\u201d of CPU cycles for the clusters. As users create VM's, the users allocate CPU cycles from this pool for the VM. Furthermore, the cluster's pool of CPU cycles can be broken down into sub-pools, called resource pools, to provide finer granularity of control where, for example, a marketing VE user could only create a VM from the CPU resources in the marketing resource pool. The same may be done for all the memory on all the servers in the cluster. The system described herein allows for storage to be treated as a third resource which can be controlled and allocated in the same way.","The SPM  may provide a mechanism for the storage administrator  to setup a bounded set of physical storage and allow him to give this set of physical storage to VE users (e.g., the VE user ) for them to provision. The SPM  may only allow VE users to provision storage that they have been given permission to by the storage administrator . The SPM  simplifies storage provisioning and provides a tight integration with VM provisioning by allowing VE users to provision storage from within the cloud-computing client  (e.g., vSphere) thereby allowing VE users to easily create a raw device mapping (RDM) LUN for a VM or a virtual machine file system (VMFS) data store for a cluster. Further, the SPM  may integrate storage as a third VM resource. Thus, storage may become a resource that can be managed and allocated as part of VE clusters and resource pools, just like CPU cycles and memory. In an embodiment, the SPM  may further support Symmetrix V-Max arrays and offers advantages in scale and registration. For example, in an embodiment, each SMC server  may manage up to 5,000 SPM LUNs.","The SMC server  may include a server component in a manager element of the storage array . The SMC server  allows the storage administrator to control one or more storage arrays via a browser based GUI . The SMC server  stores the SPM data and performs SPM functions as requested by the storage administrator via the SMC GUI , and requested by the VE users and administrators via the client storage viewer . In an embodiment, a single SMC server can support multiple clients. The SMC GUI  may be a client front end to the SMC server .","The storage viewer may be a plug-in to the VE client . In an embodiment, the storage viewer may be a storage viewer product produced by EMC Corp. and the VE client  may be VMware's vSphere client. The storage viewer may provide the VE user  and the VE administrator  with the user interface to interact with the SPM functionality. In addition, the storage viewer may contain some logic to perform some of the VE tasks related to storage provisioning. In an embodiment, for example, a VE client  may talk to more than one SMC\/SPM server .","As discussed herein, the functions of the SPM  may be performed according to three types of users, or roles: the storage administrator ; the VE administrator ; and the VE user . It may be noted that the VE administrator  may also perform the functions of the VE user . Further, in an embodiment, the functions of the SPM  may be broken down into four operational phases which are listed below and further discussed elsewhere herein:","1. preparing the storage environment;","2. setting up the sandbox;","3. allocating storage to VE resources; and","4. creating VE storage.","The SPM  may automate several tasks, for instance mapping and masking, that were previously performed manually. These automated functions are further discussed elsewhere herein.","The storage administrator  may interact with the SPM  via the SMC GUI . The storage administrator  may be responsible for:","1. creating views; including the initiator groups, port groups and storage groups; for masking LUNs to VE clusters;","2. setting-up authorizations for the VE server on the thin pools and storage groups in the views;","3. creating and defining storage types;","4. creating and deleting sandboxes;","5. assigning thin pools to sandboxes;","6. assigning previously created views to the sandboxes;","7. setting policies for sandboxes; policies may include maximum and minimum LUN size and maximum number of LUNs created from the sandbox;","8. setting any pre-creation policies (see a following section that describes pre-creation); and","9. assigning a sandbox to a vCenter server.","For these functions, the storage administrator  may be logged into the SMC  as a user with the admin or storage admin role.","The VE administrator  may interact with the SPM  via the a GUI on the cloud-computing client  with the storage viewer plug-in. The VE administrator  may be responsible for assigning storage to VE objects, data centers, clusters, and resource pools, from the sandboxes which have been assigned to the vCenter server . In an embodiment, the VE administrator  may be restricted to assigning storage only to those VE objects to which he has VE authorization to administer.","The VE user  may interact with the SPM  via the cloud-computing client  GUI with the storage viewer plug-in. In an embodiment, the VE user  may:","1. create and delete an RDM LUN for a VM;","2. create and delete a VMFS data store for a cluster; and","3. expand a VMFS data store.","The VE user  may be restricted to provisioning storage only to those VM's to which the VE user  has VE authorization to configure.","The following discussion further describes the four operational phases of the SPM  according to various embodiments of the system described herein.","Preparing the storage environment may be performed by the storage administrator  and may involve some setup of the storage array  and the SPM  so that later operations, such as sandbox creation and storage provisioning, can be successfully completed. The following is a set of array operations that the storage administrator  may perform so that the SPM  may be used successfully. The operations may be performed done using the standard SMC functionality. Thin pools may be created that may later be put into sandboxes (see ). Masking views for the server clusters may be created in the VE environment .","For each VE cluster that LUNs will be provisioned to, a view may be created, as further discussed elsewhere herein. A view may include a port group whose ports are in the same zone as the ports in the VE cluster. A view may also include an initiator group which contains all the WWN's for each port on each server in the VE cluster, regardless of whether the port is in use or zoned to the array. The SPM  may also support cascaded initiator groups so if the cluster server ports are in more than one initiator group they can be cascaded into a single initiator group. Finally, each view may include a storage group. The storage group may be an existing one and\/or may be a new one. If it is a new one, it may be created with a single device that will not be used unless it is adopted.","In an embodiment, authorizations may be set on the storage array , such as a Symmetrix storage array. While not required, if authorizations are turned on in the storage array , then several authorizations may need to be added. These authorizations allow VE users through the SPM software to create\/delete LUNs and mask them to the VE servers . Each vCenter server  may be authorized on each thin pool that is assigned to the vCenter server . Each vCenter server  may be authorized on each storage group in the views in each sandbox assigned to the vCenter server . In addition to these array functions, the storage administrator  may ensure that the SAN  is zoned so that front end array ports planned to be used are in the same zone(s) as the servers  in the VE cluster(s).","The SPM  functions that are performed in preparing the storage environment may include creating the storage types and setting up the client security. Setting up client security may the setting of a password that authenticates the storage viewer clients with the SMC server.","After the storage environment has been prepared, the storage administrator  may begin creating sandboxes and assigning them to virtual center instances. Setting up a sandbox may involve creating a sandbox with a name, description, and the GUID of the vCenter that the sandbox is assigned to. Previously created views to the sandbox may be assigned. In an embodiment, there may be one, and only one, view for each VE cluster that the storage in the sandbox will service. Previously created thin pools may be added to the sandbox. Note that, in an embodiment, all the thin pools added to the sandbox may come from the same array. When adding a thin pool to the sandbox the storage administrator has two decisions to make. A first decision concerns storage type; if the data devices composing the thin pool match more than one storage type then the user needs to choose which one to assign to the thin pool. In an embodiment, a sandbox may only contain one thin pool of each storage type. A second decision concerns capacity to commit to the sandbox\u2014all of a thin pool's available capacity may be committed to the sandbox, however, it is also possible to only commit a portion of it. The capacity that is committed may be subscribed capacity and not physical capacity.","The provisioning policies may be then be determined. The policies that may be set for a sandbox include:","1. maximum number of devices provisioned from the sandbox;","2. maximum size of the devices;","3. minimum size of the devices; and\/or","4. only allow LUNs of sizes that match the pre-created sizes to be provisioned.","Pre-creation policies may also be set as further discussed elsewhere herein.","After a sandbox has been assigned to a virtual center server by the storage administrator, the next operational phase is for the VE administrator to allocate storage to VE resources or objects. In the VE, the highest level object may be the virtual center that may be a centralized management server. A virtual center server can control one or more data centers. A data center may be composed of one or more clusters. A cluster may be composed of one or more ESX servers.","As discussed elsewhere herein, CPU cycles and memory may be compute resources. The sum of all the CPU cycles and memory of the servers in the cluster may determine the cluster's compute resources. A cluster's compute resources can be divided into resource pools. Resource pools can be further divided into more resource pools. VM's are created from the compute resources of a cluster or one of its child resource pools. The system described herein provides that storage may be added as another resource to the virtualized environment along with the CPU cycle and memory resources.",{"@attributes":{"id":"p-0084","num":"0083"},"figref":"FIG. 8","b":["500","510","510","510","520","530","540","550","520"]},{"@attributes":{"id":"p-0085","num":"0084"},"figref":["FIG. 9","FIG. 8"],"b":["500","500","510","520","510","520"]},"A VE administrator may now assign the storage available to the virtual center  to one or more data centers, like the data center , that are children of the virtual center . In this example, since there is only one data center  shown that is controlled by the virtual center , the VE administrator may assign all of the storage to that data center . Additionally, there is only one cluster  in the data center  so the VE administrator also assigns all the storage in the data center  to the cluster . The cluster  has compute resources, CPU and memory, and the storage assigned to the cluster thus becomes another resource to the cluster . The VE administrator who has control over the cluster  can divide the storage resources among the cluster's child resource pools , just like division of the CPU and memory resources.","In an embodiment, although the VE administrator may explicitly assigned storage resources to each data center , cluster  and resource pool , is not necessary to do this. If storage resources are not explicitly assigned to a VE object, e.g. one of the resource pools , then the object may use the storage resources assigned to its parent object. If none are assigned to its parent object, then it can get resources from its parent's parent and so on all the way up to its parent virtual center. Thus, if no storage resources are explicitly assigned, each data center , cluster  and resource pool  may have access to all the storage in the sandbox(es)  assigned to the virtual center . However, once storage is explicitly assigned to an object, it may not go up to its parent to get additional storage resources. According to an embodiment, best practices may dictate that the storage resources should be explicitly assigned down to at least the cluster level.","The final operational phase of the SPM  is the actual provisioning of storage by the VE user. In an embodiment, there may be two types of VE storage: raw data mapping (RDM's) and virtual machine file system (VMFS) data stores. RDM's are LUNs that are seen by the ESX server and passed to a VM. This allows the VM direct access to and ownership of the LUN. VMFS data stores are also built from LUNs. The VMFS data stores may contain numerous VE files, including files that represent virtual hard drives used by the VMs. A VE user can use SPM functionality to create either one of these types VE storage.","In order to create an RDM, the VE user, via the cloud-computing client (e.g. vSphere), selects the VM for which the RDM is to be created. For a VMFS data store, the VE user may first select the cluster the VMFS data store will span. In either case a LUN is created and exposed to the ESX cluster, either the cluster the VM is running on, or the one for the VMFS. The LUN may be created from the storage available to the cluster for the VMFS, or the cluster or resource pool the VM is in for an RDM. The user enters a size and selects a type of storage, e.g. \u201cGold\u201d or \u201cSilver\u201d, from the cluster's or resource pool's available storage. This request is sent from the cloud-computing client to the SPM\/SMC server which determines the correct thin pool to use, creates a thin device in that pool, and then masks it to the cluster's server ports. After the LUN\/thin device has been created, and mapped and masked, the cloud-computing client maps it as an RDM to the VM or formats it as a VMFS.","According to the system described herein, the SPM  may automate several functions that today must be performed by the storage administrator, VE administrator or VE user. For example, when the VE user creates a LUN for an RDM or VMFS, a thin device is created in a thin pool. This thin device is mapped to a set of front end array ports and then masked to the ESX cluster the LUN is needed on. SPM does this by automatically putting the device into the storage group which belongs to the view associated with the sandbox which has an initiator group that matches the server ports for the VE cluster that the LUN is being created for. If there is no view associated with the sandbox that has an initiator group with all the cluster ports then the create LUN fails. This prevents LUNs from being created that are only masked to some of the servers in the cluster or not masked to all the paths to each server.","A VE user may create a new VMFS data store. In addition to creating the LUN and masking it to the cluster, a portion of the SPM  may take care of the additional VE steps to turn the LUN into a VMFS data store. A VE user may further create a new RDM LUN for a VM. In addition to creating the LUN and masking it to the cluster the VM sits on, a portion of the SPM  may take care of the additional VE steps to turn the LUN into an RDM and map it to the VM.","The VE administrator may use the cloud-computing client to refresh the server membership of a cluster. This updates SPM knowledge of what server port WWN's comprise the clusters. Each time a LUN is created the WWN's for the cluster are checked against the initiator groups to make sure that the LUN is masked correctly to cluster. If the server membership changes the storage administrator must update the initiator group for the server cluster.","In an embodiment, the SPM  may automatically track the used and available storage for each VE object. For example, if a resource pool has 60 GB of Silver storage, of which 10 GB of used, and a VE user creates a 15 GB RDM from Silver storage for a VM in that resource pool, then after the RDM creation there will be 25 GB of used and 45 GB of available Silver storage for the resource pool. The SPM may also enforce the provisioning policies that the storage administrator sets on the sandbox. Policies may include, for example: maximum number of LUNs provisioned; maximum LUN size; minimum LUN size; and provisioning only pre-created LUN sizes.","The VE's VM's may be created quickly, for example, in less than a minute. However, even with SPM's automated functionality it may still take longer (e.g., 3 to 6 minutes) to create a new thin device and map and mask it to a cluster. In order to bring the time it takes to provision storage more in line with the time it takes to create a VM, the SPM  allows the storage administrator the option of setting one or more thin device pre-creation policies for a sandbox. A pre-creation policy allows the storage administrator to specify that N thin devices of a particular size and a particular type are pre-created for the sandbox. Thus when a VE user creates a thin device, for an RDM or VMFS, if the VE user chooses one of the pre-created sizes the provisioning time is reduced to the time it takes to map and mask the device. If the VE user chooses a size that is not pre-created then he must wait the additional time it takes to create the thin device.","The pre-creation policy may cause devices of particular sizes to be pre-created and reserved for SPM use. These may be called SPM un-used LUNs. When a VE user creates a LUN of this size, the SPM will look for an SPM un-used LUN of this size. If one exists, that LUN will use it instead of creating a new device from scratch. This may significantly speed up the provisioning process as the pre-created device simply has to be added to the correct storage group to mask it to the VE servers.","A pre-creation policy may be defined by one or more of the following:","1. a capacity;","2. number of devices that will be pre-created at one time;","3. sandbox the policy is associated with; and","4. storage type the policy is for.","The combination of the sandbox and the storage type may determine which thin pool the pre-created devices are created in.","In an embodiment, after the last device of a pre-created size is used, N more devices of that size may be created in the thin pool and added to the SPM reservation. N is the number specified in the pre-creation policy. New, pre-created, devices may not be created when a new pre-creation policy is setup or modified. They may only be created after a LUN is created and there are no pre-created devices of that size left. Thus, the first LUN created of a size that matches a newly setup pre-creation policy will always be created from scratch, but afterwards N pre-created devices of that size will also be created and the second LUN of that size will use one of those pre-created devices.","On each storage array (e.g., Symmetrix), a reservation may be created for the SPM . Thin devices created by SPM , including pre-created ones, may be reserved under this reservation. This allows storage administrators managing the storage array to know which devices are under the control of SPM . The SPM  may automatically create an SPM reservation. All devices that are under the SPM's control may be reserved with this reservation. This makes the storage administrators working on the storage array aware that these devices are being used by the SPM . Devices may be added to the SPM reservation when they are created by the SPM  and\/or when they are adopted into the SPM . Devices may be released from the SPM reservation when they are deleted by SPM  and\/or when the thin pool they are in is removed from a sandbox, as further discussed elsewhere herein. If a thin pool is associated with multiple sandboxes, then only the devices for LUNs in the sandbox the thin pool is being removed from are released from the reservation.","In an embodiment, for backup and restore functionality, SPM meta-data may be backed up to an external directory (the meta-data may exist as a set of files). The SPM configuration may be restored from a previous backup. Note, that best practice may be for the SPM meta data to be backed up along with the masking database. It is also possible for the SPM configuration to get out of sync with the VE configuration. This is because the VM user may take actions through the cloud-computing client that SPM will not be aware of. An example of this is moving a VM from one resource pool to another. Refreshing the SPM configuration may align it with the current VE configuration. The expectation is that the SPM  may be deployed in an existing VE configuration (e.g., an existing VMWare configuration) so that it can be used to handle any new storage provisioning. This may require that the SPM  be able to adopt existing LUNs and bring them under SPM control. Note that this feature may only be available for thin LUNs\/devices.","The SPM  according to the system described herein accommodates a number of use cases and functional details related to functions of the storage administrator, VE administrator and the VE user according to various embodiments of the system described herein. Examples of these use cases and functional details are discussed elsewhere herein in connection with TABLES 1-26.","The following discussion provides further detail on the internal behavior of the SPM  in connection with features of the system described herein.","According to the system described herein, LUN creation may be initiated by a VE user requesting to create a LUN for a VE cluster, for example as an RDM for a VM or a VMFS data store for the VE cluster. The request may come to the SMC server as a request to create a LUN with the following parameters:","1. sandbox to take the storage from;","2. storage type in the sandbox to use;","3. capacity or size; and","4. cluster the LUN will be masked to.",{"@attributes":{"id":"p-0111","num":"0110"},"figref":"FIG. 10","b":["600","410","602","602","604"]},"After the step , processing proceeds to a test step  where it is determined whether the validations were successful. If not, then processing proceeds to a step  where error processing is performed, as further discussed herein. If the validations have been successfully performed, processing proceeds to a test step  involving examination of the sandbox pre-creation policies to determine whether a size (capacity) of the device to create matches one of the pre-creation policies. If the size does not match a pre-creation policy, then processing proceeds to a step  where a device is created from scratch. After the step , processing proceeds to a step  where the device is bound to the thin pool. After the step , processing proceeds to a step  where the device is added to the SPM reservation. After the step , processing proceeds to a step  where the device is added to the appropriate storage group.","If, at the test step , it is determined that the size of the device to create does match one of pre-creation policies, then processing proceeds to a test step  where, in connection with a search of the thin pool, it is determined whether the thin pool contains an un-used SPM device of the indicated size. If one is found, processing proceeds to a step  where that un-used device is obtained. After the step  processing proceeds to the step  where the obtained un-used device is added to the appropriate storage group. If it is determined at the test step  that there are no un-used devices of the indicated size, then processing proceeds to the step  for creation of a new device.","After the step , processing proceeds to a test  where it is determined whether a device was successfully added to the appropriate storage group. If not, then processing proceeds to step  for error processing. It is noted that, in various embodiments, error evaluations may be performed at different steps in the flow chart, and may result in different processing. For example, in connection with validation errors error processing may include sending notifications or other steps that do not require deleting a newly-created device. However, if an error occurs during the creation of a LUN an attempt may be made to unwind the process and delete the device that was created. Note that there may be errors which make it impossible to unwind the device creation. Examples include a stuck configuration lock on the storage array, loss of communication with the array, among others. After the step , processing is complete.","If, at the test step , it is determined that the device (newly-created or obtained un-used device) has been added to the appropriate storage group, then, according to one embodiment, processing is complete, as is shown by a dashed lined. However, in other embodiments, processing may proceed to a test step  in connection an analysis of devices of pre-created policies according to an embodiment of the system described herein. That is, at the test step , it may be again determined whether the added device matched the size of a pre-created policy. If not, then processing is complete since the creation of the LUN did not involve the pre-created policies.","If, at the test step , it is determined that the size of the LUN does match a pre-created policy, then processing may proceed to a test step  where is determined whether there are any un-used SPM device of this size still remaining. If there are remaining un-used SPM devices, then processing is complete since the use of a pre-created device in prior steps has not caused all un-used SPM devices of the indicated size to be used. If, however, at the test step , it is determined that there are now no longer any unused SPM devices of the indicated size, then processing proceeds to a step  where the pre-creation policy in invoked and N, as defined by the policy, unused devices may be pre-created in the thin pool. After the step , processing is complete.","According to another embodiment of the system described herein, LUN deletion may be initiated by the VE user when the VE user wants to delete a VMFS data store for a cluster or an RDM for a VM, for example. Before operations to delete a device is on the storage array, it may first be verified that the vCenter is authorized to perform operations on the thin pool and the storage group in which the device is located.",{"@attributes":{"id":"p-0118","num":"0117"},"figref":"FIG. 11","b":["700","410","700","700","702"]},"If, at the test step , it is determined the size of the device to be deleted matches a pre-creation policy, then processing proceeds to a step , where the device is removed from storage group, making it an SPM un-used device. After the step , processing proceeds to steps in connection with reclaiming space from the device, including a step  where the device is released from the SPM reservation. After the step , processing proceeds to a step  where the device is unbound from the thin pool. After the step , processing proceeds to a step  where the device is then rebound to the thin pool. After the step , processing proceeds to a step  where the device is added to the SPM reservation. After the step , processing proceeds to a test step  where it is determined whether the device removal and space reclaiming steps were successful. If so, then processing is complete. If the steps were not successful as result of errors occurring at any of the above-noted steps, then processing proceeds to a step  where error processing is performed. In an embodiment, the error processing may simply be a report and\/or other notification if recovery from an error that occurs during the deletion processing of a LUN is not possible. After the step , processing is complete.","If, at the test step , it is determined that the size of the device to be deleted does not match a pre-creation policy, processing proceeds to a step  where the device is released from the SPM reservation. After the step , processing proceeds to a step  where the device is removed from the storage group. After the step , processing proceeds to a step  where the device is unbound from the thin pool. After the step , processing proceeds to a step  where the device is deleted. After the step , processing proceeds to a test step  where it is determined whether the deletion was successful. If yes, is processing is complete. If not, then processing proceeds to a step  where error processing is performed. In an embodiment, the error processing may simply be a report and\/or other notification if recovery from an error that occurs during the deletion processing of a LUN is not possible. After the step , processing is complete.","In another embodiment, during the process of creating a LUN for a VE user, after the device is created it may be masked to the servers in a VE cluster. Ultimately this may be accomplished by putting the device into a storage group which is in a view that has an initiator group with all the WWN's of the HBA ports on the servers in the cluster. If a storage administrator changes a view name, VM users may be unable to create LUNs for the cluster that the view is for. The storage administrator may update each sandbox with the new view name and also change any permissions that have been set for the view.",{"@attributes":{"id":"p-0122","num":"0121"},"figref":"FIG. 12","b":["800","810","820","810","830","810","840","840","830","831","840","832","833","840","840","832","410","834","835","832","832","1","820","810","2","832","830","810","833","840"]},"In an embodiment, LUNs\/devices that the SPM controls may be individually tracked by the SPM by storing meta information about each device in its persistence store. In addition, as discussed elsewhere herein, all the devices that SPM controls may be reserved by the SPM reservation and each LUN\/device may have two states: (1) used\u2014device is being used by a VE cluster and (2) un-used\u2014device has been pre-created and is waiting to be masked to a VE cluster. The used-device may be tracked by SPM meta data, reserved by the SPM reservation and\/or masked to a VE cluster by virtue of being in a storage group in a view associated with a sandbox. The un-used device may be tracked by SPM meta data and\/or reserved by the SPM reservation.","In another embodiment, adopt LUNs may be used to bring LUNs\/devices, that are currently not under SPM control, under SPM control. Adopting LUNs may be done to repair an SPM configuration that has been corrupted or lost, and\/or to put an existing VE configuration under SPM control. Adopting LUNs occurs may after a sandbox has been created, a view(s) for the VE cluster is associated with the sandbox, and a thin pool(s) is added to the sandbox. At this point, devices that are in the thin pool(s) which have been added to the sandbox may be eligible to be adopted. In addition, an adoptable LUN is defined by a LUN that is: not reserved, or already reserved by SPM, and in a storage group that is part of one of the views associated with the sandbox. It could also be in a storage group that is in a view which has one of the initiator groups in one of the views associated with the sandbox. Basically, the LUN may be masked to one of the VE server clusters the sandbox is servicing.","When a LUN is adopted, its storage capacity is added to the total and used capacity of the sandbox, keeping the available capacity of the sandbox the same. Initially the LUN's storage is accounted for at the vCenter level. In order to have its capacity be accounted for at the correct VE object, e.g. VM for a LUN used as an RDM, a VE user needs to update the VE configuration from the storage viewer. The SPM , due to pre-creation policies, sometimes creates devices that are reserved by SPM , but are not masked to any servers. These are called un-used SPM LUNs. When a thin pool is added to a sandbox, these un-used LUNs become available for use if their size matches a pre-creation policy set for the sandbox. In a sense, they become automatically adopted.","When a thin pool is added, or modified, to a sandbox, the storage administrator may specify the amount of capacity from the thin pool to be assigned to the sandbox. The amount that is assigned is a subscribed or virtual capacity. Subscribed capacity is a presented capacity and not a physical capacity. Thus, the storage administrator may choose to over subscribe the thin pool by assigning more storage than is physically available. In order to guide the storage administrator in determining how much subscribed capacity to assign to the sandbox, the storage administrator may be presented with several values:\n\n","API authorizations that may be included to provide additional security within the storage array include:","1. a role, storage admin, which has the ability to perform operations on thin pools and storage groups;","2. authorizations set for groups;","3. authorizations set on individual thin pools and storage groups.","An authorization on a thin pool also allows the user to: create\/delete a device; bind a device to an authorized thin pool; unbind a device from an authorized thin pool; reserve a thin device belonging to an authorized thin pool; and release a thin device belonging to an authorized thin pool from a reservation. Embodiments for reserving and releasing thin devices are further discussed elsewhere herein. An authorization on a storage group allows a user to put a device into a storage group or remove a device from a storage group. The above authorizations may have two functions. One is to ensure that the cloud-computing clients can only manipulate storage array storage objects on which they are authorized. The other is to provide some protection from other storage administrators to the storage array objects that the SPM  is using.","In an embodiment, storage provisioning commands from the cloud-computing client may come with a user id and group id. The user id may the name the user used to login to the vCenter server. The group id is the GUID of the vCenter server. In practice, it is the group id, the vCenter server GUID, that may be used to validate the provisioning command against the required permissions on the storage array (e.g., Symmetrix). For instance, if user TOM on vCenter server ABC requests a LUN be created for his VM then in order for the command to be processed successfully the Symmetrix storage administrator must have given vCenter server ABC's GUID the role of storage admin on the Symmetrix's thin pool and storage group that are going to be used for the provisioning.","Communication between the cloud-computing client and the SMC\/SPM server may be done using SSL. Trust may be established between the cloud-computing client and the SMC server initially via a password. After the first login of the client to the server, using the password, the client's certificate may be stored on the SMC server. This may be used to validate any further communication with the client. VE users may be restricted by the storage viewer plug-in to performing provisioning operations on storage for VE objects to which they have access. For instance, a VE user may only create or delete an RDM for a VM on which he has VE configuration authorization.","In another embodiment, logs may be generated for SPM operations in the SMC log. These log entries include: all SPM operations that occur between the cloud-computing client and SMC client and the SMC server; all array configuration and control operations that occur during an SPM operation; and internal error conditions","TABLES 1-26 describe use cases and functional details of the SPM  according related to functions of the storage administrator, VE administrator and the VE user according to various embodiments of the system described herein.","The following TABLES 1-15 detail example use cases and functional details of the SPM  related to functions of the storage administrator.",{"@attributes":{"id":"p-0134","num":"0136"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Create Storage Type"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Create a storage type"]},{"entry":["Description","Storage administrator creates a storage type from a previously defined"]},{"entry":[{},"Symmetrix tier definition or by a set of physical storage properties."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","SA wants to setup a storage environment that can be managed by SPM."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. SA accesses the storage type creation dialog"]},{"entry":["Events","2. SA selects a tier he wants the storage type to be created from."]},{"entry":[{},"3. SA presses the OK button."]},{"entry":["Alternative Paths","1. SA accesses the storage type creation dialog"]},{"entry":[{},"2. SA enters a name for the storage type"]},{"entry":[{},"3. SA enters a description for the storage type"]},{"entry":[{},"4. SA selects the properties from each of several categories that define"]},{"entry":[{},"the storage type. Note that it is possible to make 0, 1, or N selections"]},{"entry":[{},"in a category."]},{"entry":[{},"\u2003a. RAID Configuration"]},{"entry":[{},"\u2003\u2003i. RAID1"]},{"entry":[{},"\u2003\u2003ii. RAIDS 3 + 1"]},{"entry":[{},"\u2003\u2003iii. RAIDS 7 + 1"]},{"entry":[{},"\u2003\u2003iv. RAID6 6 + 2"]},{"entry":[{},"\u2003\u2003v. RAID6 14 + 2"]},{"entry":[{},"\u2003b. Disk Type"]},{"entry":[{},"\u2003\u2003i. EFD"]},{"entry":[{},"\u2003\u2003ii. FC 7200 RPM"]},{"entry":[{},"\u2003\u2003iii. FC 10,000 RPM"]},{"entry":[{},"\u2003\u2003iv. FC 15,000 RPM"]},{"entry":[{},"\u2003\u2003v. SATA"]},{"entry":[{},"5. SA presses the Add button."]},{"entry":["Exception Paths","1. Storage type name already exists"]},{"entry":["Postconditions","1. The new storage type is persisted."]},{"entry":["Notes","1. If FAST tiers are used to create a storage type than the tier name is"]},{"entry":[{},"used to create the storage type name."]},{"entry":[{},"2. Even if a FAST tier is used to create a storage type, once the storage"]},{"entry":[{},"type is created it is independent of the tier. Changes to the tier do not"]},{"entry":[{},"affect the storage type and the storage type itself can be updated"]},{"entry":[{},"independent of the tier."]},{"entry":[{},"3. Two different storage types can have exactly the same property set."]},{"entry":[{},"4. Storage types can be created which do not have any settings for a"]},{"entry":[{},"particular property, e.g. Disk type. In fact, a storage type can be"]},{"entry":[{},"created without any properties at all. In this case it can used to"]},{"entry":[{},"describe the storage in any thin pool."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0135","num":"0137"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Delete Storage Type"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Delete storage type"]},{"entry":["Description","Deletes a storage type"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA decides he no longer wants this storage type."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. A list of storage types is presented."]},{"entry":["Events","2. The SA selects a storage type to delete"]},{"entry":[{},"3. The SA clicks OK"]},{"entry":["Alternative Paths","1. NA"]},{"entry":["Exception Paths","1. The storage type is still being used to describe a thin"]},{"entry":[{},"pool to sandbox association. The storage type cannot be"]},{"entry":[{},"deleted until it is not being used by any thin pool."]},{"entry":["Postconditions","1. The storage type is removed"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0136","num":"0138"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 3"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Update Storage Type"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Update storage type"]},{"entry":["Description","Updates a storage type. This includes changing its"]},{"entry":[{},"name or description."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA decides he wants to modify this storage type."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. A list of storage types is displayed."]},{"entry":["Events","2. The SA selects the storage type to update and the"]},{"entry":[{},"characteristics of the storage type are displayed:"]},{"entry":[{},"\u2003a. Name"]},{"entry":[{},"\u2003b. Description"]},{"entry":[{},"2. The SA can change the name, or the description."]},{"entry":[{},"3. The SA clicks OK"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. Updating the storage type name to one"]},{"entry":[{},"that already exists."]},{"entry":["Postconditions","1. The storage type is updated"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0137","num":"0139"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 4"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Create Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Create a sandbox"]},{"entry":["Description","Create a sandbox that can contain thin pools."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to create a new set of storage to give to"]},{"entry":[{},"VMware users for provisioning."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. SA selects create a sandbox"]},{"entry":["Events","2. SA enters the name and description for the sandbox."]},{"entry":[{},"3. SA enters the Symmetrix array that holds the thin"]},{"entry":[{},"pools the sandbox will contain."]},{"entry":[{},"4. SA enters the GUID of the vSphere server instance"]},{"entry":[{},"the sandbox will contain storage for"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. The sandbox name already exists"]},{"entry":[{},"2. There is already a sandbox for this array which "]},{"entry":[{},"contains storage for the vCenter server"]},{"entry":["Postconditions","1. The information about the sandbox is persisted"]},{"entry":[{},"2. The sandbox appears in any vSphere client talking"]},{"entry":[{},"to the vCenter server assigned to the sandbox"]},{"entry":["Notes","1. A sandbox can only contain thin pools from"]},{"entry":[{},"the same array."]},{"entry":[{},"2. The sandbox name must be unique to the"]},{"entry":[{},"SMC server instance"]},{"entry":[{},"3. More than one sandbox can be created per array, "]},{"entry":[{},"but they must be assigned to different vSphere servers"]},{"entry":[{},"4. There is no validation of the GUID entered for"]},{"entry":[{},"the vSphere serverinstance"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0138","num":"0140"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 5"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Delete Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Delete a sandbox"]},{"entry":["Description","Delete a sandbox."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to delete a sandbox so that it cannot be "]},{"entry":[{},"used byVMware users for storage provisioning."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. SA selects a sandbox from a list of sandboxes"]},{"entry":["Events","2. SA deletes it"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. There are still thin pools assigned to the sandbox."]},{"entry":[{},"All the thin pools must be removed first."]},{"entry":["Postconditions","1. Sandbox is deleted along with its associated policies"]},{"entry":[{},"2. All storage allocations for VMware resources that"]},{"entry":[{},"use this sandbox are removed."]},{"entry":["Notes","1. After deletion of the sandbox, all LUNs are left"]},{"entry":[{},"intact and still masked to the ESX servers"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0139","num":"0141"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 6"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Update Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Update a sandbox"]},{"entry":["Description","Change some of the information about a sandbox. This"]},{"entry":[{},"includes the name, description, and vSphere"]},{"entry":[{},"server GUID."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to change some of the information"]},{"entry":[{},"about a sandbox."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. SA selects a sandbox"]},{"entry":["Events","2. The sandbox information is shown"]},{"entry":[{},"\u2003a. Name"]},{"entry":[{},"\u2003b. Description"]},{"entry":[{},"\u2003c. vSphere server instance the sandbox is assigned to"]},{"entry":[{},"3. The user updates some or all of the sandbox"]},{"entry":[{},"information."]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. The new name conflicts with the name of "]},{"entry":[{},"an already existing sandbox."]},{"entry":["Postconditions","1. Sandbox information is updated"]},{"entry":["Notes","1. If the vSphere GUID is changed the sandbox's storage "]},{"entry":[{},"will no longer be available to the vSphere server "]},{"entry":[{},"with the original GUID."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0140","num":"0142"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 7"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Add a View to a Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Add a view to a sandbox"]},{"entry":["Description","Add a view to a sandbox"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to set up a sandbox to mask LUNs"]},{"entry":[{},"to a VMware cluster"]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":[{},"2. The vCenter server has authorizations on the storage "]},{"entry":[{},"group in the view to be added"]},{"entry":["Basic Course of","1. SA selects a sandbox"]},{"entry":["Events","2. SA selects a view to add to the sandbox."]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. Adding a view will fail if there is already a view with"]},{"entry":[{},"the same initiator group in it."]},{"entry":[{},"2. Adding a view will fail if the vCenter server does"]},{"entry":[{},"not have authorizations on the storage group in the view"]},{"entry":[{},"3. The view does not exist on the array associated"]},{"entry":[{},"with the sandbox"]},{"entry":["Postconditions","1. LUNs can now be masked to the VMware cluster"]},{"entry":[{},"whose HBA ports match the WWN's in the added"]},{"entry":[{},"view's initiator group"]},{"entry":["Notes","1. There can be multiple views attached to a sandbox."]},{"entry":[{},"However, therecan only be one view per sandbox"]},{"entry":[{},"per VMware cluster."]},{"entry":[{},"2. A view can be attached to multiple sandboxes"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0141","num":"0143"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 8"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Remove a View from a Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Remove a view from a sandbox"]},{"entry":["Description","Remove a view from a sandbox"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The VMware cluster is being destroyed."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. The SA selects a sandbox"]},{"entry":["Events","2. The SA selects a view to remove"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. None"]},{"entry":["Postconditions","1. New LUNs cannot be created for the cluster"]},{"entry":[{},"serviced by the view that was removed."]},{"entry":[{},"2. The view is not removed or modified, so existing "]},{"entry":[{},"LUNs are left still masked to the cluster."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0142","num":"0144"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 9"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Add Thin Pool to Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Add thin pool to a sandbox"]},{"entry":["Description","Add a thin pool to a sandbox. This makes all or part of the storage"]},{"entry":[{},"in the thin pool available for provisioning by VMware users."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to add physical storage to a sandbox."]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":[{},"2. The vCenter server has been given authorizations on the thin pool"]},{"entry":["Basic Course of","1. SA selects a sandbox"]},{"entry":["Events","2. A list of the thin pools is shown"]},{"entry":[{},"3."]},{"entry":[{},"4. The SA selects the thin pool he wants to put in the sandbox."]},{"entry":[{},"5. A list of storage types that match the thin pool is displayed. The SA"]},{"entry":[{},"selects which one he wants to use to describe the storage in the thin"]},{"entry":[{},"pool."]},{"entry":[{},"6. The available capacity of the thin pool is displayed."]},{"entry":[{},"7. SA enters the capacity he wants to use from the thin pool"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. No storage types match the thin pool"]},{"entry":[{},"2. The thin pool has no available capacity, e.g. all its capacity has been"]},{"entry":[{},"allocated to another sandbox(es)."]},{"entry":[{},"3. The thin pool matches a single storage type and another thin pool has"]},{"entry":[{},"already been placed in the sandbox using that storage type."]},{"entry":[{},"4. The thin pool is not on the same array as the thin pools already in the"]},{"entry":[{},"sandbox."]},{"entry":[{},"5. The vSphere server the sandbox is assigned to does not have"]},{"entry":[{},"authorizations for this thin pool."]},{"entry":["Postconditions","1. Amount of storage of the capacity assigned from the thin pool, of the"]},{"entry":[{},"type selected for the thin pool, now appears in the virtual client."]},{"entry":["Notes","1. The sandbox can only contain thin pools from the same array."]},{"entry":[{},"2. The sandbox can only contain one thin pool of each storage type."]},{"entry":[{},"3. A thin pool can provide storage to more than one sandbox."]},{"entry":[{},"4. The amount of capacity added to a sandbox from a thin pool is"]},{"entry":[{},"subscribed capacity, not physical capacity. The total amount of"]},{"entry":[{},"subscribed capacity in a thin pool is determined by multiplying its"]},{"entry":[{},"enabled physical capacity by the maximum subscription percent (a"]},{"entry":[{},"thin pool property set by the SA) minus capacity already assigned to"]},{"entry":[{},"other thin pools and to other thin devices not in any sandboxes."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0143","num":"0145"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 10"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Remove Thin Pool from Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Remove thin pool from sandbox"]},{"entry":["Description","Removes a thin pool from a sandbox. This dissolves the"]},{"entry":[{},"association between the sandbox and the thin pool. It "]},{"entry":[{},"leaves any LUNs in the thin pool in place, but removes"]},{"entry":[{},"the SPM reservation on them."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to remove a thin pool from a sandbox"]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. SA selects a sandbox"]},{"entry":["Events","2. A list of the thin pools in the sandbox is shown"]},{"entry":[{},"3. SA selects a thin pool to remove from the sandbox"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. None"]},{"entry":["Postconditions","1. The association between the sandbox and the thin pool"]},{"entry":[{},"is dissolved."]},{"entry":[{},"2. All the devices in the thin pool that are from"]},{"entry":[{},"the sandbox are removed from SPM control and the"]},{"entry":[{},"SPM reservation is removed."]},{"entry":[{},"3. All the storage for the storage type represented"]},{"entry":[{},"by this thin pool in the sandbox is removed."]},{"entry":[{},"For example, if this thin pool contained the gold"]},{"entry":[{},"storage for sandbox A which is assigned to vCenter"]},{"entry":[{},"server ABC, the vSphere client will no longer have"]},{"entry":[{},"any gold storage from sandbox A on vCenter"]},{"entry":[{},"server ABC."]},{"entry":["Notes","1. Devices provisioned from the removed thin pool"]},{"entry":[{},"will not be deletedor have their masking changed. Only "]},{"entry":[{},"the SPM reservation will be removed."]},{"entry":[{},"2. Pre-creation policies for the sandbox that are for the"]},{"entry":[{},"storage type associated with the thin pool are deleted."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0144","num":"0146"},"tables":{"@attributes":{"id":"TABLE-US-00011","num":"00011"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 11"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Update the Thin Pool Capacity in a Sandbox"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Update the thin pool capacity in a sandbox"]},{"entry":["Description","Change the capacity assigned to a sandbox from a thin"]},{"entry":[{},"pool"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to add or remove storage to\/from a sandbox"]},{"entry":[{},"for a thin pool"]},{"entry":["Preconditions","1. The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. SA selects a sandbox"]},{"entry":["Events","2. SA selects a thin pool in a sandbox"]},{"entry":[{},"3. SA enters a new capacity to assign from the thin pool"]},{"entry":[{},"to the sandbox"]},{"entry":["Alternative Paths","1. None"]},{"entry":["Exception Paths","1. The capacity allocated to the sandbox is reduced to"]},{"entry":[{},"below what is already being used from the thin pool."]},{"entry":[{},"2. More capacity is added than is available in the thin pool"]},{"entry":["Postconditions","1. The new capacity for this type of storage appears in "]},{"entry":[{},"the vSphere client GUI"]},{"entry":["Notes","1. Adding capacity to a sandbox lessens the amount of "]},{"entry":[{},"capacity that can be assigned to other sandboxes."]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0145","num":"0147"},"tables":{"@attributes":{"id":"TABLE-US-00012","num":"00012"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 12"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Adopt LUNs"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name ","Adopt LUNs"]},{"entry":["Description","A thin pool that is being added to a sandbox may "]},{"entry":[{},"already have devices in it that users want to be "]},{"entry":[{},"controlled by the SPM. This could be because the "]},{"entry":[{},"storage pool manager meta-data has been corrupted or "]},{"entry":[{},"deleted, or the user wants to bring an existing VMware "]},{"entry":[{},"configuration under SPM control."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to repair a deleted or damaged SPM "]},{"entry":[{},"configuration or put an existing VMware configuration "]},{"entry":[{},"under SPM control"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1. ","The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1. ","The adopt LUN dialog is displayed for a sandbox"]},{"entry":["Events","2. ","A list of the current devices in the thin pool "]},{"entry":[{},{},"matching the following criteria are displayed:"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"a. ","Device is not reserved, or already reserved by "]},{"entry":[{},{},{},"SPM"]},{"entry":[{},{},"b. ","In a storage group, in a view, that has an "]},{"entry":[{},{},{},"initiator group that is in one of the views "]},{"entry":[{},{},{},"assigned to the sandbox"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"3. ","The SA selects which of the devices to adopt."]},{"entry":["Alternative","1. ","None"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["Paths",{}]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Exception Paths","1. ","None"]},{"entry":["Postconditions","1. ","The selected devices are adopted to be managed by "]},{"entry":[{},{},"SPM. They are placed in the sandbox, and their "]},{"entry":[{},{},"capacity is added to the sandbox's total capacity."]},{"entry":[{},"2.","The devices are added to the SPM reservation"]},{"entry":["Notes","1.","A VMware user must now run refresh which "]},{"entry":[{},{},"determines the VM's each device is attached to and "]},{"entry":[{},{},"then straightens out the capacity accounting."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0146","num":"0148"},"tables":{"@attributes":{"id":"TABLE-US-00013","num":"00013"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 13"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Adopt Existing Configuration"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Adopt an existing VMware configuration"]},{"entry":["Description","SPM is being deployed in an environment where there "]},{"entry":[{},"is an existing VMware configuration that already uses "]},{"entry":[{},"storage from a Symmetrix. The existing thin pools and "]},{"entry":[{},"thin LUNs need to be brought under SPM control"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to bring an existing VMware "]},{"entry":[{},"environment under SPM control"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1. ","The SA has access to the SMC server via a browser"]},{"entry":[{},"2. ","The SA has both the storage administrator and "]},{"entry":[{},{},"security administrator role on the Symmetrix(s)"]},{"entry":["Basic Course of","1. ","SA either creates new views to use to mask new "]},{"entry":["Events",{},"LUNs to the VMware cluster, or decides to use the "]},{"entry":[{},{},"existing ones. If he creates new ones, they would "]},{"entry":[{},{},"use the existing initiator groups that contain the "]},{"entry":[{},{},"WWN's for the VMware cluster."]},{"entry":[{},"2. ","If authorization is being used on the Symmetrix, "]},{"entry":[{},{},"then the SA enters authorizations for the vSphere "]},{"entry":[{},{},"server on the thin pools that contain the LUNs "]},{"entry":[{},{},"currently in use by the VMware cluster and for the "]},{"entry":[{},{},"storage groups in the views of the previous step."]},{"entry":[{},"3. ","SA either decides to use some existing storage "]},{"entry":[{},{},"types, or create new ones. In either case there must "]},{"entry":[{},{},"be one per thin pool that is going to be put into the "]},{"entry":[{},{},"sandbox."]},{"entry":[{},"4. ","The SA creates a sandbox as normal"]},{"entry":[{},"5. ","The SA selects thin pools to add to the sandbox. "]},{"entry":[{},{},"These thin pools already contain the devices which "]},{"entry":[{},{},"are mapped to the VMware configuration."]},{"entry":[{},"6. ","The SA selects which LUNs to adopt, see the use "]},{"entry":[{},{},"case 0"]},{"entry":[{},"7. ","The VMUser does a refresh configuration."]},{"entry":["Alternative","1. ","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","None"]},{"entry":["Postconditions","1.","The existing configuration is now under control of "]},{"entry":[{},{},"SPM."]},{"entry":["Notes","1.","This is only supported for thin pools and thin "]},{"entry":[{},{},"devices"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0147","num":"0149"},"tables":{"@attributes":{"id":"TABLE-US-00014","num":"00014"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 14"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Set Client Security"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Set Up Client Security"]},{"entry":["Description","Set the password that is used by vSphere clients to log "]},{"entry":[{},"into the SMC server"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA is setting up the storage pool manager "]},{"entry":[{},"environment."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1.","SA sets the password to be used"]},{"entry":["Events",{},{}]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","None"]},{"entry":["Postconditions","1.","The first time a client connects to the SMC server it "]},{"entry":[{},{},"must supply this password. Once the first "]},{"entry":[{},{},"connection is made, the password is not used."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0148","num":"0150"},"tables":{"@attributes":{"id":"TABLE-US-00015","num":"00015"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 14"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Backup SPM Data"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Backup SPM data"]},{"entry":["Description","Backup the SPM data"]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to backup the SPM in case it gets "]},{"entry":[{},"corrupted or destroyed."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1.","SA selects backup data"]},{"entry":["Events","2.","A popup dialog is displayed. The SA enters a folder "]},{"entry":[{},{},"name to backup the SPM data to."]},{"entry":[{},"3.","The SA clicks OK."]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","The folder path does not exist, or the SA does not "]},{"entry":[{},{},"have permissions to write to the folder."]},{"entry":["Postconditions","2.","The SPM meta-data is written to the folder"]},{"entry":["Notes","1.","The backup folder is created in the SMC directory "]},{"entry":[{},{},"path under . . . \\WEB-INF\\SPM_META_DATA"]},{"entry":[{},"2.","If the folder does not exist, then it is created."]},{"entry":[{},"3.","If the folder does exist the old data is deleted before "]},{"entry":[{},{},"the new data is placed there."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0149","num":"0151"},"tables":{"@attributes":{"id":"TABLE-US-00016","num":"00016"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 15"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Restore SPM Data"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Restore the SPM data"]},{"entry":["Description","This causes the SPM data to be replaced with SPM data "]},{"entry":[{},"that had previously been saved in a backup."]},{"entry":["Actors","Storage admin, SA"]},{"entry":["Triggers","The SA wants to restore damaged or lost SPM data."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","The SA has access to the SMC server via a browser"]},{"entry":["Basic Course of","1.","SA selects restore data"]},{"entry":["Events","2.","A popup dialog is displayed. The SA enters, or "]},{"entry":[{},{},"selects, the file which contains the previously "]},{"entry":[{},{},"backed up data"]},{"entry":[{},"1.","The SA clicks OK."]},{"entry":["Alternative","1. ","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","The folder does not exist"]},{"entry":["Postconditions","1.","The backed up data is used to restore the SPM "]},{"entry":[{},{},"meta-data"]},{"entry":["Notes","1.","The backup folder is found in the SMC directory "]},{"entry":[{},{},"path under . . . \\WEB-INF\\SPM_META_DATA"]},{"entry":[{},"2.","If the restored SPM meta-data refers to Symmetrix "]},{"entry":[{},{},"objects that no longer exist, the meta data referring "]},{"entry":[{},{},"to those objects is removed."]},{"entry":[{},"3.","A VMware user should run update configuration "]},{"entry":[{},{},"after the restore"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"The following TABLES 16-21 detail example use cases and functional details of the SPM  related to functions of the VE administrator.",{"@attributes":{"id":"p-0151","num":"0153"},"tables":{"@attributes":{"id":"TABLE-US-00017","num":"00017"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 16"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Create an SPM server connection"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Create an SPM server connection"]},{"entry":["Description","Registers an SPM Server with a client to perform SPM"]},{"entry":[{},"operations."]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser needs access to storage resources from an "]},{"entry":[{},"SPM server."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":["Basic Course of","1.","User, through the vSphere client, navigates to the "]},{"entry":["Events",{},"EMC Storage Configuration section from the Home "]},{"entry":[{},{},"screen."]},{"entry":[{},"2. ","SPM Configuration section displays a list of "]},{"entry":[{},{},"existing SPM server connection information."]},{"entry":[{},"3. ","User select \u2018Add Sever\u2019."]},{"entry":[{},"4. ","Dialog box asks the user to enter information about "]},{"entry":[{},{},"the new Server: IP address, SMC port #, password"]},{"entry":[{},"5. ","User presses OK"]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","Incomplete information entered in dialog."]},{"entry":["Postconditions","1.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"2.","The connection information is visible in the SPM "]},{"entry":[{},{},"Configuration section."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0152","num":"0154"},"tables":{"@attributes":{"id":"TABLE-US-00018","num":"00018"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 17"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Remove an SPM server connection"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Remove an SPM server connection"]},{"entry":["Description","Unregisters an SPM Server from a client."]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser no longer needs access to storage "]},{"entry":[{},"resources from an SPM server."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":["Basic Course of ","1.","User through the vSphere client navigates to the "]},{"entry":["Events",{},"EMC Storage Configuration section from the Home "]},{"entry":[{},{},"screen."]},{"entry":[{},"2.","SPM Configuration section displays a list of "]},{"entry":[{},{},"existing SPM server connection information."]},{"entry":[{},"3.","User selects a connection to remove"]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","None"]},{"entry":["Postconditions","1.","vSphere client has access to the SPM\/SMC server "]},{"entry":[{},{},"has been removed"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0153","num":"0155"},"tables":{"@attributes":{"id":"TABLE-US-00019","num":"00019"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 18"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Modify an SPM server connection"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Modify an SPM server connection"]},{"entry":["Description","Modify SPM Server connection settings."]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser needs to update connection settings for an "]},{"entry":[{},"existing SPM server."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":["Basic Course of","1.","User through the vSphere client navigates to the "]},{"entry":["Events",{},"EMC Storage Configuration section from the Home "]},{"entry":[{},{},"screen."]},{"entry":[{},"2.","SPM Configuration section displays a list of "]},{"entry":[{},{},"existing SPM server connection information."]},{"entry":[{},"3.","User selects a connection to modify"]},{"entry":[{},"4.","User modifies the connection"]},{"entry":["Alternative","1.","Modify the contents of spmsettings.xml and restart "]},{"entry":["Paths",{},"the vSphere plug-in instance."]},{"entry":["Exception Paths","1.","Incomplete information entered in dialog."]},{"entry":["Postconditions","1.","vSphere client has access to the SPM\/SMC server "]},{"entry":[{},{},"has been updates to use the new information."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0154","num":"0156"},"tables":{"@attributes":{"id":"TABLE-US-00020","num":"00020"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 19"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Allocate Storage for VMware Object"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Allocate storage for VMware Object"]},{"entry":["Description","After a storage administrator assigns a sandbox to a "]},{"entry":[{},"vSphere server a VMware administrator can allocate the "]},{"entry":[{},"storage in that sandbox to VMware objects, i.e. data "]},{"entry":[{},"centers, ESX servers, clusters or resource pools."]},{"entry":["Actors","VMware administrator, VMAdmin"]},{"entry":["Triggers","A VMAdmin needs to make some storage available for "]},{"entry":[{},"provisioning to a VMware data center, ESX server, "]},{"entry":[{},"cluster or resource pool"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"3.","A sandbox has been assigned to the vSphere server "]},{"entry":[{},{},"that the VMAdmin has permission on"]},{"entry":["Basic Course of","1.","The VMAdmin selects the data center, ESX server, "]},{"entry":["Events",{},"cluster or resource pool he wishes to allocate "]},{"entry":[{},{},"storage for"]},{"entry":[{},"2.","The VMAdmin is presented with the available "]},{"entry":[{},{},"storage, by storage type, from the parent of this "]},{"entry":[{},{},"VMware object. If the parent has not been explicitly "]},{"entry":[{},{},"allocated storage then its parent is examined, etc. all "]},{"entry":[{},{},"the way up to the virtual center if needed."]},{"entry":[{},"3.","The VMAdmin enters the amount of storage he "]},{"entry":[{},{},"wants for each type of storage available"]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","If a clustered ESX server is selected no allocations "]},{"entry":[{},{},"can be made. Allocations can only be made to an "]},{"entry":[{},{},"ESX if it is not a member of a cluster."]},{"entry":[{},"2.","The amount of requested allocation exceeds what is "]},{"entry":[{},{},"available from the parent object."]},{"entry":[{},"3.","The amount of requested allocation is less than what "]},{"entry":[{},{},"is already in use at this object."]},{"entry":["Postconditions","1.","The amounts of each type are now allocated to this "]},{"entry":[{},{},"object; data center, ESX server, cluster or resource "]},{"entry":[{},{},"pool. Children of this object may now only allocate "]},{"entry":[{},{},"storage from the amounts and types available in this "]},{"entry":[{},{},"object, i.e. they cannot allocate storage available "]},{"entry":[{},{},"from parents of this object."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0155","num":"0157"},"tables":{"@attributes":{"id":"TABLE-US-00021","num":"00021"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 20"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Refresh Cluster Membership"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Refresh cluster membership"]},{"entry":["Description","The server members of a VMware ESX cluster can "]},{"entry":[{},"change or new HBAs may be added to an ESX server. "]},{"entry":[{},"When they change, the list of server FC ports for the "]},{"entry":[{},"cluster needs to be updated."]},{"entry":["Actors","VMware administrator, VMAdmin"]},{"entry":["Triggers","The ESX cluster server membership has been changed"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":["Basic Course of","1.","The VMAdmin selects the ESX server or cluster "]},{"entry":["Events",{},"whose membership has changed"]},{"entry":[{},"2.","The VMAdmin selects refresh cluster membership"]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","None"]},{"entry":["Postconditions","1.","The list of server ports recorded for that cluster is "]},{"entry":[{},{},"updated. When a new LUN is created for this cluster "]},{"entry":[{},{},"the sandbox's views will be checked to make sure "]},{"entry":[{},{},"there is an initiator group that matches the members "]},{"entry":[{},{},"of the cluster."]},{"entry":["Notes","1.","This does not change the membership of any "]},{"entry":[{},{},"initiator groups."]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0156","num":"0158"},"tables":{"@attributes":{"id":"TABLE-US-00022","num":"00022"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 21"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Refresh Configuration"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Refresh configuration"]},{"entry":["Description","Refresh configuration causes the SPM configuration "]},{"entry":[{},"data to be aligned with the VMware configuration. The "]},{"entry":[{},"SPM configuration data can become out of sync with "]},{"entry":[{},"the VMware configuration when changes are made to "]},{"entry":[{},"VMware configuration, for example creating or deleting"]},{"entry":[{},"a resource pool."]},{"entry":["Actors","VMware administrator, VMAdmin"]},{"entry":["Triggers","The VMAdmin wants to bring the SPM data in sync "]},{"entry":[{},"with the Symmetrix and VMware configurations."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":["Basic Course of","1.","VMAdmin selects refresh on the SPM "]},{"entry":["Events",{},"Configuration page."]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths ","1.","None"]},{"entry":["Postconditions","1.","Updates the SPM server with:"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"a.","Used and available storage for each VMware "]},{"entry":[{},{},{},"object."]},{"entry":[{},{},"b.","Which LUNs are mapped to which VM's or "]},{"entry":[{},{},{},"clusters"]},{"entry":[{},{},"c.","Any changes to the VMware hierarchy, e.g. new "]},{"entry":[{},{},{},"resource pool added, VM migration from one "]},{"entry":[{},{},{},"resource pool to another, etc."]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}}},"The following TABLES 22-26 detail example use cases and functional details of the SPM  related to functions of the VE user.",{"@attributes":{"id":"p-0158","num":"0160"},"tables":{"@attributes":{"id":"TABLE-US-00023","num":"00023"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 22"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Create RDM for VM"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Create RDM for VM"]},{"entry":["Description","Creates a thin device and maps it as an RDM for an "]},{"entry":[{},"existing VM"]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser decides he needs to provision an RDM for "]},{"entry":[{},"his VM"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"3.","Storage has been allocated to the VMware object or "]},{"entry":[{},{},"one of its parents that the VM is a child of"]},{"entry":[{},"4.","vCenter server has authorizations on the thin pool "]},{"entry":[{},{},"and storage group that will be used"]},{"entry":[{},"5.","SAN is zoned correctly"]},{"entry":["Basic Course of","1.","User through the vSphere client right clicks on the "]},{"entry":["Events",{},"VM he desires to create the RDM for and selects "]},{"entry":[{},{},"\u2018Add Storage\u2019"]},{"entry":[{},"2.","Dialog box asks the user to enter information about "]},{"entry":[{},{},"the RDM"]},{"entry":[{},"3.","The user selects the type of storage from the types "]},{"entry":[{},{},"available to the VM's VMware parent object"]},{"entry":[{},"4.","The user sets the size of the LUN by either selecting "]},{"entry":[{},{},"one of the pre-created sizes, or by entering an "]},{"entry":[{},{},"arbitrary size"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"a. ","If the SA has set the policy that says that only "]},{"entry":[{},{},{},"pre-created LUN sizes may be used then the user "]},{"entry":[{},{},{},"will not be able to create arbitrary sized LUNs"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"5.","Advanced settings will optionally be made available "]},{"entry":[{},{},"to configure RDM options such as device modes, "]},{"entry":[{},{},"etc."]},{"entry":["Alternative","1. ","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","There is not enough available capacity for the "]},{"entry":[{},{},"storage type selected"]},{"entry":[{},"2.","Creating the LUN violates one of the provisioning "]},{"entry":[{},{},"policies put in place on the sandbox by the SA, e.g. "]},{"entry":[{},{},"maximum number of LUNs"]},{"entry":["Postconditions","1.","If the size selected was a pre-created size and if "]},{"entry":[{},{},"there is an existing, free, thin device, then it is used, "]},{"entry":[{},{},"otherwise a new thin device is created"]},{"entry":[{},"2.","The thin device is added to the storage group for "]},{"entry":[{},{},"that thin pool\/cluster combination."]},{"entry":[{},"3.","The thin device is discovered by the servers in the "]},{"entry":[{},{},"cluster"]},{"entry":[{},"4.","An RDM for the VM is created from the thin device"]},{"entry":[{},"5.","Capacities for the VMware objects are updated"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0159","num":"0161"},"tables":{"@attributes":{"id":"TABLE-US-00024","num":"00024"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 23"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Remove RDM from VM"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Remove RDM from VM"]},{"entry":["Description","Un-maps an RDM from a VM and deletes the LUN"]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser decides he no longer needs the RDM "]},{"entry":[{},"mapped to a VM."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"3.","An RDM has been mapped to a VM."]},{"entry":[{},"4.","vCenter server has authorizations on the thin pool "]},{"entry":[{},{},"and storage group that will be used"]},{"entry":["Basic Course of","1.","User is presented with a list of existing RDMs on a "]},{"entry":["Events",{},"VM's \u2018EMC Storage\u2019 tab."]},{"entry":[{},"2.","User right clicks an RDM and chooses to remove "]},{"entry":[{},{},"the RDM."]},{"entry":[{},"3.","If the device is an SPM device, the user will be "]},{"entry":[{},{},"asked if they wish to destroy the device and return "]},{"entry":[{},{},"storage to the pool or leave the device mapped to "]},{"entry":[{},{},"the cluster."]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","None"]},{"entry":["Postconditions","1.","If the device was a non-SPM device, the RDM is "]},{"entry":[{},{},"removed and the device is still presented to the "]},{"entry":[{},{},"cluster."]},{"entry":[{},"2.","The RDM will be removed from the VM, and "]},{"entry":[{},{},"depending on the answer to Event 3, will still be "]},{"entry":[{},{},"presented to the cluster or be deleted."]},{"entry":[{},"3.","If the LUN is to be deleted, the capacity of the LUN "]},{"entry":[{},{},"is checked against the pre-creation policies for the "]},{"entry":[{},{},"sandbox."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"a.","If the capacity does not match any of the policies "]},{"entry":[{},{},{},"the device is deleted"]},{"entry":[{},{},"b.","If the capacity matches a policy the device "]},{"entry":[{},{},{},"storage is reclaimed and the device is kept for a "]},{"entry":[{},{},{},"future LUN creation of that size"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"4.","Capacities for the VMware objects are updated"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0160","num":"0162"},"tables":{"@attributes":{"id":"TABLE-US-00025","num":"00025"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 24"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Create VMFS Datastore for a Cluster"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Create a VMFS Datastore for a cluster"]},{"entry":["Description","Creates a thin device and formats it as a VMFS "]},{"entry":[{},"Datastore"]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser decides he needs a new VMFS Datastore "]},{"entry":[{},"for his cluster"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","The SPM license has been installed on the SMC "]},{"entry":[{},{},"server"]},{"entry":[{},"2.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"3.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"4.","Storage has been allocated to the VMware object or "]},{"entry":[{},{},"one of its parents"]},{"entry":[{},"5.","vCenter server has authorizations on the thin pool "]},{"entry":[{},{},"and storage group that will be used"]},{"entry":[{},"6.","SAN is zoned correctly"]},{"entry":["Basic Course of","1.","User through the vSphere client right clicks on the "]},{"entry":["Events",{},"ESX server or cluster he desires to create a VMFS "]},{"entry":[{},{},"Datastore for"]},{"entry":[{},"2.","Dialog box asks the user to enter information about "]},{"entry":[{},{},"the VMFS Datastore"]},{"entry":[{},"3.","The user selects the type of storage from the types "]},{"entry":[{},{},"available to the cluster"]},{"entry":[{},"4.","The user sets the size of the LUN by either selecting "]},{"entry":[{},{},"one of the pre-created sizes, or by entering an "]},{"entry":[{},{},"arbitrary size"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"a.","If the SA has set the policy that says that only "]},{"entry":[{},{},{},"pre-created LUN sizes may be used then the user "]},{"entry":[{},{},{},"will not be able to create arbitrary sized LUNs"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","There is not enough available capacity for the "]},{"entry":[{},{},"storage type selected"]},{"entry":["Postconditions","1.","If the size selected was a pre-created size then an "]},{"entry":[{},{},"existing, free, thin device is used, otherwise a new "]},{"entry":[{},{},"thin device is created"]},{"entry":[{},"2.","The thin device is added to the storage group for "]},{"entry":[{},{},"that thin pool\/cluster combination."]},{"entry":[{},"3.","The thin device is discovered by the servers in the "]},{"entry":[{},{},"cluster"]},{"entry":[{},"4.","The LUN\/thin device is formatted as a VMFS data "]},{"entry":[{},{},"store"]},{"entry":[{},"5.","Capacities for the VMware objects are updated"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0161","num":"0163"},"tables":{"@attributes":{"id":"TABLE-US-00026","num":"00026"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 25"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Delete VMFS Datastore from a Cluster"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Delete a VMFS Datastore from a cluster"]},{"entry":["Description","Deletes the device(s) backing a VMFS Datastore"]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser decides he needs a new VMFS Datastore "]},{"entry":[{},"for his cluster"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","The SPM license has been installed on the SMC "]},{"entry":[{},{},"server"]},{"entry":[{},"2.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"3.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"4.","Storage has been allocated to the VMware object or "]},{"entry":[{},{},"one of its parents"]},{"entry":[{},"5.","A VMFS Datastore is mapped to a cluster."]},{"entry":[{},"6.","vCenter server has authorizations on the thin pool "]},{"entry":[{},{},"and storage group that will be used"]},{"entry":["Basic Course of","1.","User right-clicks on a Datastore and from the \u2018EMC "]},{"entry":["Events",{},"Storage\u2019 menu and selects delete Datastore."]},{"entry":[{},"2.","If the device is an SPM device, the user will be "]},{"entry":[{},{},"asked if they wish to destroy the backing device(s) "]},{"entry":[{},{},"and return storage to the pool or leave the device "]},{"entry":[{},{},"mapped to the cluster."]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","The Datastore does not contain a SPM device(s)."]},{"entry":["Postconditions","1.","The Datastore will be removed from the cluster, and "]},{"entry":[{},{},"depending on the answer to Event 2, will still be "]},{"entry":[{},{},"presented to the cluster or be deleted."]},{"entry":[{},"2.","If the LUN is to be deleted, the capacity of the LUN "]},{"entry":[{},{},"is checked against the pre-creation policies for the "]},{"entry":[{},{},"sandbox."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"a.","If the capacity does not match any of the policies "]},{"entry":[{},{},{},"the device is deleted"]},{"entry":[{},{},"b.","If the capacity matches a policy the device "]},{"entry":[{},{},{},"storage is reclaimed and the device is kept for a "]},{"entry":[{},{},{},"future LUN creation of that size"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"3.","Capacities for the VMware objects are updated"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0162","num":"0164"},"tables":{"@attributes":{"id":"TABLE-US-00027","num":"00027"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 26"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Extend VMFS Datastore"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Use Case Name","Extend a VMFS Datastore"]},{"entry":["Description","Extend a VMFS Datastore. This use case is only valid "]},{"entry":[{},"for VMFS data stores composed of SPM LUNs."]},{"entry":["Actors","VMware user, VMUser"]},{"entry":["Triggers","The VMUser decides he needs to extend and existing "]},{"entry":[{},"VMFS Datastore for his cluster."]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Preconditions","1.","Viewer plug-in is installed into the vSphere client"]},{"entry":[{},"2.","vSphere client has access to the SPM\/SMC server"]},{"entry":[{},"3.","Storage has been allocated to the VMware object or "]},{"entry":[{},{},"one of its parents"]},{"entry":[{},"4.","A VMFS Datastore is mapped to a cluster."]},{"entry":[{},"5.","vCenter server has authorizations on the thin pool "]},{"entry":[{},{},"and storage group that will be used"]},{"entry":["Basic Course of ","1.","User right-clicks on a Datastore and from the \u2018EMC "]},{"entry":["Events",{},"Storage\u2019 menu and selects extend Datastore."]},{"entry":[{},"2.","If the Datastore is backed by an SPM device, a "]},{"entry":[{},{},"dialog asks the user for the new, larger capacity."]},{"entry":["Alternative","1.","None"]},{"entry":["Paths",{},{}]},{"entry":["Exception Paths","1.","None"]},{"entry":["Postconditions ","1.","The Datastore will display a larger capacity in the "]},{"entry":[{},{},"VMware GUI."]},{"entry":[{},"2.","A new device will be provisioned and appended to "]},{"entry":[{},{},"the Datastore as a new extent."]},{"entry":[{},"3.","Capacities for the VMware objects are updated"]},{"entry":["Notes","1.","VMware's LUN concatenation facility will be used "]},{"entry":[{},{},"to extend the Datastore as opposed to any array "]},{"entry":[{},{},"facility"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}]}}},"According to the system described herein, the SPM  pushes the provisioning of storage from a storage administrator out to virtualization users and administrators. By de-centralizing storage administration, storage provisioning is made as dynamic as server provisioning in a virtualization environment. Use of the SPM  enables virtualization users to select storage for provisioning based on a request that includes selection of a type of storage and an amount without having to be knowledgeable about storage provisioning operations. The details of creating the storage and performing masking operations to the servers are done automatically. Further, using a virtual container (i.e. sandbox), the storage administrator is able to control the storage that is accessible to virtualization users for provisioning and is able to set boundaries and policies around what storage the virtualization users can provision from. Additionally, using the SPM , the virtualization administrator is allowed to sub-divide the storage made accessible from the storage administrator using a virtualization hierarchy like that provided for CPU and memory resources.","In other embodiments, the system described herein may be used in connection with end user provisioning of storage for various types of virtualization environments, such as enabled by VMware and\/or Hyper-V, for example. The storage arrays used in connection with the system described herein may include arrays produced by EMC Corporation of Hopkinton, Mass., including Symmetrix and Clariion, as well as other appropriate types of storage arrays. The system described herein may be used in connection with storage tiering, as further discussed elsewhere herein, including FAST tiers, and storage types may be defined in terms of FAST tier policies and FAST SLA's rather than just in terms of physical storage characteristics. Suitable storage pools that may be used with the system described herein may include thin pools, thick pools, FAST pools and\/or other appropriate kinds of storage pools.","Various of the embodiments discussed herein may be combined with each other in appropriate combinations in connection with the system described herein. Additionally, in some instances, the order of steps in the flowcharts may be modified, where appropriate. Further, the system described herein may be implemented using software, hardware, and\/or a combination of software and hardware. Software implementations of the system described herein may include executable code that is stored in a computer readable medium and executed by one or more processors. The computer readable medium may include a computer hard drive, ROM, RAM, flash memory, portable computer storage media such as a CD-ROM, a DVD-ROM, a flash drive and\/or other drive with, for example, a universal serial bus (USB) interface, and\/or any other appropriate tangible or non-transitory storage medium or computer memory on which executable code may be stored and executed by a processor. The system described herein may be used in connection with any appropriate operating system. Further, any appropriate servers\/routers may be used. Some or all of the routers may be replaced with other devices and\/or some or all of the services provided by the routers may be provided by some or all of the servers.","Other embodiments of the invention will be apparent to those skilled in the art from a consideration of the specification or practice of the invention disclosed herein. It is intended that the specification and examples be considered as exemplary only, with the true scope and spirit of the invention being indicated by the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Embodiments of the system are described with reference to the several figures of the drawings which are briefly described as follows.",{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 9","FIG. 8"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
