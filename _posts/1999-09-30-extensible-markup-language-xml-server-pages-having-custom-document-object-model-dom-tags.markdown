---
title: Extensible markup language (XML) server pages having custom document object model (DOM) tags
abstract: A method for serving a web page uses eXtensible Markup Language (XML) server pages. The first time a page is accessed, a given flat file is parsed into an XML Document Object Model (DOM), and required tag libraries are loaded. The DOM tree is then traversed, preferably in a depth-first, inside-out manner to locate custom tags. Upon locating a custom tag, if the tag is registered as a Java object, the object is loaded. A process method is then called on the object, passing the custom tag's tree node. The Java object then examines the custom tag and replaces it with an object, e.g., script code. Alternatively, if the tag is registered as an XSL stylesheet, the stylesheet is loaded and passed, together with the DOM, to an XSL processor. The processor applies the template to the custom tag and replaces it with given script code. Once all custom tags are reduced to HTML and script code, the DOM is compiled into a Java servlet to service the client request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06981212&OS=06981212&RS=06981212
owner: International Business Machines Corporation
number: 06981212
owner_city: Armonk
owner_country: US
publication_date: 19990930
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["COPYRIGHT NOTICE","BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT","EXAMPLES","mixedLanguages.xsp"],"p":["A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.","1. Technical Field","The present invention relates generally to Internet publishing technologies and, in particular, to techniques for dynamically serving web page content.","2. Description of the Related Art","A Hypertext Markup Language (HTML) file uses a limited set of tags to convey basic information about the structure of a web document, e.g., whether given text is a heading or a paragraph. With HTML, the style and logic of the document are hardcoded. HTML does not provide tags that define the meaning of the page element. To address this limitation, web content is now being authored in eXtensible Markup Language (XML), which provides a way for an author to create a custom markup language to suit a particular kind of document. In XML, each document is an object, and each element of the document is an object. The logical structure of the document typically is specified in a Document Type Definition (DTD). A DTD may be used by the author to define a grammar for a set of tags for the document so that a given application may validate the proper use of the tags. ADTD comprises a set of elements and their attributes, as well as a specification of the relationship of each element to other elements. Once an element is defined, it may then be associated with a stylesheet, a script, HTML code or the like. Thus, with XML, an author may define his or her own tags and attributes to identify structural elements of a document, which may then be validated automatically. An XML document's internal data structure representation is a Document Object Model (DOM). The DOM makes it possible to address a given XML page element as a programmable object. It is basically a tree of all the nodes in an XML file.","Page serving technologies are evolving at a rapid pace. Since 1997, three new major technologies have attempted to supplement, if not replace, dynamically generated HTML, i.e. database or CGI scripts used to generate a web page on the fly. These technologies are Microsoft's active server page (ASP), Sun Microsystems's Java server page (JSP), and the Extensible Style Sheet Language (XSL\/XSLT) being promoted by the World Wide Web Consortium(W3C). They provide for the generation and serving of dynamic web page content by enabling a page creator to write HTML and then to embed pure programming logic inside the page markup. Microsoft's ASP and Sun's JSP are very similar in that they both are essentially web templates that enable given code (e.g., code written in Java) to be embedded in static HTML to be served in response to a client browser request. In an illustrative example, a server (and, in particular, a Java runtime servlet) responds to a client .jsp request as follows: the servlet retrieves a flat file corresponding to the requested page, translates that file into a Java servlet, compiles the servlet, class loads the servlet, and then invokes the servlet to cause given (e.g., customized) web content to be returned to the requesting browser. XSL\/XSLT, to the contrary, is rooted in formatting and manipulating XML. XSLT, in particular, provides extensible mechanisms for defining templates to manipulate XML of any custom DTD.","The existing techniques for serving dynamic content have various limitations. Conventional server-side scripting on a web page can be complicated and, therefore, such scripting is usually difficult to maintain and evolve. Further, with existing technologies, typically only a single scripting language is allowed on a web page. This limitation is acceptable, so long as only one author is responsible for editing the page, or if all of the responsible authors know and use the same scripting language and the language of choice is supported by the web server. Microsoft's ASP technology supports multiple scripting languages, but only one language may be used on a page. Moreover, multiple languages cannot be embedded in one another, and their order of execution is undefined. Further, page-serving technologies such as ASP and JSP are not XML-compliant, and neither ASP nor JSP provides an extension mechanism to allow authors to add custom tags.","It is also known in the art to provide a web page author with a library of preexisting custom tags. An illustrative product of this type is Cold Fusion, which is HTML-centric. This product, however, does not afford the author the ability to create custom tags. Macromedia's Dreamweaver product has a tag construction mechanism, but this product does not allow for the embedding of custom tags, nor does it allow the document to be reorganized by the tags. It also keeps the script code on the page. In particular, the script is hidden from the user, but it is still present on the page, and it may be viewed and\/or edited from within another editor. However, the modifications made in another tool are not maintained. Microsoft provides a similar technology, called design-time control (DTC), that hides code from the user but still maintains the code on the page. DTC is not XML-compliant and it does not allow DTCs to be embedded within one another. Nor does the DTC mechanism allow the document to be reorganized. In addition, the DTC syntax is quite cumbersome for the page author. Moreover, while other DTC-aware tools will hide the script code correctly, basic text-editors can still edit the code, and the changes made will not be importable back into the DTC-aware tools. DTC also does not provide access to the Document Object Model. Other products or technologies that have custom tag extensions include HeiTML and Meta-HTML. Essentially, these are tag macro definition languages for HTML. Such languages, however, are not XML compliant.","There remains a need in the art to provide new techniques for publishing Internet content that can fully leverage the manipulation and template mechanism of XSLT with the scripting capability of the JSP\/ASP model. The present invention addresses this need.","It is a primary object of the present invention to provide a server page handling mechanism that enables custom tags to be extended with XML\/DOM. As used herein, a \u201ccustom\u201d tag is a element that defines a semantic of given content in the page, which may be uniquely specified by a web page author. Web page authors can use this mechanism to add custom tags to the page markup, with these tags serving as markers that initiate the invocation of tag handlers that, in turn, perform simple macro (i.e. static) substitution or complex algorithmic reorganization and manipulation of the document.","It is another more specific object of the present invention to enable authoring of a web page with custom tags that, at page translation time, are converted (e.g., by a Java object or an XSL stylesheet) into script code. This script code is then compiled into Java code, and then into a Java servlet, for servicing a given client HTTP request. Preferably, the script code is kept separate from the page.","It is another more general object of this invention to provide a server page handling engine that is built on top of XML.","Another more general object of this invention is to provide a framework and runtime that, in effect, combines the manipulation and template mechanism of XSLT with the scripting capability of page serving technologies such as JSP and ASP. The invention provides the advantages of XSLT scripting but does not require the overhead of interpretation at request time.","According to an embodiment of the present invention, a web page author may define a custom DOM (Document Object Model) tag in a web page that, at page-translation time, is converted into script code (e.g., by a Java object or an XSL stylesheet). This script code is then compiled into Java code, and then into a Java servlet, yielding excellent performance in servicing a client's request for the page. Because the custom tag serves as a marker for a tag handler that manipulates the document, the page is kept clean and easy to maintain. The script code is kept separate and, therefore, need only be debugged once.","In a preferred embodiment, custom tags are registered in an XML tag library file. This file preferably includes the name of the custom tag as well as a Java object name or a URL naming an XSL stylesheet. The first time the page is accessed, the page handling engine of the present invention parses it into an XML Document Object Model (DOM), and all the required tag libraries are loaded. The engine then traverses the DOM tree, preferably in a depth-first inside out manner, looking for registered custom tags. Upon finding one, if the tag is registered as a Java object, a bean is loaded, and a \u201cprocess\u201d method is then called, passing the custom tag's tree node. The Java object has access to the entire DOM, and it may modify the DOM however it deems necessary. Thus, for example, the Java object examines the custom tag and replaces it with other custom tags, script code, or HTML. Once processing is complete, the DOM is reexamined to identify any new tag library directives and new custom tags. If necessary, appropriate tag bean handlers are then invoked recursively according to a custom tag search algorithm.","According to a preferred embodiment, a method for processing a document object model (DOM) tree including a set of custom tags begins by verifying a DOM data representation (e.g., a tree) against a Document Type Definition (DTD). Thereafter, the DOM tree is examined in a given manner, preferably, in a depth first, inside-out manner. For each custom tag in the DOM tree, the routine performs a number of substeps: retrieving a left-most leaf node in the tree that is the custom tag, invoking a handler for the left-most leaf node, e.g., to replace the custom tag with given script code, and registering, with a tag registry, any new tag libraries that are generated as a result of invoking the handler. After all custom tags in the DOM tree have processed up the tree, the tree is preferably collapsed into a fewest possible number of method blocks.","The foregoing has outlined some of the more pertinent objects and features of the present invention. These objects should be construed to be merely illustrative of some of the more prominent features and applications of the invention. Many other beneficial results can be attained by applying the disclosed invention in a different manner or modifying the invention as will be described. Accordingly, other objects and a fuller understanding of the invention may be had by referring to the following Detailed Description of the Preferred Embodiment","The present invention is a page handling framework and runtime engine operative on a server in a computer network such as the Internet. As is well-known, in the Internet paradigm as illustrated in , a client machine, such as machine , may use an application, such as a web browser , to access a server  via a computer network . Network  typically includes other servers (not shown) for control of domain name resolution, routing and other control functions. A representative server  is a computer or workstation having at least one processor , system memory (e.g., RAM) , disk or other permanent storage , I\/O devices , an operating system , a server program , and an application programming interface (API)  that provides extensions to enable application developers to extend and\/or customize the core functionality thereof through software programs including plug-ins, CGI programs, Java servlets, and the like. One such software program is an inventive page handling mechanism , which processes an HTTP page request and generates a response by feeding data into an output stream as will be described. In an illustrative embodiment, the page handling mechanism is implemented in Java and is executable in a Java Virtual Machine(JVM) by a processor in a known manner. Alternatively, the program may be written in whole or in part in native code. The inventive functionality, of course, may be part of the integral web server program.","A representative server machine is an IBMNetfinity platform running the Unix operating system and a server program such as IBM WebSphere Version 2.0. Of course, any other computer hardware or software may be used.","A representative client is a personal computer, notebook computer, Internet appliance or pervasive computing device (e.g., a PDA or palm computer) that is Pentium-, PowerPC\u00ae- or RISC-based. The client includes an operating system such as Microsoft Windows, Microsoft Windows CE or PalmOS. A typical client includes a suite of Internet tools including a Web browser, such as Netscape Navigator or Microsoft Internet Explorer, that has a Java Virtual Machine (JVM) and support for application plug-ins or helper applications. Communications between the client and the server typically conform to the Hypertext Transfer Protocol (Version 1.0 or higher), and such communications may be made over a secure connection.","The flowcharts of  illustrate the inventive functionality of the page handling mechanism.","Servlet Generation",{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 2","b":["200","202","202","214","202","204","206"]},"Step  is illustrated in more detail in . Preferably, steps \u2013 are accomplished concurrently using an XML parser, such as the IBM WebSphere XML4J parser. The routine then continues at step . At this step, the DOM along with its namespaces are interpreted to produce a Java object, such as a servlet. This process is illustrated in more detail in . Thus, according to the invention and, in particular, steps ,  and , the present invention generates a page template via DOM translation of the flat file. At step , the servlet is compiled. The routine then continues at step  to class load the servlet. Control then continues at step , which has been previously described.","Steps \u2013 preferably occur at page translation time. Page translation typically occurs the first time the page (namely, the request for the flat file) is accessed or hit. Step  is executed to serve the requested page in response to the originating HTTP client request. In particular, the servlet is invoked with standard Http Request and Http Response objects, and it generates a response by feeding data into an output stream. The data is provided to the client browser for rendering in the usual manner.","The above-described invention provides several advantages over the prior art. As noted above, the routine illustrated in  preferably occurs at page translation time, which provides significant processing efficiencies. Moreover, the invention enables custom tags to be embedded within one another, which has not been available in the known art. The invention provides the further advantage of enabling the implementation of translation semantics using XSL stylesheets, which is also new to the art.","File Preparsing",{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 3","FIG. 2"],"b":"204"},"The routine begins at step  by passing the flat file to the preprocessor. At step , the input stream comprising the flat file is broken into tokens. The routine then performs a test at step  to determine whether the stream has any more tokens to process. If so, the routine continues at step  to test whether the token is a known JSP (or ASP) symbol. If the outcome of the test at step  is positive, the routine branches to step  to turn the JSP symbol into an XML tag. If the outcome of the test at step  is negative, the routine branches to step  to identify any text that violates XML constraints. Following either step  or step , the routine continues at step  to place the token in an output stream holder. Control then returns to step  to process additional tokens. If the outcome of step  is negative, however, the routine branches to step  to verify that the \u201cjsp:root\u201d tag exists in the stream. At step , the parser turns tag libraries into \u201cjsp:root\u201d namespace attributes. The routine then continues at step  by constructing the output stream. This completes the preparsing routine.","Processing a DOM with Custom Tags","A preferred algorithm for processing a DOM with custom tags is illustrated in . Preliminary processing is provided by steps \u2013. These steps may be omitted. In particular, the routine begins at step  by verifying the DOM, for example, with a JSP DTD. At step , the routine adds servlet generation variables to the root element of the DOM for later handling. The routine then continues at step  to gather all jsp:directive.page tags to ensure a consistent state. At step , the jsp tag libraries (which provide support for JSP 1.0 mechanisms) are registered with the root element. Thus, for example, custom tags are registered through an XML <taglib=\u201ctag-library.xml\u201d>tag, according to the JSP 1.0 specification.","By way of brief background, where a plurality of custom tags exist, it is desired to provide a cataloging and registration mechanism to organize the tags and to prevent naming collisions. According to the present invention, a tag library, or \u201ctaglib,\u201d is used for this purpose. As will be described below, the tag library is preferably specified by a URI and comprises a page, preferably XML, identifying the tag namespace and listing the tags recognized in the namespace as well as the directives on how to load the appropriate tag handlers. Thus, in a representative embodiment, in thetag-library-xml file, the name of the custom tag is listed, as well as a Java object name, or a URL identifying an XSL stylesheet.","The following is an example of a custom tag library:","In the JSP context:\n\n","This registers a Java TagBean to handle sample:currentTime tags and registers the currentTimeCustomTag.xsl as an XSL handler for sample: curentTimeXSL. As a bonus, both register currentTime.dtd to verify the correctness of the sample:currentTime and sample:currentTimeXSLtags before the formatting of those tags occurs.","Returning now to , the routine then continues at step . In particular, any additional tag libraries are gathered and registered with a main tag handler. According to the present invention, a tag handler is a process that is used to hand-off execution (of a custom tag in the DOM) to some other process, e.g., a Java object (through a custom tag interface), or via an XSL stylesheet. The routine then continues at step  by inserting a jspServicemethodDefinition as the last child of the jsp:root element. The methodDefinition preferably has the content of most of the servlet code. As will be described in more detail below, the jsp:block element is appended to the methodDefinition to begin the servlet's definition as a Java code block by default or with as the value of the jsp page directive attribute (if it is specified).","The main processing of the routine begins at step . At this step, a test is made to determine whether the DOM tree has any custom tags that have not been processed. If so, the routine branches to step  to locate preferably the left-most leaf node of the tree that satisfies its requirements as a custom tag. The routine then continues at step  to invoke an appropriate tag handler (e.g., a Java object, the XSL stylesheet, or the like). Two variations of step  are illustrated in the flowcharts of . As will be seen, the appropriate tag handler is given a current tag element and is expected to process it. Typically, a new DOM is returned from the tag handler and is then processed for new tag libraries. At step , the new tag libraries are registered in the tag library registry. The routine then continues at step  to gather all new jsp:directive tags. The routine then returns to step .","This loop continues until all custom tags have been processed in a like manner. When the outcome of the test at step  is negative, the routine branches to step  to collapse the resulting DOM tree into as few as possible method blocks. This operation is illustrated in . The routine then continues at step  to generate the servlet by interpreting scriptlet, expression, declaration and methodDefinitions. Thus, for example, at step , the routine interprets the DOM by replacing \u201cjsp:scriptlets\u201d with in lined code, by replacing \u201cjsp.expressions\u201d with prints, by replacing \u201cjsp:declarations\u201d with variables and method definitions, by replacing \u201cxsp:methodCalls\u201d with method calls, and by replacing \u201cxsp:methodDefinitions\u201d with method definitions. As described in , the resulting servlet is then compiled and class loaded to be ready for use by the runtime code.","Custom Tag Definition","Preferably, the DOM tree identifies custom tags as follows. As noted above, the JSP 1.0 specification included a tag library mechanism that defines how to plug in a tag. The specification, however, left the details of the taglib mechanism completely open, with the exception that a url must be used to specify the location of the taglib. According to the present invention, this abstract concept has been unified with an XML namespace and mapped into an XML file. In an illustrative embodiment, the Document Type Definition(DTD) for a taglib according to the invention is:\n\n","As noted above,  illustrate the preferred tag handling routines. As described, there are two types of tag handling: tags handled by XSLT () and tags handled by Java code (). Each of these handlers will now be described in more detail.","XSL Custom Tag Handler","The XSL tag handler routine begins at step  by receiving the DOM element as input. At step , the tag handler then finds the appropriate stylesheet for the element as supplied by the taglib rules. The routine then continues at step  with the tag handler obtaining the element's parent document. At step , the routine invokes a stylesheet processor on the document and stylesheet. Finally, at step , the tag handler returns the new document to complete the translation.","Java Object Custom Tag Handler",{"@attributes":{"id":"p-0052","num":"0070"},"figref":"FIG. 6","ul":{"@attributes":{"id":"ul0007","list-style":"none"},"li":["public interface TagBean","{\n    \n    ","}\n\nThe TagBean interface defines a process method that takes an element in from the DOM tree and performs some function against that element. The context of the entire DOM tree is available to the process method for manipulation through the DOM APIs.\n"]}},"The routine begins at step  with the Java tag handler receiving the DOM element as input. At step , the handler then obtains the appropriate tagbean for the element as supplied by the taglib rules. A number of tagbean routines are illustrated in  and will be described in more detailed below. At step , the handler extracts an attributeList from the element. The routine then performs a test at step  to determine whether there are any unprocessed attributes. If so, the routine branches to step  to determine whether the attribute maps to a setter property on the tagbean. If the outcome of the test at step  is negative, control returns to step . If, however, the outcome of the test at step  is positive, the routine continues at step  to set the value of the attribute on the tagbean. Control then continues at step  to remove the attribute from the attributeList. Processing then continues back at step .","Thus, for each attribute in the attributeList, the handler checks for a corresponding setter property on the tagbean. If a corresponding setter property exists, the value of the attribute is set on the tagbean and the attribute is removed from the attribute list. When the outcome of the test at step  indicates that all attributes have been checked against the tagbean, routine branches to step . At this step, the tagbean's process method is called given the DOM element so that it can manipulate the tree in whatever manner it deems fit. When tagbean.process( ) is complete, the new document is returned from the tag handler at step . This completes the processing.",{"@attributes":{"id":"p-0055","num":"0078"},"figref":"FIGS. 7\u20139"},"DOM in, Text Out Tagbean",{"@attributes":{"id":"p-0056","num":"0079"},"figref":"FIG. 7","ul":{"@attributes":{"id":"ul0009","list-style":"none"},"li":["public abstract class SimpleTagBean implements TagBean","{\n    \n    ","}\n\nSimpleTagBean is a class created to simplify the task of writing a tagbean. Using this class, the developer merely has to implement the translateElement method, which takes in a DOM element and returns the corresponding text macro expansion. In particular, the routine reads the DOM tree (e.g., using the DOM APIs), produces an XML block (typically a scriplet), and uses the XML block to replace the current element in the tree. This is advantageous to the writer of the tagbean because, using the invention, he or she does not need to know how to create new nodes and to populate them with values. All the writer has to do is create an XML expanded form of the element passed in. While this approach requires increased execution time at translation, translation only happens once every time the page changes; thus, the technique has little impact on server performance.\n"]}},"The SimpleTagBean class works as demonstrated in the flowchart of . The routine begins at step  with the Java tag handler calls SimpleTagBean.process with the appropriate tag element. At step , the SimpleTagBean hands the element off to its subclass's \u201coverwritten\u201d translateElement method. In the translateElement method, at step , the subclass looks at the element and its sub-elements and attributes to produce a text macro expansion of the node. The routine then continues at step  with the text expansion being returned to the SimpleTagBean.process method. At step , the XML is parsed backed into DOM. At step , the top node of the new document object replaces the element that was passed in from the previous document. In particular, in step , the top node of the new DOM replaces the element was passed into translateElement( ). This completes the processing.","Text in, Text Out Tagbean",{"@attributes":{"id":"p-0058","num":"0088"},"figref":"FIG. 8","ul":{"@attributes":{"id":"ul0011","list-style":"none"},"li":["public abstract class TextTagBean extends SimpleTagBean","{\n    \n    ","}\n\nTextTagBean extends the SimpleTagBean functionality. In particular, the TextTagBean extends the SimpleTagBean class and implements the translateElement function to inherit the String V DOM output functionality. Instead of the developer writing translateElement, however, he or she now writes translateText.\n"]}},"Referring now to , the routine begins at step  with the Java custom DOM tag handler handing the SimpleTagBean.process the appropriate element. At step , the routine hands the element off to the \u201coverwritten\u201d translateElement method. At step , the translateElement method converts the DOM directly into its corresponding XML. In particular, the TextTagBean.translateElement( ) takes the element and flattens it into XML without interpreting any of the XML. The routine then continues at step , with the XML then being passed to the translateText method of the subclass. At step , the translateText method reads the string and processes it to return a new XML string. In particular, translateText looks at the XML string and manipulates it to produce another text representation of it and returns this representation to TextTagBean.translateElement( ). At step , the new XML string is returned to the TextTagBean.translateElement, which returns the string to SimpleTagBean.process. SimpleTagBean.process finishes the processing at step , by turning the string into DOM and, at step , by replacing the previous element with the root of the new document. Thus, in step , the top node of the new DOM replaces the element that was passed into translateElement( ). This completes the processing.","Multiple Scripting Language Blocks","Another tagbean is illustrated in . This routine, called jsp:block, enables page developers to use multiple scripting languages in the same page. As will be seen, this enables people with different skill sets to add value to the same page. It also enables the developer to chose another language that might be more suitable for a specific job.","The routine begins at step  with each jsp:block handed off to the JSPBlockTagBean. At step , the JSPBlockTagBean chooses the appropriate BlockTagBean according to the language attribute of the jsp:block element. At step , the language-specific BlockTagBean creates a methodDefinition element which, at step , is then filled with code to set up an appropriate runtime environment for the target language. At step , the methodDefinition element is inserted as a child of the root element in the document. The routine then continues at step  to create a methodCall element to replace the original jsp:block element.","DOM Tree Processing",{"@attributes":{"id":"p-0062","num":"0101"},"figref":"FIG. 10","b":["1002","1002","1004","1006","1008","1002","1008","1010","1012","1014","1002","1012","1016","1018","1020","1012"]},"For optimization purposes, it is desired to verify context between multiple related XML tags in a DOM. One or more of these related XML tags are custom tags within the context of the inventive framework. By way of brief background, when processing a single custom tag element, that element may need access to all other related tags, processed and unprocessed, within the DOM. Unfortunately, however, there may be other unprocessed custom tags in the DOM that, when processed, would result in one or more related tags the current element is interested in. One solution to this problem is to pass some state information from the current element through the page handling engine. A preferred technique, however, is to use the DOM itself to indicate state.","Clean-Up Processing",{"@attributes":{"id":"p-0064","num":"0103"},"figref":"FIG. 11","b":["1102","1104","1106","1108","1104","1110","1112","1114","1116","1118","1120"]},"Thus, in the preferred embodiment, a two-pass solution is implemented. In the first pass, simple translation is performed on the tag, creating new tag place holders to be handled by a clean-up phase. For example, assume the DOM includes the following tags: system:macro1, system:macro2, and system:macro3. It is also assumed that each relies on specific information from other tags but not all the information is available until all of them have been touched once. On the first pass, system:macro1 expands to systemmacro1 and performs all the metadata expansion it can perform at this time to assist the clean-up node. At this time, it also inserts a system:cleanup in the tree as the last child of jsp:root (assuming it is not already there).","The second pass is triggered when the clean-up node is hit. For proper processing, it should check to make sure the first pass has completed (no system:macro1 or macro2 or macro3 tags in the tree). If other clean-up nodes exist in the tree, it should remove itself from the tree and let the other nodes handle the clean-up later. Once the clean-up node has determined that the tree is in the correct state, it goes through all the artifacts left by the first process and expands them with all the context available.","Tagbean Code Reduction","Another optimization reduces the amount of code in the tagbeans. By way of background, if a developer expands everything necessary to perform a function of a tag, that process may produce large amounts of code. In particular, the writing of custom tagbeans may result in a large amount of Java code being generated into the resulting servlet. Because this code may be largely common across-servlets generated from the same tagbean (variable names might change, but little else), according to the invention, the functionality is delegated to outside code as much as possible. Preferably, the code is factored into a separate Java bean, and the most convenient place to delegate is the very tagbean generating the code. Thus, the tagbean need only generate enough Java code for the servlet to call out to the separate bean. This dramatically reduces the code in the tag bean handler.","As a result, this optimization improves maintainability and greatly simplifies debugging. In addition, because the code is not expanded, the function is hidden from anyone who has access to the generated servlet code. In addition, as a separate Java bean, developers are encouraged to put more error-handling code in the system that may not get put in otherwise. It also further stabilizes the system.","Thus, in a preferred embodiment, instead of doing in line expansion of code, the developer may take runtime values of attributes and sub-elements and generate code to make them parameters of a method on the very same bean that can be called at runtime to do the real work. Thus, according to the invention, at translation time, a custom tag in the DOM tree is replaced, e.g., with a script that results in a line of code in a generated servlet. In that way, when the servlet is then executed at request time, the line of code invokes a method in a custom tagbean to perform a given function.","A more detailed example of this optimization technique is set forth later in this disclosure.","As has been previously described, the flowchart of  illustrates the basic translation functionality of the present invention. An example of this operation is now provided. In the following example, mixedLanguages.xsp is a flat input file, mixedLanguagesDOM1.txt is a representation of the DOM after the input file has been parsed and some metadata has been added to the DOM, mixedLanguagesDOM2.txt is a representation of the DOM after the custom tags in the input file have been processed (in this case, the <block> tag is a custom tag, with the inner tag processed before the outer tag, with the resulting DOM then ready to be walked by the servlet generator routine), and mixedLanguagesServlet.java is the servlet generated by walking the DOM that complies with the JSP 1.0 specification.",{"@attributes":{"id":"p-0072","num":"0000"},"ul":{"@attributes":{"id":"ul0013","list-style":"none"},"li":["<?xml version=\u201c1.0\u201d?>","<jsp:root>\n    \n    ","<\/jsp:root>"]}},{"@attributes":{"id":"p-0073","num":"0139"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"mixedLanguagesDOM1.txt"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<jsp:root servletPath=\u201cc:\\top\\xsp\\demo\\test\\mixedLanguagesServlet.java\u201d"},{"entry":"servletPackageName=\u201cxsp.test.scripting\u201d servletClassName=\u201cmixedLanguagesServlet\u201d>"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:methodDefinition name=\u201cjspService\u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"231pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:block language=\u201cjava\u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:block language=\u201cjava\u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"String user = request.getParameter(\u201cuser\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if (user == null) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<b>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"No one is logged in."]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:block language=\u201cjavascript\u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"var int x = 0;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"x = x + 1;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<b>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Welcome:"]},{"entry":[{},"<jsp:scriptlet>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"out.println(user);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},{"@attributes":{"id":"p-0074","num":"0140"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"mixedLanguagesDOM2.txt"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"<jsp:root servletPath=\u201cc:\\top\\xsp\\demo\\test\\mixedLanguagesServlet.java\u201d"},{"entry":"servletPackageName=\u201cxsp.test.scripting\u201d servletClassName=\u201cmixedLanguagesServlet\u201d>"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:methodDefinition name=\u201cjavascriptBlock1\u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BSFManager bsfManager = new BSFManager( );"]},{"entry":[{},"BSFEnvironment bsfEnvironment = new BSFEnvironment( );"]},{"entry":[{},"bsfEnvironment.tempDir = \u201cc:\\\\top\\\\\u201d;"]},{"entry":[{},"bsfEnvironment.classPath ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u201cc:\\\\top\\\\;c:\\\\prog\\\\jdk118\\\\lib\\\\classes.zip;c:\\\\top;c:\\\\prog\\\\xml4j\\\\xml4j1116.jar;c:\\\\prog\\\\lotusxsl0"},{"entry":{"sub":["\u2014","\u2014"]}},{"entry":"websphere\\\\appserver\\\\lib\\\\ibmwebas.jar;c:\\\\prog\\\\websphere\\\\appserver\\\\lib\\\\jsdk.jar;c:\\\\prog\\\\websphe"},{"entry":"re\\\\appserver\\\\lib\\\\jst.jar;c:\\\\top\\\\bsf-1.0b6\\\\lib\\\\bsf.jar;c:\\\\top\\\\bsf-1.0b6\\\\lib\\\\js.jar;c:\\\\top\\\\bsf-1.0b6\\\\lib"},{"entry":"\\\\NetRexxC.zip;c:\\\\prog\\\\websphere\\\\appserver\\\\lib\\\\x509v1.jar;.;c:\\\\prog\\\\websphere\\\\appserver\\\\lib\\\\ej"},{"entry":"s.jar;c:\\\\c:\\\\prog\\\\websphere\\\\appserver\\\\properties\\\\ejs;C:\\\\prog\\\\jdk116\\\\bin\\\\..\\\\classes;C:\\\\prog\\\\jdk1"},{"entry":"16\\\\bin\\\\..\\\\lib\\\\classes.zip;C:\\\\prog\\\\jdk116\\\\bin\\\\..\\\\lib\\\\classes.jar;C:\\\\prog\\\\jdk116\\\\bin\\\\..\\\\lib\\\\rt.jar;C"},{"entry":":\\\\prog\\\\jdk116\\\\bin\\\\..\\\\lib\\\\i18n.jar\u201d;"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"bsfEnvironment.classLoader = this.getClass( ).getClassLoader( );"]},{"entry":[{},"bsfManager.setBSFEnvironment(bsfEnvironment);"]},{"entry":[{},"BSFEngine javascriptInterpreter ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"bsfManager.loadScriptingEngine(\u201cjavascript\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"javascriptInterpreter.setDebug(true);"]},{"entry":[{},"bsfManager.registerBean(\u201crequest\u201d, request);"]},{"entry":[{},"bsfManager.registerBean(\u201cresponse\u201d, response);"]},{"entry":[{},"bsfManager.registerBean(\u201csession\u201d, session);"]},{"entry":[{},"bsfManager.registerBean(\u201cout\u201d, out);"]},{"entry":[{},"bsfManager.registerBean(\u201cpageContext\u201d, pageContext);"]},{"entry":[{},"bsfManager.registerBean(\u201cpage\u201d, this);"]},{"entry":[{},"try {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"javascriptInterpreter.eval(\u201cvar request = bsf.lookupBean(\\\u201crequest\\\u201d);\\nvar response ="]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"bsf.lookupBean(\\\u201cresponse\\\u201d);\\nvar session = bsf.lookupBean(\\\u201csession\\\u201d);\\nvar out ="},{"entry":"bsf.lookupBean(\\\u201cout\\\u201d);\\nvar pageContext = bsf.lookupBean(\\\u201cpageContext\\\u201d);\\nvar page ="},{"entry":"bsf.lookupBean(\\\u201cpage\\\u201d);\\n\\n \u2003\u2003\u2003var int x = 0;\\n \u2003\u2003\u2003x = x + 1;\\n \u2003\u2003\u2003\u201d);"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"} catch (BSFException e) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Throwable realException = e.getTargetException( );"]},{"entry":[{},"while (realException instanceof BSFException) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"realException = ((BSFException) realException).getTargetException( );"]},{"entry":[{},"while (realException instanceof java.lang.reflect.InvocationTargetException) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"realException = ((java.lang.reflect.InvocationTargetException)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"realException).getTargetException( );"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"realException.printStackTrace( );"]},{"entry":[{},"throw new ServletException(realException.getMessage( ));"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"bsfManager.unregisterBean(\u201crequest\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cresponse\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201csession\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cout\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cconfig\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cpageContext\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cpage\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:methodDefinition name=\u201cjspService\u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"String user = request.getParameter(\u201cuser\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if (user == null) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<b>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"No one is logged in."]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<jsp:methodCall name=\u201cjavascriptBlock1\u201d>"]},{"entry":[{},"<jsp:scriptlet>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"else {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<b>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Welcome:"]},{"entry":[{},"<jsp:scriptlet>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"out.println(user);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<jsp:scriptlet>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},{"@attributes":{"id":"p-0075","num":"0141"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"mixedLanguagesServlet.java"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"package xsp.test.scripting;"},{"entry":"import org.w3c.dom.*;"},{"entry":"import java.beans.*;"},{"entry":"import com.lotus.xsl.xml4j2tx.*;"},{"entry":"import java.io.*;"},{"entry":"import com.ibm.bsf.*;"},{"entry":"import java.util.*;"},{"entry":"import com.sun.server.http.*;"},{"entry":"import javax.servlet.jsp.*;"},{"entry":"import com.lotus.xsl.*;"},{"entry":"import javax.servlet.*;"},{"entry":"import xsp.*;"},{"entry":"import com.ibm.servlet.pagecompile.*;"},{"entry":"import com.ibm.xml.parser.*;"},{"entry":"import java.net.*;"},{"entry":"import com.sun.server.util.*;"},{"entry":"import java.lang.*;"},{"entry":"import javax.servlet.http.*;"},{"entry":"import com.ibm.servlet.engine.*;"},{"entry":"public class mixedLanguagesServlet"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"extends xsp.ContractServlet"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"{"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"public void"]},{"entry":[{},{"sub":"\u2014"}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"HttpServletResponseres)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"throws ServletException, IOException"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"{"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/\/ Cast to HttpService objects for setAttribute\/callPage"]},{"entry":[{},"HttpServiceRequestrequest = (HttpServiceRequest) req;"]},{"entry":[{},"HttpServiceResponseresponse ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"new PCHttpServletResponseProxy((SEHttpServiceResponse)res);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"JspWriter out = null;"]},{"entry":[{},"\/\/ Create the JspFactory and obtain the PageContext"]},{"entry":[{},"JspFactory factory = JspFactory.getDefaultFactory( );"]},{"entry":[{},"PageContext pageContext ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"factory.getPageContext(this, \/\/ JSP page"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"request, \/\/ Servlet request"]},{"entry":[{},"response, \/\/ Servlet response"]},{"entry":[{},"null, \/\/ Error page URL"]},{"entry":[{},"true, \/\/ Servlet session"]},{"entry":[{},"0, \/\/ JSP buffer size"]},{"entry":[{},"true); \/\/ JSP autoflush"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"try {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/\/ Initialize all the implicit variables"]},{"entry":[{},"HttpSession session = request.getSession(true);"]},{"entry":[{},"out = pageContext.getOut( );"]},{"entry":[{},"Object page = this;"]},{"entry":[{},"response.setContentType(\u201ctext\/html;charset=ISO-8859-1 \u201d);"]},{"entry":[{},"\/\/ Now generate fixed template and script code"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String user = request.getParameter(\u201cuser\u201d);"]},{"entry":[{},"if (user == null) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"out.print(\u201c<b>\u201d);"]},{"entry":[{},"out.println( );"]},{"entry":[{},"out.println(\u201cNo one is logged in.\u201d);"]},{"entry":[{},"out.println(\u201c<\/b>\u201d);"]},{"entry":[{},"javascriptBlock1(request,"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"259pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"response,"]},{"entry":[{},"session,"]},{"entry":[{},"out,"]},{"entry":[{},"pageContext,"]},{"entry":[{},"page);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"else {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"out.print(\u201c<b>\u201d);"]},{"entry":[{},"out.println( );"]},{"entry":[{},"out.println(\u201cWelcome:\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"out.println(user);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"out.println(\u201c<\/b>\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"} finally {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"out.close( );"]},{"entry":[{},"((PCHttpServletResponseProxy)response).writeOutResponse( );"]},{"entry":[{},"factory.releasePageContext(pageContext);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"public void"]},{"entry":[{},"javascriptBlock1(HttpServiceRequestrequest,"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"HttpServiceResponseresponse,"]},{"entry":[{},"HttpSession session,"]},{"entry":[{},"JspWriter out,"]},{"entry":[{},"PageContext pageContext,"]},{"entry":[{},"Object page)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"294pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"throws ServletException, IOException"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"{"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"BSFManager bsfManager = new BSFManager( );"]},{"entry":[{},"BSFEnvironment bsfEnvironment = new BSFEnvironment( );"]},{"entry":[{},"bsfEnvironment.tempDir = \u201cc:\\\\top\\\\\u201d;"]},{"entry":[{},"bsfEnvironment.classPath ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\u201cc:\\\\top\\\\;c:\\\\prog\\\\jdk118\\\\lib\\\\classes.zip;c:\\\\top;c:\\\\prog\\\\xml4j\\\\xml4j1116.jar;c:\\\\prog\\\\lotusxsl0"},{"entry":{"sub":["\u2014","\u2014"]}},{"entry":"websphere\\\\appserver\\\\lib\\\\ibmwebas.jar;c:\\\\prog\\\\websphere\\\\appserver\\\\lib\\\\jsdk.jar;c:\\\\prog\\\\websphe"},{"entry":"re\\\\appserver\\\\lib\\\\jst.jar;c:\\\\top\\\\bsf-1.0b6\\\\lib\\\\bsf.jar;c:\\\\top\\\\bsf-1.0b6\\\\lib\\\\js.jar;c:\\\\top\\\\bsf-1.0b6\\\\lib"},{"entry":"\\\\NetRexxC.zip;c:\\\\prog\\\\websphere\\\\appserver\\\\lib\\\\x509v1.jar;.;c:\\\\prog\\\\websphere\\\\appserver\\\\lib\\\\ej"},{"entry":"s.jar;c:\\\\;c:\\\\prog\\\\websphere\\\\appserver\\\\properties\\\\ejs;C:\\\\prog\\\\jdk116\\\\bin\\\\..\\\\classes;C:\\\\prog\\\\jdk1"},{"entry":"16\\\\bin\\\\..\\\\lib\\\\classes.zip;C:\\\\prog\\\\jdk116\\\\bin\\\\..\\\\lib\\\\classes.jar;C:\\\\prog\\\\jdk116\\\\bin\\\\..\\\\lib\\\\rt.jar;C"},{"entry":":\\\\prog\\\\jdk116\\\\bin\\\\..\\\\lib\\\\i18n.jar\u201d;"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"bsfEnvironment.classLoader = this.getClass( ).getClassLoader( );"]},{"entry":[{},"bsfManager.setBSFEnvironment(bsfEnvironment);"]},{"entry":[{},"BSFEngine javascriptInterpreter ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"bsfManager.loadScriptingEngine(\u201cjavascript\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"javascriptInterpreter.setDebug(true);"]},{"entry":[{},"bsfManager.registerBean(\u201crequest\u201d, request);"]},{"entry":[{},"bsfManager.registerBean(\u201cresponse\u201d, response);"]},{"entry":[{},"bsfManager.registerBean(\u201csession\u201d, session);"]},{"entry":[{},"bsfManager.registerBean(\u201cout\u201d, out);"]},{"entry":[{},"bsfManager.registerBean(\u201cpageContext\u201d, pageContext);"]},{"entry":[{},"bsfManager.registerBean(\u201cpage\u201d, this);"]},{"entry":[{},"try {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"javascriptInterpreter.eval(\u201cvar request = bsf.lookupBean(\\\u201crequest\\\u201d);\\nvar response ="]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"bsf.lookupBean(\\\u201cresponse\\\u201d);\\nvar session = bsf.lookupBean(\\\u201csession\\\u201d);\\nvar out ="},{"entry":"bsf.lookupBean(\\\u201cout\\\u201d);\\nvar pageContext = bsf.lookupBean(\\\u201cpageContext\\\u201d);\\nvar page ="},{"entry":"bsf.lookupBean(\\\u201cpage\\\u201d);\\n\\n \u2003\u2003\u2003var int x = 0;\\n \u2003\u2003\u2003x = x + 1;\\n \u2003\u2003\u2003\u201d);"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"} catch (BSFException e) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Throwable realException = e.getTargetException( );"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"while (realException instanceof BSFException) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"realException = ((BSFException)realException).getTargetException( );"]},{"entry":[{},"while (realException instanceof java.lang.reflect.InvocationTargetException) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"realException = ((java.lang.reflect.InvocationTargetException)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"realException).getTargetException( );"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"266pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"280pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"realException.printStackTrace( );"]},{"entry":[{},"throw new ServletException(realException.getMessage( ));"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"287pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"bsfManager.unregisterBean(\u201crequest\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cresponse\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201csession\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cout\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cconfig\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cpageContext\u201d);"]},{"entry":[{},"bsfManager.unregisterBean(\u201cpage\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"301pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"308pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The following illustrates more generally how an input file is translated into a DOM data structure. In particular, for a given input file:",{"@attributes":{"id":"p-0077","num":"0143"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<a>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<b>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"112pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<c\/>"]},{"entry":[{},"<d\/>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/b>"]},{"entry":[{},"<e>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"112pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<f\/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<g\/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"112pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<h\/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"112pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/e>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/a>,"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}},"br":{},"ul":{"@attributes":{"id":"ul0017","list-style":"none"},"li":["a","|--b","| |--c","| |--d","|","|--e\n    \n    "]}},"For example, in the case of the multi-language support, like:\n\n","The following code illustrates how scripting language blocks may be used to support multiple scripting languages in a single web page. As described above, nesting of different scripting languages is supporting by marking where one section, or \u201cblock\u201d, of code begins and where it ends. For example, the following snippet has JavaScript code nested within REXX code nested within Java code:\n\n","If this code were to appear in a web page, the blocks of code may be marked as follows:\n\n","As described, the implementation compiles a web page into a XML (extensible Markup Language) DOM (Document Object Model), and from there, into a Java servlet. In the DOM stage, the routine looks for BLOCK nodes. When encountering one, the routine creates a new node representing a Java method definition as a child of the root element, and replaces the BLOCK node with a node representing a Java method call to the new method definition. The block's child nodes are then moved under the method definition. Java servlet code is then generated under the method definition to pass the script code contained in the block to an appropriate interpreter for the scripting language specified by the block's \u201clanguage\u201d attribute.","The same operation is done for nested blocks. The innermost block is turned into a method definition and replaced by the method call node. When the next outer block is processed into its method definition, the block must turn any method call nodes among its children into valid method calls into the servlet written in the outer block's language. In the nested example above, the resulting Java servlet might then contain code as follows:\n\n","The following illustrates how the invention verifies context between multiple related XML tags. This example starts with a sample input XML chunk and ends with a code chunk for use in the final servlet:\n\n","As also noted above, the present invention provides a technique for reducing the amount of code in the tagbeans. An example of this optimization technique is now provided.","The following ServletTagBean.j is the original code file:",{"@attributes":{"id":"p-0086","num":"0277"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"package xsp.was;"},{"entry":"import xsp.*;"},{"entry":"import java.util.*;"},{"entry":"import org.w3c.dom.*;"},{"entry":"import javax.servlet.jsp.*;"},{"entry":"public class ServletTagBean extends SimpleTagBean"},{"entry":"{"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"protected String name = null;"]},{"entry":[{},"protected String code = null;"]},{"entry":[{},"protected String codebase= null;"]},{"entry":[{},"public void"]},{"entry":[{},"setName(String name)"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"this.name = name;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"public void"]},{"entry":[{},"setCode(String code)"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"this.code = code;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"public void"]},{"entry":[{},"setCodebase(String codebase)"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"this.codebase = codebase;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"public String"]},{"entry":[{},"translateElement(Element element)"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Hashtable initParams = parseInitParams(element);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/\/ For each param sub element, add the name\/value to a map for later"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Hashtable paramMap = Utility.parseParams(element);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"\/\/ The name or code parameter must be set."},{"entry":"if (name == null && code == null) {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/\/ Error!!!"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"System.out.println(\u201cError: name and code can not be null the same"]},{"entry":[{},"time\u201d);"]},{"entry":[{},"return null;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"StringBuffer buff = new StringBuffer( );"},{"entry":"buff.append(\u201c\\n\u201d)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c<\u201d)"]},{"entry":[{},".append(SCRIPTLETTAG)"]},{"entry":[{},".append(\u201c>\\n\\n\u201d)"]},{"entry":[{},".append(\u201ctry {\\n\u201d)"]},{"entry":[{},".append(\u201c String code = null;\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if (name == null) {"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c String name = null;\\n\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"else {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c String name = \\\u201c \u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(name)"]},{"entry":[{},".append(\u201c\\\u201d;\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"if (code != null) {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c code = \\\u201c \u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(code)"]},{"entry":[{},".append(\u201c\\\u201d;\\n\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"buff.append(\u201c\\n if (name == null || name.equals(\\\u201c\\\u201d)) {\\n\u201d)"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c name = code;\\n\u201d)"]},{"entry":[{},".append(\u201c }\\n\\n\u201d)"]},{"entry":[{},".append(\u201c Servlets = \\n\u201d)"]},{"entry":[{},".append(\u201c  getServletConfig( ).getServletContext( ).\u201d)"]},{"entry":[{},".append(\u201cgetServlet(name);\\n\u201d)"]},{"entry":[{},".append(\u201c if (s == null) {\\n\u201d)"]},{"entry":[{},".append(\u201c  Properties init = new Properties( );\\n\u201d)"]},{"entry":[{},".append(\u201c  init.put(\\\u201cname\\\u201d, \\\u201c \u201d)"]},{"entry":[{},".append(name)"]},{"entry":[{},".append(\u201c\\\u201d);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"if (code != null) {"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c  init.put(\\\u201ccode\\\u201d, \\\u201c \u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(code)"]},{"entry":[{},".append(\u201c\\\u201d);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"if (initParams.size( ) > 0) {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Enumeration e = initParams.keys( );"]},{"entry":[{},"while (e.hasMoreElements( )) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String key = (String) e.nextElement( );"]},{"entry":[{},"String value = (String) initParams.get(key);"]},{"entry":[{},"buff.append(\u201c  init.put(\\\u201c \u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(key)"]},{"entry":[{},".append(\u201c\\\u201d, \\\u201c \u201d)"]},{"entry":[{},".append(value)"]},{"entry":[{},".append(\u201c\\\u201d);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"if (codebase != null) {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c  init.put(\\\u201ccodebase\\\u201d, \\\u201c \u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(codebase)"]},{"entry":[{},".append(\u201c\\\u201d);\\n\u201d)"]},{"entry":[{},".append(\u201c  s = \u201d)"]},{"entry":[{},".append(\u201ccom.sun.server.http.pagecompile.\\n\u201d)"]},{"entry":[{},".append(\u201c\\tServletUtil.loadServlet(this,\u201d)"]},{"entry":[{},".append(\u201c\\n\\t\\t\\t\\tname,\\n\\t\\t\\t\\tcode,\u201d)"]},{"entry":[{},".append(\u201c \\n\\t\\t\\t\\t\\\u201c \u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},".append(codebase)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},".append(\u201c\\\u201d, \\n\\t\\t\\t\\tinit);\\n\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"if (codebase == null) {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c  s = \u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201ccom.sun.server.http.pagecompile.\\n\\tServletUtil.\u201d)"]},{"entry":[{},".append(\u201cloadServlet(this,\u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},".append(\u201c\\n\\t\\t\\t\\tname,\u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c \\n\\t\\t\\t\\tcode,\\n\\t\\t\\t\\tnull,\u201d)"]},{"entry":[{},".append(\u201c\\n\\t\\t\\t\\tinit);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"buff.append(\u201c }\\n\\n\u201d);"},{"entry":"if (paramMap.size( ) > 0) {"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c java.util.Hashtable parm = new \u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},".append(\u201c java.util.Hashtable( );\\n\u201d);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Enumeration e = paramMap.keys( );"]},{"entry":[{},"buff.append(\u201c String[ ] vals; \\n\u201d);"]},{"entry":[{},"while (e.hasMoreElements( )) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String key = (String) e.nextElement( );"]},{"entry":[{},"String value = (String) paramMap.get(key);"]},{"entry":[{},"buff.append(\u201cvals = new String[1];\\n\u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201cvals[0] = \\\u201c \u201d)"]},{"entry":[{},".append(value)"]},{"entry":[{},".append(\u201c\\\u201d;\\n\u201d)"]},{"entry":[{},".append(\u201cparm.put(\\\u201c \u201d)"]},{"entry":[{},".append(key)"]},{"entry":[{},".append(\u201c\\\u201d,vals);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"}"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"buff.append(\u201c\\n out.flush( );\u201d);"]},{"entry":[{},"buff.append(\u201c\\n if (s != null) {\\n\u201d);"]},{"entry":[{},"if (paramMap.isEmpty( )) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c com.sun.server.http.pagecompile.\u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201cServletUtil.\u201d)"]},{"entry":[{},".append(\u201ccallServlet(s, name, request, response);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"} else {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"buff.append(\u201c HttpServletRequestr;\\n\u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c\\n r = new \\n com.sun.server.http.\u201d)"]},{"entry":[{},".append(\u201cpagecompile.ParamsHttpServletRequest(\u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},".append(\u201crequest,\\n\\t\\t\\t\\t\\t\\t\\t \u2003parm);\\n\u201d)"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c com.sun.server.http.pagecompile.\u201d)"]},{"entry":[{},".append(\u201cServletUtil.callServlet(s,\u201d)"]},{"entry":[{},".append(\u201c\\n\\t\\t\\t\\t\\t\\t\\t \u2003name,\u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c\\n\\t\\t\\t\\t\\t\\t\\t \u2003r, \u201d)"]},{"entry":[{},".append(\u201c\\n\\t\\t\\t\\t\\t\\t\\t \u2003response);\\n\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"buff.append(\u201c }\\n\u201d)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},".append(\u201c} catch(Exception e) {\\n\u201d)"]},{"entry":[{},".append(\u201c e.printStackTrace( ); \\n\u201d)"]},{"entry":[{},".append(\u201c throw new ServletException(\\\u201cException\u201d)"]},{"entry":[{},".append(\u201ccaught for servlet:\\\u201c +\\n \u2003\u2003e.getMessage( ));\\n\u201d)"]},{"entry":[{},".append(\u201c}\\n\u201d)"]},{"entry":[{},".append(\u201c\\n<\/\u201d)"]},{"entry":[{},".append(SCRIPTLETTAG)"]},{"entry":[{},".append(\u201c>\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return buff.toString( );"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"public Hashtable"]},{"entry":[{},"parseInitParams(Element element)"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Hashtable initParams = new Hashtable( );"]},{"entry":[{},"NamedNodeMap namedNodeMap = element.getAttributes( );"]},{"entry":[{},"int attributeLength = namedNodeMap.getLength( );"]},{"entry":[{},"Node attributeNode = null;"]},{"entry":[{},"String nodeName = null;"]},{"entry":[{},"String nodeValue = null;"]},{"entry":[{},"for (int i = 0; i < attributeLength; i++) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"attributeNode = namedNodeMap.item(i);"]},{"entry":[{},"nodeName = attributeNode.getNodeName( );"]},{"entry":[{},"nodeValue = attributeNode.getNodeValue( );"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/\/","System.out.println(\u201cnodeName==\u201d + nodeName +"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":["\/\/","\u201cnodeValue==\u201d + nodeValue);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if (!(nodeName.equals(\u201ctype\u201d)) &&"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"!(nodeName.equals(\u201cName\u201d)) &&"]},{"entry":[{},"!(nodeName.equals(\u201cCode\u201d)) &&"]},{"entry":[{},"!(nodeName.equals(\u201cCodebase\u201d))){"]},{"entry":[{},"initParams.put(nodeName, nodeValue);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"return initParams;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The following class, ServletTagBean.java, is the recoded class using the delegation model of the invention.",{"@attributes":{"id":"p-0088","num":"0279"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"package xsp.was;"},{"entry":"import xsp.*;"},{"entry":"import java.io.*;"},{"entry":"import java.util.*;"},{"entry":"import org.w3c.dom.*;"},{"entry":"import javax.servlet.*;"},{"entry":"import javax.servlet.http.*;"},{"entry":"import javax.servlet.jsp.*;"},{"entry":"import com.sun.server.http.pagecompile.*;"},{"entry":"public class ServletTagBean extends SimpleTagBean"},{"entry":"{"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"protected static int count = 0;"]},{"entry":[{},"public String"]},{"entry":[{},"translateElement(Element element)"]},{"entry":[{},"{"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Properties initParameters = parseInitParams(element);"]},{"entry":[{},"Hashtable runtimeParameters = Utility.parseParams(element);"]},{"entry":[{},"String name = (String) initParameters.get(\u201cname\u201d);"]},{"entry":[{},"String code = (String) initParameters.get(\u201ccode\u201d);"]},{"entry":[{},"String codebase = (String) initParameters.get(\u201ccodebase\u201d);"]},{"entry":[{},"\/\/ The name or code parameter must be set."]},{"entry":[{},"if ((name == null) &&"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"(code == null)) {"]},{"entry":[{},"System.out.println(\u201cError: name and code can not be null the same"]},{"entry":[{},"time\u201d);"]},{"entry":[{},"return null;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"int currentCount = ++count;"]},{"entry":[{},"String initParametersName ="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\u201cxspservletTagBeaninitParameters\u201d + currentCount;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String runtimeParametersName ="]},{"entry":[{},"\u201cxspservletTagBeanruntimeParameters\u201d + currentCount;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"String output ="]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"INDENT2 + \u201c<jsp:scriptlet>\\n\u201d +"]},{"entry":[{},"INDENT2 + \u201cProperties\u201d + initParametersName +\u201c=\u201d +"]},{"entry":[{},"\u201cnew Properties( );\\n\u201d +"]},{"entry":[{},"INDENT2 + \u201cProperties\u201d + runtimeParametersName +"]},{"entry":[{},"\u201c= new Properties( );\\n\u201d;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Enumeration enumeration = initParameters.keys( );"]},{"entry":[{},"while (enumeration.hasMoreElements( )) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String key = (String) enumeration.nextElement( );"]},{"entry":[{},"String value = (String) initParameters.get(key);"]},{"entry":[{},"output +="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"INDENT2 + initParametersName + \u201c.put(\u201d +"]},{"entry":[{},"stringify(key) + \u201c, \u201d +"]},{"entry":[{},"stringify(value) + \u201c);\u201d;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"enumeration = runtimeParameters.keys( );"]},{"entry":[{},"while (enumeration.hasMoreElements( )) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String key = (String) enumeration.nextElement( );"]},{"entry":[{},"String value = (String) runtimeParameters.get(key);"]},{"entry":[{},"output +="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"INDENT2 + runtimeParametersName + \u201c.put(\u201d +"]},{"entry":[{},"stringify(key) + \u201c, \u201d +"]},{"entry":[{},"stringify(value) +\u201c);\u201d;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"output +="]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"INDENT2 + \u201cxsp.was.ServletTagBean.runServlet(this, \\n\u201d +"]},{"entry":[{},"INDENT3 + \u201crequest,\\n\u201d +"]},{"entry":[{},"INDENT3 + \u201cresponse,\\n\u201d +"]},{"entry":[{},"INDENT3 + initParametersName + \u201c,\\n\u201d +"]},{"entry":[{},"INDENT3 + runtimeParametersName + \u201c);\u201d;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"output +="]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"INDENT2 + \u201c<\/jsp:scriptlet>\\n\u201d;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return output;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"protected static final String"},{"entry":"normalize(String input)"},{"entry":"{"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if (input == null) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return null;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"input = input.trim( );"]},{"entry":[{},"if (input.equals(\u201c \u201d)) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return null;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"return input;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"protected static final String"},{"entry":"stringify(String input)"},{"entry":"{."}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if (input == null) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"return \u201cnull\u201d;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"return \u201c\\\u201d \u201c + input + \u201c\\\u201d \u201d;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"public static void"},{"entry":"runServlet(Servlet containingServlet,"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"HttpServletRequest request,"]},{"entry":[{},"HttpServletResponseresponse,"]},{"entry":[{},"Properties initParameters,"]},{"entry":[{},"Properties runtimeParameters)"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"throws ServletException, IOException"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":"{"}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"String name = normalize((String) initParameters.get(\u201cname\u201d));"]},{"entry":[{},"String code = normalize((String) initParameters.get(\u201ccode\u201d));"]},{"entry":[{},"String codebase = normalize((String) initParameters.get(\u201ccodebase\u201d));"]},{"entry":[{},"if ((name == null) &&"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"(code == null)) {"]},{"entry":[{},"throw new IllegalStateException(\u201cname or code must be non-null\u201d);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"if (name == null) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"name = code;"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"initParameters.put(\u201cname\u201d, name);"]},{"entry":[{},"if (code != null) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"initParameters.put(\u201ccode\u201d, code);"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"Servlet servlet = ServletUtil.loadServlet(containingServlet,"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"name,"]},{"entry":[{},"code,"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"codebase,"]},{"entry":[{},"initParameters);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"if (!runtimeParameters.isEmpty( )) {"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"request = new ParamsHttpServletRequest(request,"]},{"entry":[{},"runtimeParameters);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"ServletUtil.callServlet(servlet, name, request, response);"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":"public Properties"},{"entry":"parseInitParams(Element element)"},{"entry":"{"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Properties initParams = new Properties( );"]},{"entry":[{},"NamedNodeMap namedNodeMap = element.getAttributes( );"]},{"entry":[{},"int attributeLength = namedNodeMap.getLength( );"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Node attributeNode = null;"]},{"entry":[{},"String nodeName = null;"]},{"entry":[{},"String nodeValue = null;"]},{"entry":[{},"for (int i = 0; i < attributeLength; i++) {"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"attributeNode = namedNodeMap.item(i);"]},{"entry":[{},"nodeName = attributeNode.getNodeName( );"]},{"entry":[{},"nodeValue = attributeNode.getNodeValue( );"]},{"entry":[{},"initParams.put(normalize(nodeName),"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"normalize(nodeValue));"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"}"]},{"entry":[{},"return initParams;"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"210pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"}"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"The developer need not write code generation code to produce code that will be robust for every possible input scenario. Instead, the developer need only write the code once, and the only code generation is used to delegate to the method that is written once.","So, to provide a generic example:\n\n","The out.write( ) is moved into a method print( ) on PrintTagBean:\n\n","As can be seen, in the first case, the code relies upon a variable \u2018out\u2019 that exists in the servlet. The write( ) method was called on \u2018out\u2019 passing it a string. Thus, to perform proper delegation, a method on PrintTagBean is created that takes \u2018out\u2019 and the \u2018string\u2019 and calls \u201cout.write(string)\u201d.","Thus, according to the invention, at translation time, a custom tag in the DOM tree is replaced, e.g., with a script that results in a line of code in a generated servlet. In this way, when the servlet is then executed at request time, the line of code invokes a method in a custom tagbean to perform a given function.","If the code generated to handle runtime requests is longer than the code generated to pass the necessary variables to a method to be processed, there are several benefits to this approach. First, writing code to generate code is a very tedious and error-prone task; thus, reducing this code even slightly reduces the numbers of errors drastically. Second, using this approach, all the code handling of a task is actually handled in a single method that can be carefully crafted to handle correct inputs to produce the right output. Because this code is in the tagbean, it can be compiled immediately and checked for language syntax errors. If, instead, the code is generated each time, it will not be compiled until an XSP is written to test the functionality. Moreover, with branching (if statements) in code generation, it may take several tests just to test the syntax of all the possible code generations. Further, if the developer needs to change the function and \u201coptimization\u201d has already taken place, then the developer need only update a single method. Otherwise, the developer must go through the process of updating all the code generating code.","Because of this reduction in code and code complexity, the maintenance of the code will be much lower.","The present invention provides numerous other advantages over the prior art. In effect, the inventive page handling mechanism combines the manipulation and template mechanism of XSLT with the scripting capabilities of the JSP\/ASP model. In addition, the invention provides a framework for enabling any programming language to be plugged into that model. Further, given that most languages are easily defined in Java byte code, the invention is economical to implement in a runtime using, for example, a Java Virtual Machine.","The present invention uses custom DOM tags together with a framework and runtime that provides a powerful macro language to XML\/JSP. The custom DOM tags allow a web page author the ability to define a simple markup language tag, e.g., <SHOPPINGCART>, that, at page translation time, is converted into script code by a generic Java object or an XSL stylesheet. This script code is then compiled into Java code and then into a Java servlet, yielding excellent performance servicing a client's request. Because the custom tag replaces the script code in the authored page, the page is kept clean and easy to maintain. The script code is kept separate and, thus, need only be debugged once. Normal ASP development, on the contrary, would force this code to remain in the page, and it would have to be debugged after every modification.","The inventive framework is quite advantageous in that it is built on top of XML. Moreover, one of ordinary skill will appreciate that the framework is defineable programmatically or with XSL. In addition, macros written according to the invention can affect the output of an entire page and not just the content between a given pair of tags.","The invention also enables one or more web page authors to support multiple scripting languages in a single web page. Further, in a preferred embodiment, the context of multiple related XML tags in a DOM may be verified by using the DOM itself to indicate state information.","As noted above, the inventive mechanism is preferably implemented in or as an adjunct to a web server. Thus, the invention does not require any modifications to conventional client hardware or software. Generalizing, the above-described functionality is implemented in software executable in a processor, namely, as a set of instructions (program code) in a code module resident in the random access memory of the computer. Until required by the computer, the set of instructions may be stored in another computer memory, for example, in a hard disk drive, or in a removable memory such as an optical disk (for eventual use in a CD ROM) or floppy disk (for eventual use in a floppy disk drive), or downloaded via the Internet or other computer network.","In addition, although the various methods described are conveniently implemented in a general purpose computer selectively activated or reconfigured by software, one of ordinary skill in the art would also recognize that such methods may be carried out in hardware, in firmware, or in more specialized apparatus constructed to perform the required method steps.","Further, as used herein, a Web \u201cclient\u201d should be broadly construed to mean any computer or component thereof directly or indirectly connected or connectable in any known or later-developed manner to a computer network, such as the Internet. The term Web \u201cserver\u201d should also be broadly construed to mean a computer, computer platform, an adjunct to a computer or platform, or any component thereof. Of course, a \u201cclient\u201d should be broadly construed to mean one who requests or gets the file, and \u201cserver\u201d is the entity which downloads the file.","Having thus described my invention, what I claim as new and desire to secure by Letters Patent is set forth in the following claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of the present invention and the advantages thereof, reference should be made to the following Detailed Description taken in connection with the accompanying drawings in which:",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 11"}]},"DETDESC":[{},{}]}
