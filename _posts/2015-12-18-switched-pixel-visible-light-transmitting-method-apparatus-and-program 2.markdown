---
title: Switched pixel visible light transmitting method, apparatus and program
abstract: In a transmitting method that enables communication between various devices including devices other than lightings, a luminance change pattern is determined by modulating a visible light signal, a common switch for turning ON, in common, a plurality of light sources which are included in a light source group of a display and are each used for representing a pixel in an image is switched according to the luminance change pattern, and a first pixel switch for turning ON a first light source among the plurality of light sources included in the light source group is turned ON, to cause the first light source to be ON only for a period in which the common switch is ON and the first pixel switch is ON, to transmit the visible light signal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09608727&OS=09608727&RS=09608727
owner: PANASONIC INTELLECTUAL PROPERTY CORPORATION OF AMERICA
number: 09608727
owner_city: Torrance
owner_country: US
publication_date: 20151218
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATION","FIELD","BACKGROUND","CITATION LIST","Patent Literature","SUMMARY","Technical Problem","Solution to Problem","Advantageous Effects","DESCRIPTION OF EMBODIMENTS","Embodiment 1","Embodiment 2","Summary of this Embodiment","Embodiment 3","Summary of this Embodiment","Embodiment 4","Summary of this Embodiment","Embodiment 5","Summary of this Embodiment","Embodiment 6","Embodiment 7","Embodiment 8","Summary of this Embodiment","Embodiment 9","Embodiment 10","Embodiment 11","Embodiment 12","Embodiment 13","Embodiment 14","Embodiment 15","Embodiment 16","1 Introduction","2 Line-Scan Sampling","3 Transmitter Conditions","4 Modulation Schemes for LSS","5 Conclusion","Embodiment 17","Embodiment 18","Example 1 of Embodiment 18","Example 2 of Embodiment 18","Example 3 of Embodiment 18","Embodiment 19","Embodiment 20","Embodiment 21","Embodiment 22","Embodiment 23","Embodiment 24","Embodiment 25","Embodiment 26","Embodiment 27","Other Embodiments","Embodiment 28","Embodiment 29","Embodiment 30","Embodiment 31","Embodiment 32","Embodiment 33","Summary of Above Embodiment","Embodiment 34","Embodiment 35","INDUSTRIAL APPLICABILITY"],"p":["The present application is a continuation-in-part of U.S. application Ser. No. 14\/582,751, filed Dec. 24, 2014, and claims the benefit of U.S. Provisional Patent Application No. 62\/251,980 filed on Nov. 6, 2015, Japanese Patent Application No. 2014-258111 filed on Dec. 19, 2014, Japanese Patent Application No. 2015-029096 filed on Feb. 17, 2015, Japanese Patent Application No. 2015-029104 filed on Feb. 17, 2015, Japanese Patent Application No. 2014-232187, filed Nov. 14, 2014, and Japanese Patent Application No. 2015-245738 filed on Dec. 17, 2015. U.S. application Ser. No. 14\/582,751 is a continuation-in-part of U.S. patent application Ser. No. 14\/142,413, filed on Dec. 27, 2013, and claims benefit of U.S. Provisional Patent Application No. 62\/028,991, filed on Jul. 25, 2014, U.S. Provisional Patent Application No. 62\/019,515 filed on Jul. 1, 2014, and Japanese Patent Application No. 2014-192032 filed on Sep. 19, 2014. U.S. application Ser. No. 14\/142,413 claims benefit of U.S. Provisional Patent Application No. 61\/904,611 filed on Nov. 15, 2013, U.S. Provisional Patent Application No. 61\/896,879 filed on Oct. 29, 2013, U.S. Provisional Patent Application No. 61\/895,615 filed on Oct. 25, 2013, U.S. Provisional Patent Application No. 61\/872,028 filed on Aug. 30, 2013, U.S. Provisional Patent Application No. 61\/859,902 filed on Jul. 30, 2013, U.S. Provisional Patent Application No. 61\/810,291 filed on Apr. 10, 2013, U.S. Provisional Patent Application No. 61\/805,978 filed on Mar. 28, 2013, U.S. Provisional Patent Application No. 61\/746,315 filed on Dec. 27, 2012, Japanese Patent Application No. 2013-242407 filed on Nov. 22, 2013, Japanese Patent Application No. 2013-237460 filed on Nov. 15, 2013, Japanese Patent Application No. 2013-224805 filed on Oct. 29, 2013, Japanese Patent Application No. 2013-222827 filed on Oct. 25, 2013, Japanese Patent Application No. 2013-180729 filed on Aug. 30, 2013, Japanese Patent Application No. 2013-158359 filed on Jul. 30, 2013, Japanese Patent Application No. 2013-110445 filed on May 24, 2013, Japanese Patent Application No. 2013-082546 filed on Apr. 10, 2013, Japanese Patent Application No. 2013-070740 filed on Mar. 28, 2013, and Japanese Patent Application No. 2012-286339 filed on Dec. 27, 2012. The entire disclosures of the above-identified applications, including the specifications, drawings and claims are incorporated herein by reference in their entireties.","The present disclosure relates to a transmitting method, a transmitting apparatus, and a program for transmitting visible light signals.","In recent years, a home-electric-appliance cooperation function has been introduced for a home network, with which various home electric appliances are connected to a network by a home energy management system (HEMS) having a function of managing power usage for addressing an environmental issue, turning power on\/off from outside a house, and the like, in addition to cooperation of AV home electric appliances by internet protocol (IP) connection using Ethernet\u00ae or wireless local area network (LAN). However, there are home electric appliances whose computational performance is insufficient to have a communication function, and home electric appliances which do not have a communication function due to a matter of cost.","In order to solve such a problem, Patent Literature (PTL) 1 discloses a technique of efficiently establishing communication between devices among limited optical spatial transmission devices which transmit information to a free space using light, by performing communication using plural single color light sources of illumination light.","[Patent Literature 1] Japanese Unexamined Patent Application Publication No. 2002-290335","However, the conventional method is limited to a case in which a device to which the method is applied has three color light sources such as an illuminator.","The present disclosure provides a transmitting method that solves this problem and enables communication between various devices including devices other than lightings.","A transmitting method according to an aspect of the present disclosure is a transmitting method of transmitting a visible light signal by way of luminance change, and includes: determining a luminance change pattern by modulating the visible light signal; switching a common switch according to the luminance change pattern, the common switch being for turning ON a plurality of light sources in common, the plurality of light sources being included in a light source group of a display and each being for representing a pixel in an image; and turning ON a first pixel switch for turning ON a first light source, to cause the first light source to be ON only for a period in which the common switch is ON and the first pixel switch is ON, to transmit the visible light signal, the first light source being one of the plurality of light sources included in the light source group.","These general and specific aspects may be implemented using a system, a method, an integrated circuit, a computer program, or a computer-readable recording medium such as a CD-ROM, or any combination of systems, methods, integrated circuits, computer programs, or computer-readable recording media.","A transmitting method disclosed herein enables communication between various devices including devices other than lightings.","A transmitting method according to an aspect of the present disclosure is a transmitting method of transmitting a visible light signal by way of luminance change, and includes: determining a luminance change pattern by modulating the visible light signal; switching a common switch according to the luminance change pattern, the common switch being for turning ON a plurality of light sources in common, the plurality of light sources being included in a light source group of a display and each being for representing a pixel in an image; and turning ON a first pixel switch for turning ON a first light source, to cause the first light source to be ON only for a period in which the common switch is ON and the first pixel switch is ON, to transmit the visible light signal, the first light source being one of the plurality of light sources included in the light source group.","With this, a visible light signal can be properly transmitted from a display including a plurality of LEDs and the like as the light sources, as illustrated in  to , for example. Therefore, this enables communication between various devices including devices other than lightings. Furthermore, when the display is a display for displaying images under control of the common switch and the first pixel switch, the visible light signal can be transmitted using the common switch and the first pixel switch. Therefore, it is possible to easily transmit the visible light signal without a significant change in the structure for displaying images on the display.","Furthermore, in the determining, the luminance change pattern may be determined for each symbol period, and in the turning ON of a first pixel switch, the first pixel switch may be switched in synchronization with the symbol period.","With this, even when the symbol period is 1\/2400 seconds, for example, the visible light signal can be properly transmitted according to the symbol period, as illustrated in , for example.","Furthermore, in the turning ON of a first pixel switch, when the image is displayed on the display, the first pixel switch may be switched to increase a lighting period that corresponds to the first light source, by a length of time equivalent to a period in which the first light source is OFF for transmission of the visible light signal, the lighting period being a period for representing a pixel value of a pixel in the image. For example, the pixel value of the pixel in the image may be changed to increase the lighting period.","With this, even when the first light source is OFF in order for transmission of the visible light signal, images can be properly displayed showing the original visual appearance, i.e., without breakup, because a supplementary lighting period is provided, as illustrated in  and , for example.","Furthermore, the pixel value may be changed in a cycle that is one half of the symbol period.","With this, it is possible to properly display an image and transmit a visible light signal as illustrated in , for example.","Furthermore, the transmitting method may further include turning ON a second pixel switch for turning ON a second light source, to cause the second light source to be ON only for a period in which the common switch is ON and the second pixel switch is ON, to transmit the visible light signal, the second light source being included in the light source group and located around the first light source, and in the turning ON of a first pixel switch and in the turning ON of a second pixel switch, when the first light source transmits a symbol included in the visible light signal and the second light source transmits a symbol included in the visible light signal simultaneously, and the symbol transmitted from the first light source and the symbol transmitted from the second light source are the same, among a plurality of timings at which the first pixel switch and the second pixel switch are turned ON and OFF for transmission of the symbol, a timing at which a luminance rising edge unique to the symbol is obtained may be adjusted to be the same for the first pixel switch and for the second pixel switch, and a remaining timing may be adjusted to be different between the first pixel switch and the second pixel switch, and an average luminance of an entirety of the first light source and the second light source in a period in which the symbol is transmitted may be matched with predetermined luminance.","With this, as illustrated in , for example, a rising edge of the spatially averaged luminance can be steep only at a timing of a luminance rising edge unique to the symbol, and thus the occurrence of reception errors can be reduced.","Furthermore, in the turning ON of a first pixel switch, when a symbol included in the visible light signal is transmitted in a first period, a symbol included in the visible light signal is transmitted in a second period subsequent to the first period, and the symbol transmitted in the first period and the symbol transmitted in the second period are the same, among a plurality of timings at which the first pixel switch is turned ON and OFF for transmission of the symbol, a timing at which a luminance rising edge unique to the symbol is obtained may be adjusted to be the same in the first period and in the second period, and a remaining timing may be adjusted to be different between the first period and the second period, and an average luminance of the first light source in an entirety of the first period and the second period may be matched with predetermined luminance.","With this, as illustrated in , for example, a rising edge of the temporally averaged luminance can be steep only at a timing of a luminance rising edge unique to the symbol, and thus the occurrence of reception errors can be reduced.","Furthermore, in the turning ON of a first pixel switch, the first pixel switch may be ON for a signal transmission period in which the common switch is switched according to the luminance change pattern, and the transmitting method may further include displaying a pixel in an image to be displayed, by (i) keeping the common switch ON for an image display period different from the signal transmission period and (ii) turning ON the first pixel switch in the image display period according to the image, to cause the first light source to be ON only for a period in which the common switch is ON and the first pixel switch is ON.","With this, the process of displaying an image and the process of transmitting a visible light signal are performed in mutually different periods, and thus it is possible to easily display the image and transmit the visible light signal.","These general and specific aspects may be implemented using an apparatus, a system, a method, an integrated circuit, a computer program, or a computer-readable recording medium such as a CD-ROM, or any combination of apparatuses, systems, methods, integrated circuits, computer programs, or computer-readable recording media.","Each of the embodiments described below shows a general or specific example.","Each of the embodiments described below shows a general or specific example. The numerical values, shapes, materials, structural elements, the arrangement and connection of the structural elements, steps, the processing order of the steps etc. shown in the following embodiments are mere examples, and therefore do not limit the scope of the present disclosure. Therefore, among the structural elements in the following embodiments, structural elements not recited in any one of the independent claims representing the broadest concepts are described as arbitrary structural elements.","The following describes Embodiment 1.","(Observation of Luminance of Light Emitting Unit)","The following proposes an imaging method in which, when capturing one image, all imaging elements are not exposed simultaneously but the times of starting and ending the exposure differ between the imaging elements.  illustrates an example of imaging where imaging elements arranged in a line are exposed simultaneously, with the exposure start time being shifted in order of lines. Here, the simultaneously exposed imaging elements are referred to as \u201cexposure line\u201d, and the line of pixels in the image corresponding to the imaging elements is referred to as \u201cbright line\u201d.","In the case of capturing a blinking light source shown on the entire imaging elements using this imaging method, bright lines (lines of brightness in pixel value) along exposure lines appear in the captured image as illustrated in . By recognizing this bright line pattern, the luminance change of the light source at a speed higher than the imaging frame rate can be estimated. Hence, transmitting a signal as the luminance change of the light source enables communication at a speed not less than the imaging frame rate. In the case where the light source takes two luminance values to express a signal, the lower luminance value is referred to as \u201clow\u201d (LO), and the higher luminance value is referred to as \u201chigh\u201d (HI). The low may be a state in which the light source emits no light, or a state in which the light source emits weaker light than in the high.","By this method, information transmission is performed at a speed higher than the imaging frame rate.","In the case where the number of exposure lines whose exposure times do not overlap each other is 20 in one captured image and the imaging frame rate is 30 fps, it is possible to recognize a luminance change in a period of 1.67 millisecond. In the case where the number of exposure lines whose exposure times do not overlap each other is 1000, it is possible to recognize a luminance change in a period of 1\/30000 second (about 33 microseconds). Note that the exposure time is set to less than 10 milliseconds, for example.",{"@attributes":{"id":"p-0606","num":"0605"},"figref":"FIG. 2"},"In this situation, when transmitting information based on whether or not each exposure line receives at least a predetermined amount of light, information transmission at a speed of fl bits per second at the maximum can be realized where f is the number of frames per second (frame rate) and I is the number of exposure lines constituting one image.","Note that faster communication is possible in the case of performing time-difference exposure not on a line basis but on a pixel basis.","In such a case, when transmitting information based on whether or not each pixel receives at least a predetermined amount of light, the transmission speed is flm bits per second at the maximum, where m is the number of pixels per exposure line.","If the exposure state of each exposure line caused by the light emission of the light emitting unit is recognizable in a plurality of levels as illustrated in , more information can be transmitted by controlling the light emission time of the light emitting unit in a shorter unit of time than the exposure time of each exposure line.","In the case where the exposure state is recognizable in Elv levels, information can be transmitted at a speed of flElv bits per second at the maximum.","Moreover, a fundamental period of transmission can be recognized by causing the light emitting unit to emit light with a timing slightly different from the timing of exposure of each exposure line.",{"@attributes":{"id":"p-0613","num":"0612"},"figref":"FIG. 4"},"In this situation, the exposure time is calculated from the brightness of each exposure line, to recognize the light emission state of the light emitting unit.","Note that, in the case of determining the brightness of each exposure line in a binary fashion of whether or not the luminance is greater than or equal to a threshold, it is necessary for the light emitting unit to continue the state of emitting no light for at least the exposure time of each line, to enable the no light emission state to be recognized.",{"@attributes":{"id":"p-0616","num":"0615"},"figref":"FIG. 5A","b":["7500","7500","7500","7500"],"i":["a","b","a","b "]},{"@attributes":{"id":"p-0617","num":"0616"},"figref":"FIG. 5B","b":["7501","7501","7501"],"i":["a","b","b "]},"As described with reference to , in the structure in which each exposure line is sequentially exposed so that the exposure times of adjacent exposure lines partially overlap each other, the communication speed can be dramatically improved by using, for signal transmission, the bright line pattern generated by setting the exposure time shorter than in the normal imaging mode. Setting the exposure time in visible light communication to less than or equal to 1\/480 second enables an appropriate bright line pattern to be generated. Here, it is necessary to set (exposure time)<\u215b\u00d7f, where f is the frame frequency. Blanking during imaging is half of one frame at the maximum. That is, the blanking time is less than or equal to half of the imaging time. The actual imaging time is therefore \u00bdf at the shortest. Besides, since 4-value information needs to be received within the time of \u00bdf, it is necessary to at least set the exposure time to less than 1\/(2f\u00d74). Given that the normal frame rate is less than or equal to 60 frames per second, by setting the exposure time to less than or equal to 1\/480 second, an appropriate bright line pattern is generated in the image data and thus fast signal transmission is achieved.",{"@attributes":{"id":"p-0619","num":"0618"},"figref":"FIG. 5C","b":["7502","7502","7502","7502","7502","7502","7502"],"i":["a","e","d","f","d","g","h"],"sub":["D2 ","E ","D ","D2 ","D "]},"Here, the structure in which the exposure times of adjacent exposure lines partially overlap each other does not need to be applied to all exposure lines, and part of the exposure lines may not have the structure of partially overlapping in exposure time. Moreover, the structure in which the predetermined non-exposure blank time (predetermined wait time) is provided from when the exposure of one exposure line ends to when the exposure of the next exposure line starts does not need to be applied to all exposure lines, and part of the exposure lines may have the structure of partially overlapping in exposure time. This makes it possible to take advantage of each of the structures. Furthermore, the same reading method or circuit may be used to read a signal in the normal imaging mode in which imaging is performed at the normal frame rate (30 fps, 60 fps) and the visible light communication mode in which imaging is performed with the exposure time less than or equal to 1\/480 second for visible light communication. The use of the same reading method or circuit to read a signal eliminates the need to employ separate circuits for the normal imaging mode and the visible light communication mode. The circuit size can be reduced in this way.",{"@attributes":{"id":"p-0621","num":"0620"},"figref":"FIG. 5D","sub":["S ","E","D ","E","D","S","E","S"],"b":"7503","i":"d"},{"@attributes":{"id":"p-0622","num":"0621"},"figref":"FIG. 5E","sub":["T ","D ","D ","T","D","T","T ","D "]},{"@attributes":{"id":"p-0623","num":"0622"},"figref":"FIG. 5F","sub":["HT ","E","E ","HT","E ","HT","E","HT","HT ","E "]},{"@attributes":{"id":"p-0624","num":"0623"},"figref":"FIG. 5G","sub":["E ","HT ","HT ","E ","E ","E ","E "]},{"@attributes":{"id":"p-0625","num":"0624"},"figref":["FIG. 5H","FIG. 7"],"sub":["E ","E ","S ","E"],"b":["7507","7507","7507","7507"],"i":["c","d","e","f"]},{"@attributes":{"id":"p-0626","num":"0625"},"figref":"FIG. 6A"},"The information communication method in this embodiment is an information communication method of obtaining information from a subject, and includes Steps SK to SK.","In detail, the information communication method includes: a first exposure time setting step SK of setting a first exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a plurality of bright lines corresponding to a plurality of exposure lines included in the image sensor appear according to a change in luminance of the subject; a first image obtainment step SK of obtaining a bright line image including the plurality of bright lines, by capturing the subject changing in luminance by the image sensor with the set first exposure time; and an information obtainment step SK of obtaining the information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained bright line image, wherein in the first image obtainment step SK, exposure starts sequentially for the plurality of exposure lines each at a different time, and exposure of each of the plurality of exposure lines starts after a predetermined blank time elapses from when exposure of an adjacent exposure line adjacent to the exposure line ends.",{"@attributes":{"id":"p-0629","num":"0628"},"figref":"FIG. 6B"},"An information communication device K in this embodiment is an information communication device that obtains information from a subject, and includes structural elements K to K.","In detail, the information communication device K includes: an exposure time setting unit K that sets an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a plurality of bright lines corresponding to a plurality of exposure lines included in the image sensor appear according to a change in luminance of the subject; an image obtainment unit K that includes the image sensor, and obtains a bright line image including the plurality of bright lines by capturing the subject changing in luminance with the set exposure time; and an information obtainment unit K that obtains the information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained bright line image, wherein exposure starts sequentially for the plurality of exposure lines each at a different time, and exposure of each of the plurality of exposure lines starts after a predetermined blank time elapses from when exposure of an adjacent exposure line adjacent to the exposure line ends.","In the information communication method and the information communication device K illustrated in , the exposure of each of the plurality of exposure lines starts a predetermined blank time after the exposure of the adjacent exposure line adjacent to the exposure line ends, for instance as illustrated in . This eases the recognition of the change in luminance of the subject. As a result, the information can be appropriately obtained from the subject.","It should be noted that in the above embodiment, each of the constituent elements may be constituted by dedicated hardware, or may be obtained by executing a software program suitable for the constituent element. Each constituent element may be achieved by a program execution unit such as a CPU or a processor reading and executing a software program stored in a recording medium such as a hard disk or semiconductor memory. For example, the program causes a computer to execute the information communication method illustrated in the flowchart of .","This embodiment describes each example of application using a receiver such as a smartphone which is the information communication device D and a transmitter for transmitting information as a blink pattern of the light source such as an LED or an organic EL device in Embodiment 1 described above.",{"@attributes":{"id":"p-0635","num":"0634"},"figref":"FIG. 7"},"In the normal imaging mode, a receiver  performs imaging at a shutter speed of 1\/100 second as an example to obtain a normal captured image, and displays the normal captured image on a display. For example, a subject such as a street lighting or a signage as a store sign and its surroundings are clearly shown in the normal captured image.","In the visible light communication mode, the receiver  performs imaging at a shutter speed of 1\/10000 second as an example, to obtain a visible light communication image. For example, in the case where the above-mentioned street lighting or signage is transmitting a signal by way of luminance change as the light source described in Embodiment 1, that is, a transmitter, one or more bright lines (hereafter referred to as \u201cbright line pattern\u201d) are shown in the signal transmission part of the visible light communication image, while nothing is shown in the other part. That is, in the visible light communication image, only the bright line pattern is shown and the part of the subject not changing in luminance and the surroundings of the subject are not shown.","In the intermediate mode, the receiver  performs imaging at a shutter speed of 1\/3000 second as an example, to obtain an intermediate image. In the intermediate image, the bright line pattern is shown, and the part of the subject not changing in luminance and the surroundings of the subject are shown, too. By the receiver  displaying the intermediate image on the display, the user can find out from where or from which position the signal is being transmitted. Note that the bright line pattern, the subject, and its surroundings shown in the intermediate image are not as clear as the bright line pattern in the visible light communication image and the subject and its surroundings in the normal captured image respectively, but have the level of clarity recognizable by the user.","In the following description, the normal imaging mode or imaging in the normal imaging mode is referred to as \u201cnormal imaging\u201d, and the visible light communication mode or imaging in the visible light communication mode is referred to as \u201cvisible light imaging\u201d (visible light communication). Imaging in the intermediate mode may be used instead of normal imaging and visible light imaging, and the intermediate image may be used instead of the below-mentioned synthetic image.",{"@attributes":{"id":"p-0640","num":"0639"},"figref":"FIG. 8"},"The receiver  switches the imaging mode in such a manner as normal imaging, visible light communication, normal imaging, . . . . The receiver  synthesizes the normal captured image and the visible light communication image to generate a synthetic image in which the bright line pattern, the subject, and its surroundings are clearly shown, and displays the synthetic image on the display. The synthetic image is an image generated by superimposing the bright line pattern of the visible light communication image on the signal transmission part of the normal captured image. The bright line pattern, the subject, and its surroundings shown in the synthetic image are clear, and have the level of clarity sufficiently recognizable by the user. Displaying such a synthetic image enables the user to more distinctly find out from which position the signal is being transmitted.",{"@attributes":{"id":"p-0642","num":"0641"},"figref":"FIG. 9"},"The receiver  includes a camera Ca and a camera Ca. In the receiver , the camera Ca performs normal imaging, and the camera Ca performs visible light imaging. Thus, the camera Ca obtains the above-mentioned normal captured image, and the camera Ca obtains the above-mentioned visible light communication image. The receiver  synthesizes the normal captured image and the visible light communication image to generate the above-mentioned synthetic image, and displays the synthetic image on the display.",{"@attributes":{"id":"p-0644","num":"0643"},"figref":"FIG. 10A"},"In the receiver  including two cameras, the camera Ca switches the imaging mode in such a manner as normal imaging, visible light communication, normal imaging, . . . . Meanwhile, the camera Ca continuously performs normal imaging. When normal imaging is being performed by the cameras Ca and Ca simultaneously, the receiver  estimates the distance (hereafter referred to as \u201csubject distance\u201d) from the receiver  to the subject based on the normal captured images obtained by these cameras, through the use of stereoscopy (triangulation principle). By using such estimated subject distance, the receiver  can superimpose the bright line pattern of the visible light communication image on the normal captured image at the appropriate position. The appropriate synthetic image can be generated in this way.",{"@attributes":{"id":"p-0646","num":"0645"},"figref":"FIG. 10B"},"The receiver  includes three cameras (cameras Ca, Ca, and Ca) as an example. In the receiver , two cameras (cameras Ca and Ca) continuously perform normal imaging, and the remaining camera (camera Ca) continuously performs visible light communication. Hence, the subject distance can be estimated at any timing, based on the normal captured images obtained by two cameras engaged in normal imaging.",{"@attributes":{"id":"p-0648","num":"0647"},"figref":"FIG. 10C"},"The receiver  includes three cameras (cameras Ca, Ca, and Ca) as an example. In the receiver , each camera switches the imaging mode in such a manner as normal imaging, visible light communication, normal imaging, . . . . The imaging mode of each camera is switched per period so that, in one period, two cameras perform normal imaging and the remaining camera performs visible light communication. That is, the combination of cameras engaged in normal imaging is changed periodically. Hence, the subject distance can be estimated in any period, based on the normal captured images obtained by two cameras engaged in normal imaging.",{"@attributes":{"id":"p-0650","num":"0649"},"figref":"FIG. 11A"},"In the case where the receiver  includes two cameras Ca and Ca, the two cameras Ca and Ca are positioned away from each other as illustrated in . The subject distance can be accurately estimated in this way. In other words, the subject distance can be estimated more accurately when the distance between two cameras is longer.",{"@attributes":{"id":"p-0652","num":"0651"},"figref":"FIG. 11B"},"In the case where the receiver  includes three cameras Ca, Ca, and Ca, the two cameras Ca and Ca for normal imaging are positioned away from each other as illustrated in , and the camera Ca for visible light communication is, for example, positioned between the cameras Ca and Ca. The subject distance can be accurately estimated in this way. In other words, the subject distance can be accurately estimated by using two farthest cameras for normal imaging.",{"@attributes":{"id":"p-0654","num":"0653"},"figref":"FIG. 12"},"The receiver  switches the imaging mode in such a manner as visible light communication, normal imaging, visible light communication, . . . , as mentioned above. Upon performing visible light communication first, the receiver  starts an application program. The receiver  then estimates its position based on the signal received by visible light communication. Next, when performing normal imaging, the receiver  displays AR (Augmented Reality) information on the normal captured image obtained by normal imaging. The AR information is obtained based on, for example, the position estimated as mentioned above. The receiver  also estimates the change in movement and direction of the receiver  based on the detection result of the 9-axis sensor, the motion detection in the normal captured image, and the like, and moves the display position of the AR information according to the estimated change in movement and direction. This enables the AR information to follow the subject image in the normal captured image.","When switching the imaging mode from normal imaging to visible light communication, in visible light communication the receiver  superimposes the AR information on the latest normal captured image obtained in immediately previous normal imaging. The receiver  then displays the normal captured image on which the AR information is superimposed. The receiver  also estimates the change in movement and direction of the receiver  based on the detection result of the 9-axis sensor, and moves the AR information and the normal captured image according to the estimated change in movement and direction, in the same way as in normal imaging. This enables the AR information to follow the subject image in the normal captured image according to the movement of the receiver  and the like in visible light communication, as in normal imaging. Moreover, the normal image can be enlarged or reduced according to the movement of the receiver  and the like.",{"@attributes":{"id":"p-0657","num":"0656"},"figref":"FIG. 13"},"For example, the receiver  may display the synthetic image in which the bright line pattern is shown, as illustrated in (a) in . As an alternative, the receiver  may superimpose, instead of the bright line pattern, a signal specification object which is an image having a predetermined color for notifying signal transmission on the normal captured image to generate the synthetic image, and display the synthetic image, as illustrated in (b) in .","As another alternative, the receiver  may display, as the synthetic image, the normal captured image in which the signal transmission part is indicated by a dotted frame and an identifier (e.g. ID: , ID: , etc.), as illustrated in (c) in . As another alternative, the receiver  may superimpose, instead of the bright line pattern, a signal identification object which is an image having a predetermined color for notifying transmission of a specific type of signal on the normal captured image to generate the synthetic image, and display the synthetic image, as illustrated in (d) in . In this case, the color of the signal identification object differs depending on the type of signal output from the transmitter. For example, a red signal identification object is superimposed in the case where the signal output from the transmitter is position information, and a green signal identification object is superimposed in the case where the signal output from the transmitter is a coupon.",{"@attributes":{"id":"p-0660","num":"0659"},"figref":"FIG. 14"},"For example, in the case of receiving the signal by visible light communication, the receiver  may output a sound for notifying the user that the transmitter has been discovered, while displaying the normal captured image. In this case, the receiver  may change the type of output sound, the number of outputs, or the output time depending on the number of discovered transmitters, the type of received signal, the type of information specified by the signal, or the like.",{"@attributes":{"id":"p-0662","num":"0661"},"figref":"FIG. 15"},"For example, when the user touches the bright line pattern shown in the synthetic image, the receiver  generates an information notification image based on the signal transmitted from the subject corresponding to the touched bright line pattern, and displays the information notification image. The information notification image indicates, for example, a coupon or a location of a store. The bright line pattern may be the signal specification object, the signal identification object, or the dotted frame illustrated in . The same applies to the below-mentioned bright line pattern.",{"@attributes":{"id":"p-0664","num":"0663"},"figref":"FIG. 16"},"For example, when the user touches the bright line pattern shown in the synthetic image, the receiver  generates an information notification image based on the signal transmitted from the subject corresponding to the touched bright line pattern, and displays the information notification image. The information notification image indicates, for example, the current position of the receiver  by a map or the like.",{"@attributes":{"id":"p-0666","num":"0665"},"figref":"FIG. 17"},"For example, the receiver  receives signals from two street lightings which are subjects as transmitters. The receiver  estimates the current position of the receiver  based on these signals, in the same way as above. The receiver  then displays the normal captured image, and also superimposes an information notification image (an image showing latitude, longitude, and the like) indicating the estimation result on the normal captured image. The receiver  may also display an auxiliary information notification image on the normal captured image. For instance, the auxiliary information notification image prompts the user to perform an operation for calibrating the 9-axis sensor (particularly the geomagnetic sensor), i.e. an operation for drift cancellation. As a result of such an operation, the current position can be estimated with high accuracy.","When the user touches the displayed information notification image, the receiver  may display the map showing the estimated position, instead of the normal captured image.",{"@attributes":{"id":"p-0669","num":"0668"},"figref":"FIG. 18"},"For example, when the user swipes on the receiver  on which the synthetic image is displayed, the receiver  displays the normal captured image including the dotted frame and the identifier like the normal captured image illustrated in (c) in , and also displays a list of information to follow the swipe operation. The list includes information specified by the signal transmitted from the part (transmitter) identified by each identifier. The swipe may be, for example, an operation of moving the user's finger from outside the display of the receiver  on the right side into the display. The swipe may be an operation of moving the user's finger from the top, bottom, or left side of the display into the display.","When the user taps information included in the list, the receiver  may display an information notification image (e.g. an image showing a coupon) indicating the information in more detail.",{"@attributes":{"id":"p-0672","num":"0671"},"figref":"FIG. 19"},"For example, when the user swipes on the receiver  on which the synthetic image is displayed, the receiver  superimposes an information notification image on the synthetic image, to follow the swipe operation. The information notification image indicates the subject distance with an arrow so as to be easily recognizable by the user. The swipe may be, for example, an operation of moving the user's finger from outside the display of the receiver  on the bottom side into the display. The swipe may be an operation of moving the user's finger from the left, top, or right side of the display into the display.",{"@attributes":{"id":"p-0674","num":"0673"},"figref":"FIG. 20"},"For example, the receiver  captures, as a subject, a transmitter which is a signage showing a plurality of stores, and displays the normal captured image obtained as a result. When the user taps a signage image of one store included in the subject shown in the normal captured image, the receiver  generates an information notification image based on the signal transmitted from the signage of the store, and displays an information notification image . The information notification image  is, for example, an image showing the availability of the store and the like.",{"@attributes":{"id":"p-0676","num":"0675"},"figref":"FIG. 21"},"A transmitter  as a television transmits a signal to a receiver  by way of luminance change. The signal includes information prompting the user to buy content relating to a program being viewed. Having received the signal by visible light communication, the receiver  displays an information notification image prompting the user to buy content, based on the signal. When the user performs an operation for buying the content, the receiver  transmits at least one of information included in a SIM (Subscriber Identity Module) card inserted in the receiver , a user ID, a terminal ID, credit card information, charging information, a password, and a transmitter ID, to a server . The server  manages a user ID and payment information in association with each other, for each user. The server  specifies a user ID based on the information transmitted from the receiver , and checks payment information associated with the user ID. By this check, the server  determines whether or not to permit the user to buy the content. In the case of determining to permit the user to buy the content, the server  transmits permission information to the receiver . Having received the permission information, the receiver  transmits the permission information to the transmitter . Having received the permission information, the transmitter  obtains the content via a network as an example, and reproduces the content.","The transmitter  may transmit information including the ID of the transmitter  to the receiver , by way of luminance change. In this case, the receiver  transmits the information to the server . Having obtained the information, the server  can determine that, for example, the television program is being viewed on the transmitter , and conduct television program rating research.","The receiver  may include information of an operation (e.g. voting) performed by the user in the above-mentioned information and transmit the information to the server , to allow the server  to reflect the information on the television program. An audience participation program can be realized in this way. Besides, in the case of receiving a post from the user, the receiver  may include the post in the above-mentioned information and transmit the information to the server , to allow the server  to reflect the post on the television program, a network message board, or the like.","Furthermore, by the transmitter  transmitting the above-mentioned information, the server  can charge for television program viewing by paid broadcasting or on-demand TV. The server  can also cause the receiver  to display an advertisement, or the transmitter  to display detailed information of the displayed television program or an URL of a site showing the detailed information. The server  may also obtain the number of times the advertisement is displayed on the receiver , the price of a product bought from the advertisement, or the like, and charge the advertiser according to the number of times or the price. Such price-based charging is possible even in the case where the user seeing the advertisement does not buy the product immediately. When the server  obtains information indicating the manufacturer of the transmitter  from the transmitter  via the receiver , the server  may provide a service (e.g. payment for selling the product) to the manufacturer indicated by the information.",{"@attributes":{"id":"p-0681","num":"0680"},"figref":"FIG. 22"},"For example, the user points a camera of a receiver  at a plurality of transmitters to as lightings. Here, the receiver  is moved so that the transmitters to are sequentially captured as a subject. By performing visible light communication during the movement, the receiver  receives a signal from each of the transmitters to . The signal includes information indicating the position of the transmitter. The receiver  estimates the position of the receiver  using the triangulation principle, based on the positions indicated by the signals received from the transmitters to , the detection result of the 9-axis sensor included in the receiver , and the movement of the captured image. In this case, the drift of the 9-axis sensor (particularly the geomagnetic sensor) is canceled by moving the receiver , so that the position can be estimated with higher accuracy.",{"@attributes":{"id":"p-0683","num":"0682"},"figref":"FIG. 23"},"For example, a receiver  is a head-mounted display including a camera. When a start button is pressed, the receiver  starts imaging in the visible light communication mode, i.e. visible light communication. In the case of receiving a signal by visible light communication, the receiver  notifies the user of information corresponding to the received signal. The notification is made, for example, by outputting a sound from a speaker included in the receiver , or by displaying an image. Visible light communication may be started not only when the start button is pressed, but also when the receiver  receives a sound instructing the start or when the receiver  receives a signal instructing the start by wireless communication. Visible light communication may also be started when the change width of the value obtained by a 9-axis sensor included in the receiver  exceeds a predetermined range or when a bright line pattern, even if only slightly, appears in the normal captured image.",{"@attributes":{"id":"p-0685","num":"0684"},"figref":"FIG. 24"},"The receiver  displays an alignment image  upon initial setting. The alignment image  is used to align the position pointed by the user in the image captured by the camera of the receiver  and the image displayed on the receiver . When the user places his or her fingertip at the position of a circle shown in the alignment image , the receiver associates the position of the fingertip and the position of the circle, and performs alignment. That is, the position pointed by the user is calibrated.",{"@attributes":{"id":"p-0687","num":"0686"},"figref":"FIG. 25"},"The receiver  specifies a signal transmission part by visible light communication, and displays a synthetic image  in which a bright line pattern is shown in the part. The user performs an operation such as a tap or a double tap, on the bright line pattern. The receiver  receives the operation, specifies the bright line pattern subjected to the operation, and displays an information notification image  based on a signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0689","num":"0688"},"figref":"FIG. 26"},"The receiver  displays the synthetic image  in the same way as above. The user performs an operation of moving his or her fingertip so as to encircle the bright line pattern in the synthetic image . The receiver  receives the operation, specifies the bright line pattern subjected to the operation, and displays an information notification image  based on a signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0691","num":"0690"},"figref":"FIG. 27"},"The receiver  displays the synthetic image  in the same way as above. The user performs an operation of placing his or her fingertip at the bright line pattern in the synthetic image  for a predetermined time or more. The receiver  receives the operation, specifies the bright line pattern subjected to the operation, and displays an information notification image  based on a signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0693","num":"0692"},"figref":"FIG. 28"},"The receiver  displays the synthetic image  in the same way as above. The user performs an operation of moving his or her fingertip toward the bright line pattern in the synthetic image  by a swipe. The receiver  receives the operation, specifies the bright line pattern subjected to the operation, and displays an information notification image  based on a signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0695","num":"0694"},"figref":"FIG. 29"},"The receiver  displays the synthetic image  in the same way as above. The user performs an operation of continuously directing his or her gaze to the bright line pattern in the synthetic image  for a predetermined time or more. Alternatively, the user performs an operation of blinking a predetermined number of times while directing his or her gaze to the bright line pattern. The receiver  receives the operation, specifies the bright line pattern subjected to the operation, and displays an information notification image  based on a signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0697","num":"0696"},"figref":"FIG. 30"},"The receiver  displays the synthetic image  in the same way as above, and also displays an arrow associated with each bright line pattern in the synthetic image . The arrow of each bright line pattern differs in direction. The user performs an operation of moving his or her head along one of the arrows. The receiver  receives the operation based on the detection result of the 9-axis sensor, and specifies the bright line pattern associated with the arrow corresponding to the operation, i.e. the arrow in the direction in which the head is moved. The receiver  displays the information notification image  based on the signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0699","num":"0698"},"figref":"FIG. 31A"},"A pen  includes a transmitter for transmitting a signal by way of luminance change, and buttons and . When the button is pressed, the transmitter transmits a predetermined first signal. When the button is pressed, the transmitter transmits a predetermined second signal different from the first signal.",{"@attributes":{"id":"p-0701","num":"0700"},"figref":"FIG. 31B"},"The pen  is used instead of the user's finger mentioned above, like a stylus pen. By selective use of the buttons and , the pen  can be used like a normal pen or an eraser.",{"@attributes":{"id":"p-0703","num":"0702"},"figref":"FIG. 32"},"The receiver  includes a first touch sensor and a second touch sensor . These touch sensors are attached to the frame of the receiver . For example, when the user places his or her fingertip on the first touch sensor and moves the fingertip, the receiver  moves the pointer in the image displayed to the user, according to the movement of the fingertip. When the user touches the second touch sensor , the receiver  selects the object pointed by the pointer in the image displayed to the user.",{"@attributes":{"id":"p-0705","num":"0704"},"figref":"FIG. 33"},"The receiver  includes a touch sensor . The touch sensor is attached to the frame of the receiver . For example, when the user places his or her fingertip on the touch sensor and moves the fingertip, the receiver  moves the pointer in the image displayed to the user, according to the movement of the fingertip. When the user presses the touch sensor , the receiver  selects the object pointed by the pointer in the image displayed to the user. The touch sensor is thus realized as a clickable touch sensor.",{"@attributes":{"id":"p-0707","num":"0706"},"figref":"FIG. 34"},"The receiver  displays the synthetic image  in the same way as above, and also displays a pointer  in the synthetic image . In the case where the receiver  includes the first touch sensor and the second touch sensor , the user places his or her fingertip on the first touch sensor and moves the fingertip, to move the pointer to the object as the bright line pattern. The user then touches the second touch sensor , to cause the receiver  to select the bright line pattern. Having selected the bright line pattern, the receiver  displays the information notification image  based on the signal transmitted from the part corresponding to the bright line pattern.","In the case where the receiver  includes the touch sensor , the user places his or her fingertip on the touch sensor and moves the fingertip, to move the pointer to the object as the bright line pattern. The user then presses the touch sensor , to cause the receiver  to select the bright line pattern. Having selected the bright line pattern, the receiver  displays the information notification image  based on the signal transmitted from the part corresponding to the bright line pattern.",{"@attributes":{"id":"p-0710","num":"0709"},"figref":"FIG. 35A"},"The receiver  displays a gesture confirmation image  based on a signal obtained by visible light communication. The gesture confirmation image  prompts the user to make a predetermined gesture, to provide a service to the user as an example.",{"@attributes":{"id":"p-0712","num":"0711"},"figref":"FIG. 35B"},"A user  carrying the receiver  is in a shop or the like. Here, the receiver  displays the above-mentioned gesture confirmation image  to the user . The user  makes the predetermined gesture according to the gesture confirmation image . A staff  in the shop carries a receiver . The receiver  is a head-mounted display including a camera, and may have the same structure as the receiver . The receiver  displays the gesture confirmation image  based on a signal obtained by visible light communication, too. The staff  determines whether or not the predetermined gesture indicated by the displayed gesture confirmation image  and the gesture made by the user  match. In the case of determining that the predetermined gesture and the gesture made by the user  match, the staff  provides the service associated with the gesture confirmation image , to the user .",{"@attributes":{"id":"p-0714","num":"0713"},"figref":"FIG. 36A"},"The receiver  displays a gesture confirmation image  based on a signal obtained by visible light communication. The gesture confirmation image  prompts the user to make a predetermined gesture, to permit wireless communication as an example.",{"@attributes":{"id":"p-0716","num":"0715"},"figref":"FIG. 36B"},"The user  carries the receiver . Here, the receiver  displays the above-mentioned gesture confirmation image  to the user . The user  makes the predetermined gesture according to the gesture confirmation image . A person around the user  carries the receiver . The receiver  is a head-mounted display including a camera, and may have the same structure as the receiver . The receiver  captures the predetermined gesture made by the user , to obtain authentication information such as a password included in the gesture. In the case where the receiver  determines that the authentication information matches predetermined information, the receiver  establishes wireless connection with the receiver . Subsequently, the receivers  and  can wirelessly communicate with each other.",{"@attributes":{"id":"p-0718","num":"0717"},"figref":"FIG. 37A"},"The transmitter alternately transmits signals  and , for example in a predetermined period. The transmission of the signal  and the transmission of the signal  are each carried out by way of luminance change such as blinking of visible light. A luminance change pattern for transmitting the signal  and a luminance change pattern for transmitting the signal  are different from each other.",{"@attributes":{"id":"p-0720","num":"0719"},"figref":"FIG. 37B"},"The transmitter may transmit the signals  and  intermittently with a buffer time, instead of continuously transmitting the signals  and  as mentioned above. In the buffer time, the transmitter does not change in luminance. Alternatively, in the buffer time, the transmitter may transmit a signal indicating that the transmitter is in the buffer time by way of luminance change, or perform a luminance change different from the luminance change for transmitting the signal  or the luminance change for transmitting the signal . This enables the receiver to appropriately receive the signals  and  without interference.",{"@attributes":{"id":"p-0722","num":"0721"},"figref":"FIG. 38"},"The transmitter repeatedly transmits a signal sequence made up of a preamble, a block , a block , a block , and a check signal, by way of luminance change. The block  includes a preamble, an address , data , and a check signal. The blocks  and  each have the same structure as the block . Specific information is obtained by using data included in the blocks , , and .","In detail, in the above-mentioned signal sequence, one set of data or information is stored in a state of being divided into three blocks. Accordingly, even when a receiver that needs a blanking interval for imaging cannot receive all data of the blocks , , and  from one signal sequence, the receiver can receive the remaining data from another signal sequence. As a result, even a receiver that needs a blanking interval can appropriately obtain the specific information from at least one signal sequence.","In the above-mentioned signal sequence, a preamble and a check signal are provided for a set of three blocks. Hence, a receiver capable of receiving light without needing a blanking interval, such as a receiver including an illuminance sensor, can receive one signal sequence at one time through the use of the preamble and the check signal provided for the set, thus obtaining the specific information in a short time.",{"@attributes":{"id":"p-0726","num":"0725"},"figref":"FIG. 39"},"When repeatedly transmitting the signal sequence including the blocks , , and  as described above, the transmitter may change, for each signal sequence, the order of the blocks included in the signal sequence. For example, the blocks , , and  are included in this order in the first signal sequence, and the blocks , , and  are included in this order in the next signal sequence. A receiver that requires a periodic blanking interval can therefore avoid obtaining only the same block.",{"@attributes":{"id":"p-0728","num":"0727"},"figref":"FIG. 40"},"A receiver  may receive signals (visible light) transmitted from transmitters and as lightings and reflected by a reflection surface. The receiver  can thus receive signals from many transmitters all together. In this case, the transmitters and transmit signals of different frequencies or protocols. As a result, the receiver  can receive the signals from the transmitters without interference.",{"@attributes":{"id":"p-0730","num":"0729"},"figref":"FIG. 41"},"One of the transmitters and may monitor the signal transmission state of the other transmitter, and transmit a signal to avoid interference with a signal of the other transmitter. For instance, one transmitter receives a signal transmitted from the other transmitter, and transmits a signal of a protocol different from the received signal. Alternatively, one transmitter detects a time period during which no signal is transmitted from the other transmitter, and transmits a signal during the time period.",{"@attributes":{"id":"p-0732","num":"0731"},"figref":"FIG. 42"},"The transmitters and may transmit signals of the same frequency or protocol. In this case, the receiver  specifies the strength of the signal transmitted from each of the transmitters, i.e. the edge strength of the bright line included in the captured image. The strength is lower when the distance between the receiver  and the transmitter is longer. In the case where the distance between the receiver  and the transmitter and the distance between the receiver  and the transmitter are different from each other, the difference in distance can be exploited in this way. Thus, the receiver  can separately receive the signals transmitted from the transmitters and appropriately, according to the specified strengths.",{"@attributes":{"id":"p-0734","num":"0733"},"figref":"FIG. 43"},"The receiver  receives a signal transmitted from the transmitter and reflected by a reflection surface. Here, the receiver  may estimate the position of the transmitter , based on the strength distribution of luminance (the difference in luminance between a plurality of positions) in the captured image.",{"@attributes":{"id":"p-0736","num":"0735"},"figref":"FIG. 44"},"A receiver such as a smartphone captures a light source by a back camera (out camera) to receive a signal transmitted from the light source , and obtains the position and direction of the light source from the received signal. The receiver estimates the position and direction of the receiver , from the state of the light source in the captured image and the sensor value of the 9-axis sensor included in the receiver . The receiver captures a user by a front camera (face camera, in camera) , and estimates the position and direction of the head and the gaze direction (the position and direction of the eye) of the user by image processing. The receiver transmits the estimation result to the server. The receiver changes the behavior (display content or playback sound) according to the gaze direction of the user . The imaging by the back camera and the imaging by the front camera may be performed simultaneously or alternately.",{"@attributes":{"id":"p-0738","num":"0737"},"figref":"FIG. 45"},"Receivers and such as smartphones respectively receive signals from light sources and , estimate the positions and directions of the receivers and , and estimate the gaze directions of users and , as in the above-mentioned way. The receivers and respectively obtain information of surrounding objects to and to from a server, based on the received data. The receivers and change their display contents as if the users can see the objects on the opposite side through the receivers and . The receivers and display an AR (Augmented Reality) object such as , according to the display contents. When the gaze of the user exceeds the imaging range of the camera, the receiver displays that the range is exceeded, as in . As an alternative, the receiver displays an AR object or other information in the area outside the range. As another alternative, the receiver displays a previously captured image in the area outside the range in a state of being connected to the current image.",{"@attributes":{"id":"p-0740","num":"0739"},"figref":"FIG. 46"},"A receiver such as a smartphone receives a signal from a light source , estimates the position and direction of the receiver , and estimates the gaze direction of a user , as in the above-mentioned way. The receiver performs a process relating to an object in the gaze direction of the user . For example, the receiver displays information about the object on the screen. When the gaze direction of a user moves from an object to a receiver , the receiver determines that the user is interested in the object , and continues the process relating to the object . For example, the receiver keeps displaying the information of the object on the screen.",{"@attributes":{"id":"p-0742","num":"0741"},"figref":"FIG. 47"},"A transmitter such as a lighting is high in luminance. Regardless of whether the luminance is high or low as a transmission signal, the transmitter captured by a receiver exceeds an upper limit of brightness, and as a result no bright line appears as in . Accordingly, a transmitter includes a part such as a diffusion plate or a prism for diffusing or weakening light, to reduce the luminance. As a result, the receiver can capture bright lines as in ",{"@attributes":{"id":"p-0744","num":"0743"},"figref":"FIG. 48"},"A transmitter such as a lighting does not have a uniform light source, and so the luminance is not uniform in a captured image , causing a reception error. Accordingly, a transmitter includes a part such as a diffusion plate or a prism for diffusing light, to attain uniform luminance as in . A reception error can be prevented in this way.",{"@attributes":{"id":"p-0746","num":"0745"},"figref":"FIG. 49"},"Transmitters and are each high in luminance in the center part, so that bright lines appear not in the center part but in the peripheral part in an image captured by a receiver. Since the bright lines are discontinuous, the receiver cannot receive a signal from a part , but can receive a signal from a part . By reading bright lines along a path , the receiver can receive a signal from more bright lines than in the part ",{"@attributes":{"id":"p-0748","num":"0747"},"figref":"FIG. 50"},"Transmitters , , , and such as lightings are high in luminance like , and bright lines tend not to appear when captured by a receiver. Accordingly, a diffusion plate\/prism , a reflection plate , a reflection plate\/half mirror , a reflection plate , or a diffusion plate\/prism is included to diffuse light, with it being possible to widen the part where bright lines appear. These transmitters are each captured with bright lines appearing in the periphery, like . Since the receiver estimates the distance between the receiver and the transmitter using the size of the transmitter in the captured image, the part where light is diffused is set as the size of the light source and stored in a server or the like in association with the transmission ID, as a result of which the receiver can accurately estimate the distance to the transmitter.",{"@attributes":{"id":"p-0750","num":"0749"},"figref":"FIG. 51"},"A transmitter such as a lighting is high in luminance like , and bright lines tend not to appear when captured by a receiver. Accordingly, a reflection plate is included to diffuse light, with it being possible to widen the part where bright lines appear.",{"@attributes":{"id":"p-0752","num":"0751"},"figref":"FIG. 52"},"A transmitter reflects light from a light source by a reflection plate , as a result of which a receiver can capture bright lines in a wide range. A transmitter directs a light source toward a diffusion plate or prism , as a result of which a receiver can capture bright lines in a wide range.",{"@attributes":{"id":"p-0754","num":"0753"},"figref":"FIG. 53"},"A receiver displays a bright line pattern using the above-mentioned synthetic image, intermediate image, or the like. Here, the receiver may be incapable of receiving a signal from a transmitter corresponding to the bright line pattern. When the user performs an operation (e.g. a tap) on the bright line pattern to select the bright line pattern, the receiver displays the synthetic image or intermediate image in which the bright line pattern is enlarged by optical zoom. Through such optical zoom, the receiver can appropriately receive the signal from the transmitter corresponding to the bright line pattern. That is, even when the captured image is too small to obtain the signal, the signal can be appropriately received by performing optical zoom. In the case where the displayed image is large enough to obtain the signal, too, faster reception is possible by optical zoom.","An information communication method in this embodiment is an information communication method of obtaining information from a subject, the information communication method including: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image by capturing the subject that changes in luminance by the image sensor with the set exposure time, the bright line image being an image including the bright line; displaying, based on the bright line image, a display image in which the subject and surroundings of the subject are shown, in a form that enables identification of a spatial position of a part where the bright line appears; and obtaining transmission information by demodulating data specified by a pattern of the bright line included in the obtained bright line image.","In this way, a synthetic image or an intermediate image illustrated in, for instance,  is displayed as the display image. In the display image in which the subject and the surroundings of the subject are shown, the spatial position of the part where the bright line appears is identified by a bright line pattern, a signal specification object, a signal identification object, a dotted frame, or the like. By looking at such a display image, the user can easily find the subject that is transmitting the signal through the change in luminance.","For example, the information communication method may further include: setting a longer exposure time than the exposure time; obtaining a normal captured image by capturing the subject and the surroundings of the subject by the image sensor with the longer exposure time; and generating a synthetic image by specifying, based on the bright line image, the part where the bright line appears in the normal captured image, and superimposing a signal object on the normal captured image, the signal object being an image indicating the part, wherein in the displaying, the synthetic image is displayed as the display image.","In this way, the signal object is, for example, a bright line pattern, a signal specification object, a signal identification object, a dotted frame, or the like, and the synthetic image is displayed as the display image as illustrated in . Hence, the user can more easily find the subject that is transmitting the signal through the change in luminance.","For example, in the setting of an exposure time, the exposure time may be set to 1\/3000 second, in the obtaining of a bright line image, the bright line image in which the surroundings of the subject are shown may be obtained, and in the displaying, the bright line image may be displayed as the display image.","In this way, the bright line image is obtained and displayed as an intermediate image, for instance as illustrated in . This eliminates the need for a process of obtaining a normal captured image and a visible light communication image and synthesizing them, thus contributing to a simpler process.","For example, the image sensor may include a first image sensor and a second image sensor, in the obtaining of the normal captured image, the normal captured image may be obtained by image capture by the first image sensor, and in the obtaining of a bright line image, the bright line image may be obtained by image capture by the second image sensor simultaneously with the first image sensor.","In this way, the normal captured image and the visible light communication image which is the bright line image are obtained by the respective cameras, for instance as illustrated in . As compared with the case of obtaining the normal captured image and the visible light communication image by one camera, the images can be obtained promptly, contributing to a faster process.","For example, the information communication method may further include presenting, in the case where the part where the bright line appears is designated in the display image by an operation by a user, presentation information based on the transmission information obtained from the pattern of the bright line in the designated part. Examples of the operation by the user include: a tap; a swipe; an operation of continuously placing the user's fingertip on the part for a predetermined time or more; an operation of continuously directing the user's gaze to the part for a predetermined time or more; an operation of moving a part of the user's body according to an arrow displayed in association with the part; an operation of placing a pen tip that changes in luminance on the part; and an operation of pointing to the part with a pointer displayed in the display image by touching a touch sensor.","In this way, the presentation information is displayed as an information notification image, for instance as illustrated in . Desired information can thus be presented to the user.","For example, the image sensor may be included in a head-mounted display, and in the displaying, the display image may be displayed by a projector included in the head-mounted display.","In this way, the information can be easily presented to the user, for instance as illustrated in .","For example, an information communication method of obtaining information from a subject may include: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image by capturing the subject that changes in luminance by the image sensor with the set exposure time, the bright line image being an image including the bright line; and obtaining the information by demodulating data specified by a pattern of the bright line included in the obtained bright line image, wherein in the obtaining of a bright line image, the bright line image including a plurality of parts where the bright line appears is obtained by capturing a plurality of subjects in a period during which the image sensor is being moved, and in the obtaining of the information, a position of each of the plurality of subjects is obtained by demodulating, for each of the plurality of parts, the data specified by the pattern of the bright line in the part, and the information communication method may further include estimating a position of the image sensor, based on the obtained position of each of the plurality of subjects and a moving state of the image sensor.","In this way, the position of the receiver including the image sensor can be accurately estimated based on the changes in luminance of the plurality of subjects such as lightings, for instance as illustrated in .","For example, an information communication method of obtaining information from a subject may include: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image by capturing the subject that changes in luminance by the image sensor with the set exposure time, the bright line image being an image including the bright line; obtaining the information by demodulating data specified by a pattern of the bright line included in the obtained bright line image; and presenting the obtained information, wherein in the presenting, an image prompting to make a predetermined gesture is presented to a user of the image sensor as the information.","In this way, user authentication and the like can be conducted according to whether or not the user makes the gesture as prompted, for instance as illustrated in . This enhances convenience.","For example, an information communication method of obtaining information from a subject may include: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image by capturing the subject that changes in luminance by the image sensor with the set exposure time, the bright line image being an image including the bright line; and obtaining the information by demodulating data specified by a pattern of the bright line included in the obtained bright line image, wherein in the obtaining of a bright line image, the bright line image is obtained by capturing a plurality of subjects reflected on a reflection surface, and in the obtaining of the information, the information is obtained by separating a bright line corresponding to each of the plurality of subjects from bright lines included in the bright line image according to a strength of the bright line and demodulating, for each of the plurality of subjects, the data specified by the pattern of the bright line corresponding to the subject.","In this way, even in the case where the plurality of subjects such as lightings each change in luminance, appropriate information can be obtained from each subject, for instance as illustrated in .","For example, an information communication method of obtaining information from a subject may include: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image by capturing the subject that changes in luminance by the image sensor with the set exposure time, the bright line image being an image including the bright line; and obtaining the information by demodulating data specified by a pattern of the bright line included in the obtained bright line image, wherein in the obtaining of a bright line image, the bright line image is obtained by capturing the subject reflected on a reflection surface, and the information communication method may further include estimating a position of the subject based on a luminance distribution in the bright line image.","In this way, the appropriate position of the subject can be estimated based on the luminance distribution, for instance as illustrated in .","For example, an information communication method of transmitting a signal using a change in luminance may include: determining a first pattern of the change in luminance, by modulating a first signal to be transmitted; determining a second pattern of the change in luminance, by modulating a second signal to be transmitted; and transmitting the first signal and the second signal by a light emitter alternately changing in luminance according to the determined first pattern and changing in luminance according to the determined second pattern.","In this way, the first signal and the second signal can each be transmitted without a delay, for instance as illustrated in .","For example, in the transmitting, a buffer time may be provided when switching the change in luminance between the change in luminance according to the first pattern and the change in luminance according to the second pattern.","In this way, interference between the first signal and the second signal can be suppressed, for instance as illustrated in .","For example, an information communication method of transmitting a signal using a change in luminance may include: determining a pattern of the change in luminance by modulating the signal to be transmitted; and transmitting the signal by a light emitter changing in luminance according to the determined pattern, wherein the signal is made up of a plurality of main blocks, each of the plurality of main blocks includes first data, a preamble for the first data, and a check signal for the first data, the first data is made up of a plurality of sub-blocks, and each of the plurality of sub-blocks includes second data, a preamble for the second data, and a check signal for the second data.","In this way, data can be appropriately obtained regardless of whether or not the receiver needs a blanking interval, for instance as illustrated in .","For example, an information communication method of transmitting a signal using a change in luminance may include: determining, by each of a plurality of transmitters, a pattern of the change in luminance by modulating the signal to be transmitted; and transmitting, by each of the plurality of transmitters, the signal by a light emitter in the transmitter changing in luminance according to the determined pattern, wherein in the transmitting, the signal of a different frequency or protocol is transmitted.","In this way, interference between signals from the plurality of transmitters can be suppressed, for instance as illustrated in .","For example, an information communication method of transmitting a signal using a change in luminance may include: determining, by each of a plurality of transmitters, a pattern of the change in luminance by modulating the signal to be transmitted; and transmitting, by each of the plurality of transmitters, the signal by a light emitter in the transmitter changing in luminance according to the determined pattern, wherein in the transmitting, one of the plurality of transmitters receives a signal transmitted from a remaining one of the plurality of transmitters, and transmits an other signal in a form that does not interfere with the received signal.","In this way, interference between signals from the plurality of transmitters can be suppressed, for instance as illustrated in .","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED, an organic EL device, or the like in Embodiment 1 or 2 described above.",{"@attributes":{"id":"p-0787","num":"0786"},"figref":"FIG. 54"},"First, a receiver receives a signal by an illuminance sensor (Step ). Next, the receiver obtains information such as position information from a server, based on the received signal (Step ). The receiver then activates an image sensor capable of capturing the light reception direction of the illuminance sensor (Step ). The receiver receives all or part of a signal by the image sensor, and determines whether or not all or part of the signal is the same as the signal received by the illuminance sensor (Step ). Following this, the receiver estimates the position of the receiver, from the position of the transmitter in the captured image, information from a 9-axis sensor included in the receiver, and the position information of the transmitter (Step ). Thus, the receiver activates the illuminance sensor of low power consumption and, in the case where the signal is received by the illuminance sensor, activates the image sensor. The receiver then performs position estimation using image capture by the image sensor. In this way, the position of the receiver can be accurately estimated while saving power.",{"@attributes":{"id":"p-0789","num":"0788"},"figref":"FIG. 55"},"A receiver recognizes a periodic change of luminance from the sensor value of an illuminance sensor (Step ). The receiver then activates an image sensor capable of capturing the light reception direction of the illuminance sensor, and receives a signal (Step ). Thus, the receiver activates the illuminance sensor of low power consumption and, in the case where the periodic change of luminance is received by the illuminance sensor, activates the image sensor, in the same way as above. The receiver then receives the accurate signal using image capture by the image sensor. In this way, the accurate signal can be received while saving power.",{"@attributes":{"id":"p-0791","num":"0790"},"figref":"FIG. 56A"},"A transmitter  includes a power supply unit , a signal control unit , a light emitting unit , and a light emitting unit . The power supply unit supplies power to the signal control unit . The signal control unit divides the power supplied from the power supply unit into the light emitting units and , and controls the luminance changes of the light emitting units and ",{"@attributes":{"id":"p-0793","num":"0792"},"figref":"FIG. 56B"},"A transmitter  includes a power supply unit , a signal control unit , a light emitting unit , and a light emitting unit . The power supply unit supplies power to the light emitting units and . The signal control unit controls the power supplied from the power supply unit , thereby controlling the luminance changes of the light emitting units and . The power use efficiency can be enhanced by the signal control unit controlling the power supply unit that supplies power to each of the light emitting units and ",{"@attributes":{"id":"p-0795","num":"0794"},"figref":"FIG. 57"},"The system includes a centralized control unit , a transmitter , and a transmitter . The centralized control unit  controls signal transmission by a change in luminance of each of the transmitters  and . For example, the centralized control unit  causes the transmitters  and  to transmit the same signal at the same time, or causes one of the transmitters to transmit a signal unique to the transmitter.","The transmitter  includes two transmission units  and , a signal change unit , a signal storage unit , a synchronous signal input unit , a synchronous control unit , and a light receiving unit .","The two transmission units  and  each have the same structure as the transmitter  illustrated in , and transmits a signal by changing in luminance. In detail, the transmission unit  includes a power supply unit , a signal control unit , a light emitting unit , and a light emitting unit . The transmission unit  includes a power supply unit , a signal control unit , a light emitting unit , and a light emitting unit ","The signal change unit  modulates a signal to be transmitted, to a signal indicating a luminance change pattern. The signal storage unit  stores the signal indicating the luminance change pattern. The signal control unit in the transmission unit  reads the signal stored in the signal storage unit , and causes the light emitting units and to change in luminance according to the signal.","The synchronous signal input unit  obtains a synchronous signal according to control by the centralized control unit . The synchronous control unit  synchronizes the luminance changes of the transmission units  and , when the synchronous signal is obtained. That is, the synchronous control unit  controls the signal control units and , to synchronize the luminance changes of the transmission units  and . Here, the light receiving unit  detects light emission from the transmission units  and . The synchronous control unit  feedback-controls the signal control units and , according to the light detected by the light receiving unit .",{"@attributes":{"id":"p-0801","num":"0800"},"figref":"FIG. 58"},"A transmitter  includes a transmission unit  that transmits a signal by changing in luminance, and a non-transmission unit  that emits light without transmitting a signal.","The transmission unit  has the same structure as the transmitter  illustrated in , and includes a power supply unit , a signal control unit , and light emitting units to . The non-transmission unit  includes a power supply unit and light emitting units to , but does not include a signal control unit. In other words, in the case where there are a plurality of units each including a power supply and luminance change synchronous control cannot be performed between the plurality of units, a signal control unit is provided in only one of the plurality of units to cause the unit to change in luminance, as in the structure illustrated in .","In the transmitter , the light emitting units to in the transmission unit  are continuously arranged in a line. That is, none of the light emitting units to in the non-transmission unit  is mixed in the set of the light emitting units to . This makes the light emitter that changes in luminance larger in size, so that the receiver can easily receive the signal transmitted using the change in luminance.",{"@attributes":{"id":"p-0805","num":"0804"},"figref":"FIG. 59A"},"A transmitter  such as a signage includes three light emitting units (light emitting areas) to . Light from these light emitting units to do not interfere with each other. In the case where only one of the light emitting units to can be changed in luminance to transmit a signal, it is desirable to change in luminance the light emitting unit at the center, as illustrated in (a) in . In the case where two of the light emitting units to can be changed in luminance, it is desirable to change in luminance the light emitting unit at the center and the light emitting unit or at either edge, as illustrated in (b) in . Changing in luminance the light emitting units at such positions enables the receiver to appropriately receive the signal transmitted using the change in luminance.",{"@attributes":{"id":"p-0807","num":"0806"},"figref":"FIG. 59B"},"A transmitter  such as a signage includes three light emitting units to . Light from adjacent light emitting units of these light emitting units to interferes with each other. In the case where only one of the light emitting units to can be changed in luminance to transmit a signal, it is desirable to change in luminance the light emitting unit or at either edge, as illustrated in (a) in . This prevents light from another light emitting unit from interfering with the luminance change for signal transmission. In the case where two of the light emitting units to can be changed in luminance, it is desirable to change in luminance the light emitting unit at the center and the light emitting unit or at either edge, as illustrated in (b) in . Changing in luminance the light emitting units at such positions contributes to a larger luminance change area, and so enables the receiver to appropriately receive the signal transmitted using the change in luminance.",{"@attributes":{"id":"p-0809","num":"0808"},"figref":"FIG. 59C"},"In the case where two of the light emitting units to can be changed in luminance in the transmitter , the light emitting units and at both edges may be changed in luminance, as illustrated in . In this case, the imaging range in which the luminance change part is shown can be widened in the image capture by the receiver.",{"@attributes":{"id":"p-0811","num":"0810"},"figref":"FIG. 60A"},"A transmitter  such as a signage transmits a signal by a character part \u201cA Shop\u201d and a light emitting unit changing in luminance. For example, the light emitting unit is formed like a horizontally long rectangle, and uniformly changes in luminance. The uniform change in luminance of the light emitting unit enables the receiver to appropriately receive the signal transmitted using the change in luminance.",{"@attributes":{"id":"p-0813","num":"0812"},"figref":"FIG. 60B"},"A transmitter  such as a signage transmits a signal by a character part \u201cA Shop\u201d and a light emitting unit changing in luminance. For example, the light emitting unit is formed like a frame along the edges of the signage, and uniformly changes in luminance. That is, the light emitting unit is formed so that, when the light emitting unit is projected onto an arbitrary straight line, the length of the continuous projection part is at the maximum. The uniform change in luminance of the light emitting unit enables the receiver to more appropriately receive the signal transmitted using the change in luminance.",{"@attributes":{"id":"p-0815","num":"0814"},"figref":"FIG. 61"},"A receiver  such as a smartphone obtains position information indicating the position of the receiver , and transmits the position information to a server . For example, the receiver  obtains the position information when using a GPS or the like or receiving another signal. The server  transmits an ID list associated with the position indicated by the position information, to the receiver . The ID list includes each ID such as \u201cabcd\u201d and information associated with the ID.","The receiver  receives a signal from a transmitter  such as a lighting device. Here, the receiver  may be able to receive only a part (e.g. \u201cb\u201d) of an ID as the above-mentioned signal. In such a case, the receiver  searches the ID list for the ID including the part. In the case where the unique ID is not found, the receiver  further receives a signal including another part of the ID, from the transmitter . The receiver  thus obtains a larger part (e.g. \u201cbc\u201d) of the ID. The receiver  again searches the ID list for the ID including the part (e.g. \u201cbc\u201d). Through such search, the receiver  can specify the whole ID even in the case where the ID can be obtained only partially. Note that, when receiving the signal from the transmitter , the receiver  receives not only the part of the ID but also a check portion such as a CRC (Cyclic Redundancy Check).",{"@attributes":{"id":"p-0818","num":"0817"},"figref":"FIG. 62"},"A receiver  such as a smartphone obtains position information indicating the position of the receiver . For example, the receiver  obtains the position information when using a GPS or the like or receiving another signal. The receiver  also receives a signal from a transmitter  such as a lighting device. The signal includes only a part (e.g. \u201cb\u201d) of an ID. The receiver  transmits the position information and the part of the ID to a server .","The server  searches an ID list associated with the position indicated by the position information, for the ID including the part. In the case where the unique ID is not found, the server  notifies the receiver  that the specification of the ID has failed.","Following this, the receiver  receives a signal including another part of the ID, from the transmitter . The receiver  thus obtains a large part (e.g. \u201cbe\u201d) of the ID. The receiver  transmits the part (e.g. \u201cbe\u201d) of the ID and the position information to the server .","The server  searches the ID list associated with the position indicated by the position information, for the ID including the part. When the unique ID is found, the server  notifies the receiver  that the ID (e.g. \u201cabef\u201d) has been specified, and transmits information associated with the ID to the receiver .",{"@attributes":{"id":"p-0823","num":"0822"},"figref":"FIG. 63"},"The receiver  may transmit not the part of the ID but the whole ID to the server , together with the position information. In the case where the complete ID (e.g. \u201cwxyz\u201d) is not included in the ID list, the server  notifies the receiver  of an error.",{"@attributes":{"id":"p-0825","num":"0824"},"figref":"FIG. 64A"},"Transmitters and transmit a signal by changing in luminance. Here, the transmitter transmits a synchronous signal to the transmitter , thereby changing in luminance synchronously with the transmitter . Further, the transmitters and each obtain a signal from a source, and change in luminance according to the signal. There is a possibility that the time (first delay time) taken for the signal transmission from the source to the transmitter and the time (second delay time) taken for the signal transmission from the source to the transmitter are different. In view of this, the signal round-trip time between each of the transmitters and and the source is measured, and \u00bd of the round-trip time is specified as the first or second delay time. The transmitter transmits the synchronous signal so as to cancel out the difference between the first and second delay times, thereby changing in luminance synchronously with the transmitter ",{"@attributes":{"id":"p-0827","num":"0826"},"figref":"FIG. 64B"},"A light receiving sensor  detects light from the transmitters and , and outputs the result to the transmitters and as a detection signal. Having received the detection signal from the light receiving sensor , the transmitters and change in luminance synchronously or adjust the signal strength based on the detection signal.",{"@attributes":{"id":"p-0829","num":"0828"},"figref":"FIG. 65"},"A transmitter  such as a television obtains an image and an ID (ID ) associated with the image, from a control unit . The transmitter  displays the image, and also transmits the ID (ID ) to a receiver  by changing in luminance. The receiver  captures the transmitter  to receive the ID (ID ), and displays information associated with the ID (ID ). The control unit  then changes the image output to the transmitter , to another image. The control unit  also changes the ID output to the transmitter . That is, the control unit  outputs the other image and the other ID (ID ) associated with the other image, to the transmitter . The transmitter  displays the other image, and transmits the other ID (ID ) to the receiver  by changing in luminance. The receiver  captures the transmitter  to receive the other ID (ID ), and displays information associated with the other ID (ID ).",{"@attributes":{"id":"p-0831","num":"0830"},"figref":"FIG. 66"},"A transmitter  such as a signage displays images by switching between them. When displaying an image, the transmitter  transmits, to a receiver , ID time information indicating the ID corresponding to the displayed image and the time at which the image is displayed, by changing in luminance. For example, at time t, the transmitter  displays an image showing a circle, and transmits ID time information indicating the ID (ID: ) corresponding to the image and the time (TIME: t) at which the image is displayed.","Here, the transmitter  transmits not only the ID time information corresponding to the currently displayed image but also ID time information corresponding to at least one previously displayed image. For example, at time t, the transmitter  displays an image showing a square, and transmits ID time information indicating the ID (ID: ) corresponding to the image and the time (TIME: t) at which the image is displayed. At this time, the transmitter  also transmits the ID time information indicating the ID (ID: ) corresponding to the image showing the circle and the time (TIME: t) at which the image is displayed. Likewise, at time t, the transmitter  displays an image showing a triangle, and transmits ID time information indicating the ID (ID: ) corresponding to the image and the time (TIME: t) at which the image is displayed. At this time, the transmitter  also transmits the ID time information indicating the ID (ID: ) corresponding to the image showing the square and the time (TIME: t) at which the image is displayed. Thus, the transmitter  transmits a plurality of sets of ID time information at the same time.","Suppose, to obtain information related to the image showing the square, the user points an image sensor of the receiver  at the transmitter  and starts image capture by the receiver , at the time t at which the image showing the square is displayed.","Even when the receiver  starts capturing at time t, the receiver  may not be able to obtain the ID time information corresponding to the image showing the square while the image is displayed on the transmitter . Even in such a case, since the ID time information corresponding to the previously displayed image is also transmitted from the transmitter  as mentioned above, at time t the receiver  can obtain not only the ID time information (ID: , TIME: t) corresponding to the image showing the triangle but also the ID time information (ID: , TIME: t) corresponding to the image showing the square. The receiver  selects, from these ID time information, the ID time information (ID: , TIME: t) indicating the time (t) at which the receiver  is pointed at the transmitter , and specifies the ID (ID: ) indicated by the ID time information. As a result, at time t, the receiver  can obtain, from a server or the like, information related to the image showing the square based on the specified ID (ID: ).","The above-mentioned time is not limited to an absolute time, and may be a time (relative time) between the time at which the receiver  is pointed at the transmitter  and the time at which the receiver  receives the ID time information. Moreover, though the transmitter  transmits the ID time information corresponding to the previously displayed image together with the ID time information corresponding to the currently displayed image, the transmitter  may transmit ID time information corresponding to an image to be displayed in the future. Furthermore, in a situation where the reception by the receiver  is difficult, the transmitter  may transmit more sets of previous or future ID time information.","In the case where the transmitter  is not a signage but a television, the transmitter  may transmit information indicating a channel corresponding to a displayed image, instead of ID time information. In detail, in the case where an image of a television program being broadcasted is displayed on the transmitter  in real time, the display time of the image displayed on the transmitter  can be uniquely specified for each channel. Accordingly, the receiver  can specify the time at which the receiver  is pointed at the transmitter , i.e. the time at which the receiver  starts capturing, based on the captured image and the channel. The receiver  can then obtain, from a server or the like, information related to the captured image based on the channel and the time. Here, the transmitter  may transmit information indicating the display time of the displayed image, instead of ID time information. In such a case, the receiver  searches all television programs being broadcasted, for a television program including the captured image. The receiver  can then obtain, from a server or the like, information related to the image based on the channel and display time of the television program.",{"@attributes":{"id":"p-0838","num":"0837"},"figref":"FIG. 67"},"As illustrated in (a) in , a receiver  captures a transmitter  to obtain an image including a bright line, and specifies (obtains) the ID of the transmitter  from the image. The receiver  transmits the ID to a server , and obtains information associated with the ID from the server .","On the other hand, as illustrated in (b) in , the receiver  may capture the transmitter  to obtain the image including the bright line, and transmit the image to the server  as captured data. The receiver  may also perform, on the image including the bright line, such preprocessing that reduces the amount of information of the image, and transmit the preprocessed image to the server  as captured data. The preprocessing is, for instance, image binarization. Having received the captured data, the server  specifies (obtains) the ID of the transmitter  from the image indicated by the captured data. The server  then transmits the information associated with the ID to the receiver .",{"@attributes":{"id":"p-0841","num":"0840"},"figref":"FIG. 68"},"When the user is located at position A, a receiver  specifies the position of the receiver , by obtaining a signal transmitted from a transmitter  that changes in luminance. The receiver  displays a point indicating the specified position, together with an error range of the position.","Next, when the user moves from position A to position B, the receiver  cannot obtain a signal from the transmitter . The receiver  accordingly estimates the position of the receiver , using a 9-axis sensor and the like included in the receiver . The receiver  displays the point indicating the estimated position, together with the error range of the position. Since this position is estimated by the 9-axis sensor, a larger error range is displayed.","Next, when the user moves from position B to position C, the receiver  specifies the position of the receiver , by obtaining a signal transmitted from another transmitter  that changes in luminance. The receiver  displays the point indicating the specified position, together with the error range of the position. Here, the receiver  does not instantly switch the display from the point indicating the position estimated using the 9-axis sensor and its error range to the position specified as mentioned above and its error range, but smoothly switches the display with movement. The error range becomes smaller as a result.",{"@attributes":{"id":"p-0845","num":"0844"},"figref":"FIG. 69"},"The receiver  such as a smartphone (advanced mobile phone) includes an image sensor , an illuminance sensor , and a display on its front surface, as illustrated in (a) in . The image sensor obtains an image including a bright line by capturing a subject that changes in luminance as mentioned above. The illuminance sensor detects the change in luminance of the subject. Hence, the illuminance sensor can be used in place of the image sensor , depending on the state or situation of the subject. The display displays an image and the like. The receiver  may also have a function as a subject that changes in luminance. In this case, the receiver  transmits a signal by causing the display to change in luminance.","The receiver  also includes an image sensor , an illuminance sensor , and a flash light emitting unit on its back surface, as illustrated in (b) in . The image sensor is the same as the above-mentioned image sensor , and obtains an image including a bright line by capturing a subject that changes in luminance as mentioned above. The illuminance sensor is the same as the above-mentioned illuminance sensor , and detects the change in luminance of the subject. Hence, the illuminance sensor can be used in place of the image sensor , depending on the state or situation of the subject. The flash light emitting unit emits a flash for imaging. The receiver  may also have a function as a subject that changes in luminance. In this case, the receiver  transmits a signal by causing the flash light emitting unit to change in luminance.",{"@attributes":{"id":"p-0848","num":"0847"},"figref":"FIG. 70"},"A transmitter  such as a smartphone transmits information indicating \u201cCoupon 100 yen off\u201d as an example, by causing a part of a display except a barcode part to change in luminance, i.e. by visible light communication. The transmitter  also causes the barcode part to display a barcode without changing in luminance. The barcode indicates the same information as the above-mentioned information transmitted by visible light communication. The transmitter  further causes the part of the display except the barcode part to display the characters or pictures, e.g. the characters \u201cCoupon 100 yen off\u201d, indicating the information transmitted by visible light communication. Displaying such characters or pictures allows the user of the transmitter  to easily recognize what kind of information is being transmitted.","A receiver  performs image capture to obtain the information transmitted by visible light communication and the information indicated by the barcode, and transmits these information to a server . The server  determines whether or not these information match or relate to each other. In the case of determining that these information match or relate to each other, the server  executes a process according to these information. Alternatively, the server  transmits the determination result to the receiver  so that the receiver  executes the process according to these information.","The transmitter  may transmit a part of the information indicated by the barcode, by visible light communication. Moreover, the URL of the server  may be indicated in the barcode. Furthermore, the transmitter  may obtain an ID as a receiver, and transmit the ID to the server  to thereby obtain information associated with the ID. The information associated with the ID is the same as the information transmitted by visible light communication or the information indicated by the barcode. The server  may transmit an ID associated with information (visible light communication information or barcode information) transmitted from the transmitter  via the receiver , to the transmitter .",{"@attributes":{"id":"p-0852","num":"0851"},"figref":"FIG. 71"},"The transmitter  such as a smartphone transmits a signal by causing the display to change in luminance. A receiver  includes a light-resistant cone-shaped container and an illuminance sensor . The illuminance sensor is contained in the container , and located near the tip of the container . When the signal is transmitted from the transmitter  by visible light communication, the opening (bottom) of the container in the receiver  is directed to the display . Since no light other than the light from the display enters the container , the illuminance sensor in the receiver  can appropriately receive the light from the display without being affected by any light which is noise. As a result, the receiver  can appropriately receive the signal from the transmitter .",{"@attributes":{"id":"p-0854","num":"0853"},"figref":"FIG. 72"},"A transmitter  such as a bus stop sign transmits operation information indicating a bus operation state and the like to the receiver , by changing in luminance. For instance, the operation information indicating the destination of a bus, the arrival time of the bus at the bus stop, the current position of the bus, and the like is transmitted to the receiver . Having received the operation information, the receiver  displays the contents of the operation information on its display.","For example, suppose buses with different destinations stop at the bus stop. The transmitter  transmits operation information about these buses with the different destinations. Having received these operation information, the receiver  selects operation information of a bus with a destination that is frequently used by the user, and displays the contents of the selected operation information on the display. In detail, the receiver  specifies the destination of each bus used by the user through a GPS or the like, and records a history of destinations. With reference to this history, the receiver  selects operation information of a bus with a destination frequently used by the user. As an alternative, the receiver  may display the contents of operation information selected by the user from these operation information, on the display. As another alternative, the receiver  may display, with priority, operation information of a bus with a destination frequently selected by the user.",{"@attributes":{"id":"p-0857","num":"0856"},"figref":"FIG. 73"},"A transmitter  such as a signage transmits information of a plurality of shops to the receiver , by changing in luminance. This information summarizes information about the plurality of shops, and is not information unique to each shop. Accordingly, having received the information by image capture, the receiver  can display information about not only one shop but the plurality of shops. The receiver  selects information about a shop (e.g. \u201cB shop\u201d) within the imaging range from the information about the plurality of shops, and displays the selected information. When displaying the information, the receiver  translates the language for expressing the information to a language registered beforehand, and displays the information in the translated language. Moreover, a message prompting for image capture by an image sensor (camera) of the receiver  may be displayed on the transmitter  using characters or the like. In detail, a special application program is started to display, on the transmitter , a message (e.g. \u201cGet information with camera\u201d) informing that information can be provided if the transmitter  is captured by camera.",{"@attributes":{"id":"p-0859","num":"0858"},"figref":"FIG. 74"},"For example, the receiver  captures a subject including a plurality of persons  and a street lighting . The street lighting  includes a transmitter that transmits information by changing in luminance. By capturing the subject, the receiver  obtains an image in which the image of the transmitter appears as the above-mentioned bright line pattern. The receiver  obtains an AR object associated with an ID indicated by the bright line pattern, from a server or the like. The receiver  superimposes the AR object on a normal captured image  obtained by normal imaging, and displays the normal captured image  on which the AR object is superimposed.",{"@attributes":{"id":"p-0861","num":"0860"},"figref":"FIG. 75A"},"For example, information transmitted by a transmitter is made up of a preamble part, a data part of fixed length, and a check part. A receiver checks the data part using the check part, thus successfully receiving the information made up of these units. When the receiver receives the preamble part and the data part but cannot receive the check part, the receiver omits the check using the check part. Even in such a case where the check is omitted, the receiver can successfully receive the information made up of these units.",{"@attributes":{"id":"p-0863","num":"0862"},"figref":"FIG. 75B"},"For example, information transmitted by a transmitter is made up of a preamble part, a check part, and a data part of variable length. The next information transmitted by the transmitter is equally made up of the preamble part, the check part, and the data part of variable length. When a receiver receives one preamble part and the next preamble part, the receiver recognizes information from the preamble part to immediately before the next preamble part, as one set of significant information. The receiver may also use the check part, to specify the end of the data part received following the check part. In this case, even when the receiver cannot receive the above-mentioned next preamble part (all or part of the preamble part), the receiver can appropriately receive one set of significant information transmitted immediately before.",{"@attributes":{"id":"p-0865","num":"0864"},"figref":"FIG. 76"},"A transmitter modulates a transmission signal (signal to be transmitted) to a luminance change pattern by a 4-value PPM modulation scheme. When doing so, the transmitter can maintain the brightness of light that changes in luminance constant, regardless of the transmission signal.","For instance, in the case of maintaining the brightness at 75%, the transmitter modulates each of the transmission signals \u201c00\u201d, \u201c01\u201d, \u201c10\u201d, and \u201c11\u201d to a luminance change pattern in which luminance L (Low) is represented in one of four consecutive slots and luminance H (High) is represented in the other three slots. In detail, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern (L, H, H, H) in which luminance L is represented in the first slot and luminance H is represented in the second to fourth slots. In this luminance change, the luminance rises between the first and second slots. Likewise, the transmitter modulates the transmission signal \u201c01\u201d to a luminance change pattern (H, L, H, H) in which luminance L is represented in the second slot and luminance H is represented in the first, third, and fourth slots. In this luminance change, the luminance rises between the second and third slots.","In the case of maintaining the brightness at 50%, the transmitter modulates each of the transmission signals \u201c00\u201d, \u201c01\u201d, \u201c10\u201d, and \u201c11\u201d to a luminance change pattern in which luminance L (Low) is represented in two of the four slots and luminance H (High) is represented in the other two slots. In detail, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern (L, H, H, L) in which luminance L is represented in the first and fourth slots and luminance H is represented in the second and third slots. In this luminance change, the luminance rises between the first and second slots. Likewise, the transmitter modulates the transmission signal \u201c01\u201d to a luminance change pattern (L, L, H, H) in which luminance L is represented in the first and second slots and luminance H is represented in the third and fourth slots. Alternatively, the transmitter modulates the transmission signal \u201c01\u201d to a luminance change pattern (H, L, H, L) in which luminance L is represented in the second and fourth slots and luminance H is represented in the first and third slots. In this luminance change, the luminance rises between the second and third slots.","In the case of maintaining the brightness at 25%, the transmitter modulates each of the transmission signals \u201c00\u201d, \u201c01\u201d, \u201c10\u201d, and \u201c11\u201d to a luminance change pattern in which luminance L (Low) is represented in three of the four slots and luminance H (High) is represented in the other slot. In detail, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern (L, H, L, L) in which luminance L is represented in the first, third, and fourth slots and luminance H is represented in the second slot. In this luminance change, the luminance rises between the first and second slots. Likewise, the transmitter modulates the transmission signal \u201c01\u201d to a luminance change pattern (L, L, H, L) in which luminance L is represented in the first, second, and fourth slots and luminance H is represented in the third slot. In this luminance change, the luminance rises between the second and third slots.","By the above-mentioned 4-value PPM modulation scheme, the transmitter can suppress flicker, and also easily adjust the brightness in levels. Moreover, a receiver can appropriately demodulate the luminance change pattern by specifying the position at which the luminance rises. Here, the receiver does not use but ignores whether or not the luminance rises at the boundary between one slot group made up of four slots and the next slot group, when demodulating the luminance change pattern.",{"@attributes":{"id":"p-0871","num":"0870"},"figref":"FIG. 77"},"A transmitter modulates a transmission signal to a luminance change pattern, as in the 4-value PPM modulation scheme illustrated in . Here, the transmitter may perform PPM modulation without switching the luminance between L and H per slot. In detail, the transmitter performs PPM modulation by switching the position at which the luminance rises in the duration (time width) (hereafter referred to as \u201cunit duration\u201d) of four consecutive slots illustrated in , depending on the transmission signal. For example, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern in which the luminance rises at the position of 25% in the unit duration, as illustrated in . Likewise, the transmitter modulates the transmission signal \u201c01\u201d to a luminance change pattern in which the luminance rises at the position of 50% of the unit duration, as illustrated in .","In the case of maintaining the brightness at 75%, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern in which luminance L is represented in the position of 0 to 25% and luminance H is represented in the position of 25 to 100% in the unit duration. In the case of maintaining the brightness at 99%, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern in which luminance L is represented in the position of 24 to 25% and luminance H is represented in the position of 0 to 24% and the position of 25 to 100% in the unit duration. Likewise, in the case of maintaining the brightness at 1%, the transmitter modulates the transmission signal \u201c00\u201d to a luminance change pattern in which luminance L is represented in the position of 0 to 25% and the position of 26 to 100% and luminance H is represented in the position of 25 to 26% in the unit duration.","By such switching the luminance between L and H at an arbitrary position in the unit duration without switching the luminance between L and H per slot, it is possible to adjust the brightness continuously.",{"@attributes":{"id":"p-0875","num":"0874"},"figref":"FIG. 78"},"A transmitter performs modulation in the same way as in the PPM modulation scheme illustrated in . Here, regardless of the transmission signal, the transmitter modulates the signal to a luminance change pattern in which luminance H is represented at the start of the unit duration and luminance L is represented at the end of the unit duration. Since the luminance rises at the boundary between one unit duration and the next unit duration, a receiver can appropriately specify the boundary. Therefore, the receiver and the transmitter can correct clock discrepancies.",{"@attributes":{"id":"p-0877","num":"0876"},"figref":"FIG. 79A"},"For example, in the case of transmitting the header (preamble part) illustrated in , a transmitter changes in luminance according to a pattern illustrated in . In detail, in the case where the header is made up of 7 slots, the transmitter changes in luminance according to the pattern \u201cL, H, L, H, L, H, H\u201d. In the case where the header is made up of 8 slots, the transmitter changes in luminance according to the pattern \u201cH, L, H, L, H, L, H, H\u201d. These patterns are distinguishable from the luminance change patterns illustrated in , with it being possible to clearly inform a receiver that the signal indicated by any of these patterns is the header.",{"@attributes":{"id":"p-0879","num":"0878"},"figref":"FIG. 79B"},"In the 4-value PPM modulation scheme, in the case of modulating the transmission signal \u201c01\u201d included in the data part while maintaining the brightness at 50%, the transmitter modulates the signal to one of the two patterns, as illustrated in . In detail, the transmitter modulates the signal to the first pattern \u201cL, L, H, H\u201d or the second pattern \u201cH, L, H, L\u201d.","Here, suppose the luminance change pattern corresponding to the header is such a pattern as illustrated in . In this case, it is desirable that the transmitter modulates the transmission signal \u201c01\u201d to the first pattern \u201cL, L, H, H\u201d. For instance, in the case of using the first pattern, the transmission signal \u201c11, 01, 11\u201d included in the data part is modulated to the pattern \u201cH, H, L, L, L, L, H, H, H, H, L, L\u201d. In the case of using the second pattern, on the other hand, the transmission signal \u201c11, 01, 11\u201d included in the data part is modulated to the pattern \u201cH, H, L, L, H, L, H, L, H, H, L, L\u201d. The pattern \u201cH, H, L, L, H, L, H, L, H, H, L, L\u201d includes the same pattern as the pattern of the header made up of 7 slots illustrated in . For clear distinction between the header and the data part, it is desirable to modulate the transmission signal \u201c01\u201d to the first pattern.",{"@attributes":{"id":"p-0882","num":"0881"},"figref":"FIG. 80A"},"In the 4-value PPM modulation scheme, in the case of modulating the transmission signal \u201c11\u201d, the transmitter modulates the signal to the pattern \u201cH, H, H, L\u201d, the pattern \u201cH, H, L, L\u201d, or the pattern \u201cH, L, L, L\u201d so as not to cause a rise in luminance, as illustrated in . However, the transmitter may modulate the transmission signal \u201c11\u201d to the pattern \u201cH, H, H, H\u201d or the pattern \u201cL, L, L, L\u201d in order to adjust the brightness, as illustrated in .",{"@attributes":{"id":"p-0884","num":"0883"},"figref":"FIG. 80B"},"In the 4-value PPM modulation scheme, in the case of modulating the transmission signal \u201c11, 00\u201d while maintaining the brightness at 75%, the transmitter modulates the signal to the pattern \u201cH, H, H, L, L, H, H, H\u201d, as illustrated in . However, if luminance L is consecutive, each of the consecutive values of luminance L other than the last value may be changed to H so that luminance L is not consecutive. That is, the transmitter modulates the signal \u201c11, 00\u201d to the pattern \u201cH, H, H, H, L, H, H, H\u201d.","Since luminance L is not consecutive, the load on the transmitter can be reduced. Moreover, the capacitance of the capacitor included in the transmitter can be reduced, enabling a reduction in control circuit capacity. Furthermore, a lighter load on the light source of the transmitter facilitates the production of the light source. The power efficiency of the transmitter can also be enhanced. Besides, since it is ensured that luminance L is not consecutive, the receiver can easily demodulate the luminance change pattern.","An information communication method in this embodiment is an information communication method of transmitting a signal using a change in luminance, the information communication method including: determining a pattern of the change in luminance by modulating the signal to be transmitted; and transmitting the signal by a light emitter changing in luminance according to the determined pattern, wherein the pattern of the change in luminance is a pattern in which one of two different luminance values occurs in each arbitrary position in a predetermined duration, and in the determining, the pattern of the change in luminance is determined so that, for each of different signals to be transmitted, a luminance change position in the duration is different and an integral of luminance of the light emitter in the duration is a same value corresponding to preset brightness, the luminance change position being a position at which the luminance rises or a position at which the luminance falls.","In this way, the luminance change pattern is determined so that, for each of the different signals \u201c00\u201d, \u201c01\u201d, \u201c10\u201d, and \u201c11\u201d to be transmitted, the position at which the luminance rises (luminance change position) is different and also the integral of luminance of the light emitter in the predetermined duration (unit duration) is the same value corresponding to the preset brightness (e.g. 99% or 1%), for instance as illustrated in . Thus, the brightness of the light emitter can be maintained constant for each signal to be transmitted, with it being possible to suppress flicker. In addition, a receiver that captures the light emitter can appropriately demodulate the luminance change pattern based on the luminance change position. Furthermore, since the luminance change pattern is a pattern in which one of two different luminance values (luminance H (High) or luminance L (Low)) occurs in each arbitrary position in the unit duration, the brightness of the light emitter can be changed continuously.","For example, the information communication method may include sequentially displaying a plurality of images by switching between the plurality of images, wherein in the determining, each time an image is displayed in the sequentially displaying, the pattern of the change in luminance for identification information corresponding to the displayed image is determined by modulating the identification information as the signal, and in the transmitting, each time the image is displayed in the sequentially displaying, the identification information corresponding to the displayed image is transmitted by the light emitter changing in luminance according to the pattern of the change in luminance determined for the identification information.","In this way, each time an image is displayed, the identification information corresponding to the displayed image is transmitted, for instance as illustrated in . Based on the displayed image, the user can easily select the identification information to be received by the receiver.","For example, in the transmitting, each time the image is displayed in the sequentially displaying, identification information corresponding to a previously displayed image may be further transmitted by the light emitter changing in luminance according to the pattern of the change in luminance determined for the identification information.","In this way, even in the case where, as a result of switching the displayed image, the receiver cannot receive the identification signal transmitted before the switching, the receiver can appropriately receive the identification information transmitted before the switching because the identification information corresponding to the previously displayed image is transmitted together with the identification information corresponding to the currently displayed image, for instance as illustrated in .","For example, in the determining, each time the image is displayed in the sequentially displaying, the pattern of the change in luminance for the identification information corresponding to the displayed image and a time at which the image is displayed may be determined by modulating the identification information and the time as the signal, and in the transmitting, each time the image is displayed in the sequentially displaying, the identification information and the time corresponding to the displayed image may be transmitted by the light emitter changing in luminance according to the pattern of the change in luminance determined for the identification information and the time, and the identification information and a time corresponding to the previously displayed image may be further transmitted by the light emitter changing in luminance according to the pattern of the change in luminance determined for the identification information and the time.","In this way, each time an image is displayed, a plurality of sets of ID time information (information made up of identification information and a time) are transmitted, for instance as illustrated in . The receiver can easily select, from the received plurality of sets of ID time information, a previously transmitted identification signal which the receiver cannot be received, based on the time included in each set of ID time information.","For example, the light emitter may have a plurality of areas each of which emits light, and in the transmitting, in the case where light from adjacent areas of the plurality of areas interferes with each other and only one of the plurality of areas changes in luminance according to the determined pattern of the change in luminance, only an area located at an edge from among the plurality of areas may change in luminance according to the determined pattern of the change in luminance.","In this way, only the area (light emitting unit) located at the edge changes in luminance, for instance as illustrated in (a) in . The influence of light from another area on the luminance change can therefore be suppressed as compared with the case where only an area not located at the edge changes in luminance. As a result, the receiver can capture the luminance change pattern appropriately.","For example, in the transmitting, in the case where only two of the plurality of areas change in luminance according to the determined pattern of the change in luminance, the area located at the edge and an area adjacent to the area located at the edge from among the plurality of areas may change in luminance according to the determined pattern of the change in luminance.","In this way, the area (light emitting unit) located at the edge and the area (light emitting unit) adjacent to the area located at the edge change in luminance, for instance as illustrated in (b) in . The spatially continuous luminance change range has a wide area, as compared with the case where areas apart from each other change in luminance. As a result, the receiver can capture the luminance change pattern appropriately.","An information communication method in this embodiment is an information communication method of obtaining information from a subject, the information communication method including: transmitting position information indicating a position of an image sensor used to capture the subject; receiving an ID list that is associated with the position indicated by the position information and includes a plurality of sets of identification information; setting an exposure time of the image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image including the bright line, by capturing the subject that changes in luminance by the image sensor with the set exposure time; obtaining the information by demodulating data specified by a pattern of the bright line included in the obtained bright line image; and searching the ID list for identification information that includes the obtained information.","In this way, since the ID list is received beforehand, even when the obtained information \u201cbc\u201d is only a part of identification information, the appropriate identification information \u201cabcd\u201d can be specified based on the ID list, for instance as illustrated in .","For example, in the case where the identification information that includes the obtained information is not uniquely specified in the searching, the obtaining of a bright line image and the obtaining of the information may be repeated to obtain new information, and the information communication method may further include searching the ID list for the identification information that includes the obtained information and the new information.","In this way, even in the case where the obtained information \u201cb\u201d is only a part of identification information and the identification information cannot be uniquely specified with this information alone, the new information \u201cc\u201d is obtained and so the appropriate identification information \u201cabcd\u201d can be specified based on the new information and the ID list, for instance as illustrated in .","An information communication method in this embodiment is an information communication method of obtaining information from a subject, the information communication method including: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image including the bright line, by capturing the subject that changes in luminance by the image sensor with the set exposure time; obtaining identification information by demodulating data specified by a pattern of the bright line included in the obtained bright line image; transmitting the obtained identification information and position information indicating a position of the image sensor; and receiving error notification information for notifying an error, in the case where the obtained identification information is not included in an ID list that is associated with the position indicated by the position information and includes a plurality of sets of identification information.","In this way, the error notification information is received in the case where the obtained identification information is not included in the ID list, for instance as illustrated in . Upon receiving the error notification information, the user of the receiver can easily recognize that information associated with the obtained identification information cannot be obtained.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED, an organic EL device, or the like in Embodiments 1 to 3 described above, according to situation.","(Situation: In Front of Store)","An example of application in a situation where a user carrying a receiver is in front of a store bearing an advertisement sign which functions as a transmitter is described first, with reference to .",{"@attributes":{"id":"p-0907","num":"0906"},"figref":"FIG. 81"},"For example, when a user carrying a receiver  (terminal device) such as a smartphone is walking, the user finds a sign  of a store. The sign  is a transmitter (subject) that transmits a signal using a change in luminance, like the transmitter in any of Embodiments 1 to 3 described above. The user is interested in the store and, upon determining that the sign  is transmitting a signal by changing in luminance, operates the receiver  to start visible light communication application software (hereafter referred to as \u201ccommunication application\u201d) of the receiver .",{"@attributes":{"id":"p-0909","num":"0908"},"figref":"FIG. 82","b":"8300"},"The receiver  may automatically start the communication application, without being operated by the user. For example, the receiver  detects the current position of the receiver  using a GPS, a 9-axis sensor, or the like, and determines whether or not the current position is in a predetermined specific area for the sign . The specific area is an area near the sign . In the case of determining that the current position of the receiver  is in the specific area, the receiver  starts the communication application. The receiver  may also start the communication application upon detecting, through its 9-axis sensor or the like, the user sticking the receiver  out or turning the receiver . This saves the user operation, and provides ease of use.",{"@attributes":{"id":"p-0911","num":"0910"},"figref":"FIG. 83","b":"8300"},"After starting the communication application as described above, the receiver  captures (visible light imaging) the sign  that functions as a transmitter for transmitting a signal using a change in luminance. That is, the receiver  performs visible light communication with the sign .",{"@attributes":{"id":"p-0913","num":"0912"},"figref":"FIG. 84","b":"8300"},"The receiver  obtains an image including a bright line, as a result of capturing the sign . The receiver  obtains a device ID of the sign , by demodulating data specified by the pattern of the bright line. That is, the receiver  obtains the device ID from the sign , by visible light imaging or visible light communication in Embodiments 1 to 3. The receiver  transmits the device ID to a server, and obtains advertisement information (service information) associated with the device ID from the server.","The receiver  may obtain the advertisement information associated with the device ID, from a plurality of sets of advertisement information held beforehand. In this case, when determining that the current position of the receiver  is in the above-mentioned specific area, the receiver  notifies the server of the specific area or the current position, and obtains all device IDs corresponding to the specific area and advertisement information associated with each of the device IDs from the server and holds (caches) them beforehand. By doing so, upon obtaining the device ID of the sign  in the specific area, the receiver  can promptly obtain the advertisement information associated with the device ID of the sign  from the pre-stored advertisement information associated with each device ID, with no need to request the advertisement information associated with the device ID from the server.","Upon obtaining the advertisement information associated with the device ID of the sign , the receiver  displays the advertisement information. For instance, the receiver  displays a coupon and availability of the store shown by the sign  and a barcode indicating the same contents.","The receiver  may obtain not only the device ID but also privilege data from the sign  by visible light communication. For example, the privilege data indicates a random ID (random number), the time at which or period during which the privilege data is transmitted, or the like. In the case of receiving the privilege data, the receiver  transmits the privilege data to the server together with the device ID. The receiver  then obtains advertisement information associated with the device ID and the privilege data. The receiver  can thus receive different advertisement information according to the privilege data. As an example, if the sign  is captured early in the morning, the receiver  can obtain and display advertisement information indicating an early bird discount coupon. In other words, the advertisement by the same sign can be varied according to the privilege data (e.g. hours). As a result, the user can be provided with a service suitable for hours and the like. In this embodiment, the presentation (display) of information such as service information to the user is referred to as \u201cservice provision\u201d.","The receiver  may also obtain, by visible light communication, 3D information indicating the spatial placement of the sign  with high accuracy (within a tolerance of 1 m), from the sign  together with the device ID. Alternatively, the receiver  may obtain the 3D information associated with the device ID from the server. The receiver  may obtain size information indicating the size of the sign , instead of or together with the 3D information. In the case of receiving the size information, the receiver  can calculate the distance from the receiver  to the sign , based on the difference between the size of the sign  indicated by the size information and the size of the sign  shown in the captured image.","Moreover, when transmitting the device ID obtained by visible light communication to the server, the receiver  may transmit retention information (ancillary information) retained in the receiver  to the server together with the device ID. For instance, the retention information is personal information (e.g. age, sex) or a user ID of the user of the receiver . Having received the retention information together with the device ID, the server transmits advertisement information associated with the retention information (the personal information or user ID) from among one or more sets of advertisement information associated with the device ID, to the receiver . The receiver  can thus receive store advertisement information suitable for the personal information and the like, store advertisement information corresponding to the user ID, or the like. As a result, the user can be provided with a more valuable service.","As an alternative, the retention information indicates a reception condition set in the receiver  beforehand. For example, in the case where the store is a restaurant, the reception condition is the number of customers. Having received such retention information together with the device ID, the server transmits advertisement information associated with the reception condition (the number of customers) from among one or more sets of advertisement information associated with the device ID, to the receiver . The receiver  can thus receive store advertisement information suitable for the number of customers, such as availability information for the number of customers. The store can achieve customer attraction and profit optimization, by displaying advertisement information with a different discount rate according to the number of customers, the day of the week, or the time of day.","As another alternative, the retention information indicates the current position detected by the receiver  beforehand. Having received such retention information together with the device ID, the server transmits not only advertisement information associated with the device ID but also one or more other device IDs corresponding to the current position (the current position and its surroundings) indicated by the retention information and advertisement information associated with each of the other device IDs, to the receiver . The receiver  can cache the other device IDs and the advertisement information associated with each of the other device IDs. Accordingly, when the receiver  performs visible light communication with another transmitter in the current position (the current position and its surroundings), the receiver  can promptly obtain advertisement information associated with the device ID of this other transmitter, with no need to access the server.",{"@attributes":{"id":"p-0922","num":"0921"},"figref":"FIG. 85","b":"8300"},"Upon obtaining the advertisement information from the server as described above, the receiver  displays, for example, the \u201cSeats available\u201d button as the availability indicated by the advertisement information. When the user performs an operation of touching the \u201cSeats available\u201d button with his or her finger, the receiver  notifies the server of the operation. When notified of the operation, the server makes a provisional reservation at the store of the sign , and notifies the receiver  of the completion of the provisional reservation. The receiver  receives the notification from the server, and displays the character string \u201cProvisional reservation\u201d indicating the completion of the provisional reservation, instead of the \u201cSeats available\u201d button. The receiver  stores an image including: the coupon of the store shown by the sign ; the character string \u201cProvisional reservation\u201d proving the provisional reservation at the store; and a barcode indicating the same contents, in a memory as a prior obtainment image.","Here, the server can log information relating to visible light communication performed between the sign  and the receiver , by the operation described with reference to . In detail, the server can log the device ID of the transmitter (sign) performing visible light communication, the location where visible light communication is performed (the current position of the receiver ), the privilege data indicating, for example, the time when visible light communication is performed, the personal information of the user of the receiver  performing visible light communication, and so on. Through the use of at least one of these logged sets of information, the server can analyze the value of the sign , i.e. the contribution of the sign  to the advertisement of the store, as advertising effectiveness.","(Situation: In Store)","An example of application in a situation where the user carrying the receiver  enters the store corresponding to the displayed advertisement information (service information) is described next, with reference to .",{"@attributes":{"id":"p-0926","num":"0925"},"figref":"FIG. 86"},"For example, the user of the receiver  that has performed visible light communication with the above-mentioned sign  enters the store corresponding to the displayed advertisement information. At this time, the receiver  detects the user entering the store corresponding to the advertisement information displayed using visible light communication (i.e. detects the entrance). For instance, after performing visible light communication with the sign , the receiver  obtains store information indicating the location of the store associated with the device ID of the sign , from the server. The receiver  then determines whether or not the current position of the receiver  obtained using the GPS, the 9-axis sensor, or the like enters the location of the store indicated by the store information. The receiver  detects the above-mentioned entrance, by determining that the current position enters the location of the store.","Upon detecting the entrance, the receiver  notifies a display device of the entrance, via the server or the like. Alternatively, the receiver  notifies the display device of the entrance by visible light communication or wireless communication. When notified of the entrance, the display device obtains product service information indicating, for example, a menu of products or services provided in the store, and displays the menu indicated by the product service information. The display device may be a mobile terminal carried by the user of the receiver  or the store staff, or a device installed in the store.",{"@attributes":{"id":"p-0929","num":"0928"},"figref":"FIG. 87","b":"8300","i":"b "},"The user selects a desired product from the menu displayed on the display device . In detail, the user performs an operation of touching the part of the menu where the name of the desired product is displayed. The display device receives the product selection operation result.",{"@attributes":{"id":"p-0931","num":"0930"},"figref":"FIG. 88","b":"8300","i":"b "},"Upon receiving the product selection operation result, the display device displays an image representing the selected product and the price of the product. The display device thus prompts the user to confirm the selected product. The image representing the product, information indicating the price of the product, and the like are included, for example, in the above-mentioned product service information.",{"@attributes":{"id":"p-0933","num":"0932"},"figref":"FIG. 89","b":"8300"},"When prompted to confirm the selected product, the user performs an operation for ordering the product. After the operation is performed, the receiver  notifies payment information necessary for electronic payment to a POS (Point of Sale) system of the store via the display device or the server. The receiver  also determines whether or not there is the above-mentioned prior obtainment image which is obtained using visible light communication with the sign  of the store and stored. In the case of determining that there is the prior obtainment image, the receiver  displays the prior obtainment image.","Though the display device is used in this situation, the receiver  may perform the processes by the display device instead, without using the display device . In this case, upon detecting the entrance, the receiver  obtains, from the server, the product service information indicating, for example, the menu of products or services provided in the store, and displays the menu indicated by the product service information. Moreover, upon receiving the operation for ordering the product, the receiver  notifies the ordered product and the payment information necessary for electronic payment, to the POS system of the store via the server.",{"@attributes":{"id":"p-0936","num":"0935"},"figref":"FIG. 90","b":"8300"},"The store staff applies a barcode scanner  of the POS system to the barcode in the prior obtainment image displayed on the receiver . The barcode scanner  reads the barcode in the prior obtainment image. As a result, the POS system completes the electronic payment according to the coupon indicated by the barcode. The barcode scanner  of the POS system then transmits, to the receiver , payment completion information indicating the completion of the electronic payment, by changing in luminance. Thus, the barcode scanner  also has a function as a transmitter in visible light communication. The receiver  receives the payment completion information by visible light communication, and displays the payment completion information. For example, the payment completion information indicates the message \u201cThank you for your purchase\u201d and the amount paid. As a result of such electronic payment, the POS system, the server, and the receiver  can determine that, in the store corresponding to the advertisement information (service information) displayed in front of the store, the user uses the service indicated by the advertisement information.","As described above, the product in the store is ordered through the operation of the receiver , the POS system, and the like as illustrated in . Accordingly, the user who has entered the store can order the product from the menu of the store automatically displayed on the display device or the receiver . In other words, there is no need for the store staff to show the menu to the user and directly receive the order for the product from the user. This significantly reduces the burden on the store staff. Though the barcode scanner  reads the barcode in the above example, the barcode scanner  may not be used. For instance, the receiver  may transmit the information indicated by the barcode, to the POS system via the server. The receiver  may then obtain the payment completion information from the POS system via the server. This further reduces the store staff's workload, and allows the user to order the product without the store staff. Alternatively, the display device and the receiver  may transfer the order and charging data with each other by visible light communication, or transfer the data by wireless communication using a key exchanged by visible light communication.","There is the case where the sign  is displayed by one of a plurality of stores belonging to a chain. In such a case, the advertisement information obtained from the sign  using visible light communication can be used in all stores of the chain. Here, the service provided to the user may be different between a store (advertisement store) displaying the sign  and a store (non-advertisement store) not displaying the sign , even though they belong to the same chain. For example, in the case where the user enters the non-advertisement store, the user receives the service of the discount rate (e.g. 20%) according to the coupon indicated by the prior obtainment image. In the case where the user enters the advertisement store, the user receives the service of a higher discount rate (e.g. 30%) than the discount rate of the coupon. In detail, in the case of detecting the entrance into the advertisement store, the receiver  obtains additional service information indicating an additional discount of 10% from the server, and displays an image indicating a discount rate of 30% (20%+10%) instead of the prior obtainment image illustrated in . Here, the receiver  detects whether the user enters the advertisement store or the non-advertisement store, based on the above-mentioned store information obtained from the server. The store information indicates the location of each of the plurality of stores belonging to the chain, and whether the store is the advertisement store or the non-advertisement store.","In the case where a plurality of non-advertisement stores are included in the chain, the service provided to the user may be different in each of the non-advertisement stores. For instance, the service according to the distance from the position of the sign  or the current position of the receiver  when performing visible light communication with the sign  to the non-advertisement store is provided to the user entering the non-advertisement store. Alternatively, the service according to the difference (time difference) between the time at which the receiver  and the sign  perform visible light communication and the time at which the user enters the non-advertisement store is provided to the user entering the non-advertisement store. That is, the receiver  obtains, from the server, additional service information indicating an additional discount that differs depending on the above-mentioned distance (the position of the sign ) and time difference, and displays an image indicating a discount rate (e.g. 30%) on which the additional discount has been reflected, instead of the prior obtainment image illustrated in . Note that such a service is determined by the server or the POS system, or by cooperation between the server and the POS system. The service may be applied to every store belonging to the chain, regardless of whether the store is the advertisement store or the non-advertisement store.","In the case where the user enters the non-advertisement store and makes the order using the advertisement information, the POS system of the non-advertisement store may pass part of the amount earned as a result of the order, to the POS system of the advertisement store.","Each time the advertisement information is displayed, the server may determine whether or not the advertisement information is used. By collecting the determination results, the server can easily analyze the advertising effectiveness of the sign . Moreover, by collecting at least one of: the position of the sign ; the time at which the advertisement information is displayed; the position of the store in which the advertisement information is used; the time at which the advertisement information is used; and the time at which the user enters the store, the server can improve the accuracy of analyzing the advertising effectiveness of the sign , and find the position of the sign  highest in advertising effectiveness.","The receiver  may also obtain, from the server, additional service information indicating an additional discount corresponding to the number of times the advertisement information is used to order the product (the number of uses), and display an image indicating a discount rate (e.g. 30%) on which the additional discount corresponding to the number of uses has been reflected, instead of the prior obtainment image illustrated in . For example, the server may provide such a service that sets a higher discount rate when the number of uses is larger, in cooperation with the POS system.","In the case where the receiver  receives advertisement information associated with each of the device IDs of all signs  displayed by the store (i.e. in the case where the obtainment of all advertisement information is completed), the server may provide a good-value service to the user entering the store of the sign . Examples of the good-value service include a service of a very high discount rate and a service of offering a product other than the ordered product free of charge. When the receiver  detects the entrance of the user into the store, the server determines whether or not the receiver  has performed the process including visible light communication and the like on each of all signs associated with the store. In the case where the server determines that the receiver  has performed the process, the receiver  obtains additional service information indicating an additional discount from the server as the above-mentioned good-value service, and displays an image indicating a discount rate (e.g. 50%) on which the additional discount has been reflected, instead of the prior obtainment image illustrated in .","The receiver  may also obtain, from the server, additional service information indicating an additional discount that differs depending on the difference between the time at which the receiver  performs visible light communication with the sign  and displays the advertisement information and the time at which the user enters the store, and display an image indicating a discount rate (e.g. 30%) on which the additional discount has been reflected, instead of the prior obtainment image illustrated in . For instance, the receiver  obtains additional service information indicating a higher discount rate when the difference is smaller, from the server.",{"@attributes":{"id":"p-0946","num":"0945"},"figref":"FIG. 91","b":"8300"},"Having completed the order and the electronic payment, the receiver  receives a signal transmitted from a transmitter such as a lighting device in the store by changing in luminance, and transmits the signal to the server, thus obtaining an in-store guide map indicating the seat position (e.g. black circle) of the user. The receiver  also specifies the position of the receiver  using the received signal, as in any of Embodiments 1 to 3 described above. The receiver  displays the specified position (e.g. star) of the receiver  in the guide map. This enables the user to easily find the way to his or her seat.","While the user is moving, too, the receiver  frequently specifies the position of the receiver  by performing visible light communication with a nearby transmitter such as a lighting device in the store. Hence, the receiver  sequentially updates the displayed position (e.g. start) of the receiver . The user can be appropriately guided to the seat in this manner.",{"@attributes":{"id":"p-0949","num":"0948"},"figref":"FIG. 92","b":"8300"},"When the user is seated, the receiver  specifies the position of the receiver  by performing visible light communication with a transmitter  such as a lighting device, and determines that the position is the seat position of the user. The receiver  notifies, together with the user name or nickname, that the user is seated, to a terminal in the store via the server. This enables the store staff to recognize which seat the user is in.",{"@attributes":{"id":"p-0951","num":"0950"},"figref":"FIG. 93","b":"8300"},"The transmitter  transmits a signal including a customer ID and a message informing that the ordered product is ready, by changing in luminance. Note that, for example when obtaining the product service information indicating the product menu and the like from the server, the receiver  also obtains the customer ID from the server and holds it. The receiver  receives the signal, by performing visible light imaging on the transmitter . The receiver  determines whether or not the customer ID included in the signal matches the customer ID held beforehand. In the case of determining that they match, the receiver  displays the message (e.g. \u201cYour order is ready\u201d) included in the signal.",{"@attributes":{"id":"p-0953","num":"0952"},"figref":"FIG. 94","b":"8300"},"The store staff, having delivered the ordered product to the user's seat, directs a handheld terminal to the receiver  in order to prove that the ordered product has been delivered. The handheld terminal functions as a transmitter. The handheld terminal transmits, to the receiver , a signal indicating the delivery of the ordered product by changing in luminance. The receiver  captures the handheld terminal to receive the signal, and displays a message (e.g. \u201cPlease enjoy your meal\u201d) indicated by the signal.","(Situation: Store Search)","An example of application in a situation where the user carrying the receiver  is searching for a store of interest is described below, with reference to .",{"@attributes":{"id":"p-0956","num":"0955"},"figref":"FIG. 95","b":"8300"},"The user finds a signage  showing restaurants of interest. Upon determining that the signage  is transmitting a signal by changing in luminance, the user operates the receiver  to start the communication application of the receiver , as in the example illustrated in . Alternatively, the receiver  may automatically start the communication application as in the example illustrated in .",{"@attributes":{"id":"p-0958","num":"0957"},"figref":"FIG. 96","b":"8300"},"The receiver  captures the entire signage  or a part of the signage  showing a restaurant of the user's interest, to receive an ID for identifying the signage  or the restaurant.",{"@attributes":{"id":"p-0960","num":"0959"},"figref":"FIG. 97","b":"8300"},"Upon receiving the ID mentioned above, the receiver  transmits the ID to the server, and obtains advertisement information (service information) associated with the ID from the server and displays it. Here, the receiver  may notify the number of people (ancillary information) who are about to enter the restaurant, to the server together with the ID. As a result, the receiver  can obtain advertisement information corresponding to the number of people. For example, the receiver  can obtain advertisement information indicating that seats are available in the restaurant for the notified number of people.","(Situation: Movie Advertisement)","An example of application in a situation where the user carrying the receiver  is in front of a signage including a movie advertisement of interest is described below, with reference to .",{"@attributes":{"id":"p-0963","num":"0962"},"figref":"FIG. 98","b":"8300"},"The user finds a signage  including a movie advertisement of interest, and a signage  such as a liquid crystal display for displaying movie advertisement video. The signage  includes, for example, a transparent film on which an image representing the movie advertisement is drawn, and a plurality of LEDs arranged on the back side of the film and lights the film. That is, the signage  brightly displays the image drawn on the film by the light emission from the plurality of LEDs, as a still image. The signage  is a transmitter for transmitting a signal by changing in luminance.","Upon determining that the signage  is transmitting a signal by changing in luminance, the user operates the receiver  to start the communication application of the receiver , as in the example illustrated in . Alternatively, the receiver  may automatically start the communication application as in the example illustrated in .",{"@attributes":{"id":"p-0966","num":"0965"},"figref":"FIG. 99","b":"8300"},"The receiver  captures the signage , to obtain the ID of the signage . The receiver  transmits the ID to the server, downloads movie advertisement video data associated with the ID from the server as service information, and reproduces the video.",{"@attributes":{"id":"p-0968","num":"0967"},"figref":"FIG. 100","b":"8300"},"Video displayed by reproducing the downloaded video data as mentioned above is the same as the video displayed by the signage  as an example. Accordingly, in the case where the user wants to watch the movie advertisement video, the user can watch the video in any location without stopping in front of the signage .",{"@attributes":{"id":"p-0970","num":"0969"},"figref":"FIG. 101","b":"8300"},"The receiver  may download not only the video data but also showing information indicating the showtimes of the movie and the like together with the video data, as service information. The receiver  can then display the showing information to inform the user, and also share the showing information with other terminals (e.g. other smartphones).","(Situation: Museum)","An example of application in a situation where the user carrying the receiver  enters a museum to appreciate each exhibit in the museum is described below, with reference to .",{"@attributes":{"id":"p-0973","num":"0972"},"figref":"FIG. 102","b":"8300"},"For example, when entering the museum, the user finds a signboard  on the entrance of the museum. Upon determining that the signboard  is transmitting a signal by changing in luminance, the user operates the receiver  to start the communication application of the receiver , as in the example illustrated in . Alternatively, the receiver  may automatically start the communication application as in the example illustrated in .",{"@attributes":{"id":"p-0975","num":"0974"},"figref":"FIG. 103","b":"8300"},"The receiver  captures the signboard , to obtain the ID of the signboard . The receiver  transmits the ID to the server, downloads a guide application program of the museum (hereafter referred to as \u201cmuseum application\u201d) from the server as service information associated with the ID, and starts the museum application.",{"@attributes":{"id":"p-0977","num":"0976"},"figref":"FIG. 104","b":"8300"},"After the museum application starts, the receiver  displays a museum guide map according to the museum application. The receiver  also specifies the position of the receiver  in the museum, as in any of Embodiments 1 to 3 described above. The receiver  displays the specified position (e.g. star) of the receiver  in the guide map.","To specify the position as mentioned above, the receiver  obtains form information indicating the size, shape, and the like of the signboard  from the server, for example when downloading the museum application. The receiver  specifies the relative position of the receiver  to the signboard  by triangulation or the like, based on the size and shape of the signboard  indicated by the form information and the size and shape of the signboard  shown in the captured image.",{"@attributes":{"id":"p-0980","num":"0979"},"figref":"FIG. 105","b":"8300"},"When the user enters the museum, the receiver  which has started the museum application as mentioned above frequently specifies the position of the receiver  by performing visible light communication with a nearby transmitter such as a lighting device in the museum. For example, the receiver  captures a transmitter  such as a lighting device, to obtain the ID of the transmitter  from the transmitter . The receiver  then obtains position information indicating the position of the transmitter  and form information indicating the size, shape, and the like of the transmitter  which are associated with the ID, from the server. The receiver  estimates the relative position of the receiver  to the transmitter  by triangulation or the like, based on the size and shape of the transmitter  indicated by the form information and the size and shape of the transmitter  shown in the captured image. The receiver  also specifies the position of the receiver  in the museum, based on the position of the transmitter  indicated by the position information obtained from the server and the estimated relative position of the receiver .","Each time the position of the receiver  is specified, the receiver  moves the displayed star to the specified new position. The user who has entered the museum can easily know his or her position in the museum, from the guide map and the star displayed on the receiver .",{"@attributes":{"id":"p-0983","num":"0982"},"figref":"FIG. 106","b":"8300"},"The user who has entered the museum, upon finding an exhibit  of interest, performs an operation of pointing the receiver  at the exhibit  so that the receiver  can capture the exhibit . Here, the exhibit  is lit by light from a lighting device . The lighting device  is used exclusively for the exhibit , and is a transmitter for transmitting a signal by changing in luminance. Accordingly, the exhibit  which is lit by the light changing in luminance is indirectly transmitting the signal from the lighting device .","Upon detecting the operation of pointing the receiver  at the exhibit  based on the output from the internal 9-axis sensor or the like, the receiver  captures the exhibit  to receive the signal from the lighting device . The signal indicates the ID of the exhibit , as an example. The receiver  then obtains introduction information (service information) of the exhibit  associated with the ID, from the server. The introduction information indicates a figure for introducing the exhibit , and text for introduction in the language of each country such as Japanese, English, and French.","Having obtained the introduction information from the server, the receiver  displays the figure and the text indicated by the introduction information. When displaying the text, the receiver  extracts text of a language set by the user beforehand from among text of each language, and displays only the text of the language. The receiver  may change the language according to a selection operation by the user.",{"@attributes":{"id":"p-0987","num":"0986"},"figref":"FIG. 107","b":"8300"},"After the display of the figure and the text in the introduction information ends according to a user operation, the receiver  again specifies the position of the receiver  by performing visible light communication with a nearby transmitter such as a lighting device (e.g. a lighting device ). Upon specifying the new position of the receiver , the receiver  moves the displayed star to the specified new position. Hence, the user who has appreciated the exhibit  can easily move to the next exhibit of interest, by referring to the guide map and the star displayed on the receiver .","(Situation: Bus Stop)","An example of application in a situation where the user carrying the receiver  is at a bus stop is described below, with reference to .",{"@attributes":{"id":"p-0990","num":"0989"},"figref":"FIG. 108","b":"8300"},"For example, the user goes to the bus stop to ride a bus. Upon determining that a sign  at the bus stop is transmitting a signal by changing in luminance, the user operates the receiver  to start the communication application of the receiver , as in the example illustrated in . Alternatively, the receiver  may automatically start the communication application as in the example illustrated in .",{"@attributes":{"id":"p-0992","num":"0991"},"figref":"FIG. 109","b":"8300"},"The receiver  captures the sign , to obtain the ID of the bus stop where the sign  is placed. The receiver  transmits the ID to the server, and obtains operation state information associated with the ID from the server. The operation state information indicates the traffic state, and is service information indicating a service provided to the user.","Here, the server collects information from each bus operating in an area including the bus stop, to manage the operation state of each bus. Hence, upon obtaining the ID of the bus stop from the receiver , the server estimates the time at which a bus arrives at the bus stop of the ID based on the managed operation state, and transmits the operation state information indicating the estimated time to the receiver .","Having obtained the operation state information, the receiver  displays the time indicated by the operation state information in a form such as \u201cArriving in 10 minutes\u201d. This enables the user to easily recognize the operation state of the bus.","(Supplementary Note)","In the case where the scan direction on the imaging side is the vertical direction (up-down direction) of a mobile terminal, when an LED lighting device is captured with a shorter exposure time, bright lines of a black and white pattern can be captured in the same direction as the scan direction for ON\/OFF of the entire LED lighting device, as illustrated in (a) in . In (a) in , a vertically long LED lighting device is captured so that its longitudinal direction is perpendicular to the scan direction on the imaging side (the left-right direction of the mobile terminal), and therefore many bright lines of the black and white pattern can be captured in the same direction as the scan direction. In other words, a larger amount of information can be transmitted and received. On the other hand, in the case where the vertically long LED lighting device is captured so as to be parallel to the scan direction on the imaging side (the up-down direction of the mobile terminal) as illustrated in (b) in , the number of bright lines of the black and white pattern that can be captured decreases. In other words, the amount of information that can be transmitted decreases.","Thus, depending on the direction of the LED lighting device with respect to the scan direction on the imaging side, many bright lines of the black and white pattern can be captured (in the case where the vertically long LED lighting device is captured so that its longitudinal direction is perpendicular to the scan direction on the imaging side) or only a few bright lines of the black and white pattern can be captured (in the case where the vertically long LED lighting device is captured so that its longitudinal direction is parallel to the scan direction on the imaging side).","This embodiment describes a lighting device control method capable of capturing many bright lines even in the case where only a few bright lines of the black and white pattern can be captured.",{"@attributes":{"id":"p-0999","num":"0998"},"figref":["FIG. 111","FIG. 111"]},"(c) and (d) in  illustrate an example of generating the black and white pattern and turning each LED element ON or OFF for lighting. When the lighting device lights as the black and white pattern, the light may become not uniform even in a short time. In view of this, an example of generating a reverse phase pattern and performing lighting alternately between the two patterns is illustrated in (c) and (d) in . Each element that is ON in (c) in  is OFF in (d) in , whereas each element that is OFF in (c) in  is ON in (d) in . By lighting in the black and white pattern alternately between the normal phase pattern and the reverse phase pattern in this way, a lot of information can be transmitted and received in visible light communication, without causing the light to become not uniform and without being affected by the relation between the scan direction on the imaging side and the direction of the lighting device. The present disclosure is not limited to the case of alternately generating two types of patterns, i.e. the normal phase pattern and the reverse phase pattern, for lighting, as three or more types of patterns may be generated for lighting.  illustrates an example of lighting in four types of patterns in sequence.","A structure in which usually the entire LED lighting blinks ((b) in ) and, only for a predetermined time, the black and white pattern is generated to perform lighting on an LED element basis is also available. As an example, the entire LED lighting blinks for a transmission and reception time of a predetermined data part, and subsequently lighting is performed in the black and white pattern on an LED element basis for a short time. The predetermined data part is, for instance, a data part from the first header to the next header. In this case, when the LED lighting is captured in the direction in (a) in , a signal is received from bright lines obtained by capturing the blink of the entire LED lighting. When the LED lighting is captured in the direction in (b) in , a signal is received from a light emission pattern on an LED element basis.","This embodiment is not limited to an LED lighting device, and is applicable to any device whose ON\/OFF can be controlled in units of small elements like LED elements. Moreover, this embodiment is not limited to a lighting device, and is applicable to other devices such as a television, a projector, and a signage.","Though an example of lighting in the black and white pattern is described in this embodiment, colors may be used instead of the black and white pattern. As an example, in RGB, blink may be performed using only B, while R and G are constantly ON. The use of only B rather than R or G prevents recognition by humans, and therefore suppresses flicker. As another example, additive complementary colors (e.g. a red and cyan pattern, a green and magenta pattern, a yellow and blue pattern) may be used to display ON\/OFF, instead of the black and white pattern. The use of additive complementary colors suppresses flicker.","Though an example of one-dimensionally arranging LED elements is described in this embodiment, LED elements may be arranged not one-dimensionally but two-dimensionally so as to be displayed like a 2D barcode.","A service provision method in this embodiment is a service provision method of providing, using a terminal device that includes an image sensor having a plurality of exposure lines, a service to a user of the terminal device, the service provision method including: obtaining image data, by starting exposure sequentially for the plurality of exposure lines in the image sensor each at a different time and capturing a subject with an exposure time less than or equal to 1\/480 second so that an exposure time of each of the plurality of exposure lines partially overlaps an exposure time of an adjacent one of the plurality of exposure lines; obtaining identification information of the subject, by demodulating a bright line pattern that appears in the image data, the bright line pattern corresponding to the plurality of exposure lines; and presenting service information associated with the identification information of the subject, to the user.","In this way, through the use of communication between the subject and the terminal device respectively as a transmitter and a receiver, the service information relating to the subject can be presented to the user of the terminal device. The user can thus be provided with information variable to the user in various forms, as a service. For example, in the presenting, at least one of: information indicating an advertisement, availability, or reservation status of a store relating to the subject; information indicating a discount rate of a product or a service; movie advertisement video; information indicating a showtime of a movie; information for guiding in a building; information for introducing an exhibit; and information indicating a traffic state may be presented as the service information.","For example, the service provision method may further include: transmitting, by the terminal device, the identification information of the subject to a server; and obtaining, by the terminal device, the service information associated with the identification information of the subject from the server, wherein in the presenting, the terminal device presents the obtained service information to the user.","In this way, the service information can be managed in the server in association with the identification information of the subject, which contributes to ease of maintenance such as service information update.","For example, in the transmitting, ancillary information may be transmitted to the server together with the identification information of the subject, and in the obtaining of the service information, the service information associated with the identification information of the subject and the ancillary information may be obtained.","In this way, a more suitable service for the user can be provided according to the ancillary information. For example, in the transmitting, personal information of the user, identification information of the user, number information indicating the number of people of a group including the user, or position information indicating a position of the terminal device may be transmitted as the ancillary information, as in the operation described with reference to .","For example, the service provision method may further include: transmitting, by the terminal device, position information indicating a position of the terminal device to the server; and obtaining, by the terminal device, one or more sets of identification information of respective one or more devices located in a predetermined range including the position indicated by the position information and one or more sets of service information respectively associated with the one or more sets of identification information, from the server and holding the one or more sets of identification information and the one or more sets of service information, wherein in the presenting, the terminal device selects service information associated with the identification information of the subject from the one or more sets of service information held in the obtaining of the identification information, and presents the service information to the user.","In this way, when the terminal device obtains the identification information of the subject, the terminal device can obtain the service information associated with the identification information of the subject from the one or more sets of service information held beforehand and present the service information without communicating with the server or the like, as in the operation described with reference to  as an example. Faster service provision can therefore be achieved.","For example, the service provision method may further include: determining whether or not the user enters a store corresponding to the service information presented in the presenting, by specifying a position of the user; and in the case of determining that the user enters the store, obtaining, by the terminal device, product service information relating to a product or a service of the store from the server, and presenting the product service information to the user.","In this way, when the user enters the store, the menu of the store or the like can be automatically presented to the user as the product service information, as in the operation described with reference to  as an example. This saves the need for the store staff to present the menu or the like to the user, and enables the user to make an order to the store in a simple manner.","For example, the service provision method may further include: determining whether or not the user enters a store corresponding to the service information presented in the presenting, by specifying a position of the user; and in the case of determining that the user enters the store, presenting, by the terminal device, additional service information of the store to the user, the additional service information being different depending on at least one of the position of the subject and a time at which the service information is presented.","In this way, when the subject is closer to the store which the user enters or when the time at which the user enters the store and the time at which the service information is presented (or the time at which the subject is captured) are closer to each other, service information more valuable to the user can be presented to the user as the additional service information, as in the process described with reference to  as an example. Suppose each of a plurality of stores belonging to a chain is a store corresponding to the presented service information, and a sign which is the subject is displayed by one (advertisement store) of the plurality of stores. In such a case, the advertisement store is usually closest to the subject (sign) from among the plurality of stores belonging to the chain. Accordingly, when the subject is closer to the store which the user enters or when the time at which the user enters the store and the time at which the service information is presented are closer to each other, there is a high possibility that the store which the user enters is the advertisement store. In the case where there is a high possibility that the user enters the advertisement store, service information more valuable to the user can be presented to the user as the additional service information.","For example, the service provision method may further include: determining whether or not the user enters a store corresponding to the service information presented in the presenting, by specifying a position of the user; and in the case of determining that the user enters the store, presenting, by the terminal device, additional service information of the store to the user, the additional service information being different depending on the number of times the user uses a service indicated by the service information in the store.","In this way, when the number of times the service is used is larger, service information more valuable to the user can be presented to the user as the additional service information, as in the operation described with reference to  as an example. For instance, when the number of uses of service information indicating 20% product price discount exceeds a threshold, additional service information indicating additional 10% discount can be presented to the user.","For example, the service provision method may further include: determining whether or not the user enters a store corresponding to the service information presented in the presenting, by specifying a position of the user; in the case of determining that the user enters the store, determining whether or not a process including the obtaining of image data, the obtaining of identification information, and the presenting is also performed for all subjects associated with the store other than the subject; and presenting, by the terminal device, additional service information of the store to the user in the case of determining that the process is performed.","In this way, for instance in the case where the store displays several subjects as signs and the obtaining of image data, the obtaining of identification information, and the presenting have been performed for all of these signs, service information most valuable to the user can be presented to the user as the additional service information, as in the operation described with reference to  as an example.","For example, the service provision method may further include: determining whether or not the user enters a store corresponding to the service information presented in the presenting, by specifying a position of the user; and in the case of determining that the user enters the store, presenting, by the terminal device, additional service information of the store to the user, the additional service information being different depending on a difference between a time at which the service information is presented and a time at which the user enters the store.","In this way, when the difference between the time at which the service information is presented (or the time at which the subject is captured) and the time at which the user enters the store is smaller, service information more valuable to the user can be presented to the user as the additional service information, as in the operation described with reference to  as an example. That is, the time from when the service information is presented to the user as a result of capturing the subject to when the user enters the store is shorter, the user is additionally provided with a more valuable service.","For example, the service provision method may further include: determining whether or not the user uses a service indicated by the service information in a store corresponding to the service information presented in the presenting; and accumulating, each time the service information is presented, a determination result in the determining, and analyzing an advertising effect of the subject based on an accumulation result.","In this way, in the case where the service information indicates a service such as 20% product price discount or the like, it is determined whether or not the service is used by electronic payment or the like, as in the operation described with reference to  as an example. Thus, each time the service is provided to the user upon capturing the subject, whether or not the service is used is determined. As a result, the advertising effect of the subject is analyzed as high in the case where, for example, it is frequently determined that the service is used. Hence, the advertising effect of the subject can be appropriately analyzed based on the use result.","For example, in the analyzing, at least one of a position of the subject, a time at which the service information is presented, a position of the store, and a time at which the user enters the store may be accumulated together with the determination result in the determining, to analyze the advertising effect of the subject based on an accumulation result.","In this way, the advertising effect of the subject can be analyzed in more detail. For instance, in the case where the position of the subject is changed, it is possible to compare the advertising effect between the original position and the changed position, as a result of which the subject can be displayed at a position with higher advertising effectiveness.","For example, the service provision method may further include: determining whether or not the user uses a service indicated by the service information in a store corresponding to the service information presented in the presenting; in the case of determining that the user uses the service, determining whether or not a used store which is the store where the service is used is a specific store associated with the subject; and in the case of determining that the used store is not the specific store, returning at least a part of an amount paid for using the service in the store, to the specific store using electronic commerce.","In this way, even in the case where the service is not used in the specific store (e.g. the advertisement store displaying the sign which is the subject), the specific store can earn a profit for the cost of installing the sign which is the subject, as in the operation described with reference to  as an example.","For example, in the presenting, the terminal device may present the service information for introducing the subject to the user in the case where the subject lit by light changing in luminance is captured in the obtaining of the image data, and the terminal device may present the service information for guiding in a building in which the subject is placed in the case where a lighting device changing in luminance is captured as the subject in the obtaining of the image data.","In this way, a guide service in a building such as a museum and an introduction service for an exhibit which is the subject can be appropriately provided to the user, as in the operation described with reference to  as an example.","An information communication method in this embodiment is an information communication method of obtaining information from a subject having a plurality of light emitting elements, the information communication method including: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a bright line corresponding to an exposure line included in the image sensor appears according to a change in luminance of the subject; obtaining a bright line image by capturing, by the image sensor with the set exposure time, the subject in which the plurality of light emitting elements all change in luminance in the same manner according to a pattern of the change in luminance for representing first information, the bright line image being an image including the bright line; obtaining the first information by demodulating data specified by a pattern of the bright line included in the obtained bright line image; and obtaining second information, by capturing the subject in which each of the plurality of light emitting elements emits light with one of two different luminance values and demodulating data specified by a light and dark sequence of luminance along a direction parallel to the exposure line, the light and dark sequence being shown in an image obtained by capturing the subject.","Alternatively, an information communication method in this embodiment is an information communication method of transmitting a signal using a change in luminance, the information communication method including: determining a pattern of the change in luminance, by modulating a first signal to be transmitted; transmitting the first signal, by all of a plurality of light emitting elements in a light emitter changing in luminance in the same manner according to the determined pattern of the change in luminance; and transmitting a second signal to be transmitted, by each of the plurality of light emitting elements emitting light with one of two different luminance values so that a light and dark sequence of luminance appears in a space where the light emitter is placed.","In this way, even when a lighting device which is the subject or the light emitter has a long and thin shape including a plurality of LEDs arranged in a line, the receiver can appropriately obtain the information or signal from the lighting device regardless of the imaging direction, as in the operation described with reference to  as an example. In detail, in the case where the exposure line (the operation direction on the imaging side) of the image sensor included in the receiver is not parallel to the arrangement direction of the plurality of LEDs, the receiver can appropriately obtain the information or signal from the luminance change of the entire lighting device. Even in the case where the exposure line is parallel to the arrangement direction, the receiver can appropriately obtain the information or signal from the light and dark sequence of luminance along the direction parallel to the exposure line. In other words, the dependence of information reception on the imaging direction can be reduced.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED, an organic EL device, or the like in Embodiments 1 to 4 described above.",{"@attributes":{"id":"p-1035","num":"1034"},"figref":"FIG. 113"},"Transmitters , , and  each have the same function as the transmitter in any of Embodiments 1 to 4 described above, and is a lighting device that transmits a signal by changing in luminance (visible light communication). The transmitters  to  each transmit a signal by changing in luminance at a different frequency. For example, the transmitter  transmits the ID \u201c1000\u201d of the transmitter , by changing in luminance at frequency a (e.g. 9200 Hz). The transmitter  transmits the ID \u201c2000\u201d of the transmitter , by changing in luminance at frequency b (e.g. 9600 Hz). The transmitter  transmits the ID \u201c3000\u201d of the transmitter , by changing in luminance at frequency c (e.g. 10000 Hz).","A receiver captures (visible light imaging) the transmitters  to  so that the transmitters  to  are all included in the angle of view, in the same way as in Embodiments 1 to 4. A bright line pattern corresponding to each transmitter appears in an image obtained as a result of image capture. It is possible to specify, from the bright line pattern, the luminance change frequency of the transmitter corresponding to the bright line pattern.","Suppose the frequencies of the transmitters  to  are the same. In such a case, the same frequency is specified from the bright line pattern corresponding to each transmitter. In the case where these bright line patterns are adjacent to each other, it is difficult to distinguish between the bright line patterns because the frequency specified from each of the bright line patterns is the same.","In view of this, the transmitters  to  each change in luminance at a different frequency, as mentioned above. As a result, the receiver can easily distinguish between the bright line patterns and, by demodulating data specified by each bright line pattern, appropriately obtain the ID of each of the transmitters  to . Thus, the receiver can appropriately distinguish between the signals from the transmitters  to .","The frequency of each of the transmitters  to  may be set by a remote control, and may be set randomly. Each of the transmitters  to  may communicate with its adjacent transmitter, and automatically set the frequency of the transmitter so as to be different from the frequency of the adjacent transmitter.",{"@attributes":{"id":"p-1041","num":"1040"},"figref":"FIG. 114"},"In the above example, each transmitter changes in luminance at a different frequency. In the case where there are at least five transmitters, however, each transmitter need not change in luminance at a different frequency. In detail, each of the at least five transmitters may change in luminance at any one of four types of frequencies.","For example as illustrated in , even in a situation where the bright line patterns (rectangles in ) respectively corresponding to the at least five transmitters are adjacent, the same number of types of frequencies as the number of transmitters are not needed. So long as there are four types (frequencies a, b, c, and d), it can be ensured that the frequencies of adjacent bright line patterns are different. This is reasoned by the four color theorem or the four color problem.","In detail, in this embodiment, each of the plurality of transmitters changes in luminance at any one of at least four types of frequencies, and two or more light emitters of the plurality of transmitters change in luminance at the same frequency. Moreover, the plurality of transmitters each change in luminance so that the luminance change frequency is different between all transmitters (bright line patterns as transmitter images) which, in the case where the plurality of transmitters are projected on the light receiving surface of the image sensor of the receiver, are adjacent to each other on the light receiving surface.",{"@attributes":{"id":"p-1045","num":"1044"},"figref":"FIG. 115"},"A transmitter changes in luminance to output high-luminance light (H) or low-luminance light (L) per predetermined time unit (slot), thereby transmitting a signal. Here, the transmitter transmits a signal for each block made up of a header and a body. The header is expressed as (L, H, L, H, L, H, H) using seven slots, as illustrated in  as an example. The body is made up of a plurality of symbols (00, 01, 10, or 11), where each symbol is expressed using four slots (4-value PPM). The block is expressed using a predetermined number (19 in the example in ) of slots. For instance, an ID is obtained by combining the body included in each of four blocks. The block may instead be expressed using 33 slots.","A bright line pattern obtained by image capture by a receiver includes a pattern (header pattern) corresponding to the header and a pattern (data pattern) corresponding to the body. The data pattern does not include the same pattern as the header pattern. Accordingly, the receiver can easily find the header pattern from the bright line pattern, and measure the number of pixels between the header pattern and the next header pattern (the number of exposure lines corresponding to the block). Since the number of slots per block (19 in the example in ) is set to a fixed number regardless of the frequency, the receiver can specify the frequency (the inverse of the duration of one slot) of the transmitter according to the measured number of pixels. That is, the receiver specifies a lower frequency when the number of pixels is larger, and a higher frequency when the number of pixels is smaller.","Thus, by capturing the transmitter, the receiver can obtain the ID of the transmitter, and also specify the frequency of the transmitter. Through the use of the specified frequency, the receiver can determine whether or not the obtained ID is correct, that is, perform error detection on the ID. In detail, the receiver calculates a hash value for the ID, and compares the hash value with the specified frequency. In the case where the hash value and the frequency match, the receiver determines that the obtained ID is correct. In the case where the hash value and the frequency do not match, the receiver determines that the obtained ID is incorrect (error). For instance, the receiver uses the remainder when dividing the ID by a predetermined divisor, as the hash value. Conversely, the transmitter transmits the ID, by changing in luminance at the frequency (the inverse of the duration of one slot) of the same value as the hash value for the ID.",{"@attributes":{"id":"p-1049","num":"1048"},"figref":"FIG. 116"},"The transmitter may change in luminance using an arbitrary frequency, instead of using the frequency of the same value as the hash value as mentioned above. In this case, the transmitter transmits a signal indicating a value different from the ID of the transmitter. For example, in the case where the ID of the transmitter is \u201c100\u201d and the transmitter uses 2 kHz as an arbitrary frequency, the transmitter transmits the signal \u201c1002\u201d that combines the ID and the frequency. Likewise, in the case where the ID of another transmitter is \u201c110\u201d and this other transmitter uses 1 kHz as an arbitrary frequency, the other transmitter transmits the signal \u201c1101\u201d that combines the ID and the frequency.","In such a case, the receiver uses the value of the last digit of the signal obtained from the transmitter for error detection, and extracts the value of the other digits as the ID of the transmitter. The receiver compares the frequency specified from the luminance pattern and the value of the last digit of the obtained signal. In the case where the value of the last digit and the frequency match, the receiver determines that the extracted ID is correct. In the case where the value of the last digit and the frequency do not match, the receiver determines that the extracted ID is incorrect (error).","In this way, the degree of freedom in setting the luminance change frequency in the transmitter can be increased, while enabling error detection in the receiver.",{"@attributes":{"id":"p-1053","num":"1052"},"figref":"FIG. 117"},"As illustrated in , there is the case where, in an image obtained by image capture (visible light imaging) by the receiver, a part of a bright line pattern and a part of a bright line pattern overlap each other. In such a case, the receiver does not demodulate data from an overlapping part of the bright line patterns and , and demodulates data from the parts of the bright line patterns and other than the part . By doing so, the receiver can obtain an appropriate ID from each of the bright line patterns and ",{"@attributes":{"id":"p-1055","num":"1054"},"figref":"FIG. 118"},"The transmitter switches, for each block as an example, the luminance change frequency for transmitting the block, as illustrated in (a) in . This enables the receiver to detect the block boundary more easily.","Moreover, the transmitter uses different frequencies as the luminance change frequency for transmitting the header of the block and the luminance change frequency for transmitting the body of the block as an example, as illustrated in (b) in . This prevents the same pattern as the header from occurring in the body. As a result, the receiver can distinguish between the header and the body more appropriately.",{"@attributes":{"id":"p-1058","num":"1057"},"figref":"FIG. 119"},"The system in this embodiment includes a transmitter , a receiver , and a server . The transmitter  has the same function as the transmitter in any of Embodiments 1 to 4 described above, and is a lighting device that transmits the ID of the transmitter  by changing in luminance (visible light communication). The receiver  has the same function as the receiver in any of Embodiments 1 to 4 described above, and obtains the ID of the transmitter  from the transmitter  by capturing the transmitter  (visible light imaging). The server  communicates with the transmitter  and the receiver  via a network such as the Internet.","Note that, in this embodiment, the ID of the transmitter  is fixed without a change. Meanwhile, the frequency used for the luminance change (visible light communication) of the transmitter  can be arbitrarily changed by setting.","In such a system, first the transmitter  registers the frequency used for the luminance change (visible light communication), in the server . In detail, the transmitter  transmits the ID of the transmitter , registered frequency information indicating the frequency of the transmitter , and related information relating to the transmitter , to the server . Upon receiving the ID, registered frequency information, and related information of the transmitter , the server  records them in association with each other. That is, the ID of the transmitter , the frequency used for the luminance change of the transmitter , and the related information are recorded in association with each other. The frequency used for the luminance change of the transmitter  is registered in this way.","Next, the transmitter  transmits the ID of the transmitter , by changing in luminance at the registered frequency. The receiver  captures the transmitter  to obtain the ID of the transmitter , and specifies the luminance change frequency of the transmitter  as mentioned above.","The receiver  then transmits the obtained ID and specified frequency information indicating the specified frequency, to the server . Upon receiving the ID and the specified frequency information transmitted from the receiver , the server  searches for the frequency (the frequency indicated by the registered frequency information) recorded in association with the ID, and determines whether or not the recorded frequency and the frequency indicated by the specified frequency information match. In the case of determining that the frequencies match, the server  transmits the related information (data) recorded in association with the ID and the frequency, to the receiver .","If the frequency specified by the receiver  does not match the frequency registered in the server , the related information is not transmitted from the server  to the receiver . Therefore, by changing the frequency registered in the server  according to need, it is possible to prevent a situation where, once the receiver  has obtained the ID from the transmitter , the receiver  can receive the related information from the server  at any time. In detail, by changing the frequency registered in the server  (i.e. the frequency used for the luminance change), the transmitter  can prohibit the receiver  that has obtained the ID before the change, from obtaining the related information. In other words, by changing the frequency, it is possible to set a time limit for the obtainment of the related information. As an example, in the case where the user of the receiver  stays at a hotel in which the transmitter  is installed, an administrator in the hotel changes the frequency after the stay. Hence, the receiver  can obtain the related information only on the date when the user stays at the hotel, and is prohibited from obtaining the related information after the stay.","The server  may register a plurality of frequencies in association with one ID. For instance, each time the server  receives the registered frequency information from the receiver , the server  registers the frequencies indicated by four latest sets of registered frequency information, in association with the ID. This allows even the receiver  which obtained the ID in the past, to obtain the related information from the server  until the frequency is changed three times. The server  may also manage, for each registered frequency, the time at which or period during which the frequency is set in the transmitter . In such a case, upon receiving the ID and the specified frequency information from the receiver , the server  can specify the period during which the receiver  obtains the ID, by referring to the time period and the like managed for the frequency indicated by the specified frequency information.",{"@attributes":{"id":"p-1066","num":"1065"},"figref":"FIG. 120"},"A transmitter  has the same function as the transmitter in any of Embodiments 1 to 4 described above, and includes a frequency storage unit , an ID storage unit , a check value storage unit , a check value comparison unit , a check value calculation unit , a frequency calculation unit , a frequency comparison unit , a transmission unit , and an error reporting unit .","The frequency storage unit  stores the frequency used for the luminance change (visible light communication). The ID storage unit  stores the ID of the transmitter . The check value storage unit  stores a check value for determining whether or not the ID stored in the ID storage unit  is correct.","The check value calculation unit  reads the ID stored in the ID storage unit , and applies a predetermined function to the ID to calculate a check value (calculated check value) for the ID. The check value comparison unit  reads the check value stored in the check value storage unit , and compares the check value with the calculated check value calculated by the check value calculation unit . In the case of determining that the calculated check value is different from the check value, the check value comparison unit  notifies an error to the error reporting unit . For example, the check value storage unit  stores the value \u201c0\u201d indicating that the ID stored in the ID storage unit  is an even number, as the check value. The check value calculation unit  reads the ID stored in the ID storage unit , and divides it by the value \u201c2\u201d to calculate the remainder as the calculated check value. The check value comparison unit  compares the check value \u201c0\u201d and the calculated check value which is the remainder of the division mentioned above.","The frequency calculation unit  reads the ID stored in the ID storage unit  via the check value calculation unit , and calculates the frequency (calculated frequency) from the ID. For instance, the frequency calculation unit  divides the ID by a predetermined value, to calculate the remainder as the frequency. The frequency comparison unit  compares the frequency (stored frequency) stored in the frequency storage unit  and the calculated frequency. In the case of determining that the calculated frequency is different from the stored frequency, the frequency comparison unit  notifies an error to the error reporting unit .","The transmission unit  transmits the ID stored in the ID storage unit , by changing in luminance at the calculated frequency calculated by the frequency calculation unit .","The error reporting unit , when notified of the error from at least one of the check value comparison unit  and the frequency comparison unit , reports the error by buzzer sound, blink, or lighting. In detail, the error reporting unit  includes a lamp for error reporting, and reports the error by lighting or blinking the lamp. Alternatively, when the power switch of the transmitter  is turned on, the error reporting unit  reports the error by blinking, at a frequency perceivable by humans, a light source that changes in luminance to transmit a signal such as an ID, for a predetermined period (e.g. 10 seconds).","Thus, whether or not the ID stored in the ID storage unit  and the frequency calculated from the ID are correct is checked, with it being possible to prevent erroneous ID transmission and luminance change at an erroneous frequency.",{"@attributes":{"id":"p-1074","num":"1073"},"figref":"FIG. 121"},"A receiver  has the same function as the receiver in any of Embodiments 1 to 4 described above, and includes a light receiving unit , a frequency detection unit , an ID detection unit , a frequency comparison unit , and a frequency calculation unit .","The light receiving unit  includes an image sensor as an example, and captures (visible light imaging) a transmitter that changes in luminance to obtain an image including a bright line pattern. The ID detection unit  detects the ID of the transmitter from the image. That is, the ID detection unit  obtains the ID of the transmitter, by demodulating data specified by the bright line pattern included in the image. The frequency detection unit  detects the luminance change frequency of the transmitter, from the image. That is, the frequency detection unit  specifies the frequency of the transmitter from the bright line pattern included in the image, as in the example described with reference to .","The frequency calculation unit  calculates the frequency of the transmitter from the ID detected by the ID detection unit , for example by dividing the ID as mentioned above. The frequency comparison unit  compares the frequency detected by the frequency detection unit  and the frequency calculated by the frequency calculation unit . In the case where these frequencies are different, the frequency comparison unit  determines that the detected ID is an error, and causes the ID detection unit  to detect the ID again. Obtainment of an erroneous ID can be prevented in this way.",{"@attributes":{"id":"p-1078","num":"1077"},"figref":"FIG. 122"},"The transmitter may transmit each of the symbols \u201c00, 01, 10, 11\u201d separately, by making the luminance change position in a predetermined time unit different.","For example, when transmitting the symbol \u201c00\u201d, the transmitter transmits the symbol \u201c00\u201d by changing in luminance only for a first section which is the first section in the time unit. When transmitting the symbol \u201c01\u201d, the transmitter transmits the symbol \u201c01\u201d by changing in luminance only for a second section which is the second section in the time unit. Likewise, when transmitting the symbol \u201c10\u201d, the transmitter transmits the symbol \u201c10\u201d by changing in luminance only for a third section which is the third section in the time unit. When transmitting the symbol \u201c11\u201d, the transmitter transmits the symbol \u201c11\u201d by changing in luminance only for a fourth section which is the fourth section in the time unit.","Thus, in this embodiment, the luminance changes in one section regardless of which symbol is transmitted, so that flicker can be suppressed as compared with the above-mentioned transmitter that causes one entire section (slot) to be low in luminance.",{"@attributes":{"id":"p-1082","num":"1081"},"figref":"FIG. 123"},"The transmitter may transmit each of the symbols \u201c0, 1\u201d separately, by making whether or not the luminance changes in a predetermined time unit different. For example, when transmitting the symbol \u201c0\u201d, the transmitter transmits the symbol \u201c0\u201d by not changing in luminance in the time unit. When transmitting the symbol \u201c1\u201d, the transmitter transmits the symbol \u201c1\u201d by changing in luminance in the time unit.",{"@attributes":{"id":"p-1084","num":"1083"},"figref":"FIG. 124"},"The transmitter may transmit each of the symbols \u201c00, 01, 10, 11\u201d separately, by making the luminance change frequency in a predetermined time unit different. For example, when transmitting the symbol \u201c00\u201d, the transmitter transmits the symbol \u201c00\u201d by not changing in luminance in the time unit. When transmitting the symbol \u201c01\u201d, the transmitter transmits the symbol \u201c01\u201d by changing in luminance (changing in luminance at a low frequency) in the time unit. When transmitting the symbol \u201c10\u201d, the transmitter transmits the symbol \u201c10\u201d by changing in luminance sharply (changing in luminance at a high frequency) in the time unit. When transmitting the symbol \u201c11\u201d, the transmitter transmits the symbol \u201c11\u201d by changing in luminance more sharply (changing in luminance at a higher frequency) in the time unit.",{"@attributes":{"id":"p-1086","num":"1085"},"figref":"FIG. 125"},"The transmitter may transmit each of the symbols \u201c0, 1\u201d separately, by making the phase of the luminance change in a predetermined time unit different. For example, when transmitting the symbol \u201c0\u201d, the transmitter transmits the symbol \u201c0\u201d by changing in luminance in a predetermined phase in the time unit. When transmitting the symbol \u201c1\u201d, the transmitter transmits the symbol \u201c1\u201d by changing in luminance in the reverse phase of the above-mentioned phase in the time unit.",{"@attributes":{"id":"p-1088","num":"1087"},"figref":"FIG. 126"},"When transmitting a signal such as an ID, the transmitter changes in luminance according to color such as red, green and blue. The transmitter can therefore transmit a signal of a larger amount of information, to a receiver capable of recognizing the luminance change according to color. The luminance change of any of the colors may be used for clock synchronization. For example, the luminance change of red color may be used for clock synchronization. In this case, the luminance change of red color serves as a header. Since there is no need to use a header for the luminance change of each color (green and blue) other than red, redundant data transmission can be avoided.",{"@attributes":{"id":"p-1090","num":"1089"},"figref":"FIG. 127"},"The transmitter may express the luminance of synthetic color (e.g. white) by synthesizing a plurality of colors such as red, green, and blue. In other words, the transmitter expresses the luminance change of synthetic color, by changing in luminance according to color such as red, green, and blue. A signal is transmitted using this luminance change of synthetic color, as in the above-mentioned visible light communication. Here, the luminance of one or more colors of red, green, and blue may be used for adjustment when expressing predetermined luminance of synthetic color. This enables the signal to be transmitted using the luminance change of synthetic color, and also enables the signal to be transmitted using the luminance change of any two colors of red, green, and blue. The transmitter can therefore transmit a signal even to a receiver capable of recognizing only the luminance change of the above-mentioned synthetic color (e.g. white), and also transmit more signals as ancillary information to a receiver capable of recognizing each color such as red, green, and blue.",{"@attributes":{"id":"p-1092","num":"1091"},"figref":"FIG. 128"},"The transmitter includes four light sources. The four light sources (e.g. LED lights) emit light of the colors expressed by different positions , , , and in a CIExy chromaticity diagram illustrated in .","The transmitter transmits each signal by switching between first lighting transmission and second lighting transmission. The first lighting transmission is a process of transmitting the signal \u201c0\u201d by turning on the light source for emitting light of the color of the position and the light source for emitting the light of the color of the position from among the four light sources. The second lighting transmission is a process of transmitting the signal \u201c1\u201d by turning on the light source for emitting light of the color of the position and the light source for emitting the light of the color of the position . The image sensor in the receiver can identify the color expressed by each of the positions , , , and , and so the receiver can appropriately receive the signal \u201c0\u201d and the signal \u201c1\u201d.","During the first lighting transmission, the color expressed by the intermediate position between the positions and in the CIExy chromaticity diagram is seen by the human eye. Likewise, during the second lighting transmission, the color expressed by the intermediate position between the positions and in the CIExy chromaticity diagram is seen by the human eye. Therefore, by appropriately adjusting the color and luminance of each of the four light sources, it is possible to match the intermediate position between the positions and and the intermediate position between the positions and to each other (to a position ). As a result, even when the transmitter switches between the first lighting transmission and the second lighting transmission, to the human eye the light emission color of the transmitter appears to be fixed. Flicker perceived by humans can thus be suppressed.",{"@attributes":{"id":"p-1096","num":"1095"},"figref":"FIG. 129"},"The transmitter includes an ID storage unit , a random number generation unit , an addition unit , an encryption unit , and a transmission unit . The ID storage unit  stores the ID of the transmitter. The random number generation unit  generates a different random number at regular time intervals. The addition unit  combines the ID stored in the ID storage unit  with the latest random number generated by the random number generation unit , and outputs the result as an edited ID. The encryption unit  encrypts the edited ID to generate an encrypted edited ID. The transmission unit  transmits the encrypted edited ID to the receiver by changing in luminance.","The receiver includes a reception unit , a decryption unit , and an ID obtainment unit . The reception unit  receives the encrypted edited ID from the transmitter, by capturing the transmitter (visible light imaging). The decryption unit  decrypts the received encrypted edited ID to restore the edited ID. The ID obtainment unit  extracts the ID from the edited ID, thus obtaining the ID.","For instance, the ID storage unit  stores the ID \u201c100\u201d, and the random number generation unit  generates a new random number \u201c817\u201d (example 1). In this case, the addition unit  combines the ID \u201c100\u201d with the random number \u201c817\u201d to generate the edited ID \u201c100817\u201d, and outputs it. The encryption unit  encrypts the edited ID \u201c100817\u201d to generate the encrypted edited ID \u201cabced\u201d. The decryption unit  in the receiver decrypts the encrypted edited ID \u201cabced\u201d to restore the edited ID \u201c100817\u201d. The ID obtainment unit  extracts the ID \u201c100\u201d from the restored edited ID \u201c100817\u201d. In other words, the ID obtainment unit  obtains the ID \u201c100\u201d by deleting the last three digits of the edited ID.","Next, the random number generation unit  generates a new random number \u201c619\u201d (example 2). In this case, the addition unit  combines the ID \u201c100\u201d with the random number \u201c619\u201d to generate the edited ID \u201c100619\u201d, and outputs it. The encryption unit  encrypts the edited ID \u201c100619\u201d to generate the encrypted edited ID \u201cdifia\u201d. The decryption unit  in the receiver decrypts the encrypted edited ID \u201cdifia\u201d to restore the edited ID \u201c100619\u201d. The ID obtainment unit  extracts the ID \u201c100\u201d from the restored edited ID \u201c100619\u201d. In other words, the ID obtainment unit  obtains the ID \u201c100\u201d by deleting the last three digits of the edited ID.","Thus, the transmitter does not simply encrypt the ID but encrypts its combination with the random number changed at regular time intervals, with it being possible to prevent the ID from being easily cracked from the signal transmitted from the transmission unit . That is, in the case where the simply encrypted ID is transmitted from the transmitter to the receiver a plurality of times, even though the ID is encrypted, the signal transmitted from the transmitter to the receiver is the same if the ID is the same, so that there is a possibility of the ID being cracked. In the example illustrated in , however, the ID is combined with the random number changed at regular time intervals, and the ID combined with the random number is encrypted. Therefore, even in the case where the same ID is transmitted to the receiver a plurality of times, if the time of transmitting the ID is different, the signal transmitted from the transmitter to the receiver is different. This protects the ID from being cracked easily.",{"@attributes":{"id":"p-1102","num":"1101"},"figref":"FIG. 130"},"The transmitter includes an ID storage unit , a timer unit , an addition unit , an encryption unit , and a transmission unit . The ID storage unit  stores the ID of the transmitter. The timer unit  counts time, and outputs the current date and time (the current year, month, day, and time). The addition unit  combines the ID stored in the ID storage unit  with the current date and time output from the timer unit  as a transmission date and time, and outputs the result as an edited ID. The encryption unit  encrypts the edited ID to generate an encrypted edited ID. The transmission unit  transmits the encrypted edited ID to the receiver by changing in luminance.","The receiver includes a reception unit , a decryption unit , a validity determination unit , and a timer unit . The reception unit  receives the encrypted edited ID from the transmitter, by capturing the transmitter (visible light imaging). The decryption unit  decrypts the received encrypted edited ID to restore the edited ID. The timer unit  counts time, and outputs the current date and time (the current year, month, day, and time). The validity determination unit  extracts the ID from the restored edited ID, thus obtaining the ID. The validity determination unit  also extracts the transmission date and time from the restored edited ID, and compares the transmission date and time with the current date and time output from the timer unit  to determine the validity of the ID. For example, in the case where the difference between the transmission date and time and the current date and time is longer than a predetermined time or in the case where the transmission date and time is later than the current date and time, the validity determination unit  determines that the ID is invalid.","For instance, the ID storage unit  stores the ID \u201c100\u201d, and the timer unit  outputs the current date and time \u201c201305011200\u201d (2013\/5\/1 12:00) as the transmission date and time (example 1). In this case, the addition unit  combines the ID \u201c100\u201d with the transmission date and time \u201c201305011200\u201d to generate the edited ID \u201c100201305011200\u201d, and outputs it. The encryption unit  encrypts the edited ID \u201c100201305011200\u201d to generate the encrypted edited ID \u201cei39ks\u201d. The decryption unit  in the receiver decrypts the encrypted edited ID \u201cei39ks\u201d to restore the edited ID \u201c100201305011200\u201d. The validity determination unit  extracts the ID \u201c100\u201d from the restored edited ID \u201c100201305011200\u201d. In other words, the validity determination unit  obtains the ID \u201c100\u201d by deleting the last 12 digits of the edited ID. The validity determination unit  also extracts the transmission date and time \u201c201305011200\u201d from the restored edited ID \u201c100201305011200\u201d. If the transmission date and time \u201c201305011200\u201d is earlier than the current date and time output from the timer unit  and the difference between the transmission date and time and the current date and time is within, for example, 10 minutes, the validity determination unit  determines that the ID \u201c100\u201d is valid.","On the other hand, the ID storage unit  stores the ID \u201c100\u201d, and the timer unit  outputs the current date and time \u201c201401011730\u201d (2014\/1\/1 17:30) as the transmission date and time (example 2). In this case, the addition unit  combines the ID \u201c100\u201d with the transmission date and time \u201c201401011730\u201d to generate the edited ID \u201c100201401011730\u201d, and outputs it. The encryption unit  encrypts the edited ID \u201c100201401011730\u201d to generate the encrypted edited ID \u201c002jflk\u201d. The decryption unit  in the receiver decrypts the encrypted edited ID \u201c002jflk\u201d to restore the edited ID \u201c100201401011730\u201d. The validity determination unit  extracts the ID \u201c100\u201d from the restored edited ID \u201c100201401011730\u201d. In other words, the validity determination unit  obtains the ID \u201c100\u201d by deleting the last 12 digits of the edited ID. The validity determination unit  also extracts the transmission date and time \u201c201401011730\u201d from the restored edited ID \u201c100201401011730\u201d. If the transmission date and time \u201c201401011730\u201d is later than the current date and time output from the timer unit , the validity determination unit  determines that the ID \u201c100\u201d is invalid.","Thus, the transmitter does not simply encrypt the ID but encrypts its combination with the current date and time changed at regular time intervals, with it being possible to prevent the ID from being easily cracked from the signal transmitted from the transmission unit . That is, in the case where the simply encrypted ID is transmitted from the transmitter to the receiver a plurality of times, even though the ID is encrypted, the signal transmitted from the transmitter to the receiver is the same if the ID is the same, so that there is a possibility of the ID being cracked. In the example illustrated in , however, the ID is combined with the current date and time changed at regular time intervals, and the ID combined with the current date and time is encrypted. Therefore, even in the case where the same ID is transmitted to the receiver a plurality of times, if the time of transmitting the ID is different, the signal transmitted from the transmitter to the receiver is different. This protects the ID from being cracked easily.","Moreover, whether or not the obtained ID is valid is determined by comparing the transmission date and time of the encrypted edited ID and the current date and time. Thus, the validity of the ID can be managed based on the transmission\/reception time.","Note that the receiver illustrated in each of  may, upon obtaining the encrypted edited ID, transmit the encrypted edited ID to the server, and obtain the ID from the server.","(Station Guide)",{"@attributes":{"id":"p-1110","num":"1109"},"figref":["FIG. 131","FIG. 131"]},"(Guide Sign Translation)",{"@attributes":{"id":"p-1111","num":"1110"},"figref":"FIG. 132"},"(Coupon Popup)",{"@attributes":{"id":"p-1112","num":"1111"},"figref":"FIG. 133"},{"@attributes":{"id":"p-1113","num":"1112"},"figref":"FIG. 134"},"(Start of Operation Application)",{"@attributes":{"id":"p-1114","num":"1113"},"figref":["FIG. 135","FIG. 135"]},"(Stopping Transmission During Operation of Barcode Reader)",{"@attributes":{"id":"p-1115","num":"1114"},"figref":"FIG. 136","b":["8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405","8405"],"i":["a ","a","a ","a ","b","a ","b","a ","a ","a ","a","a ","a ","a","a","a ","a ","a ","a ","a ","a ","a ","c "]},"Upon receiving the transmission stop signal, the transmitter such as a lighting stops signal transmission, or operates so that the ripple (luminance change) from 100 Hz to 100 kHz is smaller. As an alternative, the transmitter continues signal transmission while reducing the luminance change of the signal pattern. As another alternative, the transmitter makes the carrier wave period longer than the barcode read time of the barcode reader , or makes the carrier wave period shorter than the exposure time of the barcode reader . Malfunction of the barcode reader can be prevented in this way.","As illustrated in , a transmitter such as a lighting detects, by a motion sensor or a camera, that there is a person near a barcode reader , and stops signal transmission. As an alternative, the transmitter performs the same operation as the transmitter when receiving the transmission stop signal. The transmitter restarts signal transmission, upon detecting that no one is present near the barcode reader any longer. The transmitter may detect the operation sound of the barcode reader , and stop signal transmission for a predetermined time.","(Information Transmission from Personal Computer)",{"@attributes":{"id":"p-1118","num":"1117"},"figref":"FIG. 138"},"A transmitter such as a personal computer transmits a visible light signal, through a display device such as a display included in the transmitter , a display connected to the transmitter , or a projector. The transmitter transmits an URL of a website displayed by a browser, information of a clipboard, or information defined by a focused application. For example, the transmitter transmits coupon information obtained in a website.","(Database)",{"@attributes":{"id":"p-1120","num":"1119"},"figref":"FIG. 139"},"The database includes an ID-data table holding data provided in response to an inquiry using an ID as a key, and an access log table holding each record of inquiry using an ID as a key. The ID-data table includes an ID transmitted from a transmitter, data provided in response to an inquiry using the ID as a key, a data provision condition, the number of times access is made using the ID as a key, and the number of times the data is provided as a result of clearing the condition. Examples of the data provision condition include the date and time, the number of accesses, the number of successful accesses, terminal information of the inquirer (terminal model, application making inquiry, current position of terminal, etc.), and user information of the inquirer (age, sex, occupation, nationality, language, religion, etc.). By using the number of successful accesses as the condition, a method of providing such a service that \u201c1 yen per access, though no data is returned after 100 yen as upper limit\u201d is possible. When access is made using an ID as a key, the log table records the ID, the user ID of the requester, the time, other ancillary information, whether or not data is provided as a result of clearing the condition, and the provided data.","(Reception Start Gesture)",{"@attributes":{"id":"p-1122","num":"1121"},"figref":"FIG. 140"},"A user sticks out a receiver such as a smartphone and turns his or her wrist right and left, to start reception. The receiver detects these operations from the measurement of a 9-axis sensor, and starts reception. The receiver may start reception in the case of detecting at least one of these operations. The operation of sticking out the receiver has the effect of enhancing the reception speed and accuracy, because the receiver comes closer to a transmitter and so captures the transmitter in a larger size. The operation of turning the wrist right and left has the effect of stabilizing reception, because the angle dependence of the scheme is resolved by changing the angle of the receiver.","Note that these operations may be performed only when the receiver's home screen is in the foreground. This can prevent the communication from being launched despite the user's intension while the user is using another application.","The following modification is also possible: an image sensor is activated upon detection of the operation of sticking out the receiver and, if the operation of turning the wrist right and left is not conducted, the reception is canceled. Since activating the image sensor takes about several hundred milliseconds to 2 seconds, the responsiveness can be enhanced in this way.","(Control of Transmitter by Power Line)",{"@attributes":{"id":"p-1126","num":"1125"},"figref":"FIG. 141"},"A signal control unit controls the transmission state (the contents of a transmission signal, whether or not to transmit the signal, the intensity of luminance change used for transmission, etc.) of a transmitter . The signal control unit transmits the details of control of the transmitter , to a power distribution control unit . The power distribution control unit changes the voltage or current supplied to a power supply unit of the transmitter or its frequency, thereby notifying the details of control in the form of the magnitude of the change or the time of the change. The power supply unit produces constant output, without being affected by a slight change in voltage, current, or frequency. Accordingly, the signal is transmitted by being expressed by such a change that exceeds the stabilizing ability of the power supply unit , e.g. a timing or duration that cuts power supply. A luminance control unit receives the signal transmitted from the power distribution control unit while taking into account the conversion by the power supply unit , and changes the luminance change pattern of a light emitting unit.","(Coding Scheme)",{"@attributes":{"id":"p-1128","num":"1127"},"figref":"FIG. 142"},"This coding scheme has the advantage that flicker is unlikely to be perceived by humans, because black and white are substantially equal in proportion and so the normal phase image and the reverse phase image are substantially equal in average luminance.","(Coding Scheme Capable of Light Reception Even in the Case of Capturing Image from Diagonal Direction)",{"@attributes":{"id":"p-1130","num":"1129"},"figref":"FIG. 143"},"An image is an image displayed with black and white lines of uniform width. In an image obtained by capturing the image from a diagonal direction, left lines appear thinner and right lines appear thicker. In an image obtained by capturing the image in a manner of projecting the image on a curved surface, lines that differ in thickness appear.","In view of this, a visible light communication image is generated by the following coding scheme. A visible light communication image is made up of a white line, a black line whose thickness is three times that of the white line, and a white line whose thickness is \u2153 that of the black line, from left. A preamble is coded as such an image in which a line whose thickness is three times that of its left adjacent line is followed by a line whose thickness is \u2153 that of its left adjacent line. As in visible light communication images and , a line whose thickness is equal to that of its left adjacent line is coded as \u201c0\u201d. As in visible light communication images and , a line whose thickness is twice that of its left adjacent line or \u00bd that of its left adjacent line is coded as \u201c1\u201d. That is, a line whose thickness is different from that of its left adjacent line is coded as \u201c1\u201d. As an example using this coding scheme, a signal including \u201c010110001011\u201d following the preamble is expressed by an image such as a visible light communication image . Though the line whose thickness is equal to that of its left adjacent line is coded as \u201c0\u201d and the line whose thickness is different from that of its left adjacent line is coded as \u201c1\u201d in this example, the line whose thickness is equal to that of its left adjacent line may be coded as \u201c1\u201d and the line whose thickness is different from that of its left adjacent line as \u201c0\u201d. Moreover, the reference thickness is not limited to the thickness of the left adjacent line, and may be the thickness of the right adjacent line. In detail, \u201c1\u201d or \u201c0\u201d may be coded depending on whether the thickness of the line to be coded is equal to or different from the thickness of its right adjacent line. Thus, a transmitter codes \u201c0\u201d by setting the line to be coded to be equal in thickness to the line that is different in color from and adjacent to the line to be coded, and codes \u201c1\u201d by setting the line to be coded to be different in thickness from the line that is different in color from and adjacent to the line to be coded.","A receiver captures the visible light communication image, and detects the thickness of the white or black line in the captured visible light communication image. The receiver compares the thickness of the line to be decoded, with the thickness of the line that is different in color from and adjacent (left adjacent or right adjacent) to the line to be decoded. The line is decoded as \u201c0\u201d in the case where the thicknesses are equal, and \u201c1\u201d in the case where the thicknesses are different. Alternatively, the line may be decoded as \u201c1\u201d in the case where the thicknesses are equal, and \u201c0\u201d in the case where the thicknesses are different. The receiver lastly decodes the data based on the decoded data sequence of 1 and 0.","This coding scheme employs the local line thickness relation. Since the thickness ratio between neighboring lines does not change significantly as seen in the images and , the visible light communication image generated by this coding scheme can be properly decoded even in the case of being captured from a diagonal direction or being projected on a curved surface.","This coding scheme has the advantage that flicker is unlikely to be perceived by humans, because black and white are substantially equal in proportion and so the normal phase image and the reverse phase image are substantially equal in average luminance. This coding scheme also has the advantage that the visible light communication images of both the normal phase signal and the reverse phase signal are decodable by the same algorithm, because the coding scheme does not depend on the distinction between black and white.","This coding scheme further has the advantage that a code can be added easily. As an example, a visible light communication image is a combination of a line whose thickness is four times that of its left adjacent line and a line whose thickness is \u00bc that of its left adjacent line. Like this, many unique patterns such as \u201cfive times that of its left adjacent line and \u2155 that of its left adjacent line\u201d and \u201cthree times that of its left adjacent line and \u2154 that of its left adjacent line\u201d are available, enabling definition as a signal having a special meaning. For instance, given that one set of data can be expressed by a plurality of visible light communication images, the visible light communication image may be used as a cancel signal indicating that, since the transmission data is changed, part of the previously received data is no longer valid. Note that the colors are not limited to black and white, and any colors may be used so long as they are different. For instance, complementary colors may be used.","(Coding Scheme that Differs in Information Amount Depending on Distance)",{"@attributes":{"id":"p-1137","num":"1136"},"figref":"FIGS. 144 and 145"},"As in (a-1) in , when a 2-bit signal is expressed in a form that one part of an image divided by four is black and the other parts are white, the average luminance of the image is 75%, where white is 100% and black is 0%. As in (a-2) in , when black and white are reversed, the average luminance is 25%.","An image is a visible light communication image in which the white part of the visible light communication image generated by the coding scheme in  is expressed by the image in (a-1) in  and the black part is expressed by the image in (a-2) in . This visible light communication image represents signal A coded by the coding scheme in  and signal B coded by (a-1) and (a-2) in . When a nearby receiver captures the visible light communication image , a fine image is obtained and both of signals A and B can be received. When a distant receiver captures the visible light communication image , a small image is obtained. In the image , the details are not recognizable, and the part corresponding to (a-1) in  is white and the part corresponding to (a-2) in  is black, so that only signal A can be received. Thus, more information can be transmitted when the distance between the visible light communication image and the receiver is shorter. The scheme for coding signal B may be the combination of (b-1) and (b-2) or the combination of (c-1) and (c-2) in .","The use of signals A and B enables basic important information to be expressed by signal A and additional information to be expressed by signal B. In the case where the receiver transmits signals A and B to a server as ID information and the server transmits information corresponding to the ID information to the receiver, the information transmitted from the server may be varied depending on whether or not signal B is present.","(Coding Scheme with Data Division)",{"@attributes":{"id":"p-1141","num":"1140"},"figref":"FIG. 146"},"A transmission signal is divided into a plurality of data segments , , and . Frame data , , and are generated by adding, to each data segment, an address indicating the position of the data segment, a preamble, an error detection\/correction code, a frame type description, and the like. The frame data are coded to generate visible light communication images , , and , and the visible light communication images , , and are displayed. In the case where the display area is sufficiently large, a visible light communication image obtained by concatenating the plurality of visible light communication images is displayed.","A method of inserting the visible light communication image in video as in  is described below. In the case of a display device including a solid state light source, the visible light communication image is displayed in normal time, and the solid state light source is on only during the period for displaying the visible light communication image and off during the other period. This method is applicable to a wide range of display devices including a projector using a DMD, a projector using a liquid crystal such as LCOS, and a display device using MEMS. The method is also applicable to display devices that divide image display into subframes, e.g. a display device such as a PDP or an EL display that does not use a light source such as a backlight, by replacing part of the subframes with the visible light communication image. Examples of the solid state light source include a semiconductor laser and an LED light source.","(Effect of Inserting Reverse Phase Image)",{"@attributes":{"id":"p-1144","num":"1143"},"figref":"FIGS. 147 and 148"},"As in () in , a transmitter inserts a black image between video and a visible light communication image (normal phase image). An image obtained by capturing this by a receiver is as illustrated in () in . Since it is easy to search for a part where a simultaneously exposed pixel line is all black, the receiver can easily specify the position where the visible light communication image is captured, as the pixel position exposed at the next timing.","As in () in , after displaying a visible light communication image (normal phase image), the transmitter displays a visible light communication image of reverse phase with black and white being inverted. The receiver calculates the difference in pixel value between the normal phase image and the reverse phase image, thus attaining an SN ratio that is twice as compared with the case of using only the normal phase image. Conversely, when ensuring the same SN ratio, the luminance difference between black and white can be reduced to half, with it being possible to suppress flicker perceived by humans. As in () and () in , the moving average of the expected value of the luminance difference between the video and the visible light communication image is canceled out by the normal phase image and the reverse phase image. Since the temporal resolution of human vision is about 1\/60 second, by setting the time for displaying the visible light communication image to less than or equal to this, it is possible to make humans perceive as if the visible light communication image is not being displayed.","As in () in , the transmitter may further insert a black image between the normal phase image and the reverse phase image. In this case, an image illustrated in () in  is obtained as a result of image capture by the receiver. In the image illustrated in () in , the pattern of the normal phase image and the pattern of the reverse phase image are adjacent to each other, which might cause averaging of pixel values at the boundary. In the image illustrated in () in , no such problem occurs.","(Superresolution)",{"@attributes":{"id":"p-1148","num":"1147"},"figref":"FIG. 149"},"In (a) in , in the case where video data and signal data transmitted by visible light communication are separated, a superresolution process is performed on the video data, and the visible light communication image is superimposed on the obtained superresolution image. That is, the superresolution process is not performed on the visible light communication image. In (b) in , in the case where a visible light communication image is already superimposed on video data, the superresolution process is performed so that (1) the edges (parts indicating data by the difference between colors such as black and white) of the visible light communication image are maintained sharp and (2) the average image of the normal phase image and the reverse phase image of the visible light communication image is of uniform luminance. By changing the process for the visible light communication image depending on whether or not the visible light communication image is superimposed on the video data in this way, visible light communication can be performed more appropriately (with reduced error rate).","(Display of Support for Visible Light Communication)",{"@attributes":{"id":"p-1150","num":"1149"},"figref":"FIG. 150"},"A transmitter displays information indicating that the transmitter is capable of visible light communication, by superimposing the information on a projected or displayed image. The information is displayed, for example, only for a predetermined time after the transmitter is activated.","The transmitter transmits the information indicating that the transmitter is capable of visible light communication, to a connected device . The device displays that the transmitter is capable of visible light communication. As an example, the device displays that the transmitter is capable of visible light communication, on a display of the device . In the case where the connected transmitter is capable of visible light communication, the device transmits visible light communication data to the transmitter . The information that the transmitter is capable of visible light communication may be displayed when the device is connected to the transmitter or when the visible light communication data is transmitted from the device to the transmitter . In the case of displaying the information when the visible light communication data is transmitted from the device , the transmitter may obtain identification information indicating visible light communication from the data and, if the identification information indicates that the visible light communication data is included in the data, display that the transmitter is capable of visible light communication.","By displaying that the transmitter (lighting, projector, video display device, etc.) is capable of visible light communication or whether or not the transmitter is capable of visible light communication on the projection screen or the display of the device in this way, the user can easily recognize whether or not the transmitter is capable of visible light communication. This prevents a failure of visible light communication even though visible light communication data is transmitted from the device to the transmitter.","(Information Obtainment Using Visible Light Communication Signal)",{"@attributes":{"id":"p-1154","num":"1153"},"figref":"FIG. 151"},"A transmitter receives video data and signal data from a device , and displays a visible light communication image . A receiver captures the visible light communication image , to receive a signal included in the visible light communication image. The receiver communicates with the device based on information (address, password, etc.) included in the received signal, and receives the video displayed by the transmitter and its ancillary information (video ID, URL, password, SSID, translation data, audio data, hash tag, product information, purchase information, coupon, availability information, etc.). The device may transmit, to a server , the status of transmission to the transmitter so that the receiver may obtain the information from the server ","(Data Format)",{"@attributes":{"id":"p-1156","num":"1155"},"figref":"FIG. 152"},"Data illustrated in (a) in  has a video address table indicating the position of video data in a storage area, and a position address table indicating the position of signal data transmitted by visible light communication. A video display device not capable of visible light communication refers only to the video address table, and therefore video display is not affected even when the signal address table and signal data are included in the input. Backward compatibility with the video display device not capable of visible light communication is maintained in this manner.","In a data format illustrated in (b) in , an identifier indicating that data which follows is video data is positioned before video data, and an identifier indicating that data which follows is signal data is positioned before signal data. Since the identifier is inserted in the data only when there is video data or signal data, the total amount of code can be reduced. Alternatively, identification information indicating whether data is video data or signal data may be provided. Moreover, program information may include identification information indicating whether or not the program information includes visible light communication data. The inclusion of the identification information indicating whether or not the program information includes visible light communication data allows the user to determine, upon program search, whether or not visible light communication is possible. The program information may include an identifier indicating that the program information includes visible light communication data. Furthermore, adding an identifier or identification information on a data basis makes it possible to switch the luminance or switch the process such as superresolution on a data basis, which contributes to a lower error rate in visible light communication.","The data format illustrated in (a) in  is suitable for a situation of reading data from a storage medium such a an optical disc, and the data format illustrated in (b) in  is suitable for streaming data such as television broadcasting. Note that the signal data includes information such as the signal value transmitted by visible light communication, the transmission start time, the transmission end time, the area used for transmission on a display or a projection surface, the luminance of the visible light communication image, the direction of barcode of the visible light communication image, and so on.","(Estimation of Stereoscopic Shape and Reception)",{"@attributes":{"id":"p-1160","num":"1159"},"figref":"FIGS. 153 and 154"},"As illustrated in , a transmitter such as a projector projects not only video and a visible light communication image but also a distance measurement image. A dot pattern indicated by the distance measurement image is a dot pattern in which the position relation between a predetermined number of dots near an arbitrary dot is different from the position relation between other arbitrary combination of dots. A receiver captures the distance measurement image to specify a local dot pattern, with it being possible to estimate the stereoscopic shape of a projection surface . The receiver restores the visible light communication image distorted due to the stereoscopic shape of the projection surface to a 2D image, thereby receiving a signal. The distance measurement image and the visible light communication image may be projected by infrared which is not perceivable by humans.","As illustrated in , a transmitter such as a projector includes an infrared projection device for projecting a distance measurement image by infrared. A receiver estimates the stereoscopic shape of a projection surface , and restores a distorted visible light communication image to receive a signal. The transmitter may project video by visible light, and a visible light communication image by infrared. The infrared projection device may project a visible light communication image by infrared.","(Stereoscopic Projection)",{"@attributes":{"id":"p-1163","num":"1162"},"figref":"FIGS. 155 and 156"},"In the case of performing stereoscopic projection or in the case of displaying a visible light communication image on a cylindrical display surface, displaying visible light communication images to as illustrated in  enables reception from a wide angle. Displaying the visible light communication images and enables reception from a horizontally wide angle. By combining the visible light communication images and , reception is possible even when a receiver is tilted. The visible light communication images and may be displayed alternately, or the visible light communication image obtained by synthesizing these images may be displayed. Moreover, adding the visible light communication images and enables reception from a vertically wide angle. The visible light communication image boundary may be expressed by providing a part projected in an intermediate color or an unprojected part, as in the visible light communication image . Rotating the visible light communication images to enables reception from a wider angle. Though the visible light communication image is displayed on the cylindrical display surface in , the visible light communication image may be displayed on a columnar display surface.","In the case of performing stereoscopic projection or in the case of displaying a visible light communication image on a spherical display surface, displaying visible light communication images to as illustrated in  enables reception from a wide angle. In the visible light communication image , the receivable area in the horizontal direction is wide, but the receivable area in the vertical direction is narrow. Hence, the visible light communication image is combined with the visible light communication image having the opposite property. The visible light communication images and may be displayed alternately, or the visible light communication image obtained by synthesizing these images may be displayed. The part where barcodes concentrate as in the upper part of the visible light communication image is fine in display, and there is a high possibility of a signal reception error. Such a reception error can be prevented by displaying this part in an intermediate color as in the visible light communication image or by not projecting any image in this part.","(Communication Protocol Different According to Zone)",{"@attributes":{"id":"p-1166","num":"1165"},"figref":"FIG. 157"},"A receiver receives zone information form a base station , recognizes in which position the receiver is located, and selects a reception protocol. The base station is, for example, a mobile phone communication base station, a W-Fi access point, an IMES transmitter, a speaker, or a wireless transmitter (Bluetooth\u00ae, ZigBee, specified low power radio station, etc.). The receiver may specify the zone based on position information obtained from GPS or the like. As an example, it is assumed that communication is performed at a signal frequency of 9.6 kHz in zone A, and communication is performed at a signal frequency of 15 kHz by a ceiling light and at a signal frequency of 4.8 kHz by a signage in zone B. At a position , the receiver recognizes that the current position is zone A from information from the base station , and performs reception at the signal frequency of 9.6 kHz, thus receiving signals transmitted from transmitters and . At a position , the receiver recognizes that the current position is zone B from information from a base station , and also estimates that a signal from a ceiling light is to be received from the movement of directing the in camera upward. The receiver performs reception at the signal frequency of 15 kHz, thus receiving signals transmitted from transmitters and . At a position , the receiver recognizes that the current position is zone B from information from the base station , and also estimates that a signal transmitted from a signage is to be received from the movement of sticking out the out camera. The receiver performs reception at the signal frequency of 4.8 kHz, thus receiving a signal transmitted from a transmitter . At a position , the receiver receives signals from both of the base stations and and cannot determine whether the current position is zone A or zone B. The receiver accordingly performs reception at both 9.6 kHz and 15 kHz. The part of the protocol different according to zone is not limited to the frequency, and may be the transmission signal modulation scheme, the signal format, or the server inquired using an ID. The base station or may transmit the protocol in the zone to the receiver, or transmit only the ID indicating the zone to the receiver so that the receiver obtains protocol information from a server using the zone ID as a key.","Transmitters to each receive the zone ID or protocol information from the base station or , and determine the signal transmission protocol. The transmitter that can receive the signals from both the base stations and uses the protocol of the zone of the base station with a higher signal strength, or alternately use both protocols.","(Recognition of Zone and Service for Each Zone)",{"@attributes":{"id":"p-1169","num":"1168"},"figref":"FIG. 158"},"A receiver recognizes a zone to which the position of the receiver belongs, from a received signal. The receiver provides a service (coupon distribution, point assignment, route guidance, etc.) determined for each zone. As an example, the receiver receives a signal transmitted from the left of a transmitter , and recognizes that the receiver is located in zone A. Here, the transmitter may transmit a different signal depending on the transmission direction. Moreover, the transmitter may, through the use of a signal of the light emission pattern such as , transmit a signal so that a different signal is received depending on the distance to the receiver. The receiver may recognize the position relation with the transmitter from the direction and size in which the transmitter is captured, and recognize the zone in which the receiver is located.","Signals indicating the same zone may have a common part. For example, the first half of an ID indicating zone A, which is transmitted from each of the transmitters and , is common. This enables the receiver to recognize the zone where the receiver is located, merely by receiving the first half of the signal.","An information communication method in this embodiment is an information communication method of transmitting a signal using a change in luminance, the information communication method including: determining a plurality of patterns of the change in luminance, by modulating each of a plurality of signals to be transmitted; and transmitting, by each of a plurality of light emitters changing in luminance according to any one of the plurality of determined patterns of the change in luminance, a signal corresponding to the pattern, wherein in the transmitting, each of two or more light emitters of the plurality of light emitters changes in luminance at a different frequency so that light of one of two types of light different in luminance is output per a time unit determined for the light emitter beforehand and that the time unit determined for each of the two or more light emitters is different.","In this way, two or more light emitters (e.g. transmitters as lighting devices) each change in luminance at a different frequency, as in the operation described with reference to . Therefore, a receiver that receives signals (e.g. light emitter IDs) from these light emitters can easily obtain the signals separately from each other.","For example, in the transmitting, each of the plurality of light emitters may change in luminance at any one of at least four types of frequencies, and the two or more light emitters of the plurality of transmitters may change in luminance at the same frequency. For example, in the transmitting, the plurality of light emitters each change in luminance so that a luminance change frequency is different between all light emitters which, in the case where the plurality of light emitters are projected on a light receiving surface of an image sensor for receiving the plurality of signals, are adjacent to each other on the light receiving surface.","In this way, as long as there are at least four types of frequencies used for luminance changes, even in the case where two or more light emitters change in luminance at the same frequency, i.e. in the case where the number of types of frequencies is smaller than the number of light emitters, it can be ensured that the luminance change frequency is different between all light emitters adjacent to each other on the light receiving surface of the image sensor based on the four color problem or the four color theorem, as in the operation described with reference to . As a result, the receiver can easily obtain the signals transmitted from the plurality of light emitters, separately from each other.","For example, in the transmitting, each of the plurality of light emitters may transmit the signal, by changing in luminance at a frequency specified by a hash value of the signal.","In this way, each of the plurality of light emitters changes in luminance at the frequency specified by the hash value of the signal (e.g. light emitter ID), as in the operation described with reference to . Accordingly, upon receiving the signal, the receiver can determine whether or not the frequency specified from the actual change in luminance and the frequency specified by the hash value match. That is, the receiver can determine whether or not the received signal (e.g. light emitter ID) has an error.","For example, the information communication method may further include: calculating, from a signal to be transmitted which is stored in a signal storage unit, a frequency corresponding to the signal according to a predetermined function, as a first frequency; determining whether or not a second frequency stored in a frequency storage unit and the calculated first frequency match; and in the case of determining that the first frequency and the second frequency do not match, reporting an error, wherein in the case of determining that the first frequency and the second frequency match, in the determining, a pattern of the change in luminance is determined by modulating the signal stored in the signal storage unit, and in the transmitting, the signal stored in the signal storage unit is transmitted by any one of the plurality of light emitters changing in luminance at the first frequency according to the determined pattern.","In this way, whether or not the frequency stored in the frequency storage unit and the frequency calculated from the signal stored in the signal storage unit (ID storage unit) match is determined and, in the case of determining that the frequencies do not match, an error is reported, as in the operation described with reference to . This eases abnormality detection on the signal transmission function of the light emitter.","For example, the information communication method may further include: calculating a first check value from a signal to be transmitted which is stored in a signal storage unit, according to a predetermined function; determining whether or not a second check value stored in a check value storage unit and the calculated first check value match; and in the case of determining that the first check value and the second check value do not match, reporting an error, wherein in the case of determining that the first check value and the second check value match, in the determining, a pattern of the change in luminance is determined by modulating the signal stored in the signal storage unit, and in the transmitting, the signal stored in the signal storage unit is transmitted by any one of the plurality of light emitters changing in luminance at the first frequency according to the determined pattern.","In this way, whether or not the check value stored in the check value storage unit and the check value calculated from the signal stored in the signal storage unit (ID storage unit) match is determined and, in the case of determining that the check values do not match, an error is reported, as in the operation described with reference to . This eases abnormality detection on the signal transmission function of the light emitter.","An information communication method in this embodiment is an information communication method of obtaining information from a subject, the information communication method including: setting an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a plurality of bright lines corresponding to a plurality of exposure lines included in the image sensor appear according to a change in luminance of the subject; obtaining a bright line image including the plurality of bright lines, by capturing the subject that changes in luminance by the image sensor with the set exposure time; obtaining the information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained image; and specifying a luminance change frequency of the subject, based on the pattern of the plurality of bright lines included in the obtained bright line image. For example, in the specifying, a plurality of header patterns that are included in the pattern of the plurality of bright lines and are a plurality of patterns each determined beforehand to indicate a header are specified, and a frequency corresponding to the number of pixels between the plurality of header patterns is specified as the luminance change frequency of the subject.","In this way, the luminance change frequency of the subject is specified, as in the operation described with reference to . In the case where a plurality of subjects that differ in luminance change frequency are captured, information from these subjects can be easily obtained separately from each other.","For example, in the obtaining of a bright line image, the bright line image including a plurality of patterns represented respectively by the plurality of bright lines may be obtained by capturing a plurality of subjects each of which changes in luminance, and in the obtaining of the information, in the case where the plurality of patterns included in the obtained bright line image overlap each other in a part, the information may be obtained from each of the plurality of patterns by demodulating the data specified by a part of each of the plurality of patterns other than the part.","In this way, data is not demodulated from the overlapping part of the plurality of patterns (the plurality of bright line patterns), as in the operation described with reference to . Obtainment of wrong information can thus be prevented.","For example, in the obtaining of a bright line image, a plurality of bright line images may be obtained by capturing the plurality of subjects a plurality of times at different timings from each other, in the specifying, for each bright line image, a frequency corresponding to each of the plurality of patterns included in the bright line image may be specified, and in the obtaining of the information, the plurality of bright line images may be searched for a plurality of patterns for which the same frequency is specified, the plurality of patterns searched for may be combined, and the information may be obtained by demodulating the data specified by the combined plurality of patterns.","In this way, the plurality of bright line images are searched for the plurality of patterns (the plurality of bright line patterns) for which the same frequency is specified, the plurality of patterns searched for are combined, and the information is obtained from the combined plurality of patterns. Hence, even in the case where the plurality of subjects are moving, information from the plurality of subjects can be easily obtained separately from each other.","For example, the information communication method may further include: transmitting identification information of the subject included in the obtained information and specified frequency information indicating the specified frequency, to a server in which a frequency is registered for each set of identification information; and obtaining related information associated with the identification information and the frequency indicated by the specified frequency information, from the server.","In this way, the related information associated with the identification information (ID) obtained based on the luminance change of the subject (transmitter) and the frequency of the luminance change is obtained, as in the operation described with reference to . By changing the luminance change frequency of the subject and updating the frequency registered in the server with the changed frequency, a receiver that has obtained the identification information before the change of the frequency is prevented from obtaining the related information from the server. That is, by changing the frequency registered in the server according to the change of the luminance change frequency of the subject, it is possible to prevent a situation where a receiver that has previously obtained the identification information of the subject can obtain the related information from the server for an indefinite period of time.","For example, the information communication method may further include: obtaining identification information of the subject, by extracting a part from the obtained information; and specifying a number indicated by the obtained information other than the part, as a luminance change frequency set for the subject.","In this way, the identification information of the subject and the luminance change frequency set for the subject can be included independently of each other in the information obtained from the pattern of the plurality of bright lines, as in the operation described with reference to . This contributes to a higher degree of freedom of the identification information and the set frequency.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as an LED blink pattern in Embodiments 1 to 5 described above.",{"@attributes":{"id":"p-1193","num":"1192"},"figref":"FIG. 159"},"A transmission signal D is divided into data segments Dx (e.g. Dx=D, D, D) of a predetermined size, and a header Hdr and an error detection\/correction frame check sequence FCS calculated from each data segment are added to the data segment. A header Hdr and an error detection\/correction frame check sequence FCS calculated from the original data are added, too. Data made up of Hdr, Dx, and FCS is a structure for reception by an image sensor. Since the image sensor is suitable for reception of continuous data in a short time, Hdr, Dx, and FCS are transmitted continuously. Data made up of Hdr, Dx, and FCS is a structure for reception by an illuminance sensor. While Hdr and FCS received by the image sensor are desirably short, Hdr and FCS received by the illuminance sensor may each be a longer signal sequence. The use of a longer signal sequence for Hdr enhances the header detection accuracy. When FCS is longer, a code capable of detecting and correcting many bit errors can be employed, which leads to improved error detection\/correction performance. Note that, instead of transmitting Hdr and FCS, Hdr and FCS may be received by the illuminance sensor. The illuminance sensor may receive both Hdr and Hdr or both FCS and FCS.",{"@attributes":{"id":"p-1195","num":"1194"},"figref":"FIG. 160"},"FCS is a long signal. Frequently inserting such FCS causes a decrease in reception efficiency of the image sensor. In view of this, the insertion frequency of FCS is reduced, and a signal PoFCS indicating the location of FCS is inserted instead. For example, in the case of using 4-value PPM having 2-bit information per unit time for signal representation, 16 transmission time units are necessary when CRC32 is used for FCS, whereas PoFCS with a range of 0 to 3 can be transmitted in one time unit. Since the transmission time is shortened as compared with the case of inserting only FCS, the reception efficiency of the image sensor can be improved. The illuminance sensor receives PoFCS following the transmission signal D, specifies the transmission time of FCS from PoFCS, and receives FCS. The illuminance sensor further receives PoFCS following FCS, specifies the transmission time of the next FCS, and receives the next FCS. If FCS received first and FCS received next are the same, the receiver estimates that the same signal is being received.",{"@attributes":{"id":"p-1197","num":"1196"},"figref":"FIGS. 161A to 161C"},"In the captured image illustrated in , a transmitter is shown small and so the number of bright lines is small. Only a small amount of data can be received at one time from this captured image. The captured image illustrated in  is an image captured using zoom, where the transmitter is shown large and so the number of bright lines is large. Thus, a large amount of data can be received at one time by using zoom. In addition, data can be received from far away, and a signal of a small transmitter can be received. Optical zoom or Ex zoom is employed as the zoom method. Optical zoom is realized by increasing the focal length of a lens. Ex zoom is a zoom method in which, in the case of performing imaging with a lower resolution than the imaging element capacity, not all but only a part of the imaging elements is used to thereby enlarge a part of the captured image. The captured image illustrated in  is an image captured using electronic zoom (image enlargement). Though the transmitter is shown large, bright lines are thicker in the enlargement by electronic zoom, and the number of bright lines is unchanged from pre-zoom. Hence, the reception characteristics are unchanged from pre-zoom.",{"@attributes":{"id":"p-1199","num":"1198"},"figref":"FIGS. 162A and 162B"},"The captured image illustrated in  is an image captured with focus on a subject. The captured image illustrated in  is an image captured out of focus. In the captured image illustrated in , bright lines can be observed even in the surroundings of the actual transmitter because the image is captured out of focus, so that more bright lines can be observed. Thus, more data can be received at one time and also data can be received farther away, by out-of-focus imaging. Imaging in macro mode can produce the same image as the captured image illustrated in .",{"@attributes":{"id":"p-1201","num":"1200"},"figref":"FIGS. 163A to 163C"},"The image illustrated in  is obtained by setting the exposure time to be longer than that in the visible light communication mode and shorter than that in the normal imaging mode. The imaging mode for obtaining such an image is referred to as \u201cbright line detection mode\u201d (intermediate mode). In the image illustrated in , bright lines of a transmitter are observed at the center left, while a darker normal captured image appears in the other part. When this image is displayed on the receiver, the user can easily point the receiver at the intended transmitter and capture the transmitter. In the bright line detection mode, an image is captured darker than in the normal imaging mode. Accordingly, imaging is performed in a high sensitivity mode to capture an image having brightness easily visible by humans, i.e. an image similar to that in the normal imaging mode. Since excessively high sensitivity causes the darker parts of the bright lines to become brighter, the sensitivity is set to such a level that allows the bright lines to be observed. The receiver switches to the visible light communication mode, and receives the transmission signal of the transmitter captured in the part designated by, for example, the user touching the image. The receiver may automatically switch to the visible light communication mode and receive the signal in the case where any bright line (transmission signal) is found in the captured image.","The receiver detects the transmission signal from the bright lines in the captured image, and highlights the detected part as illustrated in . The receiver can thus present the signal transmission part clearly to the user. The bright lines may be observed with regard to not only the transmission signal but also the pattern of the subject. Therefore, instead of determining whether or not there is the transmission signal from the bright lines in one image, it may be determined that there is the transmission signal in the case where the positions of the bright lines change in a plurality of images.","The image captured in the bright line detection mode is darker than the image captured in the normal imaging mode, and is not easily visible. Hence, the image with visibility increased by image processing may be displayed. The image illustrated in  is an example of an image in which the edges are extracted and the boundary of the imaging object is enhanced.",{"@attributes":{"id":"p-1205","num":"1204"},"figref":["FIG. 164","FIG. 492"]},"The upper limit of the exposure time that enables signal reception differs depending on the method of signal representation. The use of such a signal representation rule in which the number of bright lines is smaller and the interval between the bright lines is longer enables signal reception with a longer exposure time and also enables observation of bright lines with a longer exposure time, though the transmission efficiency is lower.","(Exposure Time in Intermediate Imaging Mode)","As illustrated in , clear bright lines are observable when the exposure time is up to about 3 times the modulation period. Since the modulation frequency is greater than or equal to 480 Hz, the exposure time in the intermediate imaging mode (intermediate mode) is desirably less than or equal to 1\/160 second.","If the exposure time is less than or equal to 1\/10000 second, an object not emitting light is hard to be seen under illumination light even when captured in the high sensitivity mode. Accordingly, the exposure time in the intermediate imaging mode is desirably greater than or equal to 1\/10000 second. This limitation is, however, expected to be eased by future improvement in sensitivity of imaging elements.",{"@attributes":{"id":"p-1209","num":"1208"},"figref":"FIG. 165"},"A receiver receives a series of signals by combining a plurality of received data segments. Therefore, if a transmission signal is abruptly changed, data segments before and after the change are mixed with each other, making it impossible to accurately combine the signals. In view of this, upon changing the transmission signal, a transmitter performs normal illumination for a predetermined time as a buffer zone while transmitting no signal, as in (a) in . In the case where no signal can be received for a predetermined time T shorter than the above-mentioned predetermined time T, the receiver abandons previously received data segments, thus avoiding mixture of data segments before and after the change. As an alternative, upon changing the transmission signal, the transmitter repeatedly transmits a signal X for notifying the change of the transmission signal, as in (b) in . Such repeated transmission prevents a failure to receive the transmission signal change notification X. As another alternative, upon changing the transmission signal, the transmitter repeatedly transmits a preamble, as in (c) in . In the case of receiving the preamble in a shorter period than the period in which the preamble appears in the normal signal, the receiver abandons previously received data segments.",{"@attributes":{"id":"p-1211","num":"1210"},"figref":"FIG. 166"},"An image illustrated in (a) in  is an image obtained by capturing a transmitter in just focus. By out-of-focus imaging, a receiver can capture an image illustrated in (b) in . Further out of focus leads to a captured image illustrated in (c) in . In (c) in , bright lines of a plurality of transmitters overlap each other, and the receiver cannot perform signal reception. Hence, the receiver adjusts the focus so that the bright lines of the plurality of transmitters do not overlap each other. In the case where only one transmitter is present in the imaging range, the receiver adjusts the focus so that the size of the transmitter is maximum in the captured image.","The receiver may compress the captured image in the direction parallel to the bright lines, but do not perform image compression in the direction perpendicular to the bright lines. Alternatively, the receiver reduces the degree of compression in the perpendicular direction. This prevents a reception error caused by the bright lines being blurred by compression.",{"@attributes":{"id":"p-1214","num":"1213"},"figref":"FIGS. 167 and 168"},"By capturing a plurality of transmitters, a receiver can estimate the position of the receiver using triangulation from position information of each transmitter and the position, size, and angle of each transmitter in the captured image. Accordingly, in the case where only one transmitter is captured in a receivable state, the receiver instructs the imaging direction or the moving direction by displaying an image including an arrow or the like, to cause the user to change the direction of the receiver or move backward so as to capture a plurality of transmitters. (a) in  illustrates a display example of an instruction to turn the receiver to the right to capture a transmitter on the right side. (b) in  illustrates a display example of an instruction to move backward to capture a transmitter in front.  illustrates a display example of an instruction to shake the receiver or the like to capture another transmitter, because the position of another transmitter is unknown to the receiver. Though it is desirable to capture a plurality of transmitters in one image, the position relation between transmitters in a plurality of images may be estimated using image processing or the sensor value of the 9-axis sensor. The receiver may inquire of a server about position information of nearby transmitters using an ID received from one transmitter, and instruct the user to capture a transmitter that is easiest to capture.","The receiver detects that the user is moving the receiver from the sensor value of the 9-axis sensor and, after a predetermined time from the end of the movement, displays a screen based on the last received signal. This prevents a situation where, when the user points the receiver to the intended transmitter, a signal of another transmitter is received during the movement of the receiver and as a result a process based on the transmission signal of the unintended transmitter is accidentally performed.","The receiver may continue the reception process during the movement, and perform a process based on the received signal, e.g. information obtainment from the server using the received signal as a key. In this case, after the process the receiver still continues the reception process, and performs a process based on the last received signal as a final process.","The receiver may process a signal received a predetermined number of times, or notify the signal received the predetermined number of times to the user. The receiver may process a signal received a largest number of times during the movement.","The receiver may include notification means for notifying the user when signal reception is successful or when a signal is detected in a captured image. The notification means performs notification by sound, vibration, display update (e.g. popup display), or the like. This enables the user to recognize the presence of a transmitter.",{"@attributes":{"id":"p-1220","num":"1219"},"figref":"FIG. 169"},"A plurality of transmitters such as displays are arranged adjacent to each other. In the case of transmitting the same signal, the plurality of transmitters synchronize the signal transmission timing, and transmit the signal from the entire surface as in (a) in . This allows a receiver to observe the plurality of displays as one large transmitter, so that the receiver can receive the signal faster or from a longer distance. In the case where the plurality of transmitters transmit different signals, the plurality of transmitters transmit the signals while providing a buffer zone (non-transmission area) where no signal is transmitted, as in (b) in . This allows the receiver to recognize the plurality of transmitters as separate transmitters with the buffer zone in between, so that the receiver can receive the signals separately.",{"@attributes":{"id":"p-1222","num":"1221"},"figref":"FIG. 170"},"As illustrated in (a) in , a liquid crystal display provides a backlight off period, and changes the liquid crystal state during backlight off to make the image in the state change invisible, thus enhancing dynamic resolution. On the liquid crystal display performing such backlight control, a signal is superimposed according to the backlight on period as illustrated in (b) in . Continuously transmitting the set of data (Hdr, Data, FCS) contributes to higher reception efficiency. The light emitting unit is in a bright state (Hi) in the first and last parts of the backlight on period. This is because, if the dark state (Lo) of the light emitting unit is continuous with the backlight off period, the receiver cannot determine whether Lo is transmitted as a signal or the light emitting unit is in a dark state due to the backlight off period.","A signal decreased in average luminance may be superimposed in the backlight off period.","Signal superimposition causes the average luminance to change as compared with the case where no signal is superimposed. Hence, adjustment such as increasing\/decreasing the backlight off period or increasing\/decreasing the luminance during backlight on is performed so that the average luminance is equal.",{"@attributes":{"id":"p-1226","num":"1225"},"figref":"FIG. 171"},"A liquid crystal display can reduce the luminance change of the entire screen, by performing backlight control at a different timing depending on position. This is called backlight scan. Backlight scan is typically performed so that the backlight is turned on sequentially from the end, as in (a) in . A captured image is obtained as a result. In the captured image , however, the part including the bright lines is divided, and there is a possibility that the entire screen of the display cannot be estimated as one transmitter. The backlight scan order is accordingly set so that all light emitting parts (signal superimposition parts) are connected when the vertical axis is the spatial axis in the backlight scan division direction and the horizontal axis is the time axis, as in (b) in . A captured image is obtained as a result. In the captured image , all bright line parts are connected, facilitating estimation that this is a transmission signal from one transmitter. Besides, since the number of continuously receivable bright lines increases, faster or longer-distance signal reception is possible. Moreover, the size of the transmitter is easily estimated, and therefore the position of the receiver can be accurately estimated from the position, size, and angle of the transmitter in the captured image.",{"@attributes":{"id":"p-1228","num":"1227"},"figref":"FIG. 172"},"In time-division backlight scan, in the case where the backlight on period is short and the light emitting parts (signal superimposition parts) cannot be connected on the graph in which the vertical axis is the spatial axis in the backlight scan division direction and the horizontal axis is the time axis, signal superimposition is performed in each light emitting part according to the backlight illumination timing, in the same way as in . Here, by controlling the backlight so that the distance from another backlight on part on the graph is maximum, it is possible to prevent mixture of bright lines in adjacent parts.",{"@attributes":{"id":"p-1230","num":"1229"},"figref":"FIG. 173","b":["100","101","102","103"]},"This embodiment is intended to save, through the use of visible light communication, the user's trouble when shopping in a store, thereby reducing the time for shopping. Conventionally, when the user buys a product in a store, the user needs to search for the site of the store and obtain coupon information beforehand. There is also a problem that it takes time to search the store for the product for which the coupon is available.","As illustrated in , the lighting fixture  periodically transmits lighting ID information of the lighting fixture  using visible light communication, in front of the store (an electronics retail store is assumed as an example). The wearable device  of the user receives the lighting ID information, and transmits the lighting ID information to the smartphone  using near field communication. The smartphone  transmits information of the user and the lighting ID information to the server  using a mobile line or the like. The smartphone  receives point information, coupon information, and the like of the store in front of the user, from the server . The user views the information received from the server , on the wearable device  or the smartphone . Thus, the user can buy displayed product information of the store on the spot, or be guided to an exhibit in the store. This is described in detail below, with reference to drawings.",{"@attributes":{"id":"p-1233","num":"1232"},"figref":"FIG. 174","b":["102","103","102","102","102"]},{"@attributes":{"id":"p-1234","num":"1233"},"figref":"FIG. 175","b":["103","201","102","202","203","204","205"]},{"@attributes":{"id":"p-1235","num":"1234"},"figref":["FIG. 176","FIG. 174"],"b":["101","100","301","101","102","302","102","102","103","303","103","202","304","202","203","305","202","204","306","202","307","205","202","308","202","201","309","201","102","310","102","311"]},"The smartphone  further transfers the information received from the server , to the wearable device  (Step S). If the notification setting of the wearable device  is ON, the wearable device  displays the information (Step S). When the wearable device displays the information, it is desirable to alert the user by vibration or the like, for the following reason. Since the user does not always enter the store, even when the coupon information or the like is transmitted, the user might be unaware of it.",{"@attributes":{"id":"p-1237","num":"1236"},"figref":"FIG. 177","b":["103","102"]},{"@attributes":{"id":"p-1238","num":"1237"},"figref":"FIG. 178","b":["101","103","103","403","101","101"]},"Visible light communication in the present disclosure allows the position of the user to be specified accurately. Therefore, for example in the case where the user is likely to enter a dangerous area in a factory as in , a warning can be issued to the user. Whether or not to issue a warning may be determined by the wearable device. It is thus possible to create such a warning system with a high degree of freedom that warns children of a specific age or below.",{"@attributes":{"id":"p-1240","num":"1239"},"figref":"FIG. 180"},"First, a company A ex managing a server ex is requested to distribute information to a mobile terminal, by another company B or individual ex. For example, the distribution of detailed advertisement information, coupon information, map information, or the like to the mobile terminal that performs visible light communication with a signage is requested. The company A ex managing the server manages information distributed to the mobile terminal in association with arbitrary ID information. A mobile terminal ex obtains ID information from a subject ex by visible light communication, and transmits the obtained ID information to the server ex. The server ex transmits the information corresponding to the ID information to the mobile terminal, and counts the number of times the information corresponding to the ID information is transmitted. The company A ex managing the server charges the fee corresponding to the count, to the requesting company B or individual ex. For example, a larger fee is charged when the count is larger.",{"@attributes":{"id":"p-1242","num":"1241"},"figref":"FIG. 181"},"In Step ex, the company A managing the server receives the request for information distribution from another company B. In Step ex, the information requested to be distributed is managed in association with the specific ID information in the server managed by the company A. In Step ex, the mobile terminal receives the specific ID information from the subject by visible light communication, and transmits it to the server managed by the company A. The visible light communication method has already been described in detail in the other embodiments, and so its description is omitted here. The server transmits the information corresponding to the specific ID information received from the mobile terminal, to the mobile terminal. In Step ex, the number of times the information is distributed is counted in the server. Lastly, in Step ex, the fee corresponding to the information distribution count is charged to the company B. By such charging according to the count, the appropriate fee corresponding to the advertising effect of the information distribution can be charged to the company B.",{"@attributes":{"id":"p-1244","num":"1243"},"figref":["FIG. 182","FIG. 181"]},"In Step ex, whether or not a predetermined time has elapsed from the start of the information distribution is determined. In the case of determining that the predetermined time has not elapsed, no fee is charged to the company B in Step ex. In the case of determining that the predetermined time has elapsed, the number of times the information is distributed is counted in Step ex. In Step ex, the fee corresponding to the information distribution count is charged to the company B. Since the information distribution is performed free of charge within the predetermined time, the company B can receive the accounting service after checking the advertising effect and the like.",{"@attributes":{"id":"p-1246","num":"1245"},"figref":["FIG. 183","FIG. 182"]},"In Step ex, the number of times the information is distributed is counted. In the case of determining that the predetermined time has not elapsed from the start of the information distribution in Step ex, no fee is charged in Step ex. In the case of determining that the predetermined time has elapsed, on the other hand, whether or not the number of times the information is distributed is greater than or equal to a predetermined number is determined in Step ex. In the case where the number of times the information is distributed is less than the predetermined number, the count is reset, and the number of times the information is distributed is counted again. In this case, no fee is charged to the company B regarding the predetermined time during which the number of times the information is distributed is less than the predetermined number. In the case where the count is greater than or equal to the predetermined number in Step ex, the count is reset and started again in Step ex. In Step ex, the fee corresponding to the count is charged to the company B. Thus, in the case where the count during the free distribution time is small, the free distribution time is provided again. This enables the company B to receive the accounting service at an appropriate time. Moreover, in the case where the count is small, the company A can analyze the information and, for example when the information is out of season, suggest the change of the information to the company B. In the case where the free distribution time is provided again, the time may be shorter than the predetermined time provided first. The shorter time than the predetermined time provided first reduces the burden on the company A. Further, the free distribution time may be provided again after a fixed time period. For instance, if the information is influenced by seasonality, the free distribution time is provided again after the fixed time period until the new season begins.","Note that the charge fee may be changed according to the amount of data, regardless of the number of times the information is distributed. Distribution of a predetermined amount of data or more may be charged, while distribution is free of charge within the predetermined amount of data. The charge fee may be increased with the increase of the amount of data. Moreover, when managing the information in association with the specific ID information, a management fee may be charged. By charging the management fee, it is possible to determine the fee upon requesting the information distribution.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.","(Modulation Scheme that Facilitates Reception)",{"@attributes":{"id":"p-1250","num":"1249"},"figref":"FIGS. 184A, 184B, and 185"},"A transmission signal is made up of a header (H) and a body (Body). The header includes a unique signal pattern. A receiver finds this unique pattern from a received signal, recognizes which part of the received signal represents the header or the body based on the position of the unique pattern, and receives data.","In the case where the transmission signal is modulated in a pattern (a) in , the receiver can receive data when successively receiving the header and the body that follows the header. The duration in which the receiver can continuously receive the signal depends on the size of a transmitter shown in a captured image (taken image). In the case where the transmitter is small or the transmitter is captured from a distance, the duration in which the receiver can continuously receive the signal is short. In the case where the duration (continuous reception time) in which the receiver can continuously receive the signal is the same as the time taken for transmitting one block including the header and the body, the receiver can receive data only when the transmission start point and the reception start point of the header are the same. (a) in  illustrates the case where the continuous reception time is a little longer than the transmission time for one block including the header and the body. Each arrow indicates the continuous reception time. The receiver can receive data when receiving the signal at the timings indicated by the thick arrows, but cannot receive data when receiving the signal at the timings indicated by the thin arrows because the header and the body are not completely contained in the received signal.","In the case where the transmission signal is modulated in a pattern (b) in , the receiver can receive data at more reception timings. The transmitter transmits the signal modulated with \u201cbody, header, body\u201d as one set. The two bodies in the same set represent the same signal. The receiver does not need to continuously receive the whole signal included in the body, but can restore the body by concatenating the body parts before and after the header. Hence, the receiver can receive data so long as it can continuously receive the whole signal included in the header. In , the reception timings at which data can be received are indicated by the thick lines. As illustrated in , data reception is possible at more reception timings in (b) than in (a).","In the modulation scheme (b) in , the receiver can restore the body in the case where the body signal length is fixed. The receiver can also restore the body in the case where information of the body signal length is included in the header.","In detail, as illustrated in , the receiver first detects the header having a unique bright line pattern, from the captured image (bright line image) including bright lines. The receiver then sequentially reads each signal of the body following the header (in the direction () in ). Each time the receiver reads a signal, the receiver determines whether or not the signal of the body has been read for the body signal length. That is, the receiver determines whether or not the whole signal included in the body has been read. In the case of determining that the whole signal has not been read, the receiver reads a signal following the read signal. If there is no following signal, the receiver sequentially reads each signal of the body preceding the header (in the direction () in ). The whole signal included in the body is read in this way. Here, in the case where the body signal length is fixed, the receiver holds the body signal length beforehand, and makes the above-mentioned determination using the body signal length. Alternatively, the receiver specifies the body signal length from the header, and makes the above-mentioned determination using the body signal length.","Even in the case where the body signal length is variable, if the modulation scheme is defined so that the body modulated by the same transmitter has the same signal length, the receiver can restore the body by estimating the body signal length from the signal length between two headers. In this case, in the modulation scheme (b) in , a signal corresponding to two headers and two bodies needs to be received at one time. In a modulation scheme illustrated in , on the other hand, merely receiving a signal corresponding to two headers and one body enables the body signal length to be estimated.  illustrates the modulation scheme in which \u201cbody, header, body, header 2 (H2)\u201d constitute one set, where the receiver can receive data so long as it can continuously receive the whole signal included in the header.","Thus, the transmitter in this embodiment determines a first luminance change pattern corresponding to a body which is a part of a signal to be transmitted and a second luminance change pattern indicating a header for specifying the body, and transmits the header and the body by changing in luminance according to the first luminance change pattern, the second luminance change pattern, and the first luminance change pattern in this order. The transmitter may also determine a third luminance change pattern indicating another header different from the header, and transmit the header, the body, and the other header by changing in luminance according to the first luminance change pattern, the second luminance change pattern, the first luminance change pattern, and the third luminance change pattern in this order.","(Communication Using Bright Lines and Image Recognition)",{"@attributes":{"id":"p-1258","num":"1257"},"figref":"FIG. 186"},"A receiver can not only read a signal from bright lines in the captured image, but also analyze a part other than the bright lines by image processing. For instance, the receiver receives a signal from a transmitter such as a digital signage. Even in the case where the receiver receives the same signal, the receiver can display a different advertisement depending on an image displayed on a screen of the transmitter.","Since the bright lines are noise in image processing, image processing may be performed after interpolating pixel values in the bright line part from pixels right and left of the bright lines. Alternatively, image processing may be performed on an image except the bright line part.","(Imaging Element Use Method Suitable for Visible Light Signal Reception)",{"@attributes":{"id":"p-1261","num":"1260"},"figref":"FIGS. 187A to 187C"},"The receiver includes an imaging element , as illustrated in . The imaging element includes effective pixels which constitute a part for capturing an image, optical black for measuring noise such as dark current, and an ineffective area . The optical black includes VOB for measuring vertical noise and HOB for measuring horizontal noise. Since bright lines appear in a direction (horizontal direction), during exposure of the VOB or the ineffective area , bright lines are not obtained and signal reception is impossible. The time during which signal reception is possible can be increased by switching, upon visible light communication, to such an imaging mode that does not use the VOB and the ineffective area or minimally uses the VOB and the ineffective area ","As illustrated in , the exposure time in an effective pixel area which is an area including the effective pixels can be increased by not using the VOB and the ineffective area . In detail, in normal imaging, one captured image is obtained in each of time t to t, time t to t, and time t to t, as illustrated in (a) in . Since the VOB and the ineffective area are also used when obtaining each captured image, the exposure time (the time during which electric charge is read, the shaded part in ) in the effective pixel area is time t to t, time t to t, and time t to t.","In visible light communication, by not using the VOB and the ineffective area , the exposure time in the effective pixel area can be increased by the time during which the VOB and the ineffective area are used, as illustrated in (b) in . That is, the time during which reception is possible in visible light communication can be increased. This enables reception of more signals.","In normal imaging, the exposure of each exposure line in the effective pixel area starts after a predetermined time m elapses from when the exposure of its adjacent exposure line starts, as illustrated in (a) in . In visible light communication, on the other hand, since the exposure time in the effective pixel area is increased, the exposure of each exposure line in the effective pixel area starts after a predetermined time n (n>m) elapses from when the exposure of its adjacent exposure line starts, as illustrated in (b) in .","Thus, in normal imaging, the receiver in this embodiment performs electric charge reading on each of a plurality of exposure lines in an area including optical black in the image sensor, after a predetermined time elapses from when electric charge reading is performed on an exposure line adjacent to the exposure line. In visible light communication, the receiver performs electric charge reading on each of a plurality of exposure lines in an area other than the optical black in the image sensor, after a time longer than the predetermined time elapses from when electric charge reading is performed on an exposure line adjacent to the exposure line, the optical black not being used in electric charge reading.","The time during which signal reception is possible can be further increased by switching, upon visible light communication, to such an imaging mode that does not reduce the number of vertical pixels by a process such as demosaicing or clipping.","When an image is captured in such a mode that does not use the VOB and the ineffective area and does not reduce the number of vertical pixels, the timing of exposing the bottom edge of the captured image and the timing of exposing the top edge of the captured image at the next frame are continuous, so that continuous signal reception is possible. Even in the case where the VOB and the like cannot be completely disabled, by modulating the transmission signal by an error correctable scheme, continuous signal reception is possible.","In , photodiodes in the horizontal direction are exposed simultaneously, as a result of which horizontal bright lines appear. In visible light communication, this exposure mode and an exposure mode of exposing photodiodes in the vertical direction simultaneously are alternately applied to obtain horizontal bright lines and vertical bright lines. Thus, the signal can be stably received regardless of the shape of the transmitter.","(Continuous Signal Reception)",{"@attributes":{"id":"p-1270","num":"1269"},"figref":"FIG. 187D"},"An imaging element includes effective pixels which are pixels for converting received light intensity to an image and ineffective pixels for not converting received light intensity to an image but using it as, for example, reference intensity of dark current. In the normal imaging mode, there is the time during which only the ineffective pixels receive light, i.e. the time during which signal reception is impossible, as illustrated in (a). In the visible light communication mode, the time during which reception is possible is increased by minimizing the time during which only the ineffective pixels receive light as illustrated in (b) or by setting the effective pixels to constantly receive light as illustrated in (c). This also enables continuous reception. Though there is the time during which reception is impossible in the case of (b), the use of error correction code in the transmission data allows the whole signal to be estimated even when a part of the signal cannot be received.","(Method of Receiving Signal from Transmitter Captured in Small Size)",{"@attributes":{"id":"p-1272","num":"1271"},"figref":"FIG. 187E"},"As illustrated in , the process starts in Step . In Step , a receiver receives a signal. In Step , the receiver detects a header. In Step , the receiver determines whether or not the data size of a body following the header is known. In the case of Yes, the process proceeds to Step . In the case of No, the process proceeds to Step , and the receiver reads the data size of the body following the header, from the header. The process then proceeds to Step . In Step , the receiver determines whether or not the signal indicating the body is all successively received following the header. In the case of Yes, the process proceeds to Step , and the receiver reads the body part from the signal received following the header. In Step , the process ends. In the case of No, the process proceeds to Step , and the receiver determines whether or not the total data length of the part received following the header and the part received before the header is sufficient for the data length of the body. In the case of Yes, the process proceeds to Step , and the receiver reads the body part by concatenating the part received following the header and the part received before the header. In Step , the process ends. In the case of No, the process proceeds to Step , and the receiver determines whether or not means for capturing many bright lines from a transmitter is available. In the case of Yes, the process proceeds to Step , and the receiver changes to a setting capable of capturing many bright lines. The process then returns to Step . In the case of No, the process proceeds to Step , and the receiver notifies that a transmitter is present but the image capture size is insufficient. In Step , the receiver notifies the direction toward the transmitter and that reception is possible if moving closer to the transmitter. In Step , the process ends.","With this method, the signal can be stably received even in the case where the number of exposure lines passing through the transmitter in the captured image is small.","(Captured Image Size Suitable for Visible Light Signal Reception)",{"@attributes":{"id":"p-1275","num":"1274"},"figref":"FIGS. 188 and 189A"},"In the case where an effective pixel area of an imaging element is 4:3, if an image is captured at 16:9, top and bottom parts of the image are clipped. When horizontal bright lines appear, bright lines are lost due to this clipping, and the time during which signal reception is possible is shortened. Likewise, in the case where the effective pixel area of the imaging element is 16:9, if an image is captured at 4:3, right and left parts of the image are clipped. When vertical bright lines appear, the time during which signal reception is possible is shortened. In view of this, an aspect ratio that involves no clipping, i.e. 4:3 in  and 16:9 in , is set as an aspect ratio for imaging in the visible light communication mode. This contributes to a longer time during which reception is possible.","Thus, the receiver in this embodiment further sets an aspect ratio of an image obtained by the image sensor. In visible light communication, the receiver determines whether or not an edge of the image perpendicular to the exposure lines (bright lines) is clipped in the set aspect ratio, and changes the set aspect ratio to a non-clipping aspect ratio in which the edge is not clipped in the case of determining that the edge is clipped. The image sensor in the receiver obtains the bright line image in the non-clipping aspect ratio, by capturing the subject changing in luminance.",{"@attributes":{"id":"p-1278","num":"1277"},"figref":"FIG. 189B"},"This reception method sets an imaging aspect ratio for increasing the reception time and receiving a signal from a small transmitter.","As illustrated in , the process starts in Step Ba. In Step Bb, the receiver changes the imaging mode to the visible light communication mode. In Step Bc, the receiver determines whether or not the captured image aspect ratio is set to be closest to the effective pixel aspect ratio. In the case of Yes, the process proceeds to Step Bd, and the receiver sets the captured image aspect ratio to be closest to the effective pixel aspect ratio. In Step Be, the process ends. In the case of No, the process ends in Step Be. Setting the aspect ratio in the visible light communication mode in this way reduces the time during which reception is impossible, and also enables signal reception from a small transmitter or a distant transmitter.",{"@attributes":{"id":"p-1281","num":"1280"},"figref":"FIG. 189C"},"This reception method sets an imaging aspect ratio for increasing the number of samples per unit time.","As illustrated in , the process starts in Step Ca. In Step Cb, the receiver changes the imaging mode to the visible light communication mode. In Step Cc, the receiver determines whether or not, though bright lines of exposure lines can be recognized, signal reception is impossible because the number of samples per unit time is small In the case of Yes, the process proceeds to Step Cd, and the receiver sets the captured image aspect ratio to be most different from the effective pixel aspect ratio. In Step Ce, the receiver increases the imaging frame rate. The process then returns to Step Cc. In the case of No, the process proceeds to Step Cf, and the receiver receives a signal. The process then ends.","Setting the aspect ratio in the visible light communication mode in this way enables reception of a high frequency signal, and also enables reception even in an environment with a large amount of noise.","(Visible Light Signal Reception Using Zoom)",{"@attributes":{"id":"p-1285","num":"1284"},"figref":"FIG. 190"},"A receiver finds an area where bright lines are present in a captured image , and performs zoom so that as many bright lines as possible appear. The number of bright lines can be maximized by enlarging the bright line area in the direction perpendicular to the bright line direction until the bright line area lies over the top and bottom edges of the screen as in a captured image ","The receiver may find an area where bright lines are displayed clearly, and perform zoom so that the area is shown in a large size as in a captured image ","In the case where a plurality of bright line areas are present in a captured image, the above-mentioned process may be performed for each of the bright line areas, or performed for a bright line area designated by a user from the captured image.","(Image Data Size Reduction Method Suitable for Visible Light Signal Reception)",{"@attributes":{"id":"p-1289","num":"1288"},"figref":"FIG. 191"},"In the case where the image data size needs to be reduced when sending a captured image (a) from an imaging unit to an image processing unit or from an imaging terminal (receiver) to a server, reduction or pixel omission in the direction parallel to bright lines as in (c) enables the data size to be reduced without decreasing the amount of information of bright lines. When reduction or pixel omission is performed as in (b) or (d), on the other hand, the number of bright lines decreases or it becomes difficult to recognize bright lines. Upon image compression, too, a decrease in reception efficiency can be prevented by not performing compression in the direction perpendicular to bright lines or by setting the compression rate in the perpendicular direction lower than that in the parallel direction. Note that a moving average filter is applicable to any of the parallel and perpendicular directions, and is effective in both data size reduction and noise reduction.","Thus, the receiver in this embodiment further: compresses the bright line image in a direction parallel to each of the plurality of bright lines included in the bright line image, to generate a compressed image; and transmits the compressed image.","(Modulation Scheme with High Reception Error Detection Accuracy)",{"@attributes":{"id":"p-1292","num":"1291"},"figref":"FIG. 192"},"Error detection by a parity bit detects a 1-bit reception error, and so cannot detect a mix-up between \u201c01\u201d and \u201c10\u201d and a mix-up between \u201c00\u201d and \u201c11\u201d. In a modulation scheme (a), \u201c01\u201d and \u201c10\u201d tend to be mixed up because the L position differs only by one between \u201c01\u201d and \u201c10\u201d. In a modulation scheme (b), on the other hand, the L position differs by two between \u201c01\u201d and \u201c10\u201d and between \u201c00\u201d and \u201c11\u201d. Hence, a reception error can be detected with high accuracy through the use of the modulation scheme (b). The same applies to the modulation schemes in .","Thus, in this embodiment, luminance change patterns between which the timing at which a predetermined luminance value (e.g. L) occurs is different are assigned to different signal units beforehand, to prevent two luminance change patterns from being assigned to signal units of the same parity (e.g. \u201c01\u201d and \u201c10\u201d), the timing at which the predetermined luminance value occurs in one of the two luminance change patterns being adjacent to the timing at which the predetermined luminance value occurs in the other one of the two luminance change patterns. The transmitter in this embodiment determines, for each signal unit included in the transmission signal, a luminance change pattern assigned to the signal unit.","(Change of Operation of Receiver According to Situation)",{"@attributes":{"id":"p-1295","num":"1294"},"figref":"FIG. 193"},"A receiver operates differently according to a situation in which reception starts. For instance, in the case of being activated in Japan, the receiver receives a signal modulated by phase shift keying at 60 kHz, and downloads data from a server using the received ID as a key. In the case of being activated in the US, the receiver receives a signal modulated by frequency shift keying at 50 kHz, and downloads data from a server using the received ID as a key. The situation according to which the operation of the receiver changes includes a location (country or building) where the receiver is present, a base station or a wireless access point (Wi-Fi, Bluetooth, IMES, etc.) in communication with the receiver , a time of day, and so on.","For example, the receiver transmits, to a server , position information, information of a last accessed wireless base station (a base station of a carrier communication network, Wi-Fi, Bluetooth\u00ae, IMES, etc.), or an ID last received by visible light communication. The server estimates the position of the receiver based on the received information, and transmits a reception algorithm capable of receiving transmission signals of transmitters near the position and information (e.g. URI) of an ID management server managing IDs of transmitters near the position. The receiver receives a signal of a transmitter or using the received algorithm, and inquires of an ID management server or indicated by the received information using the ID as a key.","With this method, communication can be performed by a scheme that differs depending on country, region, building, or the like. The receiver in this embodiment may, upon receiving a signal, switch the server to be accessed, the reception algorithm, or the signal modulation method illustrated in , according to the frequency used for modulating the signal.","(Notification of Visible Light Communication to Humans)",{"@attributes":{"id":"p-1299","num":"1298"},"figref":"FIG. 194"},"A light emitting unit in a transmitter repeatedly performs blinking visually recognizable by humans and visible light communication, as illustrated in (a) in . Blinking visually recognizable by humans can notify humans that visible light communication is possible. Upon seeing that the transmitter is blinking, a user notices that visible light communication is possible. The user accordingly points a receiver at the transmitter to perform visible light communication, and conducts user registration of the transmitter ","Thus, the transmitter in this embodiment repeatedly alternates between a step of a light emitter transmitting a signal by changing in luminance and a step of the light emitter blinking so as to be visible to the human eye.","The transmitter may include a visible light communication unit and a blinking unit (communication state display unit) separately, as illustrated in (b) in .","The transmitter may operate as illustrated in (c) in  using the modulation scheme in , thereby making the light emitting unit appear blinking to humans while performing visible light communication. In detail, the transmitter repeatedly alternates between high-luminance visible light communication with brightness 75% and low-luminance visible light communication with brightness 1%. As an example, by operating as illustrated in (c) in  when an abnormal condition or the like occurs in the transmitter and the transmitter is transmitting a signal different from normal, the transmitter can alert the user without stopping visible light communication.","(Expansion in Reception Range by Diffusion Plate)",{"@attributes":{"id":"p-1304","num":"1303"},"figref":"FIG. 195"},"A receiver is in a normal mode in (a) in , and in a visible light communication mode in (b) in . The receiver includes a diffusion plate in front of an imaging unit. In the visible light communication mode, the receiver moves the diffusion plate to be in front of the imaging unit so that a light source is captured wider. Here, the position of the diffusion plate is adjusted to prevent light from a plurality of light sources from overlapping each other. A macro lens or a zoom lens may be used instead of the diffusion plate . This enables signal reception from a distant transmitter or a small transmitter.","The imaging direction of the imaging unit may be moved instead of moving the diffusion plate ","An area of an image sensor where the diffusion plate is shown may be used only in the visible light communication mode and not in the normal imaging mode. In this way, the above-mentioned advantageous effect can be achieved without moving the diffusion plate or the imaging unit.","(Method of Synchronizing Signal Transmission from a Plurality of Transmitters)",{"@attributes":{"id":"p-1308","num":"1307"},"figref":"FIGS. 196 and 197"},"In the case of using a plurality of projectors for projection mapping or the like, for projection onto one part, there is a need to transmit a signal only from one projector or synchronize the signal transmission timings of the plurality of projectors, in order to avoid interference.  illustrates a mechanism for synchronization of transmission.","Projectors A and B that project onto the same projection surface transmit signals as illustrated in . A receiver captures the projection surface for signal reception, calculates the time difference between signals a and b, and adjusts the signal transmission timing of each projector.","Since the projectors A and B are not synchronous at the operation start, a time (total pause time) during which both the projectors A and B transmit no signal is provided to prevent the signals a and b from overlapping and being unable to be received. The signal transmitted from each projector may be changed as the timing adjustment for the projector progresses. For example, efficient timing adjustment can be made by taking a longer total pause time at the operation start and shortening the total pause time as the timing adjustment progresses.","For accurate timing adjustment, it is desirable that the signals a and b are contained in one captured image. The imaging frame rate of the receiver tends to be 60 fps to 7.5 fps. By setting the signal transmission period to less than or equal to 1\/7.5 second, the signals a and b can be contained in an image captured at 7.5 fps. By setting the signal transmission period to less than or equal to 1\/60 second, the signals a and b can be reliably contained in an image captured at 30 fps.",{"@attributes":{"id":"p-1313","num":"1312"},"figref":"FIG. 197"},"(Visible Light Signal Reception by Illuminance Sensor and Image Sensor)",{"@attributes":{"id":"p-1314","num":"1313"},"figref":"FIG. 198"},"An image sensor consumes more power than an illuminance sensor. Accordingly, when a signal is detected by an illuminance sensor , a receiver activates an image sensor to receive the signal. As illustrated in (a) in , the receiver receives a signal transmitted from a transmitter , by the illuminance sensor . After this, the receiver activates the image sensor , receives the transmission signal of the transmitter by the image sensor, and also recognizes the position of the transmitter . At the time when the image sensor receives a part of the signal, if the part is the same as the signal received by the illuminance sensor , the receiver provisionally determines that the same signal is received, and performs a subsequent process such as displaying the current position. The determination is completed once the image sensor has successfully received the whole signal.","Upon the provisional determination, information that the determination is not completed may be displayed. For instance, the current position is displayed semi-transparently, or a position error is displayed.","The part of the signal may be, for example, 20% of the total signal length or an error detection code portion.","In a situation as illustrated in (b) in , the receiver cannot receive signals by the illuminance sensor due to interference, but can recognize the presence of signals. For example, the receiver can estimate that signals are present, in the case where a peak appears in transmission signal modulation frequency when the sensor value of the illuminance sensor is Fourier transformed. Upon estimating that signals are present from the sensor value of the illuminance sensor , the receiver activates the image sensor and receives signals from transmitters and ","(Reception Start Trigger)",{"@attributes":{"id":"p-1319","num":"1318"},"figref":"FIG. 199"},"Power is consumed while an image sensor or an illuminance sensor (hereafter collectively referred to as \u201clight receiving sensor\u201d) is on. Stopping the light receiving sensor when not needed and activating it when needed contributes to improved power consumption efficiency. Here, since the illuminance sensor consumes less power than the image sensor, only the image sensor may be controlled while the illuminance sensor is always on.","In (a) in , a receiver detects movement from a sensor value of a 9-axis sensor, and activates a light receiving sensor to start reception.","In (b) in , the receiver detects an operation of tilting the receiver horizontally from the sensor value of the 9-axis sensor, and activates a light receiving sensor pointed upward to start reception.","In (c) in , the receiver detects an operation of sticking the receiver out from the sensor value of the 9-axis sensor, and activates a light receiving sensor in the stick out direction to start reception.","In (d) in , the receiver detects an operation of directing the receiver upward or shaking the receiver from the sensor value of the 9-axis sensor, and activates a light receiving sensor pointed upward to start reception.","Thus, the receiver in this embodiment further: determines whether or not the receiver (reception device) is moved in a predetermined manner; and activates the image sensor, in the case of determining that the reception device is moved in the predetermined manner.","(Reception Start Gesture)",{"@attributes":{"id":"p-1326","num":"1325"},"figref":"FIG. 200"},"A receiver such as a smartphone detects an operation of setting the receiver upright and sliding the receiver in the horizontal direction or repeatedly sliding the receiver in the horizontal direction, from a sensor value of a 9-axis sensor. The receiver then starts reception, and obtains the position of each transmitter based on the received ID. The receiver obtains the position of the receiver, from the relative position relations between the receiver and the plurality of transmitters . The receiver can stably capture the plurality of transmitters by being slid, and estimate the position of the receiver with high accuracy by triangulation.","This operation may be performed only when the receiver's home screen is in the foreground. This can prevent the communication from being launched despite the user's intension while the user is using another application.","(Example of Application to Car Navigation System)",{"@attributes":{"id":"p-1329","num":"1328"},"figref":"FIGS. 201 and 202"},"A transmitter such as a car navigation system transmits information for wirelessly connecting to the transmitter , such as Bluetooth\u00ae pairing information, Wi-Fi SSID and password, or an IP address. A receiver such as a smartphone establishes wireless connection with the transmitter based on the received information, and performs subsequent communication via the wireless connection.","As an example, a user inputs a destination, store information to be searched for, or the like to the smartphone . The smartphone transmits the input information to the car navigation system via the wireless connection, and the car navigation system displays route information. As another example, the smartphone operates as a controller of the car navigation system , to control music or video reproduced in the car navigation system . As another example, music or video held in the smartphone is reproduced in the car navigation system . As another example, the car navigation system obtains nearby store information or road congestion information, and has the smartphone display the information. As another example, upon receiving a call, the smartphone uses a microphone and a speaker of the wirelessly connected car navigation system for a conversation process. The smartphone may establish wireless connection and performs the above-mentioned operation upon receiving a call.","In the case where the car navigation system is set in an automatic connection mode for wireless connection, the car navigation system is wirelessly connected to a registered terminal automatically. In the case where the car navigation system is not in the automatic connection mode, the car navigation system transmits connection information using visible light communication, and waits for connection. The car navigation system may transmit connection information using visible light communication and wait for connection, even in the automatic connection mode. In the case where the car navigation system is manually connected, the automatic connection mode may be cleared, and a terminal automatically connected to the car navigation system may be disconnected.","(Example of Application to Content Protection)",{"@attributes":{"id":"p-1333","num":"1332"},"figref":"FIG. 203"},"A transmitter such as a television transmits content protection information held in the transmitter or a device connected to the transmitter . A receiver such as a smartphone receives the content protection information, and performs content protection for a predetermined time afterward so that content protected by the content protection information in the transmitter or the device can be reproduced. Thus, content held in another device possessed by the user can be reproduced in the receiver.","The transmitter may store the content protection information in a server, and the receiver may obtain the content protection information from the server using a received ID of the transmitter as a key.","The receiver may transmit the obtained content protection information to another device.","(Example of Application to Electronic Lock)",{"@attributes":{"id":"p-1337","num":"1336"},"figref":"FIG. 204A"},"A receiver receives an ID transmitted from a transmitter , and transmits the ID to a server . When receiving the ID of the transmitter from the receiver , the server unlocks a door , opens an automatic door, or calls an elevator for moving to a floor registered in the receiver to a floor on which the receiver is present. The receiver thus functions as a key, allowing the user to unlock the door before reaching the door as an example.","Thus, the receiver in this embodiment: obtains a first bright line image which is an image including a plurality of bright lines, by capturing a subject (e.g. the above-mentioned transmitter) changing in luminance; and obtains first transmission information (e.g. the ID of the subject) by demodulating data specified by a pattern of the plurality of bright lines included in the obtained first bright line image. After the first transmission information is obtained, the receiver causes an opening and closing drive device of a door to open the door, by transmitting a control signal (e.g. the ID of the subject).","To prevent malicious operation, the server may verify that the device in communication is the receiver , through the use of security protection such as a secure element of the receiver . Moreover, to make sure that the receiver is near the transmitter , the server may, upon receiving the ID of the transmitter , issue an instruction to transmit a different signal to the transmitter and, in the case where the signal is transmitted from the receiver , unlock the door ","In the case where a plurality of transmitters as lighting devices are arranged along a passageway to the door , the receiver receives IDs from these transmitters , to determine whether or not the receiver is approaching the door . For example, in the case where the values indicated by the IDs decrease in the order in which the IDs are obtained, the receiver determines that the receiver is approaching the door. Alternatively, the receiver specifies the position of each transmitter based on the corresponding ID, and estimates the position of the receiver based on the position of each transmitter and the position of the transmitter shown in the captured image. The receiver then compares the position of the door held beforehand and the estimated position of the receiver as needed, to determine whether or not the receiver is approaching the door . Upon determining that the receiver is approaching the door , the receiver transmits any of the obtained IDs to the server . The server responsively performs a process for opening the door as an example.","Thus, the receiver in this embodiment: obtains a second bright line image which is an image including a plurality of bright lines, by capturing another subject changing in luminance; and obtains second transmission information (e.g. the ID of the other subject) by demodulating data specified by a pattern of the plurality of bright lines included in the obtained second bright line image. The receiver determines whether or not the receiver is approaching the door, based on the obtained first transmission information and second transmission information. In the case of determining that the receiver is approaching the door, the receiver transmits the control signal (e.g. the ID of any of the subjects).",{"@attributes":{"id":"p-1343","num":"1342"},"figref":"FIG. 204B"},"An information communication method in this embodiment is an information communication method of obtaining information from a subject, and includes steps SK to SK.","In detail, the information communication method includes: a first exposure time setting step SK of setting a first exposure time of an image sensor so that, in an image obtained by capturing a first subject by the image sensor, a plurality of bright lines corresponding to exposure lines included in the image sensor appear according to a change in luminance of the first subject, the first subject being the subject; a first bright line image obtainment step SK of obtaining a first bright line image which is an image including the plurality of bright lines, by capturing the first subject changing in luminance by the image sensor with the set first exposure time; a first information obtainment step SK of obtaining first transmission information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained first bright line image; and a door control step SK of causing an opening and closing drive device of a door to open the door, by transmitting a control signal after the first transmission information is obtained.",{"@attributes":{"id":"p-1346","num":"1345"},"figref":"FIG. 204C"},"An information communication device K in this embodiment is an information communication device that obtains information from a subject, and includes structural elements K to K.","In detail, the information communication device K includes: an exposure time setting unit K that sets an exposure time of an image sensor so that, in an image obtained by capturing the subject by the image sensor, a plurality of bright lines corresponding to exposure lines included in the image sensor appear according to a change in luminance of the subject; a bright line image obtainment unit K that includes the image sensor, and obtains a bright line image which is an image including the plurality of bright lines, by capturing the subject changing in luminance with the set exposure time; an information obtainment unit K that obtains transmission information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained bright line image; and a door control unit K that causes an opening and closing drive device of a door to open the door, by transmitting a control signal after the transmission information is obtained.","In the information communication method and the information communication device K illustrated in , the receiver including the image sensor can be used as a door key, thus eliminating the need for a special electronic lock, for instance as illustrated in . This enables communication between various devices including a device with low computational performance.","It should be noted that in the above embodiments, each of the constituent elements may be constituted by dedicated hardware, or may be obtained by executing a software program suitable for the constituent element. Each constituent element may be achieved by a program execution unit such as a CPU or a processor reading and executing a software program stored in a recording medium such as a hard disk or semiconductor memory. For example, the program causes a computer to execute the information communication method illustrated in the flowchart of .","(Example of Application to Store Visit Information Transmission)",{"@attributes":{"id":"p-1351","num":"1350"},"figref":"FIG. 205"},"A receiver transmits an ID transmitted from a transmitter , to a server . The server notifies a store staff of order information associated with the receiver . The store staff prepares a product or the like, based on the order information. Since the order has already been processed when the user enters the store, the user can promptly receive the product or the like.","(Example of Application to Location-Dependent Order Control)",{"@attributes":{"id":"p-1353","num":"1352"},"figref":"FIG. 206"},"A receiver displays a screen allowing an order only when a transmission signal of a transmitter is received. In this way, a store can avoid taking an order from a customer who is not nearby.","Alternatively, the receiver places an order by transmitting an ID of the transmitter in addition to order information. This enables the store to recognize the position of the orderer, and recognize the position to which a product is to be delivered or estimate the time by which the orderer is likely to arrive at the store. The receiver may add the travel time to the store calculated from the moving speed, to the order information. Regarding suspicious purchase based on the current position (e.g. purchase of a ticket of a train departing from a station other than the current position), the receiver may reject the purchase.","(Example of Application to Route Guidance)",{"@attributes":{"id":"p-1356","num":"1355"},"figref":"FIG. 207"},"A receiver receives a transmission ID of a transmitter such as a guide sign, obtains data of a map displayed on the guide sign from a server, and displays the map data. Here, the server may transmit an advertisement suitable for the user of the receiver , so that the receiver displays the advertisement information, too. The receiver displays the route from the current position to the location designated by the user.","(Example of Application to Location Notification)",{"@attributes":{"id":"p-1358","num":"1357"},"figref":"FIG. 208"},"A receiver receives an ID transmitted from a transmitter such as a home or school lighting, and transmits position information obtained using the ID as a key, to a terminal . A parent having the terminal can thus be notified that his or her child having the receiver has got back home or arrived at the school. As another example, a supervisor having the terminal can recognize the current position of a worker having the receiver ","(Example of Application to Use Log Storage and Analysis)",{"@attributes":{"id":"p-1360","num":"1359"},"figref":"FIG. 209"},"A receiver receives an ID transmitted from a transmitter such as a sign, obtains coupon information from a server, and displays the coupon information. The receiver stores the subsequent behavior of the user such as saving the coupon, moving to a store displayed in the coupon, shopping in the store, or leaving without saving the coupon, in the server . In this way, the subsequent behavior of the user who has obtained information from the sign can be analyzed to estimate the advertisement value of the sign ","(Example of Application to Screen Sharing)",{"@attributes":{"id":"p-1362","num":"1361"},"figref":"FIGS. 210 and 211"},"A transmitter such as a projector or a display transmits information (an SSID, a password for wireless connection, an IP address, a password for operating the transmitter) for wirelessly connecting to the transmitter , or transmits an ID which serves as a key for accessing such information. A receiver such as a smartphone, a tablet, a notebook computer, or a camera receives the signal transmitted from the transmitter to obtain the information, and establishes wireless connection with the transmitter . The wireless connection may be made via a router, or directly made by Wi-Fi Direct, Bluetooth\u00ae, Wireless Home Digital Interface, or the like. The receiver transmits a screen to be displayed by the transmitter . Thus, an image on the receiver can be easily displayed on the transmitter.","When connected with the receiver , the transmitter may notify the receiver that not only the information transmitted from the transmitter but also a password is needed for screen display, and refrain from displaying the transmitted screen if a correct password is not obtained. In this case, the receiver displays a password input screen or the like, and prompts the user to input the password.",{"@attributes":{"id":"p-1365","num":"1364"},"figref":"FIG. 211","b":["8961","8960","8960","8961","8961","8960","8960","8961","8961","8960","8960","8961","8960","8961","8960","8961","8960"],"i":["c ","b ","a","c ","c","a ","b ","c","c ","b","b ","c ","a ","c ","b","c ","b. "]},"The above-mentioned operation may be performed only in the case where the difference between the time at which the receiver receives the signal transmitted from the transmitter and the time at which the receiver receives the signal transmitted from the transmitter is within a predetermined time.","The transmitter may transmit the image to the transmitter only in the case where the transmitter receives a correct password from the receiver ","(Example of Application to Position Estimation Using Wireless Access Point)",{"@attributes":{"id":"p-1368","num":"1367"},"figref":"FIG. 212"},"A receiver such as a smartphone receives an ID transmitted from a transmitter . The receiver obtains position information of the transmitter using the received ID as a key, and estimates the position of the receiver based on the position and direction of the transmitter in the captured image. The receiver also receives a signal from a radio wave transmitter such as a Wi-Fi access point. The receiver estimates the position of the receiver , based on position information and radio wave transmission direction information of the radio wave transmitter included in the signal. The receiver estimates the position of the receiver by a plurality of means in this manner, and so can estimate its position with high accuracy.","A method of estimating the position of the receiver using the information of the radio transmitter is described below. The radio transmitter transmits synchronous signals in different directions, from a plurality of antennas. The radio transmitter also changes the signal transmission direction in sequence. The receiver estimates that a radio wave transmission direction in which the radio field intensity is highest is the direction from the radio transmitter to the receiver . Moreover, the receiver calculates path differences from the differences in arrival time of radio waves transmitted from the different antennas and respectively passing through paths , , and , and calculates the distance between the radio transmitter and the receiver from radio wave transmission angle differences \u03b8, \u03b8, and \u03b8. By further using surrounding electric field information and radio wave reflector information, the receiver can estimate its position with higher accuracy.","(Position Estimation by Visible Light Communication and Wireless Communication)",{"@attributes":{"id":"p-1371","num":"1370"},"figref":["FIG. 213","FIG. 213"]},"A mobile terminal (a smartphone terminal) performs visible light communication with a light emitting unit, to obtain an ID of the light emitting unit. The mobile terminal inquires of a server using the obtained ID, and obtains position information of the light emitting unit. By doing so, the mobile terminal obtains an actual distance L and an actual distance L which are respective distances in the x-axis direction and in the y-axis direction between a multiple-input and multiple-output access point (MIMO) and the light emitting unit. Furthermore, the mobile terminal detects a tilt \u03b8 of the mobile terminal using a gyroscope or the like as already described in other embodiments.","In the case where beamforming is performed from an MIMO access point toward the mobile terminal, a beamforming angle \u03b8 is set by the MIMO access point and is a known value. Accordingly, the mobile terminal obtains the beamforming angle \u03b8 by wireless communication or the like.","As a result, using the actual distance L, the actual distance L, the tilt \u03b8 of the mobile terminal, and the beamforming angle \u03b8, the mobile terminal is capable of calculating a coordinate position (x, y) of the mobile terminal which is based on the MIMO access point. The MIMO access point is capable of forming a plurality of beams, and so a plurality of beamformings may be used for position estimation of higher accuracy.","As described above, according to this embodiment, the position estimation accuracy can be enhanced by employing both the position estimation by visible light communication and the position estimation by wireless communication.","Though the information communication method according to one or more aspects has been described by way of the embodiments above, the present disclosure is not limited to these embodiments. Modifications obtained by applying various changes conceivable by those skilled in the art to the embodiments and any combinations of structural elements in different embodiments are also included in the scope of one or more aspects without departing from the scope of the present disclosure.","An information communication method according to an aspect of the present disclosure may also be applied as illustrated in .",{"@attributes":{"id":"p-1378","num":"1377"},"figref":"FIG. 214"},"A camera serving as a receiver in the visible light communication captures an image in a normal imaging mode (Step 1). Through this imaging, the camera obtains an image file in a format such as an exchangeable image file format (EXIF). Next, the camera captures an image in a visible light communication imaging mode (Step 2). The camera obtains, based on a pattern of bright lines in an image obtained by this imaging, a signal (visible light communication information) transmitted from a subject serving as a transmitter by visible light communication (Step 3). Furthermore, the camera accesses a server by using the signal (reception information) as a key and obtains, from the server, information corresponding to the key (Step 4). The camera stores each of the following as metadata of the above image file: the signal transmitted from the subject by visible light communication (visible light reception data); the information obtained from the server; data indicating a position of the subject serving as the transmitter in the image represented by the image file; data indicating the time at which the signal transmitted by visible light communication is received (time in the moving image); and others. Note that in the case where a plurality of transmitters are shown as subjects in a captured image (an image file), the camera stores, for each of the transmitters, pieces of the metadata corresponding to the transmitter into the image file.","When displaying an image represented by the above-described image file, a display or projector serving as a transmitter in the visible light communication transmits, by visible light communication, a signal corresponding to the metadata included in the image file. For example, in the visible light communication, the display or the projector may transmit the metadata itself or transmit, as a key, the signal associated with the transmitter shown in the image.","The mobile terminal (the smartphone) serving as the receiver in the visible light communication captures an image of the display or the projector, thereby receiving a signal transmitted from the display or the projector by visible light communication. When the received signal is the above-described key, the mobile terminal uses the key to obtain, from the display, the projector, or the server, metadata of the transmitter associated with the key. When the received signal is a signal transmitted from a really existing transmitter by visible light communication (visible light reception data or visible light communication information), the mobile terminal obtains information corresponding to the visible light reception data or the visible light communication information from the display, the projector, or the server.",{"@attributes":{"id":"p-1382","num":"1381"},"figref":"FIG. 215"},"First, upon detection of pressing of an image capture button (Step S), the camera captures an image in the normal imaging mode (Step S). The camera then increases its shutter speed to a predetermined speed or greater, that is, sets a shorter exposure time than that set in the normal imaging mode, and captures an image in a visible light imaging mode (Step S). Thus, the camera obtains a signal transmitted from the subject by visible light communication.","Subsequently, the camera uses, as a key, a signal (information) obtained by visible light communication, thereby obtaining information associated with the key from the server (Step S). Next, the camera stores the signal and each piece of information and data into a metadata area (e.g. an area into which EXIF metadata is stored) of an image file obtained by imaging in the normal imaging mode (Step S). In detail, the camera stores a signal obtained by visible light communication, information obtained from the server, position data indicating a position, in an image (an image captured in the normal imaging mode), of a transmitter which is a subject that has transmitted the signal in the visible light communication, and the like.","The camera then determines whether to capture moving images (Step S), and when determining to capture moving images (Step S: Y), repeats the processes following Step S, and when determining to not capture moving images (Step S: N), ends the imaging process.",{"@attributes":{"id":"p-1386","num":"1385"},"figref":"FIG. 216"},"First, the display checks the metadata area of the image file to determine whether the number of transmitters shown in the image represented by the image file is one or more than one (Step S). Here, when determining that the number of transmitters is more than one (Step S: more than 1), the display further determines whether or not a divided transmission mode has been set as a mode in the visible light communication (Step S). When determining that the divided transmission mode has been set (Step S: Y), a display area (a transmission part) of the display is divided into display areas, and the display transmits a signal from each of the display areas (Step S). Specifically, for each transmitter, the display handles, as a display area, an area in which the transmitter is shown or an area in which the transmitter and surroundings thereof are shown, and transmits a signal corresponding to the transmitter from the display area by visible light communication.","When determining in Step S that the divided transmission mode has not been set (Step S: N), the display transmits a signal corresponding to each of the transmitters from the entire display area of the display by visible light communication (Step S). In short, the display transmits, from the entire screen, a key associated with a plurality of pieces of information.","When determining in Step S that the number of transmitters is one (Step S: 1), the display transmits a signal corresponding to the one transmitter from the entire display area of the display by visible light communication (Step S). In short, the display transmits the signal from the entire screen.","Furthermore, when a mobile terminal (a smartphone) accesses the display by using the signal transmitted by visible light communication (the transmission information) as a key after any one of Steps S to , for example, the display provides the access source, i.e., the mobile terminal, with metadata of the image file that is associated with the key (Step S).","An information communication method in this embodiment is an information communication method of obtaining information from a subject, the information communication method including: setting a first exposure time of an image sensor so that, in an image obtained by capturing a first subject by the image sensor, a plurality of bright lines corresponding to exposure lines included in the image sensor appear according to a change in luminance of the first subject, the first subject being the subject; obtaining a first bright line image which is an image including the plurality of bright lines, by capturing the first subject changing in luminance by the image sensor with the set first exposure time; obtaining first transmission information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained first bright line image; and causing an opening and closing drive device of a door to open the door, by transmitting a control signal after the first transmission information is obtained.","In this way, the receiver including the image sensor can be used as a door key, thus eliminating the need for a special electronic lock, for instance as illustrated in . This enables communication between various devices including a device with low computational performance.","For example, the information communication method may further include: obtaining a second bright line image which is an image including a plurality of bright lines, by capturing a second subject changing in luminance by the image sensor with the set first exposure time; obtaining second transmission information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained second bright line image; and determining whether or not a reception device including the image sensor is approaching the door, based on the obtained first transmission information and second transmission information, wherein in the causing of an opening and closing drive device, the control signal is transmitted in the case of determining that the reception device is approaching the door.","In this way, the door can be opened at appropriate timing, i.e. only when the reception device (receiver) is approaching the door, for instance as illustrated in .","For example, the information communication method may further include: setting a second exposure time longer than the first exposure time; and obtaining a normal image in which a third subject is shown, by capturing the third subject by the image sensor with the set second exposure time, wherein in the obtaining of a normal image, electric charge reading is performed on each of a plurality of exposure lines in an area including optical black in the image sensor, after a predetermined time elapses from when electric charge reading is performed on an exposure line adjacent to the exposure line, and in the obtaining of a first bright line image, electric charge reading is performed on each of a plurality of exposure lines in an area other than the optical black in the image sensor, after a time longer than the predetermined time elapses from when electric charge reading is performed on an exposure line adjacent to the exposure line, the optical black not being used in electric charge reading.","In this way, electric charge reading (exposure) is not performed on the optical black when obtaining the first bright line image, so that the time for electric charge reading (exposure) on an effective pixel area, which is an area in the image sensor other than the optical black, can be increased, for instance as illustrated in . As a result, the time for signal reception in the effective pixel area can be increased, with it being possible to obtain more signals.","For example, the information communication method may further include: determining whether or not a length of the pattern of the plurality of bright lines included in the first bright line image is less than a predetermined length, the length being perpendicular to each of the plurality of bright lines; changing a frame rate of the image sensor to a second frame rate lower than a first frame rate used when obtaining the first bright line image, in the case of determining that the length of the pattern is less than the predetermined length; obtaining a third bright line image which is an image including a plurality of bright lines, by capturing the first subject changing in luminance by the image sensor with the set first exposure time at the second frame rate; and obtaining the first transmission information by demodulating data specified by a pattern of the plurality of bright lines included in the obtained third bright line image.","In this way, in the case where the signal length indicated by the bright line pattern (bright line area) included in the first bright line image is less than, for example, one block of the transmission signal, the frame rate is decreased and the bright line image is obtained again as the third bright line image, for instance as illustrated in . Since the length of the bright line pattern included in the third bright line image is longer, one block of the transmission signal is successfully obtained.","For example, the information communication method may further include setting an aspect ratio of an image obtained by the image sensor, wherein the obtaining of a first bright line image includes: determining whether or not an edge of the image perpendicular to the exposure lines is clipped in the set aspect ratio; changing the set aspect ratio to a non-clipping aspect ratio in which the edge is not clipped, in the case of determining that the edge is clipped; and obtaining the first bright line image in the non-clipping aspect ratio, by capturing the first subject changing in luminance by the image sensor.","In this way, in the case where the aspect ratio of the effective pixel area in the image sensor is 4:3 but the aspect ratio of the image is set to 16:9 and horizontal bright lines appear, i.e. the exposure lines extend along the horizontal direction, it is determined that top and bottom edges of the image are clipped, i.e. edges of the first bright line image is lost, for instance as illustrated in . In such a case, the aspect ratio of the image is changed to an aspect ratio that involves no clipping, for example, 4:3. This prevents edges of the first bright line image from being lost, as a result of which a lot of information can be obtained from the first bright line image.","For example, the information communication method may further include: compressing the first bright line image in a direction parallel to each of the plurality of bright lines included in the first bright line image, to generate a compressed image; and transmitting the compressed image.","In this way, the first bright line image can be appropriately compressed without losing information indicated by the plurality of bright lines, for instance as illustrated in .","For example, the information communication method may further include: determining whether or not a reception device including the image sensor is moved in a predetermined manner; and activating the image sensor, in the case of determining that the reception device is moved in the predetermined manner.","In this way, the image sensor can be easily activated only when needed, for instance as illustrated in . This contributes to improved power consumption efficiency.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.",{"@attributes":{"id":"p-1406","num":"1405"},"figref":"FIG. 217"},"A robot  has a function as, for example, a self-propelled vacuum cleaner and a function as a receiver in each of the above embodiments. Lighting devices and each have a function as a transmitter in each of the above embodiments.","For instance, the robot  cleans a room and also captures the lighting device illuminating the interior of the room, while moving in the room. The lighting device transmits the ID of the lighting device by changing in luminance. The robot  accordingly receives the ID from the lighting device , and estimates the position (self-position) of the robot  based on the ID, as in each of the above embodiments. That is, the robot  estimates the position of the robot  while moving, based on the result of detection by a 9-axis sensor, the relative position of the lighting device shown in the captured image, and the absolute position of the lighting device specified by the ID.","When the robot  moves away from the lighting device , the robot  transmits a signal (turn off instruction) instructing to turn off, to the lighting device . For example, when the robot  moves away from the lighting device by a predetermined distance, the robot  transmits the turn off instruction. Alternatively, when the lighting device is no longer shown in the captured image or when another lighting device is shown in the image, the robot  transmits the turn off instruction to the lighting device . Upon receiving the turn off instruction from the robot , the lighting device turns off according to the turn off instruction.","The robot  then detects that the robot  approaches the lighting device based on the estimated position of the robot , while moving and cleaning the room. In detail, the robot  holds information indicating the position of the lighting device and, when the distance between the position of the robot  and the position of the lighting device is less than or equal to a predetermined distance, detects that the robot  approaches the lighting device . The robot  transmits a signal (turn on instruction) instructing to turn on, to the lighting device . Upon receiving the turn on instruction, the lighting device turns on according to the turn on instruction.","In this way, the robot  can easily perform cleaning while moving, by making only its surroundings illuminated.",{"@attributes":{"id":"p-1412","num":"1411"},"figref":"FIG. 218"},"For example, a plurality of light emitting areas A to F are arranged in a display, and each of the light emitting areas A to F changes in luminance to transmit a signal, as illustrated in (a) in . In the example illustrated in (a) in , the light emitting areas A to F are each a rectangle, and are aligned along the horizontal and vertical directions. In such a case, a non-luminance change area that does not change in luminance extends across the display along the horizontal direction of the display, between the light emitting areas A, B, and C and the light emitting areas D, E, and F. Another non-luminance change area that does not change in luminance also extends across the display along the vertical direction of the display, between the light emitting areas A and D and the light emitting areas B and E. Another non-luminance change area that does not change in luminance also extends across the display along the vertical direction of the display, between the light emitting areas B and E and the light emitting areas C and F.","When a receiver in each of the above embodiments captures the display in a state where the exposure lines of the receiver are in the horizontal direction, no bright line appears in the part of the image obtained by image capture (captured image) corresponding to the non-luminance change area along the horizontal direction. That is, the area (bright line area) where bright lines appear is discontinuous in the captured image. When the receiver captures the display in a state where the exposure lines of the receiver are in the vertical direction, no bright line appears in the parts of the captured image corresponding to the two non-luminance change areas along the vertical direction. In this case, too, the bright line area is discontinuous in the captured image. When the bright line area is discontinuous, it is difficult to receive the signal transmitted by luminance change.","In view of this, a display  in this embodiment has a function as a transmitter in each of the above embodiments, and has each of the plurality of light emitting areas A to F shifted in position so that the bright line area is continuous.","For example, the upper light emitting areas A, B, and C and the lower light emitting areas D, E, and F are shifted in position from each other in the horizontal direction in the display , as illustrated in (b) in . Alternatively, the light emitting areas A to F that are each a parallelogram or a rhombus are arranged in the display , as illustrated in (c) in . This eliminates a non-luminance change area lying across the display  along the vertical direction of the display  between the light emitting areas A to F. As a result, the bright line area is continuous in the captured image, even when the receiver captures the display  in a state where the exposure lines are in the vertical direction.","The light emitting areas A to F may be shifted in position in the vertical direction in the display , as illustrated in (d) and (e) in . This eliminates a non-luminance change area lying across the display  along the horizontal direction of the display  between the light emitting areas A to F. As a result, the bright line area is continuous in the captured image, even when the receiver captures the display  in a state where the exposure lines are in the horizontal direction.","The light emitting areas A to F that are each a hexagon may be arranged in the display  so that the sides of the areas are parallel to each other, as illustrated in (f) in . This eliminates a non-luminance change area lying across the display  along any of the horizontal and vertical directions of the display  between the light emitting areas A to F, as in the above-mentioned cases. As a result, the bright line area is continuous in the captured image, even when the receiver captures the display  in a state where the exposure lines are in the horizontal direction or captures the display  in a state where the exposure lines are in the vertical direction.",{"@attributes":{"id":"p-1419","num":"1418"},"figref":"FIG. 219"},"An information communication method in this embodiment is an information communication method of transmitting a signal by a change in luminance, and includes steps SK and SK.","In detail, the information communication method includes: a determination step SK of determining a pattern of the change in luminance, by modulating the signal to be transmitted; and a transmission step SK of transmitting the signal, by a plurality of light emitters changing in luminance according to the determined pattern of the change in luminance. The plurality of light emitters are arranged on a surface so that a non-luminance change area does not extend across the surface between the plurality of light emitters along at least one of a horizontal direction and a vertical direction of the surface, the non-luminance change area being an area in the surface outside the plurality of light emitters and not changing in luminance.",{"@attributes":{"id":"p-1422","num":"1421"},"figref":"FIG. 220"},"An information communication device K in this embodiment is an information communication device that transmits a signal by a change in luminance, and includes structural elements K and K.","In detail, the information communication device K includes: a determination unit K that determines a pattern of the change in luminance, by modulating the signal to be transmitted; and a transmission unit K that transmits the signal, by a plurality of light emitters changing in luminance according to the determined pattern of the change in luminance. The plurality of light emitters are arranged on a surface so that a non-luminance change area does not extend across the surface between the plurality of light emitters along at least one of a horizontal direction and a vertical direction of the surface, the non-luminance change area being an area in the surface outside the plurality of light emitters and not changing in luminance.","In the information communication method and the information communication device K illustrated in , the bright line area can be made continuous in the captured image obtained by capturing the surface (display) by the image sensor included in the receiver, for instance as illustrated in . This eases the reception of the transmission signal, and enables communication between various devices including a device with low computational performance.","It should be noted that in the above embodiments, each of the constituent elements may be constituted by dedicated hardware, or may be obtained by executing a software program suitable for the constituent element. Each constituent element may be achieved by a program execution unit such as a CPU or a processor reading and executing a software program stored in a recording medium such as a hard disk or semiconductor memory. For example, the program causes a computer to execute the information communication method illustrated in the flowchart of .",{"@attributes":{"id":"p-1427","num":"1426"},"figref":"FIG. 221A"},"A receiver  is a smartphone having a function as a receiver in each of the above embodiments. As illustrated in (a) in , the receiver  captures a display , and tries to read bright lines appearing in the captured image. In the case where the display  is dark, the receiver  may not be able to read the bright lines and receive the signal from the display . In such a case, the receiver  flashes in a predetermined rhythm, as illustrated in (b) in . Upon receiving the flash, the display  increases the luminance and produces bright display, as illustrated in (c) in . As a result, the receiver  can read the bright lines appearing in the captured image and receive the signal from the display .",{"@attributes":{"id":"p-1429","num":"1428"},"figref":"FIG. 221B","b":"8973"},"First, the receiver  determines whether or not an operation or gesture by the user to start reception is received (Step S). In the case of determining that the operation or gesture is received (Step S: Y), the receiver  starts reception by image capture using an image sensor (Step S). The receiver  then determines whether or not a predetermined time has elapsed from the reception start without completing the reception (Step S). In the case of determining that the predetermined time has elapsed (Step S: Y), the receiver  flashes in a predetermined rhythm (Step S), and repeats the process from Step S. In the case of repeating the process from Step S, the receiver  determines whether or not a predetermined time has elapsed from the flash without completing the reception. In Step S, instead of flashing, the receiver  may output a predetermined sound of a frequency inaudible to humans, or transmit, to the transmitter which is the display , a signal indicating that the receiver  is waiting for reception.",{"@attributes":{"id":"p-1431","num":"1430"},"figref":"FIG. 222"},"A lighting device  has a function as a transmitter in each of the above embodiments. The lighting device  illuminates, for example, a line guide sign  in a train station, while changing in luminance. A receiver  pointed at the line guide sign  by the user captures the line guide sign . The receiver  thus obtains the ID of the line guide sign , and obtains information associated with the ID, i.e. detailed information of each line shown in the line guide sign . The receiver  displays a guide image indicating the detailed information. For example, the guide image indicates the distance to the line shown in the line guide sign , the direction to the line, and the time of arrival of the next train on the line.","When the user touches the guide image , the receiver  displays a supplementary guide image . For instance, the supplementary guide image is an image for displaying any of a train timetable, information about lines other than the line shown by the guide image , and detailed information of the station, according to selection by the user.",{"@attributes":{"id":"p-1434","num":"1433"},"figref":"FIG. 223"},"Lighting devices to each have a function as a transmitter in each of the above embodiments, and illuminate a store sign . As illustrated in (a) in , the lighting devices to may transmit the same ID by changing in luminance synchronously. As illustrated in (b) in , the lighting devices and located at both ends may transmit the same ID by changing in luminance synchronously, while the lighting device located between these lighting devices illuminates the sign  without transmitting an ID by luminance change. As illustrated in (c) in , the lighting devices and located at both ends may transmit different IDs by changing in luminance, in a state where the lighting device does not transmit an ID. In this case, since the lighting device between the lighting devices and does not change in luminance for ID transmission, the signals from the lighting devices and can be kept from interfering with each other. Though the ID transmitted from the lighting device and the ID transmitted from the lighting device are different, these IDs may be associated with the same information.",{"@attributes":{"id":"p-1436","num":"1435"},"figref":"FIG. 224A"},"A lighting device  has a function as a transmitter in each of the above embodiments, and constantly transmits a signal by changing in luminance as illustrated in (1) in .","A receiver in this embodiment captures the lighting device . Here, an imaging range  of the receiver includes the lighting device  and a part other than the lighting device , as illustrated in . In detail, a part other than the lighting device  is included in each of an upper area a and a lower area c in the imaging range , and the lighting device  is included in a center area b in the imaging range .","The receiver captures the lighting device  to obtain a captured image (bright line image) including a plurality of bright lines that appear according to the change in luminance of the lighting device , as illustrated in (2) and (3) in . In the bright line image, bright lines appear only in the part corresponding to the center area b, while no bright line appears in the parts corresponding to the upper area a and the lower area c.","In the case where the receiver captures the lighting device  at a frame rate of 30 fps as an example, the length b of the bright line area in the bright line image is short, as illustrated in (2) in . In the case where the receiver captures the lighting device  at a frame rate of 15 fps as an example, the length b of the bright line area in the bright line image is long, as illustrated in (3) in . Note that the length of the bright line area (bright line pattern) is the length perpendicular to each bright line included in the bright line area.","Hence, the receiver in this embodiment captures the lighting device  at a frame rate of 30 fps as an example, and determines whether or not the length b of the bright line area in the bright line image is less than a predetermined length. For example, the predetermined length is the length corresponding to one block of signal transmitted by luminance change by the lighting device . In the case where the receiver determines that the length b is less than the predetermined length, the receiver changes the frame rate to 15 fps as an example. Thus, the receiver can receive one block of signal from the lighting device  at one time.",{"@attributes":{"id":"p-1442","num":"1441"},"figref":"FIG. 224B"},"First, the receiver determines whether or not bright lines are included in a captured image, i.e. whether or not stripes by exposure lines are captured (Step S). In the case of determining that the stripes are captured (Step S: Y), the receiver determines in which imaging mode (image capture mode) the receiver is set (Step S). In the case of determining that the imaging mode is the intermediate imaging mode (intermediate mode) or the normal imaging mode (normal image capture mode), the receiver changes the imaging mode to the visible light imaging mode (visible light communication mode) (Step S).","The receiver then determines whether or not the length perpendicular to the bright lines in the bright line area (bright line pattern) is greater than or equal to a predetermined length (Step S). That is, the receiver determines whether or not there is a stripe area greater than or equal to a predetermined size in the direction perpendicular to the exposure lines. In the case of determining that the length is not greater than or equal to the predetermined length (Step S: N), the receiver determines whether or not optical zoom is available (Step S). In the case of determining that optical zoom is available (Step S: Y), the receiver performs optical zoom to lengthen the bright line area, i.e. to enlarge the stripe area (Step S). In the case of determining that optical zoom is not available (Step S: N), the receiver determines whether or not Ex zoom (Ex optical zoom) is available (Step S). In the case of determining that Ex zoom is available (Step S: Y), the receiver performs Ex zoom to lengthen the bright line area, i.e. to enlarge the stripe area (Step S). In the case of determining that Ex zoom is not available (Step S: N), the receiver decreases the imaging frame rate (Step S). The receiver then captures the lighting device  at the set frame rate, to receive a signal (Step S).","Though the frame rate is decreased in the case where optical zoom and Ex zoom are not available in the example illustrated in , the frame rate may be decreased in the case where optical zoom and Ex zoom are available. Ex zoom is a function of limiting the use area of the image sensor and reducing the imaging angle of view so that the apparent focal length is telephoto.",{"@attributes":{"id":"p-1446","num":"1445"},"figref":"FIG. 225"},"In the case where a lighting device  which is a transmitter is shown in a small size in a captured image , the receiver can obtain a captured image in which the lighting device  is shown in a larger size, through the use of optical zoom or Ex zoom. Thus, the use of optical zoom or Ex zoom enables the receiver to obtain a bright line image (captured image) having a bright line area that is long in the direction perpendicular to bright lines.",{"@attributes":{"id":"p-1448","num":"1447"},"figref":"FIG. 226"},"A transmitter  has a function as a transmitter in each of the above embodiments, and communicates with an operation panel  as an example. The operation panel  includes a transmission switch and a power switch ","When the transmission switch is turned on, the operation panel  instructs the transmitter  to perform visible light communication. Upon receiving the instruction, the transmitter  transmits a signal by changing in luminance. When the transmission switch is turned off, the operation panel  instructs the transmitter  to stop visible light communication. Upon receiving the instruction, the transmitter  stops signal transmission without changing in luminance.","When the power switch is turned on, the operation panel  instructs the transmitter  to turn on the power of the transmitter . Upon receiving the instruction, the transmitter  turns its power on. For example, in the case where the transmitter  is a lighting device, the transmitter  turns its power on to illuminate the surroundings. In the case where the transmitter  is a television, the transmitter  turns its power on to display video and the like. When the power switch is turned off, the operation panel  instructs the transmitter  to turn off the power of the transmitter . Upon receiving the instruction, the transmitter  turns its power off and enters a standby state.",{"@attributes":{"id":"p-1452","num":"1451"},"figref":"FIG. 227"},"For example, a receiver  as a smartphone has a function as a transmitter in each of the above embodiments, and obtains an authentication ID and an expiration date from a server . In the case where the current time is within the expiration date, the receiver  transmits the authentication ID to a peripheral device  by changing, for example, its display in luminance. Examples of the peripheral device  include a camera, a barcode reader, and a personal computer.","Having received the authentication ID from the receiver , the peripheral device  transmits the authentication ID to the server , and requests verification. The server  compares the authentication ID transmitted from the peripheral device  and the authentication ID held in the server  and transmitted to the receiver . When they match, the server  notifies the peripheral device  of the match. Having received the notification of the match from the server , the peripheral device  releases a lock set therein, executes electronic payment, or performs a login process or the like.",{"@attributes":{"id":"p-1455","num":"1454"},"figref":"FIG. 228A"},"The transmitter in this embodiment has a function as a transmitter in each of the above embodiments, and is a lighting device or a display as an example. For instance, the transmitter determines whether or not the light control level (brightness level) is less than a predetermined level (Step S). In the case of determining that the light control level is less than the predetermined level (Step S: Y), the transmitter stops signal transmission by luminance change (Step S).",{"@attributes":{"id":"p-1457","num":"1456"},"figref":"FIG. 228B"},"The transmitter in this embodiment determines whether or not the light control level (brightness level) is greater than a predetermined level (Step S). In the case of determining that the light control level is greater than the predetermined level (Step S: Y), the transmitter starts signal transmission by luminance change (Step S).",{"@attributes":{"id":"p-1459","num":"1458"},"figref":"FIG. 229"},"The transmitter in this embodiment determines whether or not a predetermined mode is selected (Step S). For example, the predetermined mode is eco mode or power saving mode. In the case of determining that the predetermined mode is selected (Step S: Y), the transmitter stops signal transmission by luminance change (Step S). In the case of determining that the predetermined mode is not selected (Step S: N), the transmitter starts signal transmission by luminance change (Step S).",{"@attributes":{"id":"p-1461","num":"1460"},"figref":"FIG. 230"},"The imaging device in this embodiment is a video camera as an example, and determines whether or not the imaging device is in a recording process (Step S). In the case of determining that the imaging device is in a recording process (Step S: Y), the imaging device transmits a visible light transmission stop instruction to a transmitter transmitting a signal by luminance change (Step S). Upon receiving the visible light transmission stop instruction, the transmitter stops signal transmission by luminance change (visible light transmission). In the case of determining that the imaging device is not in a recording process (Step S: N), the imaging device further determines whether or not recording has been stopped, i.e. the imaging device has just stopped recording (Step S). In the case of determining that recording has been stopped (Step S: Y), the imaging device transmits a visible light transmission start instruction to the transmitter (Step S). Upon receiving the visible light transmission start instruction, the transmitter starts signal transmission by luminance change (visible light transmission).",{"@attributes":{"id":"p-1463","num":"1462"},"figref":"FIG. 231"},"The imaging device in this embodiment is a digital still camera as an example, and determines whether or not an imaging button (shutter button) is being half pressed or whether or not focus is being adjusted (Step S). The imaging device then determines whether or not a light and dark area appears in the direction along exposure lines in an image sensor included in the imaging device (Step S). In the case of determining that the light and dark area appears (Step S: Y), there is a possibility that a transmitter transmitting a signal by luminance change is near the imaging device. The imaging device accordingly transmits a visible light transmission stop instruction to the transmitter (Step S). After this, the imaging device performs imaging to obtain a captured image (Step S). The imaging device then transmits a visible light transmission start instruction to the transmitter (Step S). Thus, the imaging device can obtain the captured image, without being affected by the luminance change by the transmitter. Moreover, since the time during which signal transmission by luminance change is stopped is a very short period of time when the imaging device performs imaging, the time during which visible light communication is disabled can be reduced.",{"@attributes":{"id":"p-1465","num":"1464"},"figref":"FIG. 232"},"The transmitter in this embodiment has a function as a transmitter in each of the above embodiments, and outputs high-luminance light (Hi) or low-luminance light (Lo) per slot, thereby transmitting a signal. In detail, the slot is a time unit of 104.2 \u03bcs. The transmitter outputs Hi to transmit a signal indicating 1, and outputs Lo to transmit a signal indicating 0.",{"@attributes":{"id":"p-1467","num":"1466"},"figref":"FIG. 233"},"The above-mentioned transmitter outputs Hi or Lo per slot, thereby transmitting each PHY (physical layer) frame which is a signal unit in sequence. The PHY frame includes a preamble made up of 8 slots, an FCS (Frame Check Sequence) made up of 2 slots, and a body made up of 20 slots. The parts included in the PHY frame are transmitted in the order of the preamble, the FCS, and the body.","The preamble corresponds to the header of the PHY frame, and includes \u201c01010111\u201d as an example. The preamble may be made up of 7 slots. In this case, the preamble includes \u201c0101011\u201d. The FCS includes \u201c01\u201d in the case where the number of 1s included in the body is an even number, and \u201c11\u201d in the case where the number of 1s included in the body is an odd number. The body includes 5 symbols each of which is made up of 4 slots. In the case of 4-value PPM, the symbol includes \u201c0111\u201d, \u201c1011\u201d, \u201c1101\u201d, or \u201c1110\u201d.",{"@attributes":{"id":"p-1470","num":"1469"},"figref":"FIG. 234"},"The above-mentioned symbol is converted to a 2-bit value by a receiver. For example, the symbols \u201c0111\u201d, \u201c1011\u201d, \u201c1101\u201d, and \u201c1110\u201d are respectively converted to \u201c00\u201d, \u201c01\u201d, \u201c10\u201d, and \u201c11\u201d. Accordingly, the body (20 slots) of the PHY frame is converted to a 10-bit signal. The 10-bit body includes 3-bit TYPE indicating the type of the PHY frame, 2-bit ADDR indicating the address of the PHY frame or the body, and 5-bit DATA indicating the entity of data. For example, in the case where the type of the PHY frame is TYPE1, TYPE indicates \u201c000\u201d. ADDR indicates \u201c00\u201d, \u201c01\u201d, \u201c10\u201d, or \u201c11\u201d.","The receiver concatenates DATA included in the respective bodies of 4 PHY frames. ADDR mentioned above is used in this concatenation. In detail, the receiver concatenates DATA included in the body of the PHY frame having ADDR \u201c00\u201d, DATA included in the body of the PHY frame having ADDR \u201c01\u201d, DATA included in the body of the PHY frame having ADDR \u201c10\u201d, and DATA included in the body of the PHY frame having ADDR \u201c11\u201d, thus generating 20-bit data. The four PHY frames are decoded in this way. The generated data includes 16-bit effective DATA and 4-bit CRC (Cyclic Redundancy Check).",{"@attributes":{"id":"p-1473","num":"1472"},"figref":"FIG. 235"},"The type of the PHY frame mentioned above includes TYPE1, TYPE2, TYPE3, and TYPE4. The body length, the ADDR length, the DATA length, the number of DATA concatenated (concatenation number), the effective DATA length, and the CRC type differ between these types.","For example, in TYPE1, TYPE (TYPEBIT) indicates \u201c000\u201d, the body length is 20 slots, the ADDR length is 2 bits, the DATA length is 5 bits, the concatenation number is 4, the effective DATA length is 16 bits, and the CRC type is CRC-4. In TYPE2, on the other hand, TYPE (TYPEBIT) indicates \u201c001\u201d, the body length is 24 slots, the ADDR length is 4 bits, the DATA length is 5 bits, the concatenation number is 8, the effective DATA length is 32 bits, and the CRC type is CRC-8.","The use of such a signal illustrated in  enables visible light communication to be performed appropriately.",{"@attributes":{"id":"p-1477","num":"1476"},"figref":"FIG. 236"},"The system in this embodiment includes a transmitter  having the same function as a transmitter in each of the above embodiments, a receiver  such as a smartphone, a content sharing server , and an ID management server .","For instance, a content creator uploads, to the content sharing server , content such as audio video data representing a still image or a moving image for introducing a product, and product information indicating the manufacturer, area of production, material, specifications, etc. of the product. The content sharing server  registers the product information in the ID management server , in association with a content ID for identifying the content.","Following this, the transmitter  downloads the content and the content ID from the content sharing server , displays the content, and transmits the content ID by changing in luminance, i.e. by visible light communication, according to an operation by the user. The user views the content. In the case where the user is interested in the product introduced in the content, the user points the receiver  at the transmitter  to capture the transmitter . The receiver  captures the content displayed on the transmitter , thus receiving the content ID.","The receiver  then accesses the ID management server , and inquires of the ID management server  for the content ID. As a result, the receiver  receives the product information associated with the content ID from the ID management server , and displays the product information. When the receiver  receives an operation requesting to buy the product corresponding to the product information, the receiver  accesses the manufacturer of the product and executes a process for buying the product.","Next, the ID management server notifies inquiry information indicating the number of inquiries or the number of accesses made for the content ID, to the manufacturer indicated by the product information associated with the content ID. Having received the inquiry information, the manufacturer pays an affiliate reward corresponding to the number of inquiries or the like indicated by the inquiry information to the content creator specified by the content ID, by electronic payment via the ID management server  and the content sharing server .",{"@attributes":{"id":"p-1483","num":"1482"},"figref":"FIG. 237"},"In the example illustrated in , when the content and the product information are uploaded, the content sharing server  registers the product information in the ID management server  in association with the content ID. However, such registration may be omitted. For example, the content sharing server  searches the ID management server for a product ID for identifying the product of the uploaded product information, and embeds the product ID in the uploaded content, as illustrated in .","Following this, the transmitter  downloads the content in which the product ID is embedded and the content ID from the content sharing server , displays the content, and transmits the content ID and the product ID by changing in luminance, i.e. by visible light communication, according to an operation by the user. The user views the content. In the case where the user is interested in the product introduced in the content, the user points the receiver  at the transmitter  to capture the transmitter . The receiver  captures the content displayed on the transmitter , thus receiving the content ID and the product ID.","The receiver  then accesses the ID management server , and inquires of the ID management server  for the content ID and the product ID. As a result, the receiver  receives the product information associated with the product ID from the ID management server , and displays the product information. When the receiver  receives an operation requesting to buy the product corresponding to the product information, the receiver  accesses the manufacturer of the product and executes a process for buying the product.","Next, the ID management server notifies inquiry information indicating the number of inquiries or the number of accesses made for the content ID and the product ID, to the manufacturer indicated by the product information associated with the product ID. Having received the inquiry information, the manufacturer pays an affiliate reward corresponding to the number of inquiries or the like indicated by the inquiry information to the content creator specified by the content ID, by electronic payment via the ID management server  and the content sharing server .",{"@attributes":{"id":"p-1488","num":"1487"},"figref":"FIG. 238"},"The system in this embodiment includes a content sharing server instead of the content sharing server  illustrated in , and further includes an SNS server . The SNS server  is a server providing a social networking service, and performs part of the process performed by the content sharing server  illustrated in .","In detail, the SNS server  obtains the content and the product information uploaded from the content creator, searches for the product ID corresponding to the product information, and embeds the product ID in the content. The SNS server  then transfers the content in which the product ID is embedded, to the content sharing server . The content sharing server receives the content transferred from the SNS server , and transmits the content in which the product ID is embedded and the content ID to the transmitter .","Thus, in the example illustrated in , the unit including the SNS server  and the content sharing server serves as the content sharing server  illustrated in .","In the system illustrated in each of , an appropriate affiliate reward can be paid for an advertisement (content) for which inquiries have been made using visible light communication.","Though the information communication method according to one or more aspects has been described by way of the embodiments above, the present disclosure is not limited to these embodiments. Modifications obtained by applying various changes conceivable by those skilled in the art to the embodiments and any combinations of structural elements in different embodiments are also included in the scope of one or more aspects without departing from the scope of the present disclosure.","The following describes the embodiment.","(Mixed Modulation Scheme)",{"@attributes":{"id":"p-1495","num":"1494"},"figref":"FIGS. 239 and 240"},"As illustrated in , the transmitter modulates a transmission signal by a plurality of modulation schemes, and transmits modulated signals alternately or simultaneously.","By modulating the same signal by the plurality of modulation schemes and transmitting the modulated signals, even a receiver that supports only one of the modulation schemes can receive the signal. Moreover, for example, the combined use of a modulation scheme with high transmission speed, a modulation scheme with high noise resistance, and a modulation scheme with long communication distance allows reception to be performed using an optimal method according to the receiver environment.","In the case where the receiver supports reception by the plurality of modulation schemes, the receiver receives the signals modulated by the plurality of schemes. When modulating the same signal, the transmitter assigns the same signal ID to the modulated signals, and transmits the modulated signals. By checking the signal ID, the receiver can recognize that the same signal is modulated by the different modulation schemes. The receiver synthesizes the signal having the same signal ID from the plurality of types of modulated signals, with it being possible to receive the signal promptly and accurately.","For example, the transmitter includes a signal dividing unit and modulation units  to . The signal dividing unit divides a transmission signal into a partial signal  and a partial signal , and attaches a signal ID to the partial signal  and another signal ID to the partial signal . The modulation unit  generates a signal having sine waves by performing frequency modulation on the partial signal  with the signal ID. The modulation unit  generates a signal having square waves by performing, on the partial signal  with the signal ID, frequency modulation different from that performed by the modulation unit . Meanwhile, the modulation unit  generates a signal having square waves by performing pulse-position modulation on the partial signal  with the other signal ID.","As illustrated in , the transmitter transmits together the signals modulated by a plurality of modulation schemes. In the example in , with a long exposure time set, the receiver can receive only the signal modulated by a frequency modulation scheme that uses a low frequency. With a short exposure time set, the receiver can receive the signal modulated by the pulse-position modulation scheme that uses a high frequency band. In this case, the receiver will obtain a temporal average of strength of received light by calculating an average of luminance in a direction perpendicular to a bright line, and thus can obtain a signal that is the same as a signal obtained when the exposure time is long.","(Transmission Signal Verification and Digital Modulation)",{"@attributes":{"id":"p-1501","num":"1500"},"figref":"FIGS. 241 and 242"},"As illustrated in , the transmitter includes a signal storage unit, a signal verification unit, a signal modulation unit, a light emitting unit, an abnormality notification unit, a source key storage unit, and a key generation unit. The signal storage unit stores a transmission signal and a signal conversion value obtained by converting the transmission signal using a verification key described later. A one-way function is used for this conversion. The source key storage unit stores a source key which is a source value of a key, for example as a circuit constant such as a time constant or a resistance. The key generation unit generates the verification key from the source key.","The signal verification unit converts the transmission signal stored in the signal storage unit using the verification key, to obtain a signal conversion value. The signal verification unit determines whether or not the signal has not been tampered with, depending on whether or not the obtained signal conversion value and the signal conversion value stored in the signal storage unit are equal. Even when the signal in the signal storage unit is copied to another transmitter, this other transmitter cannot transmit the signal because the verification key is different. Transmitter forgery can thus be prevented.","In the case where the signal has been tampered with, an abnormality notification unit notifies that the signal has been tampered with. Examples of the notification method include blinking a light emitting unit in a cycle visible to humans, outputting a sound, and so on. By limiting the abnormality notification to a predetermined time immediately after power on, the transmitter can be put to use other than transmission even in the case where the signal has an abnormality.","In the case where the signal has not been tampered with, a signal modulation unit converts the signal to a light emission pattern. Various modulation schemes are available. For example, the following modulation schemes are available: amplitude shift keying (ASK); phase shift keying (PSK); frequency shift keying (FSK); quadrature amplitude modulation (QAM); delta modulation (DM); minimum shift keying (MSK); complementary code keying (CCK); orthogonal frequency division multiplexing (OFDM); amplitude modulation (AM); frequency modulation (FM); phase modulation (PM); pulse width modulation (PWM); pulse amplitude modulation (PAM); pulse density modulation (PDM); pulse position modulation (PPM); pulse code modulation (PCM); frequency hopping spread spectrum (FHSS); and direct sequence spread spectrum (DSSS). A modulation scheme is selected according to the property of the transmission signal (whether analog or digital, whether continuous data transmission or not, etc.) and the required performance (transmission speed, noise resistance, transmission distance). Moreover, two or more modulation schemes may be used in combination.","In Embodiments 1 to 9, the same advantageous effects can be achieved in the case where the signal modulated by any of the above-mentioned modulation schemes is used.","As illustrated in , the transmitter may include a signal demodulation unit instead of the signal verification unit. In this case, a signal storage unit holds an encrypted transmission signal obtained by encrypting a transmission signal using an encryption key that is paired with a decryption key generated in a key generation unit. The signal demodulation unit decrypts the encrypted transmission signal, using the decryption key. This structure makes it difficult to forge a transmitter, i.e. to produce a transmitter for transmitting an arbitrary signal.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.","(Signal Reception from a Plurality of Directions by a Plurality of Light Receiving Units)",{"@attributes":{"id":"p-1509","num":"1508"},"figref":"FIG. 243"},"This watch is configured as a receiver for visible light communication, and includes light sensors and collecting lenses corresponding to the respective light sensors. Specifically, a collecting lens is placed on the top surface of each sensor as illustrated in the cross sectional view in . In , the collecting lens has a predetermined tilt. The shape of the collecting lens is not limited to this, and may be any other shape capable of collecting light. With this structure, the light sensor can collect and receive light from a light source in the external world, by the lens. Even a small light sensor as included in a watch can thus perform visible light communication. In , the watch is divided into 12 areas and 12 light sensors are arranged in the areas, with the collecting lens being placed on the top surface of each light sensor. By dividing the inside of the watch into a plurality of areas and arranging a plurality of light sensors in this way, it is possible to obtain information from a plurality of light sources. For example, in , a first light sensor can receive light from a light source , and a second light sensor can receive light from a light source . A solar cell may be used as a light sensor. The use of a solar cell as a light sensor enables solar power to be generated and also visible light communication to be performed by a single sensor, which contributes to lower cost and a more compact shape. Moreover, in the case where a plurality of light sensors are arranged, information from a plurality of light sources can be obtained simultaneously, with it being possible to improve the position estimation accuracy. Though this embodiment describes a structure of providing light sensors in a watch, this is not a limit for the present disclosure, and it may be possible to provide light sensors in any movable device such as a mobile phone or a mobile terminal.",{"@attributes":{"id":"p-1511","num":"1510"},"figref":"FIG. 244"},"A receiver such as a wristwatch includes a plurality of light receiving units. For example, the receiver includes, as illustrated in , a light receiving unit on the upper end of a rotation shaft that supports the minute hand and the hour hand of the wristwatch, and a light receiving unit near the character indicating the 12 o'clock on the periphery of the wristwatch. The light receiving unit receives light directed to thereto along the direction of the above-mentioned rotation shaft, and the light receiving unit receives light directed thereto along a direction connecting the rotation shaft and the character indicating the 12 o'clock. Thus, the light receiving unit can receive light from above when the user holds the receiver in front of his or her chest as when checking the time. As a result, the receiver is capable of receiving a signal from a ceiling light. The light receiving unit can receive light from front when the user holds the receiver in front of his or her chest as when checking the time. As a result, the receiver can receive a signal from a signage or the like in front of the user.","When these light receiving units and have directivity, the signal can be received without interference even in the case where a plurality of transmitters are located nearby.",{"@attributes":{"id":"p-1514","num":"1513"},"figref":"FIG. 245"},"For example, as illustrated in (a) in , the receiver  such as a wristwatch includes 17 light receiving elements (light receiving units). These light receiving elements are arranged on the watch face. Out of these light receiving elements, 12 light receiving elements are arranged at positions corresponding to 1 o'clock to 12 o'clock on the watch face, and the remaining five light receiving elements are arranged in a central area on the watch face. Each of these 17 light receiving elements has different directivity and receives light (a signal) in a corresponding direction. Thus, as a result of arranging a plurality of light receiving elements having directivity, the receiver  can estimate the direction of the received signal. Furthermore, prisms for guiding light to the light receiving elements may be arranged in front of the light receiving elements as illustrated in (b) in . Specifically, the receiver  includes eight light emitting elements arranged at regular intervals in a peripheral part on the watch face, and a plurality of prisms for guiding light to at least one of those light emitting elements. With such prisms, an accurate direction of the transmitter can be estimated even when the number of light receiving elements is small. For example, when only a light receiving element of the eight light receiving elements receives light, the transmitter is estimated to be situated in a direction connecting the center of the watch face and a prism . When light receiving elements and receive the same signal, the transmitter is estimated to be situated in a direction connecting the center of the watch face and a prism . Note that windshield glass of the wristwatch may be given the directivity function and the prism function.",{"@attributes":{"id":"p-1516","num":"1515"},"figref":"FIG. 246A"},"The information communication method according to an aspect of the present disclosure is an information communication method of obtaining information by a mobile terminal and includes Steps SE and SE.","Specifically, this information communication method includes: receiving, by at least one of a plurality of solar cells included in the mobile terminal and each having directivity, visible light released along a direction corresponding to the directivity of the at least one of the plurality of solar cells (SE); and obtaining the information by demodulating a signal specified by the received visible light (SE).",{"@attributes":{"id":"p-1519","num":"1518"},"figref":"FIG. 246B"},"A mobile terminal E according to an aspect of the present disclosure is a mobile terminal that obtains information, and includes a plurality of solar cells E each having directivity, and an information obtainment unit E. When at least one of the plurality of solar cells E receives visible light released along a direction corresponding to the directivity of the solar cell E, the information obtainment unit E obtains information by demodulating a signal specified by the received visible light.","In the information communication method and the mobile terminal E illustrated in , the solar cell E can be used in power generation while being used as a light sensor for visible light communication, and thus it is possible to reduce the cost for the mobile terminal E that obtains information and also possible to downsize the mobile terminal E. Furthermore, since each of the plurality of solar cells E has directivity, the direction where a transmitter that emits visible light is present can be estimated based on the directivity of the solar cell E that has received visible light. Moreover, since each of the plurality of solar cells E has directivity, it is possible that visible light emitted from one transmitter is received separately from visible light emitted from another, and thus it is possible to appropriately obtain information from each of the plurality of transmitters.","Furthermore, in the receiving (SE), the solar cell E (, ) may receive visible light transmitted by the prism (, , or ) included in the mobile terminal E () as illustrated in (b) in . This makes it possible to accurately estimate a direction where a transmitter that emits visible light is present while reducing the number of solar cells E included in the mobile terminal E. Furthermore, as illustrated in , the mobile terminal E is a wristwatch, and the plurality of solar cells E (the light receiving elements) are arranged along an outer edge of the watch face of the wristwatch. The orientation of the visible light received by one of the plurality of solar cells E may be different from the orientation of the visible light received by another. With this, it is possible to appropriately obtain information by a wristwatch.","(Cooperation Between Watch-Type Receiver and Smartphone)",{"@attributes":{"id":"p-1523","num":"1522"},"figref":"FIG. 247"},"A receiver such as a wristwatch is connected to a smartphone or a glasses-type display via wireless communication such as Bluetooth\u00ae. In the case where the receiver receives a signal or detects the presence of a signal, the receiver displays, on the display , information indicating reception of the signal, for example. The receiver transmits the received signal to the smartphone . The smartphone obtains data associated with the received signal from a server , and displays the obtained data on the glasses-type display ","(Route Guidance by Wristwatch-Type Display)",{"@attributes":{"id":"p-1525","num":"1524"},"figref":"FIG. 248"},"A receiver such as a wristwatch is connected to a smartphone via wireless communication such as Bluetooth\u00ae. The receiver has a watch face composed of a display such as a liquid crystal display, and is capable of displaying information other than the time. The smartphone recognizes the current position from a signal received by the receiver , and displays the route and distance to the destination on the display surface of the receiver ","(Frequency Shift Keying and Frequency Multiplex Modulation)",{"@attributes":{"id":"p-1527","num":"1526"},"figref":"FIGS. 249A, 249B, and 249C"},"In (a) in , a specific signal is expressed as a specific modulation frequency. The receiver performs frequency analysis on a light pattern (a pattern of luminance change of a light source) to determine a dominant modulation frequency, and reconstructs a signal.","In (a) in , the modulation frequency is changed with time. This enables many values to be expressed. A typical image sensor has an imaging frame rate of 30 fps. Accordingly, reception can be ensured by continuing one modulation frequency for 1\/30 second or more. In (b) in , a time during which no signal is superimposed is inserted when changing the frequency. As a result, the receiver can easily recognize the change of the modulation frequency. A light pattern in the time during which no signal is superimposed can be distinguished from that in the signal superimposition part, by maintaining constant brightness or using a specific modulation frequency. When a frequency that is an integer multiple of 30 Hz is set as the specific modulation frequency, the non-signal superimposition part is unlikely to appear in the difference image and hamper the reception process. The length of the time during which no signal is superimposed may be greater than or equal to the same length as a signal of the longest period among light patterns used for signals. This facilitates reception. As an example, if a light pattern of a lowest modulation frequency is 100 Hz, the time during which no signal is superimposed is set to greater than or equal to 1\/100 second.",{"@attributes":{"id":"p-1530","num":"1529"},"figref":"FIG. 249A","sub":["1 ","2 ","3 ","2 ","2 ","1 ","1 ","2","2 ","2","3 ","3 ","2","1 ","1"]},"Therefore, in the example (2) in which a light pattern is expressed, the number of frequencies included in the waveform is limited to a predetermined number or less, that is, the number of frequencies is set variable below a predetermined number. Alternatively, in the example (3) in which a light pattern is expressed, the number of frequencies included in the waveform is limited to a predetermined number. By doing so, it is possible to avoid the above-described problem. As compared to the example (1) and the example (2), the example (3) allows signals and noise to be more easily separated and is most tolerant to noise because the number of included frequencies is predetermined.","When signals are represented using n different frequencies, 2\u22121 different signals can be represented in the example (1). Furthermore, when the frequencies are limited to m different frequencies, (\u03a3(k=1 to m)C)\u22121 different signals can be represented in the example (2), and Cdifferent signals can be represented in the example (3).","As the method of overlapping a plurality of modulation frequencies, there are the following methods: (i) simply adding up waveforms; (ii) weighted averaging using weighted waveforms; and (iii) repeating the respective waveforms of the frequencies in sequence. When the receiver performs frequency analysis such as discrete cosine series expansion, an adjustment is preferably performed in the weighted averaging in (ii) such that the peak of each frequency is the same or similar, because there is a tendency for a higher frequency to have a lower peak. Specifically, it is preferred that more weight be given to a higher frequency. In (iii), it is possible to adjust the level of the frequency peak upon reception by adjusting the ratio of the number of outputs (the number of cycles) rather than repeating one output of the waveform of each frequency (on a per cycle basis). It may be that the number of output cycles is set larger for a higher frequency or that the length of time for output is set longer for a higher frequency. Through this adjustment, it is possible to facilitate the reception process by equalizing the levels of frequency peaks, and also possible to represent additional information by giving meaning to a difference between the levels of frequency peaks. For example, when the order of the levels of the frequency peaks is given meaning, it is possible to add information of log(n!) bits where n different frequencies are included. The frequency may be changed every period, every half a period, every multiple of half a period, or every length of predetermined time. The timing of changing the frequency may be when the luminance has the highest value, the lowest value, or any value. It is possible to reduce flicker by equalizing luminance before changing the frequency and luminance after changing the frequency (=continuously changing the luminance). This can be achieved when transmission signals are output at each frequency for a length of time that is an integral multiple of a half of the wavelength at the frequency. Here, the length of time of output at each frequency is different. Furthermore, when signals are output at a certain frequency for a length of time that is an integer multiple of a half of the period, the receiver can easily recognize by frequency analysis that the frequency is included in the signals even in the case of digital output. Discontinuous output rather than continuous output at the same frequency is better as it is hard to be caught by human eyes or cameras. For example, when period Tappears twice, Tappears twice, and Tappears once in terms of the proportion of output, TTTTTis better than TTTTT. Instead of repeating the output in a predetermined order, output in varying order may also be applicable. This order may be given meaning to represent additional information. This order cannot be seen from the frequency peaks, but it is possible to obtain such information by analyzing the order of frequencies. Since the exposure time needs to be set shorter in the case of analyzing the order of the frequencies than the case of analyzing the frequency peaks, it may be possible to set the exposure time short only when the additional information is necessary, or it may be possible that only the receiver that can set the exposure time short can obtain the additional information.","In , the signals of  are represented in a binary light pattern. In the methods (i) and (ii) among the methods of overlapping frequencies, analog waveforms are complicated, and even when such analog waveforms are binarized, it is not possible to represent a complicated form. Consequently, the receiver fails to obtain a correct frequency peak, leading to more reception errors. In the method (iii), analog waveforms are not complicated, meaning that binarization has less influence thereon, and thus a relatively correct frequency peak can be obtained. Therefore, the method (iii) is superior in the case of using a digitalized light pattern with, for example, a binary or a small number of values. This modulation method can be construed as one type of frequency modulation from the standpoint that signals are represented based on frequencies in a light pattern, or can alternatively be construed as one type of PWM from the standpoint that signals are represented through adjustment on the duration of pulses.","With the setting in which the unit of time for a change in luminance is a discrete value, it is possible to transmit and receive signals in the same or similar way as pulse modulation. The average luminance can be set high by setting a low luminance section as the shortest unit of time regardless of the length of the period of a transmission frequency. Here, since the average luminance increases when the period of the transmission frequency is longer, it is possible to increase the average luminance by increasing the number of outputs at this frequency with a long period. Even when low luminance sections have the same length, a high luminance section is set to have a length determined by subtracting the length of the low luminance section from the period of the transmission frequency. By doing so, a frequency peak will appear in the transmission frequency when the frequency analysis is performed. Thus, when a frequency analysis technique such as the discrete cosine transform is used, the exposure time of the receiver does not need to be set so short to enable the receiver to receive signals.","In (c) in , the modulation frequency overlap is changed with time in the same way as (a) in . This enables many values to be expressed.","A signal of a high modulation frequency cannot be received unless the exposure time is short. Up to a certain level of modulation frequency, however, can be used without setting the exposure time. When a signal modulated using frequencies from low to high modulation frequencies is transmitted, all terminals can receive the signal expressed by the low modulation frequency. Besides, a terminal capable of setting a short exposure time also receives the signal up to the high modulation frequency, with it being possible to receive more information from the same transmitter at high speed. Alternatively, it may be that when a modulation signal of a low frequency is found in a normal imaging mode, overall transmission signals including a modulation signal of a high frequency are received in a visible light communication mode.","The frequency shift keying scheme and the frequency multiplex modulation scheme have an advantageous effect of causing no flicker perceivable by the human eye even in the case where a lower modulation frequency than when expressing a signal by pulse position is used, and so can use many frequency bands.","In Embodiments 1 to 10, the same advantageous effects can be achieved in the case where the signal modulated by the above-mentioned reception scheme and modulation scheme is used.","(Separation of Mixed Signal)",{"@attributes":{"id":"p-1540","num":"1539"},"figref":"FIGS. 249D and 249E"},"A receiver has functions of (a) in . A light receiving unit receives a light pattern. A receiver has functions of (a) in . A light receiving unit receives a light pattern. A frequency analysis unit Fourier transforms the light pattern, to map a signal in a frequency domain. A peak detection unit detects a peak of a frequency component in the light pattern. In the case where no peak is detected by the peak detection unit, the subsequent process is suspended. A peak time change analysis unit analyzes a time change of a peak frequency. A signal source specification unit specifies, in the case where a plurality of frequency peaks are detected, a combination of modulation frequencies of signals transmitted from the same transmitter.","Thus, reception can be performed without signal interference even in the case where a plurality of transmitters are located nearby. When light from a transmitter is reflected off a floor, a wall, or a ceiling and received, light from a plurality of transmitters tends to be mixed. Even in such a case, reception can be performed without signal interference.","As an example, in the case where the receiver receives a light pattern in which a signal of a transmitter A and a signal of a transmitter B are mixed, frequency peaks are obtained as in (b) in . Since fdisappears and fappears, fand fcan be specified as signals from the same transmitter. Likewise, f, f, and fcan be specified as signals from the same transmitter, and f, f, and fcan be specified as signals from the same transmitter.","By fixing the time interval at which one transmitter changes the modulation frequency, it is possible to easily specify the signals from the same transmitter.","When a plurality of transmitters change the modulation frequency at the same timing, the signals from the same transmitter cannot be specified by the above-mentioned method. Hence, the time interval at which the modulation frequency is changed differs between transmitters. This prevents a situation where the plurality of transmitters change the modulation frequency always at the same timing, so that the signals from the same transmitter can be specified.","As illustrated in (c) in , the time from when the transmitter changes the modulation frequency to when the transmitter changes the modulation frequency next time is calculated from the current modulation frequency and the modulation frequency before the change. In so doing, even in the case where the plurality of transmitters change the modulation frequency at the same timing, it is possible to specify which signals of modulation frequencies are transmitted from the same transmitter.","Each transmitter may recognize the transmission signal of the other transmitter, and adjust the modulation frequency change timing to be different from the other transmitter.","The method described above produces the same advantageous effects not only in the case of frequency shift keying where one transmission signal has one modulation frequency but also in the case where one transmission signal has a plurality of modulation frequencies.","In the case where the light pattern is not changed with time in the frequency multiplex modulation scheme as illustrated in (a) in , the signals from the same transmitter cannot be specified. However, by inserting a segment with no signal or by changing to a specific modulation frequency as illustrated in (b) in , the signals from the same transmitter can be specified based on the time change of the peak.",{"@attributes":{"id":"p-1550","num":"1549"},"figref":"FIG. 249F"},"This information processing program is a program for causing the light emitter (or the light emitting unit) of the above-described transmitter to change in luminance with the light pattern illustrated in (b) in  or (b) in .","In other words, this information processing program is an information processing program that causes a computer to process information to be transmitted, in order for the information to be transmitted by way of luminance change. In detail, this information processing program causes a computer to execute: an determination step SA of encoding the information to determine a luminance change frequency; and an output step SA of outputting a signal of the luminance change frequency determined, to cause a light emitter to change in luminance according to the luminance change frequency determined, to transmit the information. In the determination step SA, each of a first frequency (e.g. the frequency f) and a second frequency (e.g. the frequency f) different from the first frequency is determined as the luminance change frequency. In the output step SA, each of a signal of the first frequency and a signal of the second frequency is output as the signal of the luminance change frequency determined, to cause the light emitter to change in luminance according to the first frequency during a first time (e.g. time T) and change in luminance according to the second frequency during a second time (e.g. time T) different from the first time after the first time elapses.","With this, the information to be transmitted can be appropriately transmitted in the form of visible light signals of the first and second frequencies. Furthermore, with the first time and the second time being different, the transmission can be adapted to various situations. As a result, communication between various devices becomes possible.","For example, as illustrated in , the first time is a duration corresponding to one period of the first frequency, and the second time is a duration corresponding to one period of the second frequency.","Furthermore, in the output step SA, at least one of the signal of the first frequency and the signal of the second frequency may be repeatedly output to make a total number of times the signal of the first frequency is output and a total number of times the signal of the second frequency is output different from each other. With this, the transmission can be adapted to various situations.","Furthermore, in the output step SA, at least one of the signal of the first frequency and the signal of the second frequency may be repeatedly output to make a total number of times one of the signal of the first frequency and the signal of the second frequency that has a lower frequency is output, greater than a total number of times a remaining one of the signal of the first frequency and the signal of the second frequency that has a higher frequency is output.","With this, in the case where the light emitter changes in luminance according to the frequency specified by each output signal, the light emitter can transmit, with high luminance, the information to be transmitted. For example, suppose that the duration for which low luminance lasts is the same in the change in luminance according to a low frequency, namely, the first frequency, and the change in luminance according to a high frequency, namely, the second frequency. In this case, the duration for which high luminance lasts is longer in the change in luminance according to the first frequency (that is, a low frequency) than in the change in luminance according to the second frequency (that is, a high frequency). Therefore, when many signals having the first frequency are output, the light emitter can transmit, with high luminance, the information to be transmitted.","Furthermore, in the output step SA, at least one of the signal of the first frequency and the signal of the second frequency may be repeatedly output to make a total number of times one of the signal of the first frequency and the signal of the second frequency that has a higher frequency is output, greater than a total number of times a remaining one of the signal of the first frequency and the signal of the second frequency that has a lower frequency is output. For example, the number of times the signal of the frequency fis output becomes greater than the number of times the signal of the frequency fis output as illustrated in .","With this, in the case where the light emitter changes in luminance according to the frequency specified by each output signal, the reception efficiency of the information to be transmitted by way of such luminance change can be higher. For example, when the information to be transmitted is transmitted to the receiver in the form of visible light signals represented by a plurality of frequencies, the receiver performs frequency analysis, such as the Fourier transform, on a captured image, to detect a frequency peak included in the visible light signal. Here, with a higher frequency, such peak detection is more difficult. Therefore, the signal of the first frequency and the signal of the second frequency are output so that the number of times one of the signals having a higher frequency is output becomes greater than the number of times a remaining one of the signals having a lower frequency is output as described above. By doing so, it is possible to facilitate peak detection of a high frequency. As a result, the reception efficiency can be improved.","Furthermore, in the output step SA, at least one of the signal of the first frequency and the signal of the second frequency may be repeatedly output to avoid continuous output of a signal of the same frequency. For example, the signal of the frequency fis not continuously output, and the signal of the frequency fis not continuously output either, as illustrated in .","With this, in the case where the light emitter changes in luminance according to the frequency specified by each output signal, it can make it harder for human eyes or cameras to catch flicker of light from the light emitter.",{"@attributes":{"id":"p-1562","num":"1561"},"figref":"FIG. 249G"},"This information processing apparatus A is an apparatus for causing the light emitter of the above-described transmitter to change in luminance with the light pattern illustrated in (b) in  or (b) in .","In other words, this information processing apparatus A is an apparatus that processes information to be transmitted, in order for the information to be transmitted by way of luminance change. In detail, the information processing apparatus A includes: a frequency determination unit A configured to encode the information to determine a luminance change frequency; and an output unit A configured to output a signal of the luminance change frequency determined, to cause a light emitter to change in luminance according to the luminance change frequency determined, to transmit the information. Here, the frequency determination unit A is configured to determine, as the luminance change frequency, each of a first frequency and a second frequency different from the first frequency. The output unit A is configured to output each of a signal of the first frequency and a signal of the second frequency as the signal of the luminance change frequency determined, to cause the light emitter to change in luminance according to the first frequency during a first time and change in luminance according to the second frequency during a second time different from the first time after the first time elapses. The information processing apparatus A can produce the same advantageous effects as the above-described information processing program.","(Operation of Home Appliance Through Lighting by Visible Light Communication)",{"@attributes":{"id":"p-1565","num":"1564"},"figref":"FIG. 250A"},"A transmitter such as a ceiling light (a lighting device) has a wireless communication function of Wi-Fi, Bluetooth\u00ae, or the like. The transmitter transmits, by visible light communication, information (such as a light emitter ID and an authentication ID) for connecting to the transmitter by wireless communication. A receiver A such as a smartphone (a mobile terminal) performs wireless communication with the transmitter, based on the received information. The receiver A may connect to the transmitter using other information. In such a case, the receiver A does not need to have a reception function. A receiver B is an electronic device (a control target device) such as a microwave, as an example. The transmitter transmits information of the paired receiver B, to the receiver A. The receiver A displays the information of the receiver B, as an operable device. The receiver A provides an instruction to operate the receiver B (a control signal) to the transmitter via wireless communication, and the transmitter provides the operation instruction to the receiver B via visible light communication. As a result, the user can operate the receiver B through the receiver A. Moreover, a device connected to the receiver A via the Internet or the like can operate the receiver B through the receiver A.","Bidirectional communication is possible when the receiver B has a transmission function and the transmitter has a reception function. The transmission function may be realized as visible light by light emission, or communication by sound. For instance, the transmitter includes a sound collection unit, and recognizes the sound output from the receiver B to thereby recognize the state of the receiver B. As an example, the transmitter recognizes the operation end sound of the receiver B, and notifies the receiver A of such recognition. The receiver A displays the operation end of the receiver B on the display, thus notifying the user.","The receivers A and B include NFC. The receiver A receives a signal from the transmitter, communicates with the receiver B via NFC, and registers in the receiver A and the transmitter that a signal from the transmitter transmitting the signal received immediately before is receivable by the receiver B. This is referred to as \u201cpairing\u201d between the transmitter and the receiver B. For example in the case where the receiver B is moved, the receiver A registers in the transmitter that the pairing is cleared. In the case where the receiver B is paired with another transmitter, the newly paired transmitter notifies this to the previously paired transmitter, to clear the previous pairing.",{"@attributes":{"id":"p-1569","num":"1568"},"figref":["FIG. 250B","FIG. 250B"],"b":"1028"},"Light emission operation by a light emitter  which is a lighting device is described first. In a light emitter  such as a lighting device or a TV monitor attached to a ceiling or a wall, an authentication ID generation unit  generates an authentication ID, using a random number generation unit  changing per time period. For the ID of the light emitter  and this authentication ID , in the case where there is no interrupt (Step ), the light emitter  determines that there is no \u201ctransmission data string\u201d transmitted from a mobile terminal . Accordingly, a light emitting unit  such as an LED continuously or intermittently outputs a light signal including: (1) the light emitter ID; (2) the authentication ID; and (3) a transmission data string flag=0 which is an identifier for identifying whether or not there is a transmission data string  transmitted via a mobile terminal  from an electronic device  which is a control target device.","The transmitted light signal is received by a photosensor  in the electronic device  (Step ). The electronic device  determines, in Step S, whether or not the device ID of the electronic device  and the authentication ID (the device authentication ID and the light emitter ID) are valid. When the result of the determination is YES (the IDs are valid), the electronic device  checks whether or not the transmission data string flag is 1 (Step ). Only when the result of the checking is YES (when the transmission data string flag is 1), the electronic device  executes the data of the transmission data string, e.g. a user command for applying a cooking recipe or the like (Step ).","A mechanism of light transmission by the electronic device  using the light modulation scheme according to the present disclosure is described below. The electronic device  transmits the device ID, the authentication ID for authenticating the device, and the light emitter ID of the light emitter  received by the electronic device  as mentioned above, i.e. the light emitter ID of the light emitter  the successful reception of which is ensured, for example using an LED backlight unit  of a display unit  (Step ).","The light signal according to the present disclosure is transmitted from the display unit  such as a liquid crystal display of a microwave or a POS device, by PPM, FDM, or FSK at a modulation frequency of 60 Hz or more without flicker. Accordingly, ordinary consumers are unaware of the transmission of the light signal. It is therefore possible to produce independent display such as a microwave menu on the display unit .","(Method of Detecting the ID of the Light Emitter  Receivable by the Electronic Device )","The user who intends to use the microwave or the like receives a light signal from the light emitter  by an in camera unit  of a mobile terminal , thus receiving the light emitter ID and the light emitter authentication ID via an in camera processing unit  (Step ). As the light emitter ID receivable by the electronic device , a light emitter ID corresponding to the position, which is recorded in the mobile terminal or a cloud  with position information using Wi-Fi or mobile reception such as 3G, may be detected (Step ).","When the user points an out camera  of the mobile terminal  at the display unit  of the microwave (an electronic device)  or the like, the light signal  according to the present disclosure can be demodulated using a MOS camera. Increasing the shutter speed enables faster data reception. A reception unit  receives the device ID of the electronic device , the authentication ID, a service ID, or a service provision cloud URL or device status converted from the service ID.","In Step , the mobile terminal  connects to the external cloud  using the URL received or held inside via a 3G\/Wi-Fi communication unit , and transmits the service ID and the device ID. In the cloud , a database  is searched for data corresponding to each of the device ID and the service ID. The data is then transmitted to the mobile terminal . Video data, command buttons, and the like are displayed on the screen of the mobile terminal based on this data. Upon viewing the display, the user inputs a desired command by an input method of pressing a button on the screen or the like (Step ). In the case of Yes (input), a transmission unit  of a BTLE (Bluetooth\u00ae Low Energy) transmission and reception unit  transmits a transmission data string including the device ID of the electronic device  or the like, the device authentication ID, the light emitter ID, the light emitter authentication ID, and the user command in Step .","The light emitter  receives the transmission data string by a reception unit  in a BTLE transmission and reception unit . When the interrupt processing unit  detects that the transmission data string is received (Yes in Step ), data \u201c(transmission data string)+ID+(transmission data flag=1)\u201d is modulated by the modulation unit according to the present disclosure and transmitted by light from the light emitting unit  such as an LED. When reception of the transmission data string is not detected (NO in Step ), the light emitter  continuously transmits the light emitter ID and the like.","Since the electronic device  has already confirmed, through actual reception, that the signal from the light emitter  is receivable, the reception can be reliably performed.","In this case, the light emitter ID is included in the transmission data string, so that the interrupt processing unit  recognizes that the electronic device as the transmission target is present in the light irradiation range of the light emitter of the ID. Therefore, the signal is transmitted only from the light emitter situated within the very narrow range where the electronic device is present, without transmitting the signal from other light emitters. The radio space can be efficiently used in this way.","In the case where this scheme is not employed, since a Bluetooth signal reaches far, a light signal will end up being transmitted from a light emitter at a different position from the electronic device. While one light emitter is emitting light, light transmission to another electronic device is impossible or is interfered with. Such a problem can be effectively solved by this scheme.","The following describes electronic device malfunction prevention.","In Step , the photosensor  receives the light signal. Since the light emitter ID is checked first, a light emission signal of another light emitter ID can be removed and so malfunctions are reduced.","In the present disclosure, the transmission data string  includes the device ID and the device authentication ID of the electronic device that is to receive the signal. In Step , whether or not the device authentication ID and the device ID belong to the electronic device  is checked, thus preventing any malfunction. A malfunction of a microwave or the like caused by the electronic device  erroneously processing a signal transmitted to another electronic device can be avoided, too.","The following describes user command execution error prevention.","In Step , when the transmission data flag is 1, it is determined that there is a user command. When the transmission data flag is 0, the process is stopped. When the transmission data flag is 1, after the device ID and the authentication ID in the user data string are authenticated, the transmission data string of the user command and the like is executed. For example, the electronic device  extracts and displays a recipe on the screen. When the user presses the corresponding button, the operation of the recipe such as 600 w for 3 minutes, 200 w for 1 minute, and steaming for 2 minutes can be started without an error.","When the user command is executed, electromagnetic noise of 2.4 GHz is generated in the microwave. To reduce this, in the case of operating according to instructions through the smartphone via Bluetooth or Wi-Fi, an intermittent drive unit  intermittently stops microwave output, e.g. for about 100 ms in 2 seconds. Communication by Bluetooth, Wi-Fi 802.11n, etc. is possible during this period. For example, if the microwave is not stopped, transmission of a stop instruction from the smartphone to the light emitter  by BTLE is interfered with. In the present disclosure, on the other hand, the transmission can be performed without any interference, with it being possible to stop the microwave or change the recipe by a light signal.","In this embodiment, by merely adding the photosensor  which costs only several yen per unit to the electronic device including the display unit, bidirectional communication with the smartphone in interaction with the cloud can be realized. This has an advantageous effect of turning a low-cost home appliance into a smart home appliance. Though the home appliance is used in this embodiment, the same advantageous effects can be achieved with a POS terminal including a display unit, an electronic price board in a supermarket, a personal computer, etc.","In this embodiment, the light emitter ID can be received only from the lighting device situated above the electronic device. Since the reception area is narrow, a small zone ID of Wi-Fi or the like is defined for each light emitter, and the ID is assigned to the position in each zone, thereby reducing the number of digits of the light emitter ID. In such a case, since the number of digits of the light emitter ID transmitted by PPM, FSK, or FDM according to the present disclosure is reduced, it is possible to receive a light signal from a small light source, obtain an ID at high speed, receive data from a distant light source, etc.",{"@attributes":{"id":"p-1589","num":"1588"},"figref":"FIG. 250C"},"The signal transmission and reception system includes a smartphone which is a multifunctional mobile phone, an LED light emitter which is a lighting device, a home appliance such as a refrigerator, and a server. The LED light emitter performs communication using BTLE (Bluetooth\u00ae Low Energy) and also performs visible light communication using a light emitting diode (LED). For example, the LED light emitter controls a refrigerator or communicates with an air conditioner by BTLE. In addition, the LED light emitter controls a power supply of a microwave, an air cleaner, or a television (TV) by visible light communication.","For example, the television includes a solar power device and uses this solar power device as a photosensor. Specifically, when the LED light emitter transmits a signal using a change in luminance, the television detects the change in luminance of the LED light emitter by referring to a change in power generated by the solar power device. The television then demodulates the signal represented by the detected change in luminance, thereby obtaining the signal transmitted from the LED light emitter. When the signal is an instruction to power ON, the television switches a main power thereof to ON, and when the signal is an instruction to power OFF, the television switches the main power thereof to OFF.","The server is capable of communicating with an air conditioner via a router and a specified low-power radio station (specified low-power). Furthermore, the server is capable of communicating with the LED light emitter because the air conditioner is capable of communicating with the LED light emitter via BTLE. Therefore, the server is capable of switching the power supply of the TV between ON and OFF via the LED light emitter. The smartphone is capable of controlling the power supply of the TV via the server by communicating with the server via wireless fidelity (Wi-Fi), for example.","As illustrated in , the information communication method according to this embodiment includes: transmitting the control signal (the transmission data string or the user command) from the mobile terminal (the smartphone) to the lighting device (the light emitter) through the wireless communication (such as BTLE or Wi-Fi) different from the visible light communication; performing the visible light communication by the lighting device changing in luminance according to the control signal; and detecting a change in luminance of the lighting device, demodulating the signal specified by the detected change in luminance to obtain the control signal, and performing the processing according to the control signal, by the control target device (such as a microwave). By doing so, even the mobile terminal that is not capable of changing in luminance for visible light communication is capable of causing the lighting device to change in luminance instead of the mobile terminal and is thereby capable of appropriately controlling the control target device. Note that the mobile terminal may be a wristwatch instead of a smartphone.","(Reception in which Interference is Eliminated)",{"@attributes":{"id":"p-1594","num":"1593"},"figref":"FIG. 251"},"In Step , the process starts. In Step , the receiver determines whether or not there is a periodic change in the intensity of received light. In the case of Yes, the process proceeds to Step . In the case of No, the process proceeds to Step , and the receiver receives light in a wide range by setting the lens of the light receiving unit at wide angle. The process then returns to Step . In Step , the receiver determines whether or not signal reception is possible. In the case of Yes, the process proceeds to Step , and the receiver receives a signal. In Step , the process ends. In the case of No, the process proceeds to Step , and the receiver receives light in a narrow range by setting the lens of the light receiving unit at telephoto. The process then returns to Step ","With this method, a signal from a transmitter in a wide direction can be received while eliminating signal interference from a plurality of transmitters.","(Transmitter Direction Estimation)",{"@attributes":{"id":"p-1597","num":"1596"},"figref":"FIG. 252"},"In Step , the process starts. In Step , the receiver sets the lens of the light receiving unit at maximum telephoto. In Step , the receiver determines whether or not there is a periodic change in the intensity of received light. In the case of Yes, the process proceeds to Step . In the case of No, the process proceeds to Step , and the receiver receives light in a wide range by setting the lens of the light receiving unit at wide angle. The process then returns to Step . In Step , the receiver receives a signal. In Step , the receiver sets the lens of the light receiving unit at maximum telephoto, changes the light reception direction along the boundary of the light reception range, detects the direction in which the light reception intensity is maximum, and estimates that the transmitter is in the detected direction. In Step , the process ends.","With this method, the direction in which the transmitter is present can be estimated. Here, the lens may be initially set at maximum wide angle, and gradually changed to telephoto.","(Reception Start)",{"@attributes":{"id":"p-1600","num":"1599"},"figref":"FIG. 253"},"In Step , the process starts. In Step , the receiver determines whether or not a signal is received from a base station of Wi-Fi, Bluetooth\u00ae, IMES, or the like. In the case of Yes, the process proceeds to Step . In the case of No, the process returns to Step . In Step , the receiver determines whether or not the base station is registered in the receiver or the server as a reception start trigger. In the case of Yes, the process proceeds to Step , and the receiver starts signal reception. In Step , the process ends. In the case of No, the process returns to Step ","With this method, reception can be started without the user performing a reception start operation. Moreover, power can be saved as compared with the case of constantly performing reception.","(Generation of ID Additionally Using Information of Another Medium)",{"@attributes":{"id":"p-1603","num":"1602"},"figref":"FIG. 254"},"In Step , the process starts. In Step , the receiver transmits either an ID of a connected carrier communication network, Wi-Fi, Bluetooth\u00ae, etc. or position information obtained from the ID or position information obtained from GPS, etc., to a high order bit ID index server. In Step , the receiver receives the high order bits of a visible light ID from the high order bit ID index server. In Step , the receiver receives a signal from a transmitter, as the low order bits of the visible light ID. In Step , the receiver transmits the combination of the high order bits and the low order bits of the visible light ID, to an ID solution server. In Step , the process ends.","With this method, the high order bits commonly used in the neighborhood of the receiver can be obtained. This contributes to a smaller amount of data transmitted from the transmitter, and faster reception by the receiver.","Here, the transmitter may transmit both the high order bits and the low order bits. In such a case, a receiver employing this method can synthesize the ID upon receiving the low order bits, whereas a receiver not employing this method obtains the ID by receiving the whole ID from the transmitter.","(Reception Scheme Selection by Frequency Separation)",{"@attributes":{"id":"p-1607","num":"1606"},"figref":"FIG. 255"},"In Step , the process starts. In Step , the receiver applies a frequency filter circuit to a received light signal, or performs frequency resolution on the received light signal by discrete Fourier series expansion. In Step , the receiver determines whether or not a low frequency component is present. In the case of Yes, the process proceeds to Step , and the receiver decodes the signal expressed in a low frequency domain of frequency modulation or the like. The process then proceeds to Step . In the case of No, the process proceeds to Step . In Step , the receiver determines whether or not the base station is registered in the receiver or the server as a reception start trigger. In the case of Yes, the process proceeds to Step , and the receiver decodes the signal expressed in a high frequency domain of pulse position modulation or the like. The process then proceeds to Step . In the case of No, the process proceeds to Step . In Step , the receiver starts signal reception. In Step , the process ends.","With this method, signals modulated by a plurality of modulation schemes can be received.","(Signal Reception in the Case of Long Exposure Time)",{"@attributes":{"id":"p-1610","num":"1609"},"figref":"FIG. 256"},"In Step , the process starts. In Step , in the case where the sensitivity is settable, the receiver sets the highest sensitivity. In Step , in the case where the exposure time is settable, the receiver sets the exposure time shorter than in the normal imaging mode. In Step , the receiver captures two images, and calculates the difference in luminance. In the case where the position or direction of the imaging unit changes while capturing two images, the receiver cancels the change, generates an image as if the image is captured in the same position and direction, and calculates the difference. In Step , the receiver calculates the average of luminance values in the direction parallel to the exposure lines in the captured image or the difference image. In Step , the receiver arranges the calculated average values in the direction perpendicular to the exposure lines, and performs discrete Fourier transform. In Step , the receiver recognizes whether or not there is a peak near a predetermined frequency. In Step , the process ends.","With this method, signal reception is possible even in the case where the exposure time is long, such as when the exposure time cannot be set or when a normal image is captured simultaneously.","In the case where the exposure time is automatically set, when the camera is pointed at a transmitter as a lighting, the exposure time is set to about 1\/60 second to 1\/480 second by an automatic exposure compensation function. If the exposure time cannot be set, signal reception is performed under this condition. In an experiment, when a lighting blinks periodically, stripes are visible in the direction perpendicular to the exposure lines if the period of one cycle is greater than or equal to about 1\/16 of the exposure time, so that the blink period can be recognized by image processing. Since the part in which the lighting is shown is too high in luminance and the stripes are hard to be recognized, the signal period may be calculated from the part where light is reflected.","In the case of using a scheme, such as frequency shift keying or frequency multiplex modulation, that periodically turns on and off the light emitting unit, flicker is less visible to humans even with the same modulation frequency and also flicker is less likely to appear in video captured by a video camera, than in the case of using pulse position modulation. Hence, a low frequency can be used as the modulation frequency. Since the temporal resolution of human vision is about 60 Hz, a frequency not less than this frequency can be used as the modulation frequency.","When the modulation frequency is an integer multiple of the imaging frame rate of the receiver, bright lines do not appear in the difference image between pixels at the same position in two images and so reception is difficult, because imaging is performed when the light pattern of the transmitter is in the same phase. Since the imaging frame rate of the receiver is typically 30 fps, setting the modulation frequency to other than an integer multiple of 30 Hz eases reception. Moreover, given that there are various imaging frame rates of receivers, two relatively prime modulation frequencies may be assigned to the same signal so that the transmitter transmits the signal alternately using the two modulation frequencies. By receiving at least one signal, the receiver can easily reconstruct the signal.",{"@attributes":{"id":"p-1616","num":"1615"},"figref":"FIG. 257"},"The ratio between a high luminance section and a low luminance section is adjusted to change the average luminance. Thus, brightness adjustment is possible. Here, when the period Tin which the luminance changes between HIGH and LOW is maintained constant, the frequency peak can be maintained constant. For example, in each of (a), (b), and (c) in , the time of brighter lighting than the average luminance is set short to adjust the transmitter to emit darker light, and the time of brighter lighting than the average luminance is set long to adjust the transmitter to emit brighter light, while time Tbetween a first change in luminance at which the luminance becomes higher than the average luminance and a second change in luminance is maintained constant. In , the light in (b) and (c) is adjusted to be darker than that in (a), and the light in (c) is adjusted to be darkest. With this, light adjustment can be performed while signals having the same meaning are transmitted.","It may be that the average luminance is changed by changing luminance in the high luminance section, luminance in the low luminance section, or luminance values in the both sections.",{"@attributes":{"id":"p-1619","num":"1618"},"figref":"FIG. 258"},"Since there is a limitation in component precision, the brightness of one transmitter will be slightly different from that of another even with the same setting of light adjustment. In the case where transmitters are arranged side by side, a difference in brightness between adjacent ones of the transmitters produces an unnatural impression. Hence, a user adjusts the brightness of the transmitters by operating a light adjustment correction\/operation unit. A light adjustment correction unit holds a correction value. A light adjustment control unit controls the brightness of the light emitting unit according to the correction value. When the light adjustment level is changed by a user operating a light adjustment operation unit, the light adjustment control unit controls the brightness of the light emitting unit based on a light adjustment setting value after the change and the correction value held in the light adjustment correction unit. The light adjustment control unit transfers the light adjustment setting value to another transmitter through a cooperative light adjustment unit. When the light adjustment setting value is transferred from another transmitter through the cooperative light adjustment unit, the light adjustment control unit controls the brightness of the light emitting unit based on the light adjustment setting value and the correction value held in the light adjustment correction unit.","The control method of controlling an information communication device that transmits a signal by causing a light emitter to change in luminance according to an embodiment of the present disclosure may cause a computer of the information communication device to execute: determining, by modulating a signal to be transmitted that includes a plurality of different signals, a luminance change pattern corresponding to a different frequency for each of the different signals; and transmitting the signal to be transmitted, by causing the light emitter to change in luminance to include, in a time corresponding to a single frequency, only a luminance change pattern determined by modulating a single signal.","For example, when luminance change patterns determined by modulating more than one signal are included in the time corresponding to a single frequency, the waveform of changes in luminance with time will be complicated, making it difficult to appropriately receive signals. However, when only a luminance change pattern determined by modulating a single signal is included in the time corresponding to a single frequency, it is possible to more appropriately receive signals upon reception.","According to one embodiment of the present disclosure, the number of transmissions may be determined in the determining so as to make a total number of times one of the plurality of different signals is transmitted different from a total number of times a remaining one of the plurality of different signals is transmitted within a predetermined time.","When the number of times one signal is transmitted is different from the number of times another signal is transmitted, it is possible to prevent flicker at the time of transmission.","According to one embodiment of the present disclosure, in the determining, a total number of times a signal corresponding to a high frequency is transmitted may be set greater than a total number of times another signal is transmitted within a predetermined time.","At the time of frequency conversion at a receiver, a signal corresponding to a high frequency results in low luminance, but an increase in the number of transmissions makes it possible to increase a luminance value at the time of frequency conversion.","According to one embodiment of the present disclosure, changes in luminance with time in the luminance change pattern have a waveform of any of a square wave, a triangular wave, and a sawtooth wave.","With a square wave or the like, it is possible to more appropriately receive signals.","According to one embodiment of the present disclosure, when an average luminance of the light emitter is set to have a large value, a length of time for which luminance of the light emitter is greater than a predetermined value during the time corresponding to the single frequency may be set to be longer than when the average luminance of the light emitter is set to have a small value.","By adjusting the length of time for which the luminance of the light emitter is greater than the predetermined value during the time corresponding to a single frequency, it is possible to adjust the average luminance of the light emitter while transmitting signals. For example, when the light emitter is used as a lighting, signals can be transmitted while the overall brightness is decreased or increased.","Using an application programming interface (API) (indicating a unit for using OS functions) on which the exposure time is set, the receiver can set the exposure time to a predetermined value and stably receive the visible light signal. Furthermore, using the API on which sensitivity is set, the receiver can set sensitivity to a predetermined value, and even when the brightness of a transmission signal is low or high, can stably receive the visible light signal.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.","(Setting of Exposure Time)",{"@attributes":{"id":"p-1633","num":"1632"},"figref":"FIGS. 259A to 259D"},"In order to receive the visible light signal by the image sensor in the scheme according to the present disclosure, it is necessary to set the exposure time shorter than a predetermined time. The predetermined time is determined according to a modulation scheme and a modulation frequency of the visible light signal. Generally, the exposure time needs to be shorter as the modulation frequency increases.","As the exposure time becomes shorter, the clarity of observed bright lines can increase. Meanwhile, a shorter exposure time leads to a reduction in the intensity of received light, resulting in an entire captured image being darker. In other words, the signal strength is attenuated. Therefore, it is possible to improve reception performance (such as a reception speed and an error rate) by setting a short exposure time within the range in which presence of the visible light signal is detectable.","As illustrated in , the receiver sets the imaging mode to the visible light imaging mode (Step S). At this time, the receiver determines whether or not it includes a monochrome imaging function and is to receive a signal modulated with luminance information only (Step S). Here, when determining that it includes a monochrome imaging function and is to receive a signal modulated with luminance information only (Step S: Y), the receiver sets a color-related mode included in the imaging mode to a monochrome imaging mode in which the monochrome imaging function is used (Step S). By doing so, in the case of receiving a signal modulated with luminance information only, that is, in the case of receiving a visible light signal which represents information by changes in luminance only, it is possible to improve the processing speed by not handling color information. In contrast, when not determining in Step S that it includes a monochrome imaging function and is to receive a signal modulated with luminance information only (Step S: N), that is, when the visible light signal is represented using color information, the receiver sets the color-related mode included in the imaging mode to a color imaging mode (Step S).","Next, the receiver determines whether or not an imaging unit including the above-stated image sensor includes a function of selecting an exposure time (Step S). Here, when determining that the function is included (Step : Y), the receiver sets the exposure time shorter than the above-stated predetermined time using the function so that bright lines will appear in a captured image (Step S). Note that the receiver may set the exposure time to as short an exposure time as possible within the range in which the transmitter that transmits the visible light signal can be seen in the captured image.","In contrast, when determining in Step S that the function of selecting the exposure time is not included (Step S: N), the receiver further determines whether or not the imaging unit includes a function of setting sensitivity (Step S). Here, when determining that the function of setting sensitivity is included (Step S: Y), the receiver sets the sensitivity to the maximum using the function (Step S). As a result, a captured image obtained by imaging with the maximum sensitivity will be bright. Therefore, in the receiver with automatic exposure enabled, the exposure time is set short by the automatic exposure so that the exposure falls within a predetermined range. Note that in the automatic exposure, every time an image is captured, the captured image is used as input of the automatic exposure, and the exposure time is adjusted as needed based on the captured image so that the exposure falls within the predetermined range. Details of the automatic exposure shall be described later.","Furthermore, the receiver determines whether or not the imaging unit includes a function of setting the F number (aperture) (Step S). Here, when the function of setting the F number (Step S: Y) is included, the receiver sets the F number to the minimum (opens the aperture) using the function (Step S). As a result, a captured image obtained by imaging with the minimum F number will be bright. Therefore, in the receiver with automatic exposure enabled, the exposure time is set short by the automatic exposure so that the exposure falls within a predetermined range.","Furthermore, the receiver determines whether or not the imaging unit includes a function of selecting an exposure compensation value (Step S). Here, when determining that the imaging unit includes the function of selecting an exposure compensation value (Step S: Y), the receiver sets the exposure compensation value to the minimum using the function (Step S). As a result, in the receiver with automatic exposure enabled, the exposure time is set short by the automatic exposure so that the exposure becomes low.","A scene mode (a high-speed scene mode) for capturing an image of a subject in high-speed motion is generally defined to have a name such as \u201cSport\u201d or \u201cAction.\u201d","As illustrated in , the receiver determines, after Step S or Step S, whether or not the following condition is satisfied (Step S): the imaging unit includes a function of setting the high-speed scene mode, and setting of the high-speed scene mode does not lead to setting the sensitivity lower than before the setting of the scene mode, or lead to setting the F number higher than before the setting of the scene mode, or lead to setting the exposure compensation value higher than before the setting of the scene mode. Here, when determining that the above condition is satisfied (Step S: Y), the receiver sets the scene mode to the high-speed scene mode (Step S). As a result, in the receiver with automatic exposure enabled, the exposure time is set short by the automatic exposure so that a blur-free image of the subject in high-speed motion can be captured.","Next, the receiver enables the automatic exposure (Step S) and captures an image of the subject (Step S).","As illustrated in , the receiver determines after Step S whether or not the imaging unit includes a zoom function (Step S). Here, when determining that the zoom function is included (Step S: Y), the receiver further determines whether or not a zoom center position is selectable, that is, whether or not the center position can be set to a given position within the captured image (Step S). When determining that the center position is selectable (Step S: Y), the receiver selects a bright part of the captured image as the zoom center position, and zooms to capture an image in which the subject corresponding to the bright part is shown large at the center (Step S). In contrast, when determining that the center position is not selectable (Step S: N), the receiver determines whether or not the center of the captured image is brighter than brightness having a predetermined value, or whether or not the center of the captured image is brighter than the average brightness of predetermined portions of the captured image (Step S). Here, when determining that the center is brighter (Step S: Y), the receiver zooms (Step S). Thus, also in this case, the subject corresponding to the bright part can be shown large at the center in a captured image.","Generally, in many of devices including an imaging unit, the center-weighted metering is adopted as a metering scheme, and when a captured image has a bright part at the center, the exposure is adjusted based on the bright part even when another position is not selected as the metering position. With this, the exposure time is set short. In addition, since the zooming results in an increase in the area of the bright part, and thus the exposure is adjusted based on a brighter screen, the exposure time is set short.","Next, the receiver determines whether or not a function of selecting a metering position or a focus position is included (Step S). Here, when determining that the function is included (Step S: Y), the receiver performs processing for finding a bright place within the captured image. That is, the receiver performs processing for finding, out of the captured image, a place in a region brighter than predetermined brightness and having predetermined shape and size. Specifically, the receiver first determines whether or not an exposure evaluation calculation expression for the automatic exposure is already known (Step S). When determining that the calculation expression is already known (Step S: Y), the receiver finds a place in the above-described bright region by evaluating the brightness of each region of the captured image with the use of the same calculation expression as the known calculation expression (Step S). In contrast, when determining that the exposure evaluation calculation expression is unknown (N in Step S), the receiver finds a place in the above-described bright region by evaluating the brightness of each region of the captured image with the use of a predetermined calculation expression for calculating an average value of brightness of pixels in a region having predetermined shape and size (Step S). Note that the predetermined shape is the shape of a rectangle, a circle, or a cross, for example. Furthermore, the region may be made up of a plurality of discontinuous regions. Furthermore, the calculation for the above-described average value may use, rather than a simple average, a weighted average calculated with a more weight in a part closer to the center.","The receiver determines whether or not a total area of all the bright regions found is smaller than a predetermined area (Step S). Here, when determined that the total area is smaller than the predetermined area (Step S: Y), the receiver zooms to capture an image in which the total area of the bright regions is no less than the predetermined area (Step S). Next, the receiver determines whether or not a metering position is selectable (Step S). When determining that the metering position is selectable (Step S: Y), the receiver selects a place in the brightest region as the metering position (Step S). In the automatic exposure, the exposure is adjusted based on the brightness of the metering position. Thus, when a place in the brightest region is selected as the metering position, the exposure time is set short by the automatic exposure. In contrast, when determining in Step S that the metering position is not selectable (Step : N), that is, when the focus position is selectable, the receiver selects a place in the brightest region as the focus position. Various imaging units can be mounted in the receiver. In the automatic exposure by some of these various imaging units, the exposure is adjusted based on brightness at the focus position. Therefore, when a place in the brightest region is selected as the focus position, the exposure time is set short by the automatic exposure. Here, the selected place may be different from the place in the region used to evaluate or calculate brightness and is set according to a setting scheme of the imaging unit. As an example, when the selected scheme is designed to select a center point, the receiver selects the center of the brightest region, and when the selected scheme is designed to select a rectangular region, the receiver selects a rectangular region including the center of the brightest region.","Next, the receiver determines whether or not any region of the captured image is brighter than the region of the place selected as the metering position or the focus position (Step S). Here, when determining that a brighter region is present (Step S: Y), the receiver repeats the processing following Step S. In contrast, when determining that no brighter region is present (Step S: N), the receiver captures an image of the subject (Step S).","Next, the receiver determines based on the image captured in Step S whether or not the automatic exposure needs to be ended or whether or not a predetermined time has elapsed since the automatic exposure was enabled (Step S). Here, for example, when determining that the automatic exposure does not need to be ended (Step S: N), the receiver further determines based on the image captured in Step S whether or not the position or the imaging direction of the imaging unit has changed (Step S). When determining that the position or the imaging direction of the imaging unit has changed (Step S: Y), the receiver performs the processing following Step S again. By doing so, even when the place selected as the metering position or the focus position moves in the captured image, a place in the brightest region at that moment can be selected. In contrast, when determining in Step S that the position or the imaging direction of the imaging unit has not changed (Step : N), the receiver repeats the processing following Step S. Note that the receiver may search for the brightest region and select a metering position or a focus position every time one image is captured.","When determining in Step  that the automatic exposure needs to be ended, when the exposure time does not change any more, or when determining in Step  that the predetermined time has elapsed (Step S: Y), or when the exposure time is set in Step S, the receiver disables the automatic exposure (Step S) and captures an image of the subject (Step S). The receiver then determines whether or not a visible light signal has been received by capturing the image (Step S). Here, when determining that no visible light signal has been received (Step S: N), the receiver further determines whether or not a predetermined time has elapsed (Step S). When determining that the predetermined time has not elapsed (Step S: N), the receiver repeats the processing following Step S. In contrast, when determining that the predetermined time has elapsed (Step S: Y), that is, when failing to receive a visible light signal within the predetermined time, the receiver repeats the processing following Step S to search for the brightest region again.","Note that the receiver may stop zooming at any point in time when the zoom function is used. This means that when not zooming, the receiver may detect whether or not a bright subject is present in a range that is not captured when zoomed in, but is captured when not zoomed in. Note that this bright subject is likely to be a transmitter that transmits a visible light signal by way of luminance change. By doing so, it is possible to receive signals from transmitters present in a wide range.","The automatic exposure and a metering method are described below.","The automatic exposure in  is described below. The automatic exposure is an operation, a process, or a function of automatically adjusting a metering result to a predetermined value by the imaging unit of the receiver by way of adjusting the exposure time, the sensitivity, and the aperture.","The metering method for obtaining a metering result includes average metering (full-frame metering), center-weighted metering, spot metering (partial metering), and segment metering. The average metering calculates average brightness of an entire image to be captured. The center-weighted metering calculates a weighted average value of brightness that is more weighted toward the center (or a selected portion) of an image. The spot metering calculates an average value (or a weighted average value) of brightness of one predetermined area (or a few predetermined areas) defined with the center or the selected portion of the image as its center. The segment metering segments the image into portions, measures light at each of the portions, and calculates a value of total brightness.","Even being unable to directly set the exposure time short, the imaging unit including an automatic exposure function is capable of indirectly setting an exposure time by the automatic exposure function. For example, when the sensitivity is set high (e.g. to the maximum value), a captured image is bright where the other parameters are the same, and therefore the exposure time can be set short by the automatic exposure. When the aperture is set to be open (i.e. uncovered), the exposure time can be set short likewise. When a value indicating an exposure compensation level is set low (e.g. to the minimum value), the automatic exposure causes a dark image to be captured, that is, the exposure time is set short. When the brightest place in an image is selected as the metering position, the exposure time can be set short. If it a metering method is selectable, the exposure time can be set short when the spot metering is selected. If a metering range is selectable, the exposure time can be set short when the minimum metering range is selected. In the case where the area of the bright part in the image is large, the exposure time can be set short when the largest possible metering range that does not exceed the bright part is selected. If more than one metering position is selectable, the exposure time can be set short when the same place is selected as the metering position more than one time. When a zoomed-in image of a bright place in the image is captured and this place is selected as the metering position, the exposure time can be set short.","EX zoom is described below.",{"@attributes":{"id":"p-1657","num":"1656"},"figref":"FIG. 260"},"The zoom in , that is, the way to obtain a magnified image, includes optical zoom which adjusts the focal length of a lens to change the size of an image formed on an imaging element, digital zoom which interpolates an image formed on an imaging element through digital processing to obtain a magnified image, and EX zoom which changes imaging elements that are used for imaging, to obtain a magnified image. The EX zoom is applicable when the number of imaging elements included in an image sensor is great relative to a resolution of a captured image.","For example, an image sensor illustrated in  includes 32 by 24 imaging elements arranged in matrix. Specifically, 32 imaging elements in width by 24 imaging elements in height are arranged. When this image sensor captures an image having a resolution of 16 pixels in width and 12 pixels in height, out of the 32 by 24 imaging elements included in the image sensor , only 16 by 12 imaging elements evenly dispersed as a whole in the image sensor (e.g. the imaging elements of the image sensor indicated by black squares in (a) in ) are used for imaging as illustrated in (a) in . In other words, only odd-numbered or even-numbered imaging elements in each of the heightwise and widthwise arrangements of imaging elements is used to capture an image. By doing so, an image having a desired resolution is obtained. Note that although a subject appears on the image sensor in , this is for facilitating the understanding of a relationship between each of the imaging elements and a captured image.","When capturing an image of a wide range to search for a transmitter or to receive information from many transmitters, a receiver including the above image sensor captures an image using only a part of the imaging elements evenly dispersed as a whole in the image sensor ","When using the EX zoom, the receiver captures an image by only a part of the imaging elements that is locally dense in the image sensor (e.g. the 16 by 12 image sensors indicated by black squares in the image sensor in (b) in ) as illustrated in (b) in . By doing so, an image is obtained which is a zoomed-in image of a part of the image that corresponds to that part of the imaging elements. With such EX zoom, a magnified image of a transmitter is captured, which makes it possible to receive visible light signals for a long time, as well as to increase the reception speed and to receive a visible light signal from far way.","In the digital zoom, it is not possible to increase the number of exposure lines that receive visible light signals, and the length of time for which the visible light signals are received does not increase; therefore, it is preferable to use other kinds of zoom as much as possible. The optical zoom requires time for physical movement of a lens, an image sensor, or the like; in this regard, the EX zoom requires only a digital setting change and is therefore advantageous in that it takes a short time to zoom. From this perspective, the order of priority of the zooms is as follows: (1) the EX zoom; (2) the optical zoom; and (3) the digital zoom. The receiver may use one or more of these zooms selected according to the above order of priority and the need of zoom magnification. Note that the imaging elements that are not used in the imaging methods represented in (a) and (b) in  may be used to reduce image noise.",{"@attributes":{"id":"p-1663","num":"1662"},"figref":"FIG. 261A"},"This reception program is a program for causing a computer included in a receiver to execute the processing illustrated in , for example.","In other words, this reception program is a reception program for receiving information from a light emitter. In detail, this reception program causes a computer to execute: an exposure time setting step SA of setting an exposure time of an image sensor using automatic exposure; a bright line image obtainment step SA of obtaining a bright line image which is an image including a plurality of bright lines corresponding to a plurality of exposure lines included in the image sensor, by capturing an image of a light emitter changing in luminance by the image sensor with the set exposure time; and an information obtainment step SA of obtaining information by decoding a pattern of the plurality of the bright lines included in the obtained bright line image. In the exposure time setting step SA, the sensitivity of the image sensor is set to the maximum value within a predetermined range for the image sensor as in Step S in , and an exposure time according to the sensitivity at the maximum value is set by the automatic exposure.","By doing so, a short exposure time that allows for an appropriate bright line image to be obtained can be set using an automatic exposure function included in a commonly used camera even when the exposure time of the image sensor cannot be directly set. Thus, in the automatic exposure, the exposure is adjusted based on brightness of an image captured by the image sensor. Therefore, when the sensitivity of the image sensor is set to a large value, the image is bright, and thus the exposure time of the image sensor is set short to reduce exposure. Setting the sensitivity of the image sensor to the maximum value allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image. That is, it is possible to appropriately receive information from the light emitter. As a result, it is possible to enable communication between various devices. Note that the sensitivity is ISO speed, for example.","In the exposure time setting step SA, a value indicating an exposure compensation level of the image sensor is set to the minimum value within a preset range for the image sensor as in Step S in , and an exposure time according to the sensitivity at the maximum value and the exposure compensation level at the minimum value is set by the automatic exposure.","By doing so, since the value indicating the exposure compensation level is set to the minimum value, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image. Note that the unit of the value indicating the exposure compensation level is EV, for example.","Furthermore, in the exposure time setting step SA, a brighter part than the other part in a first image, captured by the image sensor, of a subject including a light emitter is specified as in . The optical zoom is then used to enlarge an image of a part of the subject that corresponds to this bright part. Furthermore, a second image obtained by capturing the enlarged image of the part of the subject by the image sensor is used as input of the automatic exposure to set the exposure time. Moreover, in the bright line image obtainment step SA, the enlarged image of the part of the subject is captured by the image sensor with the set exposure time to obtain a bright line image.","Thus, the optical zoom enlarges an image of a part of the subject that corresponds to the bright part in the first image, that is, the optical zoom enlarges an image of a bright light emitter, with the result that the second image can be brighter than the first image as a whole. Since this bright second image is used as input of the automatic exposure, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image.","Furthermore, in the exposure time setting step SA, it is determined as illustrated in  whether or not a central part of the first image, captured by the image sensor, of the subject including the light emitter is brighter than the average brightness of a plurality of points in the first image. When the central part is determined to be brighter, the optical zoom enlarges an image of a part of the subject that corresponds to the central part. Furthermore, a second image obtained by capturing the enlarged image of the part of the subject by the image sensor is used as input of the automatic exposure to set the exposure time. Moreover, in the bright line image obtainment step SA, the enlarged image of the part of the subject is captured by the image sensor with the set exposure time to obtain a bright line image.","Thus, the optical zoom enlarges an image of a part of the subject that corresponds to the bright central part in the first image, that is, the optical zoom enlarges an image of a bright light emitter, with the result that the second image can be brighter than the first image as a whole. Since this bright second image is used as input of the automatic exposure, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image. If arbitrary setting of a center position for the enlargement is not possible, the optical zoom enlarges a central part of the angle of view or the image. Therefore, even when arbitrary setting of the center position is not possible, the optical zoom can be used to make the second image brighter as a whole as long as the central part of the first image is bright. Here, if the enlargement by the optical zoom is performed even when the central part of the first image is dark, the second image will be dark, resulting in the exposure time becoming long. Therefore, as described above, the enlargement by the optical zoom is performed only when the central part is determined to be bright so that the exposure time can be prevented from becoming long.","Furthermore, in the exposure time setting step SA, a brighter part than the other part in a first image of a subject including a light emitter captured by, among K imaging elements (where K is an integer of 3 or more) included in an image sensor, only N imaging elements (where N is an integer less than K and no less than 2) evenly dispersed in the image sensor is specified as illustrated in . Moreover, a second image captured by only N densely arranged imaging elements corresponding to the bright part among the K imaging elements included in the image sensor is used as input of the automatic exposure to set the exposure time. In the bright line image obtainment step SA, an image is captured by only the N densely arrange imaging elements included in the image sensor with the set exposure time to obtain a bright line image.","By doing so, the second image can be bright as a whole through what is called the EX zoom even when the bright part is not located at the center of the first image, with the result that the exposure time can be set short.","Furthermore, in the exposure time setting step SA, a metering position in the image of the subject captured by the image sensor is set as illustrated in , and an exposure time according to brightness at the set metering position is set by the automatic exposure.","By doing so, when the bright part in the captured image is set as the metering position, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image.","Furthermore, the reception program may further cause a computer to execute an imaging mode setting step of switching an imaging mode of the image sensor from a color imaging mode for obtaining a color image by imaging to a monochrome imaging mode for obtaining a monochrome image by imaging. In this case, in the exposure time setting step SA, an image obtained in the monochrome imaging mode is used as input of the automatic exposure to set the exposure time.","Thus, an image obtained in the monochrome imaging mode is used as input of the automatic exposure, with the result that an appropriate exposure time can be set without influence of color information. When the exposure time is set in the monochrome imaging mode, the bright line image is obtained by imaging according to this mode. Therefore, when the light emitter transmits information only by changing in luminance, the information can be appropriately obtained.","Furthermore, in the exposure time setting step SA, every time an image is obtained by capturing an image of the light emitter by the image sensor, the obtained image is used as input of the automatic exposure to update the exposure time of the image sensor. Here, as illustrated in Step S in , for example, the updating of the exposure time by the automatic exposure is brought to an end when the fluctuation range of the exposure time that is updated as needed falls below a predetermined range, and thus the exposure time is set.","Thus, when the fluctuation of the exposure time is stable, that is, when brightness of an image obtained by imaging is within a target brightness range, the exposure time set at the point is used in the imaging for obtaining a bright line image. Therefore, an appropriate bright line image can be obtained.",{"@attributes":{"id":"p-1681","num":"1680"},"figref":"FIG. 261B"},"This reception device A is the above-described receiver that performs the processing illustrated in , for example.","In detail, this reception device A is a device for receiving information from a light emitter and includes: an exposure time setting unit A configured to set an exposure time of an image sensor using automatic exposure; an imaging unit A configured to obtain a bright line image which is an image including a plurality of bright lines corresponding to a plurality of exposure lines included in the image sensor, by capturing an image of a light emitter changing in luminance by the image sensor with the set exposure time; and a decoding unit A configured to obtain information by decoding a pattern of the plurality of the bright lines included in the obtained bright line image. The exposure time setting unit A sets the sensitivity of the image sensor to the maximum value within a predetermined range for the image sensor and sets the exposure time according to the sensitivity at the maximum value by the automatic exposure. This reception device A can produce the same advantageous effects as the above-described reception program.","A reception program according to an aspect of the present disclosure is a reception program for receiving information from a light emitter changing in luminance according to a signal output using the above-described image processing program, and causes a computer to execute: an exposure time setting step of setting an exposure time of an image sensor using automatic exposure; a bright line image obtainment step of obtaining a bright line image which is an image including a plurality of bright lines corresponding to a plurality of exposure lines included in the image sensor, by capturing an image of a subject including a light emitter changing in luminance by the image sensor with the set exposure time; and an information obtainment step of obtaining information by decoding a pattern of the plurality of the bright lines included in the obtained bright line image. In the exposure time setting step, the sensitivity of the image sensor is set to the maximum value within a predetermined range for the image sensor, and the exposure time according to the sensitivity at the maximum value is set by the automatic exposure.","By doing so, as illustrated in  to , a short exposure time that allows for an appropriate bright line image to be obtained can be set using an automatic exposure function included in a commonly used camera even when the exposure time of the image sensor cannot be directly set. Thus, in the automatic exposure, the exposure is adjusted based on brightness of an image captured by the image sensor. Therefore, when the sensitivity of the image sensor is set to a large value, the image is bright, and thus the exposure time of the image sensor is set short to reduce exposure. Setting the sensitivity of the image sensor to the maximum value allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image. That is, it is possible to appropriately receive information from the light emitter. As a result, communication between various devices becomes possible. Note that the sensitivity is ISO speed, for example.","In the exposure time setting step, a value indicating an exposure compensation level of the image sensor is set to the minimum value within a preset range for the image sensor, and an exposure time according to the sensitivity at the maximum value and the exposure compensation level at the minimum value may be set by the automatic exposure.","By doing so, since the value indicating the exposure compensation level is set to the minimum value, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image. Note that the unit of the value indicating the exposure compensation level is EV, for example.","Furthermore, in the exposure time setting step, a brighter part than the other part in a first image, captured by the image sensor, of a subject including a light emitter may be specified. The optical zoom may be then used to enlarge an image of a part of the subject that corresponds to this bright part. Furthermore, a second image obtained by capturing the enlarged image of the part of the subject by the image sensor may be used as input of the automatic exposure to set the exposure time. Moreover, in the bright line image obtainment step, the enlarged image of the part of the subject may be captured by the image sensor with the set exposure time to obtain a bright line image.","Thus, the optical zoom enlarges an image of a part of the subject that corresponds to the bright part in the first image, that is, the optical zoom enlarges an image of a bright light emitter, with the result that the second image can be brighter than the first image as a whole. Since this bright second image is used as input of the automatic exposure, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image.","Furthermore, in the exposure time setting step, it may be determined whether or not a central part of the first image, captured by the image sensor, of the subject including the light emitter is brighter than the average brightness of a plurality of points in the first image. When the central part is determined to be brighter, the optical zoom may enlarge an image of a part of the subject that corresponds to the central part. Furthermore, a second image obtained by capturing the enlarged image of the part of the subject by the image sensor may be used as input of the automatic exposure to set the exposure time. Moreover, in the bright line image obtainment step, the enlarged image of the part of the subject may be captured by the image sensor with the set exposure time to obtain a bright line image.","Thus, the optical zoom enlarges an image of a part of the subject that corresponds to the bright central part in the first image, that is, the optical zoom enlarges an image of a bright light emitter, with the result that the second image can be brighter than the first image as a whole. Since this bright second image is used as input of the automatic exposure, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image. If arbitrary setting of a center position for the enlargement is not possible, the optical zoom enlarges a central part of the angle of view or the image. Therefore, even when arbitrary setting of the center position is not possible, the optical zoom can be used to make the second image brighter as a whole as long as the central part of the first image is bright. Here, if the enlargement by the optical zoom is performed even when the central part of the first image is dark, the second image will be dark, resulting in the exposure time becoming long. Therefore, as described above, the enlargement by the optical zoom is performed only when the central part is determined to be bright so that the exposure time can be prevented from becoming long.","Furthermore, in the exposure time setting step, a brighter part than the other part in a first image of a subject including a light emitter captured by, among K imaging elements (where K is an integer of 3 or more) included in an image sensor, only N imaging elements (where N is an integer less than K and no less than 2) evenly dispersed in the image sensor may be specified. Moreover, a second image captured by only N densely arranged imaging elements corresponding to the bright part among the K imaging elements included in the image sensor may be used as input of the automatic exposure to set the exposure time. In the bright line image obtainment step, an image may be captured by only the N densely arrange imaging elements included in the image sensor with the set exposure time to obtain a bright line image.","By doing so, the second image can be bright as a whole through what is called the EX zoom even when the bright part is not located at the center of the first image, with the result that the exposure time can be set short.","Furthermore, in the exposure time setting step, a metering position in the image of the subject captured by the image sensor may be set, and an exposure time according to brightness at the set metering position may be set by the automatic exposure.","By doing so, when the bright part in the captured image is set as the metering position, processing in the automatic exposure to reduce exposure allows the exposure time to be set shorter, and thus it is possible to obtain an appropriate bright line image.","Furthermore, the reception program may further cause a computer to execute an imaging mode setting step of switching an imaging mode of the image sensor from a color imaging mode for obtaining a color image by imaging to a monochrome imaging mode for obtaining a monochrome image by imaging. In this case, in the exposure time setting step, an image obtained in the monochrome imaging mode may be used as input of the automatic exposure to set the exposure time.","Thus, an image obtained in the monochrome imaging mode is used as input of the automatic exposure, with the result that an appropriate exposure time can be set without influence of color information. When the exposure time is set in the monochrome imaging mode, the bright line image is obtained by imaging according to this mode. Therefore, when the light emitter transmits information only by changing in luminance, the information can be appropriately obtained.","Furthermore, in the exposure time setting step, every time an image is obtained by capturing an image of the light emitter by the image sensor, the obtained image may be used as input of the automatic exposure to update the exposure time of the image sensor, and when the fluctuation range of the exposure time that is updated as needed falls below a predetermined range, the updating of the exposure time by the automatic exposure may be brought to an end; thus the exposure time may be set.","Thus, when the fluctuation of the exposure time is stable, that is, when brightness of an image obtained by imaging is within a target brightness range, the exposure time set at the point is used in the imaging for obtaining a bright line image. Therefore, an appropriate bright line image can be obtained.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.","In this embodiment, the exposure time is set for each exposure line or each imaging element.",{"@attributes":{"id":"p-1702","num":"1701"},"figref":"FIGS. 262, 263, and 264"},"As illustrated in , the exposure time is set for each exposure line in an image sensor which is an imaging unit included in a receiver. Specifically, a long exposure time for normal imaging is set for a predetermined exposure line (white exposure lines in ) and a short exposure time for visible light imaging is set for another exposure line (black exposure lines in ). For example, a long exposure time and a short exposure line are alternately set for exposure lines arranged in the vertical direction. By doing so, normal imaging and visible light imaging (visible light communication) can be performed almost simultaneously upon capturing an image of a transmitter that transmits a visible light signal by changing in luminance. Note that out of the two exposure times, different exposure times may be alternately set on a per line basis, or a different exposure time may be set for each set of several lines or each of an upper part and a lower part of the image sensor . With the use of two exposure times in this way, combining data of images captured with the exposure lines for which the same exposure time is set results in each of a normal captured image and a visible light captured image which is a bright line image having a pattern of a plurality of bright lines. Since the normal captured image lacks an image portion not captured with the long exposure time (that is, an image corresponding to the exposure lines for which the short exposure time is set), the normal captured image is interpolated for the image portion so that a preview image can be displayed. Here, information obtained by visible light communication can be superimposed on the preview image . This information is information associated with the visible light signal, obtained by decoding the pattern of the plurality of the bright lines included in the visible light captured image . Note that it is possible that the receiver stores, as a captured image, the normal captured image or an interpolated image of the normal captured image , and adds to the stored captured image the received visible light signal or the information associated with the visible light signal as additional information.","As illustrated in , an image sensor may be used instead of the image sensor . In the image sensor , the exposure time is set for each column of a plurality of imaging elements arranged in the direction perpendicular to the exposure lines (the column is hereinafter referred to as a vertical line) rather than for each exposure line. Specifically, a long exposure time for normal imaging is set for a predetermined vertical line (white vertical lines in ) and a short exposure time for visible light imaging is set for another vertical line (black vertical lines in ). In this case, in the image sensor , the exposure of each of the exposure lines starts at a different point in time as in the image sensor , but the exposure time of each imaging element included in each of the exposure lines is different. Through imaging by this image sensor , the receiver obtains a normal captured image and a visible light captured image . Furthermore, the receiver generates and displays a preview image based on this normal captured image and information associated with the visible light signal obtained from the visible light captured image ","This image sensor is capable of using all the exposure lines for visible light imaging unlike the image sensor . Consequently, the visible light captured image obtained by the image sensor includes a larger number of bright lines than in the visible light captured image , and therefore allows the visible light signal to be received with increased accuracy.","As illustrated in , an image sensor may be used instead of the image sensor . In the image sensor , the exposure time is set for each imaging element in such a way that the same exposure time is not set for imaging elements next to each other in the horizontal direction and the vertical direction. In other words, the exposure time is set for each imaging element in such a way that a plurality of imaging elements for which a long exposure time is set and a plurality of imaging elements for which a short exposure time is set are distributed in a grid or a checkered pattern. Also in this case, the exposure of each of the exposure lines starts at a different point in time as in the image sensor , but the exposure time of each imaging element included in each of the exposure lines is different. Through imaging by this image sensor , the receiver obtains a normal captured image and a visible light captured image . Furthermore, the receiver generates and displays a preview image based on this normal captured image and information associated with the visible light signal obtained from the visible light captured image ","The normal captured image obtained by the image sensor has data of the plurality of the imaging elements arranged in a grid or evenly arranged, and therefore interpolation and resizing thereof can be more accurate than those of the normal captured image and the normal captured image . The visible light captured image is generated by imaging that uses all the exposure lines of the image sensor . Thus, this image sensor is capable of using all the exposure lines for visible light imaging unlike the image sensor . Consequently, as with the visible light captured image , the visible light captured image obtained by the image sensor includes a larger number of bright lines than in the visible light captured image , and therefore allows the visible light signal to be received with increased accuracy.","Interlaced display of the preview image is described below.",{"@attributes":{"id":"p-1709","num":"1708"},"figref":"FIG. 265"},"The receiver including the above-described image sensor illustrated in  switches, at predetermined intervals, between an exposure time that is set in an odd-numbered exposure line (hereinafter referred to as an odd line) and an exposure line that is set in an even-numbered exposure line (hereinafter referred to as an even line). For example, as illustrated in , at time t, the receiver sets a long exposure time for each imaging element in the odd lines, and sets a short exposure time for each imaging element in the even lines, and an image is captured with these set exposure times. At time t, the receiver sets a short exposure time for each imaging element in the odd lines, and sets a long exposure time for each imaging element in the even lines, and an image is captured with these set exposure times. At time t, the receiver captures an image with the same exposure times set as those set at time t. At time t, the receiver captures an image with the same exposure times set as those set at time t.","The receiver obtains Image  which includes captured images obtained from the plurality of the odd lines (hereinafter referred to as odd-line images) and captured images obtained from the plurality of the even lines (hereinafter referred to as even-line images). At this time, the exposure time for each of the even lines is short, resulting in the subject failing to appear clear in each of the even-line images. Therefore, the receiver generates interpolated line images by interpolating even-line images with pixel values. The receiver then displays a preview image including the interpolated line images instead of the even-line images. Thus, the odd-line images and the interpolated line images are alternately arranged in the preview image.","At time t, the receiver obtains Image  which includes captured odd-line images and even-line images. At this time, the exposure time for each of the odd lines is short, resulting in the subject failing to appear clear in each of the odd-line images. Therefore, the receiver displays a preview image including the odd-line images of the Image  instead of the odd-line images of the Image . Thus, the odd-line images of the Image  and the even-line images of the Image  are alternately arranged in the preview image.","At time t, the receiver obtains Image  which includes captured odd-line images and even-line images. At this time, the exposure time for each of the even lines is short, resulting in the subject failing to appear clear in each of the even-line images, as in the case of time t. Therefore, the receiver displays a preview image including the even-line images of the Image  instead of the even-line images of the Image . Thus, the even-line images of the Image  and the odd-line images of the Image  are alternately arranged in the preview image. At time t, the receiver obtains Image  which includes captured odd-line images and even-line images. At this time, the exposure time for each of the odd lines is short, resulting in the subject failing to appear clear in each of the odd-line images, as in the case of time t. Therefore, the receiver displays a preview image including the odd-line images of the Image  instead of the odd-line images of the Image . Thus, the odd-line images of the Image  and the even-line images of the Image  are alternately arranged in the preview image.","In this way, the receiver displays the image including the even-line images and the odd-line images obtained at different times, that is, displays what is called an interlaced image.","The receiver is capable of displaying a high-definition preview image while performing visible light imaging. Note that the imaging elements for which the same exposure time is set may be imaging elements arranged along a direction horizontal to the exposure line as in the image sensor , or imaging elements arranged along a direction perpendicular to the exposure line as in the image sensor , or imaging elements arranged in a checkered pattern as in the image sensor . The receiver may store the preview image as captured image data.","Next, a spatial ratio between normal imaging and visible light imaging is described.",{"@attributes":{"id":"p-1717","num":"1716"},"figref":"FIG. 266"},"In an image sensor included in the receiver, a long exposure time or a short exposure time is set for each exposure line as in the above-described image sensor . In this image sensor , the ratio between the number of imaging elements for which the long exposure time is set and the number of imaging elements for which the short exposure time is set is one to one. This ratio is a ratio between normal imaging and visible light imaging and hereinafter referred to as a spatial ratio.","In this embodiment, however, this spatial ratio does not need to be one to one. For example, the receiver may include an image sensor . In this image sensor , the number of imaging elements for which a short exposure time is set is greater than the number of imaging elements for which a long exposure time is set, that is, the spatial ratio is one to N (N>1). Alternatively, the receiver may include an image sensor . In this image sensor , the number of imaging elements for which a short exposure time is set is less than the number of imaging elements for which a long exposure time is set, that is, the spatial ratio is N (N>1) to one. It may also be that the exposure time is set for each vertical line described above, and thus the receiver includes, instead of the image sensors to , any one of image sensors to having spatial ratios one to N, one to one, and N to one, respectively.","These image sensors and are capable of receiving the visible light signal with increased accuracy or speed because they include a large number of imaging elements for which the short exposure time is set. These image sensors and are capable of displaying a high-definition preview image because they include a large number of imaging elements for which the long exposure time is set.","Furthermore, using the image sensors , , , and , the receiver may display an interlaced image as illustrated in .","Next, a temporal ratio between normal imaging and visible light imaging is described.",{"@attributes":{"id":"p-1723","num":"1722"},"figref":"FIG. 267"},"The receiver may switch the imaging mode between a normal imaging mode and a visible light imaging mode for each frame as illustrated in (a) in . The normal imaging mode is an image mode in which a long exposure time for normal imaging is set for all the imaging elements of the image sensor in the receiver. The visible light imaging mode is an image mode in which a short exposure time for visible light imaging is set for all the imaging elements of the image sensor in the receiver. Such switching between the long and short exposure times makes it possible to display a preview image using an image captured with the long exposure time while receiving a visible light signal using an image captured with the short exposure time.","Note that in the case of determining a long exposure time by the automatic exposure, the receiver may ignore an image captured with a short exposure time so as to perform the automatic exposure based on only brightness of an image captured with a long exposure time. By doing so, it is possible to determine an appropriate long exposure time.","Alternatively, the receiver may switch the imaging mode between the normal imaging mode and the visible light imaging mode for each set of frames as illustrated in (b) in . If it takes time to switch the exposure time or if it takes time for the exposure time to stabilize, changing the exposure time for each set of frames as in (b) in  enables the visible light imaging (reception of a visible light signal) and the normal imaging at the same time. The number of times the exposure time is switched is reduced as the number of frames included in the set increases, and thus it is possible to reduce power consumption and heat generation in the receiver.","The ratio between the number of frames continuously generated by imaging in the normal imaging mode using a long exposure time and the number of frames continuously generated by imaging in the visible light imaging mode using a short exposure time (hereinafter referred to as a temporal ratio) does not need to be one to one. That is, although the temporal ratio is one to one in the case illustrated in (a) and (b) of , this temporal ratio does not need to be one to one.","For example, the receiver can make the number of frames in the visible light imaging mode greater than the number of frames in the normal imaging mode as illustrated in (c) in . By doing so, it is possible to receive the visible light signal with increased speed. When the frame rate of the preview image is greater than or equal to a predetermined rate, a difference in the preview image depending on the frame rate is not visible to human eyes. When the imaging frame rate is sufficiently high, for example, when this frame rate is 120 fps, the receiver sets the visible light imaging mode for three consecutive frames and sets the normal imaging mode for one following frame. By doing so, it is possible to receive the visible light signal with high speed while displaying the preview image at 30 fps which is a frame rate sufficiently higher than the above predetermined rate. Furthermore, the number of switching operations is small, and thus it is possible to obtain the effects described with reference to (b) in .","Alternatively, the receiver can make the number of frames in the normal imaging mode greater than the number of frames in the visible light imaging mode as illustrated in (d) in . When the number of frames in the normal imaging mode, that is, the number of frames captured with the long exposure time, is set large as just mentioned, a smooth preview image can be displayed. In this case, there is a power saving effect because of a reduced number of times the processing of receiving a visible light signal is performed. Furthermore, the number of switching operations is small, and thus it is possible to obtain the effects described with reference to (b) in .","It may also be possible that, as illustrated in (e) in , the receiver first switches the imaging mode for each frame as in the case illustrated in (a) in  and next, upon completing receiving the visible light signal, increases the number of frames in the normal imaging mode as in the case illustrated in (d) in . By doing so, it is possible to continue searching for a new visible light signal while displaying a smooth preview image after completion of the reception of the visible light signal. Furthermore, since the number of switching operations is small, it is possible to obtain the effects described with reference to (b) in .",{"@attributes":{"id":"p-1731","num":"1730"},"figref":"FIG. 268"},"The receiver starts visible light reception which is processing of receiving a visible light signal (Step S) and sets a preset long\/short exposure time ratio to a value specified by a user (Step S). The preset long\/short exposure time ratio is at least one of the above spatial ratio and temporal ratio. A user may specify only the spatial ratio, only the temporal ratio, or values of both the spatial ratio and the temporal ratio. Alternatively, the receiver may automatically set the preset long\/short exposure time ratio without depending on a ratio specified by a user.","Next, the receiver determines whether or not the reception performance is no more than a predetermined value (Step S). When determining that the reception performance is no more than the predetermined value (Y in Step S), the receiver sets the ratio of the short exposure time high (Step S). By doing so, it is possible to increase the reception performance. Note that the ratio of the short exposure time is, when the spatial ratio is used, a ratio of the number of imaging elements for which the short exposure time is set to the number of imaging elements for which the long exposure time is set, and is, when the temporal ratio is used, a ratio of the number of frames continuously generated in the visible light imaging mode to the number of frames continuously generated in the normal imaging mode.","Next, the receiver receives at least part of the visible light signal and determines whether or not at least part of the visible light signal received (hereinafter referred to as a received signal) has a priority assigned (Step S). The received signal that has a priority assigned contains an identifier indicating a priority. When determining that the received signal has a priority assigned (Step S: Y), the receiver sets the preset long\/short exposure time ratio according to the priority (Step S). Specifically, the receiver sets the ratio of the short exposure time high when the priority is high. For example, an emergency light as a transmitter transmits an identifier indicating a high priority by changing in luminance. In this case, the receiver can increase the ratio of the short exposure time to increase the reception speed and thereby promptly display an escape route and the like.","Next, the receiver determines whether or not the reception of all the visible light signals has been completed (Step S). When determining that the reception has not been completed (Step S: N), the receiver repeats the processes following Step S. In contrast, when determining that the reception has been completed (Step S: Y), the receiver sets the ratio of the long exposure time high and effects a transition to a power saving mode (Step S). Note that the ratio of the long exposure time is, when the spatial ratio is used, a ratio of the number of imaging elements for which the long exposure time is set to the number of imaging elements for which the short exposure time is set, and is, when the temporal ratio is used, a ratio of the number of frames continuously generated in the normal imaging mode to the number of frames continuously generated in the visible light imaging mode. This makes it possible to display a smooth preview image without performing unnecessary visible light reception.","Next, the receiver determines whether or not another visible light signal has been found (Step S). When another visible light signal has been found (Step S: Y), the receiver repeats the processes following Step S","Next, simultaneous operation of visible light imaging and normal imaging is described.",{"@attributes":{"id":"p-1738","num":"1737"},"figref":"FIG. 269"},"The receiver may set two or more exposure times in the image sensor. Specifically, as illustrated in (a) in , each of the exposure lines included in the image sensor is exposed continuously for the longest exposure time of the two or more set exposure times. For each exposure line, the receiver reads out captured image data obtained by exposure of the exposure line, at a point in time when each of the above-described two or more set exposure times ends. The receiver does not reset the read captured image data until the longest exposure time ends. Therefore, the receiver records cumulative values of the read captured image data, so that the receiver will be able to obtain captured image data corresponding to a plurality of exposure times by exposure of the longest exposure time only. Note that it is optional whether the image sensor records cumulative values of captured image data. When the image sensor does not record cumulative values of captured image data, a structural element of the receiver that reads out data from the image sensor performs cumulative calculation, that is, records cumulative values of captured image data.","For example, when two exposure times are set, the receiver reads out visible light imaging data generated by exposure for a short exposure time that includes a visible light signal, and subsequently reads out normal imaging data generated by exposure for a long exposure time as illustrated in (a) in .","By doing so, visible light imaging which is imaging for receiving a visible light signal and normal imaging can be performed at the same time, that is, it is possible to perform the normal imaging while receiving the visible light signal. Furthermore, the use of data across exposure times allows a signal of no less than the frequency indicated by the sampling theorem to be recognized, making it possible to receive a high frequency signal, a high-density modulated signal, or the like.","When outputting captured image data, the receiver outputs a data sequence that contains the captured image data as an imaging data body as illustrated in (b) in . Specifically, the receiver generates the above data sequence by adding additional information to the imaging data body and outputs the generated data sequence. The additional information contains: an imaging mode identifier indicating an imaging mode (the visible light imaging or the normal imaging); an imaging element identifier for identifying an imaging element or an exposure line included in the imaging element; an imaging data number indicating a place of the exposure time of the captured image data in the order of the exposure times; and an imaging data length indicating a size of the imaging data body. In the method of reading out captured image data described with reference to (a) in , the captured image data is not necessarily output in the order of the exposure lines. Therefore, the additional information illustrated in (b) in  is added so that which exposure line the captured image data is based on can be identified.",{"@attributes":{"id":"p-1743","num":"1742"},"figref":"FIG. 270A"},"This reception program is a program for causing a computer included in a receiver to execute the processing illustrated in , for example.","In other words, this reception program is a reception program for receiving information from a light emitter changing in luminance. In detail, this reception program causes a computer to execute Step SA, Step SA, and Step SA. In Step SA, a first exposure time is set for a plurality of imaging elements which are a part of K imaging elements (where K is an integer of 4 or more) included in an image sensor, and a second exposure time shorter than the first exposure time is set for a plurality of imaging elements which are a remainder of the K imaging elements. In Step SA, the image sensor captures a subject, i.e., a light emitter changing in luminance, with the set first exposure time and the set second exposure time, to obtain a normal image according to output from the plurality of the imaging elements for which the first exposure time is set, and obtain a bright line image according to output from the plurality of the imaging elements for which the second exposure time is set. The bright light image includes a plurality of bright lines each of which corresponds to a different one of a plurality of exposure lines included in the image sensor. In Step SA, a pattern of the plurality of the bright lines included in the obtained bright line image is decoded to obtain information.","With this, imaging is performed by the plurality of the imaging elements for which the first exposure time is set and the plurality of the imaging elements for which the second exposure time is set, with the result that a normal image and a bright line image can be obtained in a single imaging operation by the image sensor. That is, it is possible to capture a normal image and obtain information by visible light communication at the same time.","Furthermore, in the exposure time setting step SA, a first exposure time is set for a plurality of imaging element lines which are a part of L imaging element lines (where L is an integer of 4 or more) included in the image sensor, and the second exposure time is set for a plurality of imaging element lines which are a remainder of the L imaging element lines. Each of the L imaging element lines includes a plurality of imaging elements included in the image sensor and arranged in a line.","With this, it is possible to set an exposure time for each imaging element line, which is a large unit, without individually setting an exposure time for each imaging element, which is a small unit, so that the processing load can be reduced.","For example, each of the L imaging element lines is an exposure line included in the image sensor as illustrated in . Alternatively, each of the L imaging element lines includes a plurality of imaging elements included in the image sensor and arranged along a direction perpendicular to the plurality of the exposure lines as illustrated in .","It may be that in the exposure time setting step SA, one of the first exposure time and the second exposure time is set for each of odd-numbered imaging element lines of the L imaging element lines included in the image sensor, to set the same exposure time for each of the odd-numbered imaging element lines, and a remaining one of the first exposure time and the second exposure time is set for each of even-numbered imaging element lines of the L imaging element lines, to set the same exposure time for each of the even-numbered imaging element lines, as illustrated in . In the case where the exposure time setting step SA, the image obtainment step SA, and the information obtainment step SA are repeated, in the current round of the exposure time setting step S, an exposure time for each of the odd-numbered imaging element lines is set to an exposure time set for each of the even-numbered imaging element lines in an immediately previous round of the exposure time setting step S, and an exposure time for each of the even-numbered imaging element lines is set to an exposure time set for each of the odd-numbered imaging element lines in the immediately previous round of the exposure time setting step S.","With this, at every operation to obtain a normal image, the plurality of the imaging element lines that are to be used in the obtainment can be switched between the odd-numbered imaging element lines and the even-numbered imaging element lines. As a result, each of the sequentially obtained normal images can be displayed in an interlaced format. Furthermore, by interpolating two continuously obtained normal images with each other, it is possible to generate a new normal image that includes an image obtained by the odd-numbered imaging element lines and an image obtained by the even-numbered imaging element lines.","It may be that in the exposure time setting step SA, a preset mode is switched between a normal imaging priority mode and a visible light imaging priority mode, and when the preset mode is switched to the normal imaging priority mode, the total number of the imaging elements for which the first exposure time is set is greater than the total number of the imaging elements for which the second exposure time is set, and when the preset mode is switched to the visible light imaging priority mode, the total number of the imaging elements for which the first exposure time is set is less than the total number of the imaging elements for which the second exposure time is set, as illustrated in .","With this, when the preset mode is switched to the normal imaging priority mode, the quality of the normal image can be improved, and when the preset mode is switched to the visible light imaging priority mode, the reception efficiency for information from the light emitter can be improved.","It may be that in the exposure time setting step SA, an exposure time is set for each imaging element included in the image sensor, to distribute, in a checkered pattern, the plurality of the imaging elements for which the first exposure time is set and the plurality of the imaging elements for which the second exposure time is set, as illustrated in .","This results in uniform distribution of the plurality of the imaging elements for which the first exposure time is set and the plurality of the imaging elements for which the second exposure time is set, so that it is possible to obtain the normal image and the bright line image, the quality of which is not unbalanced between the horizontal direction and the vertical direction.",{"@attributes":{"id":"p-1756","num":"1755"},"figref":"FIG. 270B"},"This reception device A is the above-described receiver that performs the processing illustrated in , for example.","In detail, this reception device A is a reception device that receives information from a light emitter changing in luminance, and includes a plural exposure time setting unit A, an imaging unit A, and a decoding unit A. The plural exposure time setting unit A sets a first exposure time for a plurality of imaging elements which are a part of K imaging elements (where K is an integer of 4 or more) included in an image sensor, and sets a second exposure time shorter than the first exposure time for a plurality of imaging elements which are a remainder of the K imaging elements. The imaging unit A causes the image sensor to capture a subject, i.e., a light emitter changing in luminance, with the set first exposure time and the set second exposure time, to obtain a normal image according to output from the plurality of the imaging elements for which the first exposure time is set, and obtain a bright line image according to output from the plurality of the imaging elements for which the second exposure time is set. The bright line image includes a plurality of bright lines each of which corresponds to a different one of a plurality of exposure lines included in the image sensor. The decoding unit A obtains information by decoding a pattern of the plurality of the bright lines included in the obtained bright line image. This reception device A can produce the same advantageous effects as the above-described reception program.","Next, displaying of content related to a received visible light signal is described.",{"@attributes":{"id":"p-1760","num":"1759"},"figref":"FIGS. 271 and 272"},"The receiver captures an image of a transmitter and then displays an image including the image of the transmitter as illustrated in (a) in . Furthermore, the receiver generates an image by superimposing an object on the image and displays the image . The object is an image indicating a location of the transmitter and that a visible light signal is being received from the transmitter . The object may be an image that is different depending on the reception status for the visible light signal (such as a state in which a visible light signal is being received or the transmitter is being searched for, an extent of reception progress, a reception speed, or an error rate). For example, the receiver changes a color, a line thickness, a line type (single line, double line, dotted line, etc.), or a dotted-line interval of the object . This allows a user to recognize the reception status. Next, the receiver generates an image by superimposing on the image an obtained data image which represents content of obtained data, and displays the image . The obtained data is the received visible light signal or data associated with an ID indicated by the received visible light signal.","Upon displaying this obtained data image , the receiver displays the obtained data image in a speech balloon extending from the transmitter as illustrated in (a) in , or displays the obtained data image near the transmitter . Alternatively, the receiver may display the obtained data image in such a way that the obtained data image can be displayed gradually closer to the transmitter as illustrated in (b) of . This allows a user to recognize which transmitter transmitted the visible light signal on which the obtained data image is based. Alternatively, the receiver may display the obtained data image as illustrated in  in such a way that the obtained data image gradually comes in from an edge of a display of the receiver. This allows a user to easily recognize that the visible light signal was obtained at that time","Next, Augmented Reality (AR) is described.",{"@attributes":{"id":"p-1764","num":"1763"},"figref":"FIG. 273","b":"10020","i":"f. "},"When the image of the transmitter moves on the display, the receiver moves the obtained data image according to the movement of the image of the transmitter. This allows a user to recognize that the obtained data image is associated with the transmitter. The receiver may alternatively display the obtained data image in association with something different from the image of the transmitter. With this, data can be displayed in AR.","Next, storing and discarding the obtained data is described.",{"@attributes":{"id":"p-1767","num":"1766"},"figref":"FIG. 274"},"For example, when a user swipes the obtained data image down as illustrated in (a) in , the receiver stores obtained data represented by the obtained data image . The receiver positions the obtained data image representing the obtained data stored, at an end of arrangement of the obtained data image representing one or more pieces of other obtained data already stored. This allows a user to recognize that the obtained data represented by the obtained data image is the obtained data stored last. For example, the receiver positions the obtained data image in front of any other one of obtained data images as illustrated in (a) in .","When a user swipes the obtained data image to the right as illustrated in (b) in , the receiver discards obtained data represented by the obtained data image . Alternatively, it may be that when a user moves the receiver so that the image of the transmitter goes out of the frame of the display, the receiver discards obtained data represented by the obtained data image . Here, all the upward, downward, leftward, and rightward swipes produce the same or similar effect as that described above. The receiver may display a swipe direction for storing or discarding. This allows a user to recognize that data can be stored or discarded with such operation.","Next, browsing of obtained data is described.",{"@attributes":{"id":"p-1771","num":"1770"},"figref":"FIG. 275"},"In the receiver, obtained data images of a plurality of pieces of obtained data stored are displayed on top of each other, appearing small, in a bottom area of the display as illustrated in (a) in . When a user taps a part of the obtained data images displayed in this state, the receiver displays an expanded view of each of the obtained data images as illustrated in (b) in . Thus, it is possible to display an expanded view of each obtained data only when it is necessary to browse the obtained data, and efficiently use the display to display other content when it is not necessary to browse the obtained data.","When a user taps the obtained data image that is desired to be displayed in a state illustrated in (b) in , a further expanded view of the obtained data image tapped is displayed as illustrated in (c) in  so that a large amount of information is displayed out of the obtained data image. Furthermore, when a user taps a back-side display button , the receiver displays the back side of the obtained data image, displaying other data related to the obtained data.","Next, turning off of an image stabilization function upon self-position estimation is described.","By disabling (turning off) the image stabilization function or converting a captured image according to an image stabilization direction and an image stabilization amount, the receiver is capable of obtaining an accurate imaging direction and accurately performing self-position estimation. The captured image is an image captured by an imaging unit of the receiver. Self-position estimation means that the receiver estimates its position. Specifically, in the self-position estimation, the receiver identifies a position of a transmitter based on a received visible light signal and identifies a relative positional relationship between the receiver and the transmitter based on the size, position, shape, or the like of the transmitter appearing in a captured image. The receiver then estimates a position of the receiver based on the position of the transmitter and the relative positional relationship between the receiver and the transmitter.","The transmitter moves out of the frame due to even a little shake of the receiver at the time of partial read-out illustrated in, for example, , in which an image is captured only with the use of a part of the exposure lines, that is, when imaging illustrated in, for example, , is performed. In such a case, the receiver enables the image stabilization function and thereby can continue signal reception.","Next, self-position estimation using an asymmetrically shaped light emitting unit is described.",{"@attributes":{"id":"p-1778","num":"1777"},"figref":"FIG. 276"},"The above-described transmitter includes a light emitting unit and causes the light emitting unit to change in luminance to transmit a visible light signal. In the above-described self-position estimation, the receiver determines, as a relative positional relationship between the receiver and the transmitter, a relative angle between the receiver and the transmitter based on the shape of the transmitter (specifically, the light emitting unit) in a captured image. Here, in the case where the transmitter includes a light emitting unit having a rotationally symmetrical shape as illustrated in, for example, , the determination of a relative angle between the transmitter and the receiver based on the shape of the transmitter in a captured image as described above cannot be accurate. Thus, it is desirable that the transmitter include a light emitting unit having a non-rotationally symmetrical shape. This allows the receiver to accurately determine the above-described relative angle. This is because a bearing sensor for obtaining an angle has a wide margin of error in measurement; therefore, the use of the relative angle determined in the above-described method allows the receiver to perform accurate self-position estimation.","The transmitter may include a light emitting unit , the shape of which is not a perfect rotation symmetry as illustrated in . The shape of this light emitting unit is symmetrical at 90 degree rotation, but not perfect rotational symmetry. In this case, the receiver determines a rough angle using the bearing sensor and can further use the shape of the transmitter in a captured image to uniquely limit the relative angle between the receiver and the transmitter, and thus it is possible to perform accurate self-position estimation.","The transmitter may include a light emitting unit illustrated in . The shape of this light emitting unit is basically rotational symmetry. However, with a light guide plate or the like placed in a part of the light emitting unit , the light emitting unit is formed into a non-rotationally symmetrical shape.","The transmitter may include a light emitting unit illustrated in . This light emitting unit includes lightings each having a rotationally symmetrical shape. These lightings are arranged in combination to form the light emitting unit , and the whole shape thereof is not rotationally symmetrical. Therefore, the receiver is capable of performing accurate self-position estimation by capturing an image of the transmitter. It is not necessary that all the lightings included in the light emitting unit are each a lighting for visible light communication which changes in luminance for transmitting a visible light signal; it may be that only a part of the lightings is the lighting for visible light communication.","The transmitter may include a light emitting unit and an object illustrated in . The object is an object configured such that its positional relationship with the light emitting unit does not change (e.g. a fire alarm or a pipe). The shape of the combination of the light emitting unit and the object is not rotationally symmetrical. Therefore, the receiver is capable of performing self-position estimation with accuracy by capturing images of the light emitting unit and the object ","Next, time-series processing of the self-position estimation is described.","Every time the receiver captures an image, the receiver can perform the self-position estimation based on the position and the shape of the transmitter in the captured image. As a result, the receiver can estimate a direction and a distance in which the receiver moved while capturing images. Furthermore, the receiver can perform triangulation using frames or images to perform more accurate self-position estimation. By combining the results of estimation using images or the results of estimation using different combinations of images, the receiver is capable of performing the self-position estimation with higher accuracy. At this time, the results of estimation based on the most recently captured images are combined with a high priority, making it possible to perform the self-position estimation with higher accuracy.","Next, skipping read-out of optical black is described.",{"@attributes":{"id":"p-1787","num":"1786"},"figref":["FIG. 277","FIG. 277"]},"The receiver reads out a signal of horizontal optical black as illustrated in (a) in  at the time of normal imaging, but can skip reading out a signal of horizontal optical black as illustrated in (b) of . By doing so, it is possible to continuously receive visible light signals.","The horizontal optical black is optical black that extends in the horizontal direction with respect to the exposure line. Vertical optical black is part of the optical black that is other than the horizontal optical black.","The receiver adjusts the black level based on a signal read out from the optical black and therefore, at a start of visible light imaging, can adjust the black level using the optical black as does at the time of normal imaging. Continuous signal reception and black level adjustment are possible when the receiver is designed to adjust the black level using only the vertical optical black if the vertical optical black is usable. The receiver may adjust the black level using the horizontal optical black at predetermined time intervals during continuous visible light imaging. In the case of alternately performing the normal imaging and the visible light imaging, the receiver skips reading out a signal of horizontal optical black when continuously performing the visible light imaging, and reads out a signal of horizontal optical black at a time other than that. The receiver then adjusts the black level based on the read-out signals and thus can adjust the black level while continuously receiving visible light signals. The receiver may adjust the black level assuming that the darkest part of a visible light captured image is black.","Thus, it is possible to continuously receive visible light signals when the optical black from which signals are read out is the vertical optical black only. Furthermore, with a mode for skipping reading out a signal of the horizontal optical black, it is possible to adjust the black level at the time of normal imaging and perform continuous communication according to the need at the time of visible light imaging. Moreover, by skipping reading out a signal of the horizontal optical black, the difference in timing of starting exposure between the exposure lines increases, with the result that a visible light signal can be received even from a transmitter that appears small in the captured image.","Next, an identifier indicating a type of the transmitter is described.","The transmitter may transmit a visible light signal after adding to the visible light signal a transmitter identifier indicating the type of the transmitter. In this case, the receiver is capable of performing a reception operation according to the type of the transmitter at the point in time when the receiver receives the transmitter identifier. For example, when the transmitter identifier indicates a digital signage, the transmitter transmits, as a visible light signal, a content ID indicating which content is currently displayed, in addition to a transmitter ID for individual identification of the transmitter. Based on the transmitter identifier, the receiver can handle these IDs separately to display information associated with the content currently displayed by the transmitter. Furthermore, for example, when the transmitter identifier indicates a digital signage, an emergency light, or the like, the receiver captures an image with increased sensitivity so that reception errors can be reduced.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.","First, a header pattern in this embodiment is described.",{"@attributes":{"id":"p-1796","num":"1795"},"figref":"FIG. 278"},"The transmitter divides data to be transmitted into packets and transmits the packets. A packet is made up of a header and a body, for example. A luminance change pattern of the header, that is, a header pattern, needs to be a luminance change pattern that does not exist in the body. With this, it is possible to identify a position of a packet in data to be continuously transmitted.","For example, data to be transmitted is modulated using a 4 PPM scheme. Specifically, in this 4 PPM, data to be transmitted is modulated into a luminance change pattern having four slots, one of which indicates \u201c0\u201d and the other three of which indicate \u201c1.\u201d Therefore, when data to be continuously transmitted is modulated, the number of continuous slots indicating \u201c0\u201d is no more than two, and the number of slots indicating \u201c0\u201d in four slots and next four slots is no more than two.","In this embodiment, the header pattern is represented as \u201c111111111000\u201d indicated in (a) in , \u201c111111110001\u201d indicated in (b) in , \u201c111111101001\u201d indicated in (c) in , or \u201c111111100101\u201d indicated in (d) in . With this, the header and the data to be continuously transmitted (i.e. the body) can be identified. Specifically, in the header pattern indicated in (a) in , the last four slots \u201c1000\u201d of the header pattern can show that the four slots are a part of the header. In this case, the receiver can easily recognize a change in luminance because the number of slots indicating \u201c0\u201d in the header is three and the largest number of continuous slots indicating \u201c0\u201d is four. This means that the receiver can easily receive data from a small transmitter or a distant transmitter.","In the header pattern indicated in (b) in , the last five slots \u201c10001\u201d of the header pattern can show that the five slots are a part of the header. In this case, flicker due to a change in luminance can be reduced because the largest number of continuous slots indicating \u201c0\u201d is three, which is fewer than in the case of (a) in . As a result, the load on a circuit of the transmitter or the request for design therefore can be reduced. That is, it is possible to downsize the capacitor, reducing the power consumption, the calorific value, or the load on the power supply.","In the header pattern indicated in (c) or (d) in , the last six slots \u201c101001\u201d or \u201c100101\u201d of the header pattern can show that the six slots are a part of the header. In this case, flicker due to a change in luminance can be further reduced because the largest number of continuous slots indicating \u201c0\u201d is two, which is still fewer than in the case of (b) in .",{"@attributes":{"id":"p-1802","num":"1801"},"figref":"FIG. 279"},"The transmitter divides data to be transmitted into packets and transmits the packets. A packet is made up of a header, an address part, a data part, and an error correction code part. When the header has a luminance change pattern that does not exist in the other part, it is possible to identify a position of a packet in continuous data. Part of the divided data is stored into the data part. An address indicating which part of the whole the data in the data part is present is stored into the address part. A code for detecting or correcting a reception error of part of a packet or the whole packet (which is specifically ECC, ECC, or ECC illustrated in  and are collectively referred to as an error correction code) is stored into the error correction code part.","The ECC is an error correction code of the address part. When the error correction code of the address part is provided rather than the error correction code of the whole packet, the reliability of the address part can be higher than the reliability of the whole packet. With this, when a plurality of packets have been received, data parts of packets that have the same address are compared so that the data parts can be verified, allowing for a reduction in the reception error rate. The same or similar advantageous effects can be produced when the error correction code of the address part is longer than the error correction code of the data part.","Each of the ECC and the ECC is an error correction code of the data part. The number of error correction code parts may be other than two. When the data part has a plurality of error correction codes, it is possible to perform error correction using only the error correction code for a part successfully received so far, and thus it is possible to receive highly reliable data even when the packet has not been fully received.","The transmitter may be configured to transmit a predetermined number of error correction codes or less. This allows the receiver to receive data with high speed. This transmission method is effective for a transmitter having a light emitting unit which is small in size and high in luminance, such as a downlighting. This is because when the luminance is high, the error probability is low, meaning that there is no need for many error correction codes. In the case of a failure to transmit the ECC, the header in next transmission starts with the ECC, resulting in a high luminance state continuing over four or more slots, and thus the receiver can recognize that this part is not ECC .","Note that the header, the address part, and the ECC are transmitted with a frequency lower than the data part, the ECC, and the ECC as illustrated in (b) in . Conversely, the data part, the ECC, and the ECC are transmitted with a frequency higher than the header, the address part, and the ECC. With this, it is possible to reduce the reception error rate of data such as the header, and it is also possible to transmit a large amount of data in the data part with high speed.","Thus, in this embodiment, the packet includes the first error correction codes (ECC and ECC) for the data part, and the second error correction code (ECC) for the address part. When receiving such packet, the receiver receives the address part and the second error correction code transmitted from the transmitter by changing in luminance according to the second frequency. Furthermore, the receiver receives the data part and the first error correction code transmitted from the transmitter by changing in luminance according to the first frequency higher than the second frequency.","A reception method in which data parts having the same addresses are compared is described below.",{"@attributes":{"id":"p-1810","num":"1809"},"figref":"FIG. 280"},"The receiver receives a packet (Step S) and performs error correction (Step S). The receiver then determines whether or not a packet having the same address as the address of the received packet has already been received (Step S). When determining that a packet having the same address has been received (Step S: Y), the receiver compares data in these packets. The receiver determines whether or not the data parts are identical (Step S). When determining that the data parts are not identical (Step S: N), the receiver further determines whether or not the number of differences between the data parts is a predetermined number or more, specifically, whether or not the number of different bits or the number of slots indicating different luminance states is a predetermined number or more (Step S). When determining that the number of differences is the predetermined number or more (Step S: N), the receiver discards the already received packet (Step S). By doing so, when a packet from another transmitter starts being received, interference with the packet received from a previous transmitter can be avoided. In contrast, when determining that the number of differences is not the predetermined number or more (Step S: N), the receiver regards, as data of the address, data of the data part of packets having an identical data part, the number of which is largest (Step S). Alternatively, the receiver regards identical bits, the number of which is largest, as a value of a bit of the address. Still alternatively, the receiver demodulates data of the address, regarding an identical luminance state, the number of which is largest, as a luminance state of a slot of the address.","Thus, in this embodiment, the receiver first obtains a first packet including the data part and the address part from a pattern of a plurality of bright lines. Next, the receiver determines whether or not at least one packet already obtained before the first packet includes at least one second packet which is a packet including the same address part as the address part of the first packet. Next, when the receiver determines that at least one such second packet is included, the receiver determines whether or not all the data parts in at least one such second packet and the first packet are the same. When the receiver determines that all the data parts are not the same, the receiver determines, for each of at least one such second packet, whether or not the number of parts, among parts included in the data part of the second packet, which are different from parts included in the data part of the first packet, is a predetermined number or more. Here, when at least one such second packet includes the second packet in which the number of different parts is determined as the predetermined number or more, the receiver discards at least one such second packet. When at least one such second packet does not include the second packet in which the number of different parts is determined as the predetermined number or more, the receiver identifies, among the first packet and at least one such second packet, a plurality of packets in which the number of packets having the same data parts is highest. The receiver then obtains at least a part of the visible light identifier (ID) by decoding the data part included in each of the plurality of packets as the data part corresponding to the address part included in the first packet.","With this, even when a plurality of packets having the same address part are received and the data parts in the packets are different, an appropriate data part can be decoded, and thus at least a part of the visible light identifier can be properly obtained. This means that a plurality of packets transmitted from the same transmitter and having the same address part basically have the same data part. However, there are cases where the receiver receives a plurality of packets which have mutually different data parts even with the same address part, when the receiver switches the transmitter serving as a transmission source of packets from one to another. In such a case, in this embodiment, the already received packet (the second packet) is discarded as in step S in , allowing the data part of the latest packet (the first packet) to be decoded as a proper data part corresponding to the address part therein. Furthermore, even when no such switch of transmitters as mentioned above occurs, there are cases where the data parts in the plurality of packets having the same address part are slightly different, depending on the visible light signal transmitting and receiving status. In such cases, in this embodiment, what is called a decision by the majority as in Step S in  makes it possible to decode a proper data part.","A reception method of demodulating data of the data part based on a plurality of packets is described.",{"@attributes":{"id":"p-1815","num":"1814"},"figref":"FIG. 281"},"First, the receiver receives a packet (Step S) and performs error correction on the address part (Step S). Here, the receiver does not demodulate the data part and retains pixel values in the captured image as they are. The receiver then determines whether or not no less than a predetermined number of packets out of the already received packets have the same address (Step S). When determining that no less than the predetermined number of packets have the same address (Step S: Y), the receiver performs a demodulation process on a combination of pixel values corresponding to the data parts in the packets having the same address (Step S).","Thus, in the reception method in this embodiment, a first packet including the data part and the address part is obtained from a pattern of a plurality of bright lines. It is then determined whether or not at least one packet already obtained before the first packet includes no less than a predetermined number of second packets which are each a packet including the same address part as the address part of the first packet. When it is determined that no less than the predetermined number of second packets is included, pixel values of a partial region of a bright line image corresponding to the data parts in no less than the predetermined number of second packets and pixel values of a partial region of a bright line image corresponding to the data part of the first packet are combined. That is, the pixel values are added. A combined pixel value is calculated through this addition, and at least a part of a visible light identifier (ID) is obtained by decoding the data part including the combined pixel value.","Since the packets have been received at different points in time, each of the pixel values for the data parts reflects luminance of the transmitter that is at a slightly different point in time. Therefore, the part subject to the above-described demodulation process will contain a larger amount of data (a larger number of samples) than the data part of a single packet. This makes it possible to demodulate the data part with higher accuracy. Furthermore, the increase in the number of samples makes it possible to demodulate a signal modulated with a higher modulation frequency.","As illustrated in (b) in , the data part and the error correction code part for the data part are modulated with a higher frequency than the header unit, the address part, and the error correction code part for the address part. In the above-described demodulation method, data following the data part can be demodulated even when the data has been modulated with a high modulation frequency. With this configuration, it is possible to shorten the time for the whole packet to be transmitted, and it is possible to receive a visible light signal with higher speed from far away and from a smaller light source.","Next, a reception method of receiving data of a variable length address is described.",{"@attributes":{"id":"p-1821","num":"1820"},"figref":"FIG. 282"},"The receiver receives packets (Step S), and determines whether or not a packet including the data part in which all the bits are zero (hereinafter referred to as a 0-end packet) has been received (Step S). When determining that the packet has been received, that is, when determining that a 0-end packet is present (Step S: Y), the receiver determines whether or not all the packets having addresses following the address of the 0-end packet are present, that is, have been received (Step S). Note that the address of a packet to be transmitted later among packets generated by dividing data to be transmitted is assigned a larger value. When determining that all the packets have been received (Step S: Y), the receiver determines that the address of the 0-end packet is the last address of the packets to be transmitted from the transmitter. The receiver then reconstructs data by combining data of all the packets having the addresses up to the 0-end packet (Step S). In addition, the receiver checks the reconstructed data for an error (Step S). By doing so, even when it is not known how many parts the data to be transmitted has been divided into, that is, when the address has a variable length rather than a fixed length, data having a variable-length address can be transmitted and received, meaning that it is possible to efficiently transmit and receive more IDs than with data having a fixed-length address.","Thus, in this embodiment, the receiver obtains a plurality of packets each including the data part and the address part from a pattern of a plurality of bright lines. The receiver then determines whether or not the obtained packets include a 0-end packet which is a packet including the data part in which all the bits are 0. When determining that the 0-end packet is included, the receiver determines whether or not the packets include all N associated packets (where N is an integer of 1 or more) which are each a packet including the address part associated with the address part of the 0-end packet. Next, when determining that all the N associated packets are included, the receiver obtains a visible light identifier (ID) by arranging and decoding the data parts in the N associated packets. Here, the address part associated with the address part of the 0-end packet is an address part representing an address greater than or equal to 0 and smaller than the address represented by the address part of the 0-end packet.","Next, a reception method using an exposure time longer than a period of a modulation frequency is described.",{"@attributes":{"id":"p-1825","num":"1824"},"figref":"FIGS. 283 and 284"},"For example, as illustrated in (a) in , there is a case where the visible light signal cannot be properly received when the exposure time is set to time equal to a modulation period. Note that the modulation period is a length of time for one slot described above. Specifically, in such a case, the number of exposure lines that reflect a luminance state in a particular slot (black exposure lines in ) is small. As a result, when there happens to be much noise in pixel values of these exposure lines, it is difficult to estimate luminance of the transmitter.","In contrast, the visible light signal can be properly received when the exposure time is set to time longer than the modulation period as illustrated in (b) in , for example. Specifically, in such a case, the number of exposure lines that reflect luminance in a particular slot is large, and therefore it is possible to estimate luminance of the transmitter based on pixel values of a large number of exposure lines, resulting in high resistance to noise.","However, when the exposure time is too long, the visible light signal cannot be properly received.","For example, as illustrated in (a) in , when the exposure time is equal to the modulation period, a luminance change (that is, a change in pixel value of each exposure line) received by the receiver follows a luminance change used in the transmission. However, as illustrated in (b) in , when the exposure time is three times as long as the modulation period, a luminance change received by the receiver cannot fully follow a luminance change used in the transmission. Furthermore, as illustrated in (c) in , when the exposure time is 10 times as long as the modulation period, a luminance change received by the receiver cannot at all follow a luminance change used in the transmission. To sum up, when the exposure time is longer, luminance can be estimated based on a larger number of exposure lines and therefore noise resistance increases, but a longer exposure time causes a reduction in identification margin or a reduction in the noise resistance due to the reduced identification margin. Considering the balance between these effects, the exposure time is set to time that is approximately two to five times as long as the modulation period, so that the highest noise resistance can be obtained.","Next, the number of packets after division is described.",{"@attributes":{"id":"p-1831","num":"1830"},"figref":"FIG. 285"},"When the transmitter transmits data by changing in luminance, the data size of one packet will be large if all pieces of data to be transmitted (transmission data) are included in the packet. However, as described with reference to , when the transmission data is divided into data parts and each of these data parts is included in a packet, the data size of the packet is small. The receiver receives this packet by imaging. As the data size of the packet increases, the receiver has more difficulty in receiving the packet in a single imaging operation, and needs to repeat the imaging operation.","Therefore, it is desirable that as the data size of the transmission data increases, the transmitter increase the number of divisions in the transmission data as illustrated in (a) and (b) in . However, when the number of divisions is too large, the transmission data cannot be reconstructed unless all the data parts are received, resulting in lower reception efficiency.","Therefore, as illustrated in (a) in , when the data size of the address (address size) is variable and the data size of the transmission data is 2 to 16 bits, 16 to 24 bits, 24 to 64 bits, 66 to 78 bits, 78 bits to 128 bits, and 128 bits or more, the transmission data is divided into 1 to 2, 2 to 4, 4, 4 to 6, 6 to 8, and 7 or more data parts, respectively, so that the transmission data can be efficiently transmitted in the form of visible light signals. As illustrated in (b) in , when the data size of the address (address size) is fixed to 4 bits and the data size of the transmission data is 2 to 8 bits, 8 to 16 bits, 16 to 30 bits, 30 to 64 bits, 66 to 80 bits, 80 to 96 bits, 96 to 132 bits, and 132 bits or more, the transmission data is divided into 1 to 2, 2 to 3, 2 to 4, 4 to 5, 4 to 7, 6, 6 to 8, and 7 or more data parts, respectively, so that the transmission data can be efficiently transmitted in the form of visible light signals.","The transmitter sequentially changes in luminance based on packets containing respective ones of the data parts. For example, according to the sequence of the addresses of packets, the transmitter changes in luminance based on the packets. Furthermore, the transmitter may change in luminance again based on data parts of the packets according to a sequence different from the sequence of the addresses. This allows the receiver to reliably receive each of the data parts.","Next, a method of setting a notification operation by the receiver is described.",{"@attributes":{"id":"p-1837","num":"1836"},"figref":"FIG. 286A"},"First, the receiver obtains, from a server near the receiver, a notification operation identifier for identifying a notification operation and a priority of the notification operation identifier (specifically, an identifier indicating the priority) (Step S). The notification operation is an operation of the receiver to notify a user using the receiver that packets containing data parts have been received, when the packets have been transmitted by way of luminance change and then received by the receiver. For example, this operation is making sound, vibration, indication on a display, or the like.","Next, the receiver receives packetized visible light signals, that is, packets containing respective data parts (Step S). The receiver obtains a notification operation identifier and a priority of the notification operation identifier (specifically, an identifier indicating the priority) which are included in the visible light signals (Step S).","Furthermore, the receiver reads out setting details of a current notification operation of the receiver, that is, a notification operation identifier preset in the receiver and a priority of the notification operation identifier (specifically, an identifier indicating the priority) (Step S). Note that the notification operation identifier preset in the receiver is one set by an operation by a user, for example.","The receiver then selects an identifier having the highest priority from among the preset notification operation identifier and the notification operation identifiers respectively obtained in Step S and Step S (Step S). Next, the receiver sets the selected notification operation identifier in the receiver itself to operate as indicated by the selected notification operation identifier, notifying a user of the reception of the visible light signals (Step S).","Note that the receiver may skip one of Step S and Step S and select a notification operation identifier with a higher priority from among two notification operation identifiers.","Note that a high priority may be assigned to a notification operation identifier transmitted from a server installed in a theater, a museum, or the like, or a notification operation identifier included in the visible light signal transmitted inside these facilities. With this, it can be made possible that sound for receipt notification is not played inside the facilities regardless of settings set by a user. In other facilities, a low priority is assigned to the notification operation identifier so that the receiver can operate according to settings set by a user to notify a user of signal reception.",{"@attributes":{"id":"p-1844","num":"1843"},"figref":"FIG. 286B"},"First, the receiver obtains, from a server near the receiver, a notification operation identifier for identifying a notification operation and a priority of the notification operation identifier (specifically, an identifier indicating the priority) (Step S). Next, the receiver receives packetized visible light signals, that is, packets containing respective data parts (Step S). The receiver obtains a notification operation identifier and a priority of the notification operation identifier (specifically, an identifier indicating the priority) which are included in the visible light signals (Step S).","Furthermore, the receiver reads out setting details of a current notification operation of the receiver, that is, a notification operation identifier preset in the receiver and a priority of the notification operation identifier (specifically, an identifier indicating the priority) (Step S).","The receiver then determines whether or not an operation notification identifier indicating an operation that prohibits notification sound reproduction is included in the preset notification operation identifier and the notification operation identifiers respectively obtained in Step S and Step S (Step S). When determining that the operation notification identifier is included (Step S: Y), the receiver outputs a notification sound for notifying a user of completion of the reception (Step ). In contrast, when determining that the operation notification identifier is not included (Step S: N), the receiver notifies a user of completion of the reception by vibration, for example (Step S).","Note that the receiver may skip one of Step S and Step S and determine whether or not an operation notifying identifier indicating an operation that prohibits notification sound reproduction is included in two notification operation identifiers.","Furthermore, the receiver may perform self-position estimation based on a captured image and notify a user of the reception by an operation associated with the estimated position or facilities located at the estimated position.",{"@attributes":{"id":"p-1850","num":"1849"},"figref":"FIG. 287A"},"This information processing program is a program for causing the light emitter of the above-described transmitter to change in luminance according to the number of divisions illustrated in .","In other words, this information processing program is an information processing program that causes a computer to process information to be transmitted, in order for the information to be transmitted by way of luminance change. In detail, this information processing program causes a computer to execute: an encoding step SA of encoding the information to generate an encoded signal; a dividing step SA of dividing the encoded signal into four signal parts when a total number of bits in the encoded signal is in a range of 24 bits to 64 bits; and an output step S of sequentially outputting the four signal parts. Note that each of these signal parts is output in the form of the packet illustrated in (a) in . Furthermore, this information processing program may cause a computer to identify the number of bits in the encoded signal and determine the number of signal parts based on the identified number of bits. In this case, the information processing program causes the computer to divide the encoded signal into the determined number of signal parts.","Thus, when the number of bits in the encoded signal is in the range of 24 bits to 64 bits, the encoded signal is divided into four signal parts, and the four signal parts are output. As a result, the light emitter changes in luminance according to the outputted four signal parts, and these four signal parts are transmitted in the form of visible light signals and received by the receiver. As the number of bits in an output signal increases, the level of difficulty for the receiver to properly receive the signal by imaging increases, meaning that the reception efficiency is reduced. Therefore, it is desirable that the signal have a small number of bits, that is, a signal be divided into small signals. However, when a signal is too finely divided into many small signals, the receiver cannot receive the original signal unless it receives all the small signals individually, meaning that the reception efficiency is reduced. Therefore, when the number of bits in the encoded signal is in the range of 24 bits to 64 bits, the encoded signal is divided into four signal parts and the four signal parts are sequentially output as described above. By doing so, the encoded signal representing the information to be transmitted can be transmitted in the form of a visible light signal with the best reception efficiency. As a result, it is possible to enable communication between various devices.","In the output step SA, it may be that the four signal parts are output in a first sequence and then, the four signal parts are output in a second sequence different from the first sequence.","By doing so, since these four signals parts are repeatedly output in different sequences, these four signal parts can be received with still higher efficiency when each of the output signals is transmitted to the receiver in the form of a visible light signal. In other words, if the four signal parts are repeatedly output in the same sequence, there are cases where the receiver fails to receive the same signal part, but it is possible to reduce these cases by changing the output sequence.","Furthermore, the four signal parts may be each assigned with a notification operation identifier and output in the output step SA as indicated in . The notification operation identifier is an identifier for identifying an operation of the receiver by which a user using the receiver is notified that the four signal parts have been received when the four signal parts have been transmitted by way of luminance change and received by the receiver.","With this, in the case where the notification operation identifier is transmitted in the form of a visible light signal and received by the receiver, the receiver can notify a user of the reception of the four signal parts according to an operation identified by the notification operation identifier. This means that a transmitter that transmits information to be transmitted can set a notification operation to be performed by a receiver.","Furthermore, the four signal parts may be each assigned with a priority identifier for identifying a priority of the notification operation identifier and output in the output step SA as indicated in .","With this, in the case where the priority identifier and the notification operation identifier are transmitted in the form of visible light signals and received by the receiver, the receiver can handle the notification operation identifier according to the priority identified by the priority identifier. This means that when the receiver obtained another notification operation identifier, the receiver can select, based on the priority, one of the notification operation identified by the notification operation identifier transmitted in the form of the visible light signal and the notification operation identified by the other notification operation identifier.",{"@attributes":{"id":"p-1860","num":"1859"},"figref":"FIG. 287B"},"This information processing apparatus A is an apparatus for causing the light emitter (the light emitting unit) of the above-described transmitter to change in luminance according to the number of divisions illustrated in .","In other words, this information processing apparatus A is an apparatus that processes information to be transmitted, in order for the information to be transmitted by way of luminance change. In detail, this information processing apparatus A includes: an encoding unit A that encodes the information to generate an encoded signal; a dividing unit that divides the encoded signal into four signal parts when a total number of bits in the encoded signal is in a range of 24 bits to 64 bits; and an output unit A that sequentially outputs the four signal parts. The information processing apparatus A can produce the same advantageous effects as the above-described information processing program.","An image processing program according to an aspect of the present disclosure is an image processing program that causes a computer to process information to be transmitted, in order for the information to be transmitted by way of luminance change, and causes the computer to execute: an encoding step of encoding the information to generate an encoded signal; a dividing step of dividing the encoded signal into four signal parts when a total number of bits in the encoded signal is in a range of 24 bits to 64 bits; and an output step of sequentially outputting the four signal parts.","Thus, as illustrated in  to , when the number of bits in the encoded signal is in the range of 24 bits to 64 bits, the encoded signal is divided into four signal parts, and the four signal parts are output. As a result, the light emitter changes in luminance according to the outputted four signal parts, and these four signal parts are transmitted in the form of visible light signals and received by the receiver. As the number of bits in an output signal increases, the level of difficulty for the receiver to properly receive the signal by imaging increases, meaning that the reception efficiency is reduced. Therefore, it is desirable that the signal have a small number of bits, that is, a signal be divided into small signals. However, when a signal is too finely divided into many small signals, the receiver cannot receive the original signal unless it receives all the small signals individually, meaning that the reception efficiency is reduced. Therefore, when the number of bits in the encoded signal is in the range of 24 bits to 64 bits, the encoded signal is divided into four signal parts and the four signal parts are sequentially output as described above. By doing so, the encoded signal representing the information to be transmitted can be transmitted in the form of a visible light signal with the best reception efficiency. As a result, it is possible to enable communication between various devices.","Furthermore, in the output step, the four signal parts may be output in a first sequence and then, the four signal parts may be output in a second sequence different from the first sequence.","By doing so, since these four signals parts are repeatedly output in different sequences, these four signal parts can be received with still higher efficiency when each of the output signals is transmitted to the receiver in the form of a visible light signal. In other words, if the four signal parts are repeatedly output in the same sequence, there are cases where the receiver fails to receive the same signal part, but it is possible to reduce these cases by changing the output sequence.","Furthermore, in the output step, the four signal parts may further be each assigned with a notification operation identifier and output, and the notification operation identifier may be an identifier for identifying an operation of the receiver by which a user using the receiver is notified that the four signal parts have been received when the four signal parts have been transmitted by way of luminance change and received by the receiver.","With this, in the case where the notification operation identifier is transmitted in the form of a visible light signal and received by the receiver, the receiver can notify a user of the reception of the four signal parts according to an operation identified by the notification operation identifier. This means that a transmitter that transmits information to be transmitted can set a notification operation to be performed by a receiver.","Furthermore, in the output step, the four signal parts may further be each assigned with a priority identifier for identifying a priority of the notification operation identifier and output.","With this, in the case where the priority identifier and the notification operation identifier are transmitted in the form of visible light signals and received by the receiver, the receiver can handle the notification operation identifier according to the priority identified by the priority identifier. This means that when the receiver obtained another notification operation identifier, the receiver can select, based on the priority, one of the notification operation identified by the notification operation identifier transmitted in the form of the visible light signal and the notification operation identified by the other notification operation identifier.","Next, registration of a network connection of an electronic device is described.",{"@attributes":{"id":"p-1872","num":"1871"},"figref":"FIG. 288"},"This transmission and reception system includes: a transmitter configured as an electronic device such as a washing machine, for example; a receiver configured as a smartphone, for example, and a communication device configured as an access point or a router.",{"@attributes":{"id":"p-1874","num":"1873"},"figref":"FIG. 289"},"When a start button is pressed (Step S), the transmitter transmits, via Wi-Fi, Bluetooth\u00ae, Ethernet\u00ae, or the like, information for connecting to the transmitter itself, such as SSID, password, IP address, MAC address, or decryption key (Step S), and then waits for connection. The transmitter may directly transmit these pieces of information, or may indirectly transmit these pieces of information. In the case of indirectly transmitting these pieces of information, the transmitter transmits ID associated with these pieces of information. When the receiver receives the ID, the receiver then downloads, from a server or the like, information associated with the ID, for example.","The receiver receives the information (Step S), connects to the transmitter , and transmits to the transmitter information for connecting to the communication device configured as an access point or a router (such as SSID, password, IP address, MAC address, or decryption key) (Step S). The receiver registers, with the communication device , information for the transmitter to connect to the communication device (such as MAC address, IP address, or decryption key), to have the communication device wait for connection. Furthermore, the receiver notifies the transmitter that preparation for connection from the transmitter to the communication device has been completed (Step S).","The transmitter disconnects from the receiver (Step S) and connects to the communication device (Step S). When the connection is successful (Step S: Y), the transmitter notifies the receiver that the connection is successful, via the communication device , and notifies a user that the connection is successful, by an indication on the display, an LED state, sound, or the like (Step S). When the connection fails (Step S: N), the transmitter notifies the receiver that the connection fails, via the visible light communication, and notifies a user that the connection fails, using the same means as in the case where the connection is successful (Step S). Note that the visible light communication may be used to notify that the connection is successful.","The receiver connects to the communication device (Step S), and when the notifications to the effect that the connection is successful and that the connection fails (Step S: N and Step S: N) are absent, the receiver checks whether or not the transmitter is accessible via the communication device (Step S). When the transmitter is not accessible (Step S: N), the receiver determines whether or not no less than a predetermined number of attempts to connect to the transmitter using the information received from the transmitter have been made (Step S). When determining that the number of attempts is less than the predetermined number (Step S: N), the receiver repeats the processes following Step S. In contrast, when the number of attempts is no less than the predetermined number (Step S: Y), the receiver notifies a user that the processing fails (Step S). When determining in Step S that the notification to the effect that the connection is successful is present (Step S: Y), the receiver notifies a user that the processing is successful (Step S). Specifically, using an indication on the display, sound, or the like, the receiver notifies a user whether or not the connection from the transmitter to the communication device has been successful. By doing so, it is possible to connect the transmitter to the communication device without requiring for cumbersome input from a user.","Next, registration of a network connection of an electronic device (in the case of connection via another electronic device) is described.",{"@attributes":{"id":"p-1880","num":"1879"},"figref":"FIG. 290"},"This transmission and reception system includes: an air conditioner ; a transmitter configured as an electronic device such as a wireless adaptor or the like connected to the air conditioner ; a receiver configured as a smartphone, for example; a communication device configured as an access point or a router; and another electronic device configured as a wireless adaptor, a wireless access point, a router, or the like, for example.",{"@attributes":{"id":"p-1882","num":"1881"},"figref":"FIG. 291","b":["10133","10133","10133"],"i":["b ","c ","e "]},"First, when a start button is pressed (Step S), the electronic device A transmits information for connecting to the electronic device A itself (such as individual ID, password, IP address, MAC address, or decryption key) (Step S), and then waits for connection (Step S). The electronic device A may directly transmit these pieces of information, or may indirectly transmit these pieces of information, in the same manner as described above.","The receiver receives the information from the electronic device A (Step S) and transmits the information to the electronic device B (Step S). When the electronic device B receives the information (Step S), the electronic device B connects to the electronic device A according to the received information (Step S). The electronic device B determines whether or not connection to the electronic device A has been established (Step S), and notifies the receiver of the result (Step  or Step S).","When the connection to the electronic device B is established within a predetermine time (Step S: Y), the electronic device A notifies the receiver that the connection is successful, via the electronic device B (Step S), and when the connection fails (Step S: N), the electronic device A notifies the receiver that the connection fails, via the visible light communication (Step S). Furthermore, using an indication on the display, a light emitting state, sound, or the like, the electronic device A notifies a user whether or not the connection is successful. By doing so, it is possible to connect the electronic device A (the transmitter ) to the electronic device B (the electronic device ) without requiring for cumbersome input from a user. Note that the air conditioner and the transmitter illustrated in  may be integrated together and likewise, the communication device and the electronic device illustrated in  may be integrated together.","Next, transmission of proper imaging information is described.",{"@attributes":{"id":"p-1887","num":"1886"},"figref":"FIG. 292"},"This transmission and reception system includes: a receiver configured as a digital still camera or a digital video camera, for example; and a transmitter configured as a lighting, for example.",{"@attributes":{"id":"p-1889","num":"1888"},"figref":"FIG. 293"},"First, the receiver transmits an imaging information transmission instruction to the transmitter (Step S). Next, when the transmitter receives the imaging information transmission instruction, when an imaging information transmission button is pressed, when an imaging information transmission switch is ON, or when a power source is turned ON (Step S: Y), the transmitter transmits imaging information (Step S). The imaging information transmission instruction is an instruction to transmit imaging information. The imaging information indicates a color temperature, a spectrum distribution, illuminance, or luminous intensity distribution of a lighting, for example. The transmitter may directly transmit the imaging information, or may indirectly transmit the imaging information. In the case of indirectly transmitting the imaging information, the transmitter transmits ID associated with the imaging information. When the receiver receives the ID, the receiver then downloads, from a server or the like, the imaging information associated with the ID, for example. At this time, the transmitter may transmit a method for transmitting a transmission stop instruction to the transmitter itself (e.g. a frequency of radio waves, infrared rays, or sound waves for transmitting a transmission stop instruction, or SSID, password, or IP address for connecting to the transmitter itself).","When the receiver receives the imaging information (Step S), the receiver transmits the transmission stop instruction to the transmitter (Step S). When the transmitter receives the transmission stop instruction from the receiver (Step S), the transmitter stops transmitting the imaging information and uniformly emits light (Step S).","Furthermore, the receiver sets an imaging parameter according to the imaging information received in Step S (Step S) or notifies a user of the imaging information. The imaging parameter is, for example, white balance, an exposure time, a focal length, sensitivity, or a scene mode. With this, it is possible to capture an image with optimum settings according to a lighting. Next, after the transmitter stops transmitting the imaging information (Step S: Y), the receiver captures an image (Step S). Thus, it is possible to capture an image while a subject does not change in brightness for signal transmission. Note that after Step S, the receiver may transmit to the transmitter a transmission start instruction to request to start transmission of the imaging information (Step S).","Next, an indication of a state of charge is described.",{"@attributes":{"id":"p-1894","num":"1893"},"figref":"FIG. 294"},"For example, a transmitter configured as a charger includes a light emitting unit, and transmits from the light emitting unit a visible light signal indicating a state of charge of a battery. With this, a costly display device is not needed to allow a user to be notified of a state of charge of the battery. When a small LED is used as the light emitting unit, the visible light signal cannot be received unless an image of the LED is captured from a nearby position. In the case of a transmitter which has a protrusion near the LED, the protrusion becomes an obstacle for closeup of the LED. Therefore, it is easier to receive a visible light signal from the transmitter having no protrusion near the LED than a visible light signal from the transmitter ","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL in each of the embodiments described above.","First, transmission in a demo mode and upon malfunction is described.",{"@attributes":{"id":"p-1898","num":"1897"},"figref":"FIG. 295"},"When an error occurs, the transmitter transmits a signal indicating that an error has occurred or a signal corresponding to an error code so that the receiver can be notified that an error has occurred or of details of an error. The receiver takes an appropriate measure according to details of an error so that the error can be corrected or the details of the error can be properly reported to a service center.","In the demo mode, the transmitter transmits a demo code. With this, during a demonstration of a transmitter as a product in a store, for example, a customer can receive a demo code and obtain a product description associated with the demo code. Whether or not the transmitter is in the demo mode can be determined based on the fact that the transmitter is set to the demo mode, that a CAS card for the store is inserted, that no CAS card is inserted, or that no recording medium is inserted.","Next, signal transmission from a remote controller is described.",{"@attributes":{"id":"p-1902","num":"1901"},"figref":"FIG. 296"},"For example, when a transmitter configured as a remote controller of an air conditioner receives main-unit information, the transmitter transmits the main-unit information so that the receiver can receive from the nearby transmitter the information on the distant main unit. The receiver can receive information from a main unit located at a site where the visible light communication is unavailable, for example, across a network.","Next, a process of transmitting information only when the transmitter is in a bright place is described.",{"@attributes":{"id":"p-1905","num":"1904"},"figref":"FIG. 297"},"The transmitter transmits information when the brightness in its surrounding area is no less than a predetermined level, and stops transmitting information when the brightness falls below the predetermined level. By doing so, for example, a transmitter configured as an advertisement on a train can automatically stop its operation when the car enters a train depot. Thus, it is possible to reduce battery power consumption.","Next, content distribution according to an indication on the transmitter (changes in association and scheduling) is described.",{"@attributes":{"id":"p-1908","num":"1907"},"figref":"FIG. 298"},"The transmitter associates, with a transmission ID, content to be obtained by the receiver in line with the timing at which the content is displayed. Every time the content to be displayed is changed, a change in the association is registered with the server.","When the timing at which the content to be displayed is displayed is known, the transmitter sets the server so that other content is transmitted to the receiver according to the timing of a change in the content to be displayed. When the server receives from the receiver a request for content associated with the transmission ID, the server transmits to the receiver corresponding content according to the set schedule.","By doing so, for example, when content displayed by a transmitter configured as a digital signage changes one after another, the receiver can obtain content that corresponds to the content displayed by the transmitter.","Next, content distribution corresponding to what is displayed by the transmitter (synchronization using a time point) is described.",{"@attributes":{"id":"p-1913","num":"1912"},"figref":"FIG. 299"},"The server holds previously registered settings to transfer different content at each time point in response to a request for content associated with a predetermined ID.","The transmitter synchronizes the server with a time point, and adjusts timing to display content so that a predetermined part is displayed at a predetermined time point.","By doing so, for example, when content displayed by a transmitter configured as a digital signage changes one after another, the receiver can obtain content that corresponds to the content displayed by the transmitter.","Next, content distribution corresponding to what is displayed by the transmitter (transmission of a display time point) is described.",{"@attributes":{"id":"p-1918","num":"1917"},"figref":"FIG. 300"},"The transmitter transmits, in addition to the ID of the transmitter, a display time point of content being displayed. The display time point of content is information with which the content currently being displayed can be identified, and can be represented by an elapsed time from a start time point of the content, for example.","The receiver obtains from the server content associated with the received ID and displays the content according to the received display time point. By doing so, for example, when content displayed by a transmitter configured as a digital signage changes one after another, the receiver can obtain content that corresponds to the content displayed by the transmitter.","Furthermore, the receiver displays content while changing the content with time. By doing so, even when content being displayed by the transmitter changes, there is no need to renew signal reception to display content corresponding to displayed content.","Next, data upload according to a grant status of a user is described.",{"@attributes":{"id":"p-1923","num":"1922"},"figref":"FIG. 301"},"In the case where a user has a registered account, the receiver transmits to the server the received ID and information to which the user granted access upon registering the account or other occasions (such as position, telephone number, ID, installed applications, etc. of the receiver, or age, sex, occupation, preferences, etc. of the user).","In the case where a user has no registered account, the above information is transmitted likewise to the server when the user has granted uploading of the above information, and when the user has not granted uploading of the above information, only the received ID is transmitted to the server.","With this, a user can receive content suitable to a reception situation or own personality, and as a result of obtaining information on a user, the server can make use of the information in data analysis.","Next, running of an application for reproducing content is described.",{"@attributes":{"id":"p-1928","num":"1927"},"figref":"FIG. 302"},"The receiver obtains from the server content associated with the received ID. When an application currently running supports the obtained content (the application can displays or reproduces the obtained content), the obtained content is displayed or reproduced using the application currently running. When the application does not support the obtained content, whether or not any of the applications installed on the receiver supports the obtained content is checked, and when an application supporting the obtained content has been installed, the application is started to display and reproduce the obtained content. When all the applications installed do not support the obtained content, an application supporting the obtained content is automatically installed, or an indication or a download page is displayed to prompt a user to install an application supporting the obtained content, for example, and after the application is installed, the obtained content is displayed and reproduced.","By doing so, the obtained content can be appropriately supported (displayed, reproduced, etc.).","Next, running of a designated application is described.",{"@attributes":{"id":"p-1932","num":"1931"},"figref":"FIG. 303"},"The receiver obtains, from the server, content associated with the received ID and information designating an application to be started (an application ID). When the application currently running is a designated application, the obtained content is displayed and reproduced. When a designated application has been installed on the receiver, the designated application is started to display and reproduce the obtained content. When the designated application has not been installed, the designated application is automatically installed, or an indication or a download page is displayed to prompt a user to install the designated application, for example, and after the designated application is installed, the obtained content is displayed and reproduced.","The receiver may be designed to obtain only the application ID from the server and start the designated application.","The receiver may be configured with designated settings. The receiver may be designed to start the designated application when a designated parameter is set.","Next, selecting between streaming reception and normal reception is described.",{"@attributes":{"id":"p-1937","num":"1936"},"figref":"FIG. 304"},"When a predetermined address of the received data has a predetermined value or when the received data contains a predetermined identifier, the receiver determines that signal transmission is streaming distribution, and receives signals by a streaming data reception method. Otherwise, a normal reception method is used to receive the signals.","By doing so, signals can be received regardless of which method, streaming distribution or normal distribution, is used to transmit the signals.","Next, private data is described.",{"@attributes":{"id":"p-1941","num":"1940"},"figref":"FIG. 305"},"When the value of the received ID is within a predetermined range or when the received ID contains a predetermined identifier, the receiver refers to a table in an application and when the table has the reception ID, content indicated in the table is obtained. Otherwise, content identified by the reception ID is obtained from the server.","By doing so, it is possible to receive content without registration with the server. Furthermore, response can be quick because no communication is performed with the server.","Next, setting of an exposure time according to a frequency is described.",{"@attributes":{"id":"p-1945","num":"1944"},"figref":"FIG. 306"},"The receiver detects a signal and recognizes a modulation frequency of the signal. The receiver sets an exposure time according to a period of the modulation frequency (a modulation period). For example, the exposure time is set to a value substantially equal to the modulation frequency so that signals can be more easily received. When the exposure time is set to an integer multiple of the modulation frequency or an approximate value (roughly plus\/minus 30%) thereof, for example, convolutional decoding can facilitate reception of signals.","Next, setting of an optimum parameter in the transmitter is described.",{"@attributes":{"id":"p-1948","num":"1947"},"figref":"FIG. 307"},"The receiver transmits, to the server, data received from the transmitter, and current position information, information related to a user (address, sex, age, preferences, etc.), and the like. The server transmits to the receiver a parameter for the optimum operation of the transmitter according to the received information. The receiver sets the received parameter in the transmitter when possible. When not possible, the parameter is displayed to prompt a user to set the parameter in the transmitter.","With this, it is possible to operate a washing machine in a manner optimized according to the nature of water in a district where the transmitter is used, or to operate a rice cooker in such a way that rice is cooked in an optimal way for the kind of rice used by a user, for example.","Next, an identifier indicating a data structure is described.",{"@attributes":{"id":"p-1952","num":"1951"},"figref":"FIG. 308"},"Information to be transmitted contains an identifier, the value of which shows to the receiver a structure of a part following the identifier. For example, it is possible to identify a length of data, kind and length of an error correction code, a dividing point of data, and the like.","This allows the transmitter to change the kind and length of data body, the error correction code, and the like according to characteristics of the transmitter, a communication path, and the like. Furthermore, the transmitter can transmit a content ID in addition to an ID of the transmitter, to allow the receiver to obtain an ID corresponding to the content ID.","This embodiment describes each example of application using a receiver such as a smartphone and a transmitter for transmitting information as a blink pattern of an LED or an organic EL device in each of the embodiments described above.",{"@attributes":{"id":"p-1956","num":"1955"},"figref":"FIG. 309"},"A receiver in this embodiment switches the shutter speed between high and low speeds, for example, on the frame basis, upon continuous imaging with the image sensor. Furthermore, on the basis of a frame obtained by such imaging, the receiver switches processing on the frame between a barcode recognition process and a visible light recognition process. Here, the barcode recognition process is a process of decoding a barcode appearing in a frame obtained at a low shutter speed. The visible light recognition process is a process of decoding the above-described pattern of bright lines appearing on a frame obtained at a high shutter speed.","This receiver includes an image input unit , a barcode and visible light identifying unit , a barcode recognition unit , a visible light recognition unit , and an output unit .","The image input unit  includes an image sensor and switches a shutter speed for imaging with the image sensor. This means that the image input unit  sets the shutter speed to a low speed and a high speed alternately, for example, on the frame basis. More specifically, the image input unit  switches the shutter speed to a high speed for an odd-numbered frame, and switches the shutter speed to a low speed for an even-numbered frame. Imaging at a low shutter speed is imaging in the above-described normal imaging mode, and imaging at a high shutter speed is imaging in the above-described visible light communication mode. Specifically, when the shutter speed is a low speed, the exposure time of each exposure line included in the image sensor is long, and a normal captured image in which a subject is shown is obtained as a frame. When the shutter speed is a high speed, the exposure time of each exposure line included in the image sensor is short, and a visible light communication image in which the above-described bright lines are shown is obtained as a frame.","The barcode and visible light identifying unit  determines whether or not a barcode appears, or a bright line appears, in an image obtained by the image input unit , and switches processing on the image accordingly. For example, when a barcode appears in a frame obtained by imaging at a low shutter speed, the barcode and visible light identifying unit  causes the barcode recognition unit to perform the processing on the image. When a bright line appears in a frame obtained by imaging at a high shutter speed, the barcode and visible light identifying unit  causes the visible light recognition unit to perform the processing on the image.","The barcode recognition unit decodes a barcode appearing in a frame obtained by imaging at a low shutter speed. The barcode recognition unit obtains data of the barcode (for example, a barcode identifier) as a result of such decoding, and outputs the barcode identifier to the output unit . Note that the barcode may be a one-dimensional code or may be a two-dimensional code (for example, QR Code\u00ae).","The visible light recognition unit decodes a pattern of bright lines appearing in a frame obtained by imaging at a high shutter speed. The visible light recognition unit obtains data of visible light (for example, a visible light identifier) as a result of such decoding, and outputs the visible light identifier to the output unit . Note that the data of visible light is the above-described visible light signal.","The output unit  displays only frames obtained by imaging at a low shutter speed. Therefore, when the subject imaged with the image input unit  is a barcode, the output unit  displays the barcode. When the subject imaged with the image input unit  is a digital signage or the like which transmits a visible light signal, the output unit  displays an image of the digital signage without displaying a pattern of bright lines. Subsequently, when the output unit  obtains a barcode identifier, the output unit  obtains, from a server, for example, information associated with the barcode identifier, and displays the information. When the output unit  obtains a visible light identifier, the output unit  obtains, from a server, for example, information associated with the visible light identifier, and displays the information.","Stated differently, the receiver which is a terminal device includes an image sensor, and performs continuous imaging with the image sensor while a shutter speed of the image sensor is alternately switched between a first speed and a second speed higher than the first speed. (a) When a subject imaged with the image sensor is a barcode, the receiver obtains an image in which the barcode appears, as a result of imaging performed when the shutter speed is the first speed, and obtains a barcode identifier by decoding the barcode appearing in the image. (b) When a subject imaged with the image sensor is a light source (for example, a digital signage), the receiver obtains a bright line image which is an image including bright lines corresponding to a plurality of exposure lines included in the image sensor, as a result of imaging performed when the shutter speed is the second speed. The receiver then obtains, as a visible light identifier, a visible light signal by decoding the pattern of bright lines included in the obtained bright line image. Furthermore, this receiver displays an image obtained through imaging performed when the shutter speed is the first speed.","The receiver in this embodiment is capable of both decoding a barcode and receiving a visible light signal by switching between and performing the barcode recognition process and the visible light recognition process. Furthermore, such switching allows for a reduction in power consumption.","The receiver in this embodiment may perform an image recognition process, instead of the barcode recognition process, and the visible light process simultaneously.",{"@attributes":{"id":"p-1967","num":"1966"},"figref":"FIG. 310A"},"A receiver in this embodiment switches the shutter speed between high and low speeds, for example, on the frame basis, upon continuous imaging with the image sensor. Furthermore, the receiver performs an image recognition process and the above-described visible light recognition process simultaneously on an image (frame) obtained by such imaging. The image recognition process is a process of recognizing a subject appearing in a frame obtained at a low shutter speed.","The receiver includes an image input unit , an image recognition unit , a visible light recognition unit , and an output unit .","The image input unit  includes an image sensor and switches a shutter speed for imaging with the image sensor. This means that the image input unit  sets the shutter speed to a low speed and a high speed alternately, for example, on the frame basis. More specifically, the image input unit  switches the shutter speed to a high speed for an odd-numbered frame, and switches the shutter speed to a low speed for an even-numbered frame. Imaging at a low shutter speed is imaging in the above-described normal imaging mode, and imaging at a high shutter speed is imaging in the above-described visible light communication mode. Specifically, when the shutter speed is a low speed, the exposure time of each exposure line included in the image sensor is long, and a normal captured image in which a subject is shown is obtained as a frame. When the shutter speed is a high speed, the exposure time of each exposure line included in the image sensor is short, and a visible light communication image in which the above-described bright lines are shown is obtained as a frame.","The image recognition unit recognizes a subject appearing in a frame obtained by imaging at a low shutter speed, and identifies a position of the subject in the frame. As a result of the recognition, the image recognition unit determines whether or not the subject is a target of augment reality (AR) (hereinafter referred to as an AR target). When determining that the subject is an AR target, the image recognition unit generates image recognition data which is data for displaying information related to the subject (for example, a position of the subject, an AR marker thereof, etc.), and outputs the AR marker to the output unit .","The output unit  displays only frames obtained by imaging at a low shutter speed, as with the above-described output unit . Therefore, when the subject imaged by the image input unit  is a digital signage or the like which transmits a visible light signal, the output unit  displays an image of the digital signage without displaying a pattern of bright lines. Furthermore, when the output unit  obtains the image recognition data from the image recognition unit , the output unit  refers to a position of the subject in a frame represented by the image recognition data, and superimposes on the frame an indicator in the form of a white frame enclosing the subject, based on the position referred to.",{"@attributes":{"id":"p-1973","num":"1972"},"figref":"FIG. 310B","b":"1215"},"The output unit  superimposes, on the frame, an indicator in the form of a white frame enclosing a subject image formed as a digital signage, for example. In other words, the output unit  displays the indicator indicating the subject recognized in the image recognition process. Furthermore, when the output unit  obtains the visible light identifier from the visible light recognition unit , the output unit  changes the color of the indicator from white to red, for example.",{"@attributes":{"id":"p-1975","num":"1974"},"figref":"FIG. 310C"},"The output unit  further obtains, as related information, information related to the subject and associated with the visible light identifier, for example, from a server or the like. The output unit  adds the related information to an AR marker represented by the image recognition data, and displays the AR marker with the related information added thereto, in association with the subject image in the frame.","The receiver in this embodiment is capable of realizing AR which uses visible light communication, by performing the image recognition process and the visible light recognition process simultaneously. Note that the receiver illustrated in  may display the indicator illustrated in , as with the receiver . In this case, when a barcode is recognized in a frame obtained by imaging at a low shutter speed, the receiver displays the indicator in the form of a white frame enclosing the barcode. When the barcode is decoded, the receiver changes the color of the indicator from white to red. Likewise, when a pattern of bright lines is recognized in a frame obtained by imaging at a high shutter speed, the receiver identifies a portion of a low-speed frame which corresponds to a portion where the pattern of bright lines is located. For example, when a digital signage transmits a visible light signal, an image of the digital signage in the low-speed frame is identified. Note that the low-speed frame is a frame obtained by imaging at a low shutter speed. The receiver superimposes, on the low-speed frame, the indicator in the form of a white frame enclosing the identified portion in the low-speed frame (for example, the above-described image of the digital signage), and displays the resultant image. When the pattern of bright lines is decoded, the receiver changes the color of the indicator from white to red.",{"@attributes":{"id":"p-1978","num":"1977"},"figref":"FIG. 311A"},"A transmitter in this embodiment transmits a visible light signal in synchronization with a transmitter . Specifically, at the timing of transmission of a visible light signal by the transmitter , the transmitter transmits the same visible light signal. Note that the transmitter  includes a light emitting unit  and transmits a visible light signal by the light emitting unit  changing in luminance.","This transmitter includes a light receiving unit , a signal analysis unit , a transmission clock adjustment unit , and a light emitting unit . The light emitting unit  transmits, by changing in luminance, the same visible light signal as the visible light signal which the transmitter  transmits. The light receiving unit  receives a visible light signal from the transmitter  by receiving visible light from the transmitter . The signal analysis unit  analyzes the visible light signal received by the light receiving unit , and transmits the analysis result to the transmission clock adjustment unit . On the basis of the analysis result, the transmission clock adjustment unit adjusts the timing of transmission of a visible light signal from the light emitting unit . Specifically, the transmission clock adjustment unit adjusts timing of luminance change of the light emitting unit  so that the timing of transmission of a visible light signal from the light emitting unit  of the transmitter  and the timing of transmission of a visible light signal from the light emitting unit  match each other.","With this, the waveform of a visible light signal transmitted by the transmitter and the waveform of a visible light signal transmitted by the transmitter  can be the same in terms of timing.",{"@attributes":{"id":"p-1982","num":"1981"},"figref":"FIG. 311B"},"As with the transmitter , a transmitter in this embodiment transmits a visible light signal in synchronization with the transmitter . Specifically, at the timing of transmission of a visible light signal by the transmitter , the transmitter transmits the same visible light signal.","This transmitter includes a first light receiving unit , a second light receiving unit , a comparison unit , a transmission clock adjustment unit , and the light emitting unit .","As with the light receiving unit , the first light receiving unit receives a visible light signal from the transmitter  by receiving visible light from the transmitter . The second light receiving unit receives visible light from the light emitting unit . The comparison unit  compares a first timing in which the visible light is received by the first light receiving unit and a second timing in which the visible light is received by the second light receiving unit . The comparison unit  then outputs a difference between the first timing and the second timing (that is, delay time) to the transmission clock adjustment unit . The transmission clock adjustment unit adjusts the timing of transmission of a visible light signal from the light emitting unit  so that the delay time is reduced.","With this, the waveform of a visible light signal transmitted by the transmitter and the waveform of a visible light signal transmitted by the transmitter  can be more exactly the same in terms of timing.","Note that two transmitters transmit the same visible light signals in the examples illustrated in  and , but may transmit different visible light signals. This means that when two transmitters transmit the same visible light signals, the transmitters transmit them in synchronization as described above. When two transmitters transmit different visible light signals, only one of the two transmitters transmits a visible light signal, and the other transmitter remains ON or OFF while the one transmitter transmits a visible light signal. The one transmitter is thereafter turned ON or OFF, and only the other transmitter transmits a visible light signal while the one transmitter remains ON or OFF. Note that two transmitters may transmit mutually different visible light signals simultaneously.",{"@attributes":{"id":"p-1988","num":"1987"},"figref":"FIG. 312A"},"A plurality of transmitters  in this embodiment are, for example, arranged in a row as illustrated in . Note that these transmitters  have the same configuration as the transmitter illustrated in  or the transmitter illustrated in . Each of the transmitters  transmits a visible light signal in synchronization with one of adjacent transmitters  on both sides.","This allows many transmitters to transmit visible light signals in synchronization.",{"@attributes":{"id":"p-1991","num":"1990"},"figref":"FIG. 312B"},"Among the plurality of transmitters  in this embodiment, one transmitter  serves as a basis for synchronization of visible light signals, and the other transmitters  transmit visible light signals in line with this basis.","This allows many transmitters to transmit visible light signals in more accurate synchronization.",{"@attributes":{"id":"p-1994","num":"1993"},"figref":"FIG. 313"},"Each of the transmitters  in this embodiment receives a synchronization signal and transmits a visible light signal according to the synchronization signal. Thus, visible light signals are transmitted from the transmitters  in synchronization.","Specifically, each of the transmitters  includes a control unit , a synchronization control unit , a photocoupler , an LED drive circuit , an LED , and a photodiode .","The control unit  receives a synchronization signal and outputs the synchronization signal to the synchronization control unit .","The LED  is a light source which outputs visible light and blinks (that is, changes in luminance) under the control of the LED drive circuit . Thus, a visible light signal is transmitted from the LED  to the outside of the transmitter .","The photocoupler  transfers signals between the synchronization control unit  and the LED drive circuit  while providing electrical insulation therebetween. Specifically, the photocoupler  transfers to the LED drive circuit  the later-described transmission start signal transmitted from the synchronization control unit .","When the LED drive circuit  receives a transmission start signal from the synchronization control unit  via the photocoupler , the LED drive circuit  causes the LED  to transmit a visible light signal at the timing of reception of the transmission start signal.","The photodiode  detects visible light output from the LED , and outputs to the synchronization control unit  a detection signal indicating that visible light has been detected.","When the synchronization control unit  receives a synchronization signal from the control unit , the synchronization control unit  transmits a transmission start signal to the LED drive circuit  via the photocoupler . Transmission of this transmission start signal triggers the start of transmission of the visible light signal. When the synchronization control unit  receives the detection signal transmitted from the photodiode  as a result of the transmission of the visible light signal, the synchronization control unit  calculates delay time which is a difference between the timing of reception of the detection signal and the timing of reception of the synchronization signal from the control unit . When the synchronization control unit  receives the next synchronization signal from the control unit , the synchronization control unit  adjusts the timing of transmitting the next transmission start signal based on the calculated delay time. Specifically, the synchronization control unit  adjusts the timing of transmitting the next transmission start signal so that the delay time for the next synchronization signal becomes preset delay time which has been predetermined. Thus, the synchronization control unit  transmits the next transmission start signal at the adjusted timing.",{"@attributes":{"id":"p-2003","num":"2002"},"figref":"FIG. 314","b":"1240"},"When the synchronization control unit  receives a synchronization signal, the synchronization control unit  generates a delay time setting signal which has a delay time setting pulse at a predetermined timing. Note that the specific meaning of receiving a synchronization signal is receiving a synchronization pulse. More specifically, the synchronization control unit  generates the delay time setting signal so that a rising edge of the delay time setting pulse is observed at a point in time when the above-described preset delay time has elapsed since a falling edge of the synchronization pulse.","The synchronization control unit  then transmits the transmission start signal to the LED drive circuit  via the photocoupler  at the timing delayed by a previously obtained correction value N from the falling edge of the synchronization pulse. As a result, the LED drive circuit  transmits the visible light signal from the LED . In this case, the synchronization control unit  receives the detection signal from the photodiode  at the timing delayed by a sum of unique delay time and the correction value N from the falling edge of the synchronization pulse. This means that transmission of the visible light signal starts at this timing. This timing is hereinafter referred to as a transmission start timing. Note that the above-described unique delay time is delay time attributed to the photocoupler  or the like circuit, and this delay time is inevitable even when the synchronization control unit  transmits the transmission start signal immediately after receiving the synchronization signal.","The synchronization control unit  identifies, as a modified correction value N, a difference in time between the transmission start timing and a rising edge in the delay time setting pulse. The synchronization control unit  calculates a correction value (N+1) according to correction value (N+1)=correction value N+modified correction value N, and holds the calculation result. With this, when the synchronization control unit  receives the next synchronization signal (synchronization pulse), the synchronization control unit  transmits the transmission start signal to the LED drive circuit  at the timing delayed by the correction value (N+1) from a falling edge of the synchronization pulse. Note that the modified correction value N can be not only a positive value but also a negative value.","Thus, since each of the transmitters  receives the synchronization signal (the synchronization pulse) and then transmits the visible light signal after the preset delay time elapses, the visible light signals can be transmitted in accurate synchronization. Specifically, even when there is a variation in the unique delay time for the transmitters  which is attributed to the photocoupler  and the like circuit, transmission of visible light signals from the transmitters  can be accurately synchronized without being affected by the variation.","Note that the LED drive circuit consumes high power and is electrically insulated using the photocoupler or the like from the control circuit which handles the synchronization signals. Therefore, when such a photocoupler is used, the above-mentioned variation in the unique delay time makes it difficult to synchronize transmission of visible light signals from transmitters. However, in the transmitters  in this embodiment, the photodiode  detects a timing of light emission of the LED , and the synchronization control unit  detects delay time based on the synchronization signal and makes adjustments so that the delay time becomes the preset delay time (the above-described preset delay time). With this, even when there is an individual-based variation in the photocouplers provided in the transmitters configured as LED lightings, for example, it is possible to transmit visible light signals (for example, visible light IDs) from the LED lightings in highly accurate synchronization.","Note that the LED lighting may be ON or may be OFF in periods other than a visible light signal transmission period. In the case where the LED lighting is ON in periods other than the visible light signal transmission period, the first falling edge of the visible light signal is detected. In the case where the LED lighting is OFF in periods other than the visible light signal transmission period, the first rising edge of the visible light signal is detected.","Note that every time the transmitter  receives the synchronization signal, the transmitter  transmits the visible light signal in the above-described example, but may transmit the visible light signal even when the transmitter  does not receive the synchronization signal. This means that after the transmitter  transmits the visible light signal following the reception of the synchronization signal once, the transmitter  may sequentially transmit visible light signals even without having received synchronization signals. Specifically, the transmitter  may perform sequential transmission, specifically, two to a few thousand time transmission, of a visible light signal, following one-time synchronization signal reception. The transmitter  may transmit a visible light signal according to the synchronization signal once in every 100 milliseconds or once in every few seconds.","When the transmission of a visible light signal according to a synchronization signal is repeated, there is a possibility that the continuity of light emission by the LED  is lost due to the above-described preset delay time. In other words, there may be a slightly long blanking interval. As a result, there is a possibility that blinking of the LED  is visually recognized by humans, that is, what is called flicker may occur. Therefore, the cycle of transmission of the visible light signal by the transmitter  according to the synchronization signal may be 60 Hz or more. With this, blinking is fast and less easily visually recognized by humans. As a result, it is possible to reduce the occurrence of flicker. Alternatively, the transmitter  may transmit a visible light signal according to a synchronization signal in a sufficiently long cycle, for example, once in every few minutes. Although this allows humans to visually recognize blinking, it is possible to prevent blinking from being repeatedly visually recognized in sequence, reducing discomfort brought by flicker to humans.","(Preprocessing for Reception Method)",{"@attributes":{"id":"p-2012","num":"2011"},"figref":["FIG. 315","FIG. 316"]},"First, the receiver calculates an average value of respective pixel values of the plurality of pixels aligned parallel to the exposure lines (Step S). Averaging the pixel values of N pixels based on the central limit theorem results in the expected value of the amount of noise being N to the negative one-half power, which leads to an improvement of the SN ratio.","Next, the receiver leaves only the portion where changes in the pixel values are the same in the perpendicular direction for all the colors, and removes changes in the pixel values where such changes are different (Step S). In the case where a transmission signal (visible light signal) is represented by luminance of the light emitting unit included in the transmitter, the luminance of a backlight in a lighting or a display which is the transmitter changes. In this case, the pixel values change in the same direction for all the colors as in (b) of . In the portions of (a) and (c) of , the pixels values change differently for each color. Since the pixel values in these portions fluctuate due to reception noise or a picture on the display or in a signage, the SN ratio can be improved by removing such fluctuation.","Next, the receiver obtains a luminance value (Step S). Since the luminance is less susceptible to color changes, it is possible to remove the influence of a picture on the display or in a signage and improve the SN ratio.","Next, the receiver runs the luminance value through a low-pass filter (Step S). In the reception method in this embodiment, a moving average filter based on the length of exposure time is used, with the result that in the high-frequency domain, almost no signals are included; noise is dominant. Therefore, the SN ratio can be improved with the use of the low-pass filter which cuts off high frequency components. Since the amount of signal components is large at the frequencies lower than and equal to the reciprocal of exposure time, it is possible to increase the effect of improving the SN ratio by cutting off signals with frequencies higher than and equal to the reciprocal. If frequency components contained in a signal are limited, the SN ratio can be improved by cutting off components with frequencies higher than the limit of frequencies of the frequency components. A filter which excludes frequency fluctuating components (such as a Butterworth filter) is suitable for the low-pass filter.","(Reception Method Using Convolutional Maximum Likelihood Decoding)",{"@attributes":{"id":"p-2017","num":"2016"},"figref":["FIG. 317","FIG. 318","FIG. 319"]},"Signals can be received most accurately when the exposure time is an integer multiple of the transmission period. Even when the exposure time is not an integer multiple of the transmission period, signals can be received as long as the exposure time is in the range of about (N\u00b10.33) times (N is an integer) the transmission period.","First, the receiver sets the transmission and reception offset to 0 (Step S). The transmission and reception offset is a value for use in modifying a difference between the transmission timing and the reception timing. This difference is unknown, and therefore the receiver changes a candidate value for the transmission and reception offset little by little and adopts, as the transmission and reception offset, a value that agrees most.","Next, the receiver determines whether or not the transmission and reception offset is shorter than the transmission period (Step S). Here, since the reception period and the transmission period are not synchronized, the obtained reception value is not always in line with the transmission period. Therefore, when the receiver determines in Step S that the transmission and reception offset is shorter than the transmission period (Step S: Y), the receiver calculates, for each transmission period, a reception value (for example, a pixel value) that is in line with the transmission period, by interpolation using a nearby reception value (Step S). Linear interpolation, the nearest value, spline interpolation, or the like can be used as the interpolation method. Next, the receiver calculates a difference between the reception values calculated for the respective transmission periods (Step S).",{"@attributes":{"id":"p-2021","num":"2020"},"figref":"FIG. 318","b":"1225"},"It is conceivable to perform this calculation on all the reception values. When the number of reception values is N, the number of convolutional transition patterns is 2 to the power of N, making NP difficult, but the use of the Viterbi algorithm in the calculation allows the calculation to be efficient.","Most of the state transition paths in  are paths that do not conform to the transmission format. Therefore, upon every state transition, a format check is performed, and when the current path does not conform to the transmission format, the likelihood of the path is set to 0 so that the accuracy of estimating a correct reception signal can be enhanced.","The receiver adds a predetermined value to the transmission and reception offset (Step S) and repeatedly performs the processing in Step S and the following steps. When the receiver determines in Step S that the transmission and reception offset is not shorter than the transmission period (Step S: N), the receiver identifies the highest likelihood among the likelihoods of the reception signals calculated for the respective transmission and reception offsets. The receiver then determines whether or not the highest likelihood is greater than or equal to a predetermined value (Step S). When the receiver determines that the highest likelihood is greater than or equal to the predetermined value (Step S: Y), the receiver uses, as a final estimation result, a reception signal having the highest likelihood. Alternatively, the receiver uses, as a reception signal candidate, a reception signal having a likelihood less than the highest likelihood by a predetermined value or less (Step S). When the receiver determines in Step S that the highest likelihood is less than the predetermined value (Step S: N), the receiver discards the estimation result (Step S).","When there is too much noise, the reception signal often cannot be properly estimated, and the likelihood is low at the same time. Therefore, the reliability of reception signals can be enhanced by discarding the estimation result when the likelihood is low. The maximum likelihood decoding has a problem that even when an input image does not contain an effective signal, an effective signal is output as an estimation result. However, also in this case, the likelihood is low, and therefore this problem can be avoided by discarding the estimation result when the likelihood is low.","Conventional visible light communication schemes include one method that employs a general-purpose image sensor as a light-receiving device and another featuring a photosensor or a special high-speed image sensor. CASIO's Picapiamera\u00ae is an example of the former type. Since the upper limit of the imaging frame rate of many general-purpose image sensors is 30 fps, changes in luminance of a light source that transmits signals need to be at a frequency not higher than this upper limit. However, changes in luminance at such a low frequency can be perceived as flicker by the human eye, so in this case, light fixtures cannot be used as signal transmitters, that is, it is necessary to use dedicated transmitters. IEEE801.15.7 and CP1223 standards employ a high-speed photosensor as the latter type. The modulation frequency adopted in these methods equals or exceeds 9.6 kHz. Since the luminance change at such a high frequency is imperceptible to the human eye, incoming light that is subject to high-frequency luminance changes looks steady to the human eye, thus allowing fixtures to be used as transmitters. However, they require a dedicated reception device. This hampers the spread of visible light communication.","We have developed a technique in which a general-purpose image sensor built into a conventional smartphone is used as a reception device for detecting optical signals modulated at high frequencies that are imperceptible to the human eye. CMOS image sensors, which are superior to CCD image sensors in terms of high-speed response, highly integrated structure, low power consumption, and low-voltage drive, are incorporated into nearly all types of smartphones and digital cameras. A CMOS image sensor captures images by line scanning, which sequentially exposes each pixel line to light. The drawback to this method is that images of moving objects are distorted. To utilize the characteristics of line scanning, we set an optimal exposure time and developed a line-scan sampling (LSS) method that samples at 30 kHz or higher, a thousand times faster than the conventional sampling frequency that samples a single luminance state per image. We also devised an appropriate modulation method for LSS and applied it to LED light fixtures and display backlights. We applied our LSS-based reception method to currently-available smartphones and confirmed that it enables the reception of optical signals modulated at 10 kHz.","A CMOS image sensor converts light into pixel values that read as one-dimensional data using the following process.","1. A photodiode in a pixel is exposed to light and produces electric charge according to the amount of exposure. This charge is amplified and converted into voltage.","2. The voltage is supplied to a vertical signal line by a line selection switch. Fixed pattern noise is eliminated and the signal is temporarily stored.","3. The stored voltage is transmitted sequentially to a horizontal signal line by a column selection switch and is finally read out as one-dimensional data.","Image sensors that are built into smartphones and digital cameras are highly micro-fabricated devices in which each pixel has no frame memory. For this reason, light exposure in Step 1 does not occur simultaneously for all pixels, but takes place as described in Step 2, in a sequential line-by-line process. This means that the timing of the start and end of light exposure progresses by degrees from line to line. As a result, the CMOS image sensor provides images taken at different points in time on different lines. Using this image-capturing mechanism allows the sampling of luminance changes from a transmitter that is much faster than that needed for whole frames. We refer to a line of pixels exposed to light at the same time as an \u201cexposure line.\u201d",{"@attributes":{"id":"p-2033","num":"2032"},"figref":["FIG. 320","FIG. 320"]},"Not all photodiodes are directly used to capture images in a CMOS image sensor. An optical black section is masked from exposure. Subtracting the output potential of the optical black section from the output potential of the effective pixels cancels the dark current that arises from heat noise. There are also some \u201cblind\u201d sections for layout reasons. The effective pixel aspect ratio is often 4:3, but when the size of a captured image is set to 16:9, the top and bottom portions of the effective pixel area are clipped off and, as a result, are handled in the same way as blind sections. The image sensor not only reads the data from the effective pixels but also that from the optical black and blind sections in sequence along each line. Because of this sequential procedure, the time required for exposing the optical black and blind sections is the time taken to jump from the bottom line of one image to the top line of the next image. This time difference is called the \u201cblanking time.\u201d","The period during which the luminance changes at the light source can be sampled by LSS is equivalent to the period during which the exposure line that captures an image from the light source is exposed.  illustrates this situation. Even if a light source is captured over the entire image, samples will be discontinuous because of the blanking time. Signal transmission must therefore be based on an appropriate protocol for LSS that takes into account the fact that the signals are received discontinuously. Although today's smartphones do not incorporate such a function, devices become capable of continuous signal reception and significantly improve communication efficiency if settings allow the devices to identify the location of the light source and capture a limited image of the location as shown in .","If the sampling frequency, i.e., the image-capturing frequency, is 30 fps and the vertical size of an image is 1080 pixels, LSS sampling is carried out 30\u00d71,080=32,400 times per second. However, because no sampling results are produced during the above blanking time, the actual sampling frequency exceeds 32,400 Hz. The blanking time varies depending on the settings of each model and the imaging conditions that include a frame rate and image resolution, but ranges from approximately around 1 to 10 milliseconds. Accordingly, the sampling frequency is in the range from about 33 to 46 kHz.","To be able to use illumination light as a light source for visible light communication, the luminance changes used for signal transmission must not be perceivable by the human eye. Average luminance (effective luminance) must therefore be constant, regardless of what signals are being transmitted. The luminance change frequency should also be sufficiently high or the luminance change rate should be sufficiently small. The frequency limit perceived by humans is called the critical flicker frequency (CFF), and is approximately 60 Hz although it differs depending on the conditions. Note that this is a limit for periodic blinking, and a higher modulation frequency is required for the irregular luminance changes used for signal transmission. Photographs taken with still or video cameras also must be free from luminance changes. As described above, with the exposure time setting in the range of ordinary photography, the effects of luminance changes in still images are so small as not to cause problems. However, when shooting video, even changes in luminance at a frequency higher than CFF may be perceived as a shadow that resembles a scanning line. This is because of the alias created by a shift between the frame and signal frequencies when shooting video. To eliminate this effect, a frequency substantially higher than CFF or a low luminance change ratio is required.","The brightness of a light fixture can be controlled by managing the amount of current that flows through the light source (current control) or the duration of the light emission time (PWM control). Using luminance changes to transmit signals does not permit the PWM control. However, in order to replace the control method for devices which conventionally employ the PWM control, such as display backlights, with the current control, large-scale circuit modification is required, which would hamper the adoption of visible light communication. It is therefore preferable for any modulation scheme to include a function for adjusting average luminance.","High luminance is desirable as the basic function of lighting equipment. The withstand voltage and number of LED elements serving as the light source are determined by maximum luminance. The modulation method in which the ratio of averaged luminance to the maximum luminance (the effective luminance rate (ELR)) has a higher value is therefore desirable.","A display can be employed as a transmitter by controlling the luminance of its backlight. A display transmitter, however, requires attention on the following points that are not seen in a lighting fixture transmitter. The SN ratio is low because the light source has low luminance. In order to improve the resolution of moving pictures the SN ratio of which would drop even further when a picture on a screen generates noise and the picture is dark, there are cases where the backlight needs to be switched off while the transmittance of liquid crystals is being changed. The refresh rate of a screen in a higher-grade product is higher, and the maximum refresh rate of existing products is 240 Hz. In this case, signals are intermittently transmitted on a 1\/240-second basis.","Discontinuous reception is the main characteristic of LSS. The modulation method adapted to discontinuous reception includes a small symbol method and a large symbol method.","[4.1 Large Symbol Method]","The large symbol method uses a uniform symbol continuously transmitted for a longer duration than with the image-capturing period. The uniform symbol refers to the symbol that allows decoding of the signal when any part of the symbol is received, such as a frequency-modulated symbol. The receiver receives one symbol for one image and connects incoming symbols from multiple images to reconstruct the communication data. The symbol-per-image reception method, which is similar to the conventional reception method by image sensors, is different in that the information volume per symbol is far greater, and the human eye cannot perceive any flicker in the modulated light. Communication data may be reconstructed by putting together a series of reception data in sequence. This, however, lacks reliability because, if processing on image frames is dropped due to a processing load, etc., of the receiver, for example, the reception data cannot be properly reconstructed. Even in such cases, data can be properly received when part of the signal is used as an address.","Signals coded using frequency modulation are uniform and provide a large volume of information per symbol. They are therefore useful for the large symbol method.  illustrates, in (b), an example of frequency modulation by means of on\/off control. A simple frequency modulation achieves an ELR of 50% that can be improved by fixing the cycle periods and securing longer periods of high luminance.  shows, in (b) and (c), results of frequency analysis of signals that have the same frequency but different ELR. It reveals that the frequencies represented by the signals can be recognized from their basic frequency.","Signal sampling by LSS produces a luminance average during an exposure period, which means that the signals are subjected to a moving average filter for the length of the exposure time.  depicts the frequency characteristics of this filter. Thus, it is to be noted that the exposure time of the receiver needs to be constant, and the frequencies cut by this filter cannot be used.","[4.2 Small Symbol Method]","In the small symbol method, the receiver receives multiple symbols in a series of reception periods of time, and reconstructs communication data by connecting the received parts over multiple image frames. If the repetitive period of the transmission signals is constant, the received parts can be combined based on the result of calculation of the length of the blanking time from the imaging frame rate. It would not, however, be reliable because many of today's smartphones control the imaging frame rate variably in relation to the processing load and the temperature in the processor. Therefore, communication data is divided into multiple packets, and a header indicating a packet boundary and an address indicating a packet number are added to each of packets so that the received data can be combined regardless of the length of the blind period. Furthermore, in the former method, only the same part of the communication data can be received when the ratio between the reception period (the imaging frame rate) and the transmission period is expressed as a small integer, whereas, in the latter method, this problem can be solved by randomizing the order of packet transmission.","Pulse-position modulation and frequency modulation are suitable for the small symbol method because their symbol transmission period can be short and their ELRs can be high.","Pulse-position modulation coding scheme that maintains constant luminance includes Manchester coding and four pulse-position modulation (4 PPM) coding ( and ). Both coding schemes offer a coding efficiency of 50%, but the 4 PPM coding achieves an effective luminance rate of 75%, which outperforms the Manchester coding the effective luminance rate of which is 50%.  illustrates coding schemes (variable 4 PPM, V4 PPM) supporting luminance adjustment based on the 4 PPM coding. This coding scheme allows the effective luminance rate to continuously change from 25% to 75%. Furthermore, this has a characteristic that the signal rising position remains constant regardless of the luminance, and therefore the reception side can receive signals without heeding the luminance setting values. As a Manchester code-based coding scheme supporting luminance adjustment, there is the variable PPM (VPPM) scheme. When the effective luminance rate in the VPPM scheme can be changed from 25% to 75%, the pulse width which is 25% of the symbol length is, if calculated based on the shortest recognizable pulse width, equal to the width of one pulse in the 4 PPM as illustrated in . In this case, the coding efficiency of V4 PPM is double that of VPPM, meaning that V4 PPM outperforms VPPM.","Frequency analysis, such as discrete cosine transform, can be used to receive frequency-modulated symbols. Its advantage is that it is usable with longer exposure time. However, since the information on the symbol sequence is lost, the combination of frequencies available in consideration of harmonic frequencies is limited. In the following experiments, V4 PPM is used as a symbol modulation method, more specifically, as the small symbol method.","[4.3. Performance Evaluation]","Performance in two modulation schemes is evaluated. A smartphone P-03E is used as a receiver, and a liquid-crystal television TH-L47DT5 is used as a transmitter. The backlight of the display is switched off when the liquid crystals are refreshed. The refresh rate of the liquid crystals is 240 Hz, and in the standard mode, the backlight lights up 75% of the time during the refresh cycle, so that continuous transmitting time is 1,000,000\/240\u00d70.75=3,125 micro seconds.  illustrates, in (a), signal and noise powers measured using the above-described transmitter and receiver when the exposure time is set to 1\/10,000 seconds, a 50% gray image is displayed on the screen of the display, and a 1 kHz on-off signal is transmitted. The following experiments were conducted using the simulated signal having this SN ratio ((b) in ). As the reception signal, a value obtained by averaging pixel values of 256 pixels in the horizontal direction to the exposure line was used. The following results were obtained from 1,000 simulations in each condition.","A single-frequency symbol is used as a symbol in the large symbol method. The effective luminance rate is set to 75% which is the same as the ELR used in the experiment for the small symbol method although the reception error decreases as the effective luminance rate approaches 50%. The reception signals are calculated by discrete cosine transform of pixel values vertical to exposure lines.  shows reception errors (the differences between the transmission signal frequencies and the reception signal frequencies). The reception error soared at over around 9 kHz. This is because the signal power is reduced by the moving average filter of LSS shown in , and is buried in noise. A large reception error occurs in the low frequency range because only signals at a lower number of cycles can be transmitted during the transmission period.  to  show the reception error rates for each frequency margin. For example, when the allowable error rate is assumed to be 5%, values can be allocated in 50-Hz steps in the frequency range from 1.6 kHz to 8 kHz. Therefore, information of (8,000\u22121,600)\/50=128=7 bits can be represented. For example, when 2 bits are allocated to an address and 5 bits are allocated to data, information of 20 bits can be represented. Since communication data can be decoded from four frame images at the maximum speed, the effective communication speed is 150 bps when images are captured at 30 fps. An error check code needs to be contained for practical use to detect reception errors.","V4 PPM was used for symbols in the small symbol method.  shows the reception success rate in each symbol rate. This reception success rate indicates the rate at which all symbols in one packet are successfully received. The modulation frequency herein indicates the number of time slots of luminance changes included in one second. Specifically, in the case of the modulation frequency of 10 kHz, 2,500 V4 PPM symbols are contained. When the allowable error rate is 5%, the modulation frequency can be set to 10 kHz. Assuming that the entire continuous transmission period is one packet, its boundary can be determined as long as the state at the beginning of the transmission period is an ON-state (a state in which the luminance is high), meaning that the header indicating a boundary of a packet can be provided in one slot. Each packet, therefore, contains as many V4 PPM symbols as the number indicated by (Expression 1) below.\n\n[Math. 1]\n\n\u2514(0.003125\/( 1\/10,000)\u22121)\/4\u2518=7\u2003\u2003(Expression 1)\n","This means that each packet contains 14 bits of information. If two bits are allocated to the address and twelve bits to the data, 48 bits of information can be represented. Since more than one packet can be received if the transmitter size in the captured image is large enough, the effective communication speed is highest when all the packets are successfully received from one image, and is 1,440 bps at the imaging rate of 30 fps.","The small symbol method allows a larger number of bits to be represented, and therefore was implemented, followed by a performance test. The packet composition was the same as that described above, with the combined 48 bits of data containing four bits of CRC code. When packets with the same address but different data are received, the largest number of the same data packets was employed. When there as the same number of packets with the same data, reception was continued until the number of any data packets takes the sole lead. If any error was detected through CRC, all the received packets were discarded. The distance between the receiver and the transmitter was set to four meters. With this distance, at least one packet image is contained per image. The average reception time in 200 trials was 351 milliseconds without any errors left after the CRC error check. The expected value of the number of times of packet reception necessary to collect N types of packets can be calculated according to (Expression 2) below.\n\n[Math. 2]\n\n\u03a3\u2003\u2003(Expression 2)\n","Thus, the expected value is 8.33 when N=4. Therefore, the expected reception time is 8.33\u00d733=275 milliseconds, assuming no packet reception errors and one packet reception per image. If the average reception time is longer than the expected reception time, it would have been necessary to receive two or more packets due to a reception error. The reception time can be improved by reducing reception errors through measures such as including an error detection code in the packet.","The visible light communication is one type of wireless communication which uses electromagnetic waves in the visible light band that are visible to the human eyes. This attracts attention because of a social aspect thereof that lighting becomes applicable as a communication infrastructure. As characteristics, this does not require authorization under the Radio Act, this is safe without affecting living organisms, this does not cause other devices to be affected by electromagnetic waves, the range of communication can be recognized at a glance because the signal transmission source and the communication path are visible, fraudulent communication can be easily prevented, it is easy to block signals, this is highly directional, being communicable with a specified device only, and the energy for communication can be shared with lighting. Furthermore, how to use this technique not only in bi-direction communication corresponding to the existing wireless communication represented by WiFi and the like, but also as a sign using unidirectional communication has been studied. An example of expected application is to transmit signals carrying position information from a ceiling light so as to locate a user in an indoor space where GPS signals do not reach.","This embodiment proposes high-speed sampling that utilizes the line-scan characteristics of the conventional CMOS image sensors and confirms that currently available smartphones can receive signals modulated at a modulation frequency of 10 kHz.","A smartphone's ability to receive visible light signals from light fixtures serving as the transmitter paves the way for a wide range of applications. An example of expected application is to transmit signals carrying position information from a ceiling light so as to locate a user in an indoor space where GPS signals do not reach. Another conceivable application is to use a signboard as the transmitter by allowing smartphones to obtain coupons or check for available seats, for example.","The visible light communication method proposed in this embodiment is superior to the illuminance sensor reception method not only in that smartphones are usable as the receiver, but also with the following advantages. Incoming light can be spatially separated, and can therefore be separately received without interference even when multiple transmitters are present nearby. Furthermore, the direction of the incoming light can be identified, which allows the position relative to the light source to be calculated. Specifically, by obtaining the absolute position of the light source based on the incoming signals, the absolute position of the receiver can be determined precisely with a margin of error of within a few centimeters. Displays and signboards can be used as transmitters in this communication system. Although it is difficult to receive signals from displays and signboards using photosensors due to luminance and illuminance thereof being lower than those of lighting, signals can be received regardless of environmental illuminance. Furthermore, although noise arises from moving images on a display screen, a flat area with less noise is selected and signals can be received from the area in the image sensor reception method.","Our future work will focus on improving our reception algorithm and studying the potential for further improvements in communication performance. We will also investigate various applications of visible light communication and test its industrial applicability.","This embodiment describes a display system which transmits a visible light signal while displaying an image, the display system being configured as a transmitter as described in the above embodiments.",{"@attributes":{"id":"p-2061","num":"2060"},"figref":"FIG. 331"},"The display system according to this embodiment includes an image signal sender  which generates and sends an image signal, and an image display  which transmits a visible light signal while displaying an image.","The image signal sender  includes an image signal generation unit , a visible light signal generation unit , a visible light synchronization signal generation unit , and an image standard signal sending unit .","The image signal generation unit  generates an image signal, and outputs the image signal to the image standard signal sending unit . The visible light signal generation unit  generates a visible light signal in the form of an electrical signal, and outputs the visible light signal to the image standard signal sending unit . The visible light synchronization signal generation unit  generates a visible light synchronization signal, and outputs the visible light synchronization signal to the image standard signal sending unit .","The image standard signal sending unit  outputs, to the image display  via an image standard transmission path group , an image signal, a visible light signal, and a visible light synchronization signal which are generated as described above.","The image display  includes an image standard signal receiving unit , an image display unit , and a visible light signal output unit .","The image standard signal receiving unit  receives, from the image standard signal sending unit , an image signal, a visible light signal, and a visible light synchronization signal via the image standard transmission path group . The image standard signal receiving unit  then outputs the image signal to the image display unit , and outputs the visible light signal and the visible light synchronization signal to the visible light signal output unit .","The image display unit  includes, for example, a liquid crystal display, an organic EL display, or a plasma display, and upon receiving an image signal from the image standard signal receiving unit , displays an image according to the image signal. If the image display  is, for instance, a projector, the image display unit  has a projection mechanism which includes a light source and an optical system, and upon receiving an image signal from the image standard signal receiving unit , projects an image according to the image signal on a screen.","The visible light signal output unit  obtains a visible light signal and a visible light synchronization signal from the image standard signal receiving unit . If the visible light signal output unit  receives a visible light synchronization signal, the visible light signal output unit  causes, at the time of receipt of the visible light synchronization signal, the image display unit  to start blinking according to the visible light signal already obtained. In this manner, the image display unit  transmits a visible light signal in the form of an optical signal by changing in luminance while displaying an image. Note that the visible light signal sending unit  may include a light source such as an LED, and may change the luminance of the light source.",{"@attributes":{"id":"p-2070","num":"2069"},"figref":"FIG. 332","b":["1254","1271"]},"The image standard signal sending unit  sends, to the image standard signal receiving unit , an image signal, a visible light signal, and a visible light synchronization signal, using a plurality of image standard transmission paths included in the image standard transmission path group .","If the image standard signal receiving unit  receives an image signal, a visible light signal, and a visible light synchronization signal, the image standard signal receiving unit  outputs the visible light synchronization signal to the visible light signal sending unit , before interpreting the image signal and the visible light signal. This prevents a delay in outputting a visible light synchronization signal, due to interpreting an image signal and a visible light signal.",{"@attributes":{"id":"p-2073","num":"2072"},"figref":"FIG. 333","b":["1254","1271"]},"The image standard signal sending unit  sends an image signal, a visible light signal, and a visible light synchronization signal to the image standard signal receiving unit , using the plurality of image standard transmission paths included in the image standard transmission path group . At this time, the image standard signal sending unit  sends an image signal and a visible light signal to the image standard signal receiving unit , via image standard transmission paths used in the image standard, among the plurality of image standard transmission paths included in the image standard transmission path group . The image standard signal sending unit  sends a visible light synchronization signal to the image standard signal receiving unit , via an image standard transmission path which is not used in the image standard, among the plurality of image standard transmission paths included in the image standard transmission path group .",{"@attributes":{"id":"p-2075","num":"2074"},"figref":"FIG. 334","b":["1254","1271"]},"The image standard signal sending unit  sends an image signal and a visible light signal to the image standard signal receiving unit  via image standard transmission paths used in the image standard, as with the description given above, whereas the image standard signal sending unit  may send a visible light synchronization signal to the image standard signal receiving unit  via an image standard transmission path for future extension. Note that the image standard transmission path for future extension is an image standard transmission path which is included for future extension in the standard.",{"@attributes":{"id":"p-2077","num":"2076"},"figref":"FIG. 335","b":["1254","1271"]},"The image standard signal sending unit  sends an image signal and a visible light signal to the image standard signal receiving unit  via image standard transmission paths used in the image standard, as with the description given above, whereas the image standard signal sending unit  may send a visible light synchronization signal to the image standard signal receiving unit  via an image standard transmission path used for sending power which is to be consumed by the image display  (hereinafter, referred to as a power sending transmission path). In this manner, a visible light synchronization signal is sent together with power. Specifically, the image standard signal sending unit  superimposes a visible light synchronization signal on power, and sends the signal and power.",{"@attributes":{"id":"p-2079","num":"2078"},"figref":"FIGS. 336A and 336B"},"If no visible light synchronization signal is sent via the power sending transmission path, a voltage specified by the image standard is continuously applied to the power sending transmission path, as illustrated in , whereas if a visible light synchronization signal is sent via the power sending transmission path, a voltage of the visible light synchronization signal is superimposed on the voltage specified by the image standard in the power sending transmission path, as illustrated in . In this case, a visible light synchronization signal is superimposed on power such that the maximum voltage of the visible light synchronization signal is at or below the maximum rated voltage of an image standard transmission path, and the minimum voltage of the visible light synchronization signal is at or above the minimum rated voltage of an image standard transmission path. Furthermore, in this case, a visible light synchronization signal is superimposed on power such that the average of a voltage during a period when a visible light synchronization signal is superimposed on power is equivalent to the voltage specified by the image standard.",{"@attributes":{"id":"p-2081","num":"2080"},"figref":"FIG. 337","b":["1254","1271"]},"The image standard signal sending unit  sends an image signal and a visible light signal to the image standard signal receiving unit  via image standard transmission paths used in the image standard, as with the description given above, whereas the image standard signal sending unit  may send a visible light synchronization signal to the image standard signal receiving unit  via an image standard transmission path used in the image standard to send a vertical synchronization signal. A vertical synchronization signal is a signal for vertically synchronizing an image. The image standard signal sending unit  sends a visible light synchronization signal which serves as a vertical synchronization signal.",{"@attributes":{"id":"p-2083","num":"2082"},"figref":"FIG. 338","b":["1254","1271"]},"The image standard signal sending unit  sends an image signal and a visible light signal to the image standard signal receiving unit , via image standard transmission paths used in the image standard, as with the description given above, whereas the image standard signal sending unit  may send a visible light synchronization signal to the image standard signal receiving unit  via an image standard transmission path (hereinafter, referred to as a combined transmission path) used in the image standard to send an image signal, a control signal, and a vertical synchronization signal. The image standard signal sending unit  sends a visible light synchronization signal which serves as a vertical synchronization signal.","In this case, the image standard signal receiving unit  extracts a visible light synchronization signal from signals sent and received via the combined transmission path, and outputs the visible light synchronization signal to the visible light signal sending unit , before interpreting an image signal and a control signal.","In this manner, in this embodiment, a visible light synchronization signal is extracted before interpreting an image signal and a visible light signal, thus preventing a delay in outputting the visible light synchronization signal due to interpreting the image signal and the visible light signal.","The present disclosure relates to a display device that outputs visible light communication signals and a method of controlling such a display device.","For example, Japanese Unexamined Patent Application Publications No. 2007-43706 and No. 2009-212768 disclose techniques related to visual light communication. Japanese Unexamined Patent Application Publications No. 2007-43706 and No. 2009-212768 disclose communication techniques of superimposing communication information via visible light during normal video display in a video display device including a display or projector, for example.","The present disclosure provides a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals, and a method for controlling such a display device.","The display device according to the present disclosure outputs visible light communication signals, and includes: a display panel including a display screen on which an image is displayed; a display controller that causes the display panel to display an image on the display screen of the display panel based on an image signal; a backlight having a light emission surface that illuminates the display screen of the display panel from behind; a signal processor that superimposes the visible light communication signals on backlight control signals generated based on the image signal; and a backlight controller that divides the light emission surface of the backlight into regions and establishes an interval during which control of light emission in each of the regions and control for turning off the backlight in each of the regions a different time are performed based on the backlight control signals outputted by the signal processor. When superimposing the visible light communication signals on the backlight control signals, the signal processor does not superimpose a visible light communication signal in an interval indicating an OFF state of the backlight in the backlight control signals.","The display device according to the present disclosure is capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals.","(Underlying Knowledge Forming Basis of the Present Disclosure)","In recent years, in fields related to display devices, and in particular liquid crystal displays and projectors that use liquid crystals, a technique known as backlight scanning has been employed in an effort to improve image quality. Backlight scanning is a backlight control method which improves the slow reaction speed of the liquid crystals and improves motion blur that can be seen in sample-and-hold displays. In this method, the display screen is divided into regions (backlight regions), and light emission of the backlight is controlled such that the regions sequentially emit light at fixed intervals. More specifically, backlight scanning is a control method that establishes backlight OFF intervals, and the timing for these cyclic OFF intervals (blanking intervals) for each of the backlight regions are set to be different from one another. Generally, control is often performed to synchronize the timing of the blanking interval with the timing of the scanning.","However, as disclosed in Japanese Unexamined Patent Application Publication No. 2007-43706, in visible light communication, visible light communication signals are superimposed by strobing the backlight. As such, transmission of visible light communication signals is not possible during the backlight OFF interval. Moreover, this OFF interval can cause signal transmission failure. As such, the only choice is to stop the scanning of the backlight and transmit the visible light communication signals, which sacrifices image quality.","In light of this, the present disclosure provides a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals.","Hereinafter, an embodiment is described in detail with reference to the drawings as necessary. It should be noted that unnecessarily detailed descriptions may be omitted below. For example, detailed descriptions about already well-known matters and overlapping descriptions for substantially the same configurations may be omitted. Such descriptions are omitted to prevent the descriptions below from being unnecessarily redundant and help a person skilled in the art to understand the present disclosure easily.","It should be noted that the Applicant provides the accompanying drawings and the following description to assist those skilled in the art in fully understanding the present disclosure, and does not intend to limit the scope of the claims.","Hereinafter, Embodiment 18 will be described with reference to  through .","[1. Configuration]",{"@attributes":{"id":"p-2098","num":"2097"},"figref":"FIG. 339"},"[1.1 Visible Light Communication System Configuration]","The visible light communication system  illustrated in  includes a display device  and a smartphone .","The display device  is, for example, a television, and can display an image on a display screen . The display device  can also superimpose visible light communication signals onto the display screen .","The smartphone  is one example of an electronic device that receives visible light communication signals, and can receive the visible light communication signals transmitted from the display device . With this, the user of the smartphone  can obtain, for example, information on the image being displayed on the display device .","Note that in this embodiment, the display device  is merely exemplified as a monitor that displays an image, such as a television or display; the display device  is not limited to this example. The display device  may be a device that projects an image such as a projector. Similarly, the smartphone  is merely given as an example of an electronic device that receives visible light communication signals output from the display device ; any device that can receive visible light communication signals is acceptable and is not limited to a smartphone. For example, the electronic device may be a receiver that conforms to the JEITA CP-1222 standard. Moreover, the electronic device is not limited to a smartphone and may be a general handheld device. Moreover, the electronic device may obtain information by receiving visible light communication signal and decoding the received visible light communication signals.","The information transmission method used to transmit the visible light communication signals may be a method that conforms to the JEITA CP-1223 standard currently being developed as an international standard, or the IEEE P802.15 standard already instituted. Stated differently, the electronic device may use a receiver that conforms to one or more of these standards.","[1.2 Configuration of Display Device]",{"@attributes":{"id":"p-2104","num":"2103"},"figref":"FIG. 340"},"The display device  illustrated in  is a display device that outputs visible light communication signals, and includes a first input unit , a first processor , a first controller , a display panel , a second input unit , a second processor , a second controller , and a backlight .","The first input unit  receives an input of an image signal related to an image displayed on the display panel . The image signal is input into the first input unit  via, for example, an antenna cable, image signal line, composite cable, HDMI\u00ae cable, PJLink cable, or LAN cable, from, for example, a broadcast wave, a video recording and playback device, or PC. Here, the image signal may be stored on various kinds of recording mediums using a video recording device or playback device, for example.","The first processor  receives an input of the image signal from the first input unit . The first processor  performs general image processing, such as image enhancement, on the image signal. The first processor  transmits the image-processed image signal to the first controller . The first processor  also transmits information indicating the size, display timing, brightness, etc., of the subframes and image signal to the first controller  and the second processor .","Note that the first processor  may output a duty ratio calculated based on the image signal and the backlight control signal (hereinafter also referred to as BL control signal) for each region to the second processing unit.","The display panel  is, for example, a liquid crystal display panel, and includes the display screen  that displays an image.","The first controller  is one example of the display controller. The first controller  causes the display panel  to display an image on the display screen  of the display panel  based on an image signal. In Embodiment 1, the first controller  causes the display panel  to display an image based on an image signal transmitted from the first processor . More specifically, the first controller  controls the aperture of the liquid crystals of the display panel  based on an image signal transmitted from the first processor .","The second input unit  receives an input of a signal used in visible light communication (hereinafter also referred to as a visible light communication signal), and transmits the input visible light communication signal to the second processor . In this embodiment, a visible light communication signal generated on, for example, a PC, is input into the second input unit  via a proprietary cable or a LAN cable, for example.","Note that the visible light communication signal may be superimposed on part of a radio wave and input into the second input unit  via an antenna cable. The visible light communication signal may also be recorded on a variety of different types of recordable mediums via a video recording device or playback device and input into the second input unit . For example, a visible light communication signal recorded by a video recording device may be placed on a portion of a line of a HDMI\u00ae cable or a PJLink cable, for example, and input into the second input unit . Moreover, a visible light communication signal generated on a separate PC may be superimposed on an image signal, and the image signal may be input into the second input unit  from a video recording device or playback device.","Note that other than receiving inputs from external devices, the second input unit  may obtain the visible light communication signal by reading server information via the internet using information internally stored in the display device, such as the ID of the display device.","The second processor  generates an encoded signal by encoding the visible light communication signal input via the second input unit , and calculates a duty based on at least one of the image signal and the visible light communication signal. The second processor  superimposes the encoded signal onto the BL control signal input from the first processor .","In this embodiment, the encoded signal is described as a signal having a given proportion of ON intervals and OFF intervals. Moreover, the encoded signal is described as a signal encoded using an inverted-4 PPM method. Note that the encoded signal may be encoded using Manchester encoding, for example. Moreover, the modulated signal is described as having a 100% ON\/OFF modulation percentage, but the modulated signal is not limited to this example. For example, when high\/low modulation is used rather than 100% modulation percentage, ON\/OFF in the following description may be read as high\/low and implemented. Regarding the duty of the visible light communication signal as well, in addition to the ON interval being a value determined by a standard for the whole interval during which the signal is transmitted, it may be read in concert with (high level\u00d7high interval+low level\u00d7low interval)\/(signal transmission interval\u00d7high level).","More specifically, the second processor  is one example of the signal processor, and superimposes the visible light communication signals on the backlight control signals generated based on the image signals. However, when the second processor  superimposes the visible light communication signals on the backlight control signals, the second processor  does not superimpose the visible light communication signals in intervals indicating an OFF state of the backlight in the backlight control signals. Note that the encoded visible light communication signal (encoded signal) may also be referred to simply as the visible light communication signal.","The second controller  is one example of the backlight controller. The second controller  divides the light emission surface of the backlight  into regions and, based on the backlight control signal (BL control signal) outputted by the second processor , establishes an interval during which control of light emission in each of the regions and control for turning off each of the regions a different time are performed. In this embodiment, the second controller  controls the brightness of and timing for the backlight  based on the backlight control signal (BL control signal) transmitted from the second processor .","The backlight  emits light from behind the display panel . More specifically, the backlight  has a light emission surface that emits light from behind the display screen  of the display panel . This allows the viewer to view an image displayed on the display panel .","In this embodiment, the light emission surface of the backlight  is divided into a plurality of regions, and the light emission of each region is sequentially controlled to scan the backlight. Note that the regions of the light emission surface of the backlight  correspond to regions of the display screen .","[2. Display Device Operations]","Next, operations performed by the display device  having the above configuration will be described.","The display device  sequentially scans the backlight across the entire screen of the display panel  by sequentially turning off the backlight in conjunction with writing of the image signal.","Typically, with liquid crystal display panels, the phase change of the liquid crystals is slow, and even if image signals are switched to indicate different gradations, switching between the signals takes time. Thus, by temporarily turning off the backlight of the display panel to scan the backlight, video characteristics can be improved, such as bleeding resulting from video being displayed while switching the signals. However, scanning speed for switching continues to improve year by year; typical scanning speed of 60 frames per second has improved to where double or four times that scanning speed is possible. When scanning at high speeds, more fluid video characteristics can be achieved by interpolating frames between normal frames to change the images in more gradual steps.","For this reason, backlight scanning in which the backlight is turned off while scanning the backlight is significantly important to improving video characteristics, and not superimposing the visible light communication signal during the OFF intervals associated with backlight scanning is better in terms of video characteristics.","For the above reasons, in the display device , visible light communication signals are not output during the OFF intervals (hereinafter also referred to as blanking intervals) associated with backlight scanning.","Hereinafter a method for (operations for) receiving visible light communication signals at a high success rate with a receiver such as the smartphone  even when the display device  does not output visible light communication signals during the blanking intervals of the backlight control signals (BL control signals) will be described.","[2.1.1 One Example of Operations Performed by Second Processor]",{"@attributes":{"id":"p-2126","num":"2125"},"figref":["FIG. 341A","FIG. 341B"]},{"@attributes":{"id":"p-2127","num":"2126"},"figref":["FIG. 341A","FIG. 341B"],"b":["1410","1490"]},"The encoded signal illustrated in  is superimposed on the BL control signals A through H at different phases, and when out of phase encoded signals are mixed within the reception range of the receiver, an error (visible light communication signal reception error) occurs when the receiver decodes the encoded signals.","Therefore, in this example, in a given region of the display region, the encoded signals (visible light communication signals) are superimposed in phase, as illustrated in .","Here, \u201cin phase\u201d is exemplified as meaning the synchronization of the rise timing, but \u201cin phase\u201d is not limited to this example. Any point from a state before the start of the rise to a state at which the rise ends may determined as the rise time. Moreover, since there is a delay time along the control signal voltage, for example, in synchronization does not mean that the timings simply match; \u201cin phase\u201d also includes instances where a given delay time or a delay time within a given period exist. The same applies to the following embodiments (Embodiments 18 to 23).","Here, since the backlight sequentially turns off with each region in the case of sequential scanning, it is difficult to superimpose the encoded signals without including the OFF intervals (blanking intervals) at all. Thus, in this example, in a specific region among regions into which the display region is divided (hereinafter the specific region is also referred to as the reference region), the timing at which the encoded signal is superimposed is synchronized with the end of the OFF interval (the blanking interval). Note that in regions other than the specific region (the reference region), encoded signals are superimposed in phase with the encoded signal of the reference region as well, but the encoded signals are not superimposed during the OFF intervals (the blanking intervals), which are the intervals during which the backlight is turned off.","In the example illustrated in , the second processor  sets region C into which BL control signal C is inputted as the reference region, and the encoded signals are superimposed on the BL control signals A through H in phase after adjusting the superimposition timing of the encoded signals to synchronize the head (rise timing) P of the encoded signal with the rise timing P of BL control signal C in . Then, upon superimposing the encoded signals on the BL control signals A through H, the second processor  superimposes the encoded signals during the ON intervals of the BL control signal but does not superimpose the encoded signals during the OFF intervals.","Note that the reference region is not limited to region C. Hereinafter, examples will be given of regions that can be set as the reference region in this example. For example, the reference region may be the brightest region among regions into which the display region is divided (in other words, the region whose blanking interval is the shortest or the region where the light transmissivity of the display panel is the greatest).","Note that even when the brightest region is set as the reference region, when the position of the reference region is changed every frame, further provision is required. This is because the position of the encoded signal superimposed every frame changes, and the balance of the video drastically changes every frame, leading to flickering. Moreover, when provisions such as cutting off one of overlapping encoded signals midway when intervals of encoded signals to be superimposed overlap between regions or not superimposing during a first predetermined period are not implemented, reception errors at the receiver may arise. Thus, when changing the position of the reference region every frame, at least for one frame interval, an interval where the encoded signal is not superimposed may be established.","Moreover, when a bright region is set as the reference region, the bright region may be determined with reference to transition of the center of the brightness of the image based on the image signal by the first processor , rather than the bright region bring determined with reference to the brightness of the display region in every frame.","Moreover, when there is no change in brightness of the entire display region above a certain level, such as when the scene does not switch for a given period of time, a region including the brightest location in the display region based on the average of the image signal during the given period of time may be set as the reference region. Note that the reference region may be determined in advance.","[2.1.2. Advantageous Effects, Etc.]","As described above, the display device () according this example outputs visible light communication signals, and includes: a display panel () including a display screen on which an image is displayed; a display controller (the first controller ) that causes the display panel to display an image on the display screen of the display panel based on an image signal; a backlight () having a light emission surface that illuminates the display screen of the display panel () from behind; a signal processor (the second processor ) that superimposes the visible light communication signals on backlight control signals generated based on the image signal; and a backlight controller (the second controller ) that divides the light emission surface of the backlight () into regions and establishes an interval during which control of light emission in each of the regions and control for turning off the backlight in each of the regions a different time are performed based on the backlight control signals outputted by the signal processor (the second processor ). When superimposing the visible light communication signals on the backlight control signals, the signal processor (the second processor ) does not superimpose a visible light communication signal in intervals indicating an OFF state of the backlight () in the backlight control signals.","This configuration provides a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals.","Moreover, the signal processor (the second processor ) may superimpose the visible light communication signals on the backlight control signals corresponding to the regions in a one-to-one manner, and the visible light communication signals superimposed on the backlight control signals corresponding to the regions may be in phase with one another.","With this, reception error of the visible light communication signals can be inhibited.","Here, for example, based on the backlight control signal corresponding to a predetermined region among the regions, the signal processor may match phases of the visible light communication signals superimposed on the backlight control signals corresponding to the regions.","With this, intervals of visible light communication signals not superimposed during blanking intervals can be minimized.","Moreover, the predetermined region may be the brightest region among the regions, and may be a region corresponding to an edge portion of the display screen among the regions.","With this, the effect of the decrease in brightness due to the turning off of the backlight due to the visible light communication signal can be inhibited.","Hereinafter an example will be given where the length of the blanking interval is the same for each region in the display region.","The total time the backlight  is turned off (the total OFF interval) is calculated by adding the blanking interval, which is the OFF interval of the BL control signal, and the OFF interval of the encoded signal.","As such, even if the encoded signal is superimposed right after the end of the blanking interval in the reference region and the encoded signal is completely included from that blanking interval to the next blanking interval, the interval during which the backlight  is turned off is extended by the length of the OFF interval of the encoded signal superimposed on the BL control signal. In other words, when the encoded signal is superimposed, the reference region is darker than before the encoded signal is superimposed.","However, in a region other than the reference region, for example, since the encoded signal is not superimposed during the blanking interval, this overlaps with the blanking interval, and the length of time the backlight  is turned off is shorter than the reference region by the length of the OFF interval among the encoded signal intervals during which the encoded signals are not superimposed. In other words, in a region other than the reference region, for example, if the encoded signal is superimposed, there are instances where that region will become brighter than the reference region.","In order to improve this, two methods for establishing an adjustment interval during which the backlight  is either turned on or turned off are conceivable. The first method is matching the total OFF intervals of the other regions to the total OFF interval of the reference region in order to make the total OFF interval of the reference region the longest. The second method is matching the total OFF intervals for all regions to a total OFF interval determined based on the original image signal.","[2.2.1 One Example of Operations Performed by Second Processor in Accordance with First Method]","First, operations performed by the second processor  in accordance with the first method will be described with reference to  and .",{"@attributes":{"id":"p-2151","num":"2150"},"figref":["FIG. 342","FIG. 343","FIG. 342","FIG. 342","FIG. 343","FIG. 343"]},"More specifically,  illustrates an example of when the second processor  superimposes the encoded signal on the BL control signal after adjusting the head (rise timing) of the encoded signal to the rise timing of the BL control signal of the reference region (time t).  illustrates an example of when the second processor  superimposes, on the BL control signal corresponding to a different region, an encoded signal in phase with the encoded signal superimposed on the BL control signal corresponding to the reference region.","In other words,  and  illustrate an example of when the second processor  superimposes, on the BL control signals corresponding to the regions, encoded signals in phase with the other regions at the same time as the blanking interval of the reference region ends. Note that not superimposing the encoded signal during the blanking interval is a priority for the blanking intervals for each of the regions, similar to Example 1.","As illustrated in (b) in , in the reference region, other than the blanking interval B from, for example, time t to time t, encoded signal OFF interval T, which is the total OFF interval of the encoded signal during the encoded signal interval C from, for example, time t to time t, is also present.","Thus, in the reference region illustrated in (b) in , when the duty of the encoded signal is used, the total OFF interval of the encoded signal in one frame from, for example, time t to time t (the encoded signal OFF interval) can be represented as encoded signal OFF interval T=encoded signal interval C\u00d7(1\u2212Duty).","As illustrated in (b) in , in the reference region, since there is generally no interval in which the encoded signal interval C and the blanking interval B overlap, total OFF interval T for one frame=blanking interval B+encoded signal OFF interval T. In other words, the total OFF interval in the reference region longer than the other regions.","However, in a region other than the reference region, there is a chance that the encoded signal interval and the blanking interval will overlap. As described above, with respect to the blanking interval, the BL control signal takes priority over the encoded signal, so the encoded signal is not superimposed.","As such, as is illustrated in (b) in , in a region other than the reference region, in the encoded signal interval C between, for example, time t and time t, the total OFF interval is shorter than that of the reference region by the length of the encoded signal OFF interval in the encoded signal interval C that overlaps with the blanking interval B between time t and time t.","Here, when the interval of the encoded signal that overlaps with the blanking interval is B, the total encoded signal OFF interval in the encoded signal interval C (the encoded signal OFF interval) can be represented as (encoded signal OFF interval)=(encoded signal interval C\u2212blanking interval B)\u00d7(1\u2212Duty).","As described above, when the total OFF interval for each region of the screen (display region) is different, the brightness of the regions is uneven, which reduces image quality.","Therefore, by operating according to the first method where an adjustment interval during which the backlight  is either turned on or turned off is established, the second processor  can match the total OFF intervals for the regions in the screen.","More specifically, the second processor  matches the total OFF interval for the regions other than the reference region with the total OFF interval of the reference region in accordance with the first method, and establishes an adjustment interval for adjusting the difference in the regions other than the reference region with the total OFF interval per frame in the reference region. Note that as described above, in this example, it is presumed that the length of the blanking interval for each region is the same.","Here, in (b) in , the adjustment interval from time t to time t is represented as blanking interval B\u00d7(1\u2212Duty). In other words, the adjustment interval in each region other than the reference region can be calculated from the blanking interval, encoded signal interval, and encoded signal phase of each region including the reference region. In (b) in , the adjustment interval is exemplified as being located in one frame between one frame from time t to time t.","In this way, the display device  according to this example causes the second processor  to establish an adjustment interval according to the first method. With this, the display device  can output encoded signals without greatly altering image quality, although the brightness of the screen (display region) as a whole decreases by a certain amount due to the superimposition of the encoded signals on the BL control signals.","Note that the second processor  establishing the adjustment interval directly after the encoded signal interval is preferred because the adjustment interval can be stably located as close as possible to the blanking interval, during which change in phase of the liquid crystals of the display panel  is great, but this is merely an example to which the placement of the adjustment interval should not be limited. The second processor  may establish the adjustment interval up to the time when the next encoded signal is to be superimposed.","[2.2.2 One Example of Operations Performed by Second Processor in Accordance with Second Method]","Next, operations performed by the second processor  in accordance with the second method will be described.","The adjustment interval during which the backlight  is either turned on or off to adjust the total OFF interval generally can be defined as follows. When the original OFF interval of the backlight  based on the image signal (the blanking interval and the black video interval) is T, the total OFF interval of the encoded signal in an encoded signal interval not overlapping with the blanking interval among encoded signal intervals is T, and the blanking interval after superimposition of the visible light communication signal is T, the adjustment interval can be represented as T-T-T. Note that, as previously described, the adjustment interval is preferably located as close as possible to the blanking interval.","For example, in the reference region, T can be calculated by first summing the totals of encoded signal OFF intervals in the encoded signal interval and then subtracting the totals of OFF intervals in the portion of the encoded signal overlapping the blanking interval.","Hereinafter, operations performed by the second processor  in accordance with the second method will be described in detail with reference to  through .",{"@attributes":{"id":"p-2170","num":"2169"},"figref":["FIG. 344A","FIG. 345D"]},"First, with reference to  through , operations performed by the second processor  with respect to establishing an adjustment interval according to the second method when the encoded signal interval and the blanking interval do not overlap will be described.","In  through , the top half, as indicated by (a), illustrates the BL control signal before superimposition of the encoded signal, and the bottom half, as indicated by (b) through (e), indicates the (i) BL control signal after superimposition of the encoded signal and (ii) the BL control signal adjusted in accordance with the second method. In these figures, the blanking interval is indicated as B and the encoded signal interval is indicated as C.","The method of adjusting the BL control signal superimposed with the encoded signal in accordance with the second method is separated into four different cases illustrated in  through  based on the relationship between (i) a sum (temporal sum) of the adjustment interval, the encoded signal interval, and the blanking interval and (ii) whether the adjustment interval is positive or negative. Hereinafter, each case will be described.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval do not Overlap (Case 1)]",{"@attributes":{"id":"p-2174","num":"2173"},"figref":"FIG. 344A"},"As illustrated in the top half of (b) in , part of the adjustment interval starts at the end time P of blanking interval B and ends at the start time P of the encoded signal interval C, and the remaining part of the adjustment interval is located after the encoded signal interval, preferably directly after the encoded signal interval (at time P).","As a result of the second processor  establishing the adjustment interval indicated in the top half of (b) in , the BL control signal superimposed with the encoded signal is adjusted, as indicated in the bottom half of (b) in .","In this way, the second controller  turns off the backlight  even after the blanking interval B until before the start of the encoded signal interval C in accordance with the adjusted BL control signal, and further turns off the backlight  until an interval from the adjustment interval minus the interval from P to P, during the encoded signal interval C and after the end of the encoded signal interval C.","Note that when the adjustment interval is shorter than the interval from P to P, the adjustment interval may be established between P and P only. Moreover, when P=P, the entire adjustment interval may be established after the end of the encoded signal interval C.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval do not Overlap (Case 2)]",{"@attributes":{"id":"p-2179","num":"2178"},"figref":"FIG. 344A"},"As illustrated in the top half of (c) in , part of the adjustment interval starts at the end time P of blanking interval B and ends at the start time P of the encoded signal interval C, and the remaining part of the adjustment interval goes back from the end time P of one frame.","As a result of the second processor  establishing the adjustment interval indicated in the top half of (c) in , the BL control signal superimposed with the encoded signal is adjusted, as indicated in the bottom half of (c) in .","In this way, the second controller  turns off the backlight  after the blanking interval B until the start time P of the encoded signal interval C in accordance with the adjusted BL control signal, and turns off the backlight  from time P before the end of the encoded signal interval C until time P. In other words, during the interval from time P, which overlaps with the remaining adjustment interval and the encoded signal interval C, to the end time P of encoded signal interval C, the encoded signal is not superimposed on the adjusted BL control signal (or the signal is set to OFF) so as not to transmit the encoded signal.","Note that when P=P (i.e., they are the same point in time), the entire adjustment interval may be established after the encoded signal interval.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval do not Overlap (Case 3)]",{"@attributes":{"id":"p-2184","num":"2183"},"figref":"FIG. 344C","b":"190"},"As illustrated in the top half of (d) in , the adjustment interval is located from the end time P of the blanking interval B counting back by an amount of time corresponding to the absolute value of the adjustment interval (i.e., the adjustment interval is between time P and time P).","As a result of the second processor  establishing the adjustment interval indicated in the top half of (d) in , the BL control signal superimposed with the encoded signal is adjusted, as indicated in the bottom half of (d) in .","In this way, the second controller  turns on the backlight  during the interval from time P during the blanking interval B until time P, based on the adjusted BL control signal.","Moreover, when P=P, the entire adjustment interval may be established after the encoded signal interval C. Moreover, when the adjustment interval is longer than the blanking interval, taking into consideration the duty cycle of the encoded signal, the OFF interval may be set counting back from the end time of the encoded signal interval C until an amount of on-time required to supply the deficiency can be secured, without superimposing the encoded signal.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval do not Overlap (Case 4)]",{"@attributes":{"id":"p-2189","num":"2188"},"figref":"FIG. 344D"},"As illustrated in the top half of (e) in , the adjustment interval is located from the end time P of the blanking interval B counting back by an amount of time corresponding to the absolute value of the adjustment interval (i.e., the adjustment interval is between time P and time P). With this, the backlight  is turned on during the interval from time P to time P in the blanking interval B.","Note that regardless of the fact that the blanking interval and the encoded signal interval do not overlap and that the adjustment interval is negative, there are instance where the absolute value of the adjustment interval may be longer than the blanking interval. In this case, when the entire adjustment interval is located based on time P at the end of the blanking interval B, time P is equal to or ahead of time P, whereby the blanking interval is no longer present. When not all are to be turned on during the blanking interval and still some regions require the backlight  to be turned on (some regions are required to be brightened), the backlight may be turned on during the OFF interval of the encoded signal of the encoded signal interval as the interval remaining after excluding the blanking interval portion of the adjustment interval. In other words, the remaining adjustment interval may be located from time P counting back (until time P), and superimposition of the encoded signal may be skipped and turning-on of the backlight may be continued.","Here, time P needs to be determined because blanking interval B is equal to the total OFF interval during an interval obtained by subtracting the interval between time P and time P from the encoded signal interval C. More specifically, time P can be calculated based on the relationship: blanking interval B=(encoded signal interval C\u2212(time P\u2212time P))\u00d7(1\u2212Duty).","With this, the second processor  can adjust the BL control signal such that the second controller  causes the backlight  to continue being on from time P to the start of the next blanking interval in addition to during the blanking interval B.","Note that when P=P, the entire adjustment interval may be located after the encoded signal interval C.","Next, with reference to  through , operations performed by the second processor  with respect to establishing an adjustment interval according to the second method when the encoded signal interval and the blanking interval overlap will be described.","In  through , the top half, as indicated by (a), illustrates the BL control signal before superimposition of the encoded signal, and the bottom half, as indicated by (b) through (e), indicates the (i) BL control signal after superimposition of the encoded signal and (ii) the BL control signal adjusted in accordance with the second method. In these figures, the blanking interval is indicated as B, the encoded signal interval is indicated as C, and the interval from time Q to time Q is one frame.","The method of adjusting the BL control signal superimposed with the encoded signal in accordance with the second method is separated into four different cases illustrated in  through  based on the relationship between (i) a sum of the adjustment interval, the encoded signal interval, and the blanking interval and (ii) whether the adjustment interval is positive or negative. Hereinafter, each case will be described.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval Overlap (Case 1)]",{"@attributes":{"id":"p-2198","num":"2197"},"figref":"FIG. 345A"},"As indicated by the top half of (b) in , the adjustment interval is located based on the end time Q of the encoded signal interval C.","As a result of the second processor  establishing the adjustment interval indicated in the top half of (b) in , the BL control signal is adjusted so as to not be superimposed with the encoded signal during the interval from time Q to time Q, which is the adjustment interval, and the interval from time Q to time Q, which overlaps with the blanking interval B, as indicated in the bottom half of (b) in .","In this way, the second controller  turns off the backlight  during the interval from time Q to time Q, which overlaps with the blanking interval B, and during the interval from time Q to time Q in accordance with the adjusted BL control signal. Note that during the period from time Q to time Q, the backlight  is turned off and encoded signals are not transmitted.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval Overlap (Case 2)]",{"@attributes":{"id":"p-2202","num":"2201"},"figref":"FIG. 345B"},"As indicated in the top half of (c) in , based on the start time Q of the encoded signal for the next frame and counting backwards, the adjustment interval is located between time Q and time Q, which is the adjustment interval.","As a result of the second processor  establishing the adjustment interval indicated in the top half of (c) in , the BL control signal is adjusted so as to not be superimposed with the encoded signal during the interval from time Q to time Q, which is the adjustment interval, and the interval from time Q to time Q, which overlaps with the blanking interval B, as indicated in the bottom half of (c) in .","In this way, the second controller  turns off the backlight  during the interval from time Q to time Q, which overlaps with the blanking interval B, and during the interval from time Q to time Q in accordance with the adjusted BL control signal. Note that during the period from time Q to time Q, the backlight  is turned off and encoded signals are not transmitted.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval Overlap (Case 3)]",{"@attributes":{"id":"p-2206","num":"2205"},"figref":"FIG. 345C"},"As illustrated in the top half of (d) in , the adjustment interval is located from the end time Q of the blanking interval B counting back by an amount of time corresponding to the absolute value of the adjustment interval.","As a result of the second processor  establishing the adjustment interval indicated in the top half of (d) in , the BL control signal is adjusted such that the backlight  turns on during the interval from time Q to time Q, which is the adjustment interval, and adjusted so as to not be superimposed with the encoded signal during the blanking interval B, as indicated in the bottom half of (d) in .","In this way, the second controller  turns on the backlight  during the interval from time Q until time Q, in accordance with the adjusted BL control signal.","Note that the encoded signal may be superimposed during the adjustment interval. In this case, the adjustment interval may be elongated by the total encoded signal OFF interval. Furthermore, when the adjustment interval is longer than the blanking interval, based on the duty cycle of the encoded signal, the deficient on-time during the adjustment interval can be supplemented by turning on the backlight  without superimposing the encoded signal during a predetermined period counting back from the end time of the encoded signal interval C.","[Adjustment Method for when Encoded Signal Interval and Blanking Interval Overlap (Case 4)]",{"@attributes":{"id":"p-2211","num":"2210"},"figref":"FIG. 345D"},"As illustrated in the top half of (e) in , the adjustment interval is located from the end time Q of the blanking interval B counting back by an amount of time corresponding to the absolute value of the adjustment interval until time Q.","With this, the backlight  is turned on during the interval from time Q to time Q overlapping with the blanking interval B.","Note that the adjustment interval may be elongated by the encoded signal total OFF interval, and the encoded signal may be superimposed during the adjustment interval.","Moreover, similar to (e) in , when the adjustment interval is substantially long and the absolute value thereof is greater than that of the blanking interval B, the backlight may be turned on during the OFF interval of the encoded signal of the encoded signal interval as the interval remaining after excluding the blanking interval B portion of the adjustment interval.","Here, time Q needs to be determined because the original blanking interval B is equal to the total OFF interval during an interval obtained by subtracting the interval between time Q and time Q from the encoded signal interval C. More specifically, time Q can be calculated based on the relationship: blanking interval B=(encoded signal interval C\u2212(time Q\u2212time Q))\u00d7(1\u2212Duty).","With this, the second processor  can adjust the BL control signal such that the second controller  causes the backlight  to continue being on from time Q to the start time Q of the next blanking interval in addition to during the blanking interval B.","[2.2.3. Advantageous Effects Etc.]","As described above, with this example, backlight control methods for improving video characteristics such as backlight scanning and transmission of visible light communication signals using the backlight can both be achieved by performing adjustment that equalizes the OFF intervals by the visual light communication encoded signals or reverts the OFF interval to that of the original image signal.","Here, for example, in the display device according to this example, when superimposing the visible light communication signals on the backlight control signals, if the regions include a region whose backlight control signal indicates an OFF state of the backlight in an interval that overlaps an interval of the visible light communication signal being superimposed, the signal processor (the second processor ) may establish a ON adjustment interval for the region with overlapping intervals and adjust ON\/OFF of the backlight control signal during the ON adjustment interval, the ON adjustment interval being for adjusting brightness of the region with overlapping intervals.","With this, by establishing the adjustment interval in a region in which the visible light communication signal interval and the backlight OFF interval overlap, when the visible light communication signals (encoded signals) are superimposed on the BL control signals, differences in brightness across the display region are less perceivable.","Note that in this example, the reference region is described as a \u201cbright\u201d region, but this may be interpreted as a region in which the aperture of the display panel  is set to a large value.","[2.3.1 One Example of Operations Performed by Second Processor in Accordance with Second Method]","In Example 2, the brightness of the display screen  (display region) of the display panel  is equalized by establishing an adjustment interval during which the backlight  is either turned on or off, but this is merely one example.","In this example, a method with which an adjustment interval is not established will be described with reference to .",{"@attributes":{"id":"p-2224","num":"2223"},"figref":["FIG. 346","FIG. 346"]},"As illustrated in , without establishing an adjustment interval, the duty cycle of the visible light communication signal for only the portion corresponding to the adjustment interval\u2014i.e., the high interval of the signal\u2014may be varied to adjust the brightness of the region.","More specifically, for example, when the adjustment interval in this example is positive\u2014i.e., when the adjustment turns off the backlight \u2014the high interval of the BL control signal may be shortened as illustrated in (b) in .","More specifically, for example, when the adjustment interval in Example 2 is negative\u2014i.e., when the adjustment turns on the backlight \u2014the high interval of the BL control signal may be lengthened as illustrated in (c) in .","Note that varying the duty cycle of the BL control signal for each region in the display region is also conceivable. In this case, in order to drive the BL control signals at a constant duty cycle in the screen, a mixture of the adjustment interval in Example 2 recalculated to include the duty cycle variation and the method of varying the high interval of the visible light communication signals according to this example may be used.","Furthermore, in the above description, a uniform brightness across the screen and prevention of a decrease in image quality are achieved by performing brightness control utilizing control (PWM (pulse width modification) control) of the high interval of the backlight , but this is merely an example. The second controller  that controls the backlight may approximate the brightness of the visible light communication regions to the brightness of the other regions by controlling the current supplied to the backlight  of each region. Furthermore, the brightness of the visible light communication regions may be approximated to the brightness of the other regions with a combination of the PWM control of the backlight  and the electrical current control.","[2.3.2. Advantageous Effects Etc.]","As described above, with this example, backlight control methods for improving video characteristics relating to backlight scanning and transmission of visible light communication signals using the backlight can both be achieved by performing adjustment that equalizes the OFF intervals by the visual light communication encoded signals or reverts the OFF interval to that of the original image signal.","Note that in this example, it is described that signal detection is performed only with rising signals, but this is merely an example. When the BL control signal maintains the position of the fall of the waveform and changes the position of the rise of the waveform, signal detection may be performed with a falling signal. In this example, the encoded signals are superimposed using the rise of the BL control signals as a reference, but the timing at which the encoded signals are superimposed may be based on other characteristics of the BL control signals such as the fall of the BL control signals, and may be based on a synchronization signal of the image signal itself. Moreover, a signal of the synchronization signal of the image delayed by a certain amount of time may be generated, and that signal may be used as a reference.","[3. Advantageous Effects Etc.]","This embodiment provides a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals.","In Embodiment 18, operations performed by the display device  when the encoded signal interval is shorter than the BL control signal ON interval are described. In this embodiment, operations performed by the display device  when the encoded signal interval is longer than the BL control signal ON interval will be described.","[1. Display Device Operations]","The following description will focus on operations performed by the second processor .",{"@attributes":{"id":"p-2235","num":"2234"},"figref":"FIG. 347"},"First, in step S, the second processor  re-encodes the visible light communication signal. More specifically, after the second processor  encodes the visible light communication signal, the second processor  generates (re-encodes) the encoded signal added with a header, for example. Moreover, the second processor  calculates the transmission time for the encoded signal based on the carrier frequency of the encoded signal.","Next, in step S, the second processor  determines whether the length of the encoded signal is greater than the BL control signal ON interval (the time during which the backlight is turned on, i.e., the ON duration).","More specifically, the second processor  compares the time during which the backlight  is turned on (the ON duration) based on the BL control signal duty cycle calculated by the first processor  against the transmission time for the encoded signal (encoded signal length). When the second processor  determines that the transmission time for the encoded signal is shorter (No in S), the process proceeds to step S, and when the second processor  determines that the transmission time for the encoded signal is longer (Yes in S), the process proceeds to step S.","Next, in step S, the second processor  determines whether to perform visible light communication. When the second processor  determines to perform visible light communication (Yes in S), the process proceeds to step S, and when the second processor  determines to not perform visible light communication (No in S), the process proceeds to step S.","Next, in step S, the second processor  re-encodes the visible light communication signal. More specifically, the second processor  generates the signal (re-encodes the visible light communication signal) such that the signal duty cycle of the header is for the most part OFF when the signal is encoded with a signal array such that it is inconceivable that the data in the header is the payload. Next, the second processor  advances the encoded signal transmission start time such that the timing of the rise of the BL control signal matches the final signal in the header (the signal indicating an ON state at the final edge of the header). Note that further detailed description is omitted.","Next, in step S, the second processor  determines whether the length of the encoded signal is greater than the BL control signal ON interval (the ON duration).","More specifically, the second processor  compares the ON duration of the backlight  based on the BL control signal duty cycle against the encoded signal transmission time. Then, when the second processor  determines that the encoded signal transmission time is shorter (No in S), the process proceeds to step S, and when the second processor  determines that the encoded signal transmission time is longer (Yes in S), the process proceeds to step S.","Here, in step S, the second processor  superimposes the encoded signal on the part of the BL control signal other than the blanking interval part (in other words, the ON interval of the BL control signal, outputs it to second controller , and ends the process.","On the other hand, in step S, the second processor  determines whether to divide the encoded signal. More specifically, the second processor  compares the transmission time of the re-encoded encoded signal against the ON duration of the backlight . Then, when the encoded signal transmission time is longer, the second processor  determines to divide the encoded signal (Yes in S) and proceeds to step S, and when the encoded signal transmission time is shorter, the second processor  determines to not divide the encoded signal (No in S) and proceeds to step S.","Next, in step S, the second processor  divides the encoded signal to achieve a data length that fits in the ON duration of the backlight. The second processor  then adjusts the encoded signal such that the encoded signal is superimposed on a part of the backlight control signal other than the blanking interval (i.e., the BL control signal ON interval), and ends the process.","Note that in step S, the second processor  does not transmit the encoded signal to the second controller . In other words, transmission of the visible light communication signal is cancelled.","[2. Operation Details]","Hereinafter, details regarding (i.e., a specific example of) operations performed by the display device  according to Embodiment 19 will be described with reference to  through  and .","[2.1. Specific Example 1]",{"@attributes":{"id":"p-2248","num":"2247"},"figref":["FIG. 348A","FIG. 348D"]},"In this embodiment, the second processor  encodes visible light communication signal using an encoding method such as 4 PPM or inverted-4 PPM. Significant variations in brightness due to the signal can be relatively mitigated by encoding using 4 PPM or inverted-4 PPM, making it possible to avoid instability in brightness. Note that the visible light communication signals may be encoded using, for example, Manchester encoding.","For example, as illustrated in , the encoded signal includes a header  and a payload  in which code, for example, is stored. The header  is assumed to include a signal array inconceivable for data signals. Here, when encoding using inverse-4 PPM, in principle, the high interval accounts for 75% of the signal interval. Moreover, ON states are generally input into the header in three continuous slots or more (three slots being the smallest unit of the encoded signal). The header also generally ends in an OFF state at the separation point of the header.",{"@attributes":{"id":"p-2251","num":"2250"},"figref":["FIG. 348B","FIG. 348B"]},"However, when the encoded signal interval is longer than the BL control signal ON interval, the entire encoded signal including the header cannot be included in the BL control signal ON interval, so the encoded signal is divided and included in the BL control signal ON interval, as described above with regard to step S.",{"@attributes":{"id":"p-2253","num":"2252"},"figref":"FIG. 348C","b":["1311","1311","1","1311","2","1310","92","92","1311","2","1311","1311","2","1311","1"]},"Note that when the encoded signal interval is longer than the BL control signal ON interval, only the header  may be superimposed in the BL control signal blanking interval and the payload  may be superimposed in the BL control signal ON interval, as illustrated in .","[2.2. Specific Example 2]","Next, an aspect different from that shown in  will be described. More specifically, a specific example where only the header of the encoded signal is superimposed in the BL control signal blanking interval if the encoded signal interval is longer than the BL control signal ON interval will be described.",{"@attributes":{"id":"p-2256","num":"2255"},"figref":"FIG. 349"},"(a) in  illustrates an encoded signal encoded using inverse-4PRM.","As illustrated in (b) in , the header from (a) in  may be re-encoded using 4 PPM instead of inverse-4 PPM. In this case, as illustrated in (b) in , the header has been changed from an ON state leading into an OFF state to an OFF state leading into an ON state.","Then, as illustrated in (c) in , the encoded signal illustrated in (b) in  is superimposed on the BL control signal. In the example illustrated in (c) in , an encoded signal including the header , which is a signal of an OFF state, the header , which is a signal of an ON state, and the payload  is superimposed on the BL control signal.","More specifically, the second processor  encodes the visible light communication signals to generate encoded signals and superimposes the encoded signals, as the visible light communication signals, on the backlight control signals, and when superimposing the encoded signals on the backlight control signals, if the regions include a region whose backlight control signal indicates an OFF state of the backlight in an interval that overlaps an interval of the encoded signal being superimposed, a header portion of the encoded signal is superimposed on the backlight control signal during the interval indicating an OFF state of the backlight , and a portion of the encoded signal other than the header portion is superimposed on the backlight control signal during an interval other than the interval indicating an OFF state of the backlight.","With this, even when the encoded signal interval is longer than the BL control signal ON interval, the payload of the encoded signal can be superimposed in the BL control signal ON interval.","In other words, for example, as illustrated in (c) in , by superimposing the header , which is a signal of an OFF state, during the BL control signal blanking interval, the encoding time can be reduced.","Note that when the adjustment interval described in Embodiment 18 is established, an interval during which the header  of the encoded signal illustrated in, for example,  is superimposed in the BL control signal blanking interval and the backlight is turned on during the blanking interval needs to be subtracted from the adjustment interval.","However, as illustrated in (c) in , for example, when the end time of the header  of the encoded signal (the point in time of the final ON state) is synchronized with the end time of the blanking interval and the phase is determined, the backlight is not turned on during the blanking interval, so there is no need to subtract from the adjustment interval.","[3. Advantageous Effects Etc.]","This embodiment provides a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals.","Note that in this embodiment, an example of using the header of the encoded signal encoded using a typical 4 PPM encoding method is given, but this is merely an example. For example, when the average duty cycle of the header of the encoded signal is high, a header in which the ON signals and OFF signals have been reversed may be superimposed in the blanking interval. In this case, as previously described, adjustment in which the decrease in the OFF interval of the blanking interval is inserted into the adjustment interval is preferable.","Moreover, when the entire encoded signal including the header can be superimposed in the BL control signal ON interval (i.e., in the ON duration of the backlight ), encoding may be performed such that the duty cycle of the header increases.","Moreover, even when the header is superimposed in the blanking interval, there are cases when the header will not fit in the blanking interval due to the length of the blanking interval. In this case, different types of headers may be prepared and used in accordance with the length of the blanking interval.","In this embodiment, a method of dividing the plurality of regions of the display region into groups and superimposing the encoded signal so that it is possible to superimpose the entire encoded signal interval of the encoded signal in the BL control signal ON interval will be described.","[1. Second Processor Operations]","Hereinafter, an example will be given of a method of determining a time at which to superimpose the encoded signal about the brightest region, based on region brightness.",{"@attributes":{"id":"p-2271","num":"2270"},"figref":"FIG. 350"},"First, in step S, the second processor  encodes the visible light communication signal. More specifically, after the second processor  encodes the visible light communication signal, the second processor  generates the encoded signal added with a header, for example. Moreover, the second processor  calculates the transmission time for the encoded signal based on the carrier frequency of the encoded signal.","Next, in step S, the second processor  divides the display region into a plurality of regions.","Next, in step S, the second processor  divides the display region into a plurality of regions. More specifically, the second processor  detects the brightness of each of the regions, and based on the result, selects the brightest region with respect to display. Here, brightness with respect to display means the brightest place with respect to signal level indicating light emission energy of the image, and not a place where the BL control signal duty cycle is large. Detection of the bright location will be described in detail later.","Next, in step S, the second processor  matches the phase of the encoded signal to that of the bright region with respect to display. More specifically, the second processor  superimposes an in-phase encoded signal on a BL control signal corresponding to all regions in time with the BL control signal of the brightest region, or corresponding to a portion of selected regions (a plurality of selected regions).","However, similar to other embodiments, the encoded signal is not superimposed in the blanking interval of the BL control signal. This is equivalent to operations of AND calculations for each BL control signal and the encoded signal. Note that step S through step S in  may be performed as necessary.","Next, in step S, the second processor  determines whether the encoded signal and the blanking interval overlap. More specifically, the second processor  determines whether part of the encoded signal interval and the blanking interval of the BL control signal overlap on a per region basis, and when the encoded signal interval and the blanking interval of the BL control signal do not overlap (Yes in S), the process proceeds to step S, where the second processor  superimposes the encoded signal on the BL control signal and ends the processing. When there is an overlapping portion (No in S), the process proceeds to S.","In step S, the second processor  determines whether to perform visible light communication. When the second processor  determines to not perform visible light communication (No in S), the process proceeds to step S. When the second processor  determines to perform visible light communication (Yes in S), the process proceeds to step S, where the second processor  adjusts the duty cycle such that the encoded signal is not transmitted, and ends the processing.","Next, in step S, the second processor  changes the phase of the encoded signal, and superimposes the encoded signal with the changed phase on the BL control signal.","Next, in step S, the second processor  determines whether the blanking interval overlaps a bright region or not. When the second processor  determines that the blanking interval does not overlap a bright region (No in S), the process proceeds to step S. When the second processor  determines that the blanking interval does overlap a bright region (Yes in S), the process proceeds to step S.","Next, in step S, the second processor  determines whether processing has been performed for all regions. When the second processor  determines that processing has not been performed for all regions (No in S), the process returns to step S. When the second processor  determines that processing has been performed for all regions (Yes in S), the process proceeds to step S.","Next, in step S, the second processor  determines whether there is a region for which no encoded signal has been superimposed. When the second processor  determines that there is no region for which no encoded signal has been superimposed (No in S), the process returns to step S. When the second processor  determines that there is a region for which no encoded signal has been superimposed (Yes in S), the process ends.","[2. Operation Details]","Next, details regarding (i.e., a specific example of) the display device  according to Embodiment 20 will be described with reference to  and .",{"@attributes":{"id":"p-2284","num":"2283"},"figref":["FIG. 351","FIG. 352","FIG. 351","FIG. 352"]},"For example, as illustrated in , the regions of the display region are divided into three groups. More specifically, region A, region B, and region C are divided into group G; region F, region G, and region H are divided into group G; and region D and region E are divided into group G. Then, as illustrated in , the encoded signals are superimposed in each group, at the same time in the same interval. For example, in group G, superimposition is performed using the brightest region\u2014region C\u2014as a reference, and in group G, superimposition is performed using the brightest region\u2014region E\u2014as a reference.","Note that, as illustrated in , the regions of the display region may be divided into two groups. In other words, region A, region B, region C, and region D may be divided into group G, and region E, region F, region G, and region H may be divided into group G. Then, the encoded signals are superimposed in each group, at the same time in the same interval.","[3. Advantageous Effects Etc.]","In this way, with the display device according to this embodiment, the signal processor (the second processor ) superimposes the visible light communication signals on the backlight control signals corresponding to groups of neighboring regions among the regions, the visible light communication signals superimposed on the backlight control signals in the same group are in phase with one another, and for each group, corresponding visible light communication signals are superimposed in entirety in an interval during which control of light emission of the backlight () based on the backlight control signals corresponding to the groups is performed.","With this, since the display device can superimpose the entirety of the encoded signals for the encoded signal intervals during the BL control signal ON intervals, reception error of output visible light communication signals can be reduced. Stated differently, since the visible light communication signals can be superimposed without loss of data in the BL control signal ON intervals, reception error of output visible light communication signals can be reduced.","Moreover, based on the backlight control signal corresponding to a predetermined region among the groups, the signal processor (the second processor ) may match phases of the visible light communication signals superimposed on the backlight control signals corresponding to the groups.","With this, for each of the selected groups, the display device can output the visible light communication signal with less loss of data.","Here, the predetermined region is the brightest region among the regions.","With this, the display device  can make the difference in brightness across the display region less perceivable.","Moreover, among the visible light communication signals superimposed on the backlight control signal phases corresponding to the groups, a visible light communication signal superimposed on a backlight control signal corresponding to a first group among the groups and a visible light communication signal superimposed on a backlight control signal corresponding to a second group among the groups are out of phase.","With this, for each of the selected groups, the display device  can output the visible light communication signal with less loss of data.","Note that there are instances where the regions cannot be divided into groups, as described above. In other words, there are instances where there are regions in which in-phase encoded signals cannot fit even when the regions are divided into groups. Operations performed in this case are described hereinafter.",{"@attributes":{"id":"p-2296","num":"2295"},"figref":["FIG. 353","FIG. 353"]},"For example, the example illustrated in  is a special example of  and . As illustrated in , after the regions have been divided into groups, when there is an in-phase encoded signal that cannot fit, transmission of the encoded signal may be cancelled.","More specifically, region A, region B, region C, and region D are divided into one group, and all other regions are divided into another group, and encoded signals in phase with one another are superimposed in region A, region B, region C, and region D. Here, in region D, the encoded signal is not superimposed in the overlapping interval of the encoded signal and the blanking interval. Furthermore, in the example illustrated in , encoded signals are not superimposed in the regions after region D (i.e., regions E through H).","Note that when there are regions in which in-phase encoded signals cannot fit even when the regions are divided into groups, a reference region may be designated, and the encoded signals may be superimposed only in regions surrounding the reference region (i.e., regions neighboring the reference region). In this case, the range of the superimposition of the encoded signals may be determined based on previously described flow charts, and may be limited to a predetermined range.","Moreover, the above-described adjustment interval may be established to prevent brightness difference between regions in which the encoded signals are superimposed and regions in which the encoded signals are not superimposed, as well as within the region in which the encoded signals are superimposed.","Note that in this embodiment, the encoded signals are superimposed using the rise of the BL control signals as a reference, but the timing at which the encoded signals are superimposed may be based on other characteristics of the BL control signals such as the fall of the BL control signals, and may be based on a synchronization signal of the image signal itself. Moreover, a signal of the synchronization signal of the image delayed by a certain amount of time may be generated, and that signal may be used as a reference.","In all regions of the display region, searching for intervals which are not blanking intervals is very difficult, and even if there is such an interval, it is significantly short. In the present disclosure, even when the encoded signals are superimposed on the BL control signal, by giving the blanking interval as much priority as possible, loss of image quality is avoided by controlling the turning on of the backlight during the blanking interval.","However, even if the blanking interval and the encoded signal interval do not overlap in a given region, most of the time there are other regions in which the blanking interval and the encoded signal interval do overlap.","As such, in this embodiment, a method is disclosed for avoiding overlapping of the blanking interval and the encoded signal interval in as many regions as possible among the regions of the display region. In other words, in this embodiment, the regions are divided into groups, and in each group, the encoded signals are superimposed at a given phase. With this, overlapping of the blanking interval and the encoded signal in the groups can be reduced.","Note that in this embodiment, examples are given in which the groups are divided into two or three groups, but these are merely examples.","Moreover, regarding the method of dividing the regions into groups, the regions into a predetermined number of groups, and how the phase will be shifted, for example, may be set in advance.","Moreover, in this embodiment, the regions are divided into groups in such a manner that the length of the encoded signal (i.e., the entirety of the encoded signal interval) can be superimposed based on the bright region, but this is merely an example. Since dividing the regions into groups based on this may yield a large number of groups, the number of groups may be limited. Regarding the division of the regions into groups, it is not necessarily required for the entirety of the encoded signal interval to be superimposable.","Moreover, the encoded signals superimposed in the regions in each group may be the same or may be different. Note that when the encoded signal obtained on the receiver side is composed of two or more signals mixed together, the chance of a false recognition or error increases. Here, \u201ctwo or more signals\u201d means when different encoded signals are received by the same receiver at the same time, two or more of the same encoded signals that are out of phase are received by the same receiver at the same time, or a combination thereof. With this, the chance of a false recognition or error can be reduced.","Moreover, division of groups based on some reference is not limited to the example described above; the second processor  may divide the groups based on a signal processing result based on the relationship between the image signal and the encoded signal.","Moreover, with a backlight that uses, for example, LEDs, since the light sources are substantially small (nearly spots of light), in order to light up the screen like in a LCD, a light guide plate or a diffuser panel is used to spread the region. As such, when controlling the LEDs in each region, adjacent regions are designed to overlap one another, and leak light of a certain amount of more is present.","Thus, with a backlight that uses LEDs, for example, even when dividing the regions into groups, since a different signal bleeds in as noise from leak light from at least adjacent regions, there is a need to avoid encoded signals of regions including adjacent blocks temporally overlapping. As such, for example, encoded signals are not transmitted in that frame at that location, or temporally consecutive or overlapping encoded signals in a different region may be transmitted.","When encoded signals are not transmitted in that frame at that location, a region from which to output the encoded signal may be determined on a per frame basis. Alternatively, an encoded signal from a specified location (linked to the image signal) may be preferentially transmitted.","Moreover, when transmission intervals of out of phase encoded signals from different regions overlap one another, this is acceptable so long as the regions are not continuous or a given interval is between them. When limiting the region and receiving the signals, this is acceptable because the signals are receivable. Note that the interval between out of phase regions must be determined based on the range of the light of the backlight leaking, and thus is a numerical value that changes depending on the characteristics of the display device used.","Moreover, each of the regions may be divided into blocks, and the above method may be applied to the blocks.","When using a light intensity sensor with a substantially fast response time, such as a photodiode, to receive the encoded signals, the phase difference between the image and the encoded signal is not very problematic.","However, when the encoded signal is imaged and obtained using an image sensor such as a smartphone or cellular phone camera or a digital still camera, due to a slight phase difference, the exposure timing and the ON-OFF edge of the signal or the timing of the start and\/or the end of sequential encoded signal intervals are off by a slight difference in time or occur at the same time, which can cause a useful signal to be unobtainable. In other words, since a typical imaging cycle for an image sensor is 30 FPS, when a 60 FPS image signal is synchronized with an encoded signal, for example, if the timing of the encoded signal cycle is not synchronized with the timing of the imaging by the image sensor, the timing of the imaging cycle and the encoded signal cycle will never match.","Thus, in this embodiment, in order to avoid the above, a method of shifting the phases of the encoded signals will be described.","[1. Display Device Operations]","The following description will focus on operations performed by the second processor .",{"@attributes":{"id":"p-2319","num":"2318"},"figref":"FIG. 354"},"First, in step S, the second processor  shifts the synchronization of the signal. More specifically, the second processor  shifts the synchronization of the encoded signal when the synchronization of the display panel  and the backlight  is not fixed. This is effective in increasing the probability of successful imaging by the smartphone .","Next, in step S, the second processor  calculates the AND of the BL control signal and the encoded signal from the duty cycle based on the image signal output by the first processor .","Next, in step S, the second processor  adjusts the duty cycle based on at least one of the image signal and the visible light communication signal.","More specifically, the second processor  finds out whether the encoded signal interval and the blanking interval overlap one another and establishes an adjustment interval accordingly, as described in Embodiment 18. When the duty cycle of the BL control signal for a frame is different from the duty cycle of the BL control signal based on the original image signal by an amount equivalent to the adjustment interval, the second processor  adjusts the duty cycle using, for example, an interval in which transmission of the encoded signal is stopped Here, for example, the second processor  adjusts the duty cycle by setting the interval during which the backlight  is turned off (the OFF interval of the BL control signal) to an interval other than the blanking interval. Then, the second processor  outputs to the second controller  the BL control signal superimposed with the encoded signal adjusted by establishment of the adjustment interval.","Note that when the phase relationship of the encoded signal and the image signal return to the original relationship after a certain interval, the signals may be corrected to a predetermined phase difference.","Furthermore, so long as the phase of the encoded signal and the phase of the image signal change temporally at a frequency other than the frequency of the image signal\u2014that is to say, one is not equal to approximately the integer multiple of the other\u2014there is no particular need to perform phase matching control. This is because, even if the two phases are not matched in particular, after a certain amount of time passes, the relationship between both phases will return to the original state, whereby at some point in time there will be a time period in which signal reception is difficult and a time period in which signal reception can be done without complication.",{"@attributes":{"id":"p-2326","num":"2325"},"figref":["FIG. 355A","FIG. 355B"]},"For example, in , using BL control signal X as a reference, it can be seen that the encoded signal based on the visible light communication signal and the BL control signal X become in-phase at a certain interval. Note in the figures, the diagonal line portions indicate intervals in which the encoded signal is actually transmitted, and as one example, the encoded signal is output at a longer cycle than the BL control signal and in shorter intervals than the BL control signal, but the relationship between signal lengths is such that one is longer than the other, as previously described. Moreover, it is not required that one of the actual transmission interval of the encoded signal and the length of the BL control signal is not long, but the encoded signal transmission interval is preferably shorter than the BL control signal. Here, the encoded signal repeats 7 times in the interval during which the BL control signal X repeats 12 times, and when the BL control signal is 60 fps, for example, both are in-phase at intervals of 0.2 seconds. However, as illustrated in , there is no particular correlation between the BL control signal X and the encoded signal, but the phase relationship between the start of the transmission interval of the encoded signal and the start of a BL control signal per frame changes. For example f is located in the first half of a BL control signal, f is located at the second half of a BL control signal, and f is located roughly in the middle of a BL control signal. However, although the two have a least common multiple and the phase relationship will not return to the original state, since the phases gradually shift, error due to imaging timing can be avoided at somewhere along the line. Moreover, although the encoded signal is cut-off midway in region X at points f, at which the encoded signal is transmitted in the interval falling on the segue of the BL control signal, and f, this is not a problem since the encoded signal can be transmitted in a different region without fail. The correlation between the video and the communication information is saved in a buffer, for example, and the previously written data is read, encoded as a communication signal and used. Moreover, when the time it takes for the phase relationship of both to return to the original relationship is substantially long (for example, a few seconds or longer), the phase relationship may be forcefully reset to the original relationship. For example, time is provided between the end of the encoded signal at f and f in . The phases of the BL control signal and the encoded signal may or may not be resynchronized during this time. Moreover, the cycle for synchronizing them can be every one second, for example, or can be skipped.","[2. Operation Details]","Next, details regarding (i.e., a specific example of) operations performed by the display device  according to Embodiment 20 will be described with reference to ,  and .",{"@attributes":{"id":"p-2329","num":"2328"},"figref":["FIG. 356A","FIG. 356B","FIG. 356C","FIG. 356A","FIG. 356B","FIG. 356C"]},"For example, as illustrated in , the synchronization of the encoded signal and the BL control signal is shifted. With this, on the reception side, such as at the smartphone , timing at which reception of the encoded signal is possible can be achieved with certainty. Here, the above-described adjustment interval may be calculated per phase difference in each frame and established.","Note that, for example, using region A as a reference, the time difference \u03b2 between the rise of the backlight control signal and the start V of the visible light communication signal may be set as the delay time in advance and superimposition may be performed, as illustrated in . Moreover, with regard to the time difference \u03b2 between the rise U and the start V of the visible light communication signal in the next frame, the same operations may be performed as with \u03b2 or different operations may be performed. Moreover, in the example illustrated in , \u03b2 represents a positive numerical value of delay (time), but may represent a negative value (time) as well.","Moreover, a frame where \u03b2=0 maybe mixed in. The region to be used as a reference may be any region, and may be selected based on the above described criteria. The reference time is described as being the rise of the backlight control signal, but the reference time may be the fall or any other waveform characteristic. Moreover, other than a characteristic portion of a backlight control signal in a predetermined region, a synchronization signal of the image signal itself may be used as a reference and, alternatively, a signal of the synchronization signal of the image delayed by a certain amount of time may be generated, and that signal may be used as a reference.","Moreover, in this embodiment, since the image signal and the encoded signal do not correspond on a one-to-one basis, various encoding data and imaging data may be buffered in advance in memory (not shown in the drawings) in the display device  before performing the above processing.","Note that the cycle (one frame length) of the image signal and the cycle on which the encoded signal is superimposed preferably have a least common multiple within one second, and further preferably within 0.5 seconds. Moreover, when these two cycles synchronize, tracking may be performed from the time of synchronization on a cycle equivalent to a least common multiple or an integer multiple, and the minute temporal offset (phase difference) resulting from the margin of error may be corrected.","Moreover, as described above, when the cycle and\/or frequency of the image signal and the cycle and\/or frequency of the encoded signal have a relationship that changes the temporal phase relationship thereof, even if each cycle does not include a least common multiple within one second, if the rate of change is fast\u2014for example, when the above change that repeats the same phase relationship can be achieved within one second\u2014there is no particular need to control the relationship between the two phases. Regarding the rate of change, a relationship such as the one described hereinafter is preferable, but is merely an example.","[3. Advantageous Effects Etc.]","As described above, in the display device according to this embodiment, the signal processor (the second processor ) temporally changes a delay time of encoding the visible light communication signals (encoded signals) on the backlight control signals corresponding to the regions, based on one backlight control signal corresponding to a given region among the regions.","With this, on the reception side, such as at the smartphone , timing at which reception of the encoded signal is possible can be achieved with certainty.","Note that the signal processor (the second processor ) may superimpose the visible light communication signals (encoded signals) on the backlight control signals on a different cycle than a cycle of the backlight control signals, and in each of the regions a relationship between a phase of the backlight control signal and a phase of the visible light communication signal may change with a change in frames.","Here, the cycle of the backlight control signals and the different cycle on which the visible light communication signals are superimposed may change temporally.","Moreover, the visible light communication signals to be superimposed on the backlight control signals may be in phase with one another across all regions in which the visible light communication signals are superimposed.","Moreover, a phase-shift cycle of the visible light communication signals superimposed on the backlight control signals corresponding to the regions and a cycle of one frame of the backlight control signals may have a least common multiple within one second, inclusive.","With this, on the reception side, such as at the smartphone , timing at which reception of the encoded signal is possible can be achieved with certainty in a relatively short period of time.","Moreover, the signal processor (the second processor ) may correct a start of a phase-shift cycle of the visible light communication signals (encoded signals) superimposed on the backlight control signals corresponding to the regions to a cycle of one frame of the backlight control signals on a cycle equivalent to a least common multiple or an integer multiple of the phase-shift cycle of the visible light communication signals (encoded signals) superimposed on the backlight control signals corresponding to the regions and the cycle of one frame of the backlight control signals.","With this, by correcting the phase shift, on the reception side, such as at the smartphone , timing at which reception of the encoded signal is possible can be kept from happening over a long period of time.","Here, assuming that the positional relationship and environment allows for reception of communication signals, so long as the time indicating the least common multiple of the above described two types of cycles is a value (time) sufficient for reception to be performed, the time must be no longer than a person trying to receive the data with the receiver is willing to hold the receiver and wait to receive the data. With typical NFC, for example, the amount of time a person is willing to hold the receiver and wait can be one second, and thus one second or less is preferable. Furthermore, as an amount of time that strain the psyche, 0.5 seconds can be used as a further preferable amount of time within which the least common multiple is included.","In Embodiments 18 through 21, cases in which each area is sequentially controlled at a normal scanning speed when displaying an image signal, but each area may be sequentially controlled at a sped-up speed scanning speed faster than the normal scanning speed when displaying an image signal.","In Embodiment 5, a case in which each area is sequentially controlled when a 2\u00d7 speed video signal is scanned at 4\u00d7 scanning speed will be given as an example. Hereinafter, the example will be based on the assumption that the blanking interval is 2\u00d7 speed.","[1. Display Device Operations]","The following description will focus on operations performed by the second processor .",{"@attributes":{"id":"p-2349","num":"2348"},"figref":["FIG. 357A","FIG. 357B","FIG. 357A","FIG. 357B"]},"For example, as illustrated in , there are no intervals across BL control signal A through BL control signal H in which the backlight is turned on at the same time. In other words, this indicates that the encoded signals cannot be superimposed for all regions of the display region at the same time.","Thus, in this embodiment, for example, the scanning interval for the blanking intervals between regions may be set to half the normal amount, as illustrated in . Then, the region whose BL control signal blanking interval has the latest start time among a plurality of regions (among all regions is also acceptable)\u2014region H\u2014is selected.","The second processor  superimposes the encoded signal on the selected region H in synchronization with the timing of the end of the blanking interval for region H and the start of the turning on of the backlight  (i.e., the point in time at which the BL control signal H turns \u201cON\u201d).","In the example illustrated in , the second processor  superimposes the encoded signals on all regions in the display region in synchronization with the timing of the end of the blanking interval for the BL control signal H and the time at which the BL control signal H turns \u201cON\u201d.","As a result, the second processor  can set the interval for superimposing the encoded signal for any region in the display region to an interval that is at most one half of a frame.","[2. Advantageous Effects Etc.]","As described above, in the display device according to Embodiment 5, the display controller (first controller ) causes the display panel () to display an image on the display screen of the display panel in accordance with a sped-up scanning speed faster than a scanning speed indicated by the image signal.","With this, the display device can lengthen the interval in which the encoded signals can be output.","Note that when the encoded signal length (encoded signal interval), is long, the encoded signal cannot be superimposed only in the BL control signal ON interval (interval other than the blanking interval), and there is a region that overlaps the blanking interval, the encoded signal is not superimposed during the blanking interval in that region.","Moreover, an adjustment interval for turning on the backlight  in the blanking interval that is equivalent in length to the ON time from the encoded signal superimposed during the BL control signal ON interval may be established. In this case, the adjustment interval may be generated using a method described in the above embodiments or the header of the encoded signal may be superimposed in the blanking interval. Moreover, the regions of the display region may be divided into groups and the encoded signals may be superimposed.","Moreover, the same processes may be performed in a region above the above-described region (in another region), and no signal may be outputted at all. In this case, using methods described in the above embodiments, an OFF adjustment interval may be established to equalize, across the entire screen, duty cycles based on at least one of the visible light communication signals and the image signals. Moreover, similar to Embodiment 20, the brightest region may be selected and encoded signals may be superimposed at timings determined based on that region. Note that in this embodiment, the encoded signals are superimposed using the rise of the BL control signals as a reference, but the timing at which the encoded signals are superimposed may be based on other characteristics of the BL control signals such as the fall of the BL control signals, and may be based on a synchronization signal of the image signal itself. Moreover, a signal of the synchronization signal of the image delayed by a certain amount of time may be generated, and that signal may be used as a reference.","Note that in this embodiment, an example is given in which the scanning speed is sped from 2\u00d7 scanning speed to 4\u00d7 scanning speed, but this is merely an example. The number of frames may be kept the same and only the scanning speed may be increased.","Moreover, in this embodiment, this sort of embodiment is achieved in advance and signals are transmitted, but the second processor may use a method in which signals according to this embodiment are transmitted based on the relationship between the image signal and the encoded signal. In this case, in order for the signals to be transmitted from the second processor  to the first processor  in , the arrow that connects these two blocks may be a two-headed arrow.","In Embodiments 18 through 22, the control method in which an interval for controlling the turning off of a backlight at a different timing for each of a plurality of regions is exemplified as being applied to backlight scanning, but this is merely an example. This method may be applied to local dimming.","In this embodiment, operations performed when the method is applied to local dimming will be described.","Here, local dimming is a backlight control method for reducing power by dividing the display region (screen) into a plurality of regions, increasing the transmittivity of the liquid crystals in the region beyond the normal amount, and decreasing the brightness of the backlight by the corresponding amount (i.e., decreasing the duty cycle). When the transmittivity of the brightest pixel in the region can be increased (when the brightness of the brightest pixel is a relatively low value), it is possible to reduce power consumption with the above method. Moreover, by receding the duty cycle of the backlight, the interval during which the backlight is on can be reduced, leading to an increase in contrast.","[1. Backlight Control by Local Dimming]","Next, BL control signals controlled by local dimming will be described.",{"@attributes":{"id":"p-2366","num":"2365"},"figref":"FIG. 358"},"When local dimming is used to control the backlight, for example, in adjacent regions, although the interval T between the start of each blanking interval is the same throughout, the lengths of the blanking intervals are different, as illustrated in .","For this reason, in each of the regions of the display region, the display device  according to this embodiment may store the BL control signal blanking interval determined based on an image signal previously displayed in memory and perform processing (operations) as follows.","[2. Display Device Operations]","The following description will focus on operations performed by the second processor . Note that this embodiment relates to signal control when OFF intervals per frame for each region in the display region are aligned.","[2.1. One Example of Operations Performed by Second Processor]",{"@attributes":{"id":"p-2370","num":"2369"},"figref":"FIG. 359"},"First, in step S, the second processor  calculates the adjustment interval. More specifically, when the OFF time in the encoded signal is N and the OFF time in the BL control signal input by the first processor is N, adjustment interval N=N\u2212N. With this, the second processor  can calculate the adjustment interval.","Next, in step S, the second processor  determines whether the sum of adjustment interval N and encoded signal interval C (i.e., N+C) is less than or equal to one frame interval.","When the second processor  determines that (N+C) is less than or equal to one frame interval (Yes in S), the process proceeds to step S. When the second processor  determines that (N+C) is greater than one frame interval (No in S), the process proceeds to step S, where no encoded signal is output, and processing ends.","Next, in step S, the second processor  determines whether the adjustment interval N is greater than or equal to 0.","When the second processor  determines that N is greater than or equal to 0 (Yes in S), the process proceeds to S, where a OFF interval is established from the start of the next encoded signal counting back by a length of time equivalent to the adjustment interval. Moreover, the encoded signal is not output in this interval, and processing is ended.","When the second processor  determines that N is smaller than 0 (No in S), the process proceeds to S, where an ON interval equivalent to the length of the adjustment interval is established in the blanking interval of the BL control signal, counting back from the end time of the blanking interval of the BL control signal. Moreover, the encoded signal is not output in this adjustment interval.",{"@attributes":{"id":"p-2377","num":"2376"},"figref":"FIG. 360"},"For example, as illustrated in , the second processor  superimposes in-phase encoded signals on all of the regions at a timing determined based on the start of the frame region A, which is the reference region, and establishes an adjustment interval. Note that the adjustment interval may be established in accordance with the second method described in Embodiment 18, but since the second method has already been described above, duplication here will be omitted.","In this embodiment, in principle, encoded signals are not superimposed during the BL control signal OFF intervals (blanking intervals), and are superimposed during the BL control signal ON intervals, similar to Embodiments 18 through 22. Note that the adjustment interval may be changed based on the duty cycle of the encoded signal, and in that case, if the adjustment interval is an interval in which the encoded signal is output, the encoded signal may be superimposed and output.","[2.2. One Example of Operations Performed by Second Processor]","In local dimming as well, provision of a sequential blanking interval may be given priority similar to when normal backlight scanning control is performed. Operations performed in this case are described hereinafter.",{"@attributes":{"id":"p-2381","num":"2380"},"figref":"FIG. 361"},"First, in step S, the second processor  calculates the adjustment interval. More specifically, when the blanking interval in a predetermined region is N, the OFF time in the encoded signal is N, and the blanking interval for that interval is N, adjustment interval N=N\u2212N\u2212N. With this, the second processor  can calculate the adjustment interval.","Next, in step S, the second processor  determines whether the sum of adjustment interval N, encoded signal interval C, and the blanking interval N of that region (i.e., N+C+N) is less than or equal to one frame interval, and stores the determination result.","Next, in step S, the second processor  determines whether the adjustment interval N is greater than or equal to 0, and stores the determination result.","After completing the above steps, the second processor , for example, establishes an adjustment interval and displays the visible light communication signal through video, based on the N through N stored per region and the determination results from steps S and S.","Note that the adjustment interval may be established based on a combination of the second method described in Embodiment 18 and the methods described in Embodiments 19 through 22, for example.",{"@attributes":{"id":"p-2387","num":"2386"},"figref":["FIG. 362","FIG. 362"]},"For example, as illustrated in , the second processor  superimposes in-phase encoded signals on all of the regions in an interval from time P to time Q starting after a predetermined amount of time has elapsed from the start of the frame region A, which is the reference region, and establishes an adjustment interval. Note that the adjustment interval may be established in accordance with the second method described in Embodiment 18, but since the second method has already been described above, duplication here will be omitted.","In this embodiment, in principle, encoded signals are not superimposed during the BL control signal OFF intervals (blanking intervals), and are superimposed during the BL control signal ON intervals, similar to Embodiments 18 through 22. As such, for example, in region A, since a given interval starting at time P is a blanking interval where the BL control signal A is OFF, the encoded signal is not superimposed. The adjustment interval is established after the encoded signal interval C.","Note that the adjustment interval may be changed based on the duty cycle of the encoded signal, and in that case, if the adjustment interval is an interval in which the encoded signal is output, the encoded signal may be superimposed and output.","[2.3. One Example of Operations Performed by Second Processor]",{"@attributes":{"id":"p-2391","num":"2390"},"figref":"FIG. 363"},"When the backlight is controlled with a local dimming method, the blanking interval of the BL control signal is typically different for each frame and each region. As such, to expedite calculations, a temporary blanking interval (hereinafter also referred to as a provisional blanking interval) is established. The adjustment interval can then be calculated in accordance with the second method described in Embodiment 19 based on the provisional blanking interval, the encoded signal interval, the phase difference between the two, and the original blanking interval. Hereinafter, an example when this is the case is described with reference to . The bold line in  indicates the waveform of the original blanking interval.","The provisional blanking interval is established based on the average length of the blanking intervals on the screen, or the shortest interval. Here, the provisional blanking interval is exemplified as an OFF interval during which the encoded signal is not superimposed. The encoded signal interval is an interval during which the encoded signal is superimposed.","Moreover, the adjustment interval may be established using the second method described in Embodiment 18. If the adjustment interval is positive, the BL control signal may be adjusted such that the backlight  is turned off during this interval, and if the adjustment interval is negative, the BL control signal may be adjusted such that the backlight  is turned on during this interval. When the adjustment interval is established counting back from the blanking interval, the BL control signal may be adjusted such that the backlight  is also turned on during the blanking interval. Note that when the adjustment interval is negative, if the encoded signal is superimposed on the BL control signal in the adjustment interval, the adjustment interval may be corrected based on the duty cycle.","[3. Advantageous Effects Etc.]","As described above, in the display device according to Embodiment 6, the backlight controller (the second controller ) establishes an interval during which control of light emission in each of the regions and control for turning off each of the regions a different time in accordance with a light emission amount of the backlight based on each of image signals, each of which is the image signal, are performed based on the backlight control signals outputted by the signal processor (the second processor ), and changes a duty of the backlight, the duty being based on the image signals and the visible light communication signals.","Note that in this embodiment, the encoded signals are superimposed using the rise of the BL control signals as a reference, but the timing at which the encoded signals are superimposed may be based on other characteristics of the BL control signals such as the fall of the BL control signals, and may be based on a synchronization signal of the image signal itself. Moreover, a signal of the synchronization signal of the image delayed by a certain amount of time may be generated, and that signal may be used as a reference.","Although the above embodiment describes a case where local dimming is applied, since local dimming also includes a case in which the regions are two-dimensionally divided and the image signals are scanned and written concurrently in a given direction, there are combinations are regions whose blanking intervals are different but in-phase, but the techniques described in this embodiment can be applied in this case as well.","As described above, the non-limiting embodiment has been described by way of example of techniques of the present disclosure. To this extent, the accompanying drawings and detailed description are provided.","Thus, the components set forth in the accompanying drawings and detailed description include not only components essential to solve the problems but also components unnecessary to solve the problems for the purpose of illustrating the above non-limiting embodiments. Thus, those unnecessary components should not be deemed essential due to the mere fact that they are described in the accompanying drawings and the detailed description.","The above non-limiting embodiment illustrates techniques of the present disclosure, and thus various modifications, permutations, additions and omissions are possible in the scope of the appended claims and the equivalents thereof.","For example, in the above embodiments, the encoded signals are described as being superimposed using the rise of the BL control signals as a reference, but this is merely an example. For example, the timing at which the encoded signals are superimposed may be based on a characteristic timing of the BL control signal, and may be based on a synchronization signal of the image signal itself. Moreover, a signal of the synchronization signal of the image delayed by a certain amount of time may be generated, and that signal may be used as a reference.","The present disclosure is applicable to a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals, and a method for controlling such a display device. More specifically, the display device according to the present disclosure is applicable to a wide variety of applications relating to the forwarding and transmission of all sorts of information accompanying images, such as outdoor signage, information devices, information display devices since they can actively and securely obtain necessary information as needed, in addition to household devices such as televisions, personal computers and tablets since they can actively and securely obtain information other than images.","Moreover, for example, the display device according to Embodiments 18 to 23 outputs visible light communication signals, and includes: a display panel including a display screen on which an image is displayed; a display controller that causes the display panel to display an image on the display screen of the display panel based on an image signal; a backlight having a light emission surface that illuminates the display screen of the display panel from behind; a signal processor that superimposes the visible light communication signals on backlight control signals generated based on the image signal; and a backlight controller that divides the light emission surface of the backlight into regions and establishes an interval during which control of light emission in each of the regions and control for turning off the backlight in each of the regions a different time are performed based on the backlight control signals outputted by the signal processor. When superimposing the visible light communication signals on the backlight control signals, the signal processor does not superimpose a visible light communication signal in an interval indicating an OFF state of the backlight in the backlight control signals.","Moreover, for example, the signal processor may superimpose the visible light communication signals on the backlight control signals corresponding to the regions in a one-to-one manner, and the visible light communication signals superimposed on the backlight control signals corresponding to the regions may be in phase with one another. Here, for example, in the display device according to Embodiments 18 to 23, based on the backlight control signal corresponding to a predetermined region among the regions, the signal processor may match phases of the visible light communication signals superimposed on the backlight control signals corresponding to the regions.","Moreover, for example, the predetermined region may be the brightest region among the regions, and may be a region corresponding to an edge portion of the display screen among the regions.","Moreover, for example, the signal processor may superimpose the visible light communication signals on the backlight control signals corresponding to groups of neighboring regions among the regions, the visible light communication signals superimposed on the backlight control signals in the same group may be in phase with one another, and for each group, corresponding visible light communication signals may be superimposed in entirety in an interval during which control of light emission of the backlight based on the backlight control signals corresponding to the groups is performed.","Here, for example, based on the backlight control signal corresponding to a predetermined region among the groups, the signal processor may match phases of the visible light communication signals superimposed on the backlight control signals corresponding to the groups. Alternatively, the predetermined region may be the brightest region among the regions.","Moreover, for example, among the visible light communication signals superimposed on the backlight control signal phases corresponding to the groups, a visible light communication signal superimposed on a backlight control signal corresponding to a first group among the groups and a visible light communication signal superimposed on a backlight control signal corresponding to a second group among the groups may be out of phase.","Moreover, for example, when superimposing the visible light communication signals on the backlight control signals, if the regions include a region whose backlight control signal indicates an OFF state of the backlight in an interval that overlaps an interval of the visible light communication signal being superimposed, the signal processor may establish a ON adjustment interval for the region with overlapping intervals and adjust ON\/OFF of the backlight control signal during the ON adjustment interval, the ON adjustment interval being for adjusting brightness of the region with overlapping intervals.","Moreover, for example, the signal processor may encode the visible light communication signals to generate encoded signals and superimpose the encoded signals, as the visible light communication signals, on the backlight control signals, and when superimposing the encoded signals on the backlight control signals, if the regions include a region whose backlight control signal indicates an OFF state of the backlight in an interval that overlaps an interval of the encoded signal being superimposed, a header portion of the encoded signal may be superimposed on the backlight control signal during the interval indicating an OFF state of the backlight, and a portion of the encoded signal other than the header portion may be superimposed on the backlight control signal during an interval other than the interval indicating an OFF state of the backlight.","Moreover, for example, the signal processor may superimpose the visible light communication signals on the backlight control signals on a different cycle than a cycle of the backlight control signals, and in each of the regions a relationship between a phase of the backlight control signal and a phase of the visible light communication signal may change with a change in frames. Here, the cycle of the backlight control signals and the different cycle on which the visible light communication signals are superimposed may change temporally.","Moreover, for example, the signal processor may temporally change a delay time of encoding the visible light communication signals on the backlight control signals corresponding to the regions, based on one backlight control signal corresponding to a given region among the regions.","Moreover, for example, the visible light communication signals to be superimposed on the backlight control signals may be in phase with one another across all regions in which the visible light communication signals are superimposed.","Moreover, for example, a phase-shift cycle of the visible light communication signals superimposed on the backlight control signals corresponding to the regions and a cycle of one frame of the backlight control signals may have a least common multiple within one second, inclusive.","Moreover, for example, the signal processor may correct a start of a phase-shift cycle of the visible light communication signals superimposed on the backlight control signals corresponding to the regions to a cycle of one frame of the backlight control signals on a cycle equivalent to a least common multiple or an integer multiple of the phase-shift cycle of the visible light communication signals superimposed on the backlight control signals corresponding to the regions and the cycle of one frame of the backlight control signals.","Note that for example, the display controller may cause the display panel to display an image on the display screen of the display panel in accordance with a sped-up scanning speed faster than a scanning speed indicated by the image signal.","Moreover, the backlight controller may establish an interval during which control of light emission in each of the regions and control for turning off each of the regions a different time in accordance with a light emission amount of the backlight based on each of image signals, each of which is the image signal, are performed based on the backlight control signals outputted by the signal processor, and change a duty of the backlight, the duty being based on the image signals and the visible light communication signals.","Moreover, the method of controlling the display device according to Embodiments 18 to 23 is a method of controlling a display device that outputs visible light communication signals, the display device including: a display panel including a display screen that displays an image; and a backlight having a light emission surface that illuminates the display screen of the display panel from behind, and includes: causing the display panel to display an image on the display screen of the display panel based on an image signal; superimposing the visible light communication signals on backlight control signals generated based on the image signal; and dividing the light emission surface of the backlight into regions and establishing an interval during which control of light emission in each of the regions and control for turning off the backlight in each of the regions a different time are performed based on the backlight control signals outputted by the signal processor. When superimposing the visible light communication signals on the backlight control signals, a visible light communication signal is not superimposed in an interval indicating an OFF state of the backlight in the backlight control signals.","Note that the disclosure of Embodiments 18 to 23 is applicable to a display device capable of outputting visible light communication signals without significantly deteriorating the quality of the display image, and capable of reducing reception error of output visible light communication signals. More specifically, the display device according to Embodiments 18 to 23 is applicable to a wide variety of applications relating to the forwarding and transmission of all sorts of information accompanying images, such as outdoor signage, information devices, information display devices since they can actively and securely obtain necessary information as needed, in addition to household devices such as televisions, personal computers and tablets since they can actively and securely obtain information other than images.","The present disclosure relates to a display device capable of outputting a visible light communication signal, and a display method performed thereby.","Japanese Unexamined Patent Application Publications No. 2007-43706 and No. 2009-212768 related to visible light communication techniques each using the backlight of a display disclose a display device which superimposes communication information via visible light on an image signal and displays the image signal with the superimposed communication information.","The present disclosure provides a display device which outputs a visible light communication signal which can be reconstructed by a reception device.","The display device according to the present disclosure is a display device capable of outputting a visible light communication signal including a plurality of signal units according to a carousel scheme, and includes: a display panel which displays an image signal; a visible light communication processing unit which codes the signal units, divides each of the signal units into a plurality of blocks, and generates a plurality of transmission frames using the plurality of blocks to generate a backlight control signal; and a backlight which illuminates the display panel from behind based on the backlight control signal. The plurality of blocks are arranged in different orders in at least two of the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit.","The display device according to the present disclosure is capable of outputting a visible light communication signal which can be reconstructed by a reception device.","Hereinafter, an embodiment is described in detail with reference to the drawings as necessary. It should be noted that unnecessarily detailed descriptions may be omitted below. For example, detailed descriptions of well-known matters or descriptions of components that are substantially the same as components described previous thereto may be omitted This is to avoid unnecessary redundancy and provide easily read descriptions for those skilled in the art.","It should be noted that the accompanying drawings and the following description are provided to assist those skilled in the art in fully understanding the present disclosure, and are not intended to limit the scope of the claims.","Hereinafter, Embodiment 24 is described with reference to .","[1-1. Configuration of Visible Light Communication System]",{"@attributes":{"id":"p-2429","num":"2428"},"figref":["FIG. 364","FIG. 364"],"b":["1500","1500","1520"]},"The display device  is a display for example, and displays images on a display surface . In addition, on the images displayed on the display surface , a visible light communication signal is inserted or superimposed as information related to the displayed images.","The reception device  captures the images displayed on the display surface  of the display device  to thereby receive the visible light communication signal output by being displayed on the display surface . The reception device  is configured as, for example, a smartphone in which an image sensor for sequential exposure is embedded. In this way, a user of the reception device  can receive, for example, the information related to the images displayed on the display device .","Note that although the display is given as an example of the display device  in this embodiment, this example is not limiting. The display device  may be a projecting display device such as a projector.","In addition, although the smartphone is given as an example of the reception device , any other electronic device capable of receiving a visible light communication signal is possible. For example, the electronic device may be a reception device conforming to \u201cJEITA-CP1222 Visible Light ID System\u201d defined by the Japan Electronics and Information Technology Industries Association (JEITA). Furthermore, the electronic device may be a general communication terminal.","In addition, \u201cbeing capable of receiving a visible light communication signal\u201d means that it is possible to receive the visible light communication signal, and decode the received visible light communication signal to obtain information.","In addition, a scheme for communicating a visible light communication signal may be, for example, a communication scheme conforming to the \u201cJEITA-CP-1223 Visible Light Beacon System\u201d defined by the JEITA, a communication scheme conforming to IEEE-P802.15 standardized by the Institute of Electrical and Electronics Engineers, Inc. (IEEE).","Stated differently, the reception device  may be any electronic device capable of performing communication using any of these communication schemes and receiving such a visible light communication signal.","[1.2 Configuration of Display Device]",{"@attributes":{"id":"p-2438","num":"2437"},"figref":["FIG. 365","FIG. 365"],"b":["1500","1501","1502","1503","1504","1505","1506","1507","1508"]},"The image signal input unit  receives an image signal related to images to be displayed on the display panel  via an antenna cable, a composite cable, a high-definition multimedia interface (HDMI: registered trademark) cable, a PJLink cable, a local area network (LAN) cable, or the like. The image signal input unit  outputs the input image signal to the image signal processing unit .","It is to be noted that the image signal to be used may be an image signal stored in a recording medium.","The image signal processing unit  performs general image processing such as decoding on the input image signal. The image signal processing unit  transmits the image signal on which the image processing has been performed to the display control unit  and the backlight control unit . The image signal includes information related to brightness etc. of images.","The display control unit  controls the display panel  based on the input image signal so that the video is displayed on the display surface  of the display panel . More specifically, the display control unit  performs aperture control etc. of liquid crystals of the display panel  based on the image signal input from the image signal processing unit .","The display panel  is a liquid crystal panel for example, and includes the display surface  on which images are displayed.","The visible light communication signal input unit  receives a visible light communication signal via a cable exclusive for visible light communication signals, a LAN cable, or the like.","It is to be noted that the visible light communication signal to be used may be a visible light communication signal stored in a recording medium. Furthermore, the visible light communication signal may have been superimposed on an image signal.","The visible light communication signal input unit  outputs the input visible light communication signal to the visible light communication signal processing unit .","The visible light communication signal processing unit  codes the input visible light communication signal according to a predetermined coding method, and further performs, for example, processing for determining the order of transmission of visible light communication signals. The visible light communication signal processing unit  converts the coded visible light communication signal into a backlight control signal. The visible light communication signal processing unit  outputs the generated backlight control signal to the backlight control unit .","The backlight control unit  divides the light emitting surface of the backlight  into a plurality of areas, performs light emission control on each of the areas, and performs control for providing the respective areas on the light emitting surface with OFF periods at different timings.","The backlight control unit  controls luminance and timing for the backlight  based on the information related to the image brightness etc. of images and included in the input image signal. In addition, the backlight control unit  controls light emission of the backlight  based on the input backlight control signal.","The backlight  is provided on the rear surface of the display panel , and has a light emitting surface which illuminates the display surface  of the display panel  from the rear surface. The backlight  emits light from behind the display panel . A viewer can visually recognize images displayed on the display panel .","In this embodiment, the entire display surface  is assumed to be a visible light communication area.",{"@attributes":{"id":"p-2452","num":"2451"},"figref":["FIG. 366","FIG. 366","FIG. 366"],"b":["1505","1506","1","2","3","4","1500","1508"]},"It has been described that the data lengths of the pieces of data obtained by dividing one signal unit are the same with reference to . However, it is to be noted that the data lengths of the pieces of data obtained by dividing one signal unit may be different from each other, or the data length of one of the pieces of data obtained by dividing one signal unit may be different from the data lengths of the other pieces of data.","Next, the visible light communication signal processing unit  codes the resulting pieces of data, adds a header part to each piece of data, determines the order of transmission of the pieces of data, and generate blocks. Specifically, the visible light communication signal processing unit  generates Block , Block , Block , and Block  from Data , Data , Data , and Data , respectively. The visible light communication signal processing unit  transmits the generated blocks as a backlight control signal in the order of Block , Block , Block , and Block  to the backlight control unit .","The header part of a block is composed of a \u201cpreamble\u201d, an \u201caddress\u201d, and a \u201cparity\u201d. The preamble is a pattern indicating the beginning of the block, and includes an identifier indicating that the data is a visible light communication signal. For example, a signal out of a coding rule such as 4 pulse position modulation (4 PPM) or inverted 4 PPM (i-4 PPM) is used. The parity is used to detect data error. The address indicates the order of transmission of the blocks in the signal unit.","The four blocks generated from one signal unit are referred to as a transmission frame.","[1-3. Configuration of Reception Device]",{"@attributes":{"id":"p-2458","num":"2457"},"figref":["FIG. 367","FIG. 367"],"b":["1520","1521","1522","1523"]},"The imaging unit  captures images displayed on a visible light communication area of the display device . The imaging unit  is, for example, an image sensor for sequential exposure. Upon starting the imaging, the image sensor performs sequential exposure, and transmits the exposure data to the captured image generation unit .","The captured image generation unit  temporarily stores, in memory installed therein, exposure data transmitted from the imaging unit . The captured image generation unit  generates a captured image based on the exposure data stored in the memory.","The captured image processing unit  reconstructs the visible light communication signal from the captured image generated by the captured image generation unit .","[1-4. Output and Reception of Visible Light Communication Signal]","Next, a description is given of basic operation performed by the reception device  to receive transmission frames output from the visible light communication area of the display device .","[1-4-1. Captured Image for ON and OFF States of Backlight]",{"@attributes":{"id":"p-2465","num":"2464"},"figref":"FIG. 368","b":["1520","1508","1500"]},"The imaging unit  is an image sensor for sequential exposure, and performs exposure while performing temporal scanning on a per line basis. To simplify the description, this embodiment is described assuming that exposure elements of the image sensor are in 8 lines. The exposure lines are assumed to have been configured in an elongated, belt-like shape in the reception device .","As illustrated in , the backlight  of the display device  is turned ON and OFF along with time. The image sensor performs sequential exposure from the first line to the eighth line. When the sequential exposure up to the eighth line is finished, the captured image generation unit  of the reception device  generates a captured image based on the exposure data of the eight lines. Here, it is assumed that the period for sequential exposure of the image sensor is an imaging period, and that a captured image generated based on the exposure data obtained through the sequential exposure of the image sensor in the imaging period is a reception frame L. The exposure of the image sensor is performed such that a return to the first line is made when exposure on the eighth line is finished, and the next exposure is started from the first line. The captured image generated next is assumed to be a reception frame L+1. There is a blanking interval such as time for storing exposure data in the memory between when the exposure up to the eighth line is finished and when the next exposure on the first line is started, and no exposure is performed in the blanking interval. In the reception frame L, each of the first, second, fifth, sixth, and eighth lines in the exposure of the image sensor of the reception device  is light because the backlight  of the display device  is ON at the time of the exposure. Each of the third and fourth lines in the exposure of the image sensor of the reception device  is dark because the backlight  of the display device  is OFF at the time of the exposure. The visible light communication signal is reconstructed based on the reception frame L.","In the reception frame L+1, each of the first, second, third, seventh, and eighth lines in the exposure of the image sensor of the reception device  is light because the backlight  of the display device  is ON at the time of the exposure. Each of the fourth, fifth, and sixth lines of the exposure of the image sensor of the reception device  is dark because the backlight  of the display device  is OFF at the time of the exposure. The visible light communication signal is reconstructed based on the reception frame L+1.","[1-4-2. Captured Image for Transmission Frame]",{"@attributes":{"id":"p-2470","num":"2469"},"figref":"FIG. 369","b":["1520","1500"]},"As illustrated in , the visible light communication signal includes a plurality of signal units, one signal unit is divided into four pieces of data, and the four pieces of data are coded into four blocks respectively.","In the visible light communication area which is the display surface  of the display device , there may be a period in which ON and OFF states of the backlight  cannot be distinguished depending on the content of an image signal. There is a possibility that the reception device  cannot receive a transmission frame output from the display device  in this period.","For this reason, the carousel scheme according to which the transmission frame generated from one signal unit is output repeatedly, that is, more than once, is used for the transmission frames to be output from the backlight  of the display device . In , the display device  outputs a transmission frame in one signal unit of the visible light communication signal two times sequentially.","As illustrated in , the transmission frame is output by way of turning ON and OFF of the backlight  of the display device  along with time. The exposure of the image sensor of the reception device  is sequential exposure from the first line to the eighth line. When the exposure up to the eighth line by the image sensor is finished, the captured image generation unit  of the reception device  generates a captured image based on the exposure data of the eight lines. To generate the reception frame L which is a captured image, with the exposure of the image sensor of the reception device , Block  is received at the first and second lines, Block  is received at the third and fourth lines, Block  is received at the fifth and sixth lines, and Block  is received at the seventh and eighth lines. The reception frame L corresponds to the first transmission frame of one signal unit output from the display device .","In addition, with reference to , to generate the reception frame L+1 which is a captured image, with the exposure of the image sensor of the reception device , Block  is received at the first and second lines, Block  is received at the third and fourth lines, Block  is received at the fifth and sixth lines, and Block  is received at the seventh and eighth lines. The reception frame L+1 corresponds to the second transmission frame of one signal unit output from the display device .","In this way, the transmission frames generated from one signal unit are output sequentially according to the carousel scheme, which makes it possible to receive, in the second transmission frame, a block which was not able to be received in the first transmission frame even when radio disturbance occurs in the transmission of the first transmission frame. When all the blocks, that is, the four blocks, are received throughout the first and second transmission frames, one signal unit can be reconstructed.","In addition, when the transmission frame is output sequentially according to the carousel scheme, the display device  may output a reset signal indicating transition from a current signal unit to the next signal unit before outputting the transmission frame of the next signal unit.","This reset signal may be included in the preamble or data of the blocks of the transmission frame.","[1-5. Problem with Output and Reception of Visible Light Communication Signal]","Next, a description is given of a problem with output and reception of a visible light communication signal.  is a diagram for describing the relationship between a transmission clock frequency of the display device  and a frame rate of the imaging unit  of the reception device .","A liquid crystal panel which is the display panel  of the display device  in this embodiment is driven at a drive frequency of 120 Hz.","It is to be noted that some type of liquid crystal panel operates at a drive frequency of 60 Hz or 240 Hz.","In addition, the image sensor of the imaging unit  of the reception device  in this embodiment operates at a frame rate of 30 frame per second (fps).","At this time, the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction. Furthermore, in order for luminance control and control on video resolution etc. in the backlight control unit  of the display device , ON and OFF timings of the backlight  of the display device  may be synchronized with the drive frequency of the liquid crystal panel. In other words, as illustrated in , the transmission frames are to be output from the display device  in synchronization with the drive frequency of the liquid crystal panel.  indicates a case in which the transmission frame generated from one signal unit which is output from the display device  in this situation is output three times according to the carousel scheme.","Exposure of the image sensor is performed for the first transmission frame output from the display device  in an imaging period of one frame rate. The reception device  generates a reception frame L which is a captured image based on exposure data. The reception device  reconstructs the visible light communication signal from the reception frame L. Only Block  and Block  whose data are fully included in the reception frame L can be reconstructed as a visible light communication signal.","Exposure of the image sensor is performed for the second transmission frame output from the display device  in an imaging period of one frame rate. The reception device  generates a reception frame L+1 which is a captured image based on exposure data. The reception device  reconstructs the visible light communication signal from the reception frame L+1. Only Block  and Block  whose data are fully included in the reception frame L+1 can be reconstructed as a visible light communication signal.","Exposure of the image sensor is performed for the third transmission frame output from the display device  in an imaging period of one frame rate. The reception device  generates a reception frame L+2 which is a captured image based on exposure data. The reception device  reconstructs the visible light communication signal from the reception frame L+2. Only Block  and Block  whose data are fully included in the reception frame L+2 can be reconstructed as a visible light communication signal.","In this way, in the case where the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames for one signal unit to be output from the display device  are output in synchronization with the drive frequency of the liquid crystal panel, even when the same transmission frame is output three times according to the carousel scheme, only Block  and Block  among Block , Block , Block , and Block  can be reconstructed as a visible light communication signal. Block  and Block  cannot be reconstructed as a visible light communication signal.","[1-6. Method for Generating Transmission Frame]","In order to solve the above-described problem, that is, in order that the reception device  reconstructs all of the four blocks of one signal unit output from the display device  as a visible light communication signal, a different transmission frame is generated and output each time instead of using the same transmission frame each time as the transmission frame to be output for the one signal unit more than one time according to the carousel scheme. In other words, the transmission frames to be output more than one time for the one signal unit according to the carousel scheme are generated such that the blocks in each of the transmission frames for one signal unit will be transmitted in a different order each time.",{"@attributes":{"id":"p-2490","num":"2489"},"figref":["FIG. 371","FIG. 371","FIG. 370","FIG. 370"],"b":["1500","1500"]},"The blocks of the first transmission frame to be output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block . The reception device  performs exposure of the image sensor for the first transmission frame output from the display device , in an imaging period of one frame rate. The reception device  generates a reception frame L which is a captured image based on exposure data. The reception device  reconstructs the visible light communication signal from the reception frame L. Only Block  and Block  whose data are fully included in the reception frame L can be reconstructed as a visible light communication signal.","The blocks of the second transmission frame to be output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block . The reception device  performs exposure of the image sensor for the second transmission frame output from the display device , in an imaging period of one frame rate. The reception device  generates a reception frame L+1 which is a captured image based on exposure data. The reception device  reconstructs the visible light communication signal from the reception frame L+1. Only Block  and Block  whose data are fully included in the reception frame L+1 can be reconstructed as a visible light communication signal.","The blocks of the third transmission frame to be output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block . Exposure of the image sensor is performed for the third transmission frame output from the display device  in an imaging period of one frame rate. The reception device  generates a reception frame L+2 which is a captured image based on exposure data. The reception device  reconstructs the visible light communication signal from the reception frame L+2. Only Block  and Block  whose data are fully included in the reception frame L+2 can be reconstructed as a visible light communication signal.","In the case where the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames are output from the display device  in synchronization with the drive frequency of the liquid crystal panel, it is possible to reconstruct all of Block , Block , Block , and Block  in one signal unit as a visible light communication signal by outputting the transmission frame for one signal unit three times according to the carousel scheme in such a way that the order of transmission of the blocks is different each time.","In a generation example of , the second and third blocks in transmission frames output from the display device  are blocks which can be reconstructed as a visible light communication signal, and thus the order of transmission of the blocks of the signal unit is changed so that each Block is output as one of the second and third blocks throughout the three outputs.","Note that in the generation example of , the transmission frame to be output for one signal unit more than one time according to the carousel scheme is changed in such a way that the order of transmission of the blocks in each of the transmission frames for one signal unit is different each time, but this example is not limiting. The order of transmission of the blocks in the transmission frame to be output for one signal unit more than one time according to the carousel scheme may be changed in such a way that the order of transmission of the blocks in two adjacent transmission frames for one signal unit is different from each other.","Furthermore, generation examples of transmission frames to be output from the display device  are not limited to the example described above.",{"@attributes":{"id":"p-2498","num":"2497"},"figref":"FIG. 372A"},"In , an ascending order of the blocks in the transmission frame, that is, the order of Block , Block , Block , and Block , and a descending order of the blocks in the transmission frame, that is, the order of Block , Block , Block , and Block , are repeated.","In the case where a reception frame to be generated by the reception device  is composed of the former or latter half part of the transmission frame, it is possible to reconstruct all of Block , Block , Block , and Block  of one signal unit as a visible light communication signal by outputting a transmission frame such as that in the second generation example more than one times according to the carousel scheme.",{"@attributes":{"id":"p-2501","num":"2500"},"figref":["FIG. 372B","FIG. 372B"],"b":["1500","1","2","3","2","4","1500","3","4","1","3","2","1500","4","1","2","4","3"]},{"@attributes":{"id":"p-2502","num":"2501"},"figref":["FIG. 372C","FIG. 372C"],"b":["1","2","3","4","1500","1","1","2","3","1","1500","4","1","2","2","4","2","1500","3","4","1","2","3"]},"In this way, it is possible to reconstruct all of Block , Block , Block , and Block  of one signal unit as a visible light communication signal by outputting a transmission frame such as that in the fourth generation example more than one time according to the carousel scheme.",{"@attributes":{"id":"p-2504","num":"2503"},"figref":["FIG. 372D","FIG. 372D"],"b":["1500","1","3","2","4","1500","3","1","2","4","1500","2","3","1","4","1","2","3","4"]},{"@attributes":{"id":"p-2505","num":"2504"},"figref":["FIG. 372E","FIG. 372E"],"b":["1500","1","1","2","2","1500","3","3","4","4","1500","1","1","2","2"]},"[1-7. Operation Performed by Visible Light Communication Signal Processing Unit]","Next, a description is given of operation performed by the visible light communication signal processing unit  of the display device .  is a flowchart for describing operation of the visible light communication signal processing unit  of the display device .","(Step S) The visible light communication signal processing unit  determines whether or not a visible light communication signal has been received from the visible light communication signal input unit . When it is determined that the visible light communication signal has been received (in the case of Yes), processing is advanced to Step S. When it is determined that the visible light communication signal has not been received (in the case of No), processing of Step S is repeated.","(Step S) The input visible light communication signal includes a plurality of signal units. The visible light communication signal processing unit  reads one signal unit.","(Step S) The visible light communication signal processing unit  generates blocks by dividing the read one signal unit into a predetermined number of pieces of data, coding the pieces of data, and adding a header part to each of the pieces of data.","(Step S) Based on the generated blocks, the visible light communication signal processing unit  determines the order of transmission of blocks to be included in each of the plurality of transmission frames to be transmitted according to the carousel scheme.","(Step S) The visible light communication signal processing unit  generates a plurality of transmission frames and outputs them to the backlight control unit .","(Step S) The visible light communication signal processing unit  determines whether or not any signal unit is left. When it is determined that a signal unit is left (in the case of Yes), a return is made to Step S. When it is determined that no signal unit is left (in the case of No), the processing is terminated.","[1-8. Advantageous Effects, Etc.]","As described above, the display device according to this embodiment is the display device capable of outputting the visible light communication signal including the plurality of signal units according to the carousel scheme, and includes: the display panel which displays the image signal; the visible light communication processing unit which codes the signal units, divides each of the signal units into the plurality of blocks, and generates the plurality of transmission frames using the plurality of blocks to generate the backlight control signal; and the backlight which emits light from behind the display panel based on the backlight control signal. The plurality of blocks are arranged in different orders in at least two of the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit.","In this way, the display device  outputs, for one signal unit, the plurality of transmission frames including blocks which are different in the order of transmission, to allow the reception device  to reconstruct the visible light communication signal.","In addition, in the display device in this embodiment, among the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit, at least two adjacent transmission frames include identical blocks.","In this way, the display device  includes the identical blocks in at least two adjacent transmission frames for the one signal unit, to allow the reception device  to reconstruct the visible light communication signal.","In addition, in the display device in this embodiment, at least one of the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit includes a plurality of identical blocks, and each of the plurality of blocks is included in one of the plurality of transmission frames.","In this way, the display device  includes a plurality of identical blocks in one transmission frame and includes each of the blocks in one of the plurality of transmission frames, to allow the reception device  to reconstruct the visible light communication signal.","In addition, in the display device in this embodiment, the visible light communication signal processing unit inserts a reset signal between two adjacent ones of the signal units.","In this way, the display device  is capable of indicating transition from a current signal unit to the next signal unit.","The display device  in this embodiment is particularly effective in the case where the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames are output from the display device  in synchronization with the drive frequency of the liquid crystal panel.","Note that the number of times of transmission of the transmission frame to be output from the display device  according to the carousel scheme is described as being three times in this embodiment, but this example is not limiting. The number of times of transmission of the transmission frame to be output according to the carousel scheme may be any number more than one.","The following describes Embodiment 25 with reference to  to .","[2-1. Configuration of Visible Light Communication System]","A visible light communication system according to this embodiment has the same configuration as the visible light communication system S described in Embodiment 24. The following description of the visible light communication system according to this embodiment focuses on differences from the visible light communication system S.","[2-2. Relationship Between Brightness of Images and Output of Visible Light Communication Signal]","A display panel  of a display device  according to this embodiment is a liquid crystal panel. In the liquid crystal display, when images are displayed, a liquid-crystal shutter of a display surface  is opened and closed or tones and a backlight  are controlled so that the images are viewed.","For that reason, even in the case where the brightness of the backlight  is set to significantly high, a visible light communication region includes a dark region when an image signal is dark. In a region with a dark image signal, light of the backlight  is shielded by the liquid-crystal shutter of the display panel . When a visible light communication signal is output to a dark region, there are instances where the visible light communication signal cannot be reconstructed from an image captured by an imaging unit  of a reception device .","In view of the above, according to this embodiment, when the proportion of a high-luminance region, which is a region having brightness higher than or equal to predetermined brightness, in the visible light communication region, which is the entire display surface  of the display device , is low, a block included in one signal unit is output more than one time so that a visible light communication signal can be reconstructed. In contrast, when the proportion of the high-luminance region in the visible light communication region is high, the number of times of transmission of a block included in one signal unit is reduced to be smaller than when the proportion of the high-luminance region in the visible light communication region is low, or the number of times of transmission of a block included in one signal unit is set to one.","[2-3. Operations of Visible Light Communication Signal Processing Unit]","Embodiment 25 is different from Embodiment 24 mainly in the operation of the visible light communication signal processing unit . The following describes the operation of the visible light communication signal processing unit .  is a flowchart for describing the operation of the visible light communication signal processing unit  of the display device  according to Embodiment 25.","Operations in step S to step S are same as the operations described in Embodiment 24.","(Step S) The visible light communication signal processing unit  detects a high-luminance region in a visible light communication region, from an image signal provided by the image signal processing unit . The visible light communication signal processing unit determines the number of times of transmission of each block of a transmitting unit, based on the proportion of the high-luminance region in the visible light communication region. The method of determining the number of times of transmission will be described later.","(Step S) The visible light communication signal processing unit  determines an order of transmission of blocks, based on the number of times of transmission of each block of the signal unit. The method of determining the order of transmission of blocks will be described later.","Operations in step S and step S are the same as the operations described in Embodiment 24.","[2-4. Method of Determining the Number of Times of Transmission of Block]","The following describes how to determine the number of transmission of a block.  illustrates an example of how to determine the number of times of transmission of an arbitrary block of a transmission frame for one signal unit.","In , the horizontal axis represents a proportion of the high-luminance region in the visible light communication region, and the vertical axis represents the number of times of transmission of an arbitrary block in a signal unit.","It is expected from  that when the proportion of the high-luminance region in the visible light communication region is approximately 80% or more, the number of times an arbitrary block in a signal unit is to be transmitted so that the visible light communication signal can be reconstructed by the reception device  is one, and that as the proportion of the high-luminance region in the visible light communication region is reduced, the number of times the arbitrary block in the signal unit is to be transmitted so that the visible light communication signal can be reconstructed by the reception device  increases. More specifically, the arbitrary block in the signal unit is transmitted once when the proportion of the high-luminance region in the visible light communication region is 90% (point A), the arbitrary block in the signal unit is transmitted three times when the proportion of the high-luminance region in the visible light communication region is 50% (point B), and the arbitrary block in the signal unit is transmitted six times when the proportion of the high-luminance region in the visible light communication region is 10% (point C). In , the number of times of transmission of an arbitrary block in a signal unit is incremented by one as the proportion of the high-luminance region in the visible light communication region decreases from 80% to approximately 15%.","It should be noted that the rate of the number of times of transmission is not limited to this example, and may be changed as necessary.","[2-5. Method of Determining Order of Transmission of Blocks]","The following describes how to determine the order of transmission of blocks for one signal unit.  is a diagram for describing an example of generating a transmission frame for one signal unit according to Embodiment 25. A drive frequency of a liquid crystal panel that is the display panel  of the display device  according to this embodiment is 120 Hz, and an image sensor of the imaging unit  of the reception device  operates at a frame rate of 30 fps. Moreover, a transmission frame of the display device  is output in synchronization with the drive frequency of the liquid crystal panel.  illustrates the case where one signal unit of the visible light communication signal that is output from the display device  is output three times according to the carousel scheme. The one signal unit includes six data items each having the same data length, and is coded to generate six blocks.","In , the number of times of transmission of blocks included in three transmission frames for one signal unit is determined according to the proportion of the high-luminance region in the visible light communication region.","Since the proportion of the high-luminance region in the first transmission frame that is output first from the display device  is 80%, an arbitrary block in a signal unit is transmitted once. Accordingly, blocks in the first transmission frame that is output from the display device  are arranged in the following order: Block , Block ; Block ; Block ; Block ; and Block . The reception device  exposes the image sensor in an imaging period of one frame rate, for the first transmission frame output from the display device . The reception device  generates a reception frame L which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L. Only Block  and Block  whose data are fully included in the reception frame L can be reconstructed as a visible light communication signal.","Next, since the proportion of the high-luminance region in the second transmission frame that is output for the second time from the display device  is 50%, an arbitrary block in a signal unit is transmitted three times. Accordingly, in the second transmission frame that is output from the display device , blocks are arranged in the following order: Block ; and Block , which is repeated three times. The reception device  exposes the image sensor in an imaging period of one frame rate, for the second transmission frame output from the display device . The reception device  generates a reception frame L+1 which is a captured image based on exposure data. In the reception frame L+1, a block in a region other than the high-luminance region cannot be reconstructed. The reception device  reconstructs a visible light communication signal from the reception frame L+1. Block  and Block  whose data are fully included in the reception frame L+1 can be reconstructed as a visible light communication signal.","Next, since the proportion of the high-luminance region of the third transmission frame that is output for the third time from the display device  is 10%, an arbitrary block in a signal unit is transmitted six times. In the third transmission frame that is output from the display device , blocks are arranged such that Block  is repeated six times. The reception device  exposes the image sensor in an imaging period of one frame rate, for the third transmission frame output from the display device . The reception device  generates a reception frame L+2 which is a captured image based on exposure data. In the reception frame L+2, a block in a region other than the high-luminance region cannot be reconstructed. The reception device  reconstructs a visible light communication signal from the reception frame L+2. Block  whose data is fully included in the reception frame L+2 can be reconstructed as a visible light communication signal.","It is possible to reconstruct all of Block , Block , Block , Block , Block , and Block  in one signal unit as a visible light communication signal, by determining the order of transmission of blocks for a transmission frame of one signal unit, based on the proportion of the high-luminance region, and outputting the transmission frame three times according to the carousel scheme.","[2-6. Advantageous Effects, Etc.]","As described above, the display device according to this embodiment includes the visible light communication processing unit which detects a region of the display panel that has luminance higher than or equal to predetermined luminance, determines the number of identical blocks to be included in the transmission frame according to a size of the region, and generates the plurality of transmission frames for each of the signal units.","This allows the display device  to output a plurality of transmission frames by changing the number of times of transmission of blocks according to the proportion of the high-luminance region for one signal unit, thereby enabling the reception device  to reconstruct a visible light communication signal.","It should be noted that, although a transmission frame is output three times according to the carousel scheme for one signal unit that is output from the display device  according to this embodiment, this example is not limiting. For example, when a transmission frame is output three times or more according to the carousel scheme, it is possible to use transmission frames different from the combination of transmission frames including the second transmission frame in which the blocks are arranged in the following order: Block ; and Block , which is repeated three times.","The display device  according to this embodiment is particularly effective in the case where the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames are output from the display device  in synchronization with the drive frequency of the liquid crystal panel.","The following describes Embodiment 26 with reference to  to .","[3-1. Configuration of Visible Light Communication System]","A visible light communication system according to this embodiment has the same configuration as the visible light communication system S described in Embodiment 24. The following description of the visible light communication system according to this embodiment focuses on differences from the visible light communication system S.","[3-2. Relationship Between Distance from Display Device and Transmission of Visible Light Communication Signal]","The following describes comparison between the case where a distance between the display device  and the reception device  is relatively small and the case where a distance between the display device  and the reception device  is relatively great. When the distance between the display device  and the reception device  is relatively small, the number of blocks included in a image captured by the reception device  is larger than in the case where the distance between the display device  and the reception device  is relatively great.","This is because a captured image that can be generated by the imaging unit  of the reception device  is relatively large when the distance between the display device  and the reception device  is relatively small, and a captured image that can be generated by the imaging unit  of the reception device  is relatively small when the distance between the display device  and the reception device  is relatively large.","In view of the above, the display device  according to this embodiment changes the number of times of transmission of an arbitrary block of a transmission frame for one signal unit, based on a distance from the reception device .","[3-3. Operations of the Visible Light Communication Signal Processing Unit]","Embodiment 26 is different from Embodiment 24 mainly in the operation of the visible light communication signal processing unit . The following describes the operation of the visible light communication signal processing unit .  is a flowchart for describing the operation of the visible light communication signal processing unit  of the display device  according to Embodiment 26.","Operations in step S to step S are the same as the operations described in Embodiment 24.","(Step S) The visible light communication signal processing unit  determines the number of times of transmission of each block of a transmitting unit, based on the distance from the reception device . The method of determining the number of times of transmission will be described later.","(Step S) The visible light communication signal processing unit  determines an order of transmission of blocks, based on the number of times of transmission of each block of the signal unit. The method of determining the order of transmission will be described later.","Operations in step S and step S are the same as the operations described in Embodiment 24.","[3-4. Method of Determining the Number of Times of Transmission of Block]","The following describes how to determine the number of times of transmission of a block.  illustrates an example of how to determine the number of times of transmitting an arbitrary block of a transmission frame for one signal unit.","In , the horizontal axis represents a distance between the display device  and the reception device , and the vertical axis represents the number of times of transmission of an arbitrary block in a signal unit. When the distance is small, the number of times of transmission of each block in a signal unit is reduced. In , each block in a signal unit is transmitted once when the distance is three meters (m) or smaller.","When the distance is great, the number of times of transmission of each block in a signal unit is increased. In , the number of times of transmission of each block in a signal unit is incremented by one for every two meters of increase in the distance starting at three meters.","It should be noted that the rate of increase in the distance may be changed as necessary.","[3-5. Method of Determining Order of Transmission of Blocks]","The following describes how to determine the order of transmission of blocks for one signal unit.  is a diagram for describing an example of generating a transmission frame for one signal unit that is output from the display device  according to Embodiment 26.  illustrates the case where the distance is three meters. A drive frequency of a liquid crystal panel that is the display panel  of the display device  according to this embodiment is 120 Hz, and an image sensor of the imaging unit  of the reception device  operates at a frame rate of 30 fps. Moreover, a transmission frame of the display device  is output in synchronization with the drive frequency of the liquid crystal panel.  illustrates the case where one signal unit of a visible light communication signal that is output from the display device  is output four times according to the carousel scheme. The one signal unit includes four data items each having the same data length, and is coded to generate four blocks.","In , an arbitrary block of one transmission frame in a signal unit is transmitted twice when the distance is three meters. Accordingly, an arbitrary block is transmitted twice in one transmission frame, as illustrated in .","Blocks of the first transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block  so that Block  and Block  are each output twice. The reception device  exposes the image sensor in an imaging period of one frame rate, for the first transmission frame output from the display device . The reception device  generates a reception frame L which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L. Block  and Block  whose data are fully included in the reception frame L can be reconstructed as a visible light communication signal.","Blocks of the second transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block  so that Block  and Block  are each output twice. The reception device  exposes the image sensor in an imaging period of one frame rate, for the second transmission frame output from the display device . The reception device  generates a reception frame L+1 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+1. Block  and Block  whose data are fully included in the reception frame L+1 can be reconstructed as a visible light communication signal.","Blocks of the third transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block  so that Block  and Block  are each output twice. The reception device  exposes the image sensor in an imaging period of one frame rate, for the third transmission frame output from the display device . The reception device  generates a reception frame L+2 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+2. Block  and Block  whose data are included in the reception frame L+2 can be reconstructed as a visible light communication signal.","Blocks of the fourth transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; and Block  so that Block  and Block  are each output twice. The reception device  exposes the image sensor in an imaging period of one frame rate, for the fourth transmission frame output from the display device . The reception device  generates a reception frame L+3 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+3. Block  and Block  whose data are fully included in the reception frame L+3 can be reconstructed as a visible light communication signal.","As described above, it is possible receive, in each reception frame, one of the blocks resulting from an arbitrary block included in the transmission frame being output twice. Thus, two different blocks can be received from each of the reception frames.",{"@attributes":{"id":"p-2581","num":"2580"},"figref":["FIG. 380","FIG. 380","FIG. 380"],"b":["1504","1500","1521","1520","1500","1500"]},"In , an arbitrary block of one transmission frame in a signal unit is transmitted four times when the distance is eight meters. Accordingly, an arbitrary block is transmitted four times in one transmission frame, as illustrated in .","Blocks in the first transmission frame that is output from the display device  are arranged so that Block  is output four times. The reception device  exposes the image sensor in an imaging period of one frame rate, for the first transmission frame output from the display device . The reception device  generates a reception frame L which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L. Block  whose data is fully included in the reception frame L can be reconstructed as a visible light communication signal.","Blocks in the second transmission frame that is output for the second time from the display device  are arranged so that Block  is output four times. The reception device  exposes the image sensor in an imaging period of one frame rate, for the second transmission frame output from the display device . The reception device  generates a reception frame L+1 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+1. Block  whose data is fully included in the reception frame L+1 can be reconstructed as a visible light communication signal.","Blocks in the third transmission frame that is output from the display device  are arranged so that Block  is output four times. The reception device  exposes the image sensor in an imaging period of one frame rate, for the third transmission frame output from the display device . The reception device  generates a reception frame L+2 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+2. Block  whose data is fully included in the reception frame L+2 can be reconstructed as a visible light communication signal.","Blocks in the fourth transmission frame that is output from the display device  are arranged so that Block  is output four times. The reception device  exposes the image sensor in an imaging period of one frame rate, for the fourth transmission frame output from the display device . The reception device  generates a reception frame L+3 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+3. Block  whose data is fully included in the reception frame L+3 can be reconstructed as a visible light communication signal.","As described above, it is possible receive, in each reception frame, one of the blocks resulting from an arbitrary block included in the transmission frame being output four times. Thus, one block can be received from each of the reception frames.","[3-6. Advantageous Effects, Etc.]","As described above, according to this embodiment, the visible light communication processing unit determines the number of identical blocks to be included in a transmission frame and generates a plurality of transmission frames for a signal unit, according to a distance between the display device and the reception device capable of receiving a visible light communication signal that has been output.","This allows the display device  to output a plurality of transmission frames by changing the number of times of transmission of blocks according to the distance between the display device  and the reception device , thereby enabling the reception device  to reconstruct a visible light communication signal.","The display device  according to this embodiment is particularly effective in the case where the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames are output from the display device  in synchronization with the drive frequency of the liquid crystal panel.","It should be noted that it is desirable that the distance between the display device  and the reception device  can be preset by the display device  and further can be changed as necessary according to the purpose or the placement state of the display device .","The reception device , in specifying a distance, may transmit a setting request to the display device  via wireless communications such as Wireless Fidelity (Wi-Fi), Bluetooth\u00ae, and Long Term Evolution (LTE).","In addition, the distance may be estimated by either the display device  or the reception device  using a sensor or a camera.","Furthermore, the generated transmission frame in this embodiment is an example, and this example is not limiting.","In addition, in this embodiment, when two blocks are output more than one time in a transmission frame, the two blocks are output the same number of times. However, it is not necessary to output the two blocks the same number of times.","The following describes Embodiment 27 with reference to  to .","[4-1. Configuration of Visible Light Communication System]","A visible light communication system according to this embodiment has the same structure as the visible light communication system S described in Embodiment 24. The following description of the visible light communication system according to this embodiment focuses on differences from the visible light communication system S.","[4-2. Inserting Blank]",{"@attributes":{"id":"p-2601","num":"2600"},"figref":"FIG. 381","b":["1504","1500","1521","1520","1500","1500"]},"According to this embodiment, a blank having the same size as the block is inserted into the transmission frames in such a way that the same blocks are not at the same position therein.","In , blocks and blanks in the first transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank. The reception device  exposes the image sensor in an imaging period of one frame rate, for the first transmission frame output from the display device . The reception device  generates a reception frame L which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L. Only Block  and Block  whose data are fully included in the reception frame L can be reconstructed as a visible light communication signal.","Blocks and blanks in the second transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank. Exposure is performed on the image sensor in an imaging period of one frame rate, for the second transmission frame output from the display device . The reception device  generates a reception frame L+1 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+1. Only Block  and Block  whose data are fully included in the reception frame L+1 can be reconstructed as a visible light communication signal.","Blocks are blanks in the third transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank. Exposure is performed on the image sensor in an imaging period of one frame rate, for the third transmission frame output from the display device . The reception device  generates a reception frame L+2 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+2. Only Block  whose data is fully included in the reception frame L+2 can be reconstructed as a visible light communication signal.","Blocks and blanks in the fourth transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank. Exposure is performed on the image sensor in an imaging period of one frame rate, for the fourth transmission frame output from the display device . The reception device  generates a reception frame L+3 which is a captured image based on exposure data. The reception device  reconstructs a visible light communication signal from the reception frame L+3. Only Block  whose data is fully included in the reception frame L+3 can be reconstructed as a visible light communication signal.","It should be noted that a signal pattern of a blank to be inserted may be any pattern as long as the pattern is different from data included in a signal unit.","As described above, when the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames are output from the display device  in synchronization with the drive frequency of the liquid crystal panel, it is possible, by inserting a blank to the transmission frames for one signal unit, to avoid synchronization of timing of turning ON and OFF of the backlight  of the display device  with the drive frequency of the liquid crystal panel, and to reconstruct all of Block , Block , Block , and Block  of the one signal unit as a visible light communication signal even when the same transmission frame is output four times.","In addition, by setting a size of a blank to be inserted to the same size as a size of a block, it is possible to prevent luminance of an image signal from fluctuating, and the blank is also effective as a luminance adjusting period.","It should be noted that although it has been described that the size of a blank to be inserted is set to the same size as the size of a block, the size of the blank to be inserted is not limited to this example. It is sufficient to determine the size of a blank to be inserted in such a way that the timing of turning ON and OFF of the backlight  of the display device  is not in synchronization with a drive frequency of the liquid crystal panel.","In addition, the size of each blank to be inserted is not necessarily the same size.","Furthermore, the example of generating a transmission frame in which a blank is inserted is not limiting.",{"@attributes":{"id":"p-2613","num":"2612"},"figref":"FIG. 382A"},"In , a blank is provided at the end of the transmission frame, and the order of transmitting blocks of each transmission frame is different as described in Embodiment 24. Accordingly, blocks and blanks in the first transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank. Blocks and blanks in the second transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank. Blocks and blanks in the third transmission frame that is output from the display device  are arranged in the following order: Block ; Block ; Block ; Block ; and a blank.",{"@attributes":{"id":"p-2615","num":"2614"},"figref":"FIG. 382B"},"In , a blank is provided next to each block of the transmission frame. More specifically, blocks and blanks in the transmission frame that is output from the display device  are arranged in the following order: Block; a blank; Block ; a blank; Block ; a blank; Block ; and a blank. The size of a blank to be inserted is a length of a block\u00d7\u03b1 (\u03b1 is a decimal of 0<\u03b1\u22661), and \u03b1 is determined in such a way that the timing of turning ON and OFF of the backlight  of the display device  is not in synchronization with a drive frequency of the liquid crystal panel.",{"@attributes":{"id":"p-2617","num":"2616"},"figref":"FIG. 382C"},"In , a blank is provided next to an arbitrary block of the transmission frame. More specifically, blocks and blanks in the transmission frame that is output from the display device  are arranged in the following order: Block ; a blank; Block ; a blank; Block ; and Block .","[4-3. Operations of Visible Light Communication Signal Processing Unit]","Embodiment 27 is different from Embodiment 24 mainly in the operation of the visible light communication signal processing unit . The following describes the operation of the visible light communication signal processing unit .  is a flowchart for describing the operation of the visible light communication signal processing unit  of the display device  according to Embodiment 27.","Operations in step S and step S are the same as the operations described in Embodiment 24.","(Step S) The visible light communication signal processing unit  determines a position of inserting a blank in a transmitting unit.","(Step S) The visible light communication signal processing unit  determines a size of the blank.","Operations in step S to step S are the same as the operations described in Embodiment 24.","[4-4. Advantageous Effects, Etc.]","As described above, in the display device according to this embodiment, the visible light communication processing unit inserts a blank into at least one transmission frame among a plurality of transmission frames for one signal unit.","With this, it is possible, by inserting a blank to the transmission frames for one signal unit, to avoid synchronization of timing of turning ON and OFF of the backlight  of the display device  with a drive frequency of a liquid crystal panel, and to reconstruct a visible light communication signal by the reception device .","The display device  according to this embodiment is particularly effective in the case where the drive frequency of the liquid crystal panel and the frame rate of the image sensor are in the relationship of an integral multiple or a unit fraction, and the transmission frames are output from the display device  in synchronization with the drive frequency of the liquid crystal panel.","Embodiments 24 to 27 are described above as examples of a technique of the present disclosure. The technique of the present disclosure is not limited to the examples described above, and is applicable also to an embodiment including changes, substitutions, additions, omissions, etc. In addition, it is also possible to combine the structural elements described in Embodiments 24 to 27 above to form a new embodiment.","It should be noted that although generating a transmission frame in the case where the transmission frames are output in synchronization with a drive frequency of a liquid crystal panel is exemplified, the display device according to the present disclosure is not limited to this example.","For example, even when a transmission frame is output from the display device not in synchronization with a drive frequency of a liquid crystal panel, this embodiment is effective in the case where a carrier frequency for outputting the transmission frame is an integral multiple of a frequency of an image sensor.","In addition, although the case where the display panel of the display device is a liquid crystal panel has been described, this example is not limiting.","For example, even when the display device is a signboard including an image film which is illuminated from behind by an LED or the like, this embodiment is effective in the case where a carrier frequency of a transmission frame that is output from the display device is an integral multiple of a frequency of an image sensor of the reception device.","The display device according to the present disclosure is applicable to display devices capable of outputting a visible light communication signal. Examples of such display devices include: household devices such as televisions, personal computers, and tablet terminals; outdoor signage terminals; information terminals; and information display devices.","(Summary)","The display device according to a first aspect of the present disclosure is a display device capable of outputting a visible light communication signal including a plurality of signal units according to a carousel scheme, and includes: a display panel which displays an image signal; a visible light communication processing unit which codes the signal units, divides each of the signal units into a plurality of blocks, and generates a plurality of transmission frames using the plurality of blocks to generate a backlight control signal; and a backlight which illuminates the display panel from behind based on the backlight control signal. The plurality of blocks are arranged in different orders in at least two of the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit.","The display device according to a second aspect of the present disclosure is the display device according to the first aspect, in which, among the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit, at least two adjacent transmission frames include identical blocks.","The display device according to a third aspect of the present disclosure is the display device according to the first aspect, in which at least one of the plurality of transmission frames for one of the signal units generated by the visible light communication processing unit includes a plurality of identical blocks, and each of the plurality of blocks is included in one of the plurality of transmission frames.","The display device according to a fourth aspect of the present disclosure is the display device according to the third aspect, in which the visible light communication processing unit detects a region of the display panel that has luminance higher than or equal to predetermined luminance, determines the number of identical blocks to be included in the transmission frame according to a size of the region, and generates the plurality of transmission frames for each of the signal units.","The display device according to a fifth aspect of the present disclosure is the display device according to the third aspect, in which the visible light communication processing unit determines the number of identical blocks to be included in the transmission frame according to a distance between the display device and a reception device capable of receiving the visible light communication signal that has been output, and generates the plurality of transmission frames for each of the signal units.","The display device according to a sixth aspect of the present disclosure is the display device according to the first aspect, in which the visible light communication processing unit inserts a reset signal between two adjacent ones of the signal units.","The display device according to a seventh aspect of the present disclosure is the display device according to the first aspect, in which the visible light communication processing unit inserts a blank into at least one of the plurality of transmission frames for one of the signal unit.","The display method according to an eighth aspect of the present disclosure is a display method that allows output of a visible light communication signal including a plurality of signal units according to a carousel scheme, and includes: a first step of coding the signal units, dividing the signal units into a plurality of blocks, generating a plurality of transmission frames to be output according to the carousel scheme using the plurality of blocks, and outputting the transmission frames as a backlight control signal; and a second step of controlling a backlight based on the backlight control signal. The plurality of blocks are arranged in different orders in at least two of the plurality of transmission frames for one of the signal units generated in the first step.",{"@attributes":{"id":"p-2644","num":"2643"},"figref":"FIG. 384"},"Specifically, (a) of  illustrates video including a plurality of pictures, (b) of  illustrates ON and OFF control of a backlight of a video display device performed when the visible light communication is OFF, and (c) of  illustrates ON and OFF control of the backlight of the video display device performed when the visible light communication is ON.","As illustrated in (a) of , when video  including a plurality of pictures P, P, P, P, P, P, . . . , is reproduced, the plurality of pictures P, P, P, P, P, P, . . . , are displayed on the video display device at time t, t, t, t, t, t, . . . , respectively. Note that time t is a point of time at which the video  starts being displayed, and may be an absolute point in time or may be a point of time selected by a user. Time t, t, t, t, t, . . . , are points of time at a predetermined time interval \u0394t starting from time t. In other words, time t, t, t, t, t, . . . , are points of time determined in a cycle (at the predetermined time interval \u0394t).","When the video  is reproduced, some liquid crystal displays, in particular, perform control of inserting an all-black picture between adjacent pictures in order to reduce the occurrence of blurred images being displayed as the video . In the case of such a video display device, at time t, t, t, t, t, t, . . . , between time t, t, t, t, t, t, . . . at which the plurality of pictures P, P, P, P, P, P, . . . , are displayed, the backlight of the video display device is turned OFF under control as illustrated in (b) of  in order that the all-black pictures are inserted. In other words, the control is such that the backlight is turned ON at time t, t, t, t, t, t, . . . , at which the plurality of pictures P, P, P, P, P, P, . . . , are displayed, and the backlight is turned OFF at time t, t, t, t, t, t, . . . .","Turning OFF of the backlight while visible light communication is performed, however, results in loss of the communication during the period in which the backlight is OFF. Therefore, as illustrated in (c) of , the control is performed such that the backlight remains ON even while the video  is being reproduced when the visible light communication is performed (that is, when the VLC is ON). Thus, the transmitting apparatus in this case switches the control between keeping the backlight ON as in (c) of  when the visible light communication is performed, and repeating turning ON and OFF of the backlight as in (b) of  when the visible light communication is not performed. With this, the occurrence of communication loss can be reduced when the visible light communication is performed, and the occurrence of blurred images being reproduced as the video  can be reduced when the visible light communication is not performed.","In this embodiment, how to send a protocol of the visible light communication is described.",{"@attributes":{"id":"p-2650","num":"2649"},"figref":["FIG. 385","FIG. 386"]},"First, a logical data error correction code assigning unit  assigns a logical data correction code  which is an error correction code to logical data  which is to be used in the app layer.","Next, a logical data dividing unit  divides the logical data  and the logical data correction code  into data parts of such a size that the data parts can be transmitted, to generate a plurality of divided logical data items . Furthermore, the logical data dividing unit  assigns a dividing type  and an address  to each of the divided logical data items .","A data modulation unit  converts the data generated by the logical data dividing unit , into a data sequence that can be transmitted, to generate physical data  that is to be transmitted.","Note that the logical data error correction code assigning unit  uses a coding scheme involving CRC, Reed-Solomon codes, or the like according to the size of logical data or the status of the transmission path. There are cases where the logical data correction code  is assigned to the start of the logical data , where the logical data correction code  is assigned to the end of the logical data , and where the logical data correction code  is provided at a specified position of the logical data .","Note that the logical data dividing unit  can vary the size of data that is to be obtained by the division, to determine a limit distance and a reception speed that allow signals to be received via the visible light communication. Furthermore, by varying the dividing method, the logical data dividing unit  is capable of not only improving resistance to burst errors in addition to error resilience provided by way of the logical data correction code  and a physical data correction code , but also improving confidentiality at the time of decoding the data.","Note that the data modulation unit  is capable of brightness control or modulation percentage control by varying quantization or sampling data equivalent to one bit of logical data depending on the device characteristics of a visible light communication transmission unit (for example, a lighting device is required to place the highest priority to maintain brightness, and a display is required to be compatible with video or still images) regardless of the type of modulation such as PPM or Manchester modulation. For example, the data modulation unit  is capable of brightness control by switching between a process using binary values such as the case where \u201c1\u201d of physical data indicates a state where light is being emitted and \u201c0\u201d of physical data indicates a state where no light is being emitted and a process with the settings in which \u201c2\u201d indicates 100% brightness of light emission, \u201c1\u201d indicates 50% brightness of light emission, and \u201c0\u201d indicates 0% brightness of light emission. Furthermore, with the settings in which \u201c1\u201d of physical data indicates a state where light is being emitted and \u201c0\u201d of physical data indicates a state where no light is being emitted, the data modulation unit  can switch, for example, between modulating logical data \u201c01\u201d into physical data \u201c0100\u201d and modulating the logical data \u201c01\u201d into physical data \u201c11001111,\u201d to control the average brightness depending on the transmission size of the physical data.","Next, the physical data error correction code assigning unit  assigns the physical data correction code  which is an error correction code to the physical data  generated by the data modulation unit .","Next, a physical data header inserting unit  assigns a header  for indicating the start position of the physical data  to the physical data . The resultant data is transmitted by the visible light communication transmission unit as visible light communication data.","Note that the physical data error correction code assigning unit  uses a coding scheme involving CRC, Reed-Solomon codes, or the like according to the size of the physical data  or the status of the transmission path. There are cases where the physical data correction code  is assigned to the start of the physical data , where the physical data correction code  is assigned to the end of the physical data , and where the physical data correction code  is provided at a specified position of the physical data .","Note that the physical data header inserting unit  inserts, as a header, preamble data with which a visible light communication reception unit can identify the start of the physical data of the visible light communication data. The preamble data to be inserted is a data sequence which never appears in data obtained by combining the physical data  and the physical data correction code  which are to be transmitted. The physical data header inserting unit  can control a flicker level and necessary brightness of the visible light communication transmission unit by changing the size of the preamble data and a preamble data sequence. Furthermore, the preamble data can be used by the visible light communication reception unit, for example, to identify the type of the device. For example, the preamble data is set in such a way that the difference between the brightness of combined data of the physical data  and the physical data correction code  being transmitted and the brightness of the preamble data being transmitted is minimized, and thus it is possible to reduce flicker. In addition, it is possible to make an adjustment to reduce the brightness of the preamble data by reducing the length of light emission in the preamble.","Furthermore, a general interleaving method can be used in the dividing process by the logical data dividing unit .  is a diagram for describing the dividing process performed by the logical data dividing unit .",{"@attributes":{"id":"p-2662","num":"2661"},"figref":["FIG. 387","FIG. 387","FIG. 387"],"b":["1702","1711","1712","1713","1702","1713","1711","1712","1713"]},"Furthermore, as illustrated in , the logical data dividing unit  may generate a plurality of divided logical data items  by defining the number of skips required to divide the logical data, and assigning, sequentially from the start, the number of bits of the logical data  and the logical data correction code  that is equal to the number of skips to each of the divided logical data items .","In this case, when the logical data dividing unit  arbitrarily selects the number of skips, it is possible to provide confidentiality such that a visible light communication reception unit that is not informed of the number of skips is not able to reconstruct the logical data. Note that the logical data dividing unit  may perform the dividing process by using a hash value output as a result of applying a hash function based on the arbitrary value, or may use an arbitrary arithmetic expression according to which a selected bit for division is uniquely identified.","Furthermore, the logical data dividing unit  can use time as an arbitrary value to provide confidentiality such that data can be received only at specified time. Moreover, the logical data dividing unit  can use a television channel number as an arbitrary value as well, to develop a service in which data can be received only on a specified channel. In addition, the logical data dividing unit  can use a location-related value as an arbitrary value such that data can be used only at the location.","Note that the present disclosure may include the following embodiments.","A transmitter includes a visible light transmission unit and a human sensor unit. A person is sensed by the human sensor, and then transmission starts. The transmission is performed in a direction in which the person is sensed by the human sensor. With this, power consumption can be reduced.","A receiver receives an ID of the transmitter, adds address information or current position information thereto, and transmits resultant data. A server transmits, to the receiver, a code for providing settings that are most appropriate for the received address or position. The receiver displays, on a screen, the code received from the server, and thus prompts a user to configure the transmitter with the settings. This makes it possible, for example, to configure rice cookers, washing machines, and the like with the most appropriate settings for water quality in a residential area.","The receiver changes the setting of exposure time for each of the captured frames to receive a visible light signal in a frame captured with short exposure time and receive another signal or a marker, for example, a two-dimensional barcode, or perform object recognition, image recognition, etc., in a frame captured with long exposure time. Thus, it is possible to receive visible light and receive another signal or marker at the same time.","The receiver makes a small change to the exposure time for each frame, and captures images with different exposure time. With this, even when the modulation frequency of the transmission signal is unknown, the captured images include an image of a frame captured with appropriate exposure time, allowing the signal to be demodulated. When a plurality of images based on the same signal is captured with different exposure time, it is possible to demodulate a reception signal more efficiently.","When the receiver receives an ID included in a predetermined range, the receiver directly sends the received ID to another processing unit without sending an inquiry to the server. With this, a quick response can be obtained. Furthermore, processing can be performed even when the receiver cannot be connected to the server. In addition, it is possible to check operation before setting content in the server.","The transmitter represents a transmission signal by way of amplitude modulation. Here, the duration of one of a low-luminance state and a high-luminance state is the same in a plurality of symbols representing different signals. This enables the signal representation even under a low-frequency clock control.","The transmitter registers a transmission
