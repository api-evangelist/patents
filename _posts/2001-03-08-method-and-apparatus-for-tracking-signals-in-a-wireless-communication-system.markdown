---
title: Method and apparatus for tracking signals in a wireless communication system
abstract: A method and apparatus for tracking signals in a wireless communication system. In one embodiment, a base station includes a rake antenna having multiple fingers. When any of the fingers goes out of lock, the base station waits a predetermined time period and then adjusts the lock detect filter. The adjustment is based on comparison of received signal energy to an adjusted energy threshold. The comparison may result in an increased energy level of the filter. In one embodiment, if a mobile station is in soft hand-off, the base station ignores the lock state of the fingers and transmits power control information based on the received signal energy. If the mobile station is not in soft hand-off a predetermined power control pattern is applied for gradual power adjustment.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07068707&OS=07068707&RS=07068707
owner: Qualcomm, Inc.
number: 07068707
owner_city: San Diego
owner_country: US
publication_date: 20010308
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["REFERENCE TO CO-PENDING APPLICATIONS","FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS"],"p":["The present invention is related to U.S. patent application Ser. No. 09\/624,319, filed Jul. 24, 2000, entitled \u201cMETHOD AND APPARATUS FOR PROCESSING A MODULATED SIGNAL USING AN EQUALIZER AND A RAKE RECEIVER,\u201d assigned to the assignee hereof and hereby expressly incorporated by reference.","The present invention relates to communications. More particularly, the present invention relates to a novel and improved method and apparatus for tracking signals in a wireless communication system.","In a wireless communication system, communications between a base station and mobile users are affected by the motion of the mobile user(s) as well as the environment of the geographical coverage area. The communication link from the base station to the mobile user(s) is referred to as the Forward Link. The communication link from the mobile user(s) to the base station is referred to as the Reverse Link. The base station tracks the mobile user(s) by signals received via the Reverse Link. Degradation of the Reverse Link impacts the ability of the base station to track and communicate with mobile user(s). Degradation may be caused by shadowing, interfrequency searching, fading, blocking, monitoring, such as monitoring other systems, and other effects. When the base station loses the Reverse Link, the base station is no longer able to track the mobile user(s). Once a link is lost, recovery becomes difficult.","There is a need, therefore, for a method and apparatus for the base station to detect an anticipated loss of the Reverse Link prior to actual loss. Additionally, there is a need for a method and apparatus for a base station to adjust receiver operation upon identification of a problem.","The disclosed embodiments provide a novel and improved method for tracking signals in a wireless communication system. According to one aspect, in a wireless communication system having a rake receiver with multiple fingers, a method includes assigning a unique path to each of the multiple fingers, determining whether all fingers are in a lock state, maintaining path assignments of the multiple fingers, comparing energy of a received signal to a threshold, adjusting a lock filter in response to the comparison.","In another aspect, a transceiver includes a rake antenna having a plurality of fingers, wherein the plurality of fingers are adapted to receive multipath signals, and a lock detector coupled to the rake antenna and operative to filter a received signal and operative to adjust the filtering based on a lock state of the fingers.","In still another aspect, a method for tracking a mobile station in a wireless communication system includes determining if the mobile station is in soft hand-off, and ignoring a lock state of a finger if the mobile station is in soft hand-off, or transmitting a predetermined power control pattern if the mobile station is not in soft hand-off.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1","b":["10","12","14","16","16","10","12","14"]},"In a CDMA system, resources are allocated to all simultaneous users, wherein the transmission power is controlled to a minimum required to maintain a given Signal-to-Noise Ratio, SNR. The SNR is typically determined by a desired or required performance level. Signals from other users become interference during demodulation of a given encoded signal. Additionally, as signals are transmitted within a geographical environment, the terrain and objects cause the transmitted signals to be reflected and refracted, resulting in replicated signals, or multipaths, that are received at a receiver. Multipaths are made up of a group of reflections from objects, wherein no one of the multipaths is dominant. The different reflected signal paths arrive at the receiver at different times, and may have different amplitudes and phases.","The structures of the individual propagation paths can be identified and potentially exploited when they are distinguished from each other. In a spread spectrum system using pseudorandom sequences, such as Pseudorandom Noise, PN, codes, the time duration, T, of an individual bit or chip of the spread signal is inversely proportional to the spreading bandwidth. Note that Tis referred to as the chip duration. The individual propagation paths may be distinguished if mutually separated by delays greater than T. The amplitudes of signals of a given path are dependent on relative propagation distances, as well as the reflective and\/or refractive properties of the terrain, buildings, and other elements of the environment, etc. In some cases, distinguishable multipath components will actually be linear combinations of indistinguishable paths of varying amplitudes, wherein the amplitude appears to be Rayleigh-distributed with uniformly distributed phase. By identification of multipath components, the energy of each may be obtained and used for demodulation of the received signal.","It is possible to use a rake type receiver structure to exploit the diversity of a spread spectrum system. A rake receiver is detailed by R. Price and P. E. Green, Jr. (1958) in \u201cA Communication Technique for Multipath Channels,\u201d Proceeding of the IRE, vol. 46, pp. 555\u2013570, which is hereby expressly incorporated by reference. A rake type receiver typically includes a searcher element and a number of finger processors.  illustrates a rake receiver , wherein the received signal is provided to multipliers  and . The received signal is processed with carrier components I and Q in multipliers , , respectively, and the results are provided to waveform matched filters , , respectively. The outputs of the waveform matched filters ,  are provided to parallel demodulators . The parallel demodulators  are optimized for multipath propagation paths. Each of the multipath component demodulators is referred to as a \u201cfinger\u201d of the rake receiver . The parallel demodulators  form weighted, phase-adjusted, and delay-adjusted components. The parallel demodulators  are made up of L fingers. The fingers are assigned to process the strongest multipaths to generate demodulated symbols for those multipaths. The rake receiver  then combines the demodulated symbols from all assigned finger processors to generate recovered symbols that are estimates of the transmitted data at summation node . The rake receiver  efficiently combines energy received via multiple signal paths. The rake receiver  may be used in a receiver or a transceiver, such as a base station, mobile station, access terminal, access network, remote station, etc. The rake receiver  may be implemented with one antenna element or multiple antenna elements, such as an antenna array.","Returning to , system  may employ rake receivers, such as receiver  of , in base stations , , or mobile station .  illustrates a receiver portion of base station  having a rake receiver according to one embodiment. Antenna array  receives signals on the Reverse Link, and transmits signals on the Forward Link. The antenna array  includes multiple fingers for receiving multiple signals simultaneously. The antenna array  receives multipath signals generated by mobile stations  within system . The antenna array  is coupled to the transceiver circuitry  via a rake receiver  and a communication bus . The rake receiver  may be similar to the rake receiver  of , or may have an alternate configuration. The rake receiver  is operative to process multipaths in a spread spectrum wireless communication system. The rake receiver  allows base station  to take advantage of the multipaths of transmitted signals of a given channel. The rake receiver  demodulates and uses the signal energy of all paths. The rake receiver  processes the received signals and provides the information to a communication bus .","The transceiver circuitry  includes a processor for processing signals from the various fingers of the antenna array . The transceiver circuitry  communicates with a lock detector  and a threshold calculation unit . For each finger of antenna array , the lock detector  compares the received signal to an energy threshold. When the received signal is above the energy threshold, the lock detector determines that the receiving path is good for reception and therefore \u201clocks\u201d onto the current path of the signal. When a received signal is below the energy threshold, the lock detector  determines that the current path is not good for reception of the signal and, therefore, the corresponding finger of the antenna may be adjusted to receive signals of a different path. Adjustment(s) involving filter coefficient(s) or alternate filter configuration(s) may be done in the lock detector , discussed hereinbelow.","The transceiver circuitry  is also coupled to the threshold calculation unit . The threshold calculation unit  adjusts the threshold used for comparison by the lock detector  in response to changes in the energy level of the received signal. In one scenario, an increased noise level results in a higher threshold level requirement. Threshold calculation unit  generates multiple energy thresholds depending on the target operation of the system  and the requirements of transmission.","In , the rake receiver , the lock detector , and the threshold calculation unit  are illustrated as separate functional blocks for clarity of understanding. Alternate embodiments may combine the functionality of these blocks in an alternate manner, for example, as within the rake receiver . Functionally, the rake receiver , the lock detector , and the threshold calculation unit  lock onto the different multipath components. When a time reference is used, the different multipath components are separately identified as distinct echoes of the signal separated in time for a given antenna. The separately identified components are then unified in phase and combined to yield a final composite received signal.","For each finger of the rake receiver , the lock detector  tracks the received signal generating a long-time average filtered signal. The average is compared to a lock threshold energy level. The comparison results in a reception decision, wherein good reception indicates the finger has locked onto a good propagation path. The lock detector  also provides a fast recovery when the average filtered signal falls below the threshold energy level. In this case, the lock detector  compares the pre-filtered received signal to an adjusted threshold energy level. The adjusted threshold may be greater than the lock threshold energy level providing a conservative recovery criteria, wherein a higher energy level is required to recover the finger. Conversely, the adjusted threshold may be less than the lock threshold energy level providing a more liberal recovery criteria, wherein a lesser energy level seeks to recover the finger if at all possible.","For recovery, or fast recovery, the received signal energy is compared to an adjusted threshold energy level, wherein if the received signal energy is greater than or equal to the adjusted threshold, an adjustment is made to signal filtering. The adjustment results in a different calculation of the long-time average filtered signal.",{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 3","FIG. 2"],"b":["24","22","20","22","30","24","20","30","30","30","30","32","32","42","42","12","42","26"],"sup":["F","F ","F ","F "],"sub":["LOCK","LOCK "]},"The output of comparator  is a LOCK signal indicating the result(s) of the comparison. The LOCK signal provides the lock status of a finger. In one embodiment, the LOCK signal is a binary indicator, wherein assertion indicates a lock condition, and negation indicates the finger has not locked onto a path or path component. Alternate embodiments may use a different polarity assignment. Similarly, the LOCK signal may include multiple bits that provide more detailed information regarding the lock condition. For example, one LOCK signal indicates the commitment of the lock condition, wherein the LOCK signal provides an indication of when the finger is trending toward an unlocked situation. As illustrated, the LOCK signal is coupled to the transceiver circuitry  via a switch. The lock detector  performs the comparison of energy levels for each finger of rake receiver .","While a given path of a finger remains in lock, signals received via that path continue to be processed by the transceiver circuitry . The lock condition corresponds to good reception on that path. However, when the finger goes out of lock, i.e., \u03b3is below E, reception has degraded and it may be necessary to reassign the finger to another path or provide for recovery of the finger by adjustment or reconfiguration of the lock filter . For a finger out of lock, one embodiment provides a first time period to allow the finger to autonomously recover, followed by additional time to adjust the filter components and\/or configuration. This additional time provides a last chance to recover the current path on a given finger. On expiration of the additional time, the finger may be reassigned to a new path. In one embodiment, reassignment is made to another radio frequency.","Specifically, when a given finger stays out of lock for a predetermined time period, T, the lock detector  attempts to adjust the lock filter . In this situation, an adjusted energy level threshold E\u2032is used for comparison to the pre-filtered received signal \u03b3. The result of the comparison provides feedback for adjustment of the lock filter . Note that one adjustment may be to ignore the filtering effects of lock filter , wherein the input to the lock filter  is provided as its output also. In this case, the transfer function describing the lock filter  is given as an impulse, i.e. h(t)=\u03b4(t). An alternate adjustment may be to increase the energy level of the lock filter , thus increasing the energy of received signals sufficient to provide a LOCK signal. According to one embodiment, adjustment of the lock filter  gives a weight to each of the filter samples, wherein greater weights are given to more recent samples of the received signal \u03b3. In this way, the lock filter  seeks to more accurately track the received signal \u03b3.","For the lock filter  adjustment, received signals \u03b3 are provided as an input to comparator . The signal \u03b3 received by the fingers is thus compared to an adjusted energy threshold E\u2032in comparator . The adjusted energy threshold E\u2032is generated by the generator . In one embodiment, the adjusted energy threshold E\u2032is responsive to threshold calculation unit . The output of comparator  is provided as an input to an AND gate . A second input to AND gate  is a wait state indicator provided by timer . The timer  allows the time period T for the lock detector  to settle onto a path. This takes into consideration the vagaries of a wireless system, such as the geographical and environmental conditions, as well as the movement of a mobile station. When the wait state T expires and the received signal is greater than the adjusted threshold level E\u2032, an adjustment is made to the lock filter . In one embodiment, a bit is generated by the AND gate  indicating either to by-pass the lock filter  or to allow filtering based on the polarity of the bit. In an alternate embodiment, multiple bits are provided as a message to adjust the filtering coefficients of the lock filter . The adjustment may assign weights to the samples of the lock filter  or may reduce the number of samples used to generate an average signal. Note that according to one embodiment, the threshold calculation unit  controls the generators  and .","Operation of each finger of the rake receiver  of base station  includes two states: LOCK and OUT OF LOCK.  provides a state diagram of operation of the rake receiver .  illustrates a plot of operation of rake receiver  with respect to the lock states. The LOCK state  corresponds to good reception of a path on the finger. The OUT OF LOCK state  corresponds to poor reception of a path on the finger. Once the finger acquires the LOCK state , the received signal \u03b3 is processed and filtered to determine the long-time average \u03b3. Each update of the filtered average \u03b3is then compared to the threshold E. A transition is made from state  to the OUT OF LOCK state  when \u03b3falls below the threshold E. When the finger acquires the state , the received signal \u03b3 is available for a recovery processing. While in state  the filtered average \u03b3is again compared to the threshold E. When the value of \u03b3is equal to or exceeds E, operation transitions back to state .","In one embodiment the value of Eis adjusted on transition from state  to state , wherein a first threshold E(i) is applicable when in state , and a second threshold E(i+1) is applicable when in state . In this way, a different energy threshold is used to trigger a transition to the IN LOCK state  than the energy threshold used to trigger a transition to the OUT OF LOCK state . The hysteresis type characteristic of such a scheme is illustrated in . The horizontal axis corresponds to threshold values, and the vertical axis corresponds to the state. Starting from an OUT OF LOCK state , a transition occurs at threshold E(i+1) to the IN LOCK state . Conversely, from the IN LOCK state  a transition to OUT OF LOCK state  occurs at a threshold E(i). In the illustrated embodiment, a higher threshold E(i+1) is used for transition to the IN LOCK state , so as to increase the certainty that the finger is locked onto a path having good reception. A lower threshold E(i) is used for transition to the OUT OF LOCK state , so as to allow for variations in signal strength that do not necessarily correlate to indicate poor reception.","According to one embodiment, expiration of the wait time T allows adjustment of the lock filter  and initiates a second time period, T, to allow time to effect recovery of the finger.  illustrates one scenario wherein a received signal \u03b3 and the associated filtered average \u03b3for one finger in rake receiver  are plotted as a function of time. Initially, the average \u03b3is above the threshold E, and therefore, the finger is in lock. At time tthe signal strength of the received signal \u03b3 is reduced below the threshold E. The filtered average \u03b3falls below Ethereafter at time t, triggering initiation of the time period T. During time period T no adjustment is made to the lock filter , but rather, the finger is given time to recover. Time period T allows for short-term variations and perturbations in the received signal for this finger.","Continuing with , at time tthe time period T expires, and time period T is initiated. During time period T the lock filter  may be adjusted to allow fast recovery of the finger. Adjustment of the lock filter  results in generation of an adjusted filtered signal (not shown). Time period T expires at time twhile both \u03b3 and \u03b3are below E. In this scenario, the finger did not recover and will be reassigned. In other words, at the expiration of time period T, effectively the total time period (T+T), if the finger has not recovered the finger is reassigned to an alternate path. Whereas if recovery occurs during time period T then the finger is in lock. Note that subsequent to time tthe signals \u03b3 and \u03b3rise above Eand would have allowed the finger to recover if T had expired at or around t. The determination of the actual time duration of time period(s) T,T may be predetermined to fixed values, or may be dynamically adjusted according to historical information and\/or heuristic determinations. In alternate embodiments, further signal processing may be used to determine the time period(s) T, T, wherein the determination may be a function of a Bit Error Rate (BER), a Frame Error Rate (FER), and\/or a data error rate. The energy level of the threshold value(s) Eand E\u2032are determined to optimize recovery of a finger over a variety of operating conditions and scenarios. For example, in one embodiment determination of threshold energy levels considers how many other fingers are in lock, wherein a more liberal threshold may be applied if no other fingers are in lock. Conversely, if all the other fingers are in lock, the determination may be to apply conservative threshold levels to increase the accuracy of the received signals.","When a finger is out of lock, time is provided to make filter adjustment to allow recovery. When recovery is not achieved, the fingers may be reassigned to alternate paths.  illustrates a method , according to one embodiment, for tracking signals in system  of . From the start, the timer periods T, T are initialized. The process then begins by tracking received signals on multiple fingers of antenna array  at step . A check is made at decision diamond  to determine if any of the fingers are out of lock. If at least one of the fingers is out of lock, processing continues to decision diamond , else processing returns to step  to continue tracking signals. At decision diamond , if the time period T has expired, the received signal is compared to an adjusted threshold E\u2032at decision diamond . If the time period T has not expired, the processing continues to decision diamond  to compare the filtered signal to a threshold E. In this way, the path assignment of the finger is maintained at least until expiration of time period T.","When any finger is determined to be out of lock at decision diamond , the finger path assignment is first maintained for a predetermined time period, T at decision diamond . As discussed hereinabove, the time period T is a wait period to allow for temporary outages from which the system will autonomously recover. The time period T may be a predetermined time period, or may be dynamically adjusted during operation. Additionally, the time period T may be based on historical and\/or statistical information relating to operation of system . If the finger is still out of lock after expiration of the time period T, processing continues to decision diamond . The energy of the received signal is compared to an adjusted energy level E\u2032at decision diamond . The comparison provides information for filtering adjustment, such as for lock filter  of . For sufficient energy, i.e. greater than E\u2032, the output of lock filter  is set equal to the input to lock filter  at step . For insufficient energy, i.e., less than or equal to E\u2032, energy is added to the lock filter  {step }. The adjustment of the energy level for the lock filter  results in an adjusted output for comparison with the energy threshold Ein comparator  of . After completion of the filtering adjustment, the process compares the filtered signal to the threshold Eat decision diamond . At this point, if there is sufficient energy to lock onto the signal, received signal processing continues at step . However, if there is still insufficient energy a second time period T is provided, wherein if the time period T has expired at decision diamond  the fingers are reassigned at step . Until the time period T expires, processing returns to decision diamond  where the energy is compared to E.","There are scenarios during operation when the base station  may desire to ignore the lock state of the fingers and provide power control irrespective of the quality of the received signals.  illustrates one embodiment of a method of 100 tracking signals in a wireless communication system. The process starts when signals are received at multiple fingers at step . A check is made to determine if the mobile station is in soft hand-off at decision diamond . Soft hand-off refers to the state of the mobile station wherein a mobile station communication is made to at least two base stations. As the mobile station moves from one coverage area to another, each base station communicates with the mobile station. The mobile station may then terminate a transmission with one base station in preference to another base station wherein the latter communication has a higher quality. If the mobile station is in soft hand-off, the base station ignores the lock state at step  and makes power control adjustments as a function of the energy of the received signal at step . If the mobile station is not in soft hand-off, the base station sends a predetermined pattern to the mobile station at step  for Power Control (PC), wherein the pattern instructs the mobile station to gradually adjust the power of the transmitted signal.","When a base station loses the Reverse Link from a mobile station, either temporarily or permanently, the base station may not be able to receive signals from the mobile station and therefore is unable to track the mobile station. Ideally, the base station will detect in impending Reverse Link loss and make the necessary adjustments. The base station may detect such potential problems by comparing the energy of received signals to a threshold energy level. When the base station detects such a problem, a decision is made that the mobile station is suffering a temporary outage. When the temporary outage lasts for an excessive time, it may become permanent. In one embodiment, to minimize the loss of Reverse Link signals at the base station during a temporary outage, the base station disables tracking of assigned fingers. This prevents tracking noise during the temporary outage. The base station then sets a relatively high threshold for finger reassignment, such that reassignment is performed on a high probability of the searcher finding a real path. Note that during such lockout time, the receiver may choose to perform fast recovery of a given finger.","Thus a novel and improved method and apparatus for tracking signals in a wireless communication system has been described. Various examples, embodiments, aspects, and figures have been provided for clarity of understanding and not to exclude alternate embodiments within the spirit and scope of the invention. Those of skill in the art would understand that the data, instructions, commands, information, signals, bits, symbols, and chips that may be referenced throughout the above description may be represented by voltages, currents, electromagnetic waves, magnetic fields or particles, optical fields or particles, or any combination thereof. Similarly, while various embodiments are described with respect to a particular polarity scheme, assertion and negation are relative terms and not strictly limited to high or low logic levels.","Those of skill would further appreciate that the various illustrative logical blocks, modules, circuits, and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware, software, firmware and\/or combination(s) thereof. The various illustrative components, blocks, modules, circuits, and steps have been described generally in terms of their functionality. Whether the functionality is implemented as hardware, software, or firmware depends upon the particular application and design constraints imposed on the overall system. Skilled artisans recognize the interchangeability of hardware and software under these circumstances, and how best to implement the described functionality for each particular application. Additionally, with respect to flow diagrams, where possible functional steps may be interchanged in keeping with the spirit and scope of the present invention.","The various illustrative logical blocks, modules, circuits, and algorithm steps described in connection with the embodiments disclosed herein may be implemented or performed with a Digital Signal Processor (DSP), an Application Specific Integrated Circuit (ASIC), a Field Programmable Gate Array (FPGA) or other programmable logic device, discrete gate or transistor logic, discrete hardware components. A processor executing a set of firmware instructions, any conventional programmable software module and a processor, or any combination thereof designed to perform the functions described herein can be designed to implement the functionality described herein. The processor may advantageously be a microprocessor, but in the alternative, the processor may be any conventional processor, controller, micro controller, programmable logic device, array of logic elements, or state machine. The software module could reside in Random Access Memory; RAM; memory, flash memory, Read Only Memory; ROM; memory, Electrically Programmable ROM; EPROM; memory, Electrically Erasable Programmable ROM; EEPROM; memory, registers, hard disk, a removable disk, a CD-ROM, or any other form of storage medium known in the art. An exemplary processor is advantageously coupled to the storage medium so as to read information from, and write information to, the storage medium. In the alternative, the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a telephone or other user terminal. In the alternative, the processor and the storage medium may reside in a telephone or other user terminal. The processor may be implemented as a combination of a DSP and a microprocessor, or as two microprocessors in conjunction with a DSP core, etc.","It would be apparent to one of ordinary skill in the art, however, that numerous alterations may be made to the embodiments herein disclosed without departing from the spirit or scope of the invention. The previous description of the preferred embodiments is provided to enable a person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus, the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":["FIGS. 2\u20133","FIG. 1"]},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4B"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIGS. 6\u20137"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
