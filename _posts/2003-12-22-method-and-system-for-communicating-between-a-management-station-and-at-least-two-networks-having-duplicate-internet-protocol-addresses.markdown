---
title: Method and system for communicating between a management station and at least two networks having duplicate internet protocol addresses
abstract: A system and method for communicating between a management station and at least two networks having duplicate Internet Protocol (IP) addresses. An IP address for an IP data packet to be sent to at least one of an end device and the management station is recognized. A header of the IP data packet with a tag that identifies one of the duplicate IP networks within which the end device resides is modified. The IP data packet is routed, based on the tag, in accordance with a policy.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07451203&OS=07451203&RS=07451203
owner: Hewlett-Packard Development Company, L.P.
number: 07451203
owner_city: Houston
owner_country: US
publication_date: 20031222
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["Computer networks, such as Local Area Networks (LANs) and Metropolitan Area Networks (MANs) can be complex to operate. Corporations use network management software applications to maintain computer networks. The network management software applications can display the network topology and indicate any failures in the computer network. An example of a network management software application, is the Hewlett-Packard OpenView Network Node Manager (NNM) product.","Situations may occur in which it is necessary to manage networks which employ duplicate IP addresses. European Patent Application No. 1 251 657 A2 discloses a system and method for centrally managing private computer networks each of which has a network element assigned the identical IP address. This application discloses associating a separate virtual or physical interface at a management station with each domain. Accordingly, management data is exchanged between the management station and a particular domain through a domain-specific interface that is assigned its own IP address. This IP address is inserted as the source address in data transmitted from the management station, and is inserted as a destination address in data transmitted from a domain to the management station.","A system and method are provided for communicating between a management station and at least two networks having duplicate Internet Protocol (IP) addresses. An IP address of an IP data packet to be sent to at least one of an end device and the management station is recognized. A header of the IP data packet is modified with a tag that identifies one of the duplicate IP networks within which the end device resides. In accordance with a policy, the IP data packet is routed based on the tag. An exemplary computer readable medium contains a computer program for causing a computing device to perform the exemplary method.","In accordance with an exemplary embodiment a management station which communicates with at least two networks having duplicate IP addresses is provided. The management station includes a processor which provides an IP address for an IP data packet to be sent to an end device. The processor determines whether the end device resides in one of the at least two networks and the processor modifies a header of the IP data packet with a tag that identifies one of the duplicate IP networks if the end device resides in one of the at least two networks. A management station also includes a transmitter which transmits the IP data packet.","In accordance with an exemplary embodiment a router which communicates with a management station and at least two networks having duplicate IP addresses is provided. The router includes a processor which determines whether a received IP data packet with a particular IP address was transmitted from an end device in one of the at least two networks or whether the received IP data packet was transmitted to an end device in one of the at least two networks. The processor modifies a header of the IP data packet with a tag that identifies one of the duplicate IP networks within which the end device resides if the received IP data packet was transmitted from the end device. The router also includes a transmitter which transmits the received IP data packet according to a particular IP address. If the IP data packet was transmitted to the end device, the transmission is also based on a tag that identifies one of the duplicate IP networks within which the end device resides.","A method for a management station which communicates with at least two networks having duplicate Internet Protocol (IP) addresses is provided. An IP address for an IP data packet to be sent to an end device is provided. Whether the end device resides in one of the at least two networks is determined. A header of the IP data packet is modified with a tag that identifies one of the duplicate IP networks when the end device resides in one of the at least two networks. The IP data packet is transmitted. An exemplary computer readable medium contains a computer program for causing a computing device to perform the exemplary method.","A management station which communicates with at least two networks having duplicate Internet Protocol (IP) addresses is provided. The management station comprises means for processing to provide an IP address for an IP data packet to be sent to an end device, to determine whether the end device resides in one of the at least two networks, and to modify a header of the IP data packet with a tag that identifies one of the duplicate IP networks when the end device resides in one of the at least two networks. The management station also comprises means for transmitting the IP data packet.",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1","b":["110","120","112","114","116","120","130","122","140","124","150","126","112","114","116","122","124","126","130","140","150"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2A","b":["110","130","140","150","205","110","130","140","150","210","110"]},{"@attributes":{"id":"p-0018","num":"0017"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"chemistry":{"@attributes":{"id":"CHEM-US-00001","num":"00001"},"img":{"@attributes":{"id":"EMI-C00001","he":"30.40mm","wi":"73.58mm","file":"US07451203-20081111-C00001.TIF","alt":"embedded image","img-content":"table","img-format":"tif"}}}}},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"In accordance with exemplary embodiments the Type of Service field in the IP data packet header (i.e., bits - ) is used for the tag which identifies one of the duplicate IP networks. Specifically, the first six bits of the Type of Service field are used for the tag. The first six bits of the Type of Service field is typically employed for Differentiated Services Code Point (DSCP) for Quality of Service (QoS) in IP networks.","Referring again to , in steps , based on the tag, the management station  routes the IP data packet to one of the interfaces ,  or  in accordance with a policy. In step  the management station  sends the IP data packet to the router . In step  the router routes the IP data packet based on the IP address and the tag.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2B","b":["250","120","255","260","120","265","110"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 3","FIG. 3"],"b":["310","312","314","316","312","314","316","310"]},"The router  includes interfaces , , ,  and . Interfaces , , ,  and  can be virtual interfaces, physical interfaces, or a combination thereof. The router  receives IP data packets and recognizes an IP address in the IP data packet as being associated with an end device in one of two or more from networks with duplicate IP addresses. The router  will modify the tag in the header of the IP data packet with the appropriate Type of Service value based on the interface on which the router received the IP data packet. The router  can then route the modified IP data packet to the appropriate interface on the management station . When the management station  sends packets to end devices in networks with duplicate IP addresses, the router  routes the packets to the appropriate network based upon the interface of the management station from which the IP data packet was received by the router  and the tag in the Type of Service field.","The following is exemplary pseudo code for communication from a management station to a device located in one of at least two networks with identical IP addresses:",{"@attributes":{"id":"p-0025","num":"0024"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"For Management Station"]},{"entry":[{},"\u2002Get the Management IP interface and TOS\/DSCP value"]},{"entry":[{},"\u2003to use for the given IP address and Route"]},{"entry":[{},"\u2003Distinguisher (RD) {RD is used with IP address"]},{"entry":[{},"\u2003to uniquely identify address of destination"]},{"entry":[{},"\u2002Create a packet with the appropriate TOS\/DSCP"]},{"entry":[{},"\u2003value set in it {the packet will have the"]},{"entry":[{},"\u2003source IP as the management IP address and"]},{"entry":[{},"\u2003the destination as the IP address of the"]},{"entry":[{},"\u2003device"]},{"entry":[{},"\u2002Send the packet out."]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}}},"The following is exemplary pseudo code for communication from a device located in one of at least two networks with identical IP addresses to a management station:",{"@attributes":{"id":"p-0027","num":"0026"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"182pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"For policy router"]},{"entry":[{},"\u2003receive the packet on its appropriate"]},{"entry":[{},"\u2003\u2003interface"]},{"entry":[{},"\u2003look up its configuration to get the TOS\/DSCP"]},{"entry":[{},"\u2003\u2003value for any packet that is incoming on"]},{"entry":[{},"\u2003\u2003the interface"]},{"entry":[{},"\u2003set the TOS\/DSCP value on the packet"]},{"entry":[{},"\u2003send it to the management station"]},{"entry":[{},"}"]},{"entry":[{},"For the management station"]},{"entry":[{},"\u2003receive the packet"]},{"entry":[{},"\u2003look at the TOS\/DSCP, the destination address"]},{"entry":[{},"\u2003\u2003on the received packet to determine the"]},{"entry":[{},"\u2003\u2003RD from which the communication was"]},{"entry":[{},"\u2003\u2003sent"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"To enable policy based routing an access control list is created. The access control list specifies the traffic that match from the management station to the networks with duplicate IP addresses. The access control list is created as follows:\n\n","Next a route map that forwards based on the value in the type of service field is created as follows:\n\n","To allow packets destined for networks to be forwarded through the correct interface on the router, the policy is installed on the FastEthernet0 Interface in accordance with the following:\n\n","Class-maps for traffic from the networks with duplicate IP addresses to the management station are created as follows:\n\n","Traffic marking policies based on the class-map are defined as follows:\n\n","To apply the quality of service policy to the interface FastEthernet0 the policy is applied as follows:\n\n","The access control lists, route maps, class-maps and policies can be provided to routers from the management station if control of network devices is enabled in the management software.",{"@attributes":{"id":"p-0035","num":"0047"},"figref":"FIG. 4","b":["405","410","415","420","425","445","450","455","430","445","450"]},"Various aspects will now be described in connection with exemplary embodiments in terms of sequences of actions that can be performed by elements of a computer system. For example, it will be recognized that in each of the embodiments, the various actions can be performed by specialized circuits or circuitry (e.g., discrete logic gates interconnected to perform a specialized function), by program instructions being executed by one or more processors, or by a combination of both. Moreover, the exemplary embodiments can be considered part of any form of computer readable storage medium having stored therein an appropriate set of computer instructions that would cause a processor to carry out the techniques described herein.",{"@attributes":{"id":"p-0037","num":"0049"},"figref":"FIG. 5","b":["505","510","515","520","525","530","510","525"]},"The router  includes a means for processing, for example a processor  and a means for transmitting, for example a network interface card . Processor  is configured to determine whether a received IP data packet with a particular IP address was transmitted from an end device in one of the at least two networks, or whether the received IP data packet is transmitted to an end device in one of the at least two networks. Processor  is also configured to modify a header of the IP data packet with a tag that identifies one of the duplicate IP networks within which the end device resides when the received IP data packet was transmitted from the end device. The router also includes a transmitter, for example network interface card , which transmits the received IP data packet according to a particular IP address. When the IP data packet is transmitted to the end device, the transmitter  is configured to base the transmission on a tag that identifies one of the duplicate IP networks within which the end device resides.","Those skilled in the art will appreciate that software, including instructions for causing a computing device or system to perform the methods or processes described herein, can be stored on a machine-readable medium. For example, the software can be embodied in any computer readable medium for use by or in connection with an instruction execution system, apparatus, or device, such as a computer based system, processor containing system, or other system that can fetch the instructions from the instruction execution system, apparatus, or device and execute the instructions.","As used herein, a \u201ccomputer readable medium\u201d can be any means that can contain, store, communicate, propagate, or transport the program for use by or in connection with the instruction execution system, apparatus, or device. The computer readable medium can be, for example but not limited to, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, device, or propagation medium. More specific examples (a non exhaustive list) of the computer readable medium can include the following: an electrical connection having one or more wires, a portable computer diskette, a random access memory (RAM), a read only memory (ROM), an erasable programmable read only memory (EPROM or Flash memory), an optical fiber, and a portable compact disc read only memory (CDROM).","It will be appreciated by those of ordinary skill in the art that the present invention can be embodied in various specific forms without departing from the spirit or essential characteristics thereof. The presently disclosed embodiments are considered in all respects to be illustrative and not restrictive. The scope of the invention is indicated by the appended claims, rather than the foregoing description, and all changes that come within the meaning and range of equivalence thereof are intended to be embraced."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings provide visual representations which will be used to more fully describe the representative embodiments disclosed herein and can be used by those skilled in the art to better understand them and their inherent advantages. In these drawings, like reference numerals identify corresponding elements and:",{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 2A"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2B"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
