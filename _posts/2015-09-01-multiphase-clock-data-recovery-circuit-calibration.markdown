---
title: Multiphase clock data recovery circuit calibration
abstract: Methods, apparatus, and systems for clock calibration are disclosed. A method for clock data recovery circuit calibration includes configuring a first clock recovery circuit to provide a clock signal that has a first frequency and that includes a single pulse for each symbol transmitted on a 3-wire, 3-phase interface, and calibrating the first clock recovery circuit by incrementally increasing a delay period provided by a delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that is less than the first frequency and, when the first clock recovery circuit has a frequency that is less than the first frequency, incrementally decreasing the delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that matches the first frequency.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09485080&OS=09485080&RS=09485080
owner: QUALCOMM Incorporated
number: 09485080
owner_city: San Diego
owner_country: US
publication_date: 20150901
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION","Overview"],"p":["The present disclosure relates generally to high-speed data communications interfaces, and more particularly, to calibration of clock generation circuits in a receiver coupled to a multi-wire, multi-phase data communication link.","Manufacturers of mobile devices, such as cellular phones, may obtain components of the mobile devices from various sources, including different manufacturers. For example, an application processor in a cellular phone may be obtained from a first manufacturer, while an imaging device or camera may be obtained from a second manufacturer, and a display may be obtained from a third manufacturer. The application processor, the imaging device, the display controller, or other types of device may be interconnected using a standards-based or proprietary physical interface. In one example, an imaging device may be connected using the Camera Serial Interface (CSI) defined by the Mobile Industry Processor Interface (MIPI) Alliance. In another example, a display may include an interface that conforms to the Display Serial Interface (DSI) standard specified by the Mobile Industry Processor Interface (MIPI) Alliance.","A multiphase three-wire (C-PHY) interface defined by the MIPI Alliance uses a trio of conductors to transmit information between devices. Each of the three wires may be in one of three signaling states during transmission of a symbol over the C-PHY interface. Clock information is encoded in a sequence of symbols transmitted on the C-PHY interface and a receiver generates a clock signal from transitions between consecutive symbols. The maximum speed of the C-PHY interface and the ability of a clock and data recovery (CDR) circuit to recover clock information may be limited by the maximum time variation related to transitions of signals transmitted on the different wires of the communication link. A receiver may employ delay circuits to ensure that all of the conductors in the trio have assumed a stable signaling state before providing a sampling edge. The transmission rate of the link may be limited by the delay values used, and there is an ongoing need for clock generation circuits that can function reliably as signaling frequencies of multi-wire interfaces increase.","Embodiments disclosed herein provide systems, methods and apparatus that enable improved communications on a multi-wire and\/or multiphase communications link. The communications link may be deployed in apparatus such as a mobile terminal having multiple Integrated Circuit (IC) devices.","In an aspect of the disclosure, a method of data communication includes configuring a first clock recovery circuit to provide a clock signal that has a first frequency and that includes a single pulse for each symbol transmitted on a 3-wire, 3-phase interface, and calibrating the first clock recovery circuit. The first clock recovery circuit may be calibrated by incrementally increasing a delay period provided by a delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that is less than the first frequency and, when the first clock recovery circuit has a frequency that is less than the first frequency, incrementally decreasing the delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that matches the first frequency.","In an aspect of the disclosure, an apparatus for decoding data transmitted on a 3-wire 3-phase interface includes means for recovering signals from a 3-wire, 3-phase interface signals, including a first clock recovery circuit, means for configuring the first clock recovery circuit to provide a clock signal that has a first frequency and that includes a single pulse for each symbol transmitted on a 3-wire, 3-phase interface, and means for calibrating the first clock recovery circuit. The means for calibrating the first clock recovery circuit may be configured to incrementally increase a delay period provided by a delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that is less than the first frequency and, when the first clock recovery circuit has a frequency that is less than the first frequency, incrementally decrease the delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that matches the first frequency.","In an aspect of the disclosure, an apparatus for data communication includes a plurality of difference receivers coupled to a 3-wire bus, a clock recovery circuit configured to provide a first clock signal that includes a pulse for each symbol transmitted in a stream of symbols at a first frequency on a 3-wire, 3-phase interface, and a processing circuit. The processing circuit may be configured to calibrate the first clock recovery circuit by incrementally increasing a delay period provided by a delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that is less than the first frequency and, when the first clock recovery circuit has a frequency that is less than the first frequency, incrementally decreasing the delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that matches the first frequency.","In an aspect of the disclosure, a processor readable storage medium is disclosed. The storage medium may be a non-transitory storage medium and may store code that, when executed by one or more processors, causes the one or more processors to configure a first clock recovery circuit to provide a clock signal that has a first frequency and that includes a single pulse for each symbol transmitted on a 3-wire, 3-phase interface, and calibrate the first clock recovery circuit. The first clock recovery circuit may be configured by incrementally increasing a delay period provided by a delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that is less than the first frequency and, when the first clock recovery circuit has a frequency that is less than the first frequency, incrementally decreasing the delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that matches the first frequency.","The detailed description set forth below in connection with the appended drawings is intended as a description of various configurations and is not intended to represent the only configurations in which the concepts described herein may be practiced. The detailed description includes specific details for the purpose of providing a thorough understanding of various concepts. However, it will be apparent to those skilled in the art that these concepts may be practiced without these specific details. In some instances, well-known structures and components are shown in block diagram form in order to avoid obscuring such concepts.","As used in this application, the terms \u201ccomponent,\u201d \u201cmodule,\u201d \u201csystem\u201d and the like are intended to include a computer-related entity, such as, but not limited to hardware, firmware, a combination of hardware and software, software, or software in execution. For example, a component may be, but is not limited to being, a process running on a processor, a processor, an object, an executable, a thread of execution, a program and\/or a computer. By way of illustration, both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and\/or thread of execution and a component may be localized on one computer and\/or distributed between two or more computers. In addition, these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and\/or remote processes such as in accordance with a signal having one or more data packets, such as data from one component interacting with another component in a local system, distributed system, and\/or across a network such as the Internet with other systems by way of the signal.","Moreover, the term \u201cor\u201d is intended to mean an inclusive \u201cor\u201d rather than an exclusive \u201cor.\u201d That is, unless specified otherwise, or clear from the context, the phrase \u201cX employs A or B\u201d is intended to mean any of the natural inclusive permutations. That is, the phrase \u201cX employs A or B\u201d is satisfied by any of the following instances: X employs A; X employs B; or X employs both A and B. In addition, the articles \u201ca\u201d and \u201can\u201d as used in this application and the appended claims should generally be construed to mean \u201cone or more\u201d unless specified otherwise or clear from the context to be directed to a singular form.","Certain aspects of the invention may be applicable to a C-PHY interface specified by the MIPI Alliance, which may be deployed to connect electronic devices that are subcomponents of a mobile apparatus such as a telephone, a mobile computing device, an appliance, automobile electronics, avionics systems, etc. Examples of a mobile apparatus include a cellular phone, a smart phone, a session initiation protocol (SIP) phone, a laptop, a notebook, a netbook, a smartbook, a personal digital assistant (PDA), a satellite radio, a global positioning system (GPS) device, a multimedia device, a video device, a digital audio player (e.g., MP3 player), a camera, a game console, a wearable computing device (e.g., a smartwatch, a health or fitness tracker, etc.), an appliance, a sensor, a vending machine, or any other similarly functioning device.","The C-PHY interface is a high-speed serial interface that can provide high throughput over bandwidth-limited channels. The C-PHY interface may be deployed to connect application processors to peripherals, including displays and cameras. The C-PHY interface encodes data into symbols that are transmitted in a three-phase signal over a set of three wires, which may be referred to as a trio, or trio of wires. The three-phase signal is transmitted on each wire of the trio in different phases. Each three-wire trio provides a lane on a communications link. A symbol interval may be defined as the interval of time in which a single symbol controls the signaling state of a trio. In each symbol interval, one wire is \u201cundriven\u201d while the remaining two of the three wires are differentially driven such that one of the two differentially driven wires assumes a first voltage level and the other differentially driven wire assumes to a second voltage level different from the first voltage level. The undriven wire may float, be driven, and\/or be terminated such that it assumes a third voltage level that is at or near the mid-level voltage between the first and second voltage levels. In one example, the driven voltage levels may be +V and \u2212V with the undriven voltage being 0 V. In another example, the driven voltage levels may be +V and 0 V with the undriven voltage being +V\/2. Different symbols are transmitted in each consecutively transmitted pair of symbols, and different pairs of wires may be differentially driven in different symbol intervals.",{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 1","b":["100","100","106","106","102","102","108","108","102","112","102","124","102","110","112","112","102","114","100","114","122","124","128","126"]},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 2","b":["200","202","230","220","220","202","230","200","220","202","230","202","230","220"]},"The communication link  may include multiple channels ,  and . One or more channel  may be bidirectional, and may operate in half-duplex and\/or full-duplex modes. One or more channel  and  may be unidirectional. The communication link  may be asymmetrical, providing higher bandwidth in one direction. In one example described herein, a first communications channel  may be referred to as a forward channel  while a second communications channel  may be referred to as a reverse channel . The first IC device  may be designated as a host system or transmitter, while the second IC device  may be designated as a client system or receiver, even if both IC devices  and  are configured to transmit and receive on the communications channel . In one example, the forward channel  may operate at a higher data rate when communicating data from a first IC device  to a second IC device , while the reverse channel  may operate at a lower data rate when communicating data from the second IC device  to the first IC device .","The IC devices  and  may each include a processor or other processing and\/or computing circuit or device , . In one example, the first IC device  may perform core functions of the apparatus , including establishing and maintaining wireless communications through a wireless transceiver  and an antenna , while the second IC device  may support a user interface that manages or operates a display controller , and may control operations of a camera or video input device using a camera controller . Other features supported by one or more of the IC devices  and  may include a keyboard, a voice-recognition component, and other input or output devices. The display controller  may include circuits and software drivers that support displays such as a liquid crystal display (LCD) panel, touch-screen display, indicators and so on. The storage media  and  may include transitory and\/or non-transitory storage devices adapted to maintain instructions and data used by respective processors  and , and\/or other components of the IC devices  and . Communication between each processor ,  and its corresponding storage media  and  and other modules and circuits may be facilitated by one or more internal bus  and  and\/or a channel ,  and\/or  of the communication link .","The reverse channel  may be operated in the same manner as the forward channel , and the forward channel , and the reverse channel  may be capable of transmitting at comparable speeds or at different speeds, where speed may be expressed as data transfer rate and\/or clocking rates. The forward and reverse data rates may be substantially the same or differ by orders of magnitude, depending on the application. In some applications, a single bidirectional channel  may support communications between the first IC device  and the second IC device . The forward channel  and\/or the reverse channel  may be configurable to operate in a bidirectional mode when, for example, the forward and reverse channels  and  share the same physical connections and operate in a half-duplex manner. In one example, the communication link  may be operated to communicate control, command and other information between the first IC device  and the second IC device  in accordance with an industry or other standard.","The communication link  of  may be implemented according to MIPI Alliance specifications for C-PHY and may provide a wired bus that includes a plurality of signal wires (denoted as M wires). The M wires may be configured to carry N-phase encoded data in a high-speed digital interface, such as a mobile display digital interface (MDDI). The M wires may facilitate NV-phase polarity encoding on one or more of the channels ,  and . The physical layer drivers  and  may be configured or adapted to generate N-phase polarity encoded data for transmission on the communication link . The use of N-phase polarity encoding provides high speed data transfer and may consume half or less of the power of other interfaces because fewer drivers are active in N-phase polarity encoded data links.","N-phase polarity encoding devices  and\/or  can typically encode multiple bits per transition on the communication link . In one example, a combination of 3-phase encoding and polarity encoding may be used to support a wide video graphics array (WVGA)  frames per second LCD driver IC without a frame buffer, delivering pixel data at 810 Mbps for display refresh.",{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 3","FIG. 2"],"b":["300","220"]},"Signaling states defined for each of the 3 wires in a 3-wire, 3-phase polarity encoding scheme may include an undriven state, a positively driven state and a negatively driven state. The positively driven state and the negatively driven state may be obtained by providing a voltage differential between two of the signal wires , and\/or , and\/or by driving a current through two of the signal wires , and\/or connected in series such that the current flows in different directions in the two signal wires , and\/or . The undriven state may be realized by placing an output of a driver of a signal wire , or in a high-impedance mode. Alternatively, or additionally, an undriven state may be obtained on a signal wire , or by passively or actively causing an \u201cundriven\u201d signal wire , or to attain a voltage level that lies substantially halfway between positive and negative voltage levels provided on driven signal wires , and\/or . Typically, there is no significant current flow through an undriven signal wire , or . Signaling states defined for a 3-wire, 3-phase polarity encoding scheme may be denoted using the three voltage or current states (+1, \u22121, and 0).","A 3-wire, 3-phase polarity encoder may employ line drivers  to control the signaling state of signal wires , and . The drivers  may be implemented as unit-level current-mode or voltage-mode drivers. In one example, each driver  may receive sets of two or more of signals , and that determine the output state of corresponding signal wires , and . In one example, the sets of two signals , and may include a pull-up signal (PU signal) and a pull-down signal (PD signal) that, when high, activate pull-up and pull down circuits that drive the signal wires , and toward a higher level or lower level voltage, respectively. In this example, when both the PU signal and the PD signal are low, the signal wires , and may be terminated to a mid-level voltage.","For each transmitted symbol interval in an M-wire, N-phase polarity encoding scheme, at least one signal wire , or is in the midlevel\/undriven (0) voltage or current state, while the number of positively driven (+1 voltage or current state) signal wires , or is equal to the number of negatively driven (\u22121 voltage or current state) signal wires , or , such that the sum of current flowing to the receiver is always zero. For each symbol, the state of at least one signal wire , or is changed from the symbol transmitted in the preceding transmission interval.","In operation, a mapper  may receive and map 16-bit data  to 7 symbols . In the 3-wire example, each of the 7 symbols defines the states of the signal wires , and for one symbol interval. The 7 symbols  may be serialized using parallel-to-serial converters  that provide a timed sequence of symbols  for each signal wire , and . The sequence of symbols  is typically timed using a transmission clock. A 3-wire 3-phase encoder  receives the sequence of 7 symbols  produced by the mapper one symbol at a time and computes the state of each signal wire , and for each symbol interval. The 3-wire encoder  selects the states of the signal wires , and based on the current input symbol  and the previous states of signal wires , and ","The use of M-wire, N-phase encoding permits a number of bits to be encoded in a plurality of symbols where the bits per symbol is not an integer. In the example of a 3-wire communications link, there are 3 available combinations of 2 wires, which may be driven simultaneously, and 2 possible combinations of polarity on the pair of wires that is driven, yielding 6 possible states. Since each transition occurs from a current state, 5 of the 6 states are available at every transition. The state of at least one wire is required to change at each transition. With 5 states, log(5)\u22452.32 bits may be encoded per symbol. Accordingly, a mapper may accept a 16-bit word and convert it to 7 symbols because 7 symbols carrying 2.32 bits per symbol can encode 16.24 bits. In other words, a combination of seven symbols that encode five states has 5(78,125) permutations. Accordingly, the 7 symbols may be used to encode the 2(65,536) permutations of 16 bits.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 4","b":["400","450","450","452","452","454","454","452","454","454","454","310","310","310","310","310","310","310","310","310","310","310","310","310","310","310"],"sub":["1","2 ","3 ","1 ","2","2 ","3 ","3 ","1","1 ","3","3 ","2 ","2 ","1"],"i":["a","b ","c ","a","b ","c ","a","b ","c ","a","b ","c ","a","b ","c "]},"Information may be encoded in the direction of rotation at each phase transition , and the 3-phase signal may change direction for each signaling state. Direction of rotation may be determined by considering which signal wires , and\/or are in the \u20180\u2019 state before and after a phase transition, because the undriven signal wire , and\/or changes at every signaling state in a rotating three-phase signal, regardless of the direction of rotation.","The encoding scheme may also encode information in the polarity  of the two signal wires , and\/or that are actively driven. At any time in a 3-wire implementation, exactly two of the signal wires , , are driven with currents in opposite directions and\/or with a voltage differential. In one implementation, data may be encoded using two bit values , where one bit is encoded in the direction of phase transitions  and the second bit is encoded in the polarity  for the current state.","The timing chart  illustrates data encoding using both phase rotation direction and polarity. The curves ,  and  relate to signals carried on three signal wires , and , respectively for multiple phase states. Initially, the phase transitions  are in a clockwise direction and the most significant bit is set to binary \u20181,\u2019 until the rotation of phase transitions  switches at a time  to a counterclockwise direction, as represented by a binary \u20180\u2019 of the most significant bit. The least significant bit reflects the polarity  of the signal in each state.","According to certain aspects disclosed herein, one bit of data may be encoded in the rotation, or phase change in a 3-wire, 3-phase encoding system, and an additional bit may be encoded in the polarity of the two driven wires. Additional information may be encoded in each transition of a 3-wire, 3-phase encoding system by allowing transition to any of the possible states from a current state. Given 3 rotational phases and two polarities for each phase, 6 states are available in a 3-wire, 3-phase encoding system. Accordingly, 5 states are available from any current state, and there may be log(5)\u22452.32 bits encoded per symbol (transition), which allows the mapper  to accept a 16-bit word and encode it in 7 symbols.","N-Phase data transfer may use more than three wires provided in a communication medium, such as a bus. The use of additional signal wires that can be driven simultaneously provides more combinations of states and polarities and allows more bits of data to be encoded at each transition between states. This can significantly improve throughput of the system, and reduce the power consumption over approaches that use multiple differential pairs to transmit data bits, while providing increased bandwidth.","In one example, an encoder may transmit symbols using 6 wires with 2 pairs of wires driven for each state. The 6 wires may be labeled A through F, such that in one state, wires A and F are driven positive, wires B and E negative, and C and D are undriven (or carry no current). For six wires, there may be:",{"@attributes":{"id":"p-0056","num":"0055"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":["6","4"],"mo":","}}},{"mfrac":{"mrow":[{"mn":"6","mo":"!"},{"mrow":[{"mrow":{"mo":["(",")"],"mrow":{"mn":["6","4"],"mo":"-"}},"mo":"!"},{"mn":"4","mo":"!"}],"mo":"\u00b7"}]},"mo":"=","mn":"15"}],"mo":"="}}},"br":{}},{"@attributes":{"id":"p-0057","num":"0056"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":["4","2"],"mo":","}}},{"mfrac":{"mrow":[{"mn":"4","mo":"!"},{"mrow":[{"mrow":{"mo":["(",")"],"mrow":{"mn":["4","2"],"mo":"-"}},"mo":"!"},{"mn":"2","mo":"!"}],"mo":"\u00b7"}]},"mo":"=","mn":"6"}],"mo":"="}}},"br":{}},"The 15 different combinations of actively driven wires may include:",{"@attributes":{"id":"p-0059","num":"0058"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"42pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["A B C D","A B C E","A B C F","A B D E","A B D F"]},{"entry":["A B E F ","A C D E","A C D F","A C E F","A D E F"]},{"entry":["B C D E","B C D F","B C E F","B D E F","C D E F"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0060","num":"0059"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["+ + \u2212 \u2212 ","+ \u2212 \u2212 +","+ \u2212 + \u2212 ","\u2212 + \u2212 +","\u2212 + + \u2212","\u2212 \u2212 + +"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}}}},"Accordingly, the total number of different states may be calculated as 15\u00d76=90. To guarantee a transition between symbols, 89 states are available from any current state, and the number of bits that may be encoded in each symbol may be calculated as: log(89)=6.47 bits per symbol. In this example, a 32-bit word can be encoded by the mapper into 5 symbols, given that 5\u00d76.47=32.35 bits.","The general equation for the number of combinations of wires that can be driven for a bus of any size, as a function of the number of wires in the bus and number of wires simultaneously driven:",{"@attributes":{"id":"p-0063","num":"0062"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["N","wires"]},{"mi":["N","driven"]}],"mo":","}}},"mo":"=","mfrac":{"mrow":[{"msub":{"mi":["N","wires"]},"mo":"!"},{"mrow":[{"mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["N","wires"]},{"mi":["N","driven"]}],"mo":"-"}},"mo":"!"},{"msub":{"mi":["N","driven"]},"mo":"!"}],"mo":"\u00b7"}]}}}},"br":{}},{"@attributes":{"id":"p-0064","num":"0063"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":["N","driven"]},"mo":",","mfrac":{"msub":{"mi":["N","driven"]},"mn":"2"}}}},"mo":"=","mfrac":{"mrow":{"msub":{"mi":["N","driven"]},"mo":"!"},"msup":{"mrow":{"mo":["(",")"],"mrow":{"mrow":{"mo":["(",")"],"mfrac":{"msub":{"mi":["N","driven"]},"mn":"2"}},"mo":"!"}},"mn":"2"}}}}},"br":{}},{"@attributes":{"id":"p-0065","num":"0064"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"log","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mrow":{"mrow":[{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":[{"mi":["N","wires"]},{"mi":["N","driven"]}],"mo":","}}},{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"msub":{"mi":["N","driven"]},"mo":",","mfrac":{"msub":{"mi":["N","driven"]},"mn":"2"}}}}],"mo":"\u00b7"},"mo":"-","mn":"1"}}}}}},{"@attributes":{"id":"p-0066","num":"0065"},"figref":["FIG. 5","FIG. 4","FIG. 6"],"b":["500","502","504","506","512","514","516","500","450","520","502","504","506","512","514","516","500","522","310","310","310","524","602","526","502","702","702","702"],"i":["a","b ","c ","a ","b ","c "]},{"@attributes":{"id":"p-0067","num":"0066"},"figref":["FIG. 6","FIG. 3"],"b":["600","602","604","310","310","310","606","608","608","610"],"i":["a","b ","c "]},"The wire state decoder  may extract a sequence of symbols  from phase encoded signals received on the signal wires , and . The symbols  are encoded as a combination of phase rotation and polarity as disclosed herein. The wire state decoder may include a CDR circuit  that extracts a clock  that can be used to reliably capture symbols from the signal wires , and . A transition occurs on least one of the signal wires , and at each symbol boundary and the CDR circuit  may be configured to generate the clock  based on the occurrence of a transition or multiple transitions. An edge of the clock may be delayed to allow time for all signal wires , and to have stabilized and to thereby ensure that the current symbol is captured for decoding purposes.","Jitter in 3-Phase Interfaces","A 3-phase transmitter includes drivers that provide high, low and middle-level voltages onto the transmit channel. This can result in some variable transition times between consecutive symbol intervals. Low-to-high and high-to-low voltage transitions may be referred to as full-swing transitions, while low-to-middle and high-to-middle voltage transitions may be referred to as half-swing transitions. Different types of transitions may have different rise or fall times, and may result in different zero crossings at the receiver. These differences can result in \u201cencoding jitter,\u201d which may impact link signal integrity performance.",{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 7","b":["700","700","310","310","310","702","722","724","726","706","708","702","704","712","310","310","310","718","720","310","310","310","704","706","714","310","310","310","718","720","706","708","716","310","310","310","718","720","712","714","716"],"i":["a","b ","c","a","b ","c ","a","b ","c","a","b ","c ","a","b ","c "],"sub":["n ","n+1 ","n+2 ","n+3 "]},{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 8","b":["800","802","802","802","810","310","310","310","310","310","310","802","310","310","802","310","310","802","310","310","804","802","802","802"],"i":["a","b ","c ","a","b ","c ","a","b ","c ","a ","a ","b","b ","b ","c ","c ","a ","c","a","b ","c "]},"Certain transitions between transmitted symbols may be detectable by a single differential receiver , or , while other transitions may be detected by two or more of the differential receivers , and . In one example the states, or relative states of two wires may be unchanged after a transition and the output of a corresponding differential receiver , or may also be unchanged after the phase transition. In another example, both wires in a pair of signal wires , and\/or may be in the same state in a first time interval and both wires may be in a same second state in a second time interval and the corresponding differential receiver , or may be unchanged after the phase transition. Accordingly, a clock generation circuit  may include a transition detection circuit  and\/or other logic to monitor the outputs of all differential receivers , and in order to determine when a phase transition has occurred, The clock generation circuit may generate a receive clock signal  based on detected phase transitions.","Changes in signaling states of the 3 wires may be detected at different times for different combinations of the signal wires , and\/or . The timing of detection of signaling state changes may vary according to the type of signaling state change that has occurred. The result of such variability is illustrated in the timing chart  in . Markers ,  and  represent occurrences of transitions in the difference signals  provided to the transition detection circuit . The markers ,  and  are assigned different heights in the timing chart  for clarity of illustration only, and the relative heights of the markers ,  and  are not intended to show a specific relationship to voltage or current levels, polarity or weighting values used for clock generation or data decoding. The timing chart  illustrates the effect of timing of transitions associated with symbols transmitted in phase and polarity on the three signal wires , and . In the timing chart , transitions between some symbols may result in variable capture windows , , , , , and\/or (collectively symbol capture windows ) during which symbols may be reliably captured. The number of state changes detected and their relative timing can result in jitter on the clock signal .","The throughput of a C-PHY communications link may be affected by duration and variability in signal transition times. For example, variability in detection circuits may be caused by manufacturing process tolerances, variations and stability of voltage and current sources and operating temperature, as well as by the electrical characteristics of the signal wires , and . The variability in detection circuits may limit channel bandwidth.",{"@attributes":{"id":"p-0076","num":"0075"},"figref":["FIG. 9","FIG. 8"],"b":["900","920","900","920","900","920","900","310","310","310","920","802","802","802","810","310","310","310","802","802","802","310","310","310","802","802","802"],"i":["a","b ","c ","a","b ","c","a","b ","c","a","b ","c ","a","b ","c","a","b ","c "]},"In each of the examples shown in the timing charts  and , the initial symbol (\u2212z)  (see ) transitions to a different symbol. As shown in the timing charts ,  and  signal A is initially in a +1 state, signal B is in a 0 state and signal C is in the \u22121 state. Accordingly, the differential receivers , initially measure a +1 difference  and the differential receiver measures a \u22122 difference , as shown in the timing charts , ,  for the differential receiver outputs.","In a first example corresponding to the timing charts , , a transition occurs from symbol (\u2212z)  to symbol (\u2212x)  (see ) in which signal A transitions to a \u22121 state, signal B transitions to a +1 state and signal C transitions to a 0 state, with the differential receiver transitioning from +1 difference  to a \u22122 difference , differential receiver remaining at a +1 difference ,  and differential receiver transitioning from \u22122 difference  to a +1 difference .","In a second example corresponding to the timing charts , , a transition occurs from symbol (\u2212z)  to symbol (+z)  in which signal A transitions to a \u22121 state, signal B remains at the 0 state and signal C transitions to a +1 state, with two differential receivers and transitioning from +1 difference  to a \u22121 difference , and differential receiver transitioning from \u22122 difference  to a +2 difference .","In a third example corresponding to the timing charts , , a transition occurs from symbol (\u2212z)  to symbol (+x)  in which signal A remains at the +1 state, signal B transitions to the \u22121 state and signal C transitions to a 0 state, with the differential receiver transitioning from a +1 difference  to a +2 difference , the differential receiver transitioning from a +1 difference  to a \u22121 difference , and the differential receiver transitioning from \u22122 difference  to a \u22121 difference .","These examples illustrate transitions in difference values spanning 0, 1, 2, 3, 4 and 5 levels. Pre-emphasis techniques used for typical differential or single-ended serial transmitters were developed for two level transitions and may introduce certain adverse effects if used on a MIPI Alliance C-PHY 3-phase signal. In particular, a pre-emphasis circuit that overdrives a signal during transitions may cause overshoot during transitions spanning 1 or 2 levels and may cause false triggers to occur in edge sensitive circuits.",{"@attributes":{"id":"p-0082","num":"0081"},"figref":"FIG. 10","b":["1000","1002","1004","1006","1006"]},"The concept of periodic sampling and display of the signal is useful during design, adaptation and configuration of systems which use a clock-data recovery circuit that re-creates the received data-timing signal using frequent transitions appearing in the received data. A communication system based on Serializer\/Deserializer (SERDES) technology is an example of a system where an eye pattern  can be utilized as a basis for judging the ability to reliably recover data based on the eye opening of the eye pattern .","An M-wire N-Phase encoding system, such as a 3-wire, 3-phase encoder may encode a signal that has at least one transition at every symbol boundary and the receiver may recover a clock using those guaranteed transitions. The receiver may require reliable data immediately prior to the first signal transition at a symbol boundary, and must also be able to reliably mask any occurrences of multiple transitions that are correlated to the same symbol boundary. Multiple receiver transitions may occur due to slight differences in rise and fall time between the signals carried on the M-wires (e.g. a trio of wires) and due to slight differences in signal propagation times between the combinations of signal pairs received (e.g. A\u2212B, B\u2212C, and C\u2212A outputs of differential receivers , and of ).",{"@attributes":{"id":"p-0085","num":"0084"},"figref":["FIG. 11","FIG. 8"],"b":["1100","1100","1102","1100","1130","1100","1120","1122","1124","1126","1128","802","802","802","1100","802","802","802","802","802","802","1126","1128","1122","1124","310","310","310","802","802","802","1122","1124","310","310","310","1100","802","802","802","802","802","802","810"],"i":["a","b","c ","a","b","c","a","b","c ","a","b ","c ","a","b","c ","a","b ","c","a","b","c ","a","b","c "]},"Drivers, receivers and other devices used in a C-PHY 3-Phase decoder may exhibit different switching characteristics that can introduce relative delays between signals received from the three wires. Multiple receiver output transitions may be observed at each symbol interval boundary  and\/or  due to slight differences in the rise and fall time between the three signals of the trio of signal wires , , and due to slight differences in signal propagation times between the combinations of pairs of signals received from the signal wires , , . The eye-pattern  may capture variances in rise and fall times as a relative delay in transitions near each symbol interval boundary  and . The variances in rise and fall times may be due to the different characteristics of the 3-Phase drivers. Differences in rise and fall times may also result in an effective shortening or lengthening of the duration of the symbol interval  for any given symbol.","A signal transition region  represents a time, or period of uncertainty, where variable signal rise times prevent reliable decoding. State information may be reliably determined in an \u201ceye opening\u201d  representing the time period in which the symbol is stable and can be reliably received and decoded. In one example, the eye opening  may be determined to begin at the end  of the signal transition region , and end at the symbol interval boundary  of the symbol interval . In the example depicted in , the eye opening  may be determined to begin at the end  of the signal transition region , and end at a time  when the signaling state of the signal wires , , and\/or the outputs of the three differential receivers , and have begun to change to reflect the next symbol.","The maximum speed of a communication link  configured for N-Phase encoding may be limited by the duration of the signal transition region  compared to the eye opening  corresponding to the received signal. The minimum period for the symbol interval  may be constrained by tightened design margins associated with the CDR circuit  in the decoder  illustrated in , for example. Different signaling state transitions may be associated with different variations in signal transition times corresponding to two or more signal wires , and\/or , thereby causing the outputs of the differential receivers , and in the receiving device to change at different times and\/or rates with respect to the symbol interval boundary , where the inputs of the differential receivers , and begin to change. The differences between signal transition times may result in timing skews between signaling transitions in two or more difference signals . CDR circuits may include delay elements and other circuits to accommodate timing skews between the difference signals .",{"@attributes":{"id":"p-0089","num":"0088"},"figref":["FIG. 12","FIG. 8"],"b":["1200","1200","1200","1202","1204","1206","810","802","802","802","1200","1202","1204","1206","1210","1210","1210","1230","1230","1230","1230","1202","1204","1206","1208","1208","1208","1202","1204","1206","1210","1210","1210","1210","1210","1210","1202","1204","1206"],"i":["a","b ","c ","a","b","c ","a","f","a","f ","a","b","c ","a","b","c","a","b","c "]},"For example, the AB difference signal  is provided to a first D flip-flop  of a first pair of D flip-flops , and the inverter provides an inverted version of the AB difference signal  to a second D flip-flop  of the first pair of D flip-flops . The D flip-flops are initially in a reset state. A rising edge on the AB difference signal  clocks a logic one through the first D flip-flop  causing the output of the first flip-flop (r_AB) to transition to a logic one state. A falling edge on the AB difference signal  clocks a logic one through the second D flip-flop  causing the output of the second flip-flop (f_AB) to transition to a logic one state.","The output signals -are provided to logic, such as the OR gate , which produces an output signal that may serve as the receiver clock (RxCLK) signal . The RxCLK signal  transitions to a logic one state when a transition occurs in signaling state of any of the difference signals , , . The RxCLK signal  is provided to a programmable delay element , which drives a reset signal (rb)  that resets the D flip-flops in the pairs of D flip-flops , , . In the illustrated example, an inverter  may be included when the D flip-flops are reset by a low signal. When the D flip-flops are reset, the output of the OR gate  returns to the logic zero state and the pulse on the RxCLK signal  is terminated. When this logic zero state propagates through the programmable delay element  and the inverter , the reset condition on the D flip-flops is released. While the D flip-flops are in the reset condition, transitions on the difference signals , ,  are ignored.","The programmable delay element  is typically configured to produce a delay that has a duration that exceeds the difference in the timing skew between the occurrence of first and last transitions on the difference signals , , . The programmable delay element  configures the duration of pulses (i.e., the pulse width) on the RxCLK signal . The programmable delay element  may be configured when a Set signal  is asserted by a processor or other control and\/or configuration logic.","The RxCLK signal  may also be provided to a set of three flip-flops  that capture the signaling state of the difference signals , , , providing a stable output symbol  for each pulse that occurs on the RxCLK signal . Delay or alignment logic  may adjust the timing of the set of difference signals , , . For example, the delay or alignment logic  may be used to adjust the timing of the difference signals , ,  with respect to the pulses on the RxCLK signal  to ensure that the flip-flops  capture the signaling state of the difference signals , ,  when the difference signals , ,  are stable. The delay or alignment logic  may delay edges in the difference signals , ,  based on the delay configured for the programmable delay element .","The programmable delay element  may be configured in the CDR circuit  to accommodate possible large variations in transition times in the difference signals , , . In one example, the programmable delay element  may introduce a minimum delay period that exceeds the duration of the timing skew between the occurrence of the first and last transitions on the difference signals , , . For reliable operation of the CDR circuit , the maximum delay time provided by the programmable delay element  may not be greater than the symbol interval. At faster data rates, timing skew increases as a proportion of the symbol interval , and the eye opening  can become small in comparison to the symbol interval . The maximum symbol transmission rate may be limited when the timing skew reduces the percentage of the symbol interval  occupied by the eye opening  below a threshold size that can support reliable capture of symbols.",{"@attributes":{"id":"p-0095","num":"0094"},"figref":"FIG. 13","b":["1200","1214","1226","1200","1302","1202","1204","1206","1304","1200","1314","1210","1210","1210","1316","1212","1318","1212","1310","1214","1216","1312","1228","1210","1210","1210"],"sub":["skew","ck2q","OR","_","0","OR","_","1","pgm","rst"],"i":["a","b","c","a","b","c "]},"A loop time (t)  may be defined as:\n\n.\n","The relationship between t and the UI  may determine the reliability of operation of the CDR circuit . This relationship is affected by clock frequency used for transmission, which has a direct effect on the UI , and variability in the operation of the programmable delay element .","In some devices, the operation of the programmable delay element  can be afflicted by variations in manufacturing process, circuit supply voltage, and die temperature (PVT). The delay time provided by the programmable delay element  for a configured value may vary significantly from device to device, and\/or from circuit to circuit within a device. In conventional systems, the nominal operating condition of the CDR circuit  is generally set by design to generate a clock edge somewhere in the middle of the eye opening  under all PVT conditions, in order to ensure that a clock edge occurs after the end  of the signal transition region  and prior to the commencement of the transition region to the next symbol, even under worst case PVT effects. Difficulty can arise in designing a CDR circuit  that guarantees a clock edge within the eye opening  when the transmission frequency increases and timing skew of the difference signals , ,  is large compared to the UI . For example, a typical delay element may produce a delay value that changes by a factor of 2 over all PVT conditions.",{"@attributes":{"id":"p-0099","num":"0098"},"figref":"FIG. 14","b":["1400","1214","1406","1404","1408","1410","1402","1406","1404","1202","1204","1206","1414","1206","1408","1412","1202"],"sub":["loop ","skew ","loop ","skew"]},{"@attributes":{"id":"p-0100","num":"0099"},"figref":"FIG. 15","b":["1500","1214","1506","1502","1200","1508","1514","1502","1228","1516","1518","1512","1516","1518","1512","1510","1512"],"sub":"loop "},"As illustrated by the examples of , the CDR circuit  may be subject to the constraint:\n\n\n","Empirical evidence suggests that t, ,  is very sensitive to PVT. In some instances, the delay provided by the programmable delay element  may be increased to accommodate the range of potential variations of PVT. As data rates increase, the duration of the UI decreases and tincreases proportionately with respect to the UI, reducing the potential range of delays available to configure the programmable delay element .","Clock Calibration for C-PHY 3-Phase Interfaces","Certain aspects disclosed herein relate to the calibration of clock recovery circuits used in C-PHY multi-phase receivers. The clock recovery circuit may be calibrated to accommodate issues associated with variations in PVT. According to certain aspects, a clock recovery circuit in a C-PHY 3-phase receiver may be calibrated based on the UI  (see ). The UI , which may also be referred to as the symbol transmission interval or symbol interval, is a system-defined parameter that may be assumed to remain constant over varying PVT conditions at the receiver.","According to certain aspects, a clock recovery circuit may be calibrated when the difference between loop time tand the duration of the UI  is minimized. When tnever exceeds the duration of the UI , then no clock pulses are missed. When tis close in duration to the UI , then maximum suppression of multiple pulses in a UI  is obtained. Certain aspects disclosed herein relate to a calibration process that may be used to configure a clock recovery circuit to obtain a tduration that provides maximum jitter masking while meeting the constraint that t<UI.",{"@attributes":{"id":"p-0106","num":"0105"},"figref":["FIG. 16","FIG. 12"],"b":["1600","1604","1602","1604","1612","1606","1604","1602","1200"],"sub":["loop ","loop ","skew ","loop","loop "]},"Calibration may include observing the frequency of a receive clock generated by the clock recovery circuit while adjusting one or more delay elements affecting the tduration . In the example of the CDR circuit  in , the programmable delay  may be used to adjust the tduration . The programmable delay  can affect the frequency of the RxCLK signal , as illustrated in the timing diagrams of , which illustrate two potential modes of failure of the CDR circuit . For example, a first mode of failure of the CDR circuit  occurs when t>UI and results in the RxCLK signal  recovered by the CDR circuit  having a frequency that is half the nominal symbol transmission frequency of the C-PHY interface. The second mode of failure of the CDR circuit  occurs when t<t, where trepresents a period of jitter (cf. the transition region  of ), when the RxCLK signal  recovered by the CDR circuit  has a frequency that may be the nominal symbol transmission frequency of the C-PHY interface.","A CDR circuit  may be calibrated by incrementally modifying the programmable delay element  until the frequency of the RxCLK signal  is changed. Changes where the frequency is halved or doubled may delineate stable operating conditions for the CDR circuit . Calibration may commence with a low value for the programmable delay element  or with a high value for the programmable delay element . The delay value is then changed incrementally until one or more frequency change occurs. The delay value used in normal operation may be determined based on the last value before a doubling or halving of the frequency of the RxCLK signal . In some instances, the delay value may be increased until the frequency of the RxCLK signal  halves, then the delay value is decreased incrementally until the frequency of the RxCLK signal  returns to its previous value. In other instances, the delay value may be decreased until the frequency of the RxCLK signal  doubles, then the delay value is increased incrementally until the frequency of the RxCLK signal  returns to its previous value.","In one example, the programmable delay  may be initialized such that the RxCLK signal  has a frequency that matches the nominal symbol transmission frequency of the C-PHY interface. The programmable delay  may be adjusted to increase the tduration  until the frequency of the RxCLK signal  decreases, indicating that pulse generation has been suppressed for one or more transitions. The programmable delay  may be set to the largest value that was observed to provide a tduration  that results in an RxCLK signal  with a frequency that matches the nominal symbol transmission frequency of the C-PHY interface. In some instances, the value of the programmable delay  may be decreased in increments until the frequency of the RxCLK signal  matches the transmission frequency of the C-PHY interface.","In another example, the programmable delay  may be initialized such that the RxCLK signal  has a frequency that is less than the nominal symbol transmission frequency of the C-PHY interface. The programmable delay  may then be adjusted to decrease the tduration  until the frequency of the RxCLK signal  matches the transmission frequency of the C-PHY interface.","According to certain aspects, the receiver need not know a priori the nominal symbol transmission frequency of the C-PHY interface, and may determine that calibration has been accomplished when a training sequence is accurately received. A transmitter may send the training sequence during link initialization, prior to transmitting individual packets of data, after detection of an error at the receiver, and\/or under application or system control. The receiver may monitor the C-PHY interface for activity, and may perform calibration upon detection of transitions. In some instances, the receiver may determine that the CDR circuit  has already been calibrated and may perform calibration if the training sequence is not properly received.","In one example, calibration commences when the programmable delay  is initialized to a predetermined value that enables the CDR circuit  to detect the training sequence. The programmable delay  may then be adjusted to increase the tduration  until errors are detected in the training sequence. The CDR circuit  may be configured for normal operation with a programmable delay  with a value that is one or more increments lower than the value that caused errors to be detected in the training sequence.","In another example, calibration commences when the programmable delay  is initialized to a predetermined value prevents the CDR circuit  from receiving the training sequence without errors. The programmable delay  may then be adjusted to increase or decrease the tduration  until the training sequence is consistently error free as received by the CDR circuit .",{"@attributes":{"id":"p-0114","num":"0113"},"figref":"FIG. 17","b":["1700","1700","1712","1700","1702","1704","1712","1714","1710","1202","1204","1206","1202","1204","1206","1714","1712","1714","1702","1704"],"sub":["skew","loop","ref","ref","ref","ref","ref"]},"CDR calibration logic  may be provided to detect the frequency of the rclk signal  relative to the frequency of the ref_clk signal , and to adjust the value of one or more programmable delay elements in the first CDR circuit  until a desired relationship between the frequencies of the rclk signal  and the ref_clk signal . In one example, the CDR calibration logic  may provide a multi-bit control signal  that configures the duration of delays produced by a programmable delay element in the first CDR circuit . In one mode of calibration, the value of the programmable delay may be adjusted until suppression of pulse generation for some proportion of the UIs ,  is obtained. In another mode of calibration, the value of the programmable delay may be adjusted until multiple clock pulses are generated within certain UIs , .","The programmable delay element may be configured by adjusting the programmed delay while monitoring the frequency of the rclk clock signal . Initially, the programmed delay may be initially set to a value that is less than the UI time (the time required to transmit one symbol). Accordingly, when a 3-phase signal is initially received, the clock recovery circuit may be configured to produce the rclk clock signal  with a frequency equal to the symbol transmission frequency. The value of the programmed delay is then incrementally increased until the frequency of the rclk clock signal  is divided by 2, 3, or by any desired factor.",{"@attributes":{"id":"p-0117","num":"0116"},"figref":"FIG. 18","b":["1800","1702","1800","1812","1800","1802","1714","1816","1714","1704","1800","1804","1806","1714","1816","1804","1806","1808","1714","1816","1810","1702","1810","1808","1808","1810","1818","1820","1822"]},"Clock frequencies may be measured using the counters , . The counters ,  may be incremented by the ref_clk signal  and the cal_clk signal  for a predetermined time period, which may be determined by the calibration cycle clock signal , for example. A first counter  may capture the number of clock cycles (ref_val)  corresponding to the ref_clk signal . In some instances, the first counter may be operated immediately after initialization to capture a ref_val  that is a measure of the full-rate symbol transmission clock, and in some instances this initially-obtained ref_val  may be registered or otherwise captured to be used for subsequent calibration cycles. A second counter  counts the number of clock cycles (cal_val)  that occur during a calibration cycle. The calibration cycle may be configured as a predetermined time period or may be an adjustable time period. For each calibration cycle, the control signal  provides a delay parameter to the CDR circuit  that is under calibration, and the frequency of the resultant cal_clk signal  may be measured as the cal_val  accumulated by the second counter  during the calibration cycle. When the cal_val  reflects a value that is a division of the clock frequency by the desired factor, the configuration is complete and the corresponding value of the delay parameter may be used to operate the clock recovery circuit.",{"@attributes":{"id":"p-0119","num":"0118"},"figref":"FIG. 19","b":["1900","1902","1902","1902","1904","1904","1904","1916","1904","1916","1916"]},"In the illustrated example, the processing circuit  may be implemented with a bus architecture, represented generally by the bus . The bus  may include any number of interconnecting buses and bridges depending on the specific application of the processing circuit  and the overall design constraints. The bus  links together various circuits including the one or more processors , and storage . Storage  may include memory devices and mass storage devices, and may be referred to herein as computer-readable media and\/or processor-readable media. The bus  may also link various other circuits such as timing sources, timers, peripherals, voltage regulators, and power management circuits. A bus interface  may provide an interface between the bus  and one or more transceivers . A transceiver  may be provided for each networking technology supported by the processing circuit. In some instances, multiple networking technologies may share some or all of the circuitry or processing modules found in a transceiver . Each transceiver  provides a means for communicating with various other apparatus over a transmission medium. Depending upon the nature of the apparatus, a user interface  (e.g., keypad, display, speaker, microphone, joystick) may also be provided, and may be communicatively coupled to the bus  directly or through the bus interface .","A processor  may be responsible for managing the bus  and for general processing that may include the execution of software stored in a computer-readable medium that may include the storage . In this respect, the processing circuit , including the processor , may be used to implement any of the methods, functions and techniques disclosed herein. The storage  may be used for storing data that is manipulated by the processor  when executing software, and the software may be configured to implement any one of the methods disclosed herein.","One or more processors  in the processing circuit  may execute software. Software shall be construed broadly to mean instructions, instruction sets, code, code segments, program code, programs, subprograms, software modules, applications, software applications, software packages, routines, subroutines, objects, executables, threads of execution, procedures, functions, algorithms, etc., whether referred to as software, firmware, middleware, microcode, hardware description language, or otherwise. The software may reside in computer-readable form in the storage  or in an external computer readable medium. The external computer-readable medium and\/or storage  may include a non-transitory computer-readable medium. A non-transitory computer-readable medium includes, by way of example, a magnetic storage device (e.g., hard disk, floppy disk, magnetic strip), an optical disk (e.g., a compact disc (CD) or a digital versatile disc (DVD)), a smart card, a flash memory device (e.g., a \u201cflash drive,\u201d a card, a stick, or a key drive), a random access memory (RAM), a ROM, a PROM, an erasable PROM (EPROM), an EEPROM, a register, a removable disk, and any other suitable medium for storing software and\/or instructions that may be accessed and read by a computer. The computer-readable medium and\/or storage  may also include, by way of example, a carrier wave, a transmission line, and any other suitable medium for transmitting software and\/or instructions that may be accessed and read by a computer. Computer-readable medium and\/or the storage  may reside in the processing circuit , in the processor , external to the processing circuit , or be distributed across multiple entities including the processing circuit . The computer-readable medium and\/or storage  may be embodied in a computer program product. By way of example, a computer program product may include a computer-readable medium in packaging materials. Those skilled in the art will recognize how best to implement the described functionality presented throughout this disclosure depending on the particular application and the overall design constraints imposed on the overall system.","The storage  may maintain software maintained and\/or organized in loadable code segments, modules, applications, programs, etc., which may be referred to herein as software modules . Each of the software modules  may include instructions and data that, when installed or loaded on the processing circuit  and executed by the one or more processors , contribute to a run-time image  that controls the operation of the one or more processors . When executed, certain instructions may cause the processing circuit  to perform functions in accordance with certain methods, algorithms and processes described herein.","Some of the software modules  may be loaded during initialization of the processing circuit , and these software modules  may configure the processing circuit  to enable performance of the various functions disclosed herein. For example, some software modules  may configure internal devices and\/or logic circuits  of the processor , and may manage access to external devices such as the transceiver , the bus interface , the user interface , timers, mathematical coprocessors, and so on. The software modules  may include a control program and\/or an operating system that interacts with interrupt handlers and device drivers, and that controls access to various resources provided by the processing circuit . The resources may include memory, processing time, access to the transceiver , the user interface , and so on.","One or more processors  of the processing circuit  may be multifunctional, whereby some of the software modules  are loaded and configured to perform different functions or different instances of the same function. The one or more processors  may additionally be adapted to manage background tasks initiated in response to inputs from the user interface , the transceiver , and device drivers, for example. To support the performance of multiple functions, the one or more processors  may be configured to provide a multitasking environment, whereby each of a plurality of functions is implemented as a set of tasks serviced by the one or more processors  as needed or desired. In one example, the multitasking environment may be implemented using a timesharing program  that passes control of a processor  between different tasks, whereby each task returns control of the one or more processors  to the timesharing program  upon completion of any outstanding operations and\/or in response to an input such as an interrupt. When a task has control of the one or more processors , the processing circuit is effectively specialized for the purposes addressed by the function associated with the controlling task. The timesharing program  may include an operating system, a main loop that transfers control on a round-robin basis, a function that allocates control of the one or more processors  in accordance with a prioritization of the functions, and\/or an interrupt driven main loop that responds to external events by providing control of the one or more processors  to a handling function.",{"@attributes":{"id":"p-0126","num":"0125"},"figref":"FIG. 20","b":"2000"},"At block , the receiver circuit may configure a first clock recovery circuit to provide a clock signal that has a first frequency and that includes a single pulse for each symbol transmitted on a 3-wire, 3-phase interface.","At block , the receiver circuit may calibrate the first clock recovery circuit. The receiver circuit may, for example, initialize a delay period of the first clock recovery circuit. The delay period may be provided by a delay element in the first clock recovery circuit.","At block , the receiver circuit may incrementally increase a delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that is less than the first frequency.","At block , the receiver circuit may compare a current frequency of the clock signal with the first frequency. If the frequencies are equal, the receiver circuit may execute another calibration cycle at block . If the frequencies are unequal, such that the first clock recovery circuit has a frequency that is less than the first frequency, then the receiver circuit may proceed to block .","At block , the receiver circuit may incrementally decrease the delay period provided by the delay element of the first clock recovery circuit until the clock signal provided by the first clock recovery circuit has a frequency that matches the first frequency.","The delay element of the first clock recovery circuit may control a loop delay associated with a pulse generation cycle used to generate a pulse in response to a first-detected transition in signaling state for each symbol transmitted on the 3-wire, 3-phase interface. Detection of other transitions in signaling state may be suppressed during the pulse generation cycle.","In some instances, incrementally increasing the delay period includes increasing the delay period until the clock signal provided by the first clock recovery circuit has a frequency that is half the first frequency.","In some examples, a second clock recovery circuit is configured to provide a reference signal used for the calibrating the first clock recovery circuit. The reference signal may have a frequency that matches or corresponds to the first frequency. The second clock recovery circuit may provide the reference signal by generating a single pulse for each symbol in a stream of symbols received from the 3-wire, 3-phase interface. Calibrating the first clock recovery circuit may include comparing frequencies of the clock signal and the reference signal during each of a plurality of calibration cycles, increasing the delay period when the clock signal has a frequency that is greater than the frequency of the reference signal, decreasing the delay period when the clock signal has a frequency that is less than the frequency of the reference signal, and terminating the plurality of calibration cycles when the clock signal has a frequency that is equal to the frequency of the reference signal.","Calibrating the first clock recovery circuit may include configuring the delay element to provide an initial delay period. In one example, the delay period may be increased over a plurality of calibration cycles until a training sequence is successfully decoded from symbols received from the 3-wire, 3-phase interface. In another example, the delay period may be decreased over a plurality of calibration cycles until a training sequence is successfully decoded from symbols received from the 3-wire, 3-phase interface.",{"@attributes":{"id":"p-0136","num":"0135"},"figref":"FIG. 21","b":["2100","2102","2116","2102","2120","2120","2102","2120","2116","2104","2106","2108","2110","2112","2114","2118","2120"]},"The processor  is responsible for general processing, including the execution of software stored on the computer-readable storage medium . The software, when executed by the processor , causes the processing circuit  to perform the various functions described supra for any particular apparatus. The computer-readable storage medium  may also be used for storing data that is manipulated by the processor  when executing software, including data decoded from symbols transmitted over the connectors or wires , which may be configured as data lanes and clock lanes. The processing circuit  further includes at least one of the modules , ,  and . The modules , ,  and  may be software modules running in the processor , resident\/stored in the computer-readable storage medium , one or more hardware modules coupled to the processor , or some combination thereof. The modules , ,  and\/or  may include microcontroller instructions, state machine configuration parameters, or some combination thereof.","In one configuration, the apparatus  may be configured for data communication over a C-PHY 3-phase interface. The apparatus  may include a module and\/or circuit  that is configured to recover a clock signal from timing information embedded in sequences of symbols transmitted on the connectors or wires , a module and\/or circuit  for generating a reference signal, and a module and\/or circuit  that can calibrate the clock recovery module and\/or circuit .","The apparatus  may be configured for various modes of operation. In one example, the clock recovery module and\/or circuit  may be adapted to provide a first clock signal that includes a pulse for each symbol transmitted at a first frequency on a 3-wire, 3-phase interface, the calibration module and\/or circuit  may be adapted to calibrate a loop delay of the clock recovery circuit, the clock generation module and\/or circuit  may be adapted to provide a second clock signal, and the symbol capture module and\/or circuit  may be adapted to capture symbols from the 3-wire, 3-phase interface using the first clock signal and the second clock signal. In one mode of operation, the calibration module and\/or circuit  modifies the first clock signal to have a second frequency that is no more that half the first frequency. In the first mode of operation, the clock recovery module and\/or circuit  generates a pulse in the first clock signal for a first of an integer number of symbols and suppresses pulse generation for other symbols in the integer number of symbols. The second clock signal may include pulses corresponding to each of the other symbols in the integer number of symbols.","In some instances, the loop delay corresponds to a pulse generation cycle used to generate a pulse in response to a first-detected transition in signaling state of the 3-wire, 3-phase interface. Detection of other transitions in signaling state of the 3-wire, 3-phase interface may be suppressed during the pulse generation cycle. The calibration module and\/or circuit  may be configured to program a programmable delay circuit.","In one example, the first frequency is twice the second frequency, and the second clock signal includes one pulse for every pulse in the first clock signal. The second clock signal may be 180 degrees phase-shifted with respect to the first clock signal. In another example, the second frequency is one-third of the first frequency, and the second clock signal includes two pulses for every pulse in the first clock signal. In another example, the second frequency is one-fourth of the first frequency, and the second clock signal includes three pulses for every pulse in the first clock signal.","In some instances, the calibration module and\/or circuit  is adapted to cause a first circuit to recover a reference clock signal from a stream of symbols received from the 3-wire, 3-phase interface, determine a current frequency of the first clock signal by comparing frequencies of the reference clock signal and the first clock signal during each of a plurality of calibration cycles, increase the loop delay when the current frequency is determined to be greater than the second frequency, decrease the loop delay when the current frequency is determined to be less than the second frequency, and terminate the plurality of calibration cycles when the current frequency is determined to be equal to the second frequency. The reference clock signal may have a frequency corresponding to a rate of transmission of the stream of symbols.","It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences, it is understood that the specific order or hierarchy of steps in the processes may be rearranged. Further, some steps may be combined or omitted. The accompanying method claims present elements of the various steps in a sample order, and are not meant to be limited to the specific order or hierarchy presented.","The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other aspects. Thus, the claims are not intended to be limited to the aspects shown herein, but is to be accorded the full scope consistent with the language claims, wherein reference to an element in the singular is not intended to mean \u201cone and only one\u201d unless specifically so stated, but rather \u201cone or more.\u201d Unless specifically stated otherwise, the term \u201csome\u201d refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover, nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase \u201cmeans for.\u201d"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 13","FIG. 12"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 21"}]},"DETDESC":[{},{}]}
