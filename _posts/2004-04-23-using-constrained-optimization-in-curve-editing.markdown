---
title: Using constrained optimization in curve editing
abstract: A curve may be reshaped by determining new locations for its control points that minimize some measure of the change in the curve (typically, the “energy” of the change), while meeting the specified editing constraints. For example, a designer or other user may indicate an editing constraint by selecting a point anywhere on a curve and moving it to a new location. In response, the unconstrained control points may be moved automatically and simultaneously to optimal new locations. The resulting change in the curve may be aesthetically pleasing and satisfy the editing constraints. This curve editing technique may allow designers to be more productive by providing predictable and intuitive results while enabling curves to be directly manipulated.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07057616&OS=07057616&RS=07057616
owner: Microsoft Corporation
number: 07057616
owner_city: Redmond
owner_country: US
publication_date: 20040423
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS"],"p":["The invention relates to computing and in particular to reshaping a curve in computer graphics by minimizing an energy function subject to editing constraints.","Graphic designers want tools that enable them to quickly and easily modify shapes. Within graphic design applications, these shapes are often modeled using curve representations that are defined by a sequence of control points, where the position of each control point has some influence on the shape of the curve. Examples of such shape representations include B\u00e9zier curves, B-splines, non-uniform rational B-splines (NURBS), and subdivision curves, among others. Graphic design applications typically allow the designer to edit a shape by moving one or more control points until the desired shape is achieved. Because several control points may need to be moved by different amounts in different directions to achieve the desired result, it can be tedious to edit a shape in this manner. Applications often provide a more convenient means of curve editing in which the designer can click on any point on the curve and drag it to a new location\u2014a method often referred to as \u201cdirect manipulation,\u201d since the designer deals directly with the curve rather than with its control points. Curve editing methods that support direct manipulation must solve an equation or a series of equations to determine new locations for the curve's control points that will force the curve to pass through the point that the designer specified.","In an ideal world, a designer could click on any point on the curve and \u201cpull\u201d it, and the curve would follow in an intuitive manner. Unfortunately, reality does not always meet expectations. For instance, some applications that permit direct manipulation of open-ended curves display unpredictable results when the designer attempts to drag a point on the curve that is close to one of the curve endpoints. Sometimes a small movement by the designer results in an inordinately large change in the curve. In extreme cases, the edited curve may include unwanted loops, or a change may unexpectedly invert the curve. It would be helpful if graphics applications provided an intuitive, simple, and fast way for a designer to achieve the desired curve without encountering these unpredictable anomalies.","A curve is reshaped by determining new locations for its control points that minimize some measure of the change in the curve (typically, the \u201cenergy\u201d of the change), while meeting the specified editing constraints. For example, a designer may indicate an editing constraint by selecting a point anywhere on a curve and moving it to a new location. In response, the unconstrained control points may be moved automatically and simultaneously to optimal new locations. The resulting change in the curve may be aesthetically pleasing and satisfy the editing constraints. This curve editing technique may allow designers to be more productive by providing predictable and intuitive results while manipulating curves directly.","Overview","A user of a vector drawing tool has several implicit expectations of a click and drag edit, namely:\n\n","A curve frequently used as the underlying representation in vector drawing tools is the piecewise cubic B\u00e9zier spline. The invention described herein is independent of the underlying curve representation; however, because the piecewise cubic B\u00e9zier spline is one of the most commonly used representations, descriptions of the method will be given in terms of this representation. It will be understood that the method may be applied to any curve","A B\u00e9zier spline is a mathematical representation of a shape, consisting of a sequence of connected B\u00e9zier curves. A B\u00e9zier curve is a mathematical construct that requires only a few control points to specify a continuous curve in two- or three-dimensional space. In particular, a cubic B\u00e9zier curve is completely defined by four control points: the two endpoints of the curve, and two additional control points. The positions of the two additional control points specify the tangent directions at the beginning and end of the curve, and thus determine the shape of the interior of the curve. Therefore these two points are referred to as \u201cinterior\u201d control points.",{"@attributes":{"id":"p-0015","num":"0018"},"figref":"FIG. 2","b":["200","200","202","204","202","206","208","210","212","204","208","214","216","218"]},"A piecewise continuous B\u00e9zier spline F consists of a sequence of |F| connected degree d B\u00e9zier curves F(t), each of which is defined by",{"@attributes":{"id":"p-0017","num":"0020"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mrow":[{"msub":{"mi":["F","k"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"0"},"mi":"d"},"mo":"\u2062","mrow":{"msub":{"mi":"P","mrow":{"mi":["k","i"],"mo":","}},"mo":"\u2062","mrow":{"msub":{"mi":"b","mrow":{"mi":["i","d"],"mo":","}},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}}],"mo":"="},{"mrow":[{"msub":{"mi":"b","mrow":{"mi":["i","d"],"mo":","}},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mrow":{"mo":["(",")"],"mtable":{"mtr":[{"mtd":{"mi":"d"}},{"mtd":{"mi":"i"}}]}},"mo":"\u2062","msup":{"mrow":[{"msup":{"mi":["t","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"t"}}},{"mi":["d","i"],"mo":"-"}]}}],"mo":"="}],"mo":[",",","],"mi":"where"}}},"br":[{},{}],"sub":["k,d","k+1,0","i","i,3"]},{"@attributes":{"id":"p-0018","num":"0021"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mrow":[{"msub":{"mi":["F","k"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"0"},"mn":"3"},"mo":"\u2062","mrow":{"msub":{"mi":["P","i"]},"mo":"\u2062","mrow":{"msub":{"mi":["b","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}}],"mo":"="},{"mrow":{"mi":"where","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mrow":{"msub":{"mi":"b","mn":"0"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}},"mo":"=","msup":{"mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"t"}},"mn":"3"}},{"mrow":[{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mn":"3","mo":"\u2062","msup":{"mrow":{"mi":"t","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"t"}}},"mn":"2"}}],"mo":"="},{"mrow":[{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"mn":"3","mo":"\u2062","mrow":{"msup":{"mi":"t","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mn":"1","mo":"-","mi":"t"}}}}],"mo":"="},{"mrow":[{"msub":{"mi":"b","mn":"3"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"msup":{"mi":"t","mn":"3"},"mo":"."}],"mo":"="}],"mo":[",",",",",","\u2062",","],"mstyle":{"mtext":{}}}}}},"As shown in , each cubic B\u00e9zier curve (e.g., ) is defined by four control points, (e.g., , ,  and  for curve  and , ,  and  for curve ) where the first and last control points may be shared between adjacent B\u00e9zier curves in the piecewise sequence (e.g.,  is both an end point of curve  and curve ). Additional constraints may be placed on the control points, to prevent corners, for instance.","A user who attempts to edit a curve may or may not be familiar with the underlying curve representation. For a user who understands the purpose of control points within his curve, an additional requirement is to preserve the underlying structure of the curve as much as possible. Regardless of the user's understanding, the curve change should be local in order to meet the user's intuitive expectations.","In some embodiments of the invention, a curve is modified in response to a drag gesture by determining the locations of control points such that the curve segment passes through the pointer location. In some embodiments of the invention, the first and last control points (the endpoints) are fixed. For cubic B\u00e9zier curves, and other curve representations, the resulting problem is under-constrained: that is, there are more degrees of freedom than there are constraints. In some embodiments of the invention, the remaining degrees of freedom are used to provide a smoother and more intuitive response. In some embodiments of the invention, a minimum-energy curve edit utilizes this extra freedom. That is, the maximization of the smoothness change is used to compute the updated control points. Because the energy of a flexible beam increases as it is being bent further, maximizing smoothness is achieved by minimizing bending energy.","In accordance with some embodiments of the invention, a point on a curve can be selected (e.g., by clicking on the point) and dragged, modifying the location of both the interior control points at the same time, subject to constraints. In some embodiments of the invention, the point selected is between the interior control points and the energy of the change is minimized by solving a constrained optimization problem. In some embodiments of the invention the constraints are that the edited curve as displayed goes through the selected point (the point that is selected by the pointer and pulled) and the edited curve retains its original end points. A goal function is determined and minimized. In some embodiments of the invention, the goal function is an integral (the sum along the curve) of the squared magnitude of the second derivative vector of the change between the original curve and the edited curve. This integral is related to bending energy, hence the term \u201cenergy\u201d. Minimizing that energy leads to the smoothest change.","Exemplary Computing Environment",{"@attributes":{"id":"p-0023","num":"0026"},"figref":"FIG. 1"},"Although not required, the invention can be implemented via an application programming interface (API), for use by a developer, and\/or included within the network browsing software which will be described in the general context of computer-executable instructions, such as program modules, being executed by one or more computers, such as client workstations, servers, or other devices. Generally, program modules include routines, programs, objects, components, data structures and the like that perform particular tasks or implement particular abstract data types. Typically, the functionality of the program modules may be combined or distributed as desired in various embodiments. Moreover, those skilled in the art will appreciate that the invention may be practiced with other computer system configurations. Other well known computing systems, environments, and\/or configurations that may be suitable for use with the invention include, but are not limited to, personal computers (PCs), automated teller machines, server computers, hand-held or laptop devices, multi-processor systems, microprocessor-based systems, programmable consumer electronics, network PCs, minicomputers, mainframe computers, and the like. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network or other data transmission medium. In a distributed computing environment, program modules may be located in both local and remote computer storage media including memory storage devices.",{"@attributes":{"id":"p-0025","num":"0028"},"figref":"FIG. 1","b":["100","100","100","100"]},"With reference to , an exemplary system for implementing the invention includes a general purpose computing device in the form of a computer . Components of computer  may include, but are not limited to, a processing unit , a system memory , and a system bus  that couples various system components including the system memory to the processing unit . The system bus  may be any of several types of bus structures including a memory bus or memory controller, a peripheral bus, and a local bus using any of a variety of bus architectures. By way of example, and not limitation, such architectures include Industry Standard Architecture (ISA) bus, Micro Channel Architecture (MCA) bus, Enhanced ISA (EISA) bus, Video Electronics Standards Association (VESA) local bus, and Peripheral Component Interconnect (PCI) bus (also known as Mezzanine bus).","Computer  typically includes a variety of computer readable media. Computer readable media can be any available media that can be accessed by computer  and includes both volatile and nonvolatile media, removable and non-removable media. By way of example, and not limitation, computer readable media may comprise computer storage media and communication media. Computer storage media includes both volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information such as computer readable instructions, data structures, program modules or other data. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CDROM, digital versatile disks (DVD) or other optical disk storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by computer . Communication media typically embodies computer readable instructions, data structures, program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media includes wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared, and other wireless media. Combinations of any of the above should also be included within the scope of computer readable media.","The system memory  includes computer storage media in the form of volatile and\/or nonvolatile memory such as read only memory (ROM)  and random access memory (RAM) . A basic input\/output system  (BIOS), containing the basic routines that help to transfer information between elements within computer , such as during start-up, is typically stored in ROM . RAM  typically contains data and\/or program modules that are immediately accessible to and\/or presently being operated on by processing unit . By way of example, and not limitation, illustrates operating system , application programs , other program modules , and program data .","The computer  may also include other removable\/non-removable, volatile\/nonvolatile computer storage media. By way of example only, illustrates a hard disk drive  that reads from or writes to non-removable, nonvolatile magnetic media, a magnetic disk drive  that reads from or writes to a removable, nonvolatile magnetic disk , and an optical disk drive  that reads from or writes to a removable, nonvolatile optical disk , such as a CD ROM or other optical media. Other removable\/non-removable, volatile\/nonvolatile computer storage media that can be used in the exemplary operating environment include, but are not limited to, magnetic tape cassettes, flash memory cards, digital versatile disks, digital video tape, solid state RAM, solid state ROM, and the like. The hard disk drive  is typically connected to the system bus  through a non-removable memory interface such as interface , and magnetic disk drive  and optical disk drive  are typically connected to the system bus  by a removable memory interface, such as interface .","The drives and their associated computer storage media discussed above and illustrated in  provide storage of computer readable instructions, data structures, program modules and other data for the computer . In , for example, hard disk drive  is illustrated as storing operating system , application programs , other program modules , and program data . Note that these components can either be the same as or different from operating system , application programs , other program modules , and program data . Operating system , application programs , other program modules , and program data  are given different numbers here to illustrate that, at a minimum, they are different copies. A user may enter commands and information into the computer  through input devices such as a keyboard  and pointing device , commonly referred to as a mouse, trackball or touch pad. Other input devices (not shown) may include a microphone, joystick, game pad, satellite dish, scanner, or the like. These and other input devices are often connected to the processing unit  through a user input interface  that is coupled to the system bus , but may be connected by other interface and bus structures, such as a parallel port, game port or a universal serial bus (USB).","A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video interface . A graphics interface , such as Northbridge, may also be connected to the system bus . Northbridge is a chipset that communicates with the CPU, or host processing unit , and assumes responsibility for accelerated graphics port (AGP) communications. One or more graphics processing units (GPUs)  may communicate with graphics interface . In this regard, GPUs  generally include on-chip memory storage, such as register storage and GPUs  communicate with a video memory . GPUs , however, are but one example of a coprocessor and thus a variety of coprocessing devices may be included in computer . A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video interface , which may in turn communicate with video memory . In addition to monitor , computers may also include other peripheral output devices such as speakers  and printer , which may be connected through an output peripheral interface .","The computer  may operate in a networked environment using logical connections to one or more remote computers, such as a remote computer . The remote computer  may be a personal computer, a server, a router, a network PC, a peer device or other common network node, and typically includes many or all of the elements described above relative to the computer , although only a memory storage device  has been illustrated in . The logical connections depicted in include a local area network (LAN)  and a wide area network (WAN) , but may also include other networks. Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets and the Internet.","When used in a LAN networking environment, the computer  is connected to the LAN  through a network interface or adapter . When used in a WAN networking environment, the computer  typically includes a modem  or other means for establishing communications over the WAN , such as the Internet. The modem , which may be internal or external, may be connected to the system bus  via the user input interface , or other appropriate mechanism. In a networked environment, program modules depicted relative to the computer , or portions thereof, may be stored in the remote memory storage device. By way of example, and not limitation, illustrates remote application programs  as residing on memory device . It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.","One of ordinary skill in the art can appreciate that a computer  or other client device can be deployed as part of a computer network. In this regard, the present invention pertains to any computer system having any number of memory or storage units, and any number of applications and processes occurring across any number of storage units or volumes. The present invention may apply to an environment with server computers and client computers deployed in a network environment, having remote or local storage. The present invention may also apply to a standalone computing device, having programming language functionality, interpretation and execution capabilities.","System and Method for Performing Minimum Energy Curve Editing",{"@attributes":{"id":"p-0035","num":"0038"},"figref":["FIG. 3","FIG. 3","FIG. 1"],"b":["302","302","110","304","306","308","310","312","312","304","312","304","304","312","308","310","308"]},"In some embodiments of the invention, the edited curve is computed via minimization of a mathematical function, the function being the integral of total curvature of the change. In some embodiments of the invention, the function that is minimized is the integral of the squared second derivative of the vector function representing the change to the curve.","Because there are more degrees of freedom than there are constraints when editing a B\u00e9zier curve as described above, the new control point locations may be computed by solving a constrained optimization problem to minimize some \u201cenergy\u201d function subject to the editing constraints. In some embodiments of the invention, an appropriate energy function is defined, from which the new control point locations can be determined. Because the constrained optimization problem in some embodiments has a closed-form analytic solution, the resulting algorithm used to compute control point locations is efficient and easy to implement and in addition may produce a pleasing and intuitively correct editing response.","In some embodiments of the invention, the energy of a B\u00e9zier curve is calculated in terms of D, the vector change in each control point, as shown in . In , curve  is defined by endpoints Pand Pand interior control points Pand P. In , a point Von curve  is selected and pulled to location T. It will be noted that point Vmay lie anywhere on the curve. If the original curve is F(t) and the edited curve after the change is G(t) then the change C(t)=G(t)\u2212F(t) is also a B\u00e9zier curve whose control points are D. The energy function E(C) of the change C is defined to be the integral (over the curve's domain) of the squared second derivative of the edit change C(t):",{"@attributes":{"id":"p-0039","num":"0042"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mrow":[{"mi":"E","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"C"}},{"msubsup":{"mo":"\u222b","mn":["0","1"]},"mo":"\u2062","mrow":{"mrow":[{"msup":[{"mi":["C","\u2033"]},{"mi":["C","\u2033"]}],"mo":"\u00b7"},{"mo":"\u2146","mi":"t"}],"mo":"\u2062"}}],"mo":"="},{"mrow":[{"mi":"where","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mrow":{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"0"},"mi":"d"},"mo":"\u2062","mrow":{"msub":{"mi":["D","i"]},"mo":"\u2062","mrow":{"mrow":{"msub":{"mi":"b","mrow":{"mi":["i","d"],"mo":","}},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},"mo":"."}}}],"mo":"="}],"mo":","}}}},"The edit change C(t) in some embodiments is constrained by the scope of the problem so that the endpoints do not change. That is, the requirement D=D=0, is made, and the effect of the edit is restricted to a single segment . To ensure that the curve passes through the desired point, , the curve is then further constrained as follows, for a point F(s):",{"@attributes":{"id":"p-0041","num":"0044"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"C","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mn":"2"},"mo":"\u2062","mrow":{"msub":{"mi":["D","i"]},"mo":"\u2062","mrow":{"msub":{"mi":["b","i"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}}},"mo":"=","mi":"V"}],"mo":"="}}}},"Where T represents the new location to which the point Vis dragged and V is the drag vector.","The corresponding constrained optimization problem can then be solved via Lagrange multipliers. Because the dot product is a sum of products of coordinates, the equations break into separate systems for each coordinate (each with the same coefficients, but with a different right hand side), hence the unknowns D(Dand Din ) turn out to be scalar multiples of the drag vector V. For the case of a cubic B\u00e9zier curve and the energy function outlined above, the constrained optimization problem can be solved analytically to yield:",{"@attributes":{"id":"p-0044","num":"0047"},"maths":[{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"D","mn":"1"},"mo":"=","mrow":{"mfrac":{"mrow":[{"mrow":[{"mn":"2","mo":"\u2062","mrow":{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}},{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"+"},{"mn":"2","mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mrow":{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"},{"mrow":{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"}],"mo":["+","+"],"mrow":{"mrow":[{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"\u2062"}}}}]},"mo":"\u2062","mi":"V"}}}},{"@attributes":{"id":"MATH-US-00005-2","num":"00005.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"D","mn":"2"},"mo":"=","mrow":{"mfrac":{"mrow":[{"mrow":[{"mn":"2","mo":"\u2062","mrow":{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}},{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"+"},{"mn":"2","mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mrow":{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"},{"mrow":{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"}],"mo":["+","+"],"mrow":{"mrow":[{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"\u2062"}}}}]},"mo":"\u2062","mi":"V"}}}}]},"It will be noted that the scalar coefficients depend only on the curve parameters, and not on any variable which changes during the course of the edit.",{"@attributes":{"id":"p-0046","num":"0049"},"figref":["FIG. 5","FIG. 3"],"b":"502"},"At step  values are initialized. The parameter of a point on the B\u00e9zier curve which is closest to the location of the mouse click on a display screen is approximated. In some embodiments, the curve is parameterized from 0 (at one endpoint) to 1 (at the other endpoint), so that every point along the curve may be represented by a number between 0 and 1. Each parameter thus corresponds to a point along the curve as displayed. In some embodiments, the curve is reproduced by dividing the curve into a number of sections of straight lines. Thus, the position of each point on the curve can be represented (e.g., on a computer screen) by evaluating the four control points and the parameter. It will be understood that because a curve is theoretically infinitely thin, a point along the curve cannot be exactly selected via a mouse click, so the parameter for a point on a curve that approximates the position of the mouse click is determined. That is, a point on a curve is defined as F(s), where s is the parameter of the closest point on the desired segment F(t) to the mouse position, or:\n\ns\u2190the parameter of the closest point on the desired segment F(t) to the mouse position.\n","In some embodiments of the invention, Vis the location of the selected point, that is the coordinates of the point, or:\n\nV\u2190F(s)\n\naand aare calculated, according to the following formulas, where band band s are defined as described above. aand arepresent the solution of the minimization problem.\n",{"@attributes":{"id":"p-0049","num":"0052"},"maths":[{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"a","mn":"1"},"mo":"\u2190","mfrac":{"mrow":[{"mrow":[{"mn":"2","mo":"\u2062","mrow":{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}},{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"+"},{"mn":"2","mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mrow":{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"},{"mrow":{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"}],"mo":["+","+"],"mrow":{"mrow":[{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"\u2062"}}}}]}}}},{"@attributes":{"id":"MATH-US-00006-2","num":"00006.2"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":"a","mn":"2"},"mo":"\u2190","mfrac":{"mrow":[{"mrow":[{"mn":"2","mo":"\u2062","mrow":{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}},{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"+"},{"mn":"2","mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"msup":[{"mrow":{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"},{"mrow":{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},"mn":"2"}],"mo":["+","+"],"mrow":{"mrow":[{"msub":{"mi":"b","mn":"1"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}},{"msub":{"mi":"b","mn":"2"},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"s"}}],"mo":"\u2062"}}}}]}}}}]},"The original four control points are copied to preserve a location of the original point on the curve as follows:\n\nO\u2190P\n\nPthus represents the control point vector for segment k.\n","At step , user input is monitored to determine if the curve editing operation is complete. In some embodiments of the invention, an edit ends when an event such as (but not limited to) MouseButtonUp is raised, although it will be understood that the invention as contemplated is not limited to the use of a particular event or programming technique nor to a particular input device. If the editing process is complete, at step  the operation is committed and the edited curve is displayed.","At step , as the selected point is dragged during the curve edit operation, control points are computed as follows. During a mouse move, V may be defined as a change in mouse position, that is\n\nV\u2190T\u2212V\n\nVmay be defined as the initial location of the selected point, T may represent the current location of the mouse pointer so that V represents the change in mouse position. Dis computed by multiplying V by the constant initialized above, aor:\n\n\n\nDis computed by multiplying V by the constant initialized above, aor:\n\n\n","The new positions of the interior control points (Pand P) are computed as follows:\n\n\n\n\n\n","It will be apparent to one of skill in the art that the solution vectors of the minimization problem are multiples of the drag vector V.","It will be appreciated that, with different basis functions b, the formula",{"@attributes":{"id":"p-0056","num":"0060"},"maths":{"@attributes":{"id":"MATH-US-00007","num":"00007"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"msub":{"mi":["F","k"]},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}},{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"0"},"mi":"d"},"mo":"\u2062","mrow":{"msub":{"mi":"P","mrow":{"mi":["k","i"],"mo":","}},"mo":"\u2062","mrow":{"msub":{"mi":"b","mrow":{"mi":["i","d"],"mo":","}},"mo":"\u2061","mrow":{"mo":["(",")"],"mi":"t"}}}}],"mo":"="}}},"br":{}},"It will be appreciated that while the embodiment described utilizes a minimization of an integral of a squared second derivative of the change, the invention as contemplated is not so limited. For example, any other suitable function could be minimized, as for example the function representing the true total curvature of the change.","Similarly, the present invention may be applied to editing of surfaces by minimizing some energy function of the change. Surfaces are typically defined by some two-dimensional grid or mesh of control points. It is desirable to allow the user to pull a point on the surface and have that affect multiple control points. While in the curve editing the displacement vectors are computed by minimizing integrals of one variable, with respect to surfaces, integrals of two variables are minimized, (e.g. some function of the partial derivatives).","The various techniques described herein may be implemented in connection with hardware or software or, where appropriate, with a combination of both. Thus, the methods and apparatus of the present invention, or certain aspects or portions thereof, may take the form of program code (i.e., instructions) embodied in tangible media, such as floppy diskettes, CD-ROMs, hard drives, or any other machine-readable storage medium, wherein, when the program code is loaded into and executed by a machine, such as a computer, the machine becomes an apparatus for practicing the invention. In the case of program code execution on programmable computers, the computing device will generally include a processor, a storage medium readable by the processor (including volatile and non-volatile memory and\/or storage elements), at least one input device, and at least one output device. One or more programs that may utilize the creation and\/or implementation of domain-specific programming models aspects of the present invention, e.g., through the use of a data processing API or the like, are preferably implemented in a high level procedural or object oriented programming language to communicate with a computer system. However, the program(s) can be implemented in assembly or machine language, if desired. In any case, the language may be a compiled or interpreted language, and combined with hardware implementations.","While the present invention has been described in connection with the preferred embodiments of the various figures, it is to be understood that other similar embodiments may be used or modifications and additions may be made to the described embodiments for performing the same function of the present invention without deviating therefrom. Therefore, the present invention should not be limited to any single embodiment, but rather should be construed in breadth and scope in accordance with the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing summary, as well as the following detailed description of illustrative embodiments, is better understood when read in conjunction with the appended drawings. For the purpose of illustrating the invention, there is shown in the drawings exemplary constructions of the invention; however, the invention is not limited to the specific methods and instrumentalities disclosed. In the drawings:",{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIGS. 4","i":"a\u2013c "},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
