---
title: Light-based touch screen
abstract: A light-based touch screen, including a housing for a display screen, a plurality of infra-red light emitting diodes (LEDs), fastened on the housing, for generating light beams, at least one LED selector, fastened on the housing and connected with the plurality of LEDs, for controllably selecting and deselecting one or more of the plurality of LEDs, a plurality of photodiode (PD) receivers, fastened on the housing, for measuring light intensity, at least one PD selector, fastened on the housing and connected with the plurality of PD receivers, for controllably selecting and deselecting one or more of the plurality of PD receivers, an optical assembly, fastened on the housing, for projecting light beams emitted by the plurality of LEDs in substantially parallel planes over the housing, and a controller, fastened on the housing and coupled with the plurality of PD receivers, (i) for controlling the at least one LED selector, (ii) for controlling the at least one PD selector, and (iii) for determining therefrom position and velocity of an object crossing at least one of the substantially parallel planes, based on output currents of the plurality of PD receivers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08339379&OS=08339379&RS=08339379
owner: Neonode Inc.
number: 08339379
owner_city: Santa Clara
owner_country: US
publication_date: 20090215
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCES TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE DESCRIPTION","DETAILED DESCRIPTION"],"p":["This application is a continuation-in-part of assignee's pending application U.S. Ser. No. 10\/494,055, filed on Apr. 29, 2004, entitled ON A SUBSTRATE FORMED OR RESTING DISPLAY ARRANGEMENT.","The field of the present invention is touch screens for computers.","Conventional touch screens are capacitance-based or resistance-based. These touch screens provide user interfaces through which a user enters input to a computing device by touching a screen at a selected location, with a stylus or with his finger.","Conventional touch screens are generally large. When space is at a premium, such as with small handheld electronic devices, conventional touch screens are limited to only a few user inputs. Moreover, these inputs are not accurately interpreted when the user does not use a stylus.","Conventional touch screens are also limited as to the types of user inputs that they can recognize. For example, conventional touch screens are unable to distinguish between a soft tap and a hard press. Conventional touch screens are unable to recognize fast repeated tapping on the same screen locations. Conventional touch screens are unable to recognize gestures made by a finger or stylus that moves continuously across a touch screen.","It would thus be of advantage to produce touch screens that recognize single soft taps, repeated soft taps, presses, and gestures, for both large and small screens.","Aspects of the present invention relate to touch screens that operate by measuring light intensities emitted by infra-red light emitting diodes (LEDs). In distinction from prior art touch screens, which are resistance-based or capacitance-based, embodiments of the present invention use light beams.","LEDs and photodiode (PD) receivers are distributed around the perimeter of a touch screen. The LEDs are controlled by a microprocessor to selectively emit light, and the PD receivers are controlled by the microprocessor to selectively measure light intensities. The light emitted by the LEDs is projected by a lens assembly over the touch screen. An object crossing into the projected light obstructs some of the light from reaching the PD receivers. The corresponding decrease in light intensities measured by the PD receivers enables determination of the object's position.","In accordance with embodiments of the present invention, the lens assembly projects light onto parallel planes at multiple heights over the touch screen. In turn, the light intensities measured by the PD receivers enable detection of objects that touch the screen and also objects that are above the screen and nearly touching the screen. By measuring light intensities over time, the motion over time of objects that are nearly touching the screen is also determined. Moreover, determination of motion over time enables derivation of objects' velocity vectors.","The touch screen of the present invention is able to recognize and distinguish still user inputs and motion-based user inputs made by a user's finger, including inter alia a single soft tap on the screen, multiple soft taps on the screen, a hard press on the screen, multiple hard presses on the screen, a directional gesture, such as a rightward moving swipe on the screen, and a figurative gesture such as sliding a finger over the screen in the shape of an \u201cs\u201d or an asterisk \u201c*\u201d. The touch screen of the present invention is also able to recognize positions and motions of more than one object simultaneously touching the screen.","The touch screen of the present invention may be used as both an input device and an output display device. In some embodiments of the present invention, paths of motion made by an object on the touch screen are converted to corresponding motion of a mouse, and input as such to a computer.","The user touch-based inputs may be logged and post-processed by a data processor. An application of this is a touch-based storefront window, whereby touch-based inputs from passersby are logged and analyzed to derive information about consumer interest in a storefront showcase display.","In some embodiments of the present invention, LEDs are arranged along two adjacent edges of the touch screen, and PD receivers are arranged along the other two adjacent edges. In other embodiments of the present invention, four LEDs are positioned at the corners of the touch screen, and PD receivers are arranged along the edges.","In some embodiments of the present invention, the LEDs are connected as a matrix to LED row drivers that select rows and LED column drivers that select columns. As such, a designated LED is activated by appropriately setting its corresponding row and column drivers. Such a connection significantly reduces the number of IO connectors required, thereby reducing the cost of materials for the touch screen. Similarly, the PD receivers may be connected as a matrix to PD row selectors and PD column selectors.","Thus the present invention provides touch screens suitable for both small and large electronic devices. Devices that use touch screens of the present invention, such as mobile phones, do not required keypads since the touch screens themselves may serve as keypads.","There is thus provided in accordance with an embodiment of the present invention a light-based touch screen, including a housing for a display screen, a plurality of infra-red light emitting diodes (LEDs), fastened on the housing, for generating light beams, at least one LED selector, fastened on the housing and connected with the plurality of LEDs, for controllably selecting and deselecting one or more of the plurality of LEDs, a plurality of photodiode (PD) receivers, fastened on the housing, for measuring light intensity, at least one PD selector, fastened on the housing and connected with the plurality of PD receivers, for controllably selecting and deselecting one or more of the plurality of PD receivers, an optical assembly, fastened on the housing, for projecting light beams emitted by the plurality of LEDs in substantially parallel planes over the housing, and a controller, fastened on the housing and coupled with the plurality of PD receivers, (i) for controlling the at least one LED selector, (ii) for controlling the at least one PD selector, and (iii) for determining therefrom position and velocity of an object crossing at least one of the substantially parallel planes, based on output currents of the plurality of PD receivers.","There is additionally provided in accordance with an embodiment of the present invention a method for a light-based touch screen, including controlling a plurality of light-emitting diodes (LEDs) to select and deselect at least one of the LEDs, whereby a selected LED emits infra-red light beams, controlling a plurality of photodiode (PD) receivers to select and deselect at least one of the PD receivers, whereby a selected PD measures received light intensity, and determining position and velocity of an object obstructing light from at least one of the PD receivers, based on output currents of the plurality of PD receivers.","There is further provided in accordance with an embodiment of the present invention a touch screen, including a housing for a display screen, a plurality of sensors, fastened on the housing, for sensing location of an object touching the display screen, and a controller, fastened on the housing and coupled with the plurality of sensors, for receiving as input locations sensed by the plurality of sensors, and for determining therefrom positions of two or more objects simultaneously touching the display screen.","Aspects of the present invention relate to light-based touch screens. According to embodiments of the present invention, a light-based touch screen includes a plurality of infra-red light-emitting diodes (LEDs) and a plurality of photodiodes (PDs) arranged along the perimeter surrounding the screen. The LEDs project light substantially parallel to the screen surface, and this light is detected by the PDs. An object, such as a finger, placed over a portion of the screen blocks some of the light beams, and correspondingly some of the PDs detect less light intensity. The geometry of the locations of the PDs, and the light intensities they detect, suffice to determine screen coordinates of the object. The LEDs and PDs are controlled for selective activation and de-activation by a controller. Generally, each LED and PD has I\/O connectors, and signals are transmitted to specify which LEDs and which PDs are activated.","In one embodiment of the present invention, plural LEDs are arranged along two adjacent sides of a rectangular screen, and plural PDs are arranged along the other two adjacent sides. In this regard, reference is now made to , which is a diagram of a touch screen  having 16 LEDs  and 16 PDs , in accordance with an embodiment of the present invention. The LEDs  emit infra-red light beams across the top of the touch screen, which are detected by corresponding PD receivers that are directly opposite the LEDs. When an object touches touch screen , it blocks light from reaching some of PD receivers . By identifying, from the PD receiver outputs, which light beams have been blocked by the object, the object's position can be determined.","Reference is now made to , which are diagrams of a touch screen that detects two objects,  and , that touch the screen simultaneously, in accordance with an embodiment of the present invention. Objects  and , which are touching the screen, block light from reaching some of PD receivers . In accordance with an embodiment of the present invention, the positions of objects  and  are determined from the crossed lines of the infra-red beams that the objects block. In distinction, prior art resistance-based and capacitance-based touch screens are unable to detect more than one object simultaneously touching the screen.","When two or more objects touch screen  simultaneously along a common horizontal or vertical axis, the positions of the objects are determined by the PD receivers  that are blocked. Objects  and  in  are aligned along a common vertical axis and block substantially the same PD receivers  along the bottom edge of touch screen ; namely the PD receivers marked a, b, c and d. Along the left edge of touch screen, two different sets of PD receivers  are blocked. Object  blocks the PD receivers marked e and f, and object  blocks the PD receivers marked g and h. The two objects are thus determined to be situated at two locations. Object  has screen coordinates located at the intersection of the light beams blocked from PD receivers a-d and PD receivers e and f; and object  has screen coordinates located at the intersection of the light beams blocked from PD receivers a-d and PD receivers g and h.","Objects  and  shown in  are not aligned along a common horizontal or vertical axis, and they have different horizontal locations and different vertical locations. From the blocked PD receivers a-h, it is determined that objects  and  are diagonally opposite one another. They are either respectively touching the top right and bottom left of touch screen , as illustrated in ; or else respectively touching the bottom right and top left of touch screen , as illustrated in .","Discriminating between  and  is resolved by either (i) associating the same meaning to both touch patterns, or else (ii) by associating meaning to only one of the two touch patterns. In case (i), the UI arranges its icons, or is otherwise configured, such that the effects of both touch patterns  and  are the same. For example, touching any two diagonally opposite corners of touch screen  operates to unlock the screen. In case (ii), the UI arranges its icons, or is otherwise configured, such that only one of the touch patterns  and  has a meaning associated therewith. For example, touching the upper right and lower left corners of touch screen  operates to unlock the screen, and touch the lower right and upper left of touch screen  has no meaning associated therewith. In this case, the UI discriminates that  is the correct touch pattern.","Reference is now made to , which are diagrams of a touch screen that detects a two finger glide movement, in accordance with an embodiment of the present invention. The glide movement illustrated in  is a diagonal glide that brings objects  and  closer together. The direction of the glide is determined from changes in which PD receivers  are blocked. As shown in , blocked PD receivers are changing from a and b to PD receivers  more to the right, and from c and d to PD receivers  more to the left. Similarly, blocked PD receivers are changing from e and f to PD receivers  more to the bottom, and from g and h to PD receivers  more to the top. For a glide in the opposite direction, that moves objects  and  farther apart, the blocked PD receivers change in the opposite directions.","When objects  and  are aligned in a common vertical or horizontal axis, there is no ambiguity in identifying glide patterns. When objects  and  are not aligned in a common vertical or horizontal axis, there may be ambiguity in identifying glide patterns, as illustrated in . In case of such ambiguity, and as described hereinabove with reference to , discriminating between  and  is resolved by either (i) associating the same meaning to both glide patterns, or else (ii) by associating meaning to only one of the two glide patterns.","It will be appreciated by those skilled in the art that the present invention also identifies three or more objects that are simultaneously touching touch screen . Reference is now made to , which are diagrams of a touch screen for a piano keyboard simulator, that detects multiple keys of a displayed piano keyboard that are touched simultaneously, in accordance with an embodiment of the present invention. The touch screen in  has a different layout than the touch screen in . Piano keys are displayed along a horizontal axis. As such, touch positions along the horizontal axis correspond to keys of the keyboard. The black keys are identified by their positions that straddle two white keys.","The hand shown in  is playing three white keys, and correspondingly the PD receivers denoted a-f are blocked. The hand shown in  is playing two white keys and one black key, and correspondingly a different plurality of PD receivers, also denoted a-f, are blocked. The hand shown in  is playing four white keys with three fingers. The same PD receivers a-f as in  are blocked in . In this case, the PD receivers along the right edge of touch screen  discriminate between  and ; namely, PD receivers g, h and i are blocked in , where PD receivers g and h are blocked in . Blocked PD receiver i in  indicates a depth corresponding to a black piano key.","Reference is now made to , which is a circuit diagram of touch screen  from , in accordance with an embodiment of the present invention. The LEDs  and PDs  are controlled by a controller, shown in . The LEDs receive respective signals LED00-LED15 from LED switches A, and receive current from VROW and VCOL through current limiters B. Operation of LED switches A is described with reference to . Operation of current limiters B is described with reference to . The PDs receive respective signals PD01-PD15 from shift register . PD output is sent to controller , via signals PDROW and PDCOL.","According to one embodiment of the present invention, the LEDs are controlled via a first serial interface, which transmits a binary string to a shift register . Each bit of the binary string corresponds to one of the LEDs, and indicates whether to activate or deactivate the corresponding LED, where a bit value \u201c1\u201d indicates activation and a bit value \u201c0\u201d indicates deactivation. Successive LEDs are activated and deactivated by shifting the bit string within shift register . Operation of shift register  is described with reference to .","Similarly, the PDs are controlled by a second serial interface, which transmits a binary string to a shift register . Successive PDs are activated and deactivated by shifting the bit string in shift register . Operation of shift register  is described with reference to .","According to another embodiment of the present invention, shown in , the LEDs are logically arranged in a matrix with signals controlling each row and each column in the LED matrix. Each LED matrix signal is connected to a separate pin of a controller. Similarly, as shown in , the PDs may be logically arranged in a matrix with signals controlling each row and each column in the PD matrix.","The ensuing description addresses (1) the electronics, (2) the optics, and (3) applications of touch screen .","1. Electronics of Touch Screen ","Reference is now made to , which is a simplified block diagram of electronics for touch screen , in accordance with an embodiment of the present invention. As shown in , touch screen  includes light-emitting diodes , which emit pulses of infra-red light, and photodiodes , which detect light intensity. LEDs  are selectively activated in a controlled manner by a controller , via LED selectors  and LED switches A. Current is supplied to LEDs  by current limiters B shown in . Each LED requires approximately 2 amps of current, whereas each LED selector  only supplies a few milliamps. As such, each LED selector activates an LED switch A that supplies sufficient current. Operation of LED switches A is described with reference to . Operation of current limiters B is described with reference to .","Controller  also selectively filters PDs  in a controlled manner, via PD selectors . PDs  are selectively activated by PD selectors , which activate one of the PDs. The signal from the activated PD is transmitted back to controller  via a current integrator , which then determines whether or not one or more objects are placed over touch screen  and, if so, the positions of the objects. According to an embodiment of the present invention, the signal from the activated PD is transmitted to a signal filter and amplifier . The output of signal filter and amplifier  is transmitted back to controller , which then determines whether or not one or more objects are placed over touch screen  and, if so, the positions of the objects. Operation of signal filter and amplifier  is described with reference to . Operation of current integrator  is described with reference to .","Reference is now made to , which is a simplified block diagram of alternate electronics for touch screen , in accordance with an embodiment of the present invention. The diagram of  includes an optional multiplexer , used to select one from among several PD output signals. In the absence of multiplexer , inactive PD signals may affect the signal entering controller  and optional filter and amplifier . Multiplexer  eliminates these effects. Operation of multiplexer  is described with reference to .","i. Controller ","As used herein, the term \u201ccontroller\u201d includes inter alia programmable processors, RISC processors, dedicated hardware, field programmable gate arrays (FPGA) and application-specific circuits (ASIC). Although  show current integrator , signal filter and amplifier , PD selectors , LED selectors  and other functional blocks as being external to controller , such implementation is for purposes of clarity and exposition. However, it will be appreciated by those skilled in the art that in other implementations of the present invention some or all of these blocks, or portions thereof, may be integrated within controller .","Reference is now made to , which is a simplified circuit diagram of an exemplary controller  for use with touch screen , in accordance with an embodiment of the present invention. The exemplary controller shown in  includes 64 I\/O pins, some of which connect to LED selectors  and PD selectors , and some of which receive touch signals.","Controller  shown in  may be an MSP microcontroller, manufactured by Texas Instruments Incorporated of Dallas, Tex.","ii. LED Selector  and Shift Register ","Reference is now made to , which is a diagram of shift register  for an array of 16 LEDs , in accordance with an embodiment of the present invention. Shift register  is connected to controller  via the LED_CTRL signal shown in . Integrated circuit IC1 drives 8 LED switches A via corresponding push-pull drivers denoted LED_D00 thru LED_D07; and integrated circuit IC2 drives another 8 LEDs switches A via corresponding push-pull drivers denoted LED_D08 thru LED_D15.","In accordance with the embodiment shown in , shift register  is implemented in IC1 and IC2, wherein the lower 8 bits of shift register  are stored in IC1, and the upper 8 bits are stored in IC2. Bits are shifted from IC1 to IC2 via the connection shown in  exiting IC1 at Q7S and entering IC2 at DS.","Referring to the LED_CTRL signals, when L_SCLR_N is low, all LEDs  are turned off. In accordance with an embodiment of the present invention, L_SCLR_N resets shift register ; i.e., resets circuits IC1 and IC2.","Reference is now made to , which illustrates a waveform for activating LEDs, in accordance with an embodiment of the present invention.  illustrates the use of LED_CTRL signals L_SI, L_SCK, L_RCK, L_SCLR_N and L_EO_N from .","As shown in , at time t1 a low L_SCLR_N signal turns off all LEDs by resetting shift register . At time t2, a bit value of 1 is entered into shift register  by signal L_SI. Thereafter, at each cycle of L_SCK the data in shift register  is shifted one position further into the register, and a new L_SI bit is entered into the first bit of shift register . After six L_SCK cycles, corresponding to time t3, the bit value of 1 arrives at bit position 6, corresponding to LED06. A high L_RCK signal activates the LED drivers using the data in shift register , driving push-pull driver LED_D06 high, and thereby activating a respective one of switches A and turning on LED06. A subsequent L_SCK cycle, corresponding to time t4, advances the bit value of 1 one bit position further. A subsequent high L_RCK signal activates the LED drivers again, with the bit value of 1 at position 7 and a bit value of 0 at position 6, thereby turning on LED07 and turning off LED06 via respective switches A.","In distinction to the embodiment shown in , in accordance with another embodiment of the present invention, four LEDs  are placed in the four corners of a touch screen, and plural PDs  are arranged along the four sides of the screen, as shown in . When an LED  is lit, it projects an arc of light substantially parallel to the surface of the screen. The PDs  detect respective portions of this light, according to the positions of the LED  and the PDs . The four LEDs  suffice to determine the screen coordinates of an object, such as a finger, placed over a portion of the screen, based on the light intensities detected by the PDs .","In yet another embodiment of the invention, the LEDs are inter-connected with the topology of a matrix, and each I\/O connector transmits a signal to an entire row or an entire column of LEDs. Such a topology provides an advantage in reducing the total number of I\/O connectors required, thereby reducing the cost of the electronics. In this regard, reference is now made to , which is a diagram of an LED driver matrix  for a touch screen, in accordance with an embodiment of the present invention.  shows how 16 LEDs are controlled by using only 4 VROW signals and 4 VCOL signals. Each VROW signal controls a respective one of four connections via switch , and each VCOL signal controls a respective one of four connections via switch . Switches  and  are connected to respective pins in controller . Switches  and  are similar to LED switches A shown in .","Matrix  includes 16 LEDs and 8 IO connectors. More generally, matrix  may include an m\u00d7n array of mn LEDS and m+n IO connectors. In distinction, prior art LEDs required two IO connectors apiece. As such, it will be appreciated by those skilled in the art that matrix  reduces the number of IO connectors required from 2mn to m+n. In turn, this reduces the cost of touch screen , since the IO connectors are a significant part of the bill of materials.","As shown in , each LED is accessed by selection of a row and a column IO connector. Four push-pull drivers are used for selecting rows, and four push-pull drivers are used for selecting columns. A designated LED is activated by driving the appropriate push-pull driver for its row to high, and driving the appropriate push-pull driver for its column to low.  shows the second from left push-pull driver driven low, and the second from top push-pull driver is driven high. Correspondingly, the LED circled in  is activated.","It will be appreciated by those skilled in the art that the row and column coordinates of the LEDs are not related to the physical placement of the LEDS and the push-pull drivers. As such, the LEDs do not need to be physically positioned in a rectangular matrix.","In another embodiment of the present invention, current source drivers are used instead of push-pull drivers. In yet another embodiment of the present invention, current sink drivers are used instead of push-pull drivers. In yet another embodiment of the present invention, some of the push-pull drivers are combined with current source drivers and others of the push-pull drivers are combined with current sink drivers.","iii. LED Current Switches A","Reference is now made to , which is a diagram of LED switches A, in accordance with an embodiment of the present invention. LED switches A are push-pull drivers that control LEDs . These push-pull drivers control gates of power transistors in each of the LED circuits LED00-LED15. In systems where the LED drivers supply sufficient current to operate LEDs , switches A may be removed, and LEDs  may be controlled directly by LED selectors .","iv. LED Current Limiters B","Reference is now made to , which is a diagram of current limiters B, used for limiting and directing current to LEDs through VROW and VCOL, in accordance with an embodiment of the present invention. As shown in , a transistor  controls the current issued via VROW to the row LEDs 0-7 along the top of touch screen  (), by a signal denoted ROW_EN_N. Similarly, a second transistor (not shown) controls the current issued via VCOL to the column LEDs 8-15 along the right side of touch screen , by a signal denoted COL_EN_N. When ROW_EN_N is low, any of the row LEDs whose corresponding bit in shift register  is set, issue a light pulse. Similarly, when COL_EN_N is low, any of the column LEDs whose corresponding bit in shift register  is set, issue a light pulse. Transistor  may be a low saturation voltage type transistor, such as the transistors manufactured by NXP Semiconductors of The Netherlands.","The magnitude of the current gated by transistor , and issued by VROW, is determined by resistors R1, R2 and R3. Specifically, the current limit VROW, ignoring the base current, are given by:",{"@attributes":{"id":"p-0101","num":"0100"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"msub":{"mi":["I","row"]},"mo":"=","mfrac":{"mrow":[{"mrow":{"mrow":{"mo":"+","mn":"3"},"mo":["\u2062","\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"1.1em","height":"1.1ex"}}},"mi":"V","mfrac":{"mrow":[{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mrow":[{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"3"}],"mo":"-"}]}},"mo":"-","mi":"Ube"},{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"}]}}}},"br":{},"b":["150","300"],"figref":"FIG. 6"},"Reference is now made to , which is a diagram of alternative current limiters B, used for limiting and directing current to LEDs through VROW and VCOL, in accordance with an embodiment of the present invention. As in , only one current limiter is shown in , receiving input ROW_EN and controlling current sent over VROW, and a similar current limiter (not shown) receives input COL_EN and controls current sent of VCOL. The dotted portion of circuit  represents LED circuits, and the dotted line connected to the solid line corresponds to VROW.","Shown in  is a bandgap voltage stabilizer, D2, or such other voltage stabilizer, which has a contact voltage drop across it irrespective of the current flowing through it. As long as the current is above a holding current, the voltage across D2 is constant. Resistor R1 supplies a diode current and a base current of NPN transistor Q1. The constant diode voltage, denoted by VZ, applies across the base of Q1 and emitter resistor R2.","When circuit  is operational, the voltage across R2, denoted by VR2, is given by VR2=VZ\u2212VBE, where VBE is the base-emitter drop of Q1. The emitter current of Q1, denoted by IE, which is also the current through R2, denoted by IR2, is given by",{"@attributes":{"id":"p-0105","num":"0104"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"IR","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mfrac":[{"mrow":[{"mi":"VR","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}]},{"mrow":[{"mi":["VZ","VBE"],"mo":"-"},{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}]}],"mo":"="}],"mo":"="}}},"br":{}},"Provided the temperature does not vary significantly, the load current is independent of the supply voltage, denoted by VR1, and the transistor's gain, R2, allows the load current to be set at any desired value. Specifically, R2 is given by",{"@attributes":{"id":"p-0107","num":"0106"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mfrac":[{"mrow":[{"mi":["VZ","VBE"],"mo":"-"},{"mi":"IR","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}]},{"mrow":[{"mi":"Vz","mo":"-","mn":"0.65"},{"mi":"IR","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"}]}],"mo":"\u2248"}],"mo":"="}}},"br":{}},"VBE is temperature dependent; namely, at higher temperatures, VBE decreases. VZ is also temperature dependent; namely, at higher temperatures, VZ also decreases. As such, circuit  is self regulating as both voltages grow or decline simultaneously, resulting in a substantially constant voltage VR2.","When issuing a light pulse, signal ROW_EN is initially set to low. Capacitor C1 is also low, and begins to accumulate charge. Subsequently, ROW_EN is briefly set to high, to activate the light pulse, and the charge on C1 rises accordingly. The presence of bandgap diode D1 ensures that the charge on C1 drops quickly when ROW_EN is again set to low. As such, the presence of diode D1 protects circuit  from excessive charge that would otherwise result over the course of multiple pulses.","Resistance R1 is given by",{"@attributes":{"id":"p-0111","num":"0110"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mi":"R","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"1"},"mo":"=","mfrac":{"mrow":[{"mi":["VS","VZ"],"mo":"-"},{"mi":"IZ","mo":"+","mrow":{"mi":["K","IB"],"mo":"\u00b7"}}]}}}},"br":{}},{"@attributes":{"id":"p-0112","num":"0111"},"maths":{"@attributes":{"id":"MATH-US-00005","num":"00005"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"IB","mo":"=","mrow":{"mfrac":{"mi":"IC","mrow":{"mi":"hFE","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"min"}}},"mo":"=","mrow":{"mfrac":[{"mi":"IE","mrow":{"mi":"hFE","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"min"}}},{"mrow":[{"mi":"IR","mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},"mn":"2"},{"mi":"hFE","mo":"\u2061","mrow":{"mo":["(",")"],"mi":"min"}}]}],"mo":"="}}}}},"br":{}},"v. PD Selector  and Shift Register ","Reference is now made to , which is a diagram of shift register  for an array of 16 PDs , in accordance with an embodiment of the present invention. The PD shift register shown in  is similar to the LED shift register in . In contrast to LEDs , PDs  are activated directly without intermediate switches such as switches A used with LEDs . Shift register  is connected to controller  via the PD_CTRL signal shown in . A description of the PD_CTRL signal now follows.","Initially, the PD outputs are set to high. A value of 1 in at least one bit of shift register  () activates at least one corresponding PD by setting its output low. The PD output signal is sent back to controller  via signal PDROW or PDCOL.","Reference is now made to , which illustrates a waveform for activating selected PDs, in accordance with an embodiment of the present invention.  illustrates the use of signals SI, SCK, RCK, SCLR_N and OE_N from .","At time t1, a low SCLR_N signal sets all PD outputs low and clears shift register . At time t2, a low SI signal enters an activation value of \u201c1\u201d into the beginning of shift register . At each rising high edge of signal SCK, the data in shift register  is shifted further into the register, and a new bit value is entered in the beginning of the register. A rising high edge of signal RCK transfers data from shift register  into IC3 and IC4, selecting or deselecting corresponding PDs, depending on the bit values at corresponding positions within the bit string. Thus, a first high RCK signal selects a first PD based on data in shift register , followed by an SCK cycle shifting the data in shift register , followed by a second RCK signal that deselects the first PD and selects a second PD based on the shifted data. Thus at time t3, PD06 is selected, and at time t4, PD06 is deselected and PD07 is selected.","As described above for the matrix of LED drivers shown in , a similar matrix of PD receivers may be used in embodiments of the present invention. In this regard, reference is now made to , which is a diagram of a photodiode matrix  for a touch screen, in accordance with an embodiment of the present invention. Matrix  as shown in  includes a 4\u00d74 array of PDs. In general, matrix  may include an array of m\u00d7n PDs. Matrix  requires only m+n IO connectors. In distinction, prior art systems require two IO connectors per PD to scan a plurality of PDs, and thus matrix  represents a savings of 2mn\u2212m\u2212n connectors. Each PD in matrix  is accessed by selecting an appropriate row connector and an appropriate column connector, corresponding to the row and column of the PD.","Shown in  are four 1-to-2 analog switches , and four push-pull drivers . Analog switches  are used to select a row, and push-pull drivers  are used to select a column. For each analog switch , one terminal connects to GND and the other terminal connects to receiver electronics , including an amplifier  and an ADC . Opening one of analog switches  to receiver electronics  and putting the remaining switches to GND serves to select an active receiver row. Driving one of push-pull connectors  low and driving the remaining connectors to high serves to select an active column. For matrix  shown in , the second from top analog switch is open and the second from left push-pull connector is low. The PD corresponding to the active row and column is shown circled in matrix .","It will be appreciated by those skilled in the art that the row and column coordinates of the PDs are not related to the physical placement of the PDs on touch screen . The row and column coordinates are only used for controlled selection of the PDs.","In accordance with an embodiment of the present invention, each PD receiver includes a photodiode  and a blocking diode . Blocking diodes  are used to prevent disturbances between neighboring diodes . According to an embodiment of the present invention, blocking diodes  are low backwards current and low backwards capacitance type diodes.","Further according to an embodiment of the present invention, the voltage +V at push-pull drivers  is greater than or equal to the voltage +Vref at receiver electronics . A slightly higher voltage +V at push-pull drivers  than +Vref improves performance, since all blocking diodes  are in reversed state, except for the blocking diode of the PD receiver corresponding to the active row and column.","vi. PD Receivers ","In accordance with embodiments of the present invention, multiple configurations are described herein for PD receivers used with touch screen . In each configuration, the PD output is sent to an analog-to-digital converter (ADC). The ADC matches the expected output range, and the output range differs from one configuration to another. The accuracy of touch screen  depends to a large extent on the accuracy of the ADC.","The PD receiver configuration is determined by three parameters: (1) the number of PD signals that enter controller , (2) the type of integrator circuit used to bias and sample PD current as it enters controller , and (3) the type of signal filter and amplifier circuit used, if any.","Regarding (1) the number of PD signals that enter controller , in a first PD receiver configuration, the PDs along each edge of touch screen  have separate outputs. Thus, at least one circuit is provided for PDs that are arranged along one edge of touch screen , and at least one other circuit is provided for PDs arranged along the other edge. In this regard, reference is made back to , which shows all PD outputs along one edge channeled into signal PDROW, and all PD outputs along a second edge channeled into signal PDCOL. A capacitor and a biasing resistor are coupled to each of the ADC input signals to control the current and to set a voltage amplitude range.","In a second PD receiver configuration, a limited number of PDs are connected to each ADC input. PDs may be grouped, for example, into sections of up to four PDs per section. Each output thus integrates four PDs. An advantage of this second configuration is less capacitance and less disturbance from non-selected neighboring PDs.","In order to further reduce capacitance and disturbance from non-selected neighboring PDs, an embodiment of the present invention adds at least one multiplexer that outputs only the selected PD signal. In this regard reference is now made to , which is a diagram of multiplexer , which operates as a PD output selector, in accordance with an embodiment of the present invention.  shows two parallel multiplexers , which each receives eight PD signals as input, and generates a single output signal. As described hereinabove with reference to , the PD output is processed by signal filters and amplifiers . For a touch screen with 64 PDs, in a configuration using eight multiplexers , each multiplexer taking eight PD input signals and outputting to a signal filter and amplifier , eight such filters and amplifier  are used.","The dotted line shown in  separates components internal to controller , which are shown to the right of the dotted line, from components external to controller , which appear to the left of the dotted line. Controller  includes a multiplexer , which connects to an analog to digital converter . The signals entering multiplexers  from the top are control signals from controller . Each such control signal uses three bits, to control selection of one of the eight input PDs. In general, n control bits suffice for controlling selection of up to 2input PDs.","In addition to the three control bits used to control selection of the input PDs, each multiplexer  receives an output enable control bit, OE_NOT, from controller . When OE_NOT is set to zero, the PD driver outputs the selected PD signal. When OE_NOT is set to one, the PD driver outputs a high impedance signal.","TABLE I summarizes the logical input-output relationships used with each PD multiplexer .",{"@attributes":{"id":"p-0132","num":"0131"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE I"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Logical input-output relationship for PD multiplexers"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"35pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Control Bit 1","Control Bit 2","Control Bit 3","OE_NOT","Output"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}},{"entry":["0","0","0","0","In1"]},{"entry":["0","0","0","1","HighZ"]},{"entry":["1","0","0","0","In2"]},{"entry":["1","0","0","1","HighZ"]},{"entry":["0","1","0","0","In3"]},{"entry":["0","1","0","1","HighZ"]},{"entry":["1","1","0","0","In4"]},{"entry":["1","1","0","1","HighZ"]},{"entry":["0","0","1","0","In5"]},{"entry":["0","0","1","1","HighZ"]},{"entry":["1","0","1","0","In6"]},{"entry":["1","0","1","1","HighZ"]},{"entry":["0","1","1","0","In7"]},{"entry":["0","1","1","1","HighZ"]},{"entry":["1","1","1","0","In8"]},{"entry":["1","1","1","1","HighZ"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}]}}},"It will be appreciated by those skilled in the art that the first and second configurations, with and without multiplexers , are based on providing PD_ROW and PD_COL signals, each signal corresponding to a signal-generating circuit, or to a plurality of signal-generating circuits.","In accordance with the second configuration, separate current integrator cells are assigned to subgroups of column PDs and to subgroups of row PDs. E.g., one current integrator may be assigned to eight PDs. In this embodiment, multiple inputs to controller  are provided, one input for each subgroup. Controller , as shown in , may be used this way to accommodate 64 PDs grouped into eight subgroups, via eight input signals to controller . Specifically, the eight inputs are PD_ROW1, PD_ROW2, PD_ROW3, PD_ROW4, PD_COL1, PD_COL2, TOUCH_SIGNAL and TOUCH_SIGNAL2, where TOUCH_SIGNAL and TOUCH_SIGNAL2 are used as PD_COL3 and PD_COL4, respectively.","vii. PD Current Integrator ","With regard to the type of integrator circuit used to bias and sample PD current as it enters controller , several alternative configurations and methods of operation are provided.","According to a first configuration, each of the PD_ROW and the PD_COL signals entering controller  is coupled to a biasing resistor that sets the linear amplification, and to a capacitor that integrates the PD current over time. In this regard reference is now made to , which is a diagram of a resistor-based current integrator  used in conjunction with PD receivers  in a touch screen , in accordance with an embodiment of the present invention. The dotted line shown in  separates components internal to controller , which are shown to the right of the dotted line, from components external to controller , which appear to the left of the dotted line.","According to a second configuration, the biasing resistor is removed, and a transistor is used to set a voltage amplitude range.","In this regard, reference is now made to , which is a diagram of a transistor-based current integrator  used in conjunction with PD receivers  in a touch screen , in accordance with an embodiment of the present invention. The dotted line shown in  separates components internal to controller , which are shown to the right of the dotted line, from components external to controller , which appear to the left of the dotted line. A transistor T1 is located within controller , and is used to efficiently control current sampled by a selected PD. In alternative embodiments of the present invention, components external to controller  are used to control the current.","When transistor T1 is open, capacitor C charges, and integrates the current, i, flowing through the photodiode. The voltage over C is given by\n\n\n\nWhen transistor T1 is closed, capacitor C discharges, and the voltage over C is reduced to 0 volts. In order to obtain a precise measure of the current, the sample and hold (S\/H) element in  is discharged before sample integration begins, and S\/H is open through sample integration time. In this embodiment, the analog to digital converter ADC in  is not active during integration time.\n","In an alternative embodiment, S\/H is configured to sample at the end of the integration period, without previously having discharged the S\/H internal capacitors. In this embodiment, there may be a voltage differential between the capacitor associated with S\/H and the integrator circuit.","As indicated hereinabove with reference to controller , elements illustrated in the figures as being external to controller  may, in other implementations, reside internal to controller .","Reference is now made to , which illustrates current integration over time, in accordance with an embodiment of the present invention. As shown in , when transistor T1 is turned on, the current in capacitor C is reset to zero. When transistor T1 is turned off, capacitor C begins integrating current over time. The measurement used is the current value at the end of the sample window.","The transistor-based circuit offers several advantages over the use of resistors for setting the linear amplification of the PD signal. The resistors have a higher bias to low frequency noise, such as ambient light and, as such, the ambient light is amplified more than the light pulse. Moreover, the system measures the ambient light sensed by a designated PD prior to issuing a light pulse from a selected LED, in order to establish a baseline value. Thus resistor bias to low frequency ambient light amplifies the ambient light measurement more than the light pulse measurement. By eliminating these resistors, the system registers similar levels of bias for both ambient light measurements and light pulse measurements.","Another advantage of the transistor-based circuit is that the resistors in the resistor configurations require longer time to completely discharge between measurements, than transistor T1. In turn, this enables use of shorter intervals between measurements of successive PDs, as well as between successive measurements of the same PD. In particular, in cases in which a successive PD senses less ambient light, or other such noise, than a previous PD, a relatively long discharge interval is required to fully discharge the circuit below the ambient level of the previous PD with the resistor configurations. This problem is overcome in the transistor-based circuit, in which the resistors are eliminated. Since the current measurement is linearly integrated over time, with little residual current present in the measuring circuit, the transistor-based circuit requires uniform measuring intervals. As such, this configuration requires precise timing to ensure that the measurement be integrated over the same amount of time. In distinction, when resistors are used, because they are inherently less precise, sampling has less stringent timing requirements. Clock jitter, for example, impairs performance of a system with transistor-based circuits, more so that for systems with resistors.","Reference is now made to , which is a simplified flowchart of a method for PD sampling, in accordance with an embodiment of the present invention. The method shown in  relates to the transistor-based circuit of , used to sample PDs.","At step  all transistors, T1, T2 and T3, are turned off. At step  a PD is selected by turning on transistor T2. At step  the S\/H circuit is opened, and transistor T1 is turned on. This causes capacitor C and the capacitor inside the S\/H circuit to discharge. If the S\/H circuit is not discharged, then residuals from previous measurements may arise. At step  the S\/H circuit is closed, for holding. At step  transistor T1 is turned off, in order to begin current integration. At step  the method waits a designated amount of time, such as 10 \u03bcs. At step  the S\/H circuit is opened. At step  the method waits for at least the minimum amount of time required by the S\/H circuit; e.g., 1 \u03bcs. At step  the S\/H circuit is closed, and the analog to digital conversion begins.","At step  transistor T1 is turned on, in order to discharge capacitor C. At step  the method waits 1 \u03bcs for the capacitor for discharge. At step  the LED is turned on, by turning on transistor T3.","At step  transistor T1 is turned off, to begin a new integration\/measurement. At step  the method waits for a designated amount of time, generally the same amount of time as in step . Step  is done for performance. At step  the S\/H circuit is opened. The conversion from step  must be ready and stored. At step  the method waits for at least the minimum amount of time required by the S\/H circuit; e.g., 1 \u03bcs. At step  the S\/H circuit is closed, and the analog to digital conversion begins. At step  the LED is turned off, by turning off transistor T3. At step  transistor T1 is turned on, in order to discharge capacitor C. Finally, at step  the method waits 1 \u03bcs for the capacitor for discharge.","In accordance with an embodiment of the present invention, steps - of  are repeated several times, e.g., 5-20 times, in order to obtain a plurality of measurements when the LED is on, and a plurality of measurements when the LED is off. The background ambient light is then measured by accumulating values when the LED is on and subtracting values when the LED is off.","In this regard, reference is now made to , which illustrates measuring ambient light by summing pulses when an LED is on and subtracting pulses when the LED is off, in accordance with an embodiment of the present invention. In terms of samples A thru J shown in , the accumulated signal is B\u2212A+D\u2212C+F\u2212E+H\u2212G+J\u2212I. A signal to noise ratio is given by",{"@attributes":{"id":"p-0152","num":"0151"},"maths":{"@attributes":{"id":"MATH-US-00006","num":"00006"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":[{"mi":["S","N"]},{"mrow":{"mo":"\u2211","mi":"signals"},"msqrt":{"mrow":{"mo":"\u2211","msup":{"mi":"noise","mn":"2"}}}}],"mo":"="}}},"br":{}},"It will be appreciated by those skilled in the art that the method of  affords many advantages, including inter alia:\n\n","In an alternative embodiment of the present invention, integration and analog to digital conversion are performed in sequence. This alternative embodiment has the advantage that the capacitor in the S\/H circuit is discharged prior to each current integration, providing for more accurate measurement. Thus if this alternative embodiment is implemented using an ASIC, then the integrator and the S\/H may be in the same function block. However, if analog to digital conversion of a first signal is to be done simultaneous with integration of a second signal, then the integrator and the S\/H should be in separate function blocks.","Reference is now made to , which is a simplified flowchart of an alternative method for PD sampling, in accordance with an embodiment of the present invention. The method shown in  relates to the transistor-based circuit of , used to sample PDs.","At step  all transistors, T1, T2 and T3, are turned off. At step  a PD is selected by turning on transistor T2. At step  the S\/H circuit is opened and transistor T1 is turned on. This serves to discharge capacitor C and the capacitor inside the S\/H circuit. If the S\/H circuit is not discharged, then residuals from previous measurements may arise. At step  the method waits 1 \u03bcs for the capacitor to discharge. At step  transistor T1 is turned off, to begin current integration. At step  the method waits a designated amount of time; e.g., 10 \u03bcs. At step  the S\/H circuit is closed, and the analog to digital conversion begins. At step  the method waits for the conversion from step  to complete.","At step  transistor T1 is turned on, to discharge capacitor C, and the S\/H circuit is opened. At step  the method waits 1 \u03bcs for the capacitor to discharge. At step  the LED is turned on, by turning on transistor T3. At step  transistor T1 is turned off, to begin a new integration\/measurement. At step  the method waits a designated amount of time, generally the same amount of time as from step . Step  is done for performance.","At step  the S\/H circuit is closed, and the analog to digital conversion begins. At step  the LED is turned off, by turning off transistor T3. At step  the method waits for the conversion to complete.","As with the method of , steps - of  are repeated for a plurality of pulses. Values when the LED is on are accumulated, and values when the LED is off are subtracted, in order to measure the ambient light.","viii. PD Signal Filter and Amplifier ","Discussion now turns to the type of signal filter and amplifier circuit used, if any.  is a circuit diagram of signal filter and amplifier  used for PDs arranged along one edge of touch screen , in accordance with an embodiment of the present invention. The input to signal filter and amplifier , denoted PD_COL, is the output current from a selected column PD. The output current of signal filter and amplifier  is sent to controller  via the TOUCH_SIGNAL signal shown in . A similar circuit (not shown), used for PDs arranged along the other edge of touch screen , processes current from a selected row PD, and sends the output current to controller  via one of the PD_ROW_n signals shown in . In this embodiment, the remaining PD_ROW and PD_COL signals are not used. Additional filter and amplifier circuits are used when PDs along one edge are grouped into subgroups as described above with respect to the second PD receiver configuration. In this case additional PD_ROW and PD_COL signals are used as required by the number of ADC inputs to controller .","The circuit shown in  includes two filter and amplifier paths. One path ends at TOUCH_SIGNAL in the middle of , and another path, which performs a second filter and amplification, ends at TOUCH_SIGNAL2 at the right of . In one embodiment of the present invention, both outputs TOUCH_SIGNAL and TOUCH_SIGNAL2 are connected to controller , and firmware running on controller  is used to select one of the two signals. In another embodiment of the present invention, only one of the outputs is connected to controller .","Signal filter and amplifier  includes passive sub-circuits that have two resistors, such as resistors R10 and R11, and one capacitor, such as capacitor C10. Resistors such as R12 and R13 are pass-through zero-ohm resistors.","PD_COL connects with the ADC input via resistors R10, R12, R13 and R14, and via capacitors C10 and C11. According to an embodiment of the present invention, capacitor C11 is a zero-ohm capacitor. The signal level is set by resistor R13 and capacitor C1. R13 sets the voltage amplitude range entering the ADC, and C1 integrates the current to generate voltage input to the ADC. According to this configuration, the signal does not have to be biased to within a predetermined range, such as between V and VCC, because open collectors are used to read the active PD output value. It is noted in  that the signal is in the range of +3V and below.","An alternative signal filter and amplifier circuit is shown in , in accordance with an embodiment of the present invention. In this embodiment, an OP amplifier acts like a low impedance current to a voltage amplifier; i.e., a trans-impedance. This configuration results in less sensitivity to capacitance and truer current sensing. For this embodiment, the relationship between light and current is substantially linear.","Referring to , signal filter and amplifier  receives as input the output current from a selected column PD, denoted PD_COL. The output current of signal filter and amplifier  is sent to controller  via the TOUCH_SIGNAL signal shown in . A similar circuit (not shown), used for PDs arranged along the other edge of touch screen , processes current from a selected row PD, and sends the output current to controller  via the TOUCH_SIGNAL2 signal shown in ","This embodiment uses a large phase margin in order to eliminate high amplification grade that causes the amplifier to oscillate.","The discrete transistor amplifier circuits of  are of advantage in having high frequency response and low cost. However, they are of disadvantage in having non-linear integration over time.","A feature of the discrete transistor amplifier circuits of  is that DC amplification is reduced, and the PD receiver may thus be made entirely AC current. However, problems may arise when shifting between PDs having a large signal difference between them. E.g., suppose a first PD receives little light and is amplified by the transistor-based amplifier to be within a designated range, and a second PD receives substantially more light, based on its position relative to ambient light sources. Then the transistor-based amplifier, having greatly amplified the first signal, will also greatly amplify the second AC signal, and also the rising edge of the difference between signals, including the second signal DC values. The combination of these amplified DC values, together with the AC of the second PD, may amplify the resulting signal beyond the maximum voltage, say, 3V.","2. Optics of Touch Screen ","Reference is now made to , which is a diagram of a prior art lens assembly for an LED and PD.","Reference is now made to , which is a diagram of a lens assembly for use with LEDs and PDs for a touch screen, in accordance with an embodiment of the present invention. Shown in  are four optical surfaces for the LED lens side, and four optical surfaces for the PD side. The focal length, f, is not necessarily the same as the distance from the LED to the last lens surface, LENS SURFACE 2. It may be larger or smaller than such distance. If the focal length is smaller than such distance, then the light spreads over a larger receiving area, and the receiving side scans a larger area and thus receives more background light. Nevertheless, there is an advantage to having a focal length slightly smaller than the distance from the LED to the last lens surface, because an optimized design is able to sense for tolerances of the optical elements.","Reference is now made to in , which is a diagram of a lens assembly for distributing two groups of light beams, denote by X and Y, in accordance with an embodiment of the present invention. Shown in  is a lens assembly aligned substantially parallel with the surface of the touch screen, and a second lens assembly skewed at an angle with the surface of the touch screen. The second lens assembly is arranged so that a finger or stylus positioned near the touch screen, reflects some or all of light beams Y to the PD receivers.","It will be appreciated by those skilled in the art that although  illustrate convex lenses, concave and\/or convex lenses may be used to achieve the dual foci.","The lens assembly shown in  is designed with the following objectives:\n\n","Reference is now made to , which are diagrams of simplified lens assemblies corresponding to the respective lens assemblies of , in accordance with an embodiment of the present invention. The simplified lens assembly in  resembles that of a camera lens, and is useful for determining LED and PD die sizes, denoted by d, focal length, denoted by f, PD lens aperture, denoted by a, and distance between LED and PD lens surfaces, denoted by s. The PD lens aperture is approximately equal to the distance between neighboring PDs and to the distance between neighboring LEDs. Ideally, the LED projects over the PD lens aperture, which corresponds to the relationship d\/a=f\/s. Sample design parameters for a horizontal lens and for a vertical lens are provided in TABLE II. It is noted that the horizontal and vertical foci are significantly different. Ideally, the horizontal and vertical foci are directed away from the LED center, and towards the target PD, so that all light emanating from the LED lens arrives at the PD.",{"@attributes":{"id":"p-0177","num":"0183"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE II"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Design parameters for touch screen optics"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["parameter","symbol","horizontal lens","vertical lens"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"right"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"28pt","align":"right"}},{"@attributes":{"colname":"6","colwidth":"21pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["LED die size","d","0.3","mm","0.3","mm"]},{"entry":["PD die size","d","0.3","mm","0.3","mm"]},{"entry":["aperture","a","5","mm","1","mm"]},{"entry":["distance between LED","s","30","mm","30","mm"]},{"entry":"and PD edges"},{"entry":["focal length","f","1.8","mm","9","mm"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"3. Applications of Touch Screen ","Aspects of the present invention relate to applications for the touch screen described hereinabove. The ensuing discussion includes (i) user input based on finger motion, (ii) mobile phone handset, (ii) touch-screen as mouse-type input device for a computer, and (iii) touch-based storefront window.","i. User Input Based on Finger Motion","As indicated in , the output of PD receivers  is processed by controller , to determine, from the measured light intensities, if one or more objects are positioned over touch screen . The optical assembly of  enables measurements of light intensities at several heights above touch screen ; i.e., three-dimensional measurements at various heights over the surface of the touch screen . In this regard, reference is now made to , which shows three-dimensional measurements of light intensities over the surface of touch screen , in accordance with an embodiment of the present invention. The top chart corresponds to measured light intensities at seven locations, when no finger is positioned on touch screen . The bottom left chart corresponds to measured light intensities at the seven locations, when a finger is positioned over touch screen . The bottom right chart also corresponds to measured light intensities when the finger is positioned over touch screen . The bottom right chart corresponds to measurements taken slight after the measurements used for the bottom left chart were taken. The difference in charts indicates that the finger is moving downward, closer to the touch screen. As a result, light intensity is being blocked at lower z-values, i.e., heights.","It will thus be appreciated by those skilled in the art that the measurements of light intensities at various heights above touch screen  enables determination of both position and motion of an object on touch screen . Referring to , the distance between the finger positions from the bottom left chart and the bottom right chart, denoted by DIST, may be determined from the light intensity readings. Knowing the time difference between the measurements for the two charts enables determination of a finger velocity vector. If the velocity vector is substantially downward, then the magnitude of the velocity vector is an indication of how hard the finger is pressing on touch screen . If the velocity vector is substantially rightward, then the finger is making a rightward gesture.","By determining motion information, touch screen  is able to distinguish between a variety of user inputs, including inter alia tap, press, and directional finger gesture, and to process them accordingly.","Reference is now made to , which is an illustration of a touch screen with three-dimensional sensing functionality, in accordance with an embodiment of the present invention. Touch screen  functions as a three-dimensional sensor. Increases or decreases in light intensities measured by PD receivers are used to sense the presence of a finger or other object above the screen surface. As shown in , a lens or array of lenses, distributes light emitted by an LED in a plurality of directions. Two groups of light beams are identified in ; namely, light beams denoted by X, which are directed along a plane substantially parallel to the screen surface, and light beams denoted by Y, which are directed diagonally across and upward to the screen surface.","When no object is near the screen surface, the PD receiver measures all of light beams X. When a finger or other object is positioned above the screen surface, it reflects a portion of light beams Y to the PD receivers, via a second lens or array of lenses. The PD receiver accordingly senses an increased light intensity corresponding to the sum of light beams X and Y. It will be appreciated by those skilled in the art that use of a reflective object, such as a silver pen, to point at the touch screen, enhances reflection of light beams Y.","Reference is now made to , which is a graph illustrating different light intensities measured by a PD receiver corresponding to proximity of an object to a touch screen surface, in accordance with an embodiment of the present invention. The middle portion of the graph corresponds to light beams X, indicating that no object is obstructing light beams X, and none of light beams Y are reflected to the PD receiver. This portion of the graph is the default PD receiver intensity when no object is near the screen surface.","The signals shown in  rise and decline. When the PD current is activated, as shown at the bottom of , the signals rise. When the PD current is terminated, the signals decline.","The highest portion of the graph corresponds to a finger or object reflecting a large portion of light beams Y to the PD receiver. As the finger or object is moved closer to the screen surface, the magnitude of measured light intensity changes, based on the amount of light beams Y directed to the PD receiver by the finger or object. The effect of increasing intensity of reflected light beams Y is similar to the effect of increasing intensity when a finger is brought close to a light bulb. Namely, as the finger approaches the light bulb, the intensity of light on the fingertip increases; i.e., more light is reflected by the fingertip.","When a finger or object is brought very close to the screen surface such that it blocks a portion of light beams X, the measured light intensity at the PD receiver drops to below its default value, and approaches zero as the object touches the screen and substantially completely blocks light beams X. Referring back to , A and  it is seen that the light intensity detected by a PD receiver is a function of a finger's proximity to the screen surface, when the finger blocks a portion of light beams X.","ii. Mobile Phone Handsets","The touch screens of the present invention are particularly suitable for small mobile phones. Phones that have these touch screens do not required keypads, since the screens themselves may serve as touch-based keypads. The touch screens serve as input devices, for receiving touch-based user inputs, and as output devices, for displaying data generated by a phone modem.","US Publication No. 2008\/007533 A1 entitled INFORMATION MANAGEMENT SYSTEM WITH AUTHENTICITY CHECK by Ericson et al. describes a system for identifying the location of a pen above a sheet of paper, whereby the pen includes a camera that captures images of a varying pattern on the sheet of paper. A computer unit analyzes a captured image and determines therefrom the location of the pen. Further, by analyzing a sequence of images captured by the camera as the pen is moved over the pattern, the computer unit identifies strokes made by the pen.","In one embodiment, the present invention provides a similar system for a touch screen. Instead of providing a pattern on a sheet of paper, a light pattern is projected over the touch screen. When a finger or other object is positioned above the touch screen, the finger or other object reflects a portion of the projected light pattern. Only the reflected portion of the projected pattern is substantially visible.","A camera communicatively coupled with the touch screen captures an image of space above the touch screen. The captured image shows the pattern reflected by the finger or other object. The captured image is transmitted to a controller that determines the location of the finger or other object over the touch screen by analyzing the captured image. Further, by providing a sequence of images captured as the finger or other object moves over the touch screen, the controller identifies a stroke or gesture made by the finger or other object.","Reference is now made to , which is a simplified illustration of a handset  with a touch screen , in accordance with an embodiment of the present invention. Handset  includes a projector , a barrier  that blocks portions of light projected by projector , and a lens  that spreads the light over a specific angle, denoted by \u03b8. Barrier  may be implemented as an etched metal plate that only allows light to penetrate through the etched openings. Barrier  may alternatively be implemented as a material that has transparent portions and non-transparent portions. The transparent portions may be in the form of digital, letters, dots, or such other shape. Barrier  may alternatively be a grating, with openings through which light projected by projector  passes. When projector  projects light at barrier , a light pattern  is generated above touch screen .","Handset  further includes a camera  which captures images of projected pattern . When an object, such as a user's finger , is within range of projected pattern , portions of pattern  are reflected by finger . In turn, the images captured by camera  show the reflected portions of pattern , from which distance and position information of finger  is derived. Since finger , or such other reflecting object such as a stylus or pen, is not a flat surface, the reflected portion of pattern  is warped or otherwise distorted when viewed from an angle other than the angle of projection. By aligning camera  with projector , the images of finger  are captured at substantially the angle of projection, as a result of which the reflected portion of pattern  is not significantly distorted.","Reference is now made to , which is a simplified illustration of a pattern of dots projected into the space above screen , in accordance with an embodiment of the present invention. The pattern of dots shown in  may be generated by a barrier  that is implemented as a metal plate having holes etched therein. A portion of the dot pattern, shown as black dots, is reflected by finger ; and a portion of the dot pattern, shown as white dots, is not reflected by finger . By analyzing the pattern of dots reflected by finger , the touch screen controller determines the three-dimensional position of finger  relative to touch screen .","Finger  in  reflects a pattern of seven dots. As finger  moves to the right or to the left, different dot patterns appear on finger , based on the dots shown in  to the right and to the left of finger , respectively. Similarly, when finger  moves up or down, different dot patterns appear on finger , based on the absence of dots above finger  and the dots shown below finger . As such, the dot pattern on finger  determines the height of finger  above touch screen , along the z-axis, and the position of finger  along the width of touch screen , along the x-axis.","The position of finger  along the length of touch screen , along the y-axis, is determined from the scale of the image reflected by finger  or, equivalently, by the sizes of the elements of the projected pattern. Since projector  projects the pattern across a wide angle, as shown in , the closer finger  is to projector , the denser is the reflected pattern. As such, the density of the reflected image determines the distance between finger  and projector . In turn, this distance determines the position of finger  along the length of touch screen , along the y-axis.","Reference is now made to , which is a simplified illustration showing how the density of pattern  projected by projector  in the space above touch screen , and reflected by finger , is dependent upon the distance of finger  from projector , in accordance with an embodiment of the present invention. It is noted that the reflected pattern , signified in  by a \u201c1\u201d digit, scales larger the further it is from projector . The protected pattern  is spread over an angle \u03b8 by lens . The angle \u03b8 and the sizes of the captured pattern elements are used to determine the distance of the reflected pattern  from projector .","In an alternative embodiment of the present invention, a second projector and barrier is situated along a second edge of touch screen . The two sets of relative (x, z) position coordinates of finger , determined by the two cameras, suffice to determine the y coordinate of finger .","In accordance with an embodiment of the present invention, the distance and position information of finger  is used to further derive the location  on touch screen  where finger  is aimed. Touch screen  highlights location  so that a user can see the location to which finger  is aimed, and to adjust the position of finger  if necessary.","Reference is now made to , which is a simplified illustration of a pattern of digits projected into the space above screen , in accordance with an embodiment of the present invention. The pattern of digits shown in  may be generated by a barrier  that is implemented as a metal plate having the digits \u201c1\u201d, \u201c2\u201d and \u201c3\u201d etched thereon lithographically, or by such other etching process. When projector  projects light at barrier , the digits \u201c1\u201d, \u201c2\u201d and \u201c3\u201d are projected above screen . When finger  is positioned over screen  to the left of projector , as shown in , the digit \u201c1\u201d appears on the finger, and is captured by camera . The digits \u201c2\u201d and \u201c3\u201d are not visible.","Similarly, when finger  is positioned in front of projector  (not shown), the digit \u201c2\u201d appears on the finger, and is captured by camera ; and when finger  is positioned to the right of projector  (not shown), the digit \u201c3\u201d appears on the finger, and is captured by camera .","Reference is now made to , which is a simplified illustration of another pattern of digits projected into the space above screen , in accordance with an embodiment of the present invention. The pattern of digits shown in  may be generated by a barrier  that is implemented as a metal plate having two rows of digits etched thereon. When projector  projects light through barrier , the digits \u201c1\u201d, \u201c2\u201d and \u201c3\u201d are projected closer to the surface of screen , and the digits \u201c4\u201d, \u201c5\u201d and \u201c6\u201d are projected further from the surface of screen . When finger  is positioned over screen  to the upper left of projector , as shown in , the digit \u201c4\u201d appears on finger , and is captured by camera . The remaining digits are invisible.","Similarly, when finger  is positioned over screen  to the lower left of projector  (not shown), the digit \u201c1\u201d appears on finger , and is captured by camera .",{"@attributes":{"id":"p-0207","num":"0213"},"figref":"FIGS. 30B-30E","b":["640","100","630","613","640"]},"iii. Touch Screen as Mouse-Type Input Device for a Computer","Aspects of the present invention apply to a touch screen which serves as a mouse-type input device for a computer. Reference is now made to , which is an illustration of use of touch screen  for processing finger motions as input to a computer, in accordance with an embodiment of the present invention. Shown in  is a finger motion that is detected by touch screen . Controller  () recognizes the finger motion and converts the motion to mouse pointer coordinates, for input to a computer. Thus it may be appreciated that touch screen  is able to emulate mouse movement.","Additionally, left and right mouse clicks may also be emulated by displaying two objects on touch screen . Touching a first one of the objects corresponds to a left mouse click, and touching a second one of the objects corresponds to a right mouse click.","Further single and double clicking may be emulated by velocities of approach of touch screen . As described above with respect to , measurement of light intensities at different heights above touch screen  enables determination of finger velocity. A slow approach, made by a light tap, corresponds to a single click, and a fast approach, made by a hard press, corresponds to a double click.","Referring to , it will be appreciated by those skilled in the art that the path of finger motion shown involves relative motion between a finger and touch screen . The path shown may be generated by a moving finger and a stationary touch screen. It may also be generated by a moving touch screen and a stationary finger, or other stationary object.","As such, a dual embodiment of the present invention operates by moving touch screen  over a stationary object. The relative motion of touch screen  generates the path shown in  and, in turn, the path information is converted into mouse coordinates.","iv. Touch-Based Storefront Window","Aspects of the present invention relate not only to use of touch-based position and motion information for input to a computing device, but also to use of this information for data processing purposes. In general, the sensed position and motion information for touch screen  may be transmitted to a data processor for further analysis. An application of such data processing is a touch-sensitive interactive storefront window, which enables passersby to interact with a display showcase or a video display. The storefront window system responds to passersby touch inputs, and also records and analyzes their touch inputs.","In this regard, reference is now made to , which is a simplified illustration of a touch sensitive display case  containing items of merchandise , in accordance with an embodiment of the present invention. In accordance with an embodiment of the present invention, the perimeter of an opening in the display case is fitted with light sensors and light emitters, thereby providing the display case with touch screen functionality. Additionally, display case  includes mechanical apparatus to automatically move, rotate or otherwise manipulate a displayed item , in response to a passerby  touching the display case at a location corresponding to the displayed item.","A passerby  may interactively manipulate selected items by touching and making gestures with his finger on display case . For example, touching display case  causes a corresponding item  to be selected. A rotating gesture on display case  causes item  to be rotated. A swipe on display case  in one direction causes item  to be moved closer to passerby , and a swipe in display case  in the opposite direction causes item  to be moved away from passerby . An x-shaped gesture on display case  causes item  to be de-selected.","In the foregoing specification, the invention has been described with reference to specific exemplary embodiments thereof. It will, however, be evident that various modifications and changes may be made to the specific exemplary embodiments without departing from the broader spirit and scope of the invention as set forth in the appended claims. Accordingly, the specification and drawings are to be regarded in an illustrative rather than a restrictive sense."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The present invention will be more fully understood and appreciated from the following detailed description, taken in conjunction with the drawings in which:",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIGS. 2A-2C"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIGS. 3A and 3B"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIGS. 4A-4C"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 5","FIG. 1"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 6A"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 6B"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":["FIG. 7","FIGS. 6A and 6B"]},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 13A"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 13B"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 18A"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 18B"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 23A"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 23B"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 25A"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 25B"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIGS. 26A and 26B","FIGS. 25A and 25B"]},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 27"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 28"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 29"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 30A"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 30B"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 30C"},{"@attributes":{"id":"p-0058","num":"0057"},"figref":"FIGS. 30D and 30E"},{"@attributes":{"id":"p-0059","num":"0058"},"figref":"FIG. 31"},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 32"}]},"DETDESC":[{},{}]}
