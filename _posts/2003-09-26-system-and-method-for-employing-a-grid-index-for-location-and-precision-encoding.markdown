---
title: System and method for employing a grid index for location and precision encoding
abstract: A system and method for combining the precision estimate of a database entry's coordinate value such that the precision information is included as part of the one-dimensional index. This is done by constructing a hierarchical index in which the size of the grid is related to the precision of the coordinate value. A grid index is a gridding of an n-dimensional space into a regular partition of the grid space into grid units, for which for a point in space, x, there is a function index (x), which retrieves a unique integer value for the grid that contains Point x, and a function coordinate (y, s), which returns a point associated with the index y at scale s. A hierarchical grid index is effectively a number of grid indices overlaid on the same space, with grid units of different sizes. In this case, each of the functions employs an additional argument that specifies the size of the grid unit to use. Thus, assuming that the grid size, s, is drawn from a set of grid sizes, S, Index (x,s) returns a unique integer value for the grid of size s that contains Point x. Hierarchical indexes may be used to enhance the performance of database queries. A query that seeks results from a small grid size, s, does not seek matches at a large grid size, s. Similar calculations can be performed for a finite area A.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07966301&OS=07966301&RS=07966301
owner: Planeteye Company ULC
number: 07966301
owner_city: Toronto, Ontario
owner_country: CA
publication_date: 20030926
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application claims priority under 35 U.S.C. Section 119()(1) of provisional application No. 60\/469,314, filed May 9, 2003.","1. Technical Field","This invention is directed toward a system and method for location and precision encoding. More specifically, the invention is directed toward a system and method for combining the precision estimate of a database entry's coordinate value such that the precision information is included as part of a one-dimensional index.","2. Background Art","Geographic Information Systems (GIS) are well-organized databases of information catalogued, in part, by their relationship to geography. Often, these databases contain on the order of millions or billions (or more) of data elements, each of which is associated with a particular geographical location. As an example, consider a world-wide photo database, where each photograph is associated with the location where it was taken.","Although modern relational databases perform a variety of algorithmic optimizations to speed up the retrieval of data contained in them, they remain inefficient at particular tasks. For example, databases are relatively poor at performing range queries over more than a single dimension. These are queries of the form, \u201cRetrieve all data in which Value X is between xand x, Value Y is between yand y, and Value Z is between zand z.\u201d (Again, modern databases can handle even these types of queries well, if the number of data elements is comparatively small; but as they cannot know the form of the data a priori, they necessarily are designed for generality at the expense of efficiency, and remain inefficient for large amounts of data.)","Furthermore, in some GIS applications, elements are associated with geographical regions at different scales, and queries may be performed over a range of scales. For example, in a photo database, an item may be associated with the city of New York as a whole or more specifically with the city block representing the Empire State Building. In certain kinds of queries, it may be useful to retrieve all items taken at the Empire State Building when querying for photos taken in New York City, but the converse may be undesirable\u2014not all photos taken in New York City will be relevant to a query about the Empire State Building.","Therefore, what is needed is a system and method that can create a database of location-tagged data, for which retrieval performance is optimized for location-based queries at a particular scale and finer, no matter of the massiveness of the database.","The invention is directed toward a system and method for combining the precision estimate of a database entry's coordinate value such that the precision information is included as part of a one-dimensional index by constructing a hierarchical index in which the size of the grid is related to the precision of the coordinate value.","A grid index is a gridding of an n-dimensional space into a regular partition of the grid space forming grid units, for which for a point in space, x, there is a function index (x), which retrieves a unique integer value for the grid that contains Point x. A hierarchical grid index is effectively a number of grid indices overlaid on the same space, with grid units of different sizes. In this case, each of the functions requires an additional argument which specifies the size of the grid unit to use. Thus, assuming that the grid size, s, is drawn from a set of grid sizes, S, Index (x,s) returns a unique integer value for the grid of size s that contains Point x. Hierarchical indexes are used to enhance the performance of database queries. A query that seeks results from a small grid size, s, does not seek matches at a large grid size, s.","Similar calculations can be performed for a finite area A. That is, a grid index can be used for which for a finite area in space, A, there is a function index (A) which retrieves a unique integer value for a grid that wholly contains Area A.","Generally, to obtain a database wherein the precision estimate of a database entry's coordinate value is combined such that information is included as part of the one-dimensional index, one or more location entities are input into the system and method according to the invention. The grid index series is then computed wherein each grid is represented as a series of grids that incorporate the location of each location entity. This grid index series can then be output to a database.","More specifically, one embodiment of the system and method according to the invention uses an equirectangular projection (also known as \u201cunprojected lat\/long\u201d), in which latitude\/longitude (lat\/long) values of location entities are taken as straight x-y pairs on a Euclidean coordinate system and input into the system. The globe is then gridded at twenty different resolutions, with \u201csquare\u201d units whose sides correspond to 20\u00d7(\u00bd)degrees, for 0\u2266r<20. At the equator, these values correspond to scales ranging from \u02dc240 km down to \u02dc0.5 m. Next, each grid is indexed in raster-scan order. So, a given longitude\/latitude coordinate (long, lat), whose measurement error is expected to be normally distributed with standard deviation \u03c3 meters would be indexed as follows. First, the longitudinal span in degrees that 3\u03c3 meters corresponds to: d=[180(3\u03c3) cos(lat)]\/k\u03c0 is determined, where k is the circumference of the earth in meters (4\u00d710m). Next the degree-scale of precision, r, is determined to be the discrete unit of resolution that is just larger than d: r=|\u2212logd\/20|. Finally, the coordinate (long, lat) is mapped to the index,",{"@attributes":{"id":"p-0015","num":"0014"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mi":"l","mo":"=","mrow":{"mrow":[{"mrow":[{"mo":["(",")"],"mfrac":{"mn":"360","mi":"r"}},{"mo":["\u230a","\u230b"],"mfrac":{"mrow":{"mi":"lat","mo":"+","mn":"90"},"mi":"r"}}],"mo":"\u2062"},{"mrow":{"mo":["\u230a","\u230b"],"mfrac":{"mrow":{"mi":"long","mo":"+","mn":"180"},"mi":"r"}},"mo":"."}],"mo":"+"}}}},"br":{}},{"@attributes":{"id":"p-0016","num":"0015"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":{"mi":"lat","mo":"=","mrow":{"mfrac":[{"msup":{"mi":"lr","mn":"2"},"mn":"360"},{"mi":"r","mn":"2"}],"mo":["-","+"],"mn":"90"}},"mo":","}}},{"mtd":{"mrow":{"mrow":{"mi":"long","mo":"=","mrow":{"mrow":{"mi":["l","%"],"mo":["\u2062","\u2062"],"mfrac":{"msup":{"mi":"r","mn":"2"},"mn":"360"}},"mo":["-","+"],"mn":"180","mfrac":{"mi":"r","mn":"2"}}},"mo":","}}}]}}},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":{"@attributes":{"id":"ul0001-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0002","list-style":"none"},"li":"where \u2018%\u2019 is the modulus operator, and the r\/2 terms center the returned values in their grid."}}}},"The representation described above conveniently packages 2D lat\/long coordinates together with precision, and it can be used to index items in a database with a single 8-byte index. If queries are issued for all of the items in a particular grid, it would be necessary to make multiple queries to retrieve items with location tags that are more precise than the given grid. Querying for all items taken over a large area would be computationally expensive and time consuming. To avoid this, twenty fields (one per grid resolution) are used, each of which represents the location of an item at a particular precision. For a given item with (long, lat) and precision r*, lis computed, for all r\u2267r*; and, for r<r*, a value of null is assigned. This scheme allows one to query for all of the items that are known to occur within a particular grid at precision r, with a single, exact-match query over the field representing location at precision r. Note that items whose location-tag precisions are coarser than that queried for will not be returned, even if the grids intersect (this inverts the standard usage of hierarchical grid indexes).","The system and method according to the invention is advantageous in that it can query very large databases in a fraction of the time it would take to generate a multidimensional query, as would be typical in traditional database schema.","In addition to the just described benefits, other advantages of the present invention will become apparent from the detailed description which follows hereinafter when taken in conjunction with the drawing figures which accompany it.","It is noted that in the remainder of this specification, the description refers to various individual publications identified by a numeric designator contained within a pair of brackets. For example, such a reference may be identified by reciting, \u201creference [1]\u201d or simply \u201c[1]\u201d. A listing of the publications corresponding to each designator can be found at the end of the Detailed Description section.","In the following description of the preferred embodiments of the present invention, reference is made to the accompanying drawings that form a part hereof, and in which is shown by way of illustration specific embodiments in which the invention may be practiced. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.","1.0 Exemplary Operating Environment",{"@attributes":{"id":"p-0030","num":"0030"},"figref":"FIG. 1","b":["100","100","100","100"]},"The invention is operational with numerous other general purpose or special purpose computing system environments or configurations. Examples of well known computing systems, environments, and\/or configurations that may be suitable for use with the invention include, but are not limited to, personal computers, server computers, hand-held or laptop devices, multiprocessor systems, microprocessor-based systems, set top boxes, programmable consumer electronics, network PCs, minicomputers, mainframe computers, distributed computing environments that include any of the above systems or devices, and the like.","The invention may be described in the general context of computer-executable instructions, such as program modules, being executed by a computer. Generally, program modules include routines, programs, objects, components, data structures, etc. that perform particular tasks or implement particular abstract data types. The invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment, program modules may be located in both local and remote computer storage media including memory storage devices.","With reference to , an exemplary system for implementing the invention includes a general purpose computing device in the form of a computer . Components of computer  may include, but are not limited to, a processing unit , a system memory , and a system bus  that couples various system components including the system memory to the processing unit . The system bus  may be any of several types of bus structures including a memory bus or memory controller, a peripheral bus, and a local bus using any of a variety of bus architectures. By way of example, and not limitation, such architectures include Industry Standard Architecture (ISA) bus, Micro Channel Architecture (MCA) bus, Enhanced ISA (EISA) bus, Video Electronics Standards Association (VESA) local bus, and Peripheral Component Interconnect (PCI) bus also known as Mezzanine bus.","Computer  typically includes a variety of computer readable media. Computer readable media can be any available media that can be accessed by computer  and includes both volatile and nonvolatile media, removable and non-removable media. By way of example, and not limitation, computer readable media may comprise computer storage media and communication media. Computer storage media includes both volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information such as computer readable instructions, data structures, program modules or other data. Computer storage media includes, but is not limited to, RAM, ROM, EEPROM, flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical disk storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium which can be used to store the desired information and which can be accessed by computer . Communication media typically embodies computer readable instructions, data structures, program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term \u201cmodulated data signal\u201d means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example, and not limitation, communication media includes wired media such as a wired network or direct-wired connection, and wireless media such as acoustic, RF, infrared and other wireless media. Combinations of the any of the above should also be included within the scope of computer readable media.","The system memory  includes computer storage media in the form of volatile and\/or nonvolatile memory such as read only memory (ROM)  and random access memory (RAM) . A basic input\/output system  (BIOS), containing the basic routines that help to transfer information between elements within computer , such as during start-up, is typically stored in ROM . RAM  typically contains data and\/or program modules that are immediately accessible to and\/or presently being operated on by processing unit . By way of example, and not limitation,  illustrates operating system , application programs , other program modules , and program data .","The computer  may also include other removable\/non-removable, volatile\/nonvolatile computer storage media. By way of example only,  illustrates a hard disk drive  that reads from or writes to non-removable, nonvolatile magnetic media, a magnetic disk drive  that reads from or writes to a removable, nonvolatile magnetic disk , and an optical disk drive  that reads from or writes to a removable, nonvolatile optical disk  such as a CD ROM or other optical media. Other removable\/non-removable, volatile\/nonvolatile computer storage media that can be used in the exemplary operating environment include, but are not limited to, magnetic tape cassettes, flash memory cards, digital versatile disks, digital video tape, solid state RAM, solid state ROM, and the like. The hard disk drive  is typically connected to the system bus  through anon-removable memory interface such as interface , and magnetic disk drive  and optical disk drive  are typically connected to the system bus  by a removable memory interface, such as interface .","The drives and their associated computer storage media discussed above and illustrated in , provide storage of computer readable instructions, data structures, program modules and other data for the computer . In , for example, hard disk drive  is illustrated as storing operating system , application programs , other program modules , and program data . Note that these components can either be the same as or different from operating system , application programs , other program modules , and program data . Operating system , application programs , other program modules , and program data  are given different numbers here to illustrate that, at a minimum, they are different copies. A user may enter commands and information into the computer  through input devices such as a keyboard  and pointing device , commonly referred to as a mouse, trackball or touch pad. Other input devices (not shown) may include a joystick, game pad, satellite dish, scanner, or the like. These and other input devices are often connected to the processing unit  through a user input interface  that is coupled to the system bus , but may be connected by other interface and bus structures, such as a parallel port, game port or a universal serial bus (USB). A monitor  or other type of display device is also connected to the system bus  via an interface, such as a video interface . In addition to the monitor, computers may also include other peripheral output devices such as speakers  and printer , which may be connected through an output peripheral interface . Of particular significance to the present invention, a camera  (such as a digital\/electronic still or video camera, or film\/photographic scanner) capable of capturing a sequence of images  can also be included as an input device to the personal computer . Further, while just one camera is depicted, multiple cameras could be included as an input device to the personal computer . The images  from the one or more cameras are input into the computer  via an appropriate camera interface . A microphone  may also be associated with the camera and input into the computer  with an interface  that is associated with one or more cameras. This interface  is connected to the system bus , thereby allowing the images to be routed to and stored in the RAM , or one of the other data storage devices associated with the computer . However, it is noted that image data can be input into the computer  from any of the aforementioned computer-readable media as well, without requiring the use of the camera .","The computer  may operate in a networked environment using logical connections to one or more remote computers, such as a remote computer . The remote computer  may be a personal computer, a server, a router, a network PC, a peer device or other common network node, and typically includes many or all of the elements described above relative to the computer , although only a memory storage device  has been illustrated in . The logical connections depicted in  include a local area network (LAN)  and a wide area network (WAN) , but may also include other networks. Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets and the Internet.","When used in a LAN networking environment, the computer  is connected to the LAN  through a network interface or adapter . When used in a WAN networking environment, the computer  typically includes a modem  or other means for establishing communications over the WAN , such as the Internet. The modem , which may be internal or external, may be connected to the system bus  via the user input interface , or other appropriate mechanism. In a networked environment, program modules depicted relative to the computer , or portions thereof, may be stored in the remote memory storage device. By way of example, and not limitation,  illustrates remote application programs  as residing on memory device . It will be appreciated that the network connections shown are exemplary and other means of establishing a communications link between the computers may be used.","The exemplary operating environment having now been discussed, the remaining parts of this description section will be devoted to a description of the program modules embodying the invention.","2.0 A System and Method Employing a Grid Index for Location and Precision Coding.","2.1 Overview.","The invention is directed toward a system and method for combining the precision estimate of a database entry's coordinate value such that the precision information is included as part of the one-dimensional index by constructing a hierarchical index in which the size of the grid is related to the precision of the coordinate value. A hierarchical grid index is formed from a number of grid indices overlaid on the same space. A grid index is a gridding of an n-dimensional space into a regular partition of the grid space into grid units, for which for a point in space, x, there is a function index (x), which retrieves a unique integer value for the grid that contains Point x. A hierarchical grid index is effectively a number of grid indices overlaid on the same space, with grid units of different sizes. In this case, each of the functions employs an additional argument which specifies the size of the grid unit to use. Thus, assuming that the grid size, s, is drawn from a set of grid sizes, S, Index (x,s) returns a unique integer value for the grid of size s that contains Point x. Hierarchical indexes are used to enhance the performance of database queries. A query that seeks results from a small grid size, s, does not seek matches at a large grid size, S.","Similar calculations can be performed for a finite area A. That is, a grid index can be used for which for a finite area in space, A, there is a function index (A) which retrieves a unique integer value for a grid that wholly contains Area A.",{"@attributes":{"id":"p-0044","num":"0044"},"figref":"FIG. 2","b":["202","204","206"]},"The following paragraphs more specifically discuss the system and method according to the invention.","2.2 Location Representation.","Parameters other than two-dimensional location (and time) are necessary to uniquely position a real-world object. These include altitude, up to three degrees of orientation specification, and possibly other parameters, depending on what the object is. In this discussion, examination is restricted to 2D location, as it is a manageable first step towards a broader understanding that incorporates the remaining parameters. However, it should be noted that the system and method according to the invention can process multi-dimensional location information.","Georeferencing, or how location is represented, is a fundamental issue in GIS. Location can be represented in many ways: established place names (\u201cSan Francisco\u201d), user-dependent place names (\u201cGrandma's house\u201d), street addresses, zip codes, latitude\/longitude coordinates, Euclidean coordinates with respect to some origin, and so forth.","The vast majority of Geographic Information System (GIS) projects use latitude and longitude coordinates\u2014henceforth lat\/long\u2014with coordinates defined with respect to the WGS84 standard to specify geographic point coordinates. This scheme is followed as a way of specifying points on the globe because it offers a concise, established way to represent point location.","For the purposes of browsing and interaction, one needs two additional types of location data structures: (1) for maps and queries, a notion of a physical region that corresponds to a map as displayed, and (2) for metadata-tagging, a data type that includes both lat\/long coordinates and a measure of precision or resolution.","Maps are most often displayed as rectangles on 2D displays. So, to represent a map, a structure that is called the area type is used, that is defined by a center lat\/long, and width and height in kilometers, each measured from the center point and along lines of latitude and longitude. This defines a unique region on the globe that is \u201crectangular,\u201d circumscribed by four great-circle arcs on the 3D globe. When projected onto 2D, an area appears roughly rectangular with sides that may deviate slightly from straight lines depending on the projection type, scale, and position on the globe.","For location tags of data items, one would like to represent lat\/long and some indication of precision, to distinguish between an item associated with the Empire State Building, and an item known to be associated only with the coarser label, New York City. The priority is fast retrieval from a database over a potentially massive number of such items. In an off-the-shelf relational database, queries can be optimized if database entries can be indexed by a single number. Thus, the system and method according to the invention employs a scheme that can reduce the three continuous variables of lat\/long and precision into a single, discretized index. Spatial data structures that fulfill this criterion are called discrete global grid systems (DGGSs), of which some examples are given in Table 1.",{"@attributes":{"id":"p-0053","num":"0053"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Candidate Spatial Data Structures for Gridding."}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"6"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{},"Coordinate-","area-","Areal","Shape"]},{"entry":[{},"Brief","Index","Index","Varia-","Distor-"]},{"entry":["DGGS","Description","Mapping","Mapping","tion","tion"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}},{"entry":["Lat\/long","Unprojected","Simple","Medium","High","High at"]},{"entry":["gridding","(long, lat) as"]},{"entry":[{},"cartesian x-y"]},{"entry":[{},"grid"]},{"entry":["O-QTM","Octahedral","Medium","Complex","Low","Low"]},{"entry":["[1]","facets gridded"]},{"entry":[{},"by equilateral"]},{"entry":[{},"triangles"]},{"entry":["Dymaxion","Icosahedral","Complex","Complex","Low","Low"]},{"entry":["[1]","facets gridded"]},{"entry":[{},"by equilateral"]},{"entry":[{},"triangles"]},{"entry":["ISEA3H","Equal-area","Complex","Complex","None","Low"]},{"entry":["[2]","gridding by"]},{"entry":[{},"hexagons and"]},{"entry":[{},"pentagons"]},{"entry":{"@attributes":{"namest":"1","nameend":"6","align":"center","rowsep":"1"}}}]}}]}}},"Referring now to , B and , one embodiment of the system and method according to the invention uses an equirectangular projection (also known as \u201cunprojected lat\/long\u201d), in which lat\/long values are taken as straight x-y pairs on a Euclidean coordinate system (see )) and are input into the system (, process action ). As shown in process action , the globe is gridded at twenty different resolutions, with \u201csquare\u201d units whose sides correspond to 20\u00d7(\u00bd)degrees, for 0<r<20. ) shows 20-, 10-, and 5-degree gridding of the region outlined in ). At the equator, these values correspond to scales ranging from \u02dc240 km down to \u02dc0.5 m. The gridding can occur are greater or fewer resolutions, if more or less precision is required.","Next, as shown in process action , each grid is indexed in raster-scan order. So, a given longitude\/latitude coordinate (long, lat), whose measurement error is expected to be normally distributed with standard deviation \u03c3 meters would be indexed as follows. First, as shown in , process action A, the longitudinal span in degrees that 3 or meters corresponds to: d=[180(3\u03bb) cos(lat)]\/k\u03c0 is determined, where k is the circumference of the earth in meters (4\u00d710m). Next the degree-scale of precision, r, is determined to be the discrete unit of resolution that is just larger than d: r=|\u2212logd\/20|, as shown in process action B. Finally, as shown in process action , the coordinate (long, lat) is mapped to the index,",{"@attributes":{"id":"p-0056","num":"0056"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mi":"l","mo":"=","mrow":{"mrow":[{"mrow":[{"mo":["(",")"],"mfrac":{"mn":"360","mi":"r"}},{"mo":["\u230a","\u230b"],"mfrac":{"mrow":{"mi":"lat","mo":"+","mn":"90"},"mi":"r"}}],"mo":"\u2062"},{"mrow":{"mo":["\u230a","\u230b"],"mfrac":{"mrow":{"mi":"long","mo":"+","mn":"180"},"mi":"r"}},"mo":"."}],"mo":"+"}}},{"mrow":{"mo":["(",")"],"mn":"1"}}]}}}},"br":{},"b":"310"},{"@attributes":{"id":"p-0057","num":"0057"},"maths":{"@attributes":{"id":"MATH-US-00004","num":"00004"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mtable":{"mtr":[{"mtd":{"mrow":{"mrow":{"mi":"lat","mo":"=","mrow":{"mfrac":[{"msup":{"mi":"lr","mn":"2"},"mn":"360"},{"mi":"r","mn":"2"}],"mo":["-","+"],"mn":"90"}},"mo":","}}},{"mtd":{"mrow":{"mrow":{"mi":"long","mo":"=","mrow":{"mrow":{"mi":["l","%"],"mo":["\u2062","\u2062"],"mfrac":{"msup":{"mi":"r","mn":"2"},"mn":"360"}},"mo":["-","+"],"mn":"180","mfrac":{"mi":"r","mn":"2"}}},"mo":","}}}]}},{"mrow":{"mo":["(",")"],"mn":"2"}}]}}}},"br":{},"figref":"FIG. 3(","i":"c"},"2.3 Grid Types.","Using a square grid with equirectangular projection is intuitive and keeps database queries efficient. But, it is inelegant in that the physical size and shape of grid units at the same indexing scale is distorted, particularly near the poles. Other gridding schemes can be used, however. In one embodiment of the invention a gridding scheme is employed that has minimal areal variation and shape distortion and uses a hierarchical series of equilateral polygons embedded within a Platonic solid. The major advantage of this gridding scheme is that at a fixed scale, units are of similar size and shape. Naturally, the equations for determining the grid index given a coordinate and a coordinate given a grid index must be adapted for these alternate schemes.","2.3 Location Database Schema Design","The representation described above conveniently packages 2D lat\/long coordinates together with precision, and it can be used to index items in a database with a single 8-byte index.","If queries are issued for all of the items in a particular grid, it would be necessary to make multiple queries to retrieve items with location tags that are more precise than the given grid. Querying for all items taken over a large area would be computationally expensive and time-consuming.","To avoid this, twenty fields (one per grid resolution) are used, each of which in one embodiment represents the location of an item (e.g., location entity) at a particular precision. For a given item at (long, lat) and precision r*, lis computed as in Eq. 1, for all r\u2267r*; and, for r<r*, a value of null is assigned. This scheme allows one to query for all of the items that are known to occur within a particular grid at precision r, with a single, exact-match query over the field representing location at precision r. Note that items whose location-tag precisions are coarser than that queried for will not be returned, even if the grids intersect (this inverts the standard usage of hierarchical grid indexes). That is, if one is searching for all items taken within a certain Manhattan block, a query for that grid unit will not return an item about which is known only that it was associated somewhere in New York City.","A flow diagram of the process actions of retrieving the desired data from a database of one database configured by the system and method of the invention is shown in . A user queries the database to return all location entities in a given cell y at a given scale S, as shown in process action . Column S of the database corresponding to the desired scale is then searched for values of cell y (process action ) and these values are returned (process action ). Note that all entities in the database table which occur within the grid represented by cell y will be included in the retrieval results, even those which occur at scales finer than cell y itself.","An exemplary database format for one embodiment of the invention is shown in . The database contains a location entity ID  for each entry in the database. Optionally, the latitude and longitude coordinates , as well as an indicator representing the grid scale , can also be recorded. The scale index at scale  provides a single integer that is the grid at a scale  that wholly contains the location representation or is set to null if it is not contained (as would be the case if the location representation were a finite area or region instead of a finite point). The scale index at scale  provides a single integer that represents a grid cell at a finer resolution than scale . And, so forth until scale N. If the finite area is not wholly contained within a given grid cell the scale index is set to a null value for this location representation.","Although this representation requires additional fields in the database, this is outweighed by the gain in performance (nearly tenfold for >1 million rows).","The foregoing description of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto.",{"@attributes":{"id":"p-0068","num":"0000"},"ul":{"@attributes":{"id":"ul0003","list-style":"none"},"li":["[1] Diomidis, D. S., Position-annotated photographs: a geotemporal web. 2(2):72-79, 2003.","[2] Sahr, K. and White, D., Discrete Global Grid Systems. In 13. & 269-78, 1998."]}}],"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS","REFERENCES"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF THE DRAWINGS","p":["The specific features, aspects, and advantages of the invention will become better understood with regard to the following description, appended claims, and accompanying drawings where:",{"@attributes":{"id":"p-0022","num":"0022"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0023","num":"0023"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0024","num":"0024"},"figref":"FIG. 3A"},{"@attributes":{"id":"p-0025","num":"0025"},"figref":["FIG. 3B","FIG. 3A"]},{"@attributes":{"id":"p-0026","num":"0026"},"figref":["FIG. 4","FIG. 4(","FIG. 4(","FIG. 4("],"i":["a","b","c"]},{"@attributes":{"id":"p-0027","num":"0027"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0028","num":"0028"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
