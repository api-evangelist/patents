---
title: Multiprotocol offload engine architecture
abstract: A device and method in which data transmissions to and from host processors in accordance with various protocols (e.g., TCP, UDP, FTP) are translated to and from NACK-Oriented Reliable Multicast (NORM) protocol data transmissions. A Multiprotocol Offload Engine (MOE) software architecture may perform the translations within a Network Interface Card (NIC) or Network Blade (NB) hardware platform. Moving the protocol translation processing from the host processors to the MOE hardware unit removes the protocol processing load from the host processor and significantly increases performance of data transmission among sources and sinks across a network layer.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08619776&OS=08619776&RS=08619776
owner: Lockheed Martin Corporation
number: 08619776
owner_city: Bethesda
owner_country: US
publication_date: 20101220
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION"],"p":["The present invention relates generally to communication of data over networks, and more particularly to offloading of data transmission protocol processing from a host processor.","Many existing Wide Area Network (WAN) architectures allow individual data packet streams to compete for bandwidth and time across long haul networks that are data restrictive and have bottlenecks or congestion. Standard long haul packet switching methods generally involve a source and one or more sinks attempting to transmit (single or multi-cast) and receive data packets across often un-reliable WANs. In this regard, a number of protocols exist for the transmission of data among various source devices and sink devices over data networks. Source devices and sink devices may take various forms including, for example, a computer server or collection of computer servers, a desktop computer, a laptop computer, a smart phone, a personal digital assistant, or the like. Source devices and sink devices may generally be referred to herein as sources and sinks Examples of protocols used in transmitting and receiving data over data networks include Transmission Control Protocol\/Internet Protocol (TCP\/IP), User Datagram Protocol (UDP), and File Transfer Protocol (FTP).",{"@attributes":{"id":"p-0004","num":"0003"},"figref":["FIG. 1","FIG. 1"],"b":["110","120","112","114","110","130","122","124","120","130","110","112","130","130","124","124","120","120","122","130","130","114","114","110","110","120"]},{"@attributes":{"id":"p-0005","num":"0004"},"figref":["FIG. 2","FIG. 2"],"b":["210","220","212","214","210","230","222","224","220","230","210","212","230","230","224","224","220","210","220"]},{"@attributes":{"id":"p-0006","num":"0005"},"figref":["FIG. 3","FIG. 3"],"b":["310","320","320","312","314","310","330","322","322","324","324","320","320","330","310","312","330","330","324","324","324","324","320","320","310","320","320"]},{"@attributes":{"id":"p-0007","num":"0006"},"figref":["FIG. 4","FIG. 4"],"b":["410","416","420","426","430","412","414","410","430","422","424","420","430","420","422","430","414","410","412","430","430","424","424","410","420"]},"Recently, another protocol referred to as Negative Acknowledgment Reliable Multicast (NORM) Transport Protocol has been developed. One example of the NORM protocol is specified in a document released for comment in November 2009 by the Naval Research Laboratory referred to as RFC 5740 and entitled \u201cNACK-Oriented Reliable Multicast (NORM) Transport Protocol\u201d, the entire disclosure of which is hereby incorporated by reference herein. As described therein, the NORM protocol provides end-to-end reliable transport of bulk data objects or stream over generic IP multicast routing and forwarding services.","While the NORM protocol can be implemented on the host processors of source and sink devices to handle NORM protocol data transmissions among the devices over a network layer, doing so requires the host processors of the source and sink devices to devote processing time to the NORM protocol data transmissions thereby reducing the amount of processing time available to execute applications on the source and sink devices. Accordingly, the present invention provides a system and method by which data transmission using various protocols (e.g. TCP, UDP, FTP) among source and sink devices over a network is facilitated and made more reliable by translating the data transmission into a NORM protocol data transmission, transmitting the data over the network, and translating the data transmission from the NORM protocol back to another protocol (e.g., TCP, UDP, FTP). Such translations and communications may be performed by hardware units which offload protocol processing operations from the host processors of the source and sink devices and translate the data transmission to and from the NORM protocol. The hardware unit may be referred to herein as a Multiprotocol Offload Engine (MOE) and the MOE may include an MOE software architecture that implements the NORM protocol.","The MOE software architecture may apply the Naval Research Laboratory NACK-Oriented Reliable Multicast (NORM) (RFC 5740) within a Network Interface Card (NIC) or Network Blade (NB) hardware platform. Moving the protocol translation processing from the host processor to the hardware unit removes the protocol processing load from the host processor and significantly increases performance. Offloading the protocol translation processing onto hardware based multi-core processors contained within a NIC or NB significantly increases the communications throughput and improves the reliability of host based unicast and multicast UDP, TCP and FTP.","The MOE software architecture creates a very high speed, flexible and configurable network device that multiplexes, de-multiplexes, unicasts and multicasts UDP, TCP or FTP protocol data streams or any combination of these protocol configurations across LAN and\/or WAN 10GE network infrastructures. The MOE may be architected to support full line rate of two 10GE interfaces or 40 Gbps bandwidth. The MOE software may be architected such that it can be applied to either network blades or workstation\/server base NICs. The flexibility of the software architecture provides a powerful and flexible MOE device capable of surpassing existing TCP offload engines and satisfying numerous communications needs. The MOE can simultaneously operate across Local Area Networks (LAN) and\/or Wide Area Networks (WAN) and support reliable unicast and\/or multicast 10 giga-bit Ethernet data transmission. In addition, the MOE can implement the NORM Packet Forward Error Correction (PFEC) that can correct for lost packets without requiring additional network latency of requesting a re-transmission.","In one aspect, a networking device comprises a hardware unit interposed between a host processor and a network layer. The hardware unit includes at least one processor. The networking device also includes computer program instructions executable by the processor of the hardware unit. The computer program instructions may, for example, be stored on at least one memory included in the hardware device. The computer program instructions include a TCP module, a UDP module, an FTP module and a NORM module. The TCP module implements a TCP specification to transmit and receive data to and from the host processor. The UDP module implements a UDP specification to transmit and receive data to and from the host processor. The FTP module implements a FTP specification to transmit and receive data to and from the host processor. The NORM module implements a NORM protocol specification to transmit and receive data to and from the network layer. The NORM module further translates at least one of TCP, UDP and FTP data transmissions into NORM data transmissions and also further translates NORM data transmissions into at least one of TCP, UDP and FTP data transmissions.","In another aspect, a method for use in transmitting data between a host processor and a network layer includes the step of interposing a hardware unit in a communication path between the host processor and the network layer. The hardware unit may include at least one processor. The method also includes the step of executing computer program instructions with the at least one processor of the hardware unit. In this regard, the method may also include storing at least a portion of the computer program instructions on at least one memory included in the hardware unit. Execution of the computer program instructions implements a TCP module to transmit and receive data to and from the host processor in accordance with a TCP specification, implements a UDP module to transmit and receive data to and from the host processor in accordance with a UDP specification, implements a FTP module to transmit and receive data to and from the host processor in accordance with a FTP specification, and implements a negative-acknowledgment oriented reliable multicast (NORM) stack module to transmit and receive data to and from the network layer in accordance with a NORM protocol specification. execution of the computer program instructions also translates at least one of TCP, UDP and FTP data transmissions into NORM data transmissions and translates NORM data transmissions into at least one of TCP, UDP and FTP data transmissions.","Various refinements exist of the features noted in relation to the various aspects of the present invention. Further features may also be incorporated in the various aspects of the present invention. These refinements and additional features may exist individually or in any combination, and various features of the various aspects may be combined. These and other aspects and advantages of the present invention will be apparent upon review of the following Detailed Description when taken in conjunction with the accompanying figures.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 5","b":["500","500","500","502","504","506","506","508","508","506","506","510","512","512","502","504","508","508","510","512","512","500","512","500"]},"The PCI slot connector  permits installation of the MOE hardware device  in a PCI slot of a source or sink device (e.g. a computer server). The processor  can thereby communicate with one or more processors in the source or sink device via a PCI system bus. Where the MOE hardware device  comprises a network blade or other COTS and non-COTS form, the MOE hardware device  may include an appropriate type of connector communicatively coupled with the processor  to enable connection to source and sink devices and communication with one or processors in the source or sink devices.","The MOE hardware device  includes computer program instructions executable by said processor . The computer program instructions may be referred to herein as the MOE integrated software application  or just the MOE application . The MOE application  may be stored on the memory  of the MOE hardware device  and loaded into the processor  as needed prior to and\/or during execution by the processor . When executed by the processor , the MOE application  enables the processor  to translate incoming data received from a network layer via the network cable connectors A-B by the network communications transceivers A-B from one protocol (e.g., NORM, TCP, UDP, FTP) into another protocol (e.g. (e.g., NORM, TCP, UDP, FTP). When executed by the processor , the MOE application  also enables the processor  to process outgoing data received from one or more source or sink host processors via PCI slot connector  for transmission by the transceivers A-B to a network layer via the network cable connectors A-B in accordance with a protocol (e.g., NORM, TCP, UDP, FTP).",{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 6","FIG. 5"],"b":["600","520","600","610","620","630","640","650","656","600","600","660","670","680","690","696"]},"The NORM stack module  comprises computer program instructions executable by a processor such as processor  of the MOE hardware device  of . When executed, the instructions of the NORM stack module  enable the processor  to implement a NORM protocol specification such as, for example, a NORM protocol specification as specified in RFC 5740, to transmit and receive data between a network layer and one or more host processors of a source or sink device. The instructions comprising the NORM stack module  remain consistent from platform-to-platform (e.g. PCI NIC, network blade, etc.).","The traffic shaper module , traffic meter module , traffic manager module  and configuration manager module  comprise computer program instructions executable by a processor such as processor  of the MOE hardware device  of . When executed, the instructions of the traffic shaper module  enable the processor  to control bandwidth settings applicable to data transmissions from the hardware device . When executed, the instructions of the traffic meter module  enable the processor  to buffer incoming transmissions from a network layer. When executed, the instructions of the traffic manager module  enable the processor  to manage handling of incoming and outgoing data transmissions. When executed, the instructions of the configuration manager module  enable the processor  to set configuration settings of the hardware device . When executed, the instructions of the FTP API module  enable the processor  to implement a FTP protocol to transfer data files over a network layer from a source-side data storage device to a sink-side data storage device. The instructions comprising the traffic shaper module , traffic meter module , traffic manager module , and configuration manager module  may vary from platform-to-platform (e.g. PCI NIC, network blade, etc.) to enable the NORM stack module  to remain consistent regardless of the platform on which it is executed.","The other COTS modules of the MOE software architecture  (the network management protocol module , internet protocol module , 10-gigabit Ethernet module , TCP stack module  and UDP stack module ) comprise computer program instructions executable by a processor such as processor  of the MOE hardware device  of . When executed, the instructions comprising the network management protocols module , internet protocol module  and a 10-gigabit Ethernet module  enable the processor  to handle necessary network management, receive and transmit data via internet protocol, and communicate via a 10-gigabit Ethernet connection to a network layer, respectively. When executed, the instructions comprising the TCP stack module  enable the processor to implement a TCP protocol to transmit and receive data between a network layer and one or more host processors of a source or sink device. When executed, the instructions comprising the UDP stack module  enable the processor to implement a UDP protocol to transmit and receive data between a network layer and one or more host processors of a source or sink device.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 7","FIG. 5","FIG. 6","FIG. 7","FIG. 6","FIG. 6","FIG. 6","FIG. 6","FIG. 6","FIG. 6"],"b":["500","700","700","700","700","702","704","706","700","696","690","600","702","700","712","714","716","700","696","690","600","712","700","722","724","726","700","696","610","600","722","700","732","734","736","700","696","610","600","732","700","742","744","746","700","690","610","600","742","700","752","754","756","700","690","610","600","752"]},{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIGS. 8","FIG. 8","FIG. 5","FIG. 6"],"b":["9","10","8","802","802","804","804","806","808","808","806","802","802","806","810","810","806","804","804","806","808","808","810","810","500","808","808","802","802","806","810","810","806","804","804","810","810","810","801","806","808","808","808","808","806","810","810"]},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 9","FIG. 9","FIG. 5","FIG. 6"],"b":["902","902","904","904","906","908","912","906","902","902","906","910","914","906","904","904","906","908","910","500","912","902","902","908","908","906","910","906","914","914","904","904","910","910","906","908","908","906","910"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 10","FIG. 10","FIG. 5","FIG. 6"],"b":["1002","1004","1004","1006","1008","1006","1002","1006","1010","1010","1006","1004","1004","1006","1008","1010","1010","500","1008","1002","1006","1010","1010","1006","1004","1004","1010","1010","1010","1010","1006","1008","1008","1006","1010","1010"]},{"@attributes":{"id":"p-0042","num":"0041"},"figref":["FIG. 11","FIG. 11","FIG. 5","FIG. 6"],"b":["1102","1102","1104","1104","1106","1108","1112","1106","1102","1102","1106","1110","1114","1106","1104","1104","1106","1108","1110","500","1112","1102","1102","1108","1108","1106","1110","1106","1114","1114","1104","1104","1110","1110","1106","1108","1108","1106","1110"]},{"@attributes":{"id":"p-0043","num":"0042"},"figref":["FIG. 12","FIG. 12","FIG. 5","FIG. 6"],"b":["1202","1204","1204","1206","1208","1206","1202","1206","1210","1210","1206","1204","1204","1206","1208","1210","1210","500","1208","1202","1206","1210","1210","1210","1210","1206","1204","1204","1210","1210","1210","1210","1206","1208","1208","1206","1210","1210"]},{"@attributes":{"id":"p-0044","num":"0043"},"figref":["FIG. 13","FIG. 13","FIG. 5","FIG. 6"],"b":["1302","1302","1304","1304","1306","1308","1312","1306","1302","1302","1306","1310","1314","1306","1304","1304","1306","1308","1310","500","1312","1302","1302","1316","1316","1308","1308","1306","1310","1306","1314","1314","1304","1304","1318","1318","1310","1310","1306","1308","1308","1306","1310"]},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 14","FIG. 14","FIG. 5","FIG. 6"],"b":["1402","1404","1404","1406","1408","1406","1402","1406","1410","1410","1406","1404","1404","1406","1408","1410","1410","500","1408","1402","1416","1406","1410","1410","1410","1410","1406","1404","1404","1418","1418","1410","1410","1410","1410","1406","1408","1408","1406","1410","1410"]},{"@attributes":{"id":"p-0046","num":"0045"},"figref":["FIG. 15","FIG. 5"],"b":["1500","500","1510"]},"In step , computer program instructions are stored on at least one memory included in the hardware unit. In this regard, step  may be performed before and\/or after step  in which the hardware unit is interposed in the communication pathway between the host processor and the network layer.","In step , the computer program instructions are executed with the at least one processor of the hardware unit to implement a TCP module to transmit and receive data to and from the host processor in accordance with a TCP specification, a UDP module to transmit and receive data to and from the host processor in accordance with a UDP specification, a FTP module to transmit and receive data to and from the host processor in accordance with a FTP specification, and a NORM stack module to transmit and receive data to and from the network layer in accordance with a NORM protocol specification.","In step , the computer program instructions are executed with the at least one processor of the hardware unit to translate at least one of TCP, UDP and FTP data transmissions into NORM data transmissions and to translate NORM data transmissions into at least one of TCP, UDP and FTP data transmissions.","In step , the computer program instructions are executed with the at least one processor of the hardware unit to implement one or more modules (e.g., a traffic shaper module, a traffic meter module, a traffic manager module, and\/or a configuration manager module) that adapt the TCP module, UDP module, FTP module and the NORM module to the specific hardware unit and source or sink. In step , the computer program instructions are executed with the at least one processor of the hardware unit to implement one or more COTS modules (e.g., a 10-giga-bit Ethernet module, an internet protocol (IP) module, and\/or a network management protocol module). In step , data translated into the NORM protocol specification is transmitted across the network layer in accordance with the NORM protocol specification.","While various embodiments of the present invention have been described in detail, further modifications and adaptations of the invention may occur to those skilled in the art. However, it is to be expressly understood that such modifications and adaptations are within the spirit and scope of the present invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of the present invention and further advantages thereof, reference is now made to the following Detailed Description, taken in conjunction with the drawings, in which:",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 15"}]},"DETDESC":[{},{}]}
