---
title: Program of mobile device, mobile device, and method for controlling mobile device
abstract: A computer-readable recording device may store a computer program including instructions for causing a computer of a mobile device to operate as: (1) an image specifying module that specifies a plurality of partial images corresponding to a plurality of candidate devices within a taken image that is displayed by a display unit provided in the mobile device, and (2) a communication controlling module that controls a communication unit configured to communicate using a wireless network such that the communication unit communicates with a candidate device corresponding to the partial image, in a case where an operation unit configured to receive an operation on the mobile device by a user receives a selection of the partial image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08810661&OS=08810661&RS=08810661
owner: Brother Kogyo Kabushiki Kaisha
number: 08810661
owner_city: Nagoya, Aichi
owner_country: JP
publication_date: 20110928
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","TECHNICAL FIELD","DESCRIPTION OF RELATED ART","BRIEF SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims priority to Japanese Patent Application No. 2010-218594, filed on Sep. 29, 2010, Japanese Patent Application No. 2011-079992, filed on Mar. 31, 2011, Japanese Patent Application No. 2011-093375, filed on Apr. 19, 2011, Japanese Patent Application No. 2011-206143, filed on Sep. 21, 2011, and Japanese Patent Application No. 2011-206144, filed on Sep. 21, 2011, the contents of which are hereby incorporated by reference into the present application.","The present application relates to a program of a mobile device, the mobile device, and a method for controlling the mobile device enabling a selection of an apparatus to engage in wireless communication by a simple procedure.","A technique is known which connects a mobile device (a notebook personal computer, a mobile phone, or the like) and an apparatus (a printer or the like) by wireless communication (wireless LAN, Bluetooth, or the like). Radio waves in the wireless communication have no directionality and are transmitted all around the mobile device. Therefore, a presence of a plurality of apparatuses around the mobile device means that there is a plurality of destination candidates that may be engaged in the wireless communication. A technique is known which, in this case, displays a list of identification information (addresses, names, or the like) of apparatuses capable of wireless communication on a display unit of the mobile device to prompt a user to select a destination apparatus.","Conventionally, a technique is disclosed in which a mobile device and an image forming apparatus are provided with GPS (Global Positioning System) receivers and, based on coordinate data generated by GPS, the mobile device transmits print data to a nearest image forming apparatus. However, with the conventional technique, the mobile device may inadvertently transmit the print data to an image forming apparatus located behind a user. Therefore, the conventional technique had not necessarily been convenient for the user. The present specification provides a technique capable of eliminating such inconveniences.","In one aspect of the teachings disclosed herein, a computer-readable recording device may be provided. The computer-readable recording device may store a computer program including instructions for causing a computer of a mobile device to operate as: an image specifying module specifies a plurality of partial images corresponding to a plurality of candidate devices within a taken image that is displayed by a display unit provided in the mobile device, wherein the taken image is displayed based on image data obtained by the mobile device by taking an object to be taken including the plurality of candidate devices with a camera unit provided in the mobile device, the image specifying module specifies the plurality of partial images based on first information, second information and third information, the first information indicates a physical location of the mobile device, the second information indicates a plurality of physical locations of the plurality of candidate devices, the third information indicates an image-taking direction of the camera unit, and the image-taking direction is a direction having a location of the mobile device as its reference; and a communication controlling module that controls a communication unit configured to communicate using a wireless network such that the communication unit perform a wireless communication with a particular candidate device corresponding to a particular partial image among the plurality of partial images, in a case where an operation unit configured to receive an operation on the mobile device by a user receives a specific operation for selecting the particular partial image.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["1","1","10","51","53","62","63","71","81","61","10","51","53","51","53","51","53","100","62","63","71","62","70","81","61","80"]},"The mobile phone  and the first access point  are configured to be capable of performing wireless communication (data communications using radio waves)  conforming to a wireless LAN infrastructure mode (a mode in which a plurality of wireless LAN terminal devices performs data communication via an access point). The first access point  and the first server  are communicably connected via the Internet . In other words, once the mobile phone  accesses the first access point  and enters a state where wireless communication  conforming to a wireless LAN infrastructure mode can be performed, the mobile phone  can perform data communication with the first MFP  and the first server  via the first access point . Similarly, the mobile phone  and the second access point  are configured to be capable of performing wireless communication . Once the mobile phone  enters a state where wireless communication  can be performed, the mobile phone  can perform data communication with the third MFP  and the second server  via the second access point . Examples of wireless LAN systems include a communication system specified by the IEEE802.11a\/b\/g\/n standard.","A configuration of the mobile phone  will be described. As shown in , the mobile phone  mainly comprises a CPU (Central Processing Unit) , a storage unit , a wireless transceiver unit , a wireless antenna unit , a button input unit , a panel , a mobile phone transceiver unit , a mobile phone antenna unit , a GPS unit , a compass unit , an acceleration sensor , and a camera unit . A speaker  and a microphone  are provided for making calls and inputting sound.",{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 10","FIG. 10"],"b":["10","3","4","18","10","10","3","18","4","10","3","4","27","18"]},"The CPU  executes processing according to programs stored in the storage unit . Hereinbelow, the CPU  executing programs, such as a communication program  or an operating system, may sometimes be simply referred to by a program name. For example, the description \u201cthe communication program \u201d may sometimes mean \u201cthe CPU  executing the communication program \u201d. The storage unit  is configured by combining a RAM (Random Access Memory), a ROM (Read Only Memory), a flash memory, an HDD (Hard Disk Drive), a buffer provided in the CPU , and the like. The wireless transceiver unit  performs wireless communications  and  conforming to a wireless LAN infrastructure mode via the wireless antenna unit . Digital signals constituting various data are transmitted and received by the wireless transceiver unit . The GPS unit  is a member which receives radio waves from a GPS satellite and which calculates location information indicating a physical location of the mobile phone . The term \u201cphysical location\u201d herein may also be termed \u201cabsolute location\u201d. Location information includes latitude, longitude, and height components. The mobile phone transceiver unit  performs wireless communication  conforming to a mobile phone communication system with the base station  via the mobile phone antenna unit . The storage unit  stores a program . The program  includes a basic program (not shown), a communication program , and the like. The basic program includes a program for causing the mobile phone transceiver unit  to execute communication, a program for causing the wireless transceiver unit  to execute the wireless communication , and the like. The basic program is also a program which provides an API (Application Programming Interface) that enables respective programs to acquire information calculated by the GPS unit . The communication program  is a program which causes the CPU  to execute an operational flow of the communication system , which will be described later.","The storage unit  comprises a set value storage area , and a table storage area The set value storage area , stores a predetermined period, a predetermined acceleration value, an allowable angular range, a predetermined distance, a predetermined radius, and the like which will be described later. The table storage area , stores a storage table TB.  shows an example of the storage table TB. The storage table TB assigns a memory number  to each of the first to third MFPs  to , and associatively stores MFP identification information , MFP location information , a relative direction , a relative distance , and status information . The MFP identification information  is information that is unique to each of the first to third MFPs  to . The MFP identification information  is, for example, an IP address  of a corresponding MFP. An MFP name  is a name assigned to each of the first to third MFPs  to  by a user or administrator of the MFP or by a manufacturer prior to shipment. The MFP location information  is information indicating a physical location of the first to third MFPs  to  and includes latitude, longitude, and height components. The mobile phone  receives information indicating a physical location from an MFP, and stores the information in the storage table TB without modification as the MFP location information  of the MFP. The relative direction  is information indicating directions in which the first to third MFPs  to  are located in relation to a location of the mobile phone  (directions with the mobile phone  as the reference). The relative direction  includes a horizontal component (a direction in which an MFP is located in relation to the mobile phone  when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a horizontal plane) and a vertical component (a direction in which the MFP is located in relation to the mobile phone  when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a vertical plane that is perpendicular to another vertical plane including the mobile phone  and the MFP). The relative distance  is a respective distance between the mobile phone  and the first to third MFPs  to . The relative distance  includes a horizontal component (a distance between the mobile phone  and an MFP when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on a horizontal plane) and a vertical component (a distance between the mobile phone  and the MFP when the mobile phone  and the location of the MFP relative to the mobile phone  are projected on the vertical plane that is perpendicular to the other vertical plane including the mobile phone  and the MFP).","The status information  is information indicating MFP device specifications, MFP device statuses, and the like. The status information  includes sheet size information , print type information , and idling print job information  on a number of idling print jobs. The sheet size information  is information indicating the size of sheets used in the printer . The print type information  is information indicating whether the printer  is set to color printing or to monochrome printing. The idling print job information  is information indicating the number of print jobs spooled to the printer .","A table memory area , stores a display table TB.  shows an example of the display table TB. The display table TB is a table that stores the correspondence between balloon information and the MFPs. The display table TB stores an image location , MFP information , and balloon information . The image information  is information indicating the location in which a partial image is displayed within the display area of the panel  (for example: the right side end of the panel , or the like). Partial images are the images of the first MFP  through the third MFP  from among the images of the various objects included in the image taken by the camera unit  displayed in the panel . The partial images may be images that can be selected by the user. The MFP information  is information indicating the correspondence between the image information  and the MFP name . The balloon information  is information indicating the correspondence between the MFP name  and the balloon information B through B.","The button input unit , the GPS unit , the compass unit , the acceleration sensor , and the camera unit  are operation units that receive an operation by the user of the mobile phone . The button input unit  is integrally configured with the panel  as a touch panel. The panel  displays various types of function information of the mobile phone . The compass unit  includes a geomagnetic sensor that acquires an orientation of the mobile phone . The acceleration sensor  is a sensor that measures an acceleration of the mobile phone . The camera unit  is a portion that takes an image of a predetermined range and acquires image data with a CCD or the like. The basic program provides an API (Application Programming Interface) that enables the respective programs to acquire information indicating an orientation acquired by the compass unit , an acceleration measured by the acceleration sensor , image data acquired by the camera unit , and the like.","A configuration of the first MFP  will be described. The first MFP  mainly comprises a CPU , a storage unit , a transceiver unit , a wireless antenna unit , a button input unit , a panel , a modem , a telephone line connection unit , a printer , a scanner , a GPS unit , and an indicator light . These components are configured to be mutually communicable via an input\/output port .","The CPU  controls respective functions according to programs stored in the storage unit , various signals transmitted and received via the transceiver unit , and the like. The storage unit  may be configured by combining a RAM (Random Access Memory), a ROM (Read Only Memory), a flash memory, an HDD (Hard Disk Drive), or the like.","The transceiver unit  communicates with the first access point  by transmitting and receiving digital signals constituting various data. Communication between the transceiver unit  and the first access point  is not limited to the wireless communication, and alternatively, a cable communication may be used instead.","The button input unit  is one or more keys for executing various functions of the first MFP . The button input unit  may be integrally configured with the panel  as a touch panel. The panel  displays various function information of the first MFP . The printer  is a portion that executes printing. The scanner  is a portion that executes scanning The GPS unit  is a portion that acquires location information of the first MFP . The indicator light  comprises an LED (Light Emitting Diode) or the like and is a portion that notifies various statuses of the first MFP  to the user. The modem  modulates document data to be transmitted using the facsimile function into a signal transmittable to the telephone network  and transmits the signal via the telephone line connection unit , and receives an inputted signal from the telephone network  via the telephone line connection unit  and demodulates the signal into document data. Since configurations of the second MFP  and the third MFP  are the same as the first MFP , a detailed description will be hereby omitted.","A configuration of a first server  will be described. The first server  mainly comprises a CPU , a storage unit , and a communication unit . The first server  is a device that provides its own functions or data to a client device in a network. The CPU  controls various functions. The storage unit  stores various data. The communication unit  communicates various types of information with the mobile phone .","The following is an explanation of the configuration of a second server . The second server  mainly includes a CPU , a memory unit , and a communication unit . The second server  is connected to the first access point  and the second access point  via the Internet . The second server  can be connected to the mobile phone  via the base station  and the wireless communication . The rest of the configuration of the second server  is the same as the configuration of the first server  as described above, so the explanation is hereby omitted.","Operations of the communication system  according to a first embodiment will be described with reference to . A flow performed by the mobile phone  will be described with reference to . The flows shown in  are executed in response to activation of the communication program  of the mobile phone . In the first embodiment, when the user points the camera unit  at the MFP that the user wishes to set as the data communication object, the mobile phone  carries out data communication with the MFP that was shot by the camera unit  as the object of data communication. As an example, when the first MFP  through the third MFP  are disposed in the arrangement indicated in , the operation for pointing the camera unit  in the direction of a direction information V is explained below.","In S in , when the communication program  is started by the user operating the button input unit  of the mobile phone , operation of the camera unit  starts, and an image is shot in real time by the camera unit . Then the CPU  displays the taken image on the panel . In the example of , the image data within the range of an image angle A of the camera unit  is captured by the camera unit . The image angle A is the angle that represents the range of view reflecting the image data taken by the camera unit .",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 8","FIG. 5","FIG. 8","FIG. 8"],"b":["27","18","51","53","18"]},"In S, the CPU  uses the API to acquire information indicating the orientation of the mobile phone  from the compass unit . Using the acquired information, the CPU  calculates a direction along a central axis in a thickness direction (an axis which extends in a thickness direction of the mobile phone  from the camera unit ; refer to ) of the mobile phone  in relation to a location of the camera unit  being the reference. In other words, information is calculated which indicates what direction is specified by an operation received from the user by the mobile phone  in relation to the location of the camera unit  taking an image. The calculated information is stored in the storage unit  as the direction information. In other words, the direction information is information that indicates which direction the camera unit  is pointed to. In the example of , the direction information V is acquired. The direction information includes a horizontal component (a direction in which the tip of the mobile phone  on the speaker  side is located in relation to a reference location of the compass unit  when relative locations of the reference location of the compass unit  and a location of the speaker  side tip of the mobile phone  are projected on a horizontal plane).","Subsequently, in S, the CPU  searches for access points. Specifically, a wireless LAN probe request is broadcasted using the wireless transceiver unit . An SSID (Service Set Identifier) included in a probe response returned by an access point (e.g., the first access point ) in a radio wave range of the wireless transceiver unit  is then received and temporarily stored in a work area (a RAM of the storage unit  or a buffer) of the CPU . In S, the CPU  accesses the first access point  or the second access point  using the acquired SSID and enters a state where wireless communications  or  conforming to the wireless LAN infrastructure mode can be performed.","In S, the CPU  uses the wireless transceiver unit  to broadcast first data (the first data includes a broadcast address as information indicating a destination of the first data in order to indicate that the first data is being broadcasted) by wireless communication  conforming to the wireless LAN infrastructure mode. As a result, wireless clients accessing the first access point  (in other words, the wireless clients including the first to third MFPs  to ) receive the first data via the access point. The first data includes identification information (IP address) of the mobile phone  in order to indicate a source of the first data. The first data also includes inquiry information (which is also information indicating that the data is first data; as a specific example, an SNMP (Simple Network Management Protocol) Request command) for inquiring whether the wireless clients can adequately process the data that the mobile phone  is going to send according to the communication program  and can send back the processed data.","In S, the CPU  receives the second data replied from the MFPs connected to the access point. Specifically, the CPU  receives data which includes the identification information of the mobile phone  in order to indicate the destination, the identification information (IP address) of a relevant MFP in order to indicate the source, reply information for notifying the mobile phone that the data is a reply to the first data, and the status information . The reply information is also information indicating that the data is second data; as a specific example, an SNMP Reply command. In S, the CPU  extracts MFP identification information from the second data. Since the second data also includes information indicating a physical location of an MFP, the CPU  also extracts information indicating the physical location of the MFP from the second data. The extracted identification information and information indicating the physical location are temporarily stored in the storage table TB as an IP address  and MFP location information  of the relevant MFP.","In S, the CPU  determines whether or not it is connected to all of the access points from which the probe response has been received. If there remain access points that have not connected yet (S: NO), the CPU  advances to S, and after connecting to the unconnected new access points, returns to S. On the other hand, if all access points are connected (S: YES), the CPU  advances to S.","In S, the CPU  calculates a relative direction and a relative distance. The calculation of the relative direction and the relative distance is performed based on the location information of the mobile phone  and the MFP location information  stored in the storage unit . The calculated relative direction and relative distance are temporarily stored in the storage table TB as the relative direction  and the relative distance  of the MFP.","In the example of , a relative direction  of the first MFP  is \u201cD\u201d, the relative direction  of the second MFP  is \u201cD\u201d, and the relative direction  of the third MFP  is \u201cD\u201d, each of which are acquired, and stored in the storage table TB (). A relative distance  of the first MFP  is \u201cR\u201d, the relative distance  of the second MFP  is \u201cR\u201d, and the relative distance  of the third MFP  is \u201cR\u201d, each of which is calculated and stored in the storage table TB ().","In S, the CPU  determines whether or not the relative direction  and the relative distance  have been calculated for all MFPs which have returned the second data. If there remain MFPs that have not calculated the relative direction and the relative distance yet (S: NO), the CPU  advances to S. In S, the CPU  selects an uncalculated MFP and then returns to S. Accordingly, the relative direction  and the relative distance  can be acquired for all MFPs which have returned the second data. Subsequently, the CPU  advances to S ().","On the other hand, in S, if the calculation has been implemented for all MFPs (S: YES), the CPU  advances to S. In S, the CPU  acquires the location information of the mobile phone  calculated by the GPS unit . The acquired location information of the mobile phone  is temporarily stored in the storage unit .","In S, the CPU  selects an object MFP based on the direction information, the location information of the mobile phone , and the location information of the MFPs respectively stored in the storage unit . The object MFP is an MFP to become an object of data communication (in other words, the MFP that is to execute the data communication with the mobile phone ).","Using , the flow for selecting the object MFP is explained. In S, the CPU  specifies the image locations of the partial images of the MFPs on the taken image by the camera unit . In other words, the CPU  specifies at what location the MFP is displayed on the taken image displayed on the panel . The image locations of the partial images may be represented as, for example, coordinate data on the taken image.","The following is an explanation of a specific method of specifying the image locations of the partial images. As an example, a method of specifying the image locations of the partial images based on the angular difference between the relative directions and the direction information is explained using . In the example in , the direction information V and the relative direction  of the second MFP =\u201cD\u201d coincide, there is no angular difference. Therefore, as shown in , the image location of the partial image of the second MFP  is specified as the image location =\u201cP\u201d (center of the panel ). In the example in , there is an angular difference A between the direction information V and the relative direction  of the first MFP =\u201cD\u201d. Therefore, as shown in , the image location of the partial image of the first MFP  is specified as the image location =\u201cP\u201d (on the left side of the panel ). In the example in , the direction information V and the relative direction  of the third MFP =\u201cD\u201d have an angular difference A. The angular difference A is larger than A. Therefore, as shown in , the image location of the partial image of the third MFP  is specified as the image location =\u201cP\u201d (right side and end portion of the panel ).","In S, the CPU  stores the image locations of the specified partial images in the display table TB corresponding to the MFPs. In the case of the example of arrangement of the first MFP  through third MFP  shown in , the image locations  of the partial images are stored in the display table TB, as shown in the example in .","In S, the CPU  generates a composite image with the balloon information incorporated at the locations corresponding to the image locations of the partial images. Then the generated composite image is displayed in the panel . The balloon information is a type of display format used in Graphical User Interfaces (GUIs). The balloon information displays various types of information regarding the MFPs.",{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 9","FIG. 9","FIG. 9"],"b":["18","261","1","51","1","51","1","51","1","231","232","252","251","253","1","1","51"]},"Likewise, at the location corresponding to the image location =\u201cP\u201d of the partial image of the second MFP  (on the left side of P, in a location that does not overlap with the partial image of the second MFP ), the balloon information B is displayed. At the location corresponding to the image location =\u201cP\u201d of the partial image of the third MFP  (on the left side of P, in a location that does not overlap with the partial image of the third MFP ), the balloon information B is displayed.","In S, the CPU  displays the balloon information larger the shorter the relative distance . In the example in , the relative distance =\u201cR\u201d is the furthest, and the relative distance becomes closer in the order \u201cR\u201d, \u201cR\u201d. Therefore, as shown in the example in , the balloon information is displayed progressively larger in the order B, B, B.","In S, the CPU  displays the balloon information for MFPs that cannot carry out wireless communication in a different form from the balloon information for MFPs that can carry out wireless communication. An example of MFP that cannot carry out wireless communication can be an MFP that is connected to a network that is different from the network currently connected to. For example, in the communication system  shown in , in a case where the mobile phone  is connected to the first access point  using the wireless communication , wireless communication with the first MFP  and the second MFP  is possible. However, wireless communication with the third MFP  which belongs to the second access point  is not possible. In this case, as shown in , the print button PB included in the balloon information B of the third MFP  which cannot carry out wireless communication is displayed grayed out (the button is displayed in gray color, indicating the state that the button cannot be selected). As a result MFPs with which data communication is not possible can be visually confirmed on the panel , so the convenience of the user is increased.","In S, the CPU  determines whether or not selection of the print button has been carried out. Selection of the print button may be carried out by directly touching the print button in cases where the panel  is a touch panel. Or, selection of the print button may be carried out by operating the button input unit . If selection of the print button has not been carried out (S: NO) the CPU  advances to S, and if it has been carried out (S: YES) the CPU  advances to S.","In S, the CPU  specifies the balloon information associated with the selected print button. Then, using the display table TB (), the CPU  determines the MFP name  corresponding to the specified balloon information . As a result, the MFP associated with the print button selected by the user is determined to be the object MFP.","In S, the CPU  determines whether or not a canceling action has been carried out within a predetermined period of time. The canceling action is an action for canceling specification of the MFP. The canceling action may be carried out by various actions. For example, within a predetermined period of time after carrying out selection of the print button, there may be an action that moves the object MFP outside the range of the image angle A, by changing the orientation of the camera unit . As a result, it is possible to cancel the printing by moving the MFP, that was to execute the printing, out of the frame of the panel . The canceling action may be carried out by an action of pressing a cancel button on the button input unit , or an action of touching an arbitrary location on the panel . When the canceling action has been carried out (S: YES), the CPU  returns to S. On the other hand, when the canceling action has not been carried out (S: NO), the flow is terminated, and the CPU  advances to S ().","In S, the CPU  executes data communication with the object MFP. Specifically, the CPU  executes data communication in which the CPU  reads out MFP identification information  (IP address) of the object MFP from the storage table TB, causes the wireless transceiver unit  to transmit data including the IP address of the object MFP to be indicated as the destination as transmission data to the object MFP, and causes the wireless transceiver unit  to receive data including the IP address of the object MFP (in other words, data transmitted by the object MFP) as reception data. The IP address of the object MFP is information for identifying a sender of the data. Various types of data are conceivable as the data handled in the data communication. For example, processing data may be transmitted to the object MFP by the wireless transceiver unit  to have the object MFP execute predetermined processing thereon. Specifically, print data may be transmitted to the object MFP by the wireless transceiver unit  to have the object MFP perform printing of the print data using the printer . A scanning instruction may be transmitted to the object MFP by the wireless transceiver unit  to have the wireless transceiver unit  receive scan data generated by the object MFP using the scanner  from the object MFP. An IP phone instruction may be transmitted to the object MFP by the wireless transceiver unit  to have the object MFP execute a call or a facsimile communication to a phone device or a facsimile device existing on the other end of the telephone line via the modem  of the object MFP and the telephone line connection unit .","Flows performed at the first to third MFPs  to  will be described with reference to . In S, the CPU  determines whether or not first data broadcasted from the mobile phone  has been received (specifically, the CPU  determines whether or not data has been received which includes a broadcast address as information indicating a destination and which includes information indicating that the data is first data). When not received (S: NO), the CPU  advances to S, and when received (S: YES), the CPU  advances to S. In S, the CPU  returns the second data to the mobile phone .","In S, the CPU  determines whether or not processing data such as print data has been received from the mobile phone . When not received (S: NO), the CPU  returns to S, and when received (S: YES), the CPU  advances to S. In S, the CPU  executes processing on the processing data. For example, when the processing data is print data, processing is executed for printing the print data using the printer . The CPU  then returns to S.","As a specific example of operations of the communication system  according to the first embodiment, a case will be described in which first to third MFPs  to  are arranged in a form shown in . A case will be described in which the first MFP  is selected as an object MFP. A case will be described in which print data is transmitted to the object MFP.","The flow shown in  is started in response to an activation of the communication program  by an operation of the button input unit  of the mobile phone  by the user. When the user points the camera unit  at the first MFP  through third MFP , as shown in , partial images of the first MFP  through third MFP  are displayed in the panel  (S). Subsequently, the mobile phone  acquires direction information (S). Because a case has been described in which the user points the camera unit  at the first MFP , the direction information V is acquired as shown in . The mobile phone  then accesses the first access point  and enters a state where wireless communication  conforming to the wireless LAN infrastructure mode can be performed (S). Next, the mobile phone  broadcasts the first data to the first to third MFPs  to  (S). Subsequently, the first to third MFPs  to  receive the first data (S: YES) and return second data to the mobile phone  (S). The mobile phone  receives the second data from the first to third MFPs  to  (S: YES) and stores the second data in the storage table TB of the storage unit  (S).","Next the mobile phone  carries out infrastructure mode wireless communication  with the second access point  (S). The mobile phone  broadcasts first data to the third MFP  (S), and stores second data received from the third MFP  in the storage table TB (S, S). Therefore, as shown in , MFP identification information , MFP location information , and status information  are stored in the storage table TB.","The mobile phone  calculates the relative direction and the relative distance for each of the first to third MFPs  to  (S). As a result, as shown in , the relative direction D of the first MFP , the relative direction D of the second MFP , and the relative direction D of the third MFP  are calculated. A relative distance R of the first MFP , a relative distance R of the second MFP , and a relative distance R of the third MFP  are respectively calculated. Subsequently, as shown in , the calculated relative directions and relative distances are stored in the storage table TB as the relative direction  and the relative distance .","Once the relative direction and the relative distance have been calculated for all of the first to third MFPs  to  (S: YES), the mobile phone  acquires location information of the mobile phone calculated by the GPS unit  (S).","The mobile phone  specifies the image locations of the partial images of the first MFP  through third MFP  on the taken image taken by the camera unit  (S). Then, as shown in , the mobile phone  displays the composite image in which the balloon information is incorporated onto the taken image on the panel  (S). The print button PB is selected by the user touching the print button PB (S: YES). Using the display table TB (), the mobile phone  specifies the first MFP  that is associated with the print button PB as the object MFP (S). The mobile phone  executes data communication with the first MFP , and transmits the print data (S). The first MFP  receives the print data (S: YES), and using the printer  prints the print data (S). Then the flow terminates.","The following is an explanation of the effect of the communication system  according to the explanatory example of the first embodiment, as explained above. In the communication system , by inputting the partial image of the MFP that the user wishes to select into the mobile phone  using the camera unit , the MFP can be selected as the destination. As a result, the user no longer will need to know or check in advance the identification information for the MFP that the user wishes to communicate with, and also, a manual input of the identification information to the mobile phone  by the user will no longer be necessary. Therefore the object MFP can be selected by a simple procedure.","Also in the communication system , when the balloon information is displayed, the balloon information is displayed larger the shorter the relative distance . As a result, by using not only the relative direction , but by using it in combination with the parameter relative distance , the image locations of the partial images of the MFPs on the panel  can be more easily determined.","With the communication system , when deciding on the object MFP, in a case where a plurality of MFPs exists in the direction to which the user points the camera unit , the balloon information indicating the MFPs are displayed on the panel  to have the user select balloon information. In other words, even when a single object MFP cannot be decided by using only the relative direction , the single appropriate object MFP can be decided.","A modified example of the first embodiment will now be described. The modified example of the first embodiment uses a scheme that uses an ad-hoc mode wireless communication. In the first embodiment, the mobile phone  communicates with the first MFP  and the second MFP  via the first access point  by wireless communication  conforming to the wireless LAN infrastructure mode. The mobile phone  communicates with the third MFP  via the second access point  by wireless communication . Alternatively, a configuration may be adopted in which the mobile phone  directly communicates with the first to third MFPs  to  by wireless communication  conforming to Bluetooth (registered trademark). In this case, the first to third MFPs  to  are in states capable of responding to the search while conforming to Bluetooth.","The operational flow of the modified example is the same as the operational flow of the communication system according to the first embodiment (). However, in order to adapt the flow of  to the operation of the communication system according to the modified example, S may be replaced with \u201cSearch for an MFP that can communicate\u201d. S may be replaced with \u201cConnect to MFP\u201d. S may be replaced with \u201cConnected to all MFPs that received probe response?\u201d S may be replaced with \u201cConnect to new MFP\u201d.","The following is an explanation of a specific example of the operation of the communication system according to the modified example. As an example, a case in which the first MFP  through third MFP  are disposed as shown in  and the first MFP  is selected as the object MFP is explained.","The flow of  starts when the communication program  starts up. As shown in , partial images of the first MFP  through third MFP  are displayed in the panel , by the user operating the camera unit  (S). The mobile phone  searches for MFPs that can connect in ad-hoc mode, and detects the first MFP  through third MFP  (S). The mobile phone  first connects to the first MFP  in ad-hoc mode wireless communication , (S). Then, the mobile phone  transmits the first data to the first MFP  (S), and the first MFP  returns the second data (S). The mobile phone  receives the second data, and stores it in the storage table TB (S).","Not all the MFP are connected (S: NO), so the mobile phone  cuts the wireless communication with the first MFP , and connects with the second MFP  by wireless communication (S). Then, the mobile phone  transmits the first data to the second MFP  (S), and the second MFP  returns the second data (S). The mobile phone  receives the second data, and stores it in the storage table TB (S).","The mobile phone  still has not connected to the third MFP  (S: NO), so the mobile phone  cuts the wireless communication with the second MFP , and connects to the third MFP  by wireless communication (S). Then, the mobile phone  transmits the first data to the third MFP  (S), and the third MFP  returns the second data (S). The mobile phone  receives the second data, and stores it in the storage table TB (S). As a result, the second data can be received from the first MFP  through third MFP .","The mobile phone  calculates the relative direction  and the relative distance  for each of the first MFP  through third MFP  (S). The mobile phone  acquires the direction information using the compass unit  (S). Also the mobile phone  acquires location information of the mobile phone  using the GPS init  (S). The mobile phone  determines the image locations of the partial images of the first MFP  through third MFP  on the taken image taken by the camera unit  (S).","In S, the composite image that incorporates the balloon information onto the taken image is displayed on the panel  (S). At the time of S, the mobile phone  is connected to the third MFP  using wireless communication. Therefore, the status is that wireless communication with the third MFP  is possible, but wireless communication with the first MFP  and second MFP  is not possible. Therefore, the print buttons PB and PB are displayed on the panel  in the grayed out state.","As explained above, in the communication system according to the modified example of the first embodiment, it is possible to form an ad-hoc network. In the ad-hoc network, the first MFP  through third MFP  can be connected to the mobile phone , without going through the first access point  and the second access point . Therefore, it is possible to construct a network in places that do not have infrastructure such as the first access point  and the second access point .","A second embodiment will now be described. In the second embodiment, a first server  is used in the communication system  illustrated in . Processing that is performed by the mobile phone  in the first embodiment is divided in the second embodiment between a server and a mobile phone . A storage unit  of the first server  stores a storage table TB. Operations of the communication system  according to the second embodiment will now be described with reference to .  show flows performed by the mobile phone .  show flows performed by the first server .","The following is an explanation of the flow carried out by the mobile phone . The flow in  starts in response to the user starting up the communication program  in the mobile phone . In S, the CPU  of the mobile phone  displays the taken image on the panel . In S, the CPU  acquires direction information, and causes the wireless transceiver unit  to carry out a transmission process to the first server . In S, the CPU  searches for access points. In S, the CPU  connects to the first access point  or the second access point  in infrastructure mode wireless communication. In S, the CPU  broadcasts the first data using the wireless transceiver unit . In S, the CPU  causes the wireless transceiver unit  to carry out a process for transmitting the second data received from the MFP to the first server , via the first access point  and the Internet .","In S, the CPU  determines whether or not it is connected to all access points that have received a probe response. If all access points are not connected (S: NO), the CPU  advances to S, and after connecting to the unconnected new access points, returns to S. On the other hand, if all access points are connected (S: YES), the CPU  advances to S.","In S, the CPU  causes the GPS unit  to acquire the location information of the mobile phone , and causes the wireless transceiver unit  to transmit the location information to the first server . In S, the CPU  determines the object MFP. The content of the flow to determine the object MFP in S is the same as the content of steps S through S in the flow in , so detailed explanation is omitted here. In S, the CPU  carries out data transmission with the object MFP. Then, the flow carried out by the mobile phone  terminates.","The following is an explanation of the flow carried out by the first server , using . In S, the CPU  receives the direction information from the mobile phone . In S, the CPU  of the first server  receives the second data from the mobile phone . In S, the CPU  extracts the MFP location information , the MFP identification information , and status information from the second data. The extracted information is stored in the storage table TB of the storage unit . In S, the CPU  calculates the relative direction  and the relative distance .","In S, the CPU  determines whether or not the relative direction  and the relative distance  have been calculated for all MFPs. If they have not been calculated for all MFPs (S, NO), the CPU  advances to S, and after selecting the uncalculated MFPs, returns to S. On the other hand, in S, if they have been calculated for all MFPs (S, YES), the CPU  advances to S. In S, the CPU  receives the mobile phone  location information from the mobile phone . In S, the CPU  specifies the image locations of the partial images of the MFPs on the taken image taken by the camera unit . In S, the CPU  causes the communication unit  to transmit the specified image locations to the mobile phone . Then, the flow carried out by the first server  terminates. The content of the detailed operations in each step in  is the same as the content explained for the first embodiment, so the detailed explanation is omitted here.","As explained above, in the communication system  according to the explanatory example of the second embodiment, a part of the process to acquire the relative direction and the relative distance, a part of the process to specify the image locations of the partial images, a part of the process to determine the object MFP, and so on, can be carried out by the first server . Therefore, it is possible to reduce the processing load on the mobile phone  or the first MFP  through third MFP .","The following is an explanation of a third embodiment. The third embodiment is a format that uses the second server  in the example of communication system  shown in . The processing carried out by the mobile phone  in the first embodiment is divided in the third embodiment between the second server  and the mobile phone . The following is an explanation of the operation of the communication system  in the third embodiment, using the flow charts of .  is the flow carried out by the mobile phone .  is the flow carried out by the second server .","The following is an explanation of the flow carried out by the mobile phone . The flow of  starts in response to the user starting up the communication program  on the mobile phone . In S, the CPU  of the mobile phone  displays the taken image on the panel . In S, the CPU  acquires the direction information. In S, the CPU  acquires the location information of the mobile phone  using the GPS unit . Then, the CPU  causes the wireless transceiver unit  to transmit the location information of the mobile phone  to the second server , via the mobile phone transceiver unit , the wireless communication , and the base station .","In S, the CPU  receives, from the second server , MFP identification information  and MFP location information  for the MFPs located around the mobile phone . The detailed operation contents of each of the steps of S, S, and S are the same as the contents of each of the steps of S, S, and S () as explained for the first embodiment, so detailed explanation is omitted here.","The following is an explanation of the flow carried out by the second server , using . In S, the CPU  of the second server  receives the MFP identification information  and the MFP location information  from the first MFP  through third MFP . In S, the CPU  stores the MFP identification information  and the MFP location information  in the storage table TB of the storage unit . As a result, the MFP identification information  and the MFP location information  for each MFP is uploaded to the second server . The operation of uploading to the second server  may be carried out by the user, or it may be periodically carried out automatically.","In S, the CPU  determines whether or not the location information of the mobile phone  has been received from the mobile phone . If it has not been received (S, NO), the CPU  returns to S, and waits, and if it has been received (S, YES), the CPU  advances to S. In S, the CPU  stores the received location information for the mobile phone  in the storage unit .","In S, the CPU  searches for MFPs within a predetermined radius with the mobile phone  as the center, based on the location information of the mobile phone  and the MFP location information .","In S, the CPU  reads from the storage unit  the MFP identification information  and the MFP location information  for the MFPs found. Then, the CPU  causes the communication unit  to transmit to the mobile phone  the MFP identification information  and the MFP location information  that was read.","As explained above, in the communication system  according to the explanatory example of the third embodiment, the process of acquiring the MFP identification information  and the MFP location information  for the MFPs located around the mobile phone  can be carried out by the second server . Therefore, it is possible to reduce the processing load on the mobile phone  and the first MFP  through third MFP .","The following is an explanation of a fourth embodiment.  shows a block diagram of a communication system , exemplified as the fourth embodiment of the present application. The storage unit  stores a program . The program  includes a printing application , and the like. The printing application , is a program which causes the CPU  to execute an operational flow of the communication system , which will be described later.","The storage unit  comprises a set value storage area , a table storage area , and a file storage area . The set value storage area , stores a taken image update flag, a predetermined period, a direction information, a location information, and the like which will be described later. The taken image update flag may be stored in advance in the set value storage area , by the user. The table storage area , stores a storage table TB.  shows an example of the storage table TB. The storage table TB assigns a memory number  to each of the first to third MFPs  to , and associatively stores MFP identification information , MFP location information , a relative direction , a relative distance , and specifications information ","\u201cSpecifications information\u201d herein means information describing the specification of the MFP. Specifically, the specifications information , includes model number information of the MFPs and file information , which represents file formats corresponding to the MFPs. Examples of file formats include PDF (Portable Document Format), XPS (XML Paper Specification) and JPEG(Joint Photographic Experts Group). The rest of the configuration of the storage table TB shown in  is the same as the storage table TB shown in , so the explanation is hereby omitted.","A table memory area , stores a display table TB.  shows an example of the display table TB. The display table TB is a table that stores the correspondence between display location image information and the MFPs. The display table TB stores an image location , MFP information , and display location image information . The display location image information , is information indicating the correspondence between the image locations of the partial images of the MFPs on the taken image and the display location images B, through B. Alternatively, the display location image information , may be information indicating the correspondence between the MFPs and the display location images B, through B. The display location image information , is identification information of the display location images Bthrough B. The rest of the configuration of the display table TB shown in  is the same as the display table TB shown in , so the explanation is hereby omitted.","Various types of files are stored in the file storage area . There are various types of files such as image files, text files, and so on. The basic program manages data in file units. In the present embodiment, a case in which there are three files stored in the file storage area , File A through File C, is explained.","A configuration of a first server  will be described. A storage unit  comprises an MFP information storage area . The MFP information storage area  is an area that stores the MFP identification information , the MFP location information , and the specifications information , of the first MFP  through third MFP , respectively. The rest of the configuration of the communication system , is the same as the communication system  shown in , so the explanation is hereby omitted.","Operations of the communication system , according to a fourth embodiment will be described with reference to . The MFP registration flow is explained using . The flow in  is a process carried out by each of the first MFP  through the third MFP . As an example, a case where the flow is executed by the first MFP  in  is explained.","The flow of  starts in accordance with a registration instruction input by the user operating the button input unit . In S, the CPU  stores the specifications information in the MFP information storage area  of the first server . Specifically, the specifications information , is transmitted to the first server  via the transceiver unit , the first access point , the internet , and the communication unit . In S, the CPU  stores the MFP identification information  of the first MFP  in the MFP information storage area  of the first server .","In S, the CPU  stores the MFP location information  of the first MFP  in the MFP information storage area  of the first server . The MFP location information  may be calculated by the GPS unit . Alternatively, it may be obtained as location information input by the user operating the button input unit . The operations of the second MFP  and the third MFP  are similar to that of the first MFP , so the detailed explanation thereof is hereby omitted.","A flow performed by the mobile phone  will be described with reference to . The flows shown in  are executed in response to activation of the printing application , of the mobile phone . As an example, when the first MFP  through the third MFP  are disposed in the arrangement indicated in , the operation for pointing the camera unit  in the direction of the direction information V is explained below.","In S, on , the CPU  executes a process to display a file list screen  in the panel . Specifically, using the API of the basic program, thumbnails of File A through File C which are stored in the file storage area , are displayed on the panel .  shows the upper half of the panel , and shows an example of the file list screen . Within the file list screen , a thumbnail  of File A, a thumbnail  of File B, and a thumbnail  of File C are displayed.","When the thumbnails are displayed, identification information of the displayed thumbnails (control) is returned by the API of the basic program, so this identification information is stored in the storage unit  in correspondence with the files. Thereafter, information (event messages) indicating whether the thumbnail (control) of identification information was touched or dragged, or the like are output by the basic program.","When the printing application , is started by the user operating the button input unit  of the mobile phone , operation of the camera unit  starts, and an image is taken by the camera unit . In the example of , the image data within the range of an image angle A of the camera unit  is captured by the camera unit .","In S, the CPU  executes a process to display the taken image  obtained by the camera unit  on the panel . Specifically, using the API of the basic program, the lower half of the panel  is used as the finder area of the camera unit  (the area where the output of the camera unit  is displayed).  shows an example of taken image shot by the camera unit  in the layout in .  shows the attitude of the taken image  displayed in the panel . As shown in , partial images of the first MFP  through third MFP  are displayed in the panel .","The detailed operation contents of the step of S, is the same as the contents of the step of S (), so detailed explanation is omitted here.","In S, the CPU  executes a process to receive various kinds of information concerning MFPs located around the mobile phone  from the first server . Specifically, the CPU  causes the wireless transceiver unit  to transmit an acquisition request for the MFP identification information , the MFP location information , and the specifications information , to the first server . Then the CPU  receives the MFP identification information , the MFP location information , and the specifications information returned from the first server , and temporarily stores them in the storage table TB.","The detailed operation contents of each of the steps of S, and S, are the same as the contents of each of the steps of S and S () as explained for the first embodiment, so detailed explanation thereof is omitted here.","In S, the CPU  determines whether or not the relative direction  and the relative distance  have been calculated for all MFPs whose various types of information are stored in the storage table TB. If not calculated (S, NO), the CPU  advances to S. In S, the CPU  selects an uncalculated MFP and then returns to S. Accordingly, the relative direction and the relative distance can be acquired for all MFPs located around the mobile phone . On the other hand, in S, if the calculation has been implemented for all MFPs (S: YES), the CPU  advances to S","In S, the CPU  specifies at what location the MFP is displayed on the taken image  displayed on the panel .","The detailed operation contents of the step of S, is the same as the contents of the step of S (), so detailed explanation is omitted here.","In S, the CPU  executes a process to composite a display location image at the location corresponding to the image location of the MFP partial image on the taken image . The display location image is displayed as a rectangular dotted line box.",{"@attributes":{"id":"p-0126","num":"0125"},"figref":"FIG. 22","b":["302","261","1","51","1","51","261","2","52","2","261","3","53","3"],"i":["c","c","c"]},"The following is an explanation of the relationship between the first MFP  through third MFP  and the display location images B, through B, displayed within the taken image . The display location images B, through B, are displayed using the API of the basic program. Using the API of the basic program, identification information of the displayed display location images (control) is returned, so this identification information is stored in the storage unit  in correspondence with the image location .","In S, of , the CPU  determines whether or not a plurality of display location images is displayed in the taken image . This determination is based on the number of controls stored in the storage unit . If a plurality of display location images is displayed (S, YES), the CPU  advances to S. On the other hand, if a plurality is not displayed (S, NO), it is determined that only one display location image is displayed, and the CPU  advances to SIn S, the CPU  executes a process to store the MFP corresponding to the single display location image as the object MFP. The object MFP is the MFP that is the object of the data communication. Then the CPU  advances to S","In S, the CPU  determines whether or not the thumbnail displayed in the file list screen  is merely being selected by the user. Thumbnail selection is carried out by the user dragging a thumbnail displayed in the file list screen . The state in which the thumbnail is merely being selected by the user is the state in which the thumbnail in the file list screen  was dragged by the user, but the thumbnail was not dropped in the display location image within the taken image . If the thumbnail is just merely being selected (S, YES) the CPU  advances to S","In S, the CPU  determines whether or not each MFP displayed in the taken image  matches the file corresponding to the selected thumbnail, based on the specifications information . An example of an MFP that does not match the file is an MFP that does not handle PDF printing in the event that the currently selected file has a PDF format. Also, if the currently selected file is set to the XPS format, an MFP that does not handle XPS printing would be such an example.","Then, the CPU  executes a process to not display the display location images for MFPs that do not match the file corresponding to the selected thumbnail. Specifically, a process is executed to change the display location image to transparent, using the API of the basic program. Also, for MFPs that match the selected file, a process is executed to display their display location images. Specifically, a process is executed to change the display location images to a black color or the like, using the API of the basic program. Then the CPU  advances to S","The following is an explanation of an example of the operation at S, using . As an example, a case is explained in which File A corresponding to the thumbnail  has XPS format. Also, a case in which the first MFP  and the second MFP  do not handle the XPS format, and the third MFP  handles the XPS format is explained. In this case, as shown in , when the user drags the thumbnail  (S, YES), only the display location image B, of the third MFP  which matches File A is displayed. In this configuration it is possible to visually identify MFPs that match the selected file on the panel , so it is possible to increase the convenience of the user.","On the other hand, in S, if it is not the case that the thumbnail only has been selected (S, NO), the CPU  advances to S. In S, the CPU  determines whether or not the user has merely selected the MFP displayed in the taken image . Selection of an MFP is carried out by the user touching the display location image displayed within the taken image . The state in which the user has merely selected the MFP is the state in which the thumbnail has not been dragged and the user has touched the display location image within the taken image , or the state in which a specific MFP is selected at S, and stored.","If the MFP has merely been selected (S, YES), the CPU  advances to S. In S, the CPU  determines whether or not each of the files corresponding to the thumbnails displayed in the file list screen  matches the selected MFP. Then the CPU  executes a process to not display the thumbnails for the files that do not match the selected MFP. Specifically, a process is executed using the API of the basic program to delete the displayed thumbnails. Also, for the files that match the selected MFP, a process is executed to display the thumbnail. Specifically, a process is executed using the API of the basic program to increase the density of the color of the thumbnail, or the like.","Also in S, if it is not the case that the MFP has merely been selected (S, NO), the CPU  advances to S. In S, the CPU  determines whether or not at least any one of the files displayed in the file list screen  and any of the MFPs displayed in the taken image  have both been selected by the user. An example of the operation of selection of both file and MFP is the operation of dragging at least one of the thumbnails  through  with the tip of a finger and moving the tip of the finger to any of the display location images (drag and drop operation). Another example of the operation of selection of both file and MFP is the operation of dragging at least one of the display location images with the tip of a finger and moving the tip of the finger to any of the thumbnails  through  (drag and drop operation). If both file and MFP have not been selected (S, NO) the CPU  advances to S, and if they have been selected (S, YES) the CPU  advances to S","In S, the CPU  determines whether or not the file and MFP selected at S, are a matching combination. If they are not a matching combination (S, NO) the CPU  advances to S, and if they are a matching combination (S, YES) the CPU  advances to S. In S, the CPU  identifies the display location image touched by the user. Then, using the display table TB (), the MFP information  corresponding to the identified display location image information , is stored in the storage unit  as the MFP information of the object MFP.","In S, the CPU  executes a process to obtain the IP address of the object MFP. Specifically, the CPU  reads the MFP identification information  (IP address) of the object MFP from the storage table TB.","In S, the CPU  executes a process to prepare the print data that can be processed by the object MFP. Specifically, the CPU  prepares the print data for the file selected in Sbased on the specifications information , so that it matches the object MFP. In this configuration, it is possible to prevent transmission of the print data prepared from the selected file to the object MFP in an inappropriate format.","In S, the CPU  causes the wireless transceiver unit  to transmit the print data to the object MFP. Specifically, the CPU  transmits the print data including the IP address of the object MFP in order to indicate the destination. The object MFP prints the print data using the printer , in accordance with the print data received.","In S, the CPU  determines whether or not there is a setting to update the taken image. Specifically, the CPU  determines whether or not the taken image update flag stored in the set value storage area , is \u201cUpdate\u201d. If the setting is to not update the taken image (SNO), the CPU  advances to S. In S, the CPU  executes a process to delete the finder area using the API of the basic program. Also, the CPU  executes a process to have the camera unit  take a still image. Then, the CPU  executes a process to display the taken still image in the panel  as the taken image . Then the CPU  returns to S. On the other hand, if the setting is to update the taken image (S, YES), the CPU  advances to S. In Sthe CPU  executes a process to update the taken image  obtained by the camera unit . Then the CPU  returns to S. In this configuration, by updating the taken image  in real time, it is possible to display the taken image  in the panel  as a moving image.","The following is an explanation of the effect of the communication system , exemplified as the fourth embodiment as explained above. In the communication system , it is possible to associate a file with an MFP by the operation of moving at least one file thumbnail and placing it on any one MFP display location image (the so-called drag and drop operation) or the operation of moving at least one MFP display location image and placing it on any one file thumbnail. In this configuration, it is possible to execute a simple procedure to associate which file is to be printed by which MFP. Therefore, it is possible to increase the convenience of the user.","Also, in the communication system , the display location images of the MFPs that do not match the selected file are not displayed. In this configuration, it is possible to visually identify the MFPs easily that are not suitable for printing the selected file, so the convenience of the user can be increased.","Also, in the communication system , the thumbnails of files that do not match the selected MFP are not displayed. In this configuration, it is possible to easily visually identify the files that are not suitable for printing by the selected MFP, so the convenience of the user can be increased.","Also, in the communication system , it is possible to carry out a control to enable a file to be printed at an MFP only in the case that the combination of file and MFP is suitable. In this configuration, it is possible to prevent the situation where a user mistakenly prints a file at an unsuitable MFP.","While specific embodiments of the present invention have been described in detail above, such description is for illustrative purposes only and is not intended to limit the scope and claims of the invention. Techniques described in the claims of the invention include various modifications and changes made to the specific examples illustrated above. A modified example will now be described below.","In S (), when specifying the image locations of the partial images of the MFPs on the taken image displayed in the panel , an image recognition process may be used. In the image recognition process, the CPU  analyzes the shape of each object on the taken image. Then each location on the taken image where the shape of an MFP is reproduced is specified. As a result, it is possible to more accurately specify the image locations of the partial images of the MFPs.","In S, the process of displaying the print buttons of MFPs for which wireless communication is not possible as grayed out to indicate the status that they cannot be selected was explained, but there is no limitation to this process. If the print button of an MFP that cannot carry out wireless communication is selected, a process may be carried out to switch the destination of the wireless communication so that the MFP corresponding to the print button can carry out wireless communication. For example, the following is an explanation of a case in which, in the communication system  of , wireless communication with the third MFP  is not possible because the mobile phone  is connected to the first access point  via the wireless communication . In this case, in the panel  shown in , when the user touches the print button PB that is grayed out, the CPU  may cut the communication to the first access point  via the wireless communication . Then, the mobile phone  may be connected to the second access point  using the wireless communication , to enable wireless communication with the third MFP . As a result, the print data is transmitted to the third MFP , and the print data can be printed using the printer  of the third MFP .","In S, various formats may be used for the balloon information display format for the MFPs for which wireless communication is not possible. For example, a format may be used in which the print buttons of the MFPs for which wireless communication is not possible are not displayed in the panel .","In , a case has been explained as an example in which the \u201clocations corresponding to the image locations of the partial images\u201d are around the image location, but there is no limitation to this arrangement. \u201cLocations corresponding to the image locations of the partial images\u201d may be locations that overlap with the image locations. In this case, in  for example, the balloon information B may be displayed in a location that overlaps the partial image of the first MFP  on the image location =\u201cP\u201d of the first MFP .","In S, the method of determining the object MFP is not limited to the method using the balloon information. The object MFP may be determined using the partial image itself In this case, in the flow of , S through S may be changed to the following explanation. The step of S (the step of compositing the balloon information to the location corresponding to the image location of the partial image) is not executed but skipped. After advancing to S, the CPU  determines whether or not selection of the partial image of the MFP has been carried out. Specifically, the CPU  receives a selection image selection operation, using the button input unit . The selection image is an image selected by the user from among the images of the various objects included in the taken image taken by the camera unit , and displayed in the panel . The selection image selection operation may be carried out by the user directly touching the selection image in cases where the button input unit  functions as a touch panel. If the selection image selection operation has not been carried out (S: NO) the CPU  advances to S, and if it has been carried out (S: YES) the CPU  advances to S. In S, the CPU  determines whether or not the selection image selected is a partial image (an image of the first MFP  through third MFP ). As a specific example of the method of determination, the location touched by the user is calculated to be the image location of the selection image. Then, using the display table TB (), it is determined whether or not the image location of the selection image corresponds to the image location  of the partial image. When it is determined that it does correspond, the MFP name  corresponding to the specified image location  is determined As a result, it is possible to determine the object MFP as the MFP associated with the partial image selected by the user.","The object MFP may be determined by using the method of using the balloon information in combination with the method of using the partial image itself.","In this case, in S of the flow in , the CPU  may determine whether or not the print button or the partial image of the MFP has been selected. As a result, it is possible to determine the object MFP as the MFP associated with the print button or the partial image selected by the user.","Various methods may be used for the method of determining the MFP name  (S) corresponding to the specified balloon information using the display table TB (). For example, the CPU  may specify the image location  associated with the selected print button. Then, the MFP name  corresponding to the specified image location  may be determined using the display table TB ().","In the second embodiment, there may be various routes by which the first server  acquires the MFP location information , the MFP identification information , the mobile phone  location information, and so on. In the second embodiment, the first server  receives the second data that includes the MFP location information  and the MFP identification information  from the mobile phone , but there is no limitation to this format. For example, the MFP location information  of the first MFP  through third MFP  may be stored in advance in the storage unit  of the first server . Then the first server  may receive from the mobile phone  only the mobile phone  location information. In this case, the first server  may search for the MFPs around the mobile phone  by comparing the mobile phone  location information and the MFP location information . As a result, by transmitting the mobile phone  location information to the first server , it is possible to obtain the MFP location information  and the identification information for the MFPs around the mobile phone  from the first server . Therefore, it is not necessary for the first MFP  through third MFP  to include a location measurement device such as the GPS unit  or the like, so it is possible to simplify the constitution of the first MFP  through third MFP .","For example, the first server  may receive the mobile phone  location information and the MFP identification information . In this case, the first server  may read the MFP location information  corresponding to the MFP identification information  from the storage unit . The route by which the first server  receives the MFP identification information  may be a route of directly receiving it from the first MFP  through third MFP , or a route of receiving it via the mobile phone .","Various modified examples can be adopted for the flow carried out by the mobile phone  as shown in . As a first modified example, steps S through S may be repeated every time a new network setting can be acquired. As a second modified example, the flow from S may be carried out again when the network connection is cut after the flow in  has started. In this case, in S, the relative direction  and the relative distance  may be newly acquired again. As a result, it is possible to respond to cases in which the number of MFP that can be connected to the network is varying dynamically, such as in a case where the user is moving while operating the mobile phone , and the like.","As a third modified example, S through S may be repeatedly and continuously carried out when the power supply of the mobile phone  is turned on. Then, when the camera unit  acquires a taken image (S), the flow from S may be started. As a fourth modified example, S through S may be repeatedly and continuously carried out when the power supply of the mobile phone  is turned on. Then, when the camera unit  acquires a taken image (S), the flow from S may be started.","As a fifth modified example, in S, the process of transmitting notification information notifying the intention to determine an MFP as the object MFP may be carried out by the wireless transceiver unit . Then if a reply signal such as an ACK signal or the like has not been received within a predetermined period of time, the print button PB within the balloon may be eliminated, and information urging the selection of another MFP may be displayed in the panel , as a first process example. A process to re-transmit notification information regarding the object MFP may be carried out by the wireless transceiver unit , after re-connecting to another access point, as a second process example. Then, if a reply signal has not been received from the object MFP even though notification information has been transmitted via all access points, information urging the selection of another MFP may be displayed in the panel . As a result, it is possible to more reliably communicate with the object MFP.","The method of determining the relative direction  is not limited to the method of S. The relative direction  may be determined based on the characteristics of the radio wave when the mobile phone  receives data from the MFP. As a specific example, there is a method of obtaining the relative direction  of the MFP that is transmitting a radio wave by providing the mobile phone  with an antenna with directional characteristics. For example, there is a method of obtaining the relative direction  of the MFP that is transmitting a radio wave from the reception time lag of the radio waves by providing the mobile phone  with a plurality of antennae. As a result, it is possible to obtain the relative direction  even in cases where it is not possible to obtain the mobile phone  location information or the MFP location information .","The method of determining the relative distance  is not limited to the method of S. The relative distance  may be calculated based on the radio field intensity of the wireless communication. As a result, it is possible to obtain the relative distance  even in cases where it is not possible to obtain the mobile phone  location information or the MFP location information .","Instead of the mobile phone , it is possible to use a device with a communication function, such as a notebook personal computer or the like. In this case, the communication program  may be various driver software installed on the notebook personal computer. The number of MFP connected to the communication system is not limited to three, there may be a plurality of MFPs.","The taken image taken by the camera unit  is not limited to a still image, but may also be a moving image.","For example, processing of S to S may be regularly executed in response to a boot up of the mobile phone , and, processing of S and then S may be executed under the condition that S is executed. For example, processing of S to S may be regularly executed in response to the boot up of the mobile phone , and processing of S and then S may be executed under the condition that S is executed.","For example, with respect to the MFP decided as the object MFP in S, the wireless transceiver unit  may be configured to execute processing for transmitting a notification which notifies that the MFP has been decided as the object MFP. Subsequently, when a reply signal such as an ACK signal is not received within a predetermined period of time, the wireless transceiver unit  may be configured to execute processing for deciding another MFP as the object MFP and retransmitting the notification to the newly decided object MFP. Accordingly, communication with the object MFP can be performed more reliably.","For example, a configuration may be adopted in which the first server  regularly receives identification information and information indicating the physical location from the first and second MFPs  and  respectively and stores the information in the storage unit . In this case, upon receiving first data transmitted by the mobile phone  in S, the first server  returns second data including the stored identification information and information indicating a physical location of the first and second MFPs  and  to the mobile phone . The second data returned by the first server  includes identification information of the mobile phone  for indicating the destination, identification information (IP address) of the first server  for indicating the source, and return information which indicates that the data is second data. In this case, upon receiving, in S, the second data transmitted by the first server , the CPU  of the mobile phone  extracts MFP identification information and information indicating the physical location from the second data in S and temporarily stores the information in the storage table TB.","In the second embodiment, various paths may exist along which the first server  acquires the MFP location information , the MFP identification information , location information of the mobile phone , and the like. In the second embodiment, while the first server  receives second data including the MFP location information  and the MFP identification information  from the mobile phone , such a mode is not restrictive. For example, MFP location information  for each of the first to third MFPs  to  may be stored in advance in the storage unit  of the first server . The first server  may receive only location information of the mobile phone  from the mobile phone . In this case, the first server  may be configured to search MFPs existing around the mobile phone  by comparing the location information of the mobile phone  with the MFP location information . Accordingly, by transmitting the location information of the mobile phone  to the first server , MFP location information  and identification information of MFPs existing around the mobile phone  can be received from the first server . As a result, since the first to third MFPs  to  need not include a location measuring device such as the GPS unit , a simplified configuration can be achieved.","Methods of deciding a relative direction  are not limited to the method of S. Alternatively, the relative direction  may be identified based on radio wave characteristics when the mobile phone  receives data from the MFP. Specific examples include providing the mobile phone  with a directional antenna to obtain a relative direction  of an MFP transmitting radio waves. A method is conceivable in which the mobile phone  includes a plurality of antennas, and a relative direction  of an MFP transmitting radio waves can be obtained from a time lag in radio wave receptions. As a result, the relative direction  can be acquired even when the location information of the mobile phone  or the MFP location information  cannot be acquired.","Methods of deciding a relative distance  are not limited to the method of S. A relative distance  may be calculated based on a radio field intensity of wireless communication. As a result, a relative distance  can be acquired even when location information of the mobile phone  or MFP location information  cannot be acquired.","Embodiments of the present teachings is not limited to the configuration in which the mobile phone  receives information indicating a physical location from an MFP, and stores the information in the storage table TB without modification as the MFP location information  of the MFP. Alternatively, the physical location received from the MFP may be converted to any data format that can easily be processed by the mobile phone , and then may be stored as the MFP location information  in the storage table TB.","A device having a communication function such as a notebook personal computer can be used instead of the mobile phone . In this case, the communication program  may be various driver software installed in the notebook personal computer. The number of MFPs connected to the communication system need not be limited to three and a large number of MFPs may exist. Communication between the first access point  and the second access point  and the first to third MFPs  to  is not limited to a wireless LAN method and a wired LAN method may be used instead.","In S, the method of determining the object MFP is not limited to the method using the display location images B, through B. The object MFP may be determined using the partial image itself. In this case, in the flow of , S, S, and S, may be changed to the following explanation. The step of S, (the step of compositing the display location image to the location corresponding to the image location of the partial image) is not executed but skipped. After advancing to S, and S, the CPU  determines whether or not selection of the partial image of the MFP has been carried out. Specifically, the CPU  receives a selection image selection operation, using the button input unit . The selection image is an image selected by the user from among the images of the various objects included in the taken image taken by the camera unit , and displayed in the panel . The selection image selection operation may be carried out by the user directly touching the selection image in cases where the button input unit  functions as a touch panel. The CPU  determines whether or not the selection image selected is a partial image (an image of the first MFP  through third MFP ). As a specific example of the method of determination, the location touched by the user is calculated to be the image location of the selection image. Then, using the display table TB (), it is determined whether or not the image location of the selection image corresponds to the image location  of the partial image. When it is determined that it does correspond, the MFP information  corresponding to the specified image location  is determined As a result, it is possible to determine the object MFP as the MFP associated with the partial image selected by the user. Also, in S, according to the operation of dragging at least one of the thumbnails  through  and dropping it to any of the partial images or the operation of dragging at least one of the partial images and dropping it to any of the thumbnails  through , the operation of selecting both of the file and MFP can be realized. As a modification of the above, the step of S, (the step of compositing the display location image) may be executed, then the steps of S, and , (the step of determining whether or not the partial image of MFP is selected) may be executed.","The operation of selecting the file and MFP that is accepted at S, is not limited to the drag and drop operation. An operation to create a state in which both of at least one of the thumbnails  through  and any one display location image on the panel  (a multi-touch operation) are touched may also be used. Also, an operation to touch at least one of the thumbnails  through  and any one display location image continuously for a required period of time on the panel  (a continuous touch operation) may also be used. In this configuration also, it is possible to execute a simple procedure to associate which file is to be printed by which MFP. Also, an operation to touch the partial images of MFP may be used alternatively to the operation to touch the display location images.","Also, in the fourth embodiment, the MFP registration flow () may be started in accordance with various triggers. For example, the MFP main unit may periodically execute the flow of . Also, the flow in  may be executed in accordance with changes in the IP address of MFPs or locational information.","The flows of  and  may be started by various triggers. For example, while the file list screen  is displayed in the panel , the flow may be started in accordance with a file print command by the user operating the button input unit . In this case, S, is deleted from the flow of .","In S, (), the association between File A through File C stored in the file storage area , and the thumbnails  through  displayed in the file list screen  can be executed by various methods. Also, in S, the association between the first MFP  through third MFP  and the display location images B, through B, displayed in the taken image  can be executed by various methods. For example, the coordinates of the display areas of the thumbnails or the display location images may be stored, and if a thumbnail or a display location image is touched, the coordinates of the touched point may be obtained from the basic program. In this configuration, if the coordinates of the touch point are within a thumbnail display area, it can be determined that the file corresponding to the thumbnail has been selected. Also, if the coordinates of the touch point are within a display location image, it can be determined that the MFP corresponding to the display location image has been selected.","In S, various patterns may be used for the display format for display location images corresponding to MFPs that do not match the selected file, for example, a gray-out display may be used. In this case, after deleting the display of the display location image, a new gray color display location image (control) may be displayed, and the association between the new display location image and the MFP may be stored over the former association.","In S, the content of the communication with the object MFP is not limited to transmitting the print data. For example, communication may be executed in which data that includes the IP address of the object MFP in order to indicate the destination is transmitted to the object MFP as transmitted data, and data that includes the IP address of the object MFP (in other words, data transmitted by the object MFP) may be received as received data. Various types of data can be considered as the data handled by data communication. For example, process data may be transmitted to the object MFP, to cause the object MFP to execute a specific process. Also, a scan instruction may be transmitted to the object MFP, and the scan data generated by the object MFP using the scanner  may be received from the object MFP. Also, an IP telephone instruction may be transmitted to the object MFP, and voice or facsimile communication may be carried out via the modem  of the object MFP and the telephone line connection unit  with a telephone device or facsimile machine that exists on the telephone circuit.","In S, determining whether or not the setting is to update the taken image need not be performed by the CPU . In this case, the taken image  is updated in real time, so the taken image  is displayed in the panel  as a moving image.","In S, the method of processing the files that do not match the selected MFP may have various forms. For example, a process that ignores selection of a file that does not match the selected MFP may be executed by the CPU . One method example of a process that ignores a selection is to delete information indicating the relationship between the thumbnail control and the file. Also, another method is to store a flag that disables information indicating the relationship between the thumbnail control and the file, so that even if a message that there has been a touch, or the like, arrives, it will be determined that the file has not been selected.","It is also possible to omit the step S. For example, in S, if a control is carried out that disables selection of an MFP that does not match the selected file, or a control is carried out that disables selection of a file that does not match the selected MFP, it is possible to omit S","In S, the process to obtain a still image may have various forms. For example, the still image may be obtained by storing the image displayed in the taken image  as a bitmap.","The specifications information , stored in the storage table TB is not limited to model number information , and file information . For example, it may include sheet size information and print type information. Sheet size information is information indicating the sizes of the sheets used by the printer . Print type information is information indicating which of color printing and monochrome printing the printer  is set. In this configuration, in S, it is possible to determine whether or not each MFP displayed in the taken image  matches the file corresponding to the selected thumbnail based on sheet size information or print type information.","In S, it is possible to apply various methods to the process of specifying the image locations of the MFP partial images on the taken image . For example, the location of the MFPs on the taken image  may be calculated by image analysis, and the relative location of the MFP may be calculated with the location of the mobile phone  as the center. Then the absolute locations of the MFPs may be calculated from the location information of the mobile phone , and by comparing the calculated absolute locations and the MFP location information stored in the storage table TB, the image location of the partial image of each MFP may be specified.","In S, the case in which the identification information of the display location images (control) returned from the basic program is stored in the storage unit  in correspondence with the image locations  was explained, but there is no limitation to this configuration. The identification information of the display location images may be stored in correspondence with the MFP names .","The method of determining whether or not a plurality of display location images is displayed within the taken image  is not limited to the method explained for SInformation indicating the number of controls displayed in the bottom half of the panel  may be periodically output by the basic program, and the number of displays may be determined based on this information.","The manner by which MFPs that match the selected file are displayed, and the manner by which the files that match the selected MFP are displayed are not limited to those in S, Sand so on. A displaying manner that maintains the current displaying manner of matching MFPs and files (e.g.: without changing to transparent, without deleting, without changing to a gray-out display) may be used.","The operation of selecting both file and MFP is not limited to that explained for SFor example, a configuration in which a thumbnail is selected when it is touched, and in this state if an MFP is touched then they are both selected may be used.","A specification in which the taken image  displayed in the finder area is constantly updated by the camera unit  and means realized by the CPU  executing the basic program, or the like, may be used. In this case, it is not necessary to execute the process of updating the taken image  (S).","Furthermore, it is to be understood that the technical elements described in the present specification and the drawings exhibit technical usefulness solely or in various combinations thereof and shall not be limited to the combinations described in the claims at the time of filing. The techniques illustrated in the present specification and the drawings are to achieve a plurality of objectives at the same time, and technical usefulness is exhibited by attaining any one of such objectives.","Each program may be constituted by a single program module or by a plurality of program modules. Each example may adopt another replaceable configuration which is within the context of the present invention. Adoptable configurations include a computer (the CPU  or the like) which executes processing based on a program (the communication program  or the like), a computer which executes processing based on a program other than an image processing program such as an operating system and other applications, a hardware configuration (the panel  or the like) which operates according to an instruction by a computer, and a configuration in which a computer and a hardware configuration work in conjunction with each other. Obviously, adoptable configurations also include a computer which executes processing by coupling processing based on a plurality of programs, and a hardware configuration which operates according to an instruction by a computer which executes processing by coupling processing based on a plurality of programs."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":[{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 1","b":"1"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 15","b":"1","i":"c. "},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 23"}]},"DETDESC":[{},{}]}
