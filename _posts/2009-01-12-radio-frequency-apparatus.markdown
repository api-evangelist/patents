---
title: Radio frequency apparatus
abstract: An apparatus for controlling at least one radio module, wherein the apparatus is configured to generate at least one service request for a first radio mode, determine at least one logical architecture model dependent on each service request, select at least one of the plurality of radio modules to form a physical architecture structure dependent on each logical architecture model, and generate at least one configuration data set dependent on the selected one of the plurality of radio modules.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09178537&OS=09178537&RS=09178537
owner: Nokia Technologies Oy
number: 09178537
owner_city: Espoo
owner_country: FI
publication_date: 20090112
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATION","FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF PREFERRED EMBODIMENTS OF THE INVENTION"],"p":["This application was originally filed as PCT Application No. PCT\/FI2009\/000012 filed Jan. 12, 2009, which claims priority to Great Britain Patent Application No. 0804205.3, filed Mar. 6, 2008.","The present invention relates to a radio frequency (RF) apparatus, and a method of configuring a radio frequency apparatus.","A communications device can be understood as a device provided with appropriate communication and control capabilities for enabling use thereof for communication with other parties. The communication may comprise, for example, communication of voice, electronic mail (email), text messages, data, multimedia and so on. A communication device typically enables a user of the device to receive and transmit communications via a communications system and can thus be used for accessing various applications.","A communications system is a facility which facilitates the communication between two or more entities such as the communications devices, network entities and other nodes. An appropriate access system allows the communications device to access the communications system. An access to the communications system may be provided by means of a wireless communication interface.","Communications systems providing wireless access typically enable at least some mobility for the users thereof. Examples of these include cellular wireless communications systems where the access is provided by means of access entities called cells. Other examples of wireless access technologies include different wireless local area networks (WLANs) and satellite based communications systems.","A wireless communications system typically operates in accordance with a wireless standard and\/or with a set of specifications which set out various aspects of the wireless interface. For example, the standard or specification may define if the user, or more precisely user equipment, is provided with a circuit switched bearer or a packet switched bearer, or both. Communication protocols and\/or parameters which should be used for a wireless connection are also typically defined. For example, the frequency band or bands to be used for the communications are typically defined.","A portable communications device may be provided with so called multi-radio capabilities. That is, a portable device may be used for communication via a plurality of different wireless interfaces. An example of such device is a multi-mode cellular phone, for example a cellular phone that may communicate in at least two of the GSM (Global System for Mobile communications) frequency bands 850, 900, 1800 and 1900 MHz or a cellular phone that may communicate based on at least two different standards, for example a cellular phone which may operate on at least two of the GSM access network, the CDMA (Code Division Multiple Access) access network, and a WCDMA (Wideband CDMA) based access network as used in the UMTS (Universal Mobile Telecommunications System).","A mobile or portable device may also be configured for communication via at least one cellular system and at least one non-cellular system. Non-limiting examples of the latter include short range radio links such as Bluetooth\u2122, other access networks such as wireless local area networks (WLAN) and ultra wide band (UWB).","Furthermore a mobile or portable device may also be configured for receiving information broadcast systems, non limited examples including those based on the Digital Video Broadcasting via Handheld Terminals (DVB-H), and global positioning system (GPS).","Such communications devices can be implemented with software defined radio (SDR) methods. In an SDR system, a radio receiver\/transmitter can be configured to potentially tune to any frequency band and receive\/transmit any known modulation scheme across a large frequency spectrum and process signals through the use of software.","A multi radio communications device equipped with SDR capabilities may have to be able to handle simultaneously more than one active radio connection. This increases the required complexity of any RF system on chip (RF SOC) in the communications device since the RF SOC has to enable cooperation in the control plane between the different communication systems in order to enable seamless multi radio operation. The complexity of such RF system on chip designs is also increased as any cost effective design involving multi radio communication capability will require some sharing of common resources of which the shared resources need to be controlled and allocated when necessary.","The increased complexity of such designs has meant that it is unfeasible for a single design team to produce a RF system on chip (SoC) design and it is currently best practice for some parts of the RF SoC to be designed inside a company by one or more teams, whilst the design of other parts of the RF SoCs is sub-contracted out to external designers, and other parts of the RF SoC formed from recycled previous designs.","It is thus desirable for such RF Systems on Chip designs to have a modular architecture allowing easy integration of various components of the RF. However the arrangement and operation of such architectures is difficult to implement, particularly in software defined radio systems when it is required to be able to make changes to the operation of the RF modules.","There have been developments with respect to the creation of low level hardware driver interfaces, however these typically are limited to dealing with only one level of extraction. For example there has been an initiative to parameterize the RF hardware and circuitry by such forum and standards groups as the Software Defined Radio forum and the Object Management Group (OMG) with their Software Communications Architecture (SCA).","These existing approaches however lack flexibility, especially when possible hardware architecture changes are required to be implemented.","According to a first aspect of the present invention, there is provided an apparatus for controlling at least one radio module, wherein the apparatus is configured to generate at least one service request for a first radio mode, determine at least one logical architecture model dependent on each service request, select at least one of the plurality of radio modules to form a physical architecture structure dependent on each logical architecture model, and generate at least one configuration data set dependent on the selected one of the plurality of radio modules.","According to some embodiments of the present invention the apparatus may be further configured to write the at least one configuration data set to the selected at least one of the plurality of radio modules. The apparatus may be further configured to read at least one configuration data set from the selected at least one of the plurality of radio modules, or the apparatus may be further configured to read and\/or write the at least one configuration data set via a control interface. The at least one configuration data set may comprise at last one value for a parameter associated with the selected one of the plurality of radio modules.","According to some embodiments of the present invention, the apparatus may be further configured to select the at least one of the plurality of radio modules further dependent on the at least one configuration data set. The apparatus may be further configured to determine the at least one logical architecture model dependent on the selected at least one of the plurality of radio modules. The apparatus may be further configured to receive a first radio mode configuration data associated with the first radio mode comprising an indication of at least one of a radio communication protocol, a radio frequency, a modulation type; a transmission power output limit, and a timing slot value. The apparatus may be further configured to generate at least one further service request for a second radio mode dependent on the at least one service request.","According to one embodiment of the present invention, the apparatus may be further configured to determine at least one further logical architecture model dependent on the at least one further service request, select at least one of the plurality of radio modules to form a physical architecture structure dependent on each further logical architecture model, and generate at least one further configuration data set dependent on the selected one of the plurality of radio modules.","According to a second aspect of the present invention, there is provided a method for controlling at least one radio module, the method comprising generating at least one service request for a first radio mode, determining at least one logical architecture model dependent on each service request, selecting at least one of the plurality of radio modules to form a physical architecture structure dependent on each logical architecture model, and generating at least one configuration data set dependent on the selected one of the plurality of radio modules.","According to some embodiments of the present invention, the method may further comprise writing the at least one configuration data set to the selected at least one of the plurality of radio modules. The method may further comprise reading at least one configuration data set from the selected at least one of the plurality of radio modules. The method may further comprise reading and\/or writing the at least one configuration data set via a control interface. The at least one configuration data set may comprise at last one value for a parameter associated with the selected one of the plurality of radio modules. Selecting the at least one of the plurality of radio modules may be further dependent on the at least one configuration data set. Determining the at least one logical architecture model may be further dependent on the selected at least one of the plurality of radio modules.","According to a further embodiment of the present invention, the method may further comprise receiving a first radio mode configuration data associated with the first radio mode comprising an indication of at least one of a radio communication protocol, a radio frequency, a modulation type, a transmission power output limit, and a timing slot value. The method may further comprise generating at least one further service request for a second radio mode dependent on the at least one service request.","According to a further embodiment of the present invention, the method may further comprise determining at least one further logical architecture model dependent on the at least one further service request, selecting at least one of the plurality of radio modules to form a physical architecture structure dependent on each further logical architecture model, and generating at least one further configuration data set dependent on the selected one of the plurality of radio modules.","According to a further aspect of the present invention, there is provided a radio transceiver apparatus comprising the described apparatus. There may further be provided a software defined radio apparatus comprising the described apparatus. There may be further provided a multiradio apparatus comprising said software defined radio.","According to a further aspect of the present invention there is provided a computer program product configured to perform a method for controlling at least one radio module, comprising generating at least one service request for a first radio mode, determining at least one logical architecture model dependent on each service request, selecting at least one of the plurality of radio modules to form a physical architecture structure dependent on each logical architecture model, and generating at least one configuration data set dependent on the selected one of the plurality of radio modules.","According to a further aspect of the present invention, there is provided an apparatus for controlling at least one radio module, comprising processing means for generating at least one service request for a first radio mode, second processing means for determining at least one logical architecture model dependent on each service request, third processing means for selecting at least one of the plurality of radio modules to form a physical architecture structure dependent on each logical architecture model, and fourth processing means for generating at least one configuration data set dependent on the selected one of the plurality of radio modules.","With reference to , a wireless communications device  which may employ embodiments of the invention is shown. The wireless communications device may be used to provide access for various services and\/or applications via a wireless or radio interface.","A portable wireless device  can typically communicate wirelessly via at least one radio access network node, for example in GSM network a base transceiver station (BTS), or directly with another communication device.","The portable wireless device  may have one or more radio channels open at the same time with one or more different radio access networks and may have communication connections with more than one other party. A portable communication device  may be provided by any device capable of at least one of sending or receiving radio signals. Non-limiting examples include a mobile station (MS), a portable computer provided with a wireless interface card or other wireless interface facility, personal data assistant (PDA) provided with wireless communication capabilities, or any combinations of these or the like.","The portable wireless device  of  can be used for various tasks such as making and receiving phone calls, for receiving and sending data from and to a data network and for experiencing, for example, multimedia or other content.","The portable wireless device  comprises at least one data processing entity  and at least one memory , or storage entity, for use in tasks it is designed to perform. The data processing  and storage entities  can be provided on an appropriate circuit board and\/or in chipsets. The circuit boards and\/or chipsets further comprise one or more configurable RF circuits . The one or more configurable RF circuits  are able to be controlled by the data processing entity .","In other embodiments of the invention the data processing entity  or the storage entity  directly control the RF circuits .","Non limiting examples of the types of RF circuits which may be found within the portable wireless device  comprise mixer circuits, modulator circuits, filter circuits, switch circuits, amplifier circuits, antenna circuits, and baseband signal processing circuitry. The circuitry may dependent on the configuration of the registers or by directly controlling from the processing entity may configure the RF circuitry  to provide both analogue and digital signal processing functionality.","The user can control operation of the portable wireless device  by means of a suitable user interface such as key pad . Furthermore the portable wireless device may comprise a display  to provide the user an indication of the state of the portable wireless device .","The device  may be enabled, using the at least one RF circuit  controlled by the data processing entity  and storage entity , to communicate wirelessly on a number of different wireless access network systems and frequency bands. This capability is illustrated in  by the stylized two wireless signals  and . A non limiting list of possible access networks the wireless device may communicate with includes global system for mobile communications (GSM), general packet radio service (GPRS), enhanced GPRS, universal mobile telecommunications system (UMTS) terrestrial radio access network (UTRAN), evolved UTRAN, high speed packet access (HSPA), wireless local area network (WLAN), and worldwide interoperability for microwave access (WiMAX) or any of their extensions like wideband code division multiple access (WCDMA), High-Speed Downlink Packet Access (HSDPA), High Speed Uplink Packet Access (HSUPA), and long term evolution (LTE) in the case of the 3Generation partnership project\/universal mobile telecommunications system (3GPP\/UMTS). However it would be understood to the person skilled in the art that any suitable wireless communication system may be used to communicate to and from the wireless device.","Furthermore the wireless device , using the at least one RF circuit  controlled by the data processing entity  and storage entity , may also communicate over short range radio links such as a Bluetooth\u2122 link.","In further embodiments of the invention, using the at least one RF circuit  controlled by the data processing entity  and storage entity , the wireless device may further receive wireless broadcast transmissions such as global positioning system (GPS) and Galileo, and signals for assisting in location estimation of the wireless device , or Digital Video Broadcasting via Handheld Terminals (DVB-H) for television or radio programming.","This type of arrangement, as shown in , is one in which it is possible to implement software defined radio (SDR) methods. The embodiments of the invention may separate the radio frequency (RF) platform in control domain (implemented by the data processing entity ) from a radio protocol stack of the RF hardware (implemented in the at least one RF circuit ).",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 2","FIG. 2"]},"The communications system shown in  is a cellular radio system which comprises a base transceiver station (or node B ), which has bi-directional radio links ,  with the wireless devices ,  similar to those described previously. As can be seen in , the wireless devices may also communicate, shown by communication links , , with a separate radio access network shown by cloud .","The node B  may include transceivers connected to an antenna unit that establishes the bi-directional radio links to the devices , . The node B  is further connected to a radio network controller  (RNC), which may transmit and receive data to and from the devices ,  to the other parts of the network. The radio network controller  furthermore controls in a centralised manner several node Bs  connected to it. The radio network controller  is further connected to a core network (CN) . Depending on the system, the counterpart on the CN  side can be mobile services switching centre (MSC), a media gateway (MGW) or a serving GPRS (general packet radio service) support node (SGSN).","In some embodiments of the invention the functionality of the RNC  may be distributed among node B elements .","The embodiments of the invention are not restricted to the above radio access network given as an example, but a person skilled in the art may apply the solution to other communications system provided with the necessary properties.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 3","b":["351","309","311"]},"The logical control interface  carries information between the protocol stacks  and the HAL . In particular, this interface allows information elements identifying the constant parameters of the used radio protocol to be passed to the HAL , in order to allow the relevant hardware circuits to be correctly configured. Synchronization services to ensure that the protocol and the HAL share a common concept of time also use messages passed over the control interface . Furthermore, dynamic operation requests may be issued over the control interface to meet requirements of the protocol communication during operation.","In one embodiment of the present invention, the information relating to the constant parameters for each specific radio protocol that may be used, are hardcoded in to the HAL . This means that for all supported protocols, the information, relating to the protocol requirements, for instance how to setup the RF hardware to implement that protocol, is coded into the HAL at design time. This may have advantages relating to testing and reliability of the HAL . However, if a new protocol is to be supported it would be necessary to modify the HAL .","In an alternative embodiment, the information elements defining the radio protocol may be passed to the HAL , according to some standardised format, using the common control interface .","Whilst the information elements have been described in the context of a single radio protocol, the common interface  may be duplicated, logically, to provide access to the HAL for a plurality of protocol stacks .","The HAL  also communicates directly with the Radio Frequency Circuits , using hardware specific interfaces. The RF circuits may comprise any programmable building block, from antenna to baseband signal processing, that provide dedicated analog or digital signal processing functionality with a possibility to configure a signal path, or its properties. Control of the hardware blocks is typically performed by writing to registers. The HAL  may be able to control these RF circuits  in order to meet the requirements of the Protocol stacks .","In the illustrated example, the HAL structure  comprises four internal abstraction layers, the service layer , the logical architecture layer , the physical architecture layer  and the hardware implementation layer . However, it is envisaged that the functionality of the HAL structure could be provided by fewer than four abstraction layers, or may be partitioned into more than four abstraction layers.","While the HAL  presents a generic control interface  to the protocol stacks , the underlying hardware contained within the RF Circuits  may be specific to individual communication protocols. However in some embodiments of the invention is may be possible to implement protocol flexible circuitry, controllable by software, for example by implementing vector processors to carry out the signal processing. It is important for the HAL  to have information identifying required constant parameters of the RF circuitry blocks (i.e. the protocol specific configuration) in order that the HAL can match the requirements of a protocol with the abilities of the RF circuit block .","As mentioned above, a number of ways have been envisaged for passing protocol requirements, defining how the hardware must be configured for the protocol, to the HAL. For a fully configurable and \u2018protocol independent\u2019 HAL, the description of the required radio signal properties, or ontology of the required signal, must be established between the HAL and the protocol. For example, the protocols and the HAL may negotiate the signal processing (i.e. hardware) requirements of the protocol, and the HAL may then configure the hardware elements based on those requirements. The signal properties may comprise one or more of, for example, RF band, channel bandwidth, crest factor, transmit output power, and spectrum mask.","In embodiments of the invention the means to establish the radio protocol stack is preferably realised by a computer program. Furthermore in embodiments of the invention the HAL is implemented preferably by a computer program operating on a data processor .","In an alternative embodiment of the present invention, the protocol requirements are defined inside the HAL  in some format. Adding support for new protocols for this embodiment, will therefore, require changes in the HAL. In the simplest form, the HAL may contain pre-defined values for the hardware configuration registers. The HAL is then able to select the correct value corresponding to the protocol if a protocol requiring the use of the block controlled by that register is used.","In some embodiments of the present invention, it may be possible to combine elements of a fully configurable HAL with elements of a HAL containing pre-defined protocol requirements. For example, the HAL may be set up for operation with static protocol information relating to a set of protocols, but may additionally be capable of being informed of any new requirements of a protocol or a new protocol.","The radio protocol configuration information may be static or dynamic in nature. Examples of static configurations include GSM1800 using the 1800 MHz GSM band and 200 kHz channel bandwidth. Examples of more dynamic configurations include a protocol in which the transmitted bursts may be either basic GSM, using GMSK modulation, or EDGE, using 8-PSK, with a selection of the type of modulation made upon request from the base station (BS).","In some embodiments of the invention the HAL may select the appropriate protocol configuration information from the stack dependent on a protocol required. Furthermore the HAL may in some embodiments of the invention determine that the hardware implementation layer can satisfy the requirements imposed by the protocol or determine that those requirements are satisfied only in part.","The control interface  furthermore is configured to assist in the passing of time synchronisation information for synchronization of the RF circuitry and HAL  processing in the data processing entity .","In embodiments of the invention the RF circuitry blocks comprise hardware and\/or software configured to keep an accurate time for each supported radio protocol. This may be achieved, for example, using hardware system time counters and higher-level software counters. The accurate time values may be used to activate and de-active the RF circuitry blocks  at appropriate times to ensure proper operation of the communications device according to a specification of a particular standard or protocol. Since in the embodiments of the invention described above communication is possible using more than one communications system\/protocol, it is important that the clock signals are synchronised between all protocols in use and the HAL .","The control interface synchronises each protocol to a respective time counter and the time counters are synchronised to each other. Set up information for the time counter associated with a protocol may be defined in the radio protocol configuration information. The reason for synchronisation is the possibility for a control processor and a control bus for access to the RF circuitry  may not share the same clock domain as the supported protocols in a multi-radio system.","In another embodiment, an arbitrary clock domain is used in the HAL  which is not necessarily a protocol specific clock time. In this embodiment the control interface may be used to translating between the protocol specific time and other clock domains such as the arbitrary clock domain selected by the HAL . This clock synchronisation may be carried out in a similar way to PCT patent application No. WO 2008\/000903 A1.","In either embodiment, synchronisation is achieved by the control interface . However, it is not essential for physical clock signals to be transmitted over the control interface \u2014only that information to allow synchronisation to take place be transmitted.","Furthermore the control interface may in embodiments of the invention permit dynamic operation requests to meet protocol communication needs.","Where the RF circuitry  comprises a transceiver chain comprising various blocks\/elements as described above, dynamic operation may refer herein to the following operations:\n\n","In embodiments of the invention the HAL layers form a hierarchical driver scheme or interface scheme. A driver for implementing such a scheme is herein referred to as a \u201cHW driver\u201d. These are discussed in further detail below.","To further understand the present invention we will now discuss each abstraction layer of the HAL  in turn, i.e. the service layer , the logical architecture layer , the physical architecture layer  and the hardware implementation layer  implemented in the HAL . Firstly, the following table summarizes the different layers of the HAL .",{"@attributes":{"id":"p-0075","num":"0079"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}},{"entry":[{},"Name","Description","Time concept","Example"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["3","Service layer","Generic, ","Radio protocol","Configure RX "]},{"entry":[{},{},"architecture","time","chain (in general, "]},{"entry":[{},{},"independent",{},"RX architecture"]},{"entry":[{},{},"functionality,",{},"independent)."]},{"entry":[{},{},"translates",{},"Defines agc"]},{"entry":[{},{},"protocol",{},"algorithm at high"]},{"entry":[{},{},"commands to RF",{},"abstraction "]},{"entry":[{},{},"internal services.",{},"level (RX"]},{"entry":[{},{},{},{},"path architecture"]},{"entry":[{},{},{},{},"independent). RF"]},{"entry":[{},{},{},{},"services can be"]},{"entry":[{},{},{},{},"internal or"]},{"entry":[{},{},{},{},"external."]},{"entry":[{},{},{},{},"Turn receiver"]},{"entry":[{},{},{},{},"ON\/OFF is an"]},{"entry":[{},{},{},{},"external service"]},{"entry":[{},{},{},{},"and AGC an "]},{"entry":[{},{},{},{},"internal service."]},{"entry":["2","Logical","Generic RF","Control system","Defines what"]},{"entry":[{},"architecture","architecture","common time","RF IP blocks "]},{"entry":[{},"layer","description and",{},"are needed"]},{"entry":[{},{},"interface",{},"to construct"]},{"entry":[{},{},"configuration",{},"RF chain"]},{"entry":[{},{},"between building",{},"(e.g. DiCoRX)"]},{"entry":[{},{},"blocks. Maps RF",{},{}]},{"entry":[{},{},"services to certain",{},{}]},{"entry":[{},{},"architecture and",{},{}]},{"entry":[{},{},"functional ",{},{}]},{"entry":[{},{},"partitioning",{},{}]},{"entry":[{},{},"(Block level",{},{}]},{"entry":[{},{},"partitioning).",{},{}]},{"entry":[{},{},"Optimizes",{},{}]},{"entry":[{},{},"performance",{},{}]},{"entry":[{},{},"partitioning in the",{},{}]},{"entry":[{},{},"signal processing",{},{}]},{"entry":[{},{},"elements.",{},{}]},{"entry":["1","Physical","Implementation-","\u2014","Defines what gain"]},{"entry":[{},"architecture","aware IP block",{},"values and steps "]},{"entry":[{},"layer","drivers. Define",{},"are available for "]},{"entry":[{},{},"necessary HW",{},"RF IP block. "]},{"entry":[{},{},"parameters and",{},"Defines possibly "]},{"entry":[{},{},"report them ",{},"also certain"]},{"entry":[{},{},"to layer",{},"tunable attributes "]},{"entry":[{},{},"2. Maps controls ",{},"like noise figure "]},{"entry":[{},{},"to logical ",{},"as a function of "]},{"entry":[{},{},"register names.",{},"the gain value."]},{"entry":["0","HW","Defines register","Realtime","Defines the "]},{"entry":[{},"implementation","mapping and ","(i.e.","correct"]},{"entry":[{},"layer","links RF IP ","microseconds)","configuration"]},{"entry":[{},{},"block drivers ",{},"register bit"]},{"entry":[{},{},"actual HW (by",{},"pattern needed to"]},{"entry":[{},{},"implementation",{},"configure desired"]},{"entry":[{},{},"dependent low ",{},"gain setting "]},{"entry":[{},{},"level HW drivers",{},"for RF IP block."]},{"entry":[{},{},"conforming ",{},{}]},{"entry":[{},{},"RF HAL)."]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}}}},"The service layer , can be considered to be the layer with the highest level of abstraction from the implementation of the RF circuitry. The service layer  may contain generic architecture independent functions and operates independently of the underlying RF circuits . Communications between the service layer and the protocol stack takes place via the generic control interface (RF Protocol API) . The service layer  receives commands over the RF Protocol API , and translates the generic protocol commands to RF internal service functions. In the case of protocol requirements being hardcoded into the HAL , then the service layer may not be truly architecture independent.","These functions operate over a time span controlled by the radio protocol time, that is, the functions use time as defined by the radio protocol stack (the time periods defined by the communication system being implemented).","An example of the operation of the service layer might be the translation of a generic configure receive chain command, which would, in general, be receive architecture independent. The result of such a translation for example would be to define various algorithms or services at a high abstraction level which would be necessary to receive a required signal. These services may be internal (i.e. not requiring input from outside), for example an \u201cautomatic gain control (AGC)\u201d algorithm or service (RX path architecture independent) or the service\/algorithm may be external such as a \u201cturn receiver ON\/OFF\u201d service.","Service Layer (or layer ) services may be divided into two basic classes or types. The first class consists of, but is not exclusively limited to, autonomous services such as run time calibration and the previously mentioned automatic gain control services. Such services take place automatically when an RF circuit is active and can be modelled as finite state machines.","The second class consists of, but is not exclusively limited to commands, which are service requests from the radio protocol stack to the logical architecture layer  (also known as layer ). Examples of \u2018command\u2019 service requests are to set a channel, which sets the receiver or transmitter to receive a specific channel and to receive a frame, which commands the logical architectural layer  to produce logical architecture to receive a frame of data.","In order to map these command service requests and thus to control actions of one or more parts of the RF circuitry, the service layer  comprises an interpretation mechanism which maps to the logical architectural layer (layer ) or allows RF implementation from services externally received by the RF. Examples of such external services may be \u201cbaseband control\u201d and \u201cmultiradio controller (MRC) control\u201d.","The following table provides some examples of messages passed between the control interface and the service layer using the RF protocol API  interface.",{"@attributes":{"id":"p-0083","num":"0087"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Interface",{},{},{}]},{"entry":["between",{},{},"Message"]},{"entry":["layers (A-","Interface","Message examples","examples "]},{"entry":["B)","Name","(from A to B)","(from B to A)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Protocol -","RF-protocol","+ Turn ON receiver","+ Received"]},{"entry":["Service","API","for GSM at 850","signal strength"]},{"entry":["Layer",{},"MHz band at start ","value in dB's"]},{"entry":[{},{},"of GSM time slot 1","+ Receiver"]},{"entry":[{},{},{},"configuration"]},{"entry":[{},{},{},"acknowledge-"]},{"entry":[{},{},{},"ment"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"The interface may be called the RF protocol application programming interface. Thus the uppermost layers of the radio protocol stack passes messages to the service layer which are interpreted by the service layer  and the service layer then passes measured values or acknowledgement messages back to the radio protocol stack.",{"@attributes":{"id":"p-0085","num":"0089"},"figref":"FIG. 4","b":["301","3"]},"The Radio Protocol  may request the TX power control service () in the service layer to restrict the output power to be below a specific level according to a defined standard specific value. The TX power control service may need to utilise the (possibly) internal TX Output power measure service () to comply to the request from the Radio Protocol. Both of the \u201ctransmitter (TX) power control\u201d service  and a \u201cTX output power measure\u201d service  may then via the transmitter interface  generate at least one interface command  such as setPower, for the \u201cTX power control\u201d service  and measurePower for the \u201cTX output power measure\u201d service . These interface commands  may then be passed to the logical architecture layer .","Similarly the radio protocol  may require an input value not to exceed some defined value. Within the service layer  the RadioFunction generator  may thus based on this request create a \u201cautomatic gain control (AGC)\u201d function. The automatic gain control (AGC) function may then be interpreted or generated from a \u201cReceive path (RX) automatic gain control set\u201d service  and a \u201creceived signal strength indicator (RSSI)\u201d service . Both of the \u201cReceive path (RX) automatic gain control set\u201d service  and a \u201creceived signal strength indicator (RSSI)\u201d service  may then via the receiver interface  generate at least one interface command  such as +setGain, for the \u201cReceive path (RX) automatic gain control set\u201d service  and a +measurePower for the \u201creceived signal strength indicator (RSSI)\u201d service . These interface commands  may then be passed to the logical architectural layer . Furthermore the RSSI service  may be configured to pass the received power report to bother the automatic gain control set service  and the radio protocol stack .","The logical architecture layer  (also known as layer ) defines a signal path structure of the RF application from a control perspective by configuring interfaces between RF logic blocks. The logical architecture layer  forms a logic RF architecture description and interface configuration between building blocks to fulfil a service layer service request.","The logical architecture layer  may also be used to handle dynamic resource management, resource reservation and resource conflict resolution in embodiments of the present invention where dynamic resource configuration such as described in PCT patent application no. WO 2008\/000905 A1 which discloses a method of dynamic resource management.","Examples of the interface communications between the service layer  and the architecture layer  is shown in the following table.",{"@attributes":{"id":"p-0091","num":"0095"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Interface",{},{},{}]},{"entry":["between",{},{},"Message"]},{"entry":["layers (A-","Interface","Message examples ","examples"]},{"entry":["B)","Name","(from A to B)","(from B to A)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Service","RF HAL","+ Configure receiver ","+ WLAN"]},{"entry":["layer -",{},"chain for GSM","receiver"]},{"entry":["logical",{},"at 850 MHz band at time t1","configuration"]},{"entry":["architecture",{},"+ set RF gain to","ready"]},{"entry":["layer",{},"previous value or","+ WCDMA"]},{"entry":[{},{},"initialize AGC","configuration"]},{"entry":[{},{},"(from measurements","available"]},{"entry":[{},{},"during time t2-t3)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"The interface may be called the Radio Frequency\u2014Hardware Abstraction Layer interface . The interface communication from the service layer  and the logical architecture layer  may be the interface commands such as configure the receiver for a GSM 850 MHz for time t or set the power out gain to a specific value or initialize the automatic gain control.","The logical architecture layer  (layer ) therefore abstracts or interprets the requirements and requests from the service layer to indicate the logical architecture required to implement the blocks. Thus for example where the service layer  requests a GSM 850 MHz receiver the logical architecture layer  selects the receiver that will be required\u2014such as whether to use direct conversion from the RF to the baseband frequencies or whether to use an intermediate frequency discriminator. Furthermore it carries out these abstractions\/selections in a way that these issues are invisible to the service layer.","With respect to  the structure of the logical architecture layer  can be shown. The logical architecture layer  has knowledge of the physical architecture models of the physical architecture blocks or elements. Some example IP blocks shown in  include a radio frequency (RF) amplifier block , a RF mixer block , a RF ABB (analog baseband) block , a RF analogue to digital converter (ADC) , a Receiver (RX) DFE (Digital front end) block , a RF filter , a transmitter (TX) DFE , a RF DDRM  and a Synthesizer (SX) .","The models of the blocks share a common format and are types of IP Block , inheriting certain functions and interfaces and are the smallest managed resource. The IP Blocks may be selected in response to the requirements of the receiver signal path architecture  or the transmitter signal path architecture  to construct a signal path architecture connecting up the various IP block element models.",{"@attributes":{"id":"p-0096","num":"0100"},"figref":"FIG. 5","b":["509","511"]},"The logical layer thus maps the RF service to a respective architecture and provides functional partitioning at a RF IP block level, and optimises partitioning in the signal processing elements. Thus using the above example of the service layer  may select the low frequency intermediate frequency architecture passing to the corresponding logical architecture layer block  a service request for a 850 MHz GSM receiver The LowIF block  may select the RF amplifier , the RF mixer , the RF ADC  and using its given parameters. Having determined the logical signal architecture requirements these may then be modified and passed the independent blocks on the physical architecture layer .","The logical architecture layer  forms the core functionality of the HAL . The HAL  advantageously allows products to be developed more quickly, and permits efficient usage of the RF IP blocks both in terms of architecture management, and dynamic control and usage of different hardware resources.","The physical architecture layer  (also known as layer ) describes a set of physical control features that each radio frequency circuit element may have. The purpose therefore of the physical architecture layer  is to model the physical issues associated with each of the RF circuit elements in a standard way.","The following table shows example messages at the communication\/interface between the logical architecture layer  and the physical architecture layer . The interface may be called the IP block application programmable interface . The logical architecture layer  as described above produces the signal configuration between the various selected radio frequency circuit components, or IP blocks, required to carry out the service request and may pass to the physical architecture layer  data which determines the physical model characteristics. For example the message from the logical architecture layer  to the physical architecture layer  may be to set a low noise amplifier to a specific gain value, or to configure the physical model connections to the type of receiver being implemented. Furthermore as described above the physical architecture layer  may pass data back to the logical architecture layer  expressing specific limitations that a physical implementation of the logical model may have. For example the physical architecture layer  may pass data back to the logical architecture layer  specifying the maximum gain, or typical current consumption of an amplifier, or that a synthesizer has a specific settling time. Furthermore the physical architecture layer  may pass data back to the logical architecture layer  acknowledgement messages for example that the receiver configuration is ready for operation.",{"@attributes":{"id":"p-0101","num":"0105"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Interface",{},{},{}]},{"entry":["between",{},{},"Message"]},{"entry":["layers (A-","Interface","Message examples ","examples "]},{"entry":["B)","Name","(from A to B)","(from B to A)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["logical","IP block API","+ set \u2018LNA_gain\u2019 ","+ LNA1 has"]},{"entry":["architecture",{},"to 20 dB","maximum gain"]},{"entry":["layer -",{},"+ configure connections","of 20 dB"]},{"entry":["physical",{},"to direct","+ Receiver"]},{"entry":["architecture",{},"conversion receiver ","configuration"]},{"entry":["layer",{},"architecture (or","ready"]},{"entry":[{},{},"to low-IF)","+ Synthesizer"]},{"entry":[{},{},{},"settling time ="]},{"entry":[{},{},{},"80 us"]},{"entry":[{},{},{},"+ LNA1"]},{"entry":[{},{},{},"power_consump-"]},{"entry":[{},{},{},"tion = 3 mA"]},{"entry":[{},{},{},"@10 dB of gain"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"The physical architecture layer  model the physical issues associated with each of the RF circuit elements may be for example how to standardise control of the attributes, for example the performance gain, for each RF IP block.","An RF circuit element or block may have zero or more functions which may be controlled and\/or monitored. Examples of attributes which may be controlled\/monitored are:\n\n","The physical architecture layer  thus includes implementation-aware or specific radio frequency circuit block drivers and as described above may define necessary hardware parameters which can be reported as parameters to the logical architecture layer .","The physical architecture layer  may also map controls parameters passed to the layer from the logical architecture layer  to logical register names for implementation in the hardware implementation layer .",{"@attributes":{"id":"p-0106","num":"0113"},"figref":["FIG. 6","FIG. 6"],"b":["305","305","303","601","603","605","607","609","601","603","605"]},"It would be understood by the person skilled in the art that further physical models providing control features for each of IP blocks may use different functions to the examples provided below to control the physical results of the circuits.","The Hardware implementation layer (also known as the layer ) links the physical architecture defined in the in the physical architecture layer  to the RF circuit blocks by means of low level hardware specific drivers. These low level hardware drivers abstract low-level RF implementation details from upper driver layers (that is, the physical architecture layer  and logical architecture layer ) and enable the interface between the RF circuit blocks in a RF software architecture.","The following table illustrates by example the interface between the physical architecture layer  and the hardware implementation layer . The interface enables the physical transfer of values from the physical architecture layer  via the hardware implementation layer  to the registers within the radio frequency circuit blocks which control the operation of the radio frequency circuit block. This interface may be known as the hardware driver application programming interface .",{"@attributes":{"id":"p-0110","num":"0117"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"left"}}],"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Interface",{},{},"Message"]},{"entry":["between","Interface","Message examples ","examples "]},{"entry":["layers (A-B)","Name","(from A to B)","(from B to A)"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["physical","HW Driver","+ write LNA gain = ","+ read RSSI"]},{"entry":["architecture","API","20 dB to register","register value"]},{"entry":["Layer -",{},"\u2018LNA1_gain\u2019","from \u2018RSSI\u2019"]},{"entry":["hardware",{},"(one register has the","(value already"]},{"entry":["implementation",{},"exact logical ","translated to a"]},{"entry":["layer",{},"value of 20 dB ->","useful unit like"]},{"entry":[{},{},"verified earlier)","dB)"]},{"entry":[{},{},"+ read implemented ",{}]},{"entry":[{},{},"register values",{}]},{"entry":[{},{},"of \u2018LNA1_gain\u2019"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"For example the interface may allow the transfer of data from the physical architecture layer  such as the instruction to the hardware implementation layer  to write the gain value to a specific register in an amplifier circuit block or to instruct the hardware implementation layer  to read from a register in the amplifier circuit block. The interface furthermore enables interpreted register values to be passed up to the higher control layers. For example a received signal strength indicator value may be read from a register, be interpreted within the hardware implementation layer and then passed up to the physical architecture layer  for further processing.","The hardware implementation layer  may convert abstract values such as radio HW configuration, gain, power, etc, relating to the IP block models provided in the Logical Architecture layer  and the Physical Architecture layer  to configuration register bit pattern(s) capable of being written to the physical RF circuit blocks.","Furthermore the hardware implementation layer  drivers may provide a consistent interface to the radio frequency circuit blocks, enabling compatible blocks to be easily plugged in and out as part of a flexible and dynamic radio system. The hardware implementation level low level drivers may in some embodiments be considered to be a part of an RF IP circuit block, and may be provided by the designer or vendor of the RF circuit block.","As described above an example of a hardware implementation layer  operation is that of interpreting a required gain value from the physical architecture level  converting the required gain value into a configuration register bit pattern compatible with the control register in the radio frequency circuit block and then passing the register bit pattern to the radio frequency circuit block in order to configure a desired gain setting for the RF circuit block.","The layered HAL configuration enables design and configuration flexibility for architectural changes both in relation to hardware and software. The separation of the HAL in such a way thus advantageously allows development work to be divided between several parties since each party is aware of features of the layer they are required to design for.","The HAL layered presentation furthermore permits flexibility of configuration and control of the RF circuit blocks and allows parts of an RF circuit developed by different parties to be integrated in a modular fashion. It is furthermore possible to introduce new RF circuitry blocks into a existing design without requiring significant redesign of the existing circuit blocks or control layers. Furthermore the separation of the layers enables maintenance of the RF circuit blocks to be performed more conveniently, thus reducing the burden of maintenance. Furthermore such a structure, provided there is at least one redundant module permits the possibility of reconfiguration of radio frequency circuit blocks to overcome circuit failure. Also due to the logical hierarchy the complexity of any specific arrangement may be reduced.","Some advantageous examples of how to utilize the HAL are given in the following.\n\n","Since the number of operational modes and required number of parameter tunings necessary for upcoming multi-radio SDR devices is vast, the HAL provides a convenient approach to implementation.","It should be appreciated that while the embodiment refers to a single radio protocol stack, a control interface can be provided for more than one radio protocol stack using the HAL; that is, realisation of the control interface can, in a logical sense, use the same physical implementation.","It should also appreciated that while the embodiment is described in relation to a single signal processing part of the RF hardware, the invention may be applied using the HAL to more than one such part, irrespective of how such parts are implemented in the RF hardware.","In general, the various embodiments of the invention may be implemented in hardware or special purpose circuits, software, logic or any combination thereof. For example, some aspects may be implemented in hardware, while other aspects may be implemented in firmware or software which may be executed by a controller, microprocessor or other computing device, although the invention is not limited thereto. While various aspects of the invention may be illustrated and described as block diagrams, flow charts, or using some other pictorial representation, it is well understood that these blocks, apparatus, systems, techniques or methods described herein may be implemented in, as non-limiting examples, hardware, software, firmware, special purpose circuits or logic, general purpose hardware or controller or other computing devices, or some combination thereof.","For example the embodiments of the invention may be implemented as a chipset, in other words a series of integrated circuits communicating among each other. The chipset may comprise microprocessors arranged to run code, application specific integrated circuits (ASICs), or programmable digital signal processors for performing the operations described above.","The embodiments of this invention may be implemented by computer software executable by a data processor of the mobile device, such as in the processor entity, or by hardware, or by a combination of software and hardware. Further in this regard it should be noted that any blocks of the logic flow as in the Figures may represent program steps, or interconnected logic circuits, blocks and functions, or a combination of program steps and logic circuits, blocks and functions.","Embodiments of the inventions may be practiced in various components such as integrated circuit modules. The design of integrated circuits is by and large a highly automated process. Complex and powerful software tools are available for converting a logic level design into a semiconductor circuit design ready to be etched and formed on a semiconductor substrate.","Programs, such as those provided by Synopsys, Inc. of Mountain View, Calif. and Cadence Design, of San Jose, Calif. automatically route conductors and locate components on a semiconductor chip using well established rules of design as well as libraries of pre-stored design modules. Once the design for a semiconductor circuit has been completed, the resultant design, in a standardized electronic format (e.g., Opus, GDSII, or the like) may be transmitted to a semiconductor fabrication facility or \u201cfab\u201d for fabrication.","The foregoing description has provided by way of exemplary and non-limiting examples a full and informative description of the exemplary embodiment of this invention. However, various modifications and adaptations may become apparent to those skilled in the relevant arts in view of the foregoing description, when read in conjunction with the accompanying drawings and the appended claims. However, all such and similar modifications of the teachings of this invention will still fall within the scope of this invention as defined in the appended claims."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":["For a better understanding of the present invention, embodiments thereof together with examples of features and operations of the embodiment will now be described, by way of example only, with reference to the accompanying figures in which:",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 5","FIG. 3"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 6","FIG. 3"]}]},"DETDESC":[{},{}]}
