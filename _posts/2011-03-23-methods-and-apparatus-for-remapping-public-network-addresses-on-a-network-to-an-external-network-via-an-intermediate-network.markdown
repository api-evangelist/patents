---
title: Methods and apparatus for remapping public network addresses on a network to an external network via an intermediate network
abstract: Methods and apparatus for remapping IP addresses of a network to endpoints within a different network. A provider network may allocate IP addresses and resources to a customer. The provider network may allow the customer to map an IP address to remap an IP address to an endpoint on the customer's network. When a packet is received from a client addressed to the IP address, the provider network may determine that the IP address has been remapped to the endpoint. The provider network may translate the source and destination addresses of the packet and modify the source address of the packet to indicate the endpoint as the destination, and send the modified packet to the endpoint via the Internetan intermediate network. Response traffic may be routed to the client through the provider network, or may be directly routed to the client by the customer network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08751691&OS=08751691&RS=08751691
owner: Amazon Technologies, Inc.
number: 08751691
owner_city: Reno
owner_country: US
publication_date: 20110323
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","DETAILED DESCRIPTION OF EMBODIMENTS","CONCLUSION"],"p":["Many companies and other organizations operate computer networks that interconnect numerous computing systems to support their operations, such as with the computing systems being co-located (e.g., as part of a local network) or instead located in multiple distinct geographical locations (e.g., connected via one or more private or public intermediate networks). For example, data centers housing significant numbers of interconnected computing systems have become commonplace, such as private data centers that are operated by and on behalf of a single organization, and public data centers that are operated by entities as businesses to provide computing resources to customers. Some public data center operators provide network access, power, and secure installation facilities for hardware owned by various customers, while other public data center operators provide \u201cfull service\u201d facilities that also include hardware resources made available for use by their customers. However, as the scale and scope of typical data centers has increased, the task of provisioning, administering, and managing the physical computing resources has become increasingly complicated.","The advent of virtualization technologies for commodity hardware has provided some benefits with respect to managing large-scale computing resources for many customers with diverse needs, allowing various computing resources to be efficiently and securely shared by multiple customers. For example, virtualization technologies may allow a single physical computing machine to be shared among multiple users by providing each user with one or more virtual machines hosted by the single physical computing machine, with each such virtual machine being a software simulation acting as a distinct logical computing system that provides users with the illusion that they are the sole operators and administrators of a given hardware computing resource, while also providing application isolation and security among the various virtual machines. Furthermore, some virtualization technologies are capable of providing virtual resources that span one or more physical resources, such as a single virtual machine with multiple virtual processors that spans multiple distinct physical computing systems.","While embodiments are described herein by way of example for several embodiments and illustrative drawings, those skilled in the art will recognize that embodiments are not limited to the embodiments or drawings described. It should be understood, that the drawings and detailed description thereto are not intended to limit embodiments to the particular form disclosed, but on the contrary, the intention is to cover all modifications, equivalents and alternatives falling within the spirit and scope as defined by the appended claims. The headings used herein are for organizational purposes only and are not meant to be used to limit the scope of the description or the claims. As used throughout this application, the word \u201cmay\u201d is used in a permissive sense (i.e., meaning having the potential to), rather than the mandatory sense (i.e., meaning must). Similarly, the words \u201cinclude,\u201d \u201cincluding,\u201d and \u201cincludes\u201d mean including, but not limited to.","Various embodiments of methods and apparatus for remapping Internet Protocol (IP) addresses typically mapped to endpoints within a network environment (e.g., a local network or data center) to endpoints within a different network environment (e.g., a different local network or data center) are described. Embodiments of the methods and apparatus for remapping IP addresses of a network to endpoints within a different network may, for example, enable customers of a provider network that provides resources and public IP addresses for accessing those resource to obtain IP addresses provided by the network and to remap the IP addresses to endpoints on the customer's own, external network, referred to herein as a customer network. The network that provides the resources and public IP addresses (referred to herein as a provider network) recognizes packets received on the network that are addressed to a remapped IP address, translates the source and\/or destination addresses, and routes the packets to the endpoint on the customer network rather than to a resource on the provider network. Similarly, the provider network may appropriately translate and route response traffic from an endpoint on a customer network to the correct destination (e.g., a client device). Embodiments may, for example, be implemented in the context of a virtualized service provider that provides virtualized computing resources on a virtualized service provider network to one or more customers via an intermediate network, for example a shared network or a public network such as the Internet.","In this document, a public network may be broadly defined as a network that provides open access to and interconnectivity between a plurality of entities. As noted, the Internet, or World Wide Web (WWW) is an example of a public network. A shared network may be broadly defined as a network to which access is limited to two or more entities, in contrast to a public network to which access is not generally limited. A shared network may, for example, include one or more local area networks (LANs) and\/or data center networks, or two or more LANs or data center networks that are interconnected to form a wide area network (WAN). Examples of shared networks may include, but are not limited to, corporate networks and other enterprise networks. A shared network may be anywhere in scope from a network that covers a local area to a global network. Note that a shared network may share at least some network infrastructure with a public network, and that a shared network may be coupled to one or more other networks, which may include a public network, with controlled access between the other network(s) and the shared network. A shared network may also be viewed as a private network, in contrast to a public network such as the Internet. In embodiments, either a shared network or a public network may serve as an intermediate network between a provider network and a customer network.","Example Provider Network Environment",{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 1","b":["100","110","150","112","116","112","112","100"]},"The virtualized service provider  may also provide public IP addresses  and\/or public IP address ranges (e.g., Internet Protocol version 4 (IPv4) or Internet Protocol version 6 (IPv6) addresses) that customers  may obtain from the provider . Conventionally, the virtualized service provider , via the virtualization services , may allow a customer (e.g., customer A) to dynamically associate at least some public IP addresses  assigned to the customer with particular resource instances  assigned to the customer. The virtualized service provider  may also allow the customer to remap a public IP address , previously mapped to one virtualized computing resource instance  owned by the customer, to another virtualized computing resource instance  that the customer owns. Using the virtualized computing resource instances  and public IP addresses  provided by the virtualized service provider , a customer A may, for example, implement customer-specific applications and present the customer's applications on an intermediate network . A client  on the intermediate network  may then generate traffic to a destination public IP address  published by the customer A; the traffic is routed to the virtualized service provider data center, and at the data center is routed, via a network substrate, to the private IP address  of the virtualized computing resource instance  currently mapped to the destination public IP address . Similarly, response traffic from the virtualized computing resource instance  is routed via the network substrate back onto the intermediate network  to the source client .","Embodiments of the methods and apparatus for remapping IP addresses may, for example, be employed to allow customers , for example customer A, of virtualized service provider  to remap the customer's public IP addresses , conventionally mapped to virtualized resource instances  in the virtualized service provider  data center, to endpoints (e.g., devices ) at the customer's data center or on the customer's local network. After the customer remaps a public IP address  to a device  on the customer's network A, a client  on the intermediate network  may generate traffic to the public IP address ; the traffic, as in the conventional case, is routed to the virtualized service provider  data center. Software and\/or hardware at the virtualized service provider  data center recognizes that the destination public IP address  has been remapped to a device  on the customer A network, and the traffic is routed by the virtualized service provider  software and\/or hardware to the customer A network. In some embodiments, response traffic may be routed from the customer A network back to the virtualized service provider  data center, and software and\/or hardware at the at the virtualized service provider  data center may then route the response traffic back onto the intermediate network  to the source client . In other embodiments, routing of the response traffic to the source client  via the intermediate network  may instead be handled at the customer network A.","In some embodiments, the network traffic to and from a public IP address  that has been remapped to a device  on a customer network A may flow over a private connection, for example a tunnel over the intermediate network  between the customer's data center and the virtualized service provider  data center, or alternatively over a direct connection between the customer's data center and the virtualized service provider  data center. Alternatively, in some embodiments, the network traffic to and from a remapped public IP address  may be routed over the intermediate network  from the virtualized service provider  data center to a device  on a customer network A.","Private IP addresses, as used herein, refer to the internal network addresses of resource instances in a virtualized service provider network. Private IP addresses are only routable within the virtualized service provider network. Network traffic originating outside the virtualized service provider network are not directly routed to private IP addresses; instead, the traffic uses public IP addresses that are mapped to the resource instances. The virtualized service provider network may include network devices or appliances that provide network address translation (NAT) or similar functionality to perform the mapping from public IP addresses to private IP addresses and vice versa.","Public IP addresses, as used herein, are Internet routable network addresses that are assigned to resource instances, either by the virtualized service provider or by the customer. Traffic routed to a public IP address is translated, for example via 1:1 network address translation (NAT), and forwarded to the respective private IP address of a resource instance.","Some public IP addresses may be assigned by the virtualized service provider network infrastructure to particular resource instances; these public IP addresses may be referred to herein as standard public IP addresses, or simply standard IP addresses. In at least some embodiments, the mapping of a standard IP address to a private IP address of a resource instance is the default launch configuration for all a resource instance types.","At least some public IP addresses may be allocated to or obtained by customers of the virtualized service provider; a customer may then assign their allocated public IP addresses to particular resource instances allocated to the customer. These public IP addresses may be referred to herein as customer public IP addresses, or simply customer IP addresses. Instead of being assigned by the virtualized service provider network to resource instances as in the case of standard IP addresses, customer IP addresses may be assigned to resource instances by the customers, for example via an API provided by the virtualized service provider. Unlike standard IP addresses, customer IP Addresses are allocated to customer accounts and can be remapped to other resource instances when necessary or desired. A customer IP address is associated with a customer's account, not a particular resource instance, and the customer controls that address until the customer chooses to release it. Unlike conventional static IP addresses, customer IP addresses allow the customer to mask resource instance or availability zone failures by remapping the customer's public IP addresses to any resource instance associated with the customer's account. The customer IP addresses, for example, enable a customer to engineer around problems with the customer's resource instances or software by remapping customer IP addresses to replacement resource instances.","Example Virtualized Service Provider Network Environments","This section describes example implementations of virtualized service provider network environments in which embodiments of the methods and apparatus for remapping IP addresses may be implemented. While embodiments are generally described herein in the context of a virtualized service provider that provides, to customers over an intermediate network such as the Internet, virtualized computing resource instances and public IP addresses for communicating with those resource instances, embodiments may be adapted to apply in various other network environments that provide resources and network addresses on local networks to external customers.",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 2","FIG. 2"],"b":["200","212","210","200","210","230","230"]},"In at least some embodiments, the IP tunneling technology may map IP overlay addresses (public IP addresses) to substrate IP addresses (private IP addresses), encapsulate the packets in a tunnel between the two namespaces, and deliver the packet to the correct endpoint via the tunnel, where the encapsulation is stripped from the packet. In , an example overlay network tunnel A from a virtual machine (VM) A on host A to a device on the intermediate network  and an example overlay network tunnel B between a VM B on host B and a VM C on host C are shown. In some embodiments, a packet may be encapsulated in an overlay network packet format before sending, and the overlay network packet may be stripped after receiving. In other embodiments, instead of encapsulating packets in overlay network packets, an overlay network address (public IP address) may be embedded in a substrate address (private IP addresses) of a packet before sending, and stripped from the packet address upon receiving. As an example, the overlay network may be implemented using 32-bit IPv4 (Internet Protocol version 4) addresses as the public IP addresses, and the IPv4 addresses may be embedded as part of 128-bit IPv6 (Internet Protocol version 6) addresses used on the substrate network as the private IP addresses.","Referring to , at least some networks in which embodiments may be implemented may include hardware virtualization technology that enables multiple operating systems to run concurrently on a host computer (e.g., hosts A and B of ), i.e. as virtual machines (VMs)  on the hosts . The VMs  may, for example, be rented or leased to customers of a network provider. A hypervisor, or virtual machine monitor (VMM) , on a host  presents the VMs  on the host with a virtual platform and monitors the execution of the VMs . Each VM  may be provided with one or more private IP addresses; the VMM  on a host  may be aware of the private IP addresses of the VMs  on the host. A mapping service  may be aware of all network IP prefixes and the IP addresses of routers or other devices serving IP addresses on the local network. This includes the IP addresses of the VMMs  serving multiple VMs . The mapping service  may be centralized, for example on a server system, or alternatively may be distributed among two or more server systems or other devices on the network. A network may, for example, use the mapping service technology and IP tunneling technology to, for example, route data packets between VMs  on different hosts  within the data center  network; note that an interior gateway protocol (IGP) may be used to exchange routing information within such a local network.","In addition, a network such as the virtualized service provider data center  network (which is sometimes referred to as an autonomous system (AS)) may use the mapping service technology, IP tunneling technology, and routing service technology to route packets from the VMs  to Internet destinations, and from Internet sources to the VMs . Note that an external gateway protocol (EGP) or border gateway protocol (BGP) is typically used for Internet routing between sources and destinations on the Internet.  shows an example data center  implementing a network that provides hardware virtualization technology and that provides full Internet access via edge router(s)  that connect to Internet transit providers, according to at least some embodiments. The network may implement IP tunneling technology, mapping service technology, and a routing service technology to, for example, route packets from the VMs  on hosts  in data center  to Internet destinations, and from Internet sources to the VMs . Internet sources and destinations may, for example, include computing systems  connected to the intermediate network  and computing systems  connected to local networks  that connect to the intermediate network  (e.g., via edge router(s)  that connect the network  to Internet transit providers). The virtualized service provider data center  network may also route packets from a VM  on a host  in data center  to other VMs  on the same host or on other hosts  in data center .","A network provider that provides data center  may also provide additional data center(s)  that include hardware virtualization technology similar to data center  and that may also be connected to intermediate network . Packets may be forwarded from a VM  on a host  in data center  to another VM on another host in another, similar data center , and vice versa.","While the above describes hardware virtualization technology that enables multiple operating systems to run concurrently on host computers as virtual machines (VMs) on the hosts, where the VMs may be rented or leased to customers of the network provider, the hardware virtualization technology may also be used to provide other computing resources, for example storage resources, as virtual resources to customers of a network provider in a similar manner.",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 3","b":["360","362","362","300","350","362","300","362","362"]},"Virtualized service provider  may provide a virtual service customer , for example coupled to intermediate network  via local network , the ability to implement virtual computing systems  via hardware virtualization service  coupled to intermediate network  and to the local network of virtualized service provider . In some embodiments, hardware virtualization service  may provide an API , for example a web services interface, via which virtualized service customer  may access functionality provided by the hardware virtualization service , for example via a console . In at least some embodiments, at the virtual service provider , each virtual computing system  at customer  may correspond to a computation resource  that is leased, rented, or otherwise provided to virtualized service customer .","From an instance of a virtual computing system  and\/or another customer device  or console , the customer may access the functionality of storage virtualization service , for example via an API , to access data from and store data to a virtual data store  provided by the virtualized service provider . In some embodiments, a virtualized data store gateway (not shown) may be provided at the virtualized service customer  that locally caches at least some data, for example frequently accessed or critical data, and that communicates with virtualized data store service  via one or more communications channels to upload new or modified data from a local cache so that the primary store of data (virtualized data store ) is maintained. In at least some embodiments, a user, on a virtual computing system  and\/or on another customer device , may mount and access virtual data store  volumes, which appear to the user as local virtualized storage .",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 4","b":["410","400","452","450","424","422","410","450","442","442","440","442","410","450","410","400","424","422","410","426","410","418","466","400","400","410","442","402","410","456","450","410","420","426","410","444","440","426","400","400","444","440","444"]},"While  shows client  as a client on intermediate network  and external to virtual service provider  network, a client may be an entity on virtual service provider  network. For example, one of the resource instances provided by the virtualized service provider  may be a client that sends traffic to a public IP address  published by the customer.","Embodiments of the methods and apparatus for remapping IP addresses may be implemented in a customer's virtualized private network as illustrated in  to enable the remapping of public IP addresses assigned to the customer's virtualized private network to devices on the customer's external network, for example as illustrated in .","Remapping Public IP Address on a Network to External Endpoints","In embodiments of the methods and apparatus for remapping IP addresses, a virtualized service provider provides resource instances and customer-assignable public IP addresses (referred to herein as customer IP addresses) to customers, and provides a method or methods (e.g., via an API) via which a customer may assign their customer IP addresses to particular resource instances owned by the customer; in addition, the customer may reassign customer IP addresses to different resource instances. The virtualized service provider maintains a mapping of customer IP addresses to private IP addresses of the resource instances. In addition, the virtualized service provider may provide a method or methods (e.g., via an API) via which the customer may instead assign a customer IP address to a device or endpoint on the customer's own external network, for example in the customer's data center, rather than to a resource instance on the virtualized service provider network. In addition to the mapping of customer IP addresses to private IP addresses of the resource instances, the virtualized service provider may maintain a mapping of the customer IP addresses to the customer endpoints.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 5","FIG. 3"],"b":["500","394","500","500"]},"Traffic Routing Techniques","Various embodiments of traffic routing techniques are described that may be implemented to route client traffic sent to a customer IP address on a provider network to and from an endpoint in a customer's external network. The traffic routing techniques may, for example, differ with respect to which entity (the provider or the customer) handles routing response traffic to the client, and with respect to the communications technique employed between the provider network and the customer network.  illustrate different techniques in which different entities handle routing response traffic from the customer network to the client according to various embodiments, and  illustrate different techniques for communications between the provider network and the customer network according to various embodiments.",{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 6A","b":["610","610","600","600","620","600","600","600","610","610","610","610","600","620"]},{"@attributes":{"id":"p-0054","num":"0053"},"figref":["FIG. 6B","FIG. 6A"],"b":["610","610","600","600","620","600","600","620","610","610","620","600","610","610","610","610","620"]},{"@attributes":{"id":"p-0055","num":"0054"},"figref":["FIGS. 7A and 7B","FIG. 6A","FIG. 7A","FIG. 4"],"b":["700","720","700"]},"In , the communications channel between the provider network  and the customer network  is over an intermediate network, such as the public Internet. In this case, a private communications channel is not used to send packets between the provider network  and the customer network . Instead, the packets are sent onto an intermediate network, for example the Internet, e.g. as standard IPv4 or IPv6 packets, and are routed by standard network routing to the destination address. Instead of encapsulating the packets received from the client  according to a tunneling protocol, the source and destination addresses of the packets may be modified so that the packets can be routed from the provider network  to the endpoint on the customer network .",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIGS. 7C and 7D","FIG. 6B","FIG. 7C","FIG. 7A","FIG. 7D","FIG. 7B"],"b":["700","720","720","710","700","720","720","710"]},"While  show communications between the client  and the provider network  as over the public network, it is noted that this communications may be over some other communications channel, for example over a private communications channel. The private communications channel may be implemented over an intermediate network according to a tunneling technique or some other peering technique. Alternatively, a private communications channel  may be implemented over a direct, dedicated connection between a customer private network and customer network. In addition, while  show communications between the customer network  and the client  as over the public network, it is noted that this communications may also be over some other communications channel, for example over a private communications channel.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":["FIGS. 8 through 10","FIGS. 2 through 4","FIGS. 8 through 10"]},{"@attributes":{"id":"p-0060","num":"0059"},"figref":"FIG. 8","b":["810","800","810","850","822","840","822","810","850","822","820","810","820","850"]},"Provider network  may include one or more network devices or appliances that implement instances of translators that provide network address translation (NAT) or similar functionality for appropriately routing packets on the provider network . In , these translator devices are shown as translators A and B. The translators  may, for example, perform mapping of addresses on provider network , for example mapping from destination public IP addresses for incoming IP traffic from intermediate network  to the private IP addresses of devices and resource instances on the provider network , and vice versa. To perform the mapping, translators  may access or obtain mapping information . In some embodiments, mapping information  may be maintained by and obtained from a mapping service , as shown in . At least one translator (e.g., translator A) may be assigned to translate traffic coming into and out of customer private network .","A range of public IP addresses may be allocated to the customer private network  as customer IP addresses. The customer may assign particular customer IP addresses to particular resource instances in private network . In addition, the customer may assign or remap particular customer IP addresses to endpoints on customer network , such as example customer endpoint .  shows an example user interface to an API that allows the customer to assign and remap customer IP addresses to resource instances or customer endpoints. The provider network  may maintain mapping information  that includes mappings of the customer IP addresses to respective customer endpoints, as well as mappings of customer IP addresses to respective private IP addresses of resource instances on the provider network  allocated to the customer.","Client  sends a packet (e.g., an IPv4 or IPv6 packet), via the intermediate network , to a public IP address assigned to the customer.  illustrates an example IP packet from client . The header of the IP packet from client  indicates the client address as the source address and a customer IP address assigned to the customer as the destination address. At provider network , a translator A may receive the packet, and may access mapping information  to determine that the customer IP address indicated by the packet has been remapped by the customer to a customer endpoint  on customer network , and thus external to the provider network . In at least some embodiments, translator A may encapsulate or otherwise encode the packet from the client  for transmission over customer private network , for example as an overlay network packet according to an IP tunneling protocol used on provider network  (see ). The encoded packet may indicate a network substrate address of another translator B. An example packet for transmission over customer private network  is illustrated in . Note that, while  shows the encoded packet as including the source client IP address and destination customer IP address, in some embodiments the packet header may be stripped from the packet from client  prior to encoding. Translator A may then send the encoded packet to translator B via the customer private network . Note that translator A and translator B may be different instances of a translator, or may be the same instance.","A path over the customer private network  via which the packet is routed may include one or more network appliances that may apply networking functions to packets that are routed through the network appliances. The network appliances may include one or more of, but are not limited to, firewalls, packet inspection appliances, security appliances, acceleration caches, and load balancers. Thus, a customer may have network appliances on the customer private network  that perform various functions on traffic passing through the customer private network  between client devices  and the customer's external network .","Upon receiving the overlay network packet, translator B may, if necessary, strip the provider network  encapsulation from the packet, apply a translation to the destination customer IP address of the packet from client  to determine the customer endpoint address to which the customer IP address is mapped, and encode the packet from client  for transmission on the private communications channel . In some embodiments, encoding the packet may involve encapsulating the packet from client  according to an encapsulation format or protocol of the private communications channel . However, other methods for encoding the packet may be used. Alternatively, gateway A may perform the encoding of the packet from client .  illustrates an example packet encoded according to a format or protocol that may be used on private communications channel . In at least some embodiments, in applying the translation to the destination customer IP address, translator B may access mapping information  to determine the particular customer endpoint address to which the destination customer IP address is mapped. In a header of the private communications channel packet, the source address may be set to indicate a virtualized service provider address, for example an address of translator B. The destination address in the header of the private communications channel packet may be set to indicate the customer endpoint  address. The encoded packet is then sent through intermediate network , via the private communications channel  between gateways A and B, to the customer network . Note that, while  shows translator B and gateway A as separate entities, in some embodiments translator B may be a component of gateway A.","At customer network , the packet may be received at gateway B via private communications channel  and routed to a customer endpoint  over customer network . The packet may indicate an endpoint on the provider  network as the source address and the customer endpoint  as the destination address. In some embodiments, gateway B may strip the private communications channel  encapsulation from the packet before routing the packet to customer endpoint  over customer network . In some embodiments, gateway B may encode the packet according to a network protocol used on customer network  before routing the packet over customer network , or may perform some other action on the packet related to a network protocol used on customer network .","After receiving the packet, customer endpoint  may perform some function or action in response to the packet that generates one or more response packets. A response packet may be encoded for transmission on the private communications channel . In some embodiments, a response packet may be encapsulated, for example by gateway B, according to a private communications channel  protocol. The encoded response packet may indicate the endpoint on the virtualized service provider  network as the destination address and the customer endpoint  as the source address. The encoded response packet is then sent through intermediate network , via the private communications channel  between gateways B and A, to the provider network . At provider network , the encoded response packet may be received at gateway A via private communications channel . The encoded response packet may be passed to translator B.","At translator B, in some embodiments, the private communications channel  encapsulation may be stripped from the response packet. In at least some embodiments, translator B may encode the response packet according to a network protocol of provider network  for transmission over customer private network , for example as an overlay network packet according to an IP tunneling protocol used on provider network  (see ). The encoded response packet may indicate a destination network substrate address of translator A. Translator B may then send the encapsulated packet to translator A via the customer private network .","A path over the customer private network  via which the response packet is routed may include one or more network appliances that may apply networking functions to packets that are routed through the network appliances. The network appliances may include one or more of, but are not limited to, firewalls, packet inspection appliances, security appliances, acceleration caches, and load balancers. Thus, a customer may have network appliances on the customer private network  that perform various functions on traffic passing through the customer private network  between the customer's external network  and client devices .","At translator A, the provider network encapsulation, if any, may be stripped from the response packet, and an IP response packet may be formed that includes a packet body and a packet header that indicates the client address as the destination address and the customer IP address assigned to the customer as the source address.  illustrates an example IP response packet. In at least some embodiments, translator A may access mapping information  to translate address information from the encapsulated response packet received from translator B into the address information for the packet header of the IP response packet. The IP response packet is then sent to the client  via the intermediate network . From the perspective of client , it appears as if the client  is communicating with the public IP address of the customer on provider network . However, the client  has actually communicated with the endpoint  on customer network .","In the embodiment as illustrated in , response packets are sent from the customer network  to the provider network , which then handles routing of the response packets to client . This traffic routing technique is illustrated in . However, in some implementations, the customer may instead handle the routing of the response traffic to client , as in the traffic routing technique illustrated in . In these implementations, customer network  is responsible for mapping or translating from the source and destination addresses of the packets received from provider network  via private communications channel  to the client  address and the public IP address of the original packets sent from client  to provider network  so that the response packets sent from customer network  to client  indicate the client  as the destination address and the original public IP address as the source address.","In the embodiment as illustrated in , provider network packets are passed between translator A and translator B over the customer private network . The provider network packets may encode either packets sent from client  to a customer IP address that are being remapped to customer endpoint , or response packets from customer endpoint  that are being returned to client . The portion of the customer private network  through which these virtualized service provider network packets are routed may include one or more network appliances that are part of customer private network . These network appliances may be configured to apply various networking functions to customer private network  traffic. Thus, the various networking functions that may be applied to customer private network  traffic by these network appliances may be applied to the provider network packets passed between translator A and translator B as illustrated in . Examples of network appliances that implement network functions that may be applied to the packets passed between translator A and translator B include, but are not limited to, firewalls, virus checkers or other inspection appliances, appliances that implement security services, appliances that perform intrusion detection, acceleration caches, load balancers, and in general any networking function that may be performed on network traffic by a network device or appliance.",{"@attributes":{"id":"p-0073","num":"0072"},"figref":["FIG. 9","FIG. 5"],"b":["900","900","950","952","900","904","900"]},"Client  sends a packet (e.g., an IPv4 or IPv6 packet), via the intermediate network , to a public IP address assigned to the customer.  illustrates an example IP packet from client . The header of the IP packet from client  indicates the client address as the source address and a customer IP address assigned to the customer as the destination address. At provider network , a translator  may receive the packet, and may access mapping information  to determine that the customer IP address indicated by the packet has been remapped by the customer to a customer endpoint  on customer network , and thus external to the provider network . Translator  may encode the packet from client  for transmission on the private communications channel . In some embodiments, encoding the packet may involve encapsulating the packet from client  according to a protocol for sending packets over the intermediate network  in a private communications channel  or tunnel. Example protocols that may be used in some embodiments for the private communications channel  include, but are not limited to, GRE (Generic Routing Encapsulation), IP in IP, and IPsec (Internet Protocol Security). However, other methods for encoding the packet may be used. In addition, a private communications channel  may be implemented over a direct, dedicated connection between a customer private network  and customer network .  illustrates an example packet encoded according to a format or protocol that may be used on private communications channel . In at least some embodiments, in applying the translation to the destination customer IP address, translator  may access mapping information  to determine the particular customer endpoint address to which the destination customer IP address is mapped. In a header of the private communications channel packet, the source address may be set to indicate a virtualized service provider address, for example an address of translator . The destination address in the header of the private communications channel packet may be set to indicate the customer endpoint  address. The encapsulated packet is then sent through intermediate network , via the private communications channel , to the customer network .","At customer network , the encoded packet may be received via private communications channel  and routed to a customer endpoint  over customer network . The encoded packet may indicate an endpoint on the virtualized service provider  network as the source address and the customer endpoint  as the destination address. In some embodiments, the private communications channel  encapsulation may be stripped from the packet before routing the packet to customer endpoint  over customer network . In some embodiments, the packet may be encoded according to a network protocol used on customer network  before routing the packet over customer network .","After receiving the packet, customer endpoint  may perform some function or action in response to the packet that generates one or more response packets. A response packet may be encoded for transmission on the private communications channel . In some embodiments, a response packet may be encapsulated according to the private communications channel  protocol. The encoded response packet may indicate the endpoint on the virtualized service provider  network as the destination address and the customer endpoint  as the source address. The encoded response packet may then be sent through intermediate network , via a private communications channel , to the provider network . Alternatively, a private communications channel  may be implemented over a direct, dedicated connection between customer private network  and customer network . At provider network , the encoded response packet may be routed to or received at translator .","At translator , in some embodiments, the private communications channel  encapsulation may be stripped from the response packet, and an IP response packet may be formed that includes a packet body and a packet header that indicates the client address as the destination address and the customer IP address assigned to the customer as the source address.  illustrates an example IP response packet. In at least some embodiments, translator  may access mapping information  to translate address information from the encapsulated response packet received from customer network  into the address information for the packet header of the IP response packet. The IP response packet is then sent to the client  via the intermediate network . From the perspective of client , it appears as if the client  is communicating with the public IP address of the customer on provider network . However, the client  has actually communicated with the endpoint  on customer network .","In the embodiment as illustrated in , response packets are sent from the customer network  to the provider network , which then handles routing of the response packets to client . This traffic routing technique is illustrated in . However, in some implementations, the customer may instead handle the routing of the response traffic to client , as in the traffic routing technique illustrated in . In these implementations, customer network  is responsible for mapping or translating from the source and destination addresses of the packets received from provider network  via private communications channel  to the client  address and the public IP address of the original packets sent from client  to provider network  so that the response packets sent from customer network  to client  indicate the client  as the destination address and the original public IP address as the source address.",{"@attributes":{"id":"p-0079","num":"0078"},"figref":["FIG. 10","FIGS. 8 and 9"],"b":["1000","1052","1050","1050","1030","1040","1052"]},"A range of public IP addresses may be allocated to a customer of the provider network  as customer IP addresses. The customer may assign particular customer IP addresses to particular resource instances on provider network . In addition, the customer may assign or remap particular customer IP addresses to endpoints on customer network , such as example customer endpoint .  shows an example user interface to an API that allows the customer to assign and remap customer IP addresses to resource instances or customer endpoints. The provider network  may maintain mapping information  that includes mappings of the customer IP addresses to respective customer endpoints, as well as mappings of customer IP addresses to respective private IP addresses of resource instances on provider network  allocated to the customer.","Client  sends a packet (e.g., an IPv4 or IPv6 packet), via the intermediate network , to a public IP address assigned to the customer.  illustrates an example IP packet received from client . The header of the IP packet from client  indicates the client address as the source address and a customer IP address assigned to the customer as the destination address. At provider network , a translator  may receive the packet, and may access mapping information  to determine that the customer IP address indicated by the packet has been remapped by the customer to a customer endpoint  on customer network , and thus external to the provider network . Translator  may then translate the customer IP address to the particular customer endpoint address. In at least some embodiments, in translating the customer IP address, translator  may access mapping information  to determine the particular customer endpoint address to which the destination customer IP address is mapped.","In at least some embodiments, translator  may replace the destination address in the IP packet (e.g., an IPv4 or IPv6 packet) received from client  (the customer IP address) with the customer endpoint address to which the customer IP address has been mapped. In some embodiments, translator  may also replace the source address in the IP packet received from client  (the client IP address) with a provider network address (e.g., a public IP address assigned to translator ). The IP packet is then sent through intermediate network  to the customer network .",{"@attributes":{"id":"p-0083","num":"0082"},"figref":["FIGS. 13A and 13B","FIG. 13A","FIG. 13B","FIG. 13A","FIG. 6A","FIG. 13B","FIG. 6B"],"b":["1030","1050","1000","1050","1030","1040"]},"In some embodiments, instead of replacing one or more of the addresses in the IP packet, translator  may instead convert the packet from one IP packet format to another, as illustrated in . For example, the packet received from the client  may be an IPv4 packet. Translator  may form an IPv6 packet, and embed the IPv4 source address from the original IP packet in the IPv6 source address. IPv4 addresses are 32 bit addresses, while IPv6 addresses are 128 bit addresses so the source address (the client IP address) may be embedded as 32 bits of the 128-bit IPv6 packet header source address. The destination address in the header of the IPv6 packet may be set to indicate the customer endpoint  IPv6 address. The IPv6 packet is then sent through intermediate network  to the customer network .","At customer network , the IP packet may be received and routed to customer endpoint  over customer network . The IP packet the customer endpoint  as the destination address. As noted above, in some embodiments, the IP packet may also indicate an endpoint on the provider network  as the source address; however, in other embodiments, the IP packet may indicate the client  as the source address. In some embodiments, the packet may be encoded according to a network protocol used on customer network  before routing the packet over customer network .","After receiving the IP packet (e.g., and IPv4 or IPv6 packet), customer endpoint  may perform some function or action in response to the IP packet that generates one or more response packets. A response IP packet may be formed according to the IP protocol (IPv4 or IPv6). In some implementations, the response IP packet may indicate an endpoint on the provider network  as the destination address and the customer endpoint  as the source address. The response IP packet is then sent through intermediate network  to the provider network . At provider network , the response packet may be routed to or received at translator .","At translator , the source and addresses from the response IP packet received from the customer network  may be translated according to mapping information  to obtain the client address as the destination address and the customer IP address as the source address. The source and destination addresses in the response IP packet may be changed, or a new IP packet may be formed, so that the IP packet header indicates the client address as the destination address and the customer IP address assigned to the customer as the source address. The response IP packet is then sent to the client  via the intermediate network .  illustrates an example response IP packet that may be sent to the client . From the perspective of client , it appears as if the client  is communicating with the public IP address of the customer on provider network . However, the client  has actually communicated with the endpoint  on customer network .","In the embodiment as illustrated in , response IP packets are sent from the customer network  to the provider network , which then handles routing of the response IP packets to client . This traffic routing technique is illustrated in . However, in some implementations, the customer may instead handle the routing of the response traffic to client , as in the traffic routing technique illustrated in . In these implementations, customer network  is responsible for mapping or translating from the source and destination addresses of the IP packets received from provider network  to the client  address and the public IP address of the original IP packets sent from client  to provider network  so that the response IP packets sent from customer network  to client  indicate the client  as the destination address and the original public IP address as the source address. Note, however, that in implementations where only the destination address of the IP packet from the client  is changed by the provider network , customer network  may only have to translate the destination address in the IP packet received from provider network  to determine the original public IP address as the source address, as the source address in the IP packet is the client address.","In some embodiments, a provider network such as provider networks , , and  illustrated in  may be a virtualized service provider network that provides virtualized resource instances on the network to the customers of the virtualized service provider network. The virtualized resource instances may include, for example, virtualized computation resources and virtualized storage resources. The virtualized service provider network may assign subsets of the plurality of resource instances to the customers as customer resource instances. In some embodiments, as illustrated in , a virtualized service provider network may include at least one customer private network, each customer private network including a subset of resource instances assigned to a respective customer.",{"@attributes":{"id":"p-0090","num":"0089"},"figref":"FIG. 15A","b":["1500","1502"]},"As indicated at , a packet may be received on the provider network from a client device. The packet may, for example, be an IPv4 or IPv6 packet. The packet may indicate a customer IP address as a destination address and an IP address of the client device as a source address. The provider network may determine, from the mapping information, that the destination address of the packet is mapped to an endpoint on a customer network external to the provider network, as indicated at . The provider network may translate the destination address of the packet to determine a network address of the endpoint on the customer network, as indicated at . The provider network may encode the packet for transmission over a private communications channel, as indicated at . In some embodiments, the packet may be encapsulated according to a private communications channel protocol to generate an encapsulated packet indicating the network address of the endpoint on the customer network as a destination address. The encoded packet may also indicate a network address of a network device on the provider network as a source address. The provider network may then send the encoded packet to the customer network via a private communications channel, as indicated at . The private communications channel may be a tunnel implemented according to a network tunneling technology or some other peering connection over an intermediate network. The intermediate network may, for example, be a shared network or a public network such as the Internet. Alternatively, the private communications channel may be implemented over a direct, dedicated connection between the provider network and the customer network.","In some embodiments, a first network device of the provider network receives the packet from the client device, determines that the destination address of the packet is mapped to an endpoint on a customer network external to the provider network, and sends the packet to a second network device of the provider network over a customer private network on the provider network. In some embodiments, the first network device encodes the packet according to a network protocol of the provider network to form a provider network packet and sends the provider network packet to the second network device over the network substrate of the provider network. The second network device then translates the destination address of the packet, encodes the packet for transmission over the private communications channel, and sends the encoded packet to the customer network via the private communications channel. In some embodiments, a path over the customer private network via which the packet is sent from the first network device to the second network device may include one or more network appliances that may apply one or more networking functions, for example firewalls, packet inspection appliances, security appliances, acceleration caches, and load balancers, to packets passing through the network appliances.","In some embodiments, the provider network may be a virtualized service provider network that provides virtualized resource instances on the network to the customers of the virtualized service provider network. The virtualized resource instances may include, for example, virtualized computation resources and virtualized storage resources. The virtualized service provider network may assign subsets of the plurality of resource instances to the customers as customer resource instances. In some embodiments, as illustrated in , a virtualized service provider network may include at least one customer private network, each customer private network including a subset of resource instances assigned to a respective customer.","In at least some embodiments, the virtualized service provider network may implement at least one virtualization service and at least one API to the virtualization service(s). A customer may access the at least one API from a device on the customer network to, for example, obtain a subset of the plurality of public IP addresses as customer IP addresses, obtain a subset of the plurality of resource instances on the provider network as customer resource instances, map the customer IP addresses obtained by the customer to particular customer resource instance obtained by the customer, and remap the customer IP addresses obtained by the customer to particular endpoints on the customer network.",{"@attributes":{"id":"p-0095","num":"0094"},"figref":"FIG. 15B","b":["1550","1552","1554","1556"]},{"@attributes":{"id":"p-0096","num":"0095"},"figref":"FIG. 16A","b":["1600","1602"]},"As indicated at , a packet may be received on the provider network from a client device. The packet may, for example, be an IPv4 or IPv6 packet. The packet may indicate a customer IP address as a destination address and an IP address of the client device as a source address. The provider network may determine, from the mapping information, that the destination address of the packet is mapped to an endpoint on a customer network external to the provider network, as indicated at . The provider network may translate the destination address of the packet to determine a network address of the endpoint on the customer network, as indicated at . The provider network may then modify the destination address in the packet to indicate the network address of the endpoint on the customer network, as indicated at . Optionally, the provider network may also change the source address in the packet to indicate a network address on the provider network, as indicated at .  and B and  illustrate different methods for modifying the destination and\/or source addresses of the packet that may be used in various embodiments. The provider network may then transmit the packet to the customer network via an intermediate network, as indicated at . The intermediate network may, for example, be a shared network or a public network such as the Internet.","In some embodiments, the provider network is a virtualized service provider network that provides virtualized resource instances on the network to the customers of the virtualized service provider network. The virtualized resource instances may include, for example, virtualized computation resources and virtualized storage resources. The virtualized service provider network may assign subsets of the plurality of resource instances to the customers as customer resource instances. In some embodiments, as illustrated in , a virtualized service provider network may include at least one customer private network, each customer private network including the subset of resource instances assigned to a respective customer.","In at least some embodiments, the virtualized service provider network may implement at least one virtualization service and at least one API to the virtualization service(s). A customer may access the at least one API from a device on the customer network to, for example, obtain a subset of the plurality of public IP addresses as customer IP addresses, obtain a subset of the plurality of resource instances on the provider network as customer resource instances, map the customer IP addresses obtained by the customer to particular customer resource instance obtained by the customer, and remap the customer IP addresses obtained by the customer to particular endpoints on the customer network.",{"@attributes":{"id":"p-0100","num":"0099"},"figref":"FIG. 16B","b":["1650","1652","1654","1656"]},"Example Use Cases","This section describes several example use cases or applications for embodiments of the methods and apparatus for remapping IP addresses.","Failures and Disaster Recovery","A customer may wish to use the virtualization services provided by a virtualized service provider as a backup for the customer's systems at the customer's data center. The customer may obtain resource instances and public IP addresses from the virtualized service provider. The customer may also set up a private network on the virtualized service provider network, for example as illustrated in , and configure the private network as a backup for the customer network at the customer's data center. Using an embodiment of the methods and apparatus for remapping IP addresses, the customer may remap the public IP addresses obtained from the virtualized service provider network to endpoints on the customer network. Thus, during normal operations, traffic from the customer's clients is routed to the customer endpoints on the customer network. If a portion or all of the customer's network fails for some reason, the customer may, via a user interface to an API as illustrated in , quickly and easily remap the public IP addresses to resource instances on the customer's private network. Within seconds or minutes, the virtualized service provider network is routing traffic from the customer's clients to the virtualized service provider resource instances on the customer's private network.","Migration","A customer may wish to replace a portion or all of a system or application implemented at the customer's data center with an implementation at the virtualized service provider network. The customer may obtain resource instances and public IP addresses from the virtualized service provider. The customer may also set up a private network on the virtualized service provider network, for example as illustrated in , and configure the private network as a replacement for a portion or all of system or application at the customer's data center. Using an embodiment of the methods and apparatus for remapping IP addresses, the customer may initially remap the public IP addresses obtained from the virtualized service provider network to endpoints on the customer network. The customer may then, over time, remap public IP addresses to the customer's resource instances on the virtualized service provider network. The customer may remap the public IP addresses to the resource instances one at a time rather than all at one time, thus allowing the customer to incrementally test the configuration before committing to the entire migration.","IPv4 Address Space Acquisition.","As a 32-bit address scheme, IPv4 address space is a limited resource. A virtualized service provider may obtain a relatively large allocation of IPv4 address space for allocation as public IP addresses to customers. To obtain IPv4 address space for a customer network, the customer may obtain a range of IPv4 addresses from the virtualized service provider and remap the IPv4 addresses to endpoints on the customer network. Note that, in this example, the customer may, but does not necessarily, also obtain resource instances from the virtualized service provider.","Network Traffic Processing","A customer may wish to use the services provided by a virtualized service provider to process network traffic to and from the customer's systems at the customer's data center. The customer may obtain resource instances and public IP addresses from the virtualized service provider. The customer may also set up a private network on the virtualized service provider network. The customer may remap at least some the public IP addresses obtained from the virtualized service provider network to endpoints on the customer network. The portion of the virtualized service provider network substrate through which network traffic to these endpoints is routed may include one or more network devices or appliances that are allocated to the customer's private network. These network devices may be configured to perform various networking functions on the customer's traffic. Examples of networking tasks that may be applied to the traffic on the private network include, but are not limited to, firewalls, virus checkers or other inspection devices, security services, intrusion detection systems, acceleration caches, load balancers, and in general any networking function that may be performed on network traffic by a network device or appliance.","Illustrative System","In at least some embodiments, a server that implements a portion or all of one or more of the technologies, including but not limited to the various virtualized service provider methods and apparatus and the methods and apparatus for remapping public IP addresses as described herein, may include a general-purpose computer system that includes or is configured to access one or more computer-accessible media, such as computer system  illustrated in . In the illustrated embodiment, computer system  includes one or more processors  coupled to a system memory  via an input\/output (I\/O) interface . Computer system  further includes a network interface  coupled to I\/O interface .","In various embodiments, computer system  may be a uniprocessor system including one processor , or a multiprocessor system including several processors  (e.g., two, four, eight, or another suitable number). Processors  may be any suitable processors capable of executing instructions. For example, in various embodiments, processors  may be general-purpose or embedded processors implementing any of a variety of instruction set architectures (ISAs), such as the x86, PowerPC, SPARC, or MIPS ISAs, or any other suitable ISA. In multiprocessor systems, each of processors  may commonly, but not necessarily, implement the same ISA.","System memory  may be configured to store instructions and data accessible by processor(s) . In various embodiments, system memory  may be implemented using any suitable memory technology, such as static random access memory (SRAM), synchronous dynamic RAM (SDRAM), nonvolatile\/Flash-type memory, or any other type of memory. In the illustrated embodiment, program instructions and data implementing one or more desired functions, such as those methods, techniques, and data described above for virtualized service provider methods and apparatus and the methods and apparatus for remapping public IP addresses, are shown stored within system memory  as code  and data .","In one embodiment, I\/O interface  may be configured to coordinate I\/O traffic between processor , system memory , and any peripheral devices in the device, including network interface  or other peripheral interfaces. In some embodiments, I\/O interface  may perform any necessary protocol, timing or other data transformations to convert data signals from one component (e.g., system memory ) into a format suitable for use by another component (e.g., processor ). In some embodiments, I\/O interface  may include support for devices attached through various types of peripheral buses, such as a variant of the Peripheral Component Interconnect (PCI) bus standard or the Universal Serial Bus (USB) standard, for example.","In some embodiments, the function of I\/O interface  may be split into two or more separate components, such as a north bridge and a south bridge, for example. Also, in some embodiments some or all of the functionality of I\/O interface , such as an interface to system memory , may be incorporated directly into processor .","Network interface  may be configured to allow data to be exchanged between computer system  and other devices  attached to a network or networks , such as other computer systems or devices as illustrated in , for example. In various embodiments, network interface  may support communication via any suitable wired or wireless general data networks, such as types of Ethernet network, for example. Additionally, network interface  may support communication via telecommunications\/telephony networks such as analog voice networks or digital fiber communications networks, via storage area networks such as Fibre Channel SANs, or via any other suitable type of network and\/or protocol.","In some embodiments, system memory  may be one embodiment of a computer-accessible medium configured to store program instructions and data as described above for  for implementing embodiments of virtualized service provider methods and apparatus and the methods and apparatus for remapping public IP addresses. However, in other embodiments, program instructions and\/or data may be received, sent or stored upon different types of computer-accessible media. Generally speaking, a computer-accessible medium may include non-transitory storage media or memory media such as magnetic or optical media, e.g., disk or DVD\/CD coupled to computer system  via I\/O interface . A non-transitory computer-accessible storage medium may also include any volatile or non-volatile media such as RAM (e.g. SDRAM, DDR SDRAM, RDRAM, SRAM, etc.), ROM, etc, that may be included in some embodiments of computer system  as system memory  or another type of memory. Further, a computer-accessible medium may include transmission media or signals such as electrical, electromagnetic, or digital signals, conveyed via a communication medium such as a network and\/or a wireless link, such as may be implemented via network interface .","Various embodiments may further include receiving, sending or storing instructions and\/or data implemented in accordance with the foregoing description upon a computer-accessible medium. Generally speaking, a computer-accessible medium may include storage media or memory media such as magnetic or optical media, e.g., disk or DVD\/CD-ROM, volatile or non-volatile media such as RAM (e.g. SDRAM, DDR, RDRAM, SRAM, etc.), ROM, etc, as well as transmission media or signals such as electrical, electromagnetic, or digital signals, conveyed via a communication medium such as network and\/or a wireless link.","The various methods as illustrated in the Figures and described herein represent exemplary embodiments of methods. The methods may be implemented in software, hardware, or a combination thereof. The order of method may be changed, and various elements may be added, reordered, combined, omitted, modified, etc.","Various modifications and changes may be made as would be obvious to a person skilled in the art having the benefit of this disclosure. It is intended to embrace all such modifications and changes and, accordingly, the above description to be regarded in an illustrative rather than a restrictive sense."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIGS. 6A and 6B"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIGS. 7A through 7D"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 11A"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 11B"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 12A"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 12B"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 13A"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 13B"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 15A"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 15B"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 16A"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 16B"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 17"}]},"DETDESC":[{},{}]}
