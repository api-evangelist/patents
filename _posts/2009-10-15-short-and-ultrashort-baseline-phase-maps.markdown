---
title: Short and ultra-short baseline phase maps
abstract: A system for generating and utilizing a look-up mechanism consisting of one or more phase difference error maps, tables and/or mathematical models calculates the respective maps, tables and/or models by placing a short baseline or ultra-short baseline antenna array in a known location and known orientation, determining angles of incidence of incoming GNSS satellite signals with respect the antenna array and calculating expected carrier phase differences between respective pairs of antennas, calculating measured carrier phase differences between the respective pairs of antennas, and determining carrier phase difference errors using the expected and measured carrier phase differences. The carrier phase difference errors are then recorded in the look-up mechanism, with the maps and, as appropriate, look-up tables for the respective pairs of antennas being indexed by angles of incidence. Thereafter, the system utilizes the look-up mechanism when determining the unknown orientation of the antenna structure. For respective pairs of antennas, the system enters the look-up mechanism based on angles of incidence determined from a calculated orientation, and uses the retrieved values in the calculation of a corrected orientation, to compensate for phase distortion.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08633854&OS=08633854&RS=08633854
owner: NovAtel Inc.
number: 08633854
owner_city: Calgary
owner_country: CA
publication_date: 20091015
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY","DETAILED DESCRIPTION OF AN ILLUSTRATIVE EMBODIMENT"],"p":["1. Field of the Invention","This invention relates generally to global navigation satellite systems (GNSS) and more particularly to short baseline receivers.","2. Background Information","Short baseline real time kinematic (RTK) systems typically operate with a base GNSS receiver and a rover GNSS receiver that are separated by a small number of kilometers, for example, less than 10 kilometers. The base receiver, which is in a known position, makes carrier phase measurements using GNSS signals transmitted from GNSS satellites in view and calculates pseudoranges from the respective satellites. The base receiver then determines differences between the pseudoranges calculated using the satellite signals and the ranges based on the known position of the receiver and the known locations of the satellites, to determine range correction information. The base receiver operating in a known manner broadcasts the RTK information, that is, the range correction information, pseudoranges, carrier phase measurements and various other information.","The rover receiver utilizes the broadcast pseudoranges, carrier phase measurements and other information to solve for integer carrier cycle ambiguities using well known, processing intensive, operations. The rover receiver utilizes the range correction information to correct for pseudorange errors related to changes in satellite orbits, atmospheric conditions, and so forth, that affect both the base receiver and the rover receiver in the same manner due to the short baseline between the receivers, all in a known manner.","Certain short baseline systems utilize fixed baselines that may, for example, employ two antennas situated at the rover receiver to determine the orientation or azimuth of the rover receiver. The antennas may be fixed to a vehicle, such as an automobile or a ship, and may, for example, be spaced apart by as little as 1 to \u00bd meter. The multiple antennas provide information that is utilized in well known short baseline RTK processing operations to resolve carrier cycle ambiguities for the respective antennas. Once the carrier cycle ambiguities are resolved, the system can then determine the azimuth or orientation of the vehicle based on the differences in the carrier phases at the two antennas.","The fixed baseline systems suffer from the adverse effects of multipath and biases introduced by receiver operations. The signals received at each antenna may be affected in the same or different manners by the multipath signals. Further, the multipath signals may also differ across the GNSS satellites and at different times, depending on the locations of the respective GNSS satellites. The line biases may differ also, depending on the ambient environment, and so forth.","A co-pending application Ser. No. 12\/579,460 entitled Ultra-Short Baseline GNSS Receiver, that is filed on even date herewith and assigned to a common Assignee and which is hereby incorporated herein in its entirety by reference, describes a system that utilizes two antennas that are spaced apart by less than one wavelength of the GNSS satellite carrier signal of interest. These antennas are referred to herein as being on an \u201cultra-short\u201d fixed baseline. Such a system has the advantage that the integer carrier cycle ambiguities are not a problem between measurements made by the two antennas, and orientation or azimuth can be determined without the use of the processing intensive short base line RTK operations. However, the close proximity of the antennas may adversely affect the received signals due, for example, to cross-talk between the antennas.","A short or ultra-short baseline system generates a corresponding phase map or table that associates carrier phase difference errors with the angles of incidence or arrival of the incoming GNSS satellites signals at the rover receiver antennas. The short baseline look-up mechanism provides compensating carrier phase difference corrections that are used in azimuth determination, to correct for phase distortions associated with multipath signals at the respective antennas and line biases associated with receiver operations. The ultra-short baseline phase map provides compensating carrier phase difference corrections that further correct for local Radio Frequency (RF) effects between the two closely spaced antennas on the ultra-short baseline.","The system generates the phase map and\/or an associated phase difference error lookup table based on both expected phase differences and measured phase differences at the rover receiver antennas for GNSS satellite signals at respective angles of incidence. The system determines map grid sizes based on a gradient of the phase difference errors, with smaller grid sizes used for higher gradients. The grid size may also depend on user application accuracy requirements, with smaller grid sizes utilized with greater accuracy requirements. Alternatively, or in addition, multi-parameter mathematical models, such as spherical models, may be used to represent the difference errors instead of a lookup table. The phase map, lookup table and\/or mathematical model are also referred to herein collectively as a \u201clook-up mechanism.\u201d",{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 1","FIG. 1"],"b":["120","110","100","102","104","106"]},"The GNSS satellite signal is represented schematically as signal path , which is received by antenna , and signal path , which is received by antenna . The lengths of the two paths differ because of the different locations of the respective antennas. The signals received by the dual antennas  and  are provided to the accompanying receiver equipment , which includes processors  that are programmed in accordance with the method of invention as described in further detail herein to produce and utilize an associated phase map and\/or look-up table .","Once the map and\/or lookup table  are generated, the receiver  utilizes compensating phase difference corrections retrieved therefrom in azimuth calculations, to provide more accurate azimuth or orientation information. The more accurate azimuth information may allow the system to initialize associated gyroscopes and\/or other inertial senses (not shown) more quickly, in particular when the ultra-short baseline antennas are utilized as discussed in more detail below. Further, since the ultra-short baseline system consistently provides direction information with zero mean error, less expensive gyroscopes may be utilized without adversely affecting the accuracy of direction or heading information provided to a user.","As will be understood by those skilled in the art, the receiver  tracks the GNSS satellite signal carrier at the two antennas  and , and determines phase differences that are used to calculate the orientation of the antennas. The receiver also calculates angles of incidence, \u03b8, of the GNSS satellite signals with respect to the orientation of the antennas, that is, with respect to a vector Vthat extends between the phase centers of the two antennas. In one example, the azimuth, denoted Az in the drawing and defined with respect to true North, and the elevation angle, denoted El in the drawing and defined with respect to the horizon, may be determined for both the incoming satellite signal and the vector Vbased on the satellite position coordinates and an estimated or known orientation of the antennas.","In addition to the GNSS satellite signals, the antennas  and  also receive multipath signals  and , which are reflections of satellite signals  from, for example, the frame . Further, receiver operations may introduce line biases and so forth that adversely affect the carrier phase measurements. It is therefore advantageous to adjust for the effects of these erroneous signals and biases when determining the orientation of the antennas in accordance with the invention.","More specifically, a satellite signal approaching the rigid frame  at a specific angle of incidence will have the essentially same phase distortion every time the satellite signal is coming from the same angle of incidence. In such situations, for example, the incoming signals result in the same or essentially the same multipath signals at the respective antennas. The line biases, however, are the same across the GNSS satellites and may instead vary based on ambient temperature or other factors. By appropriately determining the carrier phase difference errors associated with the satellite signals received at the antennas from a plurality of incident angles, the system generates a phase map, table  and\/or mathematical model (not shown) for use in compensating for the phase distortion. The system thus need not attempt to solve for carrier phase measurement errors at each of the antennas in order to obtain more precise orientation information.","The measured phase difference between two antennas separated by a fixed and known offset is estimated from the following equations:",{"@attributes":{"id":"p-0025","num":"0024"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mtable":{"mtr":{"mtd":[{"mrow":{"mrow":[{"mi":["d","\u03c3"],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}},{"mfrac":{"mrow":{"mi":["L","cos","\u03c6"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}},{"mspace":{"@attributes":{"width":"0.3em","height":"0.3ex"}}}]},"mi":"\u03bb"},"mo":"+","msub":{"mi":["B","L"]}}],"mo":"="}},{"mrow":{"mi":"eqn","mo":[".","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mn":"1"}}]}}}},"br":{},"sub":["A ","L "]},"Assuming the approximate location of the closely-spaced antennas can be determined, the direction of the incoming GNSS satellite signal can be ascertained from the broadcast data on the satellite signal. The cos \u03c6 term of eqn. 1 can then be calculated using the cosine dot product:\n\ncos \u03c6=\n\nwhere (ai+bj+ck) is the unit vector of the incoming signal from the GNSS satellite signal, and (xi+yj+zk) is the unit vector of the vector Vthat joins the antenna phase centers.\n","In the calculation,\n\n=cos()cos()\n\n=sin()cos()\n\n=sin()\n\nwhere the subscript \u201cs\u201d indicates the angles are with respect to the satellite signal and Az and El represent azimuth with respect to North and elevation angle with respect to the horizon, respectively. Further:\n\ncos()cos()\n\nsin()cos()\n\nsin()\n\nwhere the subscript \u201cA\u201d indicates the angles are with respect to the vector V. As will be appreciated, other known calculations may be used to determine the angle of incidence between the incoming satellite signal and the vector Vbased on the known position of the GNSS satellite and the known or an estimated orientation of the antenna baseline.\n","The line bias Bis common to all GNSS signals received by the two antennas. Accordingly, the line bias can be determined by, for example, adjusting the carrier phase differences to remove or essentially equate the geometries for various incoming satellite signals, such that the line bias term is the same across the calculations. Alternatively, the line bias may be determined from measurements taken when a given satellite is positioned at a 90 degree angle with respect to the vector V, which is when the carrier phase difference should otherwise be zero.","The line bias may be incorporated into the look-up mechanism, assuming the bias is stable. However, component tolerances to temperature change and aging may result in instability in the line bias, and thus, the term Bmay require periodic recalculation. Accordingly, the term may instead be calculated at appropriate times and incorporated separately into the azimuth or orientation calculations. Alternatively, pairs of phase difference measurements could be differenced, with the line bias terms cancelling in the double-difference phase observations. Processing double-difference phase observations for RTK baselines is well known in the art to remove biases related to the different clocks in the respective receivers, and so forth. In this system, however, the double-differencing removes the line biases associated with the respective antennas at the same receiver. While simplifying the calculations, the trade-off is the double differencing introduces some Gaussian noise into the calculations,",{"@attributes":{"id":"p-0030","num":"0029"},"figref":["FIGS. 2A and 2B","FIG. 1"],"b":["128","202","204","102","104","206","208","210"],"sub":"A "},"More specifically, the position coordinates of the GNSS satellite are known from the satellite signal broadcast data, associated almanac data and so forth. The system determines the angles of incidence \u03b8 from the geometry of the satellites and the antennas. For example, the system may calculate the cos \u03c6 term of eqn. 1 using eqn. 2, based on the known position and orientation of the antennas and the position coordinates of satellites. Using the calculated angles of incidence, the known wavelengths of the GNSS satellite carrier signals, the known distance between the antenna phase centers and a bias term that is determined as described above from, for example, signals from multiple satellites, the system calculates expected carrier phase differences. In the example, the system utilizes eqn. 1.","Next, at Step  the receiver measures the carrier phases of the GNSS satellite signals at the respective antennas. If the antennas are spaced apart by more than 1 wavelength of the GNSS satellite carrier signal, the system must resolve the integer carrier cycle ambiguities as part of the calculations of the measured carrier phase differences. Accordingly, the system may utilize known short baseline RTK operations to resolve the cycle ambiguities, and then calculate the measured phase differences by subtracting the measurements. Alternatively, the system may resolve the integer carrier cycle ambiguities in other known manners.","If the antennas are spaced apart by less than 1 wavelength of the carrier signal, i.e., on an ultra-short baseline, the integer cycle ambiguity resolution is essentially trivial in the sense that the ambiguities are associated with cycle rollovers. The cycle ambiguities are thus resolved based on the close proximity of the antennas, since the rollovers will provide only one solution that is within the span of the ultra-short baseline and various other solutions that can be readily rejected as outside of the span of the ultra-short baseline. The cycle rollovers may occur when the satellite signals are at particular angles of incidence, and thus, the system may incorporate cycle rollover compensation into its carrier phase difference operations for particular angles of incidence and otherwise use the measured carrier phase angles directly, to determine orientation. Accordingly, the RTK or other operations typically required to resolve the carrier cycle ambiguities need not be performed for the ultra-short baseline configuration, and the system operations are thus simplified.","In accordance with step , the system computes carrier phase difference errors by subtracting the calculated expected carrier phase differences from the measured carrier phase differences.","The carrier phase difference errors so determined are recorded at step . The process is repeated to collect additional data, as shown in step . The additional data may be collected by allowing the receiver to remain in a location for a number of hours, for example, twenty-four hours, such that the GNSS satellites move through their respective locations in the sky. At selected times or locations, carrier phase measurements are taken and measured carrier phase differences are determined, angles of arrival and expected carrier phase differences are calculated, and phase difference errors are recorded, to fill in the table.","Alternatively, if the data is sought to be obtained in a shorter period of time, the data can be collected by physically rotating the antenna structure by particular degree intervals, and performing the steps of obtaining the measured carrier phase differences, calculating the angles of arrival and expected carrier phase differences at respective antenna orientations, and determining the associated phase errors, and so forth.","As shown in step , the phase error data are further sorted into table grid elements. In step  an average is taken for each set of data for each grid element. In accordance with step , the average value is stored in each grid cell element thus populating the table with figures of merit. Any empty cells can be populated by interpolating the data between neighboring cells as shown in step . The procedure ends in step  and the phase map\/table  is thus formed. As is understood by those skilled in the art, other figures of merit, for example, the mean of the calculated error values or other values associated with the dispersion of the phase difference error values at common angles of incidence, may be used instead of or in addition to the average. Alternatively, or in addition, the figures of merit may include weightings for the values. For example, the values associated with angles of incidence for which there are relatively large dispersions may be deweighted and\/or a sliding scale of weightings may be applied based on how widely dispersed the associated values are, in order to ensure that the values associated with wider dispersions have less effect on the calculations than the values associated with smaller dispersions.  illustrates a phase map  in which the carrier phase difference errors are represented in polar coordinate format.","As noted, the expected phase differences are computed using the angles of arrival that are calculated using the known locations and orientations of the rover antennas and the known position coordinates of the GNSS satellites. The carrier phase difference error is then obtained by subtracting the expected carrier phase difference from the measured carrier phase difference. The carrier phase difference errors are recorded for various angles of arrival and the steps are repeated until measurements have been collected for majority of table index cells, as shown in . Illustratively, the various sets of data are averaged or otherwise manipulated to obtain figure of merits for the phase difference error values for the respective grid cell elements. The look-up table is also built from the figure of merit values. If there are grid cells with no data, values can be computed by interpolation between or among neighboring cells containing valid data.","In accordance with an alternative embodiment of the invention, the phase map\/table  may be generated using incoming signals from an RF signal generator (not shown). The antenna structure is thus positioned at a known distance and orientation with respect to the RF signal source, and the phase differences at the antennas with respect to the received RF signal are measured. The expected phase differences are calculated based on the angle of incidence of the RF signals relative to the vector V. The antenna orientation is then rotated by a predetermined amount, or the RF signal generator is moved by a predetermined angle, and the measured and expected phase differences are determined, and so forth.","In either map\/table generation method, i.e., using the GNSS satellite signals or the signals from the RF signal generator, the grid size of the map\/table is preferably proportional to the gradient of the measured phase difference errors. More specifically, the higher the gradient, the denser the table should be. Inversely, if the phase difference error changes very slowly across the measured space, then a sparser table can be used. Another consideration when determining grid spacing is the expected user accuracy requirement. If the requirement for phase measurement accuracy is high, then a denser grid will be required for the table. Notably, the change in the error value between adjacent grid cells should be significantly (e.g., half or quarter) smaller than the required user accuracy.","Alternatively, or in addition, the mathematical model may be used to represent the phase corrections. Accordingly, the calculated values are used to construct the model using, for example, techniques associated with spherical harmonic modeling. Similarly, a model may also be determined for the figures of merit. In operation, the table generated by the method of the present invention can be used in a procedure which is described with reference to the flow chart of . The steps are performed using an antenna structure in which the antennas are separated by more than one wavelength of the GNSS carrier, for example, separated by 1 or \u00bd meter.","The procedure begins at the start step  and continues to step  in which two GNSS signal antennas are affixed to a rigid frame at a fixed separation d. In accordance with step , the two antennas track common GNSS carrier signals simultaneously and the receiver determines its position using the signals from one or both antennas in a known manner. The system also determines the position coordinates of the GNSS satellite from the broadcast data and\/or other well known means. The receiver then measures the carrier phase angles at the two antennas at periodic intervals (step ).","In step , the system subtracts the pairs of carrier phase measurements to calculate measured, or raw, carrier phase differences. As appropriate, the system next resolves the integer carrier phase ambiguities using the carrier phase measurements in known short baseline RTK processing operations, and determines measured carrier phases for the two antennas. Using the raw phase differences, the receiver calculates an approximate orientation of the antennas in a known manner, for example, using eqn.1, as shown in step . As shown in step , the system uses the location of the GNSS satellite, determined as discussed above, to calculate angle of arrival of the GNSS satellite signals with respect to the calculated orientation of the antennas. The system then uses the angle of arrival to enter the phase map or look-up table and extract the phase difference error corrections.","The system uses the phase difference error corrections retrieved from the table to adjust the raw phase difference measurements to compensate for phase distortion caused by multipath signals or other local RF effects, as shown in step . In the example, the retrieved value is combined with the phase difference value used to calculate the orientation. As appropriate, a calculated line bias term is also included in the adjustment, assuming either the bias term is not incorporated into the table or double differencing is not utilized. The system then recalculates the orientation of the antennas using the corrected phase difference values as shown in step . Decision step  checks whether the difference between the earlier calculated orientation of the antennas and the corrected orientation of the antennas is larger than the index interval of the table or grid size of the map. If so, steps - are repeated using the corrected orientation to determine updated angles of arrival, and so forth, and the iterations continue until the change in the corrected orientation is sufficiently small. The procedure continues to step , with the corrected orientation used as the actual orientation of the antennas, and the procedure ends at step .","The known distance d between the antennas  and  may be less than one wavelength of the GNSS satellite signal of interest, and thus, integer carrier cycle ambiguity is essentially trivial to resolve and thus complicated RTK procedures are not required. Rather, the measured carrier phase angles may be used directly, with cycle rollovers taken into account, as appropriate, to determine the raw phase difference. The step  is thus simplified. The closer spacing of the antennas, however, the more cross-talk may occur between them. The cross-talk signals adversely affect the calculation of carrier phase angle differences, since the cross-talk results in an apparent shift of the antenna phase centers toward one another. Indeed, some spacings may result in the two antennas \u201cseeing\u201d the same signals, and thus, tending to operate as a single antenna. The look-up mechanism  operates to compensate for the cross-talk, in addition to compensating for the adverse effects of multipath signals at the respective antennas and as appropriate the line bias associated with receiver operations, by providing corrections for the carrier phase distortions associated with the angles of arrival of the GNSS satellite signals at the antennas. Thus, the system need not determine individual carrier phase measurement errors for each of the antennas.",{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 5","b":["128","502","128","504","128"]},"Alternatively, or in addition, the receivers may operate in a system that includes a data collection and processing center (not shown), and the receivers may send the carrier phase angle measurement data to the processing center for position and\/or orientation determination. The receivers may thus be less complex since they need not process the measurement data. In such a system, the processing center may collect the carrier phase angle measurements and batch process the data to determine which carrier phase angle measurements are valid in the manner set forth in co-pending United State Patent Application Publication No. 2006\/0012516 entitled METHOD FOR POSITIONING USING GPS IN A RESTRICTIVE COVERAGE ENVIRONMENT, which is assigned to a common Assignee and incorporated herein in its entirety by reference. The system then uses only the valid carrier phase angle measurements to calculate orientation.","Alternatively, or in addition, receivers in such a system may be simplified since the processor-intensive RTK processing to resolve integer carrier cycle ambiguities, as appropriate for the short baseline arrangements, may be performed in a data collection and processing center, with position and\/or orientation information provided by the center to the receiver. As discussed, the RTK processing is not necessary for the ultra-short baseline arrangement.","Alternatively, the system may compute the orientation of the antennas with each set of measured carrier phase difference data collected. Such operations are of use when the antennas are located on a moving vehicle. With the antennas spaced apart by less than 1 wavelength of the carrier, resolution of integer carrier angle ambiguities is simplified to cycle rollover compensation, as discussed above, and complex RTK methods are not required to determine orientation, and the processing is thus much less complex and less time consuming.","The system may utilize an array of more than two antennas, and generate phase maps, look-up tables and\/or mathematical models for all or selected pairs of antennas in the manners described above. The system then utilizes all or selected pairs of the antennas to determine the three dimensional orientation of the array in a manner similar to that described above for two dimensions.","Alternatively or in addition, the pitch and yaw of the array may, for example, be determined in a manner described in U.S. Pat. No. 6,211,821 B1 entitled Apparatus and Method for Determining Pitch and Azimuth From Satellite Signals, which","is incorporated herein in its entirety by reference. However, the carrier cycle ambiguity resolution is are handled as cycle roll over compensation for the ultra-short baselines, as discussed above. It should be understood that the present invention provides an advantageous method and system for determining the orientation of antennas arrays of two or more antennas using phase difference error look-up tables, maps and\/or mathematical models, i.e., a look-up mechanism, that is generated in accordance with the present invention. The antennas in the dual antenna array are spaced apart by a distance d, however, the antennas in arrays with more than two antennas need not be equally spaced from each of their neighbor antennas.","The foregoing description has been directed to specific embodiments of the invention. It will be apparent, however, that other variations and modifications, such as combining system components such as processors or separating them into additional components, performing certain or all of the processing steps in software, hardware or firmware, performing steps out of order, and so forth, may be made to the described embodiments, with the attainment of some or all of the advantages of such. Accordingly, this description is to be taken only by way of example and not to otherwise limit the scope of the invention. Therefore, it is the object of the appended claims to cover all such variations and modifications as come within the true spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The present invention can be better understood with reference to the accompanying drawings, of which:",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIGS. 2A and 2B","FIG. 1"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIGS. 4A and 4B"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
