---
title: Determining whether a telephony call is permitted based on permission data
abstract: Apparatus and methods to store permission data relating to security for a system and to receive a request to establish a telephony call. In response to the request, the telephony call is established, and after establishing the telephony call, an indication of a type of the telephony call is detected. Based on permission data relating to security for the system, it is determined whether the type of the telephony call is permitted.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07151823&OS=07151823&RS=07151823
owner: Hewlett-Packard Development Company, L.P.
number: 07151823
owner_city: Houston
owner_country: US
publication_date: 20030917
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND","DETAILED DESCRIPTION"],"p":["This is a continuation of U.S. Ser. No. 09\/327,896, filed Jun. 8, 1999, now U.S. Pat. No. 6,647,099, which claims the benefit under 35 U.S.C. \u00a7 119(e) of U.S. Provisional Patent Application Ser. No. 60\/088,449 filed Jun. 8, 1998, both of which are hereby incorporated by reference.","A modem is a device that has traditionally allowed a computer system to transmit and receive data over a telephone line. Today, many modems can transmit voice and fax as well as data. Modems are currently implemented in a variety of ways. For example, a host based \u201ccontrollerless\u201d modem typically includes a codec on a peripheral board, but the modem controller code is executed by a host processor. A native signal processing modem typically implements a signal processing component on the host system itself to generate modem signals. Peripheral modems processor in conjunction with a modem microcontroller, and a strictly digital signal processor oriented approach. All of these approaches, however, provide for code that is either executed by the host processor, the microcontroller on the modem itself, or the digital signal processing code to implement the modem functionality. These approaches necessarily enhance the flexibility of modems, especially when this code is implemented in a flash ROM. This is because the modem can be reconfigured to adapt it to new implementations of communication protocols and to add other features that may be desirable in the modem.","While modem interfaces are standardized a number of different communications protocols for formatting data, to be transmitted over telephone lines exist. For example, standardized communication protocols include: Bell 103, CCITT V.21, Bell 212A, ITU V.22, ITU V.22bis, ITU V.29, ITU V.32, ITU V.32bis, ITU V.34, and ITU V.90. These and other protocols are well known to those of ordinary skill in the art. In many modems, flash ROMS have been utilized to enable the upgrading of communications protocols.","Telephony is the science of translating sound into electrical signals transmitting them through a medium and then converting back to sound. Computer telephony integration (CTI) refers to computer systems that enable a computer to act as a call center accepting incoming calls and routing them to the appropriate device or user. Currently, CTI systems have advanced such that most are capable of handling incoming and outgoing communications that include: phone calls (voice), faxes, and Internet messages. The advance in CTI has, in part, been aided by advance in software interfaces. One such interface is telephony application program interface (TAPI). TAPI is an application programmer interface (API) designed to connect a computer system running a windows-based program or operating system to telephone services. TAPI is well known to those of ordinary skill in the art. Another interface that is of particular interest to device driver developers is telephony service provider interface (TSPI). The TSPI is a software interface that sets between a Windows telephony dynamic link library (DLL) and a hardware specific device driver that is also known as a telephony service provider (TSP). The TSP provides an interface to the telephony hardware. The TSPI is well known to those of ordinary skill in the art.","In a typical local area network (LAN) a network firewall determines which LAN services are available from outside of the LAN and what outside services are available to those internally connected to the LAN. For the network firewall to be effective all outside traffic must pass through the firewall where it can be inspected. When performing as designed, the firewall permits only authorized traffic to pass and blocks dubious traffic. Unfortunately, the firewall cannot offer any protection once an attacker has gotten through or around the firewall. For example, if unrestricted dialout is permitted from inside the protected network internal users can make a direct serial line Internet protocols (SLIP) or point-to-point protocol (PPP) connection to an Internet service provider (ISP). These types of connections bypass the security provided by even the most carefully constructed firewall and create a significant opportunity for backdoor attacks.","The system according to some embodiments of the invention implements a modem or modem driver with a variety of desirable features. These features include the ability to individually enable or disable inbound data, outbound data, inbound fax, outbound fax, inbound voice, and outbound voice. These capabilities may be individually enabled or disabled by an administrator thereby controlling and authorizing user operations. In one embodiment a bit mask representing permission states is stored in modem associated memory. Each feature has an assigned bit in the bit mask. This modem associated memory may be RAM, ROM, EPROM, EEPROM or flash ROM. When the modem memory is flash ROM the states may be changed by an administrator via software.","Turning to , illustrated is a typical computer system S implemented according to the invention. While the system S is illustrative of one embodiment, techniques according to the invention can be implemented in a wide variety of systems. As illustrated, a host processor  is coupled to a memory controller , a graphics adapter , a serial interface , and a disk controller  through a bus . For simplicity, various circuitry that would be necessary to couple these components is not illustrated.","The host processor  can be a Pentium\u00ae (manufactured by Intel Corporation) or any other appropriate processor. The memory controller  controls system memory . The system memory  would include dynamic random access memory (DRAM) appropriate for a given processor. The computer system S utilizes Flash read only memory (ROM) (not shown) to implement the preferred embodiment of the invention. The graphics adapter  is coupled to a monitor . Again, the disk controller  controls floppy disks disk drive  and hard disk drive . The serial interface  couples the computer system S to a telephone line. The serial interface  may couple the computer system S to the telephone line directly (in the case of a software modem) or couple the computer system S to a modem (not shown). In the latter configuration, the modem will in turn couple the computer system S to the telephone line.","A software or firmware based modem typically allows for enhanced operating system compared to a hardware modem. This is because using software enables permissions to be set in order to establish a COS for an individual user and\/or groups of users within an organization. Permissions are individual privileges assigned to a user or a group of users, which allow or disallow for specific operation. Permissions may be established in order to establish security requirements or otherwise control usage of enterprise resources to promote good business practices. Utilizing permissions for added security can result in a flexible back-up firewall. For example, when outbound data calls are not permitted no communication application package can establish outbound data communications. Utilizing permissions in this manner allow an individual feature to be disabled at the lowest level\u2014that is in a modem's hardware, firmware or driver-stack.","Permissions can be set via a stand-alone utility or through an embedded software flash utility. In one embodiment, an administrator can set various permissions remotely via a centralized location. For example, the administrator might utilize System Management Server (SMS), Policy Editor, Insight Manager, Carbon Copy, PC Anywhere or any other facility that provides remote access. These and other tools that assist the administration of LANS are well known to those of ordinary sill in the art. When embedded into intelligent application creative features which can augment system command and control may be implemented. For example, modem resources could be shut down in real time when a problem occurs by toggling one or more permission bits.","Turning to , illustrated is a bit masks which corresponds to individual permissions. While this bit mask is illustrated to be 8 bits it could, of course, be smaller such as nibble (4 bits) if some features are not needed. For example, a nibble would allow for inbound and outbound data and fax call control. A \u20181\u2019 enables a feature, and \u20180\u2019 disables a feature. The illustrated example of  allows inbound data, inbound fax, inbound voice, and outbound voice, and disables outbound data and outbound fax. This effectively establishes a COS for an individual user. Because bit mask, in the preferred embodiment, is located in flash memory it can be controlled through software. This modem firmware embodiment enables or disables the features associated with the bit mask at the lowest point. All third party communication applications are governed by the permission settings.","Moving to , illustrated is a typical example of how an application , , , running on a computer system S interacts with a TAPI . The applications \u2013 are shown as being coupled to the TAPI  and isolated from the telephony dynamic link library (DLL) . This isolation simplifies the installation and support of PC based communication software. Traditionally communication software has been complex to install and difficult to support because the application \u2013 would have been able to communicate with the telephony hardware directly. This means that the application \u2013 would potentially have to know hundreds of different modem types of the user would have to carry out a complex installation process. Using the TAPI  any TAPI compatible application can utilize a hardware driver coupled to a telephony DLL .","A second interface, a telephony service provider interface (TSPI) is also a software interface. The TSPI resides between a Windows telephony DLL and what are known as telephony service providers (TSPs). The TSPs are hardware specific device drivers, which provide the interface to the telephony hardware. When one of the TSPs is coupled to a modem that TSP can function to translate a TSPI request, for example, to a number to be dialed.  illustrates the connection between a TSPI  and a telephony DLL . As previously stated, TSPs , , and  are hardware specific drivers.","The control of flow through the TAPI  is further illustrated in . One of the applications \u2013 places a call to the TAPI layer  via the TAPI_LINEDEV SPECIFICroutine. A unique identifier is translated by the appropriate TSP \u2013. The identifier corresponds to an action requested. That action might include the identifier to enable fax in, disable fax in, enable fax receive, disable fax receive, enable data send, disable data send, enable data receive, or disable data receive. Windows passes the call from the application \u2013 through the TAPI DLL  to the TSP \u2013. The TSP \u2013 is entered and the identifier is read. The TSP \u2013 then issues an appropriate command to the modem firmware . The modem firmware  interprets the command and toggles the permission bit mask and flash memory, as appropriate. The modem firmware  acknowledges the appropriate TSP \u2013 which in turn eventually acknowledges the appropriate application \u2013.","There are several other ways in which administrative control can be implemented. Registry settings may be used to control the enabling and disabling of the permission bits. This is accomplished by writing a zero or a one, \u201ctrue\u201d\/\u201cfalse\u201d, \u201cyes\u201d\/\u201cno\u201d, \u201con\u201d\/\u201coff\u201d, or other appropriate value to the specific permission bit. For example, a value of zero would be used to disable a feature and a value of one would be used to enable the same feature. Such registry values could appear as:",{"@attributes":{"id":"p-0024","num":"0023"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"168pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"My Computer"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"HKEY_LOCAL_MACHINE"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"140pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Security"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"98pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"119pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"Modem"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"119pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"98pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Data_receive Ox 1"]},{"entry":[{},"Data transmit Ox 1"]},{"entry":[{},"Fax_receive Ox 1"]},{"entry":[{},"Fax_transmit Ox 1"]},{"entry":[{},"Voice_transmit Ox 1"]},{"entry":[{},"Voice_receive Ox 1"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"Security aware application can poll these keys and dynamically set and reset the permissions via the TAPI or using direct calls to the firmware. Assuming such an application or utility is available to an administrator, the administrator can dynamically issue commands to the firmware. As previously discussed, administrators can use the Policy Editor employed on NT systems, SMS, PC Anywhere, or Carbon Copy to change these values. In addition COS groups can also be associated with server based installation of product software. Utilizing SMS, package definition files (PDF), will also allow the administrator to establish different classes of services for different users. For example, the administrator could create an installation folder on a server with the PDF COS for the sales group and a different PDF COS for the marketing group.","In another embodiment, a flash utility can also be used to send commands directly to the modem firmware via proprietary commands. These commands would be dependent on the architecture used by the designer. Upon launch of the application a simple graphical user interface (GUI) or character based interface prompts the user to enter a password. Upon successful entry the administrator can change the password or select appropriate check boxes. This utility would be particularly useful for local client administration.","On telephone lines call discrimination is typically performed when a connection is made between a called party and a calling party. Turning to , illustrated is an inbound call handling routine  that is invoked when a calling party wishes to place a call to a modem user. In step  a calling party goes off hook and receives a dial tone. From step  control passes to step . In step  the calling party dials the number of the called party and hears a ringback. From step  control passes to . In step  the called party detects an inbound ring and answers. Control then passes to step . In step  the called party's modem discriminator detects whether there is a FSK tone. If the called party's modem detects a FSK tone then control passes to step .","The FSK tone is indicative of a data call. In step  the inbound data permissions are read. If inbound data calls are allowed control passes to step , where the call is received. If inbound data calls are not allowed then control passes to step , where the line is disconnected. From step , when the called party's modem does not detect an FSK tone control passes to step . In step  the called party's modem detects whether there is a CNG tone, a fax answer tone, or fax training tones. All of these tones are indicative of a fax call. If a CNG tone exists control passes to step . In step  the inbound fax permission are read. If an inbound fax call is allowed control passes to step . In step  the inbound fax is received. Otherwise, control is passed to step  where the line is disconnected.","Note that although the modem discriminator is shown as sequentially detecting the FSK and the CNG incoming signals, in actual practice this is typically done simultaneously.","Turning to , illustrated is an outbound call handling routine . This procedure is very similar to the inbound call handling routine . In this routine  a calling party is the modem user. In step  the calling party places the modem off-hook and receives a dial-tone. From step  control passes to step . In step  the calling party dials the number of the called party and determines when the modem detects ringback. From step  control passes to step . In step  the called party detects a ring and goes off-hook or answers. In step  if the calling party's modem detects FSK tones then the outbound data permissions are read and control passes to step . In step  if outbound data calls are allowed control passes to step  where the call is permitted. If a FSK tone is not detected in step  control transfers to step . In step  the calling party's modem detects whether a CGN tone (or fax answer or training tone) exists. If the CNG tone exists then control is transferred to step . In step  the outbound fax permissions are read and if outbound fax calls are allowed control passes to step . In step  the outbound fax call is permitted to proceed. If outbound faxes are not allowed then control transfers to step  where the line is disconnected. If a CNG tone is not detected in step  control transfers to step . In step  an outbound voice call is assumed and the outbound voice permissions are read. If outbound voice calls are allowed control transfers to step . If outbound voice calls are not allowed the modem disconnects the line in step .","Although the disclosed embodiment is principally directed to software modem, such as controllerless modem implemented on a host system or a digital signal processor, the techniques according to the invention could be similarly implemented employing a modem driver in conjunction with a standard hardware modem that supports telephony features. For example, the modem driver capable of intercepting modem communications at a very low level could include the data, fax, and voice permissions, and disconnect calls that did not meet the required permissions. Preferably, for heightened security the ability to selectively allow or disallow different types of ingoing and outgoing modem calls is implemented at a firmware level within either a host system or the modem itself. In an environment where security is not of paramount importance, or where it is known that the operating system executing on the computer is extremely secure, the selective passing of desired types of calls could be implemented at the driver level.","Also, although the present modem has been disclosed as being implemented with an analog line modem, the examples given could similarly be used on BRI ISDN, PRI ISDN, or other digital transports as well.","The foregoing disclosure and description of the invention are illustrative and explanatory thereof, and various changes in the size, shape, materials, components, circuit elements, wiring connections and contacts, as well as in the details of the illustrated circuitry and construction and method of operation may be made without departing from the spirit of the invention.","In the foregoing description, numerous details are set forth to provide an understanding of the present invention. However, it will be understood by those skilled in the art that the present invention may be practiced without these details. While the invention has been disclosed with respect to a limited number of embodiments, those skilled in the art will appreciate numerous modifications and variations therefrom. It is intended that the appended claims cover such modifications and variations as fall within the true spirit and scope of the invention."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 7"}]},"DETDESC":[{},{}]}
