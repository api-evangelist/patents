---
title: Energy management application server and processes
abstract: An energy management gateway is provided. The energy management gateway includes a memory, a processor coupled to the memory, a building management system (BMS) interface executed by the processor and an energy management system interface executed by the processor. The BMS interface is configured to receive a first message, the first message being structured according to an industrial protocol. The energy management interface is configured to translate the first message into a second message structured according to an energy management protocol different from the industrial protocol, the second message including a query comprising at least one command and a set of qualifiers, the query being addressed to at least one first endpoint and to provide the second message to a first domain member of a first domain including the at least one first endpoint, the first domain member being a device other than the at least one first endpoint.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08606407&OS=08606407&RS=08606407
owner: Schneider Electric Buildings, LLC
number: 08606407
owner_city: Palatine
owner_country: US
publication_date: 20110620
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["1. Technical Field","The technical field relates generally to monitoring usage of utilities and, more particularly, to methods and systems of facilitating communication between control systems and devices that consume electrical power.","2. Background Discussion","Building management systems control and conserve resources consumed by the operation of subsystems within buildings and other structures. The subsystems managed by a typical building management system include power supply, environmental control, lighting control, security and fire protection subsystems. The amount of resources consumed by these subsystems is substantial\u2014nearing 70% of the total resources consumed within a building according to some estimates.","Conventional building management systems are implemented using a variety of standards and computing technologies. Some building management systems employ a hierarchical architecture in which management and configuration devices are connected to one another via a network. Under this architecture, each of the management and configuration devices is also connected to one or more control devices that monitor and control the operation of a subsystem of the building. The management and configuration devices allow users to initially configure, monitor and alter the behavior of the subsystems controlled by the control devices. Management and configuration devices are typically implemented using general purpose computer systems, such as a personal computer or laptop. Control devices are often proprietary, special purpose devices that include environmental sensors and that can alter the operation of a particular subsystem.","According to one aspect, an energy management gateway is provided. The energy management gateway includes a memory, a processor coupled to the memory, a building management system (BMS) interface executed by the processor and an energy management system interface executed by the processor. The BMS interface is configured to receive a first message, the first message being structured according to an industrial protocol. The energy management interface is configured to translate the first message into a second message structured according to an energy management protocol different from the industrial protocol, the second message including a query comprising at least one command and a set of qualifiers, the query being addressed to at least one first endpoint and including at least one of a sum command and a set command. The energy management interface is also configured to provide the second message to a first domain member of a first domain including the at least one first endpoint, the first domain member being a device other than the at least one first endpoint.","In the gateway, the industrial protocol may include MODBUS, the energy management protocol may include EnergyWise. The energy management system interface may be configured to provide the second message to a router. In addition, the energy management system interface may be further configured to provide the second message to a second domain member of a second domain including at least one second endpoint addressed by the query. Furthermore, a subset of the set of qualifiers may address the query to the at least one first endpoint and the at least one second endpoint. This subset may include a domain name qualifier with a value including a wildcard.","In the gateway, the energy management system interface may be further configured to receive a third message from the first domain member, the third message structured according to the energy management protocol and translate the third message into a fourth message structured according to the industrial protocol. The BMS interface may be further configured to receive the first message from an external entity and provide the fourth message to the external entity. The energy management system interface and the BMS interface may execute synchronously or asynchronously. The BMS interface may be configured to receive the first message from a BMS controller and provide the fourth message to the BMS controller.","According to another aspect, a method of facilitating communication between devices using a computer system is provided. The method includes acts of receiving, by the computer system, a first message, the first message being structured according to an industrial protocol; translating, by the computer system, the first message into a second message structured according to an energy management protocol different from the industrial protocol, the second message including a query comprising at least one command and a set of qualifiers, the query being addressed to at least one first endpoint and including at least one of a sum command and a set command; and providing, by the computer system, the second message to a first domain member of a first domain including the at least one first endpoint, the first domain member being a device other than the at least one first endpoint.","In the method, the act of receiving, by the computer system, the first message may include an act of receiving a message structured according to the MODBUS protocol. The act of translating, by the computer system, the first message into the second message may include an act of translating a message into the EnergyWise protocol. The act of providing, by the computer system, the second message to the first domain member may include an act of providing the second message to a router.","The method may further include an act of providing the second message to a second domain member of a second domain including at least one second endpoint addressed by the query. In the method, the act of translating, by the computer system, the first message into the second message may includes addressing the query to the at least one first endpoint and the at least one second endpoint. The act of addressing the query may include an act of assigning wildcard to a domain name qualifier. The act of receiving, by the computer system, the first message may include an act of receiving the first message from an external entity and the method may further include acts of receiving a third message from the first domain member, the third message structured according to the energy management protocol; translating the third message into a fourth message structured according to the industrial protocol; and providing the fourth message to the external entity. The act of receiving the first message from the external entity may include an act of receiving the first message from a BMS controller.","According to another aspect, a non-transitory computer readable medium is provided. The computer readable medium stores sequences of instruction for facilitating communication between devices using a computer system. The sequences of instruction include instructions that will cause at least one processor to receive a first message structured according to an industrial protocol; translate the first message into a second message structured according to an energy management protocol different from the industrial protocol, the second message including a query comprising at least one command and a set of qualifiers, the query being addressed to at least one first endpoint and including at least one of a sum command and a set command; and provide the second message to a first domain member of a first domain including the at least one first endpoint, the first domain member being a device other than the at least one first endpoint. The non-transitory computer readable medium may further include instructions that will cause the at least one processor to receive the first message using the MODBUS protocol and translate the first message into a second message structured according to the EnergyWise protocol.","Still other aspects, examples and advantages of these exemplary aspects and examples, are discussed in detail below. Moreover, it is to be understood that both the foregoing information and the following detailed description are merely illustrative examples of various aspects and examples, and are intended to provide an overview or framework for understanding the nature and character of the claimed aspects and examples. Any example disclosed herein may be combined with any other example. References to \u201can example,\u201d \u201csome examples,\u201d \u201can alternate example,\u201d \u201cvarious examples,\u201d \u201cone example,\u201d \u201cat least one example,\u201d \u201cthis and other examples\u201d or the like are not necessarily mutually exclusive and are intended to indicate that a particular feature, structure, or characteristic described in connection with the example may be included in at least one example. The appearances of such terms herein are not necessarily all referring to the same example.","Aspects and examples disclosed herein provide processes and apparatus by which a building management system monitors and controls the power state of various managed information technology devices. Examples of these managed devices include voice over internet protocol telephones, fax machines, computer systems, webcams, Power Over Ethernet devices and the like. Some aspects and examples described herein implement an energy management gateway through which a building management system monitors and controls power usage of devices that communicate data with one another via a network. In at least one example, the energy management gateway communicates with CISCO brand devices via the CISCO EnergyWise protocol, version 2. CISCO devices and specifications for the CISCO EnergyWise protocol are available from Cisco Systems, Inc. of San Jose, Calif.","Examples of the methods and apparatus discussed herein are not limited in application to the details of construction and the arrangement of components set forth in the following description or illustrated in the accompanying drawings. The methods and apparatus are capable of implementation in other examples and of being practiced or of being carried out in various ways. Examples of specific implementations are provided herein for illustrative purposes only and are not intended to be limiting. In particular, acts, components, elements and features discussed in connection with any one or more examples are not intended to be excluded from a similar role in any other examples.","Also, the phraseology and terminology used herein is for the purpose of description and should not be regarded as limiting. Any references to examples, components, elements or acts of the systems and methods herein referred to in the singular may also embrace examples including a plurality, and any references in plural to any example, component, element or act herein may also embrace examples including only a singularity. References in the singular or plural form are not intended to limit the presently disclosed systems or methods, their components, acts, or elements. The use herein of \u201cincluding,\u201d \u201ccomprising,\u201d \u201chaving,\u201d \u201ccontaining,\u201d \u201cinvolving,\u201d and variations thereof is meant to encompass the items listed thereafter and equivalents thereof as well as additional items. References to \u201cor\u201d may be construed as inclusive so that any terms described using \u201cor\u201d may indicate any of a single, more than one, and all of the described terms.","Energy Management System","Various examples implement an energy management system on one or more computer systems.  illustrates one of these examples, an energy management system . As shown in , the energy management system  includes a configurator , a building management system (BMS) client , an energy management gateway  and a network domain . Also as shown in , the configurator  exchanges (i.e. sends or receives) configuration information with the BMS client  and the energy management gateway . The BMS client  exchanges energy management information with the energy management gateway . The energy management gateway , in turn, exchanges queries and responses with the network domain . The network domain  includes one or more managed devices that the BMS client  monitors and controls via the energy management gateway . Each of these interactions is described further below.","Each of the components shown in  may be implemented using one or more computer systems that are in data communication with one another via a network. This network may include any communication network through which computer systems may exchange information. For example, the network may be a public network, such as the internet, and may include other public or private networks such as LANs, WANs, extranets and intranets.","In one example, components ,  and  each reside on a separate and physically discrete computer system. However, examples are not limited to this configuration. In other examples, each of the components ,  and  reside within a single computer system.","Information may flow between each of the components in , or any of the elements, components and subsystems disclosed herein, using a variety of techniques. Such techniques include, for example, passing the information over a network using standard protocols, such as TCP\/IP, passing the information between modules in memory and passing the information by writing to a file, database, data store, or some other non-volatile data storage device. For instance, in one example, the energy management gateway  communicates with the network domain  via a wireless interface. In addition, pointers or other references to information may be transmitted and received in place of, or in addition to, copies of the information. Conversely, the information may be exchanged in place of, or in addition to, pointers or other references to the information. Other techniques and protocols for communicating information may be used without departing from the scope of the examples disclosed herein.","The configurator  illustrated in  implements a user interface through which the configurator  exchanges a variety of configuration information with a user. In at least one example, the user interface of the configurator  is browser-based and is implemented using an embedded web server. The configuration information exchanged through the user interface may include parameters that specify entry points into the network domain , identifiers of the managed devices within the network domain , or queries executed by the managed devices. Entry points are network devices resident within the network domain through which the energy management gateway  provides queries addressed to the managed devices. Entry points propagate these queries to managed devices. In at least one example, the managed devices that reside within the network domain  include devices other than the entry points.","In some examples, the user interface of the configurator  presents elements through which the configurator  receives parameters defining queries executed by the managed devices. These parameters may specify a particular query, associate the query with one or more domains or subset of managed devices, and define a schedule by which the query is to be repeatedly executed. In several examples, the user interface displays a list of managed devices and receives query information for one or more of the managed devices displayed within the list. This query information may define one or more queries. In one example, prior to displaying the list of managed devices, the configurator  generates the list from a list of managed devices received from the energy management gateway . In another example, the configurator  generates the list from information contained within an offline commissioning data storage device, such as a pre-populated text file or a CISCO LMS database.","When issued to an entry point, queries generated from the query information provided by the configurator  cause devices within the network domain  to perform any of several actions. For instance, a \u201cset\u201d query causes one or more network devices within the network domain  to propagate the set query to a subset of the managed devices. In one example, the subset is specified by values of one or more arguments of the query. Each member of the subset that receives and executes the propagated set query alters its power consumption based on a value of an argument included in the query.","According to another example, a \u201ccollect\u201d query causes one or more network devices within the network domain to propagate the collect query to a subset of the managed devices. As with the sum query, in one example, the subset is specified by one or more arguments of the query. Each of the subset of managed devices that receives and executes the propagated collect query responds to the query with information representative of the power usage of the device.","In still another example, a \u201csum\u201d query causes one or more network devices within the network domain to propagate the sum query to a subset of the managed devices. This subset, too, may be specified by one or more arguments of the query. Each of the subset of managed devices that receives and executes the propagated sum query provides information representative of the power usage of the managed device to a network device. The network devices, in turn, calculate a statistical summary, such as a sum or average, of the power usage information provided by the managed devices, and respond to the sum query with the statistical summary.","In other examples, the user interface of the configurator  presents information descriptive of the configuration and operational activities previously conducted by the energy management gateway . For instance, in some examples, the user interface of the configurator  provides elements through which the configurator receives requests to export configuration information to another computer system. Upon receipt of such a request, the configurator  saves a copy of the requested configuration information to a default data storage device or to a data storage device specified in the request.","In other examples, the configurator  receives a file generated by the energy management gateway  that includes a log of the configuration and operational activities executed by the energy management gateway . This log file may be stored in a variety of formats including plain text, csv and json. In these examples, responsive to receiving a request from a user, the user interface of the configurator  opens, loads and displays the contents of the log file to the user. In some examples, the user interface of the configurator  accesses the log file while the file remains resident on the energy management gateway . Further, in some examples, the user interface of the configurator  downloads or prints the log file upon receipt of a request to do so from a user. In other examples, the configurator  receives multiple log files generated by multiple energy management gateways.","The configurator  also implements a system interface through which the configurator  exchanges configuration information with the BMS client  and the energy management gateway . As shown in , the configuration information exchanged between the configurator  and the energy management gateway  includes parameters that specify the entry points, identifiers and queries described above. In one example, the configuration information exchanged between the configurator  and the energy management gateway  also includes instructions that will cause the gateway  to start, stop or restart operation.","The configuration information exchanged between the configurator  and the BMS client  includes any information required by the BMS client  to interoperate with the energy management gateway . As shown in , this information includes a map of valid values for query arguments that the BMS client  may use to request execution of queries. As those described above, query arguments control the scope and content of the processing initiated via the queries.","Utilizing the map of query argument values, the BMS client  monitors and controls the power usage of the managed devices via the energy management gateway . The BMS client  may alter the power usage of the managed device in response to any of several events. For instance, in some examples, the BMS client  monitors the power usage of the managed devices and issues commands to decrease consumption in response to the power usage of the managed devices transgressing a threshold. In other examples, the BMS client  monitors security devices within a building and issues commands to increase consumption in response to detecting the presence of a tenant, such as via a door contact sensor or swiping of a security badge. In other examples, the BMS client  issues commands to adjust power consumption in response to a predetermined schedule, such as based on time of day, day of week or day in year, to control resource utilization during off-peak periods.","As illustrated in , the BMS client  implements a system interface through which the BMS client  exchanges energy management information with the energy management gateway . Some of this energy management information is used by the energy management gateway  to monitor and control the managed devices. Examples of this information include data representative of the power levels to be adopted by the managed devices, a subset of managed devices targeted for a particular query and a time interval that transpires between successive executions of a particular query. Other examples of the energy management information include data useful for troubleshooting problem queries. Examples of this information include a timestamp indicating when a particular query was last successfully executed, the number of managed devices that acknowledged execution of a particular query and the number of managed devices that negatively acknowledged execution of a particular query. According to some examples, the BMS client  implements another system interface through which the BMS client  shares the energy management information with one or more building management system workstation applications. In these examples, the building management system workstation applications provide a user interface through which the building management system workstation applications receive configuration information that controls the behavior of the managed devices along with the other subsystems that are under the control of the building management system.","As shown in , the energy management gateway  implements a system interface through which the energy management gateway  exchanges configuration information with the configurator , energy management information with the BMS client  and query information with the network domain . According to various examples, the energy management gateway  implements these system interfaces utilizing a variety of communication protocols. For instance, in one example, the energy management gateway  communicates with the configurator  using an IP protocol, communicates with the BMS client  using a MODBUS protocol, such as MODBUS version V1.1b available from the Modbus Organization, Inc. of Hopkinton, Mass., and communicates with the network domain  using an EnergyWise protocol. In another example, the energy management gateway  communicates with the BMS client  using web services in addition to, or instead of, the MODBUS protocol.","Upon receipt of configuration information from the configurator , the energy management gateway  stores the configuration information in a local data storage device and initializes its operation using parameters contained within the configuration information. The operational parameters included in the configuration information specify the addresses of the entry points to the network domain  and the queries that may be issued to the entry points. In one example, as part of this configuration and initialization process, the energy management gateway  opens a log file and stores in the log file results (including acknowledgments, errors and warnings) of its configuration and operational processes. As discussed above, the energy management gateway  may provide this log file to the configurator , which may, in turn, display the logged results to a user.","In another example, as part of this configuration and initialization process, the energy management gateway  queries the network domain  to identify managed devices within the network domain , generates a list of the managed devices and provides the list to the configurator . As discussed above, the configurator  may display this list to a user during execution of its query configuration activities. Thus, in this example, the configuration information is received in two portions, the first portion including parameters that enable the energy management gateway  to discover the managed devices included in the network domain  via its entry points, and the second portion including parameters that allow the energy management gateway  to configure queries.","According to a number of examples, after the configuration and initialization process is complete, the energy management gateway  enters a listening state. In some examples, the energy management gateway  configures and issues a query to the network domain  via one or more entry points responsive to receipt of a request for energy management information from the BMS client . In these examples, after receiving a response to the query from the one or more entry points, the energy management gateway  provides information representative of the arguments and results of the query, for example energy usage values and error codes, via a result returned to the BMS client . In other examples, the energy management gateway  configures and issues queries asynchronously from receipt of energy management information from the BMS client . For instance, in some of these examples, the energy management gateway  configures and issues queries according to a predefined schedule and stores the results of the queries in local storage. In these examples, the energy management gateway  responds to queries for information gathered according to the predefined schedule by providing the results of the most recently executed scheduled query. Additional exemplary processes executed by the energy management gateway  are described further below with reference to .","Some examples of the energy management gateway  include additional security features. In one example, the energy management gateway  accepts queries only from BMS clients transmitting from a previously recorded and authorized IP address. In another example, the energy management gateway  includes multiple physical network connections to separate the BMS client  from the network domain . In some examples, the energy management gateway  is keyed to a serial number of the processor or hard drive, thereby preventing execution of the energy management gateway  on an unauthorized system.","Other examples of the energy management gateway  are manufactured within a physical footprint that enables the energy management gateway  to be deployed on a wall mount, DIN rail mount or a rack mount. In addition, some examples of the energy management gateway  include an external data storage device for accumulating energy data.","As shown in , the network domain  includes managed devices, network devices and specialized network devices referred to as entry points. Entry points are in data communication with the energy management gateway . Entry points receive queries directed to the managed devices located within the network domain  and provide responses to the queries after execution of the queries by the network devices and managed devices.","While  depicts a single network domain , the energy management gateway  is not limited to communicating with a single network domain. In some examples, the energy management gateway  communicates with multiple domains. In these examples, the energy management gateway  can issue a single query to multiple domains by sequentially issuing the query to entry points of each domain with one or more managed devices that are targeted by the query. In another example, the energy management gateway  is architected using a multi-threaded model that allows the energy management gateway  to implement multiple, concurrent threads to execute queries, respond to energy management information received from the BMS client , or for other processing purposes. When executing queries, each thread controls execution of a single query to one or more network domains. Using a multi-threaded approach, the energy management gateway  can query multiple network domains concurrently.","Examples of energy management systems are not limited to the particular configuration illustrated in . Various examples utilize a variety of hardware components, software components and combinations of hardware and software components configured to perform the processes and functions described herein. In some examples, the energy management system is implemented using a distributed computer system, such as the distributed computer system described further below with regard to .  illustrates one such example that includes an energy management system .","As shown in , the energy management system  includes a BMS workstation , a BMS controller , BMS devices , a gateway , a CISCO switch , endpoints , an IP network , a BMS network  and another network . The BMS workstation  implements a set of BMS configuration and management applications and an EW configurator. The BMS controller  implements a BMS controller component. The gateway  implements a configuration interface, a gateway runtime interface, a gateway component , an EW interface and a CISCO library. In this example, the BMS workstation , the BMS controller , the gateway  and the CISCO switch  are implemented using one or more computer systems, such the computer systems discussed further below with reference to . Each of the networks ,  and  includes a physical bus and other physical layer components required to support its designated protocol.","The EW configurator shown in  is a configurator, such as the configurator , that further configures the BMS controller  and the gateway  to provide energy management functionality using the CISCO EnergyWise protocol. The EW configurator implements a user interface through which the EW configurator receives EnergyWise queries that collect energy management information and set power levels of endpoints. As shown in , both the BMS applications and the EW configurator communicate with the BMS controller resident on the BMS controller  using the IP network . In at least one example, the EW configurator configures the BMS controller to utilize the gateway  via a map, such as the map of valid values for query arguments described above with reference to .","The EnergyWise queries received by the EW configurator illustrated in  each include a command and a set of associated arguments, which are also referred to as \u201cqualifiers.\u201d The qualifiers enable selection of a subset of the endpoints for command execution. The available commands include the set, sum and collect commands. The available qualifiers for these commands include domain, node name, role, device type, keywords and importance qualifiers. The domain qualifier specifies the name of a logical grouping of endpoints. Each endpoint belongs to a single domain. The node name qualifier identifies a specific node or domain member. The role qualifier groups endpoints by the user type or the functional type of the endpoint. Example values for the roles qualifier include \u201cexecutive,\u201d \u201csupport staff\u201d and \u201cIT.\u201d The device type qualifier groups endpoints by functional type. Example values for the device type qualifier include \u201cphone\u201d and \u201ccopier.\u201d In some examples, the device type qualifier is replaced by a category qualifier. Example values for the category qualifier include \u201cConsumer,\u201d \u201cProducer\u201d and \u201cMeter.\u201d The category qualifier may include one or more of these enumerated values. The keywords qualifier groups endpoints by an arbitrary string. The importance qualifier groups endpoints by level of importance to a facility. Endpoints with an importance that is less than or equal to the value specified within a query will execute the command included in the query. For example, the following EnergyWise query would turn off all the phones in Building 2 that have an importance value of 20 or less: \u201cImportance=20, Name=bldg2, Role=phone, Set Level 0.\u201d","In one example, the EW configurator illustrated in  supports wildcard characters within the specified values of one or more qualifiers. For instance, in one example, upon receipt of an indication that a user wishes to include a wildcard character within the value of a node name qualifier or a role qualifier, the EW configurator configures an EnergyWise query that includes a qualifier value with the wildcard character. In another example, upon receipt of an indication that a user wishes to include a wildcard character with the value of a domain qualifier, device type qualifier, or keyword qualifier, the EW configurator configures an EnergyWise query that includes qualifier values with the wildcard character.","The BMS controller shown in  is a BMS client, such as the BMS client , that further interacts with the gateway  to control the endpoints . The endpoints  are managed devices that support the CISCO EnergyWise protocol. Once configured, the BMS controller monitors and controls the operations of the BMS devices , via the BMS network , and the endpoints , via the network . As shown in , the network  may support any of a variety of BMS or industrial protocols, such as MODBUS, BACnet, LON, etc.","The gateway  illustrated in  is an energy management gateway, such as the energy management gateway , that further facilitates interoperation of the BMS controller  and the endpoints  using the CISCO EnergyWise protocol. As shown in , the gateway  implements the configuration interface to exchange configuration information with the BMS workstation  via the IP network . The gateway  configures itself for operation using the configuration information received from the BMS workstation . The configuration activity includes generation of one or more EnergyWise queries as specified in the configuration information.","The gateway  also implements the gateway runtime interface to exchange energy management information with the BMS controller . Upon receipt of energy management information from the BMS controller , the gateway runtime interface parses the energy management information and stores the parsed energy management information within a data storage device included within the gateway component . This data storage device is shared by the gateway runtime interface and the EW interface. In at least one example described further below with reference to , the shared data storage device enables the gateway runtime interface and the EW interface to execute asynchronously.","Continuing the example shown in , the EW interface retrieves the parsed information and converts queries and query arguments represented by the parsed information into one or more EnergyWise queries that contain one or more qualifiers. Next, the EW interface utilizes the CISCO library to issue the one or more EnergyWise queries to the CISCO switch  via the IP network . The CISCO switch  is an entry point into a network domain, such as the network domain , that includes the endpoints . The CISCO switch  propagates the one or more EnergyWise queries to the endpoints . As shown in , some of the endpoints  natively support the EnergyWise protocol while others support Power Over Ethernet but do not support the EnergyWise protocol. Queries directed to devices that do not support the EnergyWise protocol are processed by the CISCO switch . Query responses are processed in the opposite manner, i.e. received by the CISCO switch , provided to the EW interface via the CISCO library, provided to the gateway component , provided to the gateway runtime interface and, finally, provided to the BMS controller . In some examples, Additional exemplary processes executed by the gateway  are described further below with reference to .",{"@attributes":{"id":"p-0061","num":"0060"},"figref":["FIG. 2B","FIG. 2A","FIG. 2B"],"b":["208","204","210"]},"According to one example, the BMS controller  communicates energy management information to the gateway runtime interface that includes a query requesting energy usage data for endpoints running within the network domain. This communication is illustrated by the arrow a. The gateway runtime interface receives the communication and retrieves, from the shared data storage device, information representative of the energy usage data requested by the query. Next, as illustrated by the arrow b, the gateway runtime interface sends a response that includes the information representative of the energy usage data to the BMS controller .","According to another example, the BMS controller  communicates energy management information to the gateway runtime interface that includes a query execution request. This communication is illustrated by the arrow c. In response to receiving the query execution request, the gateway runtime interface writes the request to the shared data storage device. Next, as illustrated by the arrow d, the gateway runtime interface sends a response that acknowledges receipt and storage of the query execution request.","Continuing this example, at some future point in time, the EW interface scans the shared data storage device for query execution requests and retrieves the query execution requested stored therein. Next, as illustrated by the arrow g, the EW interface issues an EnergyWise query. After the EnergyWise query has been processed, the CISCO switch  responds to the EnergyWise query. This response is illustrated by the arrow h. After receiving the response, the EW interface writes the results of the query to the shared data storage device.","According to another example, the EW interface executes an unsolicited EnergyWise query according to a predetermined schedule. In this example, as illustrated by the arrow e, the EW interface periodically issues an EnergyWise query. After the EnergyWise query has been processed, the CISCO switch  responds to the EnergyWise query. This response is illustrated by the arrow f. After receiving the response, the EW interface writes the results of the query to the shared data storage device.","It is to be appreciated that according to these examples, the communications between the BMS controller  and the gateway runtime interface and the communications between the EW interface and the CISCO switch  are logically separated and completely asynchronous. In addition, the EW interface can execute queries on a scheduled basis and store the results in the shared data storage device, regardless of when or if the BMS controller has requested one or more queries. Further, when the BMS controller  requests data via the gateway runtime interface, the gateway runtime interface provides energy management information representative of the query results stored in the shared data storage device. This energy management information includes a timestamp indicating when the results of the last successfully executed query were received by the EW interface.","While the examples described above with reference to  illustrate asynchronous execution between the gateway runtime interface and the EW interface, examples are not limited only to asynchronous execution of these components. In another example, the gateway runtime interface and the EW interface execute in a synchronous mode. According to this example, the gateway runtime interface receives energy management information from the BMS controller that includes a request for synchronous execution of a query. For instance, the energy management information may include a flag indicating synchronous execution is requested for the embedded query, or the energy management information may include a request type that the gateway runtime interface is configured to execute synchronously. Responsive to receiving this request, the gateway runtime interface stores a query execution request in the shared data storage device, but awaits results for the execution of the corresponding EnergyWise query or queries prior to responding to the BMS controller with the results of the corresponding EnergyWise query or queries.",{"@attributes":{"id":"p-0068","num":"0067"},"figref":["FIG. 3","FIG. 3","FIG. 4"],"b":["300","300","302","304","306","302","304","306","302","304","306","306"]},"In the example illustrated in , the combination of the BMS workstation , the BMS controller  and the gateway , perform the role of a Management Station as defined within the EnergyWise paradigm. The EnergyWise configurator shown in  is a configurator, such as the configurators referenced in , that further generates one or more text files that embody the configuration information needed to setup the BMS controller  and the gateway  for operation. Like the configurators previously described, the EnergyWise configurator illustrated in  provides a user interface through which the BMS workstation  receives configuration information. This configuration information may include gateway IP configuration information, address information for the entry points to one or more domains, security key information for the one or more domains and EnergyWise queries. Upon receipt of an indication that a user wishes to alter configuration information of a previously configured gateway, the user interface of the EnergyWise configurator presents an option to protect the MODBUS registers already created to avoid laborious recommissioning of MODBUS clients. To distribute the configuration information, the EnergyWise configurator may communicate with the BMS controller  and the gateway  using any set of IP protocols, such as HTTP, REST, SOAP, FTP, TFTP, Telnet, SSH, etc. Further, in at least one example, the EnergyWise configurator is implemented as a browser based interface served by the web server executing on the gateway .","As shown in , the MODBUS Serial or TCP driver exchanges energy management information with the gateway  by reading and writing MODBUS register data. In one example, this MODBUS register data is defined within a map provided by the EnergyWise configurator. The map may be stored in a variety of formats including JSON, csv and pdf. The BMS controller  uses energy management information received via the MODBUS Serial or TCP driver to manage all of the managed devices and endpoints under its control.","The gateway  illustrated in  is an energy management gateway, such as either of the energy management gateways  or , that further includes a JSON runtime interface and a MODBUS runtime interface. The gateway  executes the JSON interface to parse and manipulate the one or more text files embodying the configuration information received from the EnergyWise configurator resident on the BMS workstation . The gateway  executes the MODBUS runtime interface to exchange information with the MODBUS serial or TCP driver resident on the BMS controller . Additional exemplary processes executed by the gateway  are described further below with reference to .","One example of a JSON global configuration file follows:",{"@attributes":{"id":"p-0073","num":"0072"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"196pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"{"]},{"entry":[{},"\u2003\u2003\u2002\u201cGatewayConfiguration\u201d:{"]},{"entry":[{},"\u2003\u2003\u2002\/\/gateway IP configuration parameters"]},{"entry":[{},"\u2003\u2003\u2002\u201cHostname\u201d: \u201cLabPhoneGateway\u201d,"]},{"entry":[{},"\u2003\u2003\u2002\u201cIPAddress\u201d: \u201c10.158.23.100\u201d, \/\/ or \u201cDHCP\u201d"]},{"entry":[{},"\u2003\u2003\u2002\u201cSubnetMask\u201d: \u201c255.255.255.0\u201d, \/\/ ignore if \u201cDHCP\u201d"]},{"entry":[{},"\u2003\u2003\u2002\u201cDefaultGateway\u201d: \u201c10.158.23.1\u201d, \/\/ ignore if \u201cDHCP\u201d"]},{"entry":[{},"\u2003\u2003\u2002\/\/default queries parameters"]},{"entry":[{},"\u2003\u2003\u2002\u201cImportance\u201d: \u201c70\u201d, \/\/ 0 - 100"]},{"entry":[{},"\u2003\u2003\u2002\u201cRefreshRate\u201d: \u201c60\u201d \/\/ optional \/ 0-65535 seconds"]},{"entry":[{},"\u2003\u2003\u2002},"]},{"entry":[{},"\u2003\u2003\u2002\u201cDomainsConfiguration\u201d:{"]},{"entry":[{},"\u2003\u2003\u2002\/\/ see next section"]},{"entry":[{},"\u2003\u2003\u2002}"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{},"b":["304","306"]},{"@attributes":{"id":"p-0074","num":"0073"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"133pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Register","Name","Access","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["40001","GHS","R","Error code reporting the Gateway health"]},{"entry":[{},{},{},"status"]},{"entry":[{},{},{},"0 = HEALTHY"]},{"entry":[{},{},{},"1 = Communication Fault"]},{"entry":[{},{},{},"2 = Service Not Running"]},{"entry":[{},{},{},"3 = HW\/SW Failure"]},{"entry":[{},{},{},"Remaining values reserved."]},{"entry":["40002","GIMP","RW","This register exposes the default queries"]},{"entry":[{},{},{},"importance for the BMS to read and modify"]},{"entry":[{},{},{},"it."]},{"entry":["40003","GRR","RW","This register exposes the default queries"]},{"entry":[{},{},{},"refresh rate for the BMS to read and modify"]},{"entry":[{},{},{},"it."]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"One example of a JSON domain configuration file follows:",{"@attributes":{"id":"p-0076","num":"0075"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"{"},{"entry":"\u2003\u2003\u2002\u201cDomainsConfiguration\u201d:{"},{"entry":"\u2003\u2003\u2002\/\/EnergyWise Domains Configuration"},{"entry":"\u2003\u2003\u2002\u201cDomain\u201d:{"},{"entry":"\u2003\u2003\u2002\/\/domain entrypoint configuration"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cDomainName\u201d: \u201cOfficeNetwork\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cEntryPointIP\u201d: \u201c10.158.3.1\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cSecretKey\u201d:\u201ccisco\u201d, \/\/ secret shared key"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cPort\u201d: \u201c43292\u201d, \/\/ optional (use default)"},{"entry":"\u2003\u2003\u2002\/\/default queries parameters"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cImportance\u201d:\u201c80\u201d, \/\/ Default Importance - inherited if"},{"entry":"\u2003\u2003\u2003\u2003\u2003missing"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cRefreshRate\u201d:\u201c60\u201d, \/\/ Default Refresh Rate (secs) - inherited"},{"entry":"\u2003\u2003\u2003\u2003\u2003if missing"},{"entry":"\u2003\u2003\u2003\u2003\u2003},"},{"entry":"\u2003\u2003\u2002\u201cDomain\u201d:{"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cDomainName\u201d: \u201cLabNetwork\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cEntryPointIP \u201d: \u201c10.158.4.1\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cSecretKey\u201d:\u201ccisco\u201d, \/\/ secret shared key"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cPort\u201d: \u201c43292\u201d, \/\/ optional (use default)"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cImportance\u201d:\u201c70\u201d, \/\/ Default Importance - inherited if"},{"entry":"\u2003\u2003\u2003\u2003\u2003missing"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cRefreshRate\u201d:\u201c30\u201d, \/\/ Default Refresh Rate (secs) - inherited"},{"entry":"\u2003\u2003\u2003\u2003\u2003if missing"},{"entry":"\u2003\u2003\u2002}"},{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{},"b":["304","306"]},{"@attributes":{"id":"p-0077","num":"0076"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"105pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Register","Name","Access","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["40004","DHS","R","Error code reporting the Domain"]},{"entry":[{},"\u201cOfficeNetwork\u201d",{},"status"]},{"entry":[{},{},{},"0 = HEALTHY"]},{"entry":[{},{},{},"1 = Communication Fault"]},{"entry":[{},{},{},"Remaining values reserved."]},{"entry":["40005","DIMP","RW","This register exposes the default"]},{"entry":[{},"\u201cOfficeNetwork\u201d",{},"queries importance for the BMS"]},{"entry":[{},{},{},"to read and modify it."]},{"entry":["40006","DRR","RW","This register exposes the default"]},{"entry":[{},"\u201cOfficeNetwork\u201d",{},"queries refresh rate for the BMS"]},{"entry":[{},{},{},"to read and modify it."]},{"entry":["40007","DHS","R","Error code reporting the Gateway"]},{"entry":[{},"\u201cLabNetwork\u201d",{},"health status"]},{"entry":[{},{},{},"0 = HEALTHY"]},{"entry":[{},{},{},"1 = Communication Fault"]},{"entry":[{},{},{},"Remaining values reserved."]},{"entry":["40008","DIMP","RW","This register exposes the default"]},{"entry":[{},"\u201cLabNetwork\u201d",{},"queries importance for the BMS"]},{"entry":[{},{},{},"to read and modify it."]},{"entry":["40009","DRR","RW","This register exposes the default"]},{"entry":[{},"\u201cLabNetwork\u201d",{},"queries refresh rate for the BMS"]},{"entry":[{},{},{},"to read and modify it."]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}}},"One example of a JSON query configuration file follows:",{"@attributes":{"id":"p-0079","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"{"},{"entry":"\/\/EnergyWise Queries Configuration"},{"entry":"\u2003\u2003\u2002\u201cQuery1\u201d:{"},{"entry":"\u2003\u2003\u2002\/\/Sum query definition"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cType\u201d:\u201cSum\u201d, \/\/ \u201cSum\u201d or \u201cSet\u201d"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cDomainName\u201d: \u201cOfficeNetwork\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cNodeName\u201d: \u201cCore2\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cRoleName\u201d: \u201cManager\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cDeviceType\u201d: null, \/\/ Device Type or empty or null"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cKeyWords\u201d: \u201cAdministration,Security\u201d, \/\/ comma separated"},{"entry":"\u2003\u2003\u2003\u2003\u2003keywords"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cImportance\u201d: \u201c70\u201d, \/\/ inherited if missing"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cRefreshRate\u201d: \u201c60\u201d, \/\/ inherited if missing"},{"entry":"\u2003\u2003\u2002},"},{"entry":"\u2003\u2003\u2002\u201cQuery2\u201d:{"},{"entry":"\u2003\u2003\u2002\/\/Set query definition"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cType\u201d:\u201cSet\u201d, \/\/ \u201cSum\u201d or \u201cSet\u201d"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cDomainName\u201d: \u201cLabNetwork\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cNodeName\u201d: \u201cLab\u201d,"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cRoleName\u201d: \u201cIT\u201d, \/\/ Optional | Name | null"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cDeviceType\u201d: \u201cPhone\u201d, \/\/ Device Type or empty or null"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cKeyWords\u201d: \u201cSecurity\u201d, \/\/ Optional | comma separated"},{"entry":"\u2003\u2003\u2003\u2003\u2003keywords"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u201cImportance\u201d: \u201c70\u201d, \/\/ Optional - inherited if missing"},{"entry":"\u2003\u2003\u2002}"},{"entry":"}"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}},"br":{},"b":["304","306"]},{"@attributes":{"id":"p-0080","num":"0079"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"126pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 3"},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}},{"entry":["Register","Name","Access","Description"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["40010","CTL","RW","Query Control Register"]},{"entry":[{},"\u201cQuery1\u201d",{},"0 = Executed successfully"]},{"entry":[{},{},{},"1 = Trigger Execution"]},{"entry":[{},{},{},"2 = Busy\/Executing"]},{"entry":[{},{},{},"3 = Execution Failed"]},{"entry":[{},{},{},"Remaining values reserved."]},{"entry":["40011","PKW","R","Energy usage: Kilowatt"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40012","PW","R","Energy usage: Watt"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40013","PMW","R","Energy usage: mWatt"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40014","LEV","RW","Power Level\/0-10 - Not used in Query1"]},{"entry":["40015","TSYM","R","Last query execution timestamp: YYMM"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40016","TSDH","R","Last query execution timestamp: DDhh"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40017","TSMS","R","Last query execution timestamp: mmss"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40018","IMP","RW","Query Importance 0-100"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40019","RR","RW","Query periodic execution rate"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40020","ACKS","R","Number of ACKs received"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40021","NACKS","R","Number of NACKs received"]},{"entry":[{},"\u201cQuery1\u201d"]},{"entry":["40022","CTL","RW","Query Control Register"]},{"entry":[{},"\u201cQuery2\u201d",{},"0 = Executed successfully"]},{"entry":[{},{},{},"1 = Trigger Execution"]},{"entry":[{},{},{},"2 = Busy\/Executing"]},{"entry":[{},{},{},"3 = Execution Failed"]},{"entry":[{},{},{},"Remaining values reserved."]},{"entry":["40023","PKW","R","Energy usage: Kilowatt - Not used in"]},{"entry":[{},{},{},"Query2"]},{"entry":["40024","PW","R","Energy usage: Watt - Not used in Query2"]},{"entry":["40025","PMW","R","Energy usage: mWatt - Not used in"]},{"entry":[{},{},{},"Query2"]},{"entry":["40026","LEV","RW","Power Level\/0-10"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":["40027","TSYM","R","Last query execution timestamp: YYMM"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":["40028","TSDH","R","Last query execution timestamp: DDhh"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":["40029","TSMS","R","Last query execution timestamp: mmss"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":["40030","IMP","RW","Query Importance 0-100"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":["40031","RR","RW","Query periodic execution rate - Not used"]},{"entry":[{},{},{},"in Query2"]},{"entry":["40032","ACKS","R","Number of ACKs received"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":["40033","NACKS","R","Number of NACKs received"]},{"entry":[{},"\u201cQuery2\u201d"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}}},"br":{}},{"@attributes":{"id":"p-0081","num":"0080"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"154pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"{"]},{"entry":[{},"\u2003\u2003\u2002\u201cResponse\u201d: 0,"]},{"entry":[{},"\u2003\u2003\u2002\u201cErrorCode\u201d: 0"]},{"entry":[{},"\u2003\u2003\u2002\u201cErrorDescription\u201d: \u201c \u201d"]},{"entry":[{},"}"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}}},"br":{}},"Information within the energy management systems may be stored in any logical construction capable of holding information on a computer readable medium including, among other structures, flat files, indexed files, hierarchical databases, relational databases or object oriented databases. The data may be modeled using unique and foreign key relationships and indexes. The unique and foreign key relationships and indexes may be established between the various fields and tables to ensure both data integrity and data interchange performance.","The interfaces disclosed herein, which include both system interfaces and user interfaces, exchange information with various providers and consumers. These providers and consumers may include any external entity including, among other entities, users and systems. Each of the interfaces disclosed herein may both restrict input to a predefined set of values and validate any information entered prior to using the information or providing the information to other components. Additionally, each of the interfaces disclosed herein may validate the identity of an external entity prior to, or during, interaction with the external entity. For instance, in various examples, a configurator implements role-based configuration privileges with separate password-protected logins for administrators and engineers. These functions may prevent the introduction of erroneous data into the energy management system or unauthorized access to the energy management system.","Computer System","As discussed above with regard to , various aspects and functions described herein may be implemented as specialized hardware or software components executing in one or more computer systems. There are many examples of computer systems that are currently in use. These examples include, among others, network appliances, personal computers, workstations, mainframes, networked clients, servers, media servers, application servers, database servers and web servers. Other examples of computer systems may include mobile computing devices, such as cellular phones and personal digital assistants, and network equipment, such as load balancers, routers and switches. Further, aspects may be located on a single computer system or may be distributed among a plurality of computer systems connected to one or more communications networks.","For example, various aspects and functions may be distributed among one or more computer systems configured to provide a service to one or more client computers, or to perform an overall task as part of a distributed system. Additionally, aspects may be performed on a client-server or multi-tier system that includes components distributed among one or more server systems that perform various functions. Consequently, examples are not limited to executing on any particular system or group of systems. Further, aspects and functions may be implemented in software, hardware or firmware, or any combination thereof. Thus, aspects and functions may be implemented within methods, acts, systems, system elements and components using a variety of hardware and software configurations, and examples are not limited to any particular distributed architecture, network, or communication protocol.","Referring to , there is illustrated a block diagram of a distributed computer system , in which various aspects and functions are practiced. As shown, the distributed computer system  includes one more computer systems that exchange information. More specifically, the distributed computer system  includes computer systems ,  and . As shown, the computer systems ,  and  are interconnected by, and may exchange data through, a communication network . The network  may include any communication network through which computer systems may exchange data. To exchange data using the network , the computer systems ,  and  and the network  may use various methods, protocols and standards, including, among others, Fibre Channel, Token Ring, Ethernet, Wireless Ethernet, Bluetooth, IP, IPV6, TCP\/IP, UDP, DTN, HTTP, FTP, SNMP, SMS, MMS, SS7, JSON, SOAP, CORBA, REST and Web Services. To ensure data transfer is secure, the computer systems ,  and  may transmit data via the network  using a variety of security measures including, for example, TLS, SSL or VPN. While the distributed computer system  illustrates three networked computer systems, the distributed computer system  is not so limited and may include any number of computer systems and computing devices, networked using any medium and communication protocol.","As illustrated in , the computer system  includes a processor , a memory , a bus , an interface  and data storage device . To implement at least some of the aspects, functions and processes disclosed herein, the processor  performs a series of instructions that result in manipulated data. The processor  may be any type of processor, multiprocessor or controller. Some exemplary processors include commercially available processors such as an Intel Xeon, Itanium, Core, Celeron, or Pentium processor, an AMD Opteron processor, a Sun UltraSPARC or IBM Power5+ processor and an IBM mainframe chip. The processor  is connected to other system components, including one or more memory devices , by the bus .","The memory  stores programs and data during operation of the computer system . Thus, the memory  may be a relatively high performance, volatile, random access memory such as a dynamic random access memory (DRAM) or static memory (SRAM). However, the memory  may include any device for storing data, such as a disk drive or other non-volatile storage device. Various examples may organize the memory  into particularized and, in some cases, unique structures to perform the functions disclosed herein. These data structures may be sized and organized to store values for particular data and types of data.","Components of the computer system  are coupled by an interconnection element such as the bus . The bus  may include one or more physical busses, for example, busses between components that are integrated within a same machine, but may include any communication coupling between system elements including specialized or to standard computing bus technologies such as IDE, SCSI, PCI and InfiniBand. The bus  enables communications, such as data and instructions, to be exchanged between system components of the computer system .","The computer system  also includes one or more interface devices  such as input devices, output devices and combination input\/output devices. Interface devices may receive input or provide output. More particularly, output devices may render information for external presentation. Input devices may accept information from external sources. Examples of interface devices include keyboards, mouse devices, trackballs, microphones, touch screens, printing devices, display screens, speakers, network interface cards, etc. Interface devices allow the computer system  to exchange information and to communicate with external entities, such as users and other systems.","The data storage device  includes a computer readable and writeable nonvolatile, or non-transitory, data storage medium in which instructions are stored that define a program or other object that is executed by the processor . The data storage device  also may include information that is recorded, on or in, the medium, and that is processed by the processor  during execution of the program. More specifically, the information may be stored in one or more data structures specifically configured to conserve storage space or increase data exchange performance. The instructions may be persistently stored as encoded signals, and the instructions may cause the processor  to perform any of the functions described herein. The medium may, for example, be optical disk, magnetic disk or flash memory, among others. In operation, the processor  or some other controller causes data to be read from the nonvolatile recording medium into another memory, such as the memory , that allows for faster access to the information by the processor  than does the storage medium included in the data storage device . The memory may be located in the data storage device  or in the memory , however, the processor  manipulates the data within the memory, and then copies the data to the storage medium associated with the data storage device  after processing is completed. A variety of components may manage data movement between the storage medium and other memory elements and examples are not limited to particular data management components. Further, examples are not limited to a particular memory system or data storage system.","Although the computer system  is shown by way of example as one type of computer system upon which various aspects and functions may be practiced, aspects and functions are not limited to being implemented on the computer system  as shown in . Various aspects and functions may be practiced on one or more computers having a different architectures or components than that shown in . For instance, the computer system  may include specially programmed, special-purpose hardware, such as an application-specific integrated circuit (ASIC) tailored to perform a particular operation disclosed herein. While another example may perform the same function using a grid of several general-purpose computing devices running MAC OS System X with Motorola PowerPC processors and several specialized computing devices running proprietary hardware and operating systems.","The computer system  may be a computer system including an operating system that manages at least a portion of the hardware elements included in the computer system . In some examples, a processor or controller, such as the processor , executes an operating system. Examples of a particular operating system that may be executed include a Windows-based operating system, such as, Windows NT, Windows 2000 (Windows ME), Windows XP, Windows Vista or Windows 7 operating systems, available from the Microsoft Corporation, a MAC OS System X operating system available from Apple Computer, one of many Linux-based operating system distributions, for example, the Enterprise Linux operating system available from Red Hat Inc., a Solaris operating system available from Sun Microsystems, or a UNIX operating systems available from various sources. Many other operating systems may be used, and examples are not limited to any particular operating system.","The processor  and operating system together define a computer platform for which application programs in high-level programming languages are written. These component applications may be executable, intermediate, bytecode or interpreted code which communicates over a communication network, for example, the Internet, using a communication protocol, for example, TCP\/IP. Similarly, aspects may be implemented using an object-oriented programming language, such as .Net, SmallTalk, Java, C++, Ada, or C# (C-Sharp). Other object-oriented programming languages may also be used. Alternatively, functional, scripting, or logical programming languages may be used.","Additionally, various aspects and functions may be implemented in a non-programmed environment, for example, documents created in HTML, XML or other format that, when viewed in a window of a browser program, can render aspects of a graphical-user interface or perform other functions. Further, various examples may be implemented as programmed or non-programmed elements, or any combination thereof. For example, a web page may be implemented using HTML while a data object called from within the web page may be written in C++. Thus, the examples are not limited to a specific programming language and any suitable programming language could be used. Accordingly, the functional components disclosed herein may include a wide variety of elements, e.g. specialized hardware, executable code, data structures or objects, that are configured to perform the functions described herein.","In some examples, the components disclosed herein may read parameters that affect the functions performed by the components. These parameters may be physically stored in any form of suitable memory including volatile memory (such as RAM) or nonvolatile memory (such as a magnetic hard drive). In addition, the parameters may be logically stored in a propriety data structure (such as a database or file defined by a user mode application) or in a commonly shared data structure (such as an application registry that is defined by an operating system). In addition, some examples provide for both system and user interfaces that allow external entities to modify the parameters and thereby configure the behavior of the components.","Energy Management Processes","Some examples perform processes for configuring and implementing an energy management gateway.  illustrates one example of such a process, the process . As shown in , the process  includes acts of configuring a gateway, processing energy management information and executing queries.","In act , a gateway is configured. In one example, an energy management gateway, such as the energy management gateway  described above with reference to , configures itself upon receipt of configuration information from a configurator, such as the configurator . One example of a process performed in the act  is described further below with reference to .","In act , energy management information is processed. In at least one example, the energy management gateway  processes the energy management information by receiving and responding to queries provided by a BMS client, such as the BMS client . One example of a process performed in the act  is described further below with reference to .","In act , queries are executed. In at least one example, the energy management gateway  executes a subset of unsolicited queries independently and asynchronously from other acts and executes another subset of queries in response to receiving requests to do so. One example of a process performed in the act  is described further below with reference . The process  ends after execution of the act .","As described above with reference to the act  of the process , some examples perform an act of configuring a gateway.  illustrates an exemplary process  for performing the act  in which an energy management system, such as the energy management system , configures a gateway. As shown in , the process  includes acts of receiving domain configuration information, configuring domains, discovering endpoints, receiving query configuration information and configuring queries.","In act , domain configuration information is received. According to some examples, an energy management gateway, such as the gateway , receives the domain configuration information from an EnergyWise configurator, such as the EnergyWise configurator resident on the BMS workstation . In these examples, the energy management gateway stores the domain configuration information in a local configuration data storage device, such as one or more text files. In one example, the domain configuration information is organized according to the structures specified in Tables 4 and 5:",{"@attributes":{"id":"p-0103","num":"0102"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 4"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Gateway"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Hostname","\u201cGateway HostName\u201d"]},{"entry":["IPAddress","IPv4 address or \u201cDHCP\u201d"]},{"entry":["SubnetMask","Ignored if DHCP"]},{"entry":["DefaultGateway","Ignored if DHCP"]},{"entry":["Queries Importance","0-100"]},{"entry":["SUM Queries RefreshRate","0-65535 (seconds)\/default to 0 if missing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0104","num":"0103"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 5"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Domains"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["DomainName","\u201cDomain Name\u201d"]},{"entry":["EntryPoint Address","IPv4 address"]},{"entry":["SecretKey","Secret key\/password"]},{"entry":["EntryPoint Port","1025-65535 - default 43400 used if missing"]},{"entry":["Queries Importance","0-100\/default from Global if missing"]},{"entry":["SUM Queries RefreshRate","default from Global if missing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},"In act , the energy management gateway is configured with gateway and domain configuration information. In some examples, the energy management gateway configures itself using the local configuration data storage device described in the act . In these examples, the energy management gateway first opens a local log data storage device, such as a text file, to log operations performed (or errors and warnings encountered) during configuration and operation of the gateway. In at least one example, the energy management gateway creates and maintains the log file using a JSON library. Next, the energy management gateway opens the local configuration data storage device and loads the operational parameters contained therein into memory. According to one example, loading the operational parameters into memory causes the energy management gateway to set gateway communication and global parameters and define EnergyWise domains and entry points (domain names, IP Addresses, security keys, etc.).","In act , endpoints are discovered. According to some examples, the energy management gateway discovers the endpoints by issuing a collect query to the entry points configured in the act . Upon receipt of a list of endpoints from the entry points, the energy management gateway provides the list to the configurator for use in query configuration. In some examples, this list includes both an identifier of each endpoint and its characteristics (name, role, etc.).","In act , query configuration information is received. According to some examples, the energy management gateway receives the query configuration information from the configurator. In these examples, the energy management gateway stores the query configuration information in the local configuration data storage device. In one example, the query configuration information is organized according to the structure specified in Table 6:",{"@attributes":{"id":"p-0108","num":"0107"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"center"}},"thead":{"row":[{"entry":"TABLE 6"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Query"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Type","\u201cDomain Name\u201d"]},{"entry":["DomainName","IPv4 address"]},{"entry":["NodeName","Secret key\/password"]},{"entry":["RoleName","1025-65535 - default 43400 used if missing"]},{"entry":["DeviceType","\u201cDevice Name\u201d, Empty or Null"]},{"entry":["Keywords","\u201cKeywords\u201d, Empty or Null"]},{"entry":["Importance","0-100\/default from Domain if missing"]},{"entry":["PollingRate","0-65535 (seconds)\/default from Domain if missing"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}},"br":{}},"In act , the energy management gateway is configured with query information. In some examples, the energy management gateway configures itself using the local configuration data storage device. In these examples, the energy management gateway opens the local configuration data storage device and loads the operational parameters contained therein into memory. According to one example, loading these operational parameters into memory causes the energy management gateway to create EnergyWise Queries, save the configuration to the local configuration data storage device and upload the local configuration data storage device to a configurator. The process  ends after execution of the act .","As described above with reference to the act  of the process , some examples perform an act of processing energy management information.  illustrates an exemplary process  for performing the act  in which an energy management gateway processes the energy management information. As shown in , the process  includes acts of receiving energy management information including a request, determining whether the request requires execution of a query, configuring the query, storing the request to execute the query and providing a response to the energy management information.","In act , energy management information including a request is received. In some examples, an energy management gateway, such as the gateway , receives the request from a BMS controller, such as the BMS controller . According to these examples, a MODBUS serial or TCP driver resident on the BMS controller  sets one or more MODBUS registers to predetermined values that request power usage information or execution of a particular EnergyWise query.","In act , the energy management gateway determines if the energy management information includes a request that requires execution of a particular EnergyWise query. If so, the energy management gateway executes act . Otherwise the energy management gateway executes act .","In act , the query is configured. In some examples, the energy management gateway configures the query based on the values of the MODBUS registers set in act . In these examples, the energy management gateway reads the MODBUS registers and alters the EnergyWise query identified by the values of the MODBUS registers in the manner specified by the values of the MODBUS registers.","In act , the energy management gateway stores a request to execute the EnergyWise query. In some examples, the energy management gateway stores the query execution request in a designated memory location, such as within the shared data storage device illustrated with reference to . In other examples, the energy management gateway stores the request in a designated memory location within another form of memory. As is described further below, the query execution request is subject to future execution by the energy management gateway.","In act , the energy management gateway provides a response to the energy management information. In some examples, the energy management gateway provides the response to the BMS controller via a MODBUS runtime interface. In these examples, the energy management gateway provides the response by transmitting packets with the MODBUS registers and values determined in act  to the MODBUS Serial or TCP driver resident on the BMS controller. In examples where the energy management information is a request that allows asynchronous execution of an EnergyWise query, the response includes an acknowledgement of the request. In examples where the energy management information requires synchronous execution of an EnergyWise query, the response includes the results of the query. In examples where the energy management information is a request that does not require execution of an EnergyWise query, the response includes information retrieved from a local data storage device, such as the shared data storage device described above. The process  ends after execution of the act .","As described above with reference to the act  of the process , some examples perform an act of executing queries.  illustrates an exemplary process  for performing the act  in which an energy management gateway executes the queries. As shown in , the process  includes acts of issuing a query, receiving a response to the query, translating the response and storing the response.","In act , the energy management gateway issues an EnergyWise query according to a predetermined schedule or in response to finding a query execution request at a designated memory location. According to various examples, the designated memory location may be disposed within a local data storage device, such as the shared data storage device describe above, or in some other memory location. In some examples, the energy management gateway issues the EnergyWise query by transmitting the query to one or more entry points via an EnergyWise interface that utilizes a CISCO library. In these examples, the one or more entry points are entry points of the domains that include the endpoints targeted by the query.","In act , a response to the query is received. In some examples, an energy management gateway, such as the gateway , receives the response from an entry point, such as the CISCO router . According to these examples, an EnergyWise interface that utilizes a CISCO library receives the response. In one example, the response contains information indicating a number of endpoints that issued an acknowledgement to the entry point, a number of endpoints that issued a negative acknowledgement to the entry point, if a Sum command was issued, the total energy usage (in Watts) and, if an error occurred, an error code.","In act , the response is translated. In some examples, the energy management gateway translates the response based on a map that associates MODBUS registers and values with EnergyWise response values. In these examples, the energy management gateway reads and parses the EnergyWise response values, determines the MODBUS registers and values that are associated with the EnergyWise response values and sets the determined MODBUS registers to the determined values. In one example, the MODBUS registers reflect the health status of the gateway, the health status of entry points, the overall result of the query executed (success or failure) and, if the query was a Sum query, the total energy usage. In another example, the MODBUS registers indicate a timestamp reflecting when the query was executed, an execution schedule for repeating queries, the importance of the query, the number of endpoints that issued an acknowledgment of the query and the number of endpoints that issued a negative acknowledgment of the query.","In act , the energy management gateway stores the response. In some examples, the energy management gateway stores the response in a local data storage device, such as the shared data storage device described above. As discussed above, these responses may be provided to a requesting BMS controller immediately, as part of the process , or may be provided in response to a subsequent request by the BMS controller. The process  ends after execution of the act .",{"@attributes":{"id":"p-0121","num":"0120"},"figref":["FIG. 9","FIG. 9"],"b":["900","900","902","902","904","902"]},"In act , the energy management gateway determines whether the endpoints included in the domains are recorded within a local endpoints file. If not, the energy management gateway discovers endpoint information for the domains by issuing a collect query to the entry points of the domains in act . In the act , the energy management gateway also saves the endpoint information returned by the collect query in a local endpoints file.","In act , the energy management gateway determines whether a query configuration file exists at a predetermined location. If so, in act  the energy management gateway configures queries and allocates MODBUS registers with the query configuration information specified in the query configuration file. Also in the act , the energy management gateway saves the configuration results to a log file, clears all MODBUS registers and sets appropriate health statuses. Otherwise, the energy management gateway remains in the act  until deposit of the query configuration file.","In act , the energy management gateway determines whether a MODBUS message has been received from a BMS client. If so, the energy management gateway proceeds to act  to execute the query indicated in the MODBUS message. Otherwise, the energy management gateway determines whether new configuration files have been received in act . If so, the energy management gateway proceeds to the act . If not, the energy management gateway determines whether a shutdown of the gateway is imminent. If so, the process  ends. Otherwise, the energy management gateway determines whether a query scheduled for repeating execution is due to be executed again. If not, the energy management gateway proceeds to the act . If so, the energy management gateway proceeds to the act  to execute the repeating query.","In the act , the energy management gateway sets a CTL variable to the value of BUSY. In act , the energy management gateway creates a new EnergyWise session with the domain targeted by the query being executed. In act , the energy management gateway configures the query to be executed according to the configuration information of the query and the registers included in the MODBUS message. First, the energy management gateway initializes the domain name, node name, role name, device type and keywords qualifiers to the values configured for the query. Next, the energy management gateway sets the importance level qualifier to a value specified by, in increasing order of preference, either the global configuration information, the domain configuration information, the query configuration information, or the MODBUS message. If the query to be executed is a set query, the energy management gateway sets the power level qualifier to a value specified by, in increasing order of preference, either the global configuration information, the domain configuration information, the query configuration information, or the MODBUS message. If the MODBUS message indicates that wildcards are to be used, the energy management gateway appends the wild character to the appropriate strings.","In act , the energy management gateway  executes the query by providing it to the entry points of the domains with endpoints targeted by the query. In act , the energy management gateway records the result of the execution of the query. If an error occurred during execution of the query, the energy management gateway records the value of the returned error code in the CTL MODBUS register. Next, the energy management gateway records the timestamp of the execution of the query in the TSYM, TSDH AND TSMS MODBUS registers, records the number of ACKs received in the ACKS MODBUS register and records the number of NACKs received in the NACKS MODBUS register. If the query executed was a sum query, the energy management gateway records power usage in the PKW, PW and PMW MODBUS registers. In act , the energy management gateway deletes the EnergyWise session, sets the value of the CTL MODBUS register to 0 if no error occurred and transmits a MODBUS message to the BMS controller including the query results stored within the MODBUS registers as described above.","Processes , , ,  and  each include one particular sequence of acts in a particular example. The acts included in processes may be performed by, or using, one or more computer systems specially configured as discussed herein. Some acts are optional and, as such, may be omitted in accord with one or more examples. Additionally, the order of acts can be altered, or other acts can be added, without departing from the scope of the systems and methods discussed herein. In addition, as discussed above, in at least one example, the acts are performed on a particular, specially configured machine, namely a computer system configured according to the examples disclosed herein.","MODBUS Registers","One example of an energy management gateway using the following MODBUS registers to communicate with a BMS controller.","GHS\u2014Gateway Health Status Register","This register will report the health status of the system using fault codes.","0\u2014The Gateway is in health status and is operating.","1\u2014Communication fault. The gateway cannot communicate to the CISCO EnergyWise network.","2\u2014Gateway service is not running (e.g. failed to start, crashed, etc.).","3\u2014Others hardware or software failures.","GIMP\u2014Global Importance","This register exposes the importance level (0-100) inherited by all the queries, whether not otherwise specified.","GRR\u2014Global Refresh Rate","This register exposes the refresh rate (0 to 65535 seconds) inherited by all the SUM queries, whether not otherwise specified.","DHS\u2014Domain Health Status","This register will report the health status of the Domain using fault codes.","0\u2014The Gateway is in health status and is operating.","1\u2014Communication fault. The gateway cannot communicate to the CISCO EnergyWise Domain","2\u2014Others hardware or software failures.","DIMP\u2014Domain Importance","This register exposes the importance level (0-100) inherited by all the queries within the Domain, whether not otherwise specified.","DRR\u2014Domain Refresh Rate","This register exposes the refresh rate (0 to 65535 seconds) inherited by all the SUM queries within the Domain, whether not otherwise specified.","CTL\u2014Query Control","This register is used to report the query execution status and to trigger the query execution from the BMS MODBUS client. The register values are shown in the table below.","0\u2014Query executed\u2014Success","1\u2014Trigger Query Execution","2\u2014The query is being executed\/Gateway busy","3\u2014Query Execution failed","PKW PW PMW\u2014Power Usage","These registers are filled as a result of a SUM query. They contain the power usage in kilowatts, watts, and milliwatts, respectively. To calculate the total power, use the following:\n\nTotal Power=(1000)++(1000)\n","LEV\u2014Power Level","This register is used only with SET queries. It exposes the power level (0-10) to be set.","TSYM TSDH TSMS\u2014Query Execution Timestamp","This registers are filled with the last execution's timestamp of a query.","The datetime format will be:","Year\u2014yy\u2014TSYM (bits -)","Month\u2014MM\u2014TSYM (bits -)","Day\u2014dd\u2014TSDH (bits -)","Hour\u2014hh\u2014TSDH (bits -)","Minutes\u2014mm\u2014TSMS (bits -)","Seconds\u2014ss\u2014TSMS (bits -)","IMP\u2014Query Importance","This register exposes the query's importance level (0-100).","RR\u2014Query Refresh Rate","This register exposes the query's refresh rate (0 to 65535 seconds). This only applies to SUM queries.","ACKS\u2014Total number of ACKS Received","This is the number of nodes that matched the query and executed it successfully.","NACKS\u2014Total Number of NACKS Received","This is the number of nodes that matched the query but did not execute it successfully.","Having thus described several aspects of at least one example, it is to be appreciated that various alterations, modifications, and improvements will readily occur to those skilled in the art. For instance, while some examples disclosed herein focus on MODBUS protocol based BMS clients and controller, other examples include BMS clients and controller that support other protocols such as BACnet and LON. Such examples, alterations, modifications, and improvements are intended to be part of this disclosure, and are intended to be within the scope of the examples discussed herein. Accordingly, the foregoing description and drawings are by way of example only."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF DRAWINGS","p":["Various aspects of at least one example are discussed below with reference to the accompanying figures, which are not intended to be drawn to scale. The figures are included to provide an illustration and a further understanding of the various aspects and examples, and are incorporated in and constitute a part of this specification, but are not intended as a definition of the limits of any particular example. The drawings, together with the remainder of the specification, serve to explain principles and operations of the described and claimed aspects and examples. In the figures, each identical or nearly identical component that is illustrated in various figures is represented by a like numeral. For purposes of clarity, not every component may be labeled in every figure. In the figures:",{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 2A"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 2B"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
