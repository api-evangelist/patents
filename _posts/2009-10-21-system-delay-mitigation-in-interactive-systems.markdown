---
title: System delay mitigation in interactive systems
abstract: A method sends a signal to render visual information on a display, and receives a user response to the rendered visual information. The user response includes a first delay. The method also queries an electronic system for data indicating a second delay. The second delay is a portion of the first delay and attributable to the electronic system. The method further using the data indicating the second delay to compensate for electronic system delay during interactions with a user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08674935&OS=08674935&RS=08674935
owner: QUALCOMM Incorporated
number: 08674935
owner_city: San Diego
owner_country: US
publication_date: 20091021
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["1. Field","The present disclosure is related, generally, to interactive electronic systems and, more specifically, to mitigating effects of system delay in interactive electronic systems.","2. Background","Game applications typically run on a host console\/computer which renders the output of the game on a display attached via wires to the host platform. As such, the system delay incurred between the instant that the game application submits a frame to be displayed, and the instant that it is visible to the game player is usually not humanly perceptible and usually negligible relative to the subsequent human delay in responding to this visual stimulus via a joystick or other Human Interface Device (HID). Typical game applications assume that the delay between the instant a frame update is submitted to the Operating System (OS)\/graphics subsystem and the instant HID response is received from the game player is largely the game player's delay (a function of the user's hand eye coordination). This delay may be used to judge the player's response and may influence subsequent decisions made by the game application. If a significant portion of this intervening delay is caused by end-to-end system latency in rendering the frame, then the above assumption is not valid, and the game player may be unfairly penalized.","Currently, wireless display technology is developing and beginning to be commercialized. A typical wireless display includes a wireless host and a wireless client, which receives the signals from the wireless host and renders the visual information on a display. Conventional wireless display systems introduce some amount of humanly perceptible delay.","One approach to mitigate the effects of wireless display system delay is to minimize the delay as much as possible. One way to minimize delay is to use high bandwidth wireless links, such as 60 GHz links over multiple antennas. Use of high bandwidth links may eliminate the need to compress the frames before they are transmitted to the display, where compression and decompression are usually expected to be a contributor to delay. However, such solution may not be suitable for battery powered devices, which may not be able to output uncompressed video over the air or practically support a large number of antennas.","According to one embodiment, a method comprises receiving a user response to visual information, the user response including a first delay. The method also includes querying an electronic system for data indicating a second delay, the second delay being a portion of the first delay and attributable to the electronic system. The method further includes using the data indicating the second delay to compensate for electronic system delay during interactions with a user.","According to another embodiment, an electronic system comprises a user interface device in communication with a Human Interface Device (HID) and a display subsystem. The user interface device comprises a visual generation unit sending signals to the display subsystem to render visual stimulus. The user interface device also includes a user interaction unit receiving responses associated with the visual stimulus, querying at least one portion of the electronic system for data indicating delay of the electronic system, and adjusting interactions with the user in response to the data indicating delay.","In another embodiment, a system comprises means for interacting with a user. The interacting means include means for controlling a device to render data to the user, means for receiving user response to the rendered data, means for discerning an amount of delay in the user response attributable to at least one electronic subsystem, and means for compensating for the delay attributable to the at least one electronic subsystem.","In yet another embodiment, a computer program product tangibly embodying a computer readable medium having computer program logic recorded thereon comprises code that receives a user response to a stimulus. The logic also has code that discerns a portion of delay in the user response that is attributable to an electronic system, and code that ameliorates the effects of the delay attributable to the electronic system in interactions with the user.","In another embodiment, a system comprises a video game system in communication with a Human Interface Device (HID) and a display system. The video game system queries the HID and display system for information associated with latency attributable to the HID and display system, respectively, and uses the information associated with latency to adjust interactions with a human user.","In another embodiment, a system comprises a display subsystem. The display subsystem includes a host unit and a client unit that has a display panel. The host unit communicates with an Application Programming Interface (API) from a requesting unit, queries the client unit for latency attributable to the client unit in response to the API, calculates an aggregated display subsystem latency using the latency attributable to the client unit, and sends information indicating the aggregated display subsystem latency to the requesting unit.","The foregoing has outlined rather broadly the features and technical advantages of the present disclosure in order that the detailed description that follows may be better understood. Additional features and advantages will be described hereinafter which form the subject of the claims of the disclosure. It should be appreciated by those skilled in the art that the conception and specific embodiments disclosed may be readily utilized as a basis for modifying or designing other structures for carrying out the same purposes of the present disclosure. It should also be realized by those skilled in the art that such equivalent constructions do not depart from the technology of the disclosure as set forth in the appended claims. The novel features which are believed to be characteristic of the disclosure, both as to its organization and method of operation, together with further objects and advantages will be better understood from the following description when considered in connection with the accompanying figures. It is to be expressly understood, however, that each of the figures is provided for the purpose of illustration and description only and is not intended as a definition of the limits of the present disclosure.",{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 1","b":["100","100","102","102","101"]},"The user interaction console  exchanges control signals with, and transmits media signals to, the display host . For instance, in a video game system example, the user interaction console  sends sound and video signals to the display host  to be rendered upon the display . Video signals are typically rendered as frames, though any technique to render visual information on a display is within the scope of embodiments.","The display host  communicates with the display client  using the wireless link . Examples of wireless links that can be adapted for use in embodiments include white space channels, IEEE 802.11 links, Ultra Wideband (UWB) links, Bluetooth\u2122 links, and the like. In this example, the display host  receives audio and video signals from the user interactive console , compresses and encodes the signals, and transmits the signals to the display client . The display client  then decompresses and decodes the signals, processes the signals, and presents the audio and video information on a screen and speakers.","In , the link  is shown as a wireless link, and the links between the devices  and  and between the devices  and  are shown as wired links. However, it is within the scope of embodiments that a given link can be wired or wireless. Furthermore, while the various components of the system  are shown as separate, it is within the scope of embodiments that one or more such components may be integrated into one or more devices. For instance, one embodiment includes a video game console that is in communication with a separate wireless display subsystem. In another embodiment, a computer includes the user interaction console  and the display host  in communication with a stand-alone wireless display.","The functionality of the user interaction console , the display host , and the display client  is described in more detail below. Such functionality can be performed by hardware or software and in many embodiment is provided by one or more computer processors executing code that is saved to a computer readable storage medium. In some embodiments, a computer processor and memory with code stored thereon providing the functionality are included in a chipset for installation in any of a variety of devices. The functionality of the system  is provided by the chipsets , , and , which are installed in the user interaction console , the display host , and the display client , respectively. Furthermore, various functionality of the user interaction console  may be provided by computer executable code (e.g., video game code) written to computer-readable media, such as a game cartridge, a Universal Serial Bus (USB) flash drive, a Digital Video Disc (DVD) or Compact Disc (CD) Read Only Memory (ROM), internal Random Access Memory (RAM) and\/or ROM or the like.","The system  experiences humanly-perceptible delay due to the processing of the signal by the display host  and the display client . Specifically, the system  experiences some amount of latency attributable to the encoding\/decoding, compression\/decompression, and transmission of the signal. Additional latency, though negligible compared to the wireless display system latency, is attributable to the HID  and processing performed by the user interactive console .",{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 2","FIG. 1"],"b":["100","200","201","202"]},"In a perfect system, the HID system delay, H, is zero and the display system delay, D, is zero, and the user interactive console (or the underlying interactive application, e.g., video game software) can assume that the user response delay, GU, is equal to U. In some instances when the perceived user response delay, GU, is very small, it is acceptable to assume that the perceived user response delay, GU, equals the user response delay, U. However, when the display system delay, D, or the HID system delay, H, are large, then it is typically not acceptable to assume that the perceived user response delay, GU, equals the user response delay, U, especially in a fast-paced video game. In various embodiments, the user interactive console subtracts the display system delay, D, and the HID system delay, H, from the perceived user response delay, GU, to accurately estimate the user component of the delay in order to assess the user's response. An additional issue is that when the user interacts with the HID, the user often expects instantaneous response from the console. Whether the console reacts quickly (or not), if the perceived system response delay, UG, is large, the user may perceive the console as being sluggish. However, such issue is not addressed by the present disclosure.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 3","FIG. 1","FIG. 3","FIG. 3"],"b":["300","300","100","300","301","302","303","304","305"]},"The interactive user application  makes an interface call (via an Application Programming Interface\u2014API) to query for the aggregate display system delay, D, to be factored out of the perceived user response delay, GU, computation. The OS display subsystem , in this example using a wireless display, includes an interface to a wireless subsystem that communicates with the wireless display. The interactive user application  queries the OS Display subsystem  using a local API, and the OS Display subsystem  returns the value of the aggregate display system delay, D.","In this example, the OS Display subsystem  does not, itself, know the value of the aggregate display system delay, D, because the aggregate display system delay, D, is an aggregate delay that includes delay from the wireless display host driver  and the wireless display client receiver . For instance: the wireless display host driver  itself does some processing, e.g., compression; wireless transmission involves delay, such as medium access delays; and the wireless display client receiver  performs decoding, which involves delay. The raster in the display panel  also has some delay. In a scenario in which the various components are from one vendor, it is possible that the different delays may be known a priori. By contrast, in a system where the display is from one vendor, and the user interactive console is from another vendor, client messaging can query the various components to calculate the various components of the delay, as shown in .","The OS Display subsystem  sends a query using an API to the wireless display host driver  to inquire about the aggregate display system delay, D, which in this example includes host processing delay plus transmission delay plus client processing delay and panel rendering delay (e.g., raster delay). Client processing delay and panel rendering delay are attributable to the wireless display client receiver  and the display panel . The wireless display host driver  and the wireless display client receiver  use bi-directional client messaging to eventually deliver the receiver delay information to the wireless display host driver . The wireless display host driver  then computes the sum of host processing delay, transmission delay, and the delay attributable to the wireless display client receiver  and the display panel . The wireless display host driver  then passes information indicating the aggregate display system delay, D, to the OS Display subsystem , which passes the information to the interactive user application .","The process  can be performed at any of a variety of times by various embodiments. For instance, the process  can be performed with each frame, once each gaming session, at regular intervals, or the like. If the aggregate display system delay, D, varies significantly from frame to frame, it may be desirable to perform the process  at regular intervals, such as once per frame, but if the variation is smaller, less frequent performing of the process  reduces overhead. In many cases, it can be assumed that the variation of delay between frames is insignificant when the encode delays do not vary significantly. However, delays attributable to transmission may vary depending on, e.g., how much content is being transmitted. The APIs used can be synchronous or asynchronous (with a callback or event posted with the result) and may be invoked independently of the calls to render the display data. Additionally or alternatively, the queries may be combined with the OS calls to render the display data.",{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 4","FIG. 2","FIG. 4","FIG. 4"],"b":["400","400","300","400","400","301"]},"The interactive user application  sends a query to the OS HID subsystem  requesting information about the delay attributable to the HID. The OS HID subsystem  then sends a query by API to the wireless HID host driver . The aggregate HID delay, H, includes host processing delay and peripheral delay. Peripheral delay is attributable to the wireless HID peripheral , itself, and includes input\/output delay and transmission delay. The wireless HID host driver  and the wireless HID peripheral  use bi-directional query messaging to deliver information indicating delay attributable to the wireless HID peripheral  to the wireless HID host driver . The wireless HID host driver  then calculates the aggregate HID delay, H, and sends information indicating HID system delay, H, to the OS HID subsystem , which passes the information to the interactive user application .","In a system where the user interactive console and the HID are from the same vendor, the HID delay may be known a priori. On the other hand, when the user interactive console and the HID are from different vendors (are or otherwise unknown), the process  may be performed.","Similar to the process , the process  can be performed at startup, at every frame, at regular intervals, and the like. Embodiments can perform the methods  and\/or  to adapt to changing system configurations, changing bandwidth and computing demands, and other factors that affect delay.","Once the interactive user application  has information indicating both aggregate display system delay, D, and HID system delay, H, the interactive user application  can derive which delay is system delay and which delay is user delay. Such derived information can then be used by the user interactive console to mitigate the effects of the system delay. In one example, the user interactive console adjusts its interactions with the user by disregarding calculated system delay when judging the user's responses. In the context of a video game, the reward or penalty given to the user as a function of the user's response is adjusted so as not to penalize the user for system delay. In other words, such an example system compensates for its own delay.","While some of the examples given above are in the context of video gaming, not all embodiments are so limited. Various embodiments may be adapted for use with video gaming systems, and other embodiments may be adapted for use in any of a variety of other applications where user delay affects interactions. For instance, embodiments may be implemented in personal computers that utilize Graphical User Interfaces (GUIs) to more precisely calculate the context of a user's mouse movements or key strokes. An additional example includes implementing an embodiment in a wireless touch display calibration unit to account for system delay when detecting multi-touch gestures.","Various embodiments include advantages over other techniques. For instance, various embodiments may be better adapted for use with battery-powered devices than more power intensive systems that use high-bandwidth links to reduce delays. Furthermore, embodiments using closed loop techniques with queries and responses may be adaptable for use with different host platforms, transmission link types, and display platform implementations.","Although the present disclosure and its advantages have been described in detail, it should be understood that various changes, substitutions and alterations can be made herein without departing from the technology of the disclosure as defined by the appended claims. Moreover, the scope of the present application is not intended to be limited to the particular embodiments of the process, machine, manufacture, composition of matter, means, methods and steps described in the specification. As one of ordinary skill in the art will readily appreciate from the disclosure, processes, machines, manufacture, compositions of matter, means, methods, or steps, presently existing or later to be developed that perform substantially the same function or achieve substantially the same result as the corresponding embodiments described herein may be utilized according to the present disclosure. Accordingly, the appended claims are intended to include within their scope such processes, machines, manufacture, compositions of matter, means, methods, or steps."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
