---
title: Techniques for deduplicated data access statistics management
abstract: Techniques for data access statistics management are disclosed. In one particular embodiment, the techniques may be realized as a method for data access statistics management comprising determining that a portion of data has been deduplicated, and modifying access statistics of the portion of data for each reference to the portion of data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09483484&OS=09483484&RS=09483484
owner: Veritas Technologies LLC
number: 09483484
owner_city: Mountain View
owner_country: US
publication_date: 20110505
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["FIELD OF THE DISCLOSURE","BACKGROUND OF THE DISCLOSURE","SUMMARY OF THE DISCLOSURE","DETAILED DESCRIPTION OF EMBODIMENTS"],"p":["The present disclosure relates generally to data access statistics and, more particularly, to techniques for deduplicated data access statistics management.","Optimization of data access may be performed using data access statistics. Data access statistics may include tracking writes and\/or reads of a block, segment, or other portion of data. Data that is accessed more frequently may be considered as having a higher Input\/Output (I\/O) temperature. The data access statistics and\/or I\/O temperature of data may be used to make storage decisions about data (e.g., data with hotter I\/O temperatures may be stored in storage with faster access times). However, data may be deduplicated, which may cause inaccurate data access statistics and\/or loss of data access statistics. Specifically, duplicate segments or blocks of data may be eliminated and replaced with references to a single copy of the segments or blocks. Such deduplication may reduce storage needs, but eliminate and\/or ignore data access statistics associated with the deleted duplicate segments or blocks. Such deduplication may result in incorrect data access statistics and\/or I\/O temperatures for a deduplicated block or segment.","In view of the foregoing, it may be understood that there may be significant problems and shortcomings associated with current data access statistics management technologies.","Techniques for data access statistics management are disclosed. In one particular embodiment, the techniques may be realized as a method for data access statistics management comprising determining that a portion of data has been deduplicated, and modifying access statistics of the portion of data for each reference to the portion of data.","In accordance with other aspects of this particular embodiment, the techniques may further include receiving an indication that a plurality of portions of data are going to be deduplicated into a deduplicated portion of data, combining access statistics for the plurality of portions of data, and associating the combined access statistics with the deduplicated portion of data.","In accordance with further aspects of this particular embodiment, the access statistics may provide an indication of at least one of Input\/Output (I\/O) temperature and a access time.","In accordance with additional aspects of this particular embodiment, the Input\/Output (I\/O) temperature may be used to perform at least one of: determining which portions of data to pre-fetch into cache memory, and determining which portions of data to store in higher tier storage.","In accordance with additional aspects of this particular embodiment, higher tier storage may comprise at least one of: storage with faster access times, storage with faster seek times, and storage spread across multiple disks.","In accordance with additional aspects of this particular embodiment, the portion of data may comprise a block.","In accordance with additional aspects of this particular embodiment, the portion of data may comprise a segment.","In accordance with additional aspects of this particular embodiment, the techniques may further include detecting an additional reference being added to the deduplicated portion of data, and incrementing the access count of the deduplicated portion of data for the reference.","In accordance with additional aspects of this particular embodiment, the techniques may be realized as at least one non transitory processor readable non-transitory storage medium for storing a computer program of instructions configured to be readable by at least one processor for instructing the at least one processor to execute a computer process for performing the method.","In another particular embodiment, the techniques may be realized as an article of manufacture for data access statistics management, the article of manufacture comprising at least one non-transitory processor readable medium, and instructions stored on the at least one medium, wherein the instructions are configured to be readable from the at least one medium by at least one processor and thereby cause the at least one processor to operate so as to determine that a portion of data has been deduplicated, and modify access statistics of the portion of data for each reference to the portion of data.","In accordance with additional aspects of this particular embodiment, the instructions may be configured to further cause the processor to receive an indication that a plurality of portions of data are going to be deduplicated into a deduplicated portion of data, combine access statistics for the plurality of portions of data, and associate the combined access statistics with the deduplicated portion of data.","In accordance with additional aspects of this particular embodiment, the access statistics may provide an indication of at least one of Input\/Output (I\/O) temperature and an access time.","In accordance with additional aspects of this particular embodiment, the Input\/Output (I\/O) temperature may be used to perform at least one of: determining which portions of data to pre-fetch into cache memory, and determining which portions of data to store in higher tier storage.","In accordance with additional aspects of this particular embodiment, higher tier storage may comprise at least one of: storage with faster access times, storage with faster seek times; and storage spread across multiple disks.","In accordance with additional aspects of this particular embodiment, the portion of data may comprise a block. In accordance with additional aspects of this particular embodiment, the portion of data may comprise a segment.","In accordance with additional aspects of this particular embodiment, the instructions may be configured to further cause the processor to detect an additional reference being added to the deduplicated portion of data, and increment the access count of the deduplicated portion of data for the reference.","In yet another particular embodiment, the techniques may be realized as a system for data access statistics management comprising: one or more processors communicatively coupled to a network, wherein the one or more processors are configured to: determine that a portion of data has been deduplicated, and modify access statistics of the portion of data for each reference to the portion of data.","In accordance with additional aspects of this particular embodiment, the one or more processors may further be configured to: receive an indication that a plurality of portions of data are going to be deduplicated into a deduplicated portion of data, combine access statistics for the plurality of portions of data, and associate the combined access statistics with the deduplicated portion of data.","In accordance with additional aspects of this particular embodiment, the access statistics may provide an indication of at least one of Input\/Output (I\/O) temperature and an access time.","In accordance with additional aspects of this particular embodiment, the Input\/Output (I\/O) temperature may be used to perform at least one of: determining which portions of data to pre-fetch into cache memory, and determining which portions of data to store in higher tier storage.","The present disclosure will now be described in more detail with reference to particular embodiments thereof as shown in the accompanying drawings. While the present disclosure is described below with reference to embodiments, it should be understood that the present disclosure is not limited thereto. Those of ordinary skill in the art having access to the teachings herein will recognize additional implementations, modifications, and embodiments, as well as other fields of use, which are within the scope of the present disclosure as described herein, and with respect to which the present disclosure may be of significant utility.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 1","FIG. 1","FIG. 2"],"b":["100","100","100","110","120","130","140","140","200","110","120","130","150","140","160","1","140","160","1","140","140","154","140","140","140","170","170","180","1","140","140","110","120","130","150","140","190"]},"The description below describes network elements, computers, and\/or components of a system and method for data access statistics management that may include one or more modules. As used herein, the term \u201cmodule\u201d may be understood to refer to computing software, firmware, hardware, and\/or various combinations thereof. Modules, however, are not to be interpreted as software which is not implemented on hardware, firmware, or recorded on a processor readable recordable storage medium (i.e., modules are not software per se). It is noted that the modules are illustrative. The modules may be combined, integrated, separated, and\/or duplicated to support various applications. Also, a function described herein as being performed at a particular module may be performed at one or more other modules and\/or by one or more other devices instead of or in addition to the function performed at the particular module. Further, the modules may be implemented across multiple devices and\/or other components local or remote to one another. Additionally, the modules may be moved from one device and added to another device, and\/or may be included in both devices.","With reference to computer system  of , modem , network interface , or some other method may be used to provide connectivity from one or more of client systems ,  and  to network . Client systems ,  and  may be able to access information on server A or B using, for example, a web browser or other client software. Such a client may allow client systems ,  and  to access data hosted by server A or B or one of storage devices A()-(N), B()-(N), and\/or ()-(N).","Networks  and  may be local area networks (LANs), wide area networks (WANs), the Internet, cellular networks, satellite networks, or other networks that permit communication between clients , , , servers , and other devices communicatively coupled to networks  and . Networks  and  may further include one, or any number, of the illustrative types of networks mentioned above operating as a stand-alone network or in cooperation with each other. Networks  and  may utilize one or more protocols of one or more clients or servers to which they are communicatively coupled. Networks  and  may translate to or from other protocols to one or more protocols of network devices. Although networks  and  are each depicted as one network, it should be appreciated that according to one or more embodiments, networks  and  may each comprise a plurality of interconnected networks.","Storage devices A()-(N), B()-(N), and\/or ()-(N) may be network accessible storage and may be local, remote, or a combination thereof to server A or B. Storage devices A()-(N), B()-(N), and\/or ()-(N) may utilize a redundant array of inexpensive disks (\u201cRAID\u201d), magnetic tape, disk, a storage area network (\u201cSAN\u201d), an internet small computer systems interface (\u201ciSCSI\u201d) SAN, a Fibre Channel SAN, a common Internet File System (\u201cCIFS\u201d), network attached storage (\u201cNAS\u201d), a network file system (\u201cNFS\u201d), optical based storage, or other computer accessible storage. Storage devices A()-(N), B()-(N), and\/or ()-(N) may be used for backup or archival purposes.","Servers A and B may be application servers, archival platforms, backup servers, network storage devices, media servers, email servers, document management platforms, enterprise search servers, or other devices communicatively coupled to network . Servers A and B may utilize one of storage devices A()-(N), B()-(N), and\/or ()-(N) for the storage of application data, backup data, or other data. Servers A and  may be hosts, such as an application server, which may process data traveling between clients , , and  and a backup platform, a backup process, and\/or storage. According to some embodiments, servers A and B may be platforms used for deduplicating, backing up and\/or archiving data. One or more portions of data may be deduplicated, backed up, and\/or archived based on a backup policy and\/or an archive applied, attributes associated with the data source, space available for backup, space available at the data source, or other factors.","According to some embodiments, clients , , and\/or  may contain one or more portions of software for data access statistics management such as, for example, data access statistics management module . One or more portions of data access statistics management module  may reside at a network centric location. For example, server A may be a server, a firewall, a proxy server, a gateway, a search engine, or other network element that may perform one or more actions to provide data access statistics management. According to some embodiments, network  may be an external network (e.g., the Internet) and server A may be a gateway, a proxy server, a search engine, and\/or a firewall between one or more internal components and clients and the external network.","According to some embodiments, data access statistics management module  may be implemented in several portions which may be co-located or located remote from one another. According to one or more embodiments, data access statistics management may be performed by a third party (e.g., a service provider).","According to some embodiments, clients , , and  may be smartphones, PDAs, desktop computers, laptop computers, servers, other computers, or other devices coupled via a wireless or wired connection to network . Clients , , and  may receive data from user input, a database, a file, a web service, and\/or an application programming interface.","According to some embodiments, Servers A and B may be servers deduplicating data. A system having deduplicated data may store files in the form of segments or blocks on storage (e.g., disk). Each of the segments is identified by fingerprints (e.g., MD5 checksums). Deduplication software may store data about files (metadata) as well as the data contained within the file (e.g., fingerprints for each of the respective segments). These segments or blocks may be copied from the storage to the memory (RAM) as and when required by the process. For example, deduplication software may determine whether requested segments are already in the cache, or not. Segment fingerprints may be checked in a local cache and storage index to determine uniqueness. If the fingerprint already exists, a reference may be added to the segment attributes in the database and the segment may not be uploaded to the storage. In such a scenario, access information or write I\/O may not be updated since the segment is not actually flushed out or written to the storage. However when the segment is not present in cache, the segment may be read from the storage into cache. In such cases there may be a performance hit due to the read access time involved. Deduplicated segments may be spread across the disks (e.g., more fragmented), so at the time of read access there may be performance hit due to the disk seek times and rotational delays. According to some embodiments, data access statistics management module  may address this issue. For example, data access statistics management module  may track write I\/O or write access information of deduplicated segments or blocks that are actually not written and\/or flushed to backend storage in a deduplicated system. This may be helpful in optimizing identification of hot data by correctly calculating the write I\/O temperature of deduplicated segments. For example, an additional attribute may be configured for deduplicated segments in storage that may keep the track of corresponding duplicate segments not written to storage. The additional attribute for write access information may be incremented by one for each segment not written to storage. Data access statistics management module  may ensure that deduplicated segments are counted at least once for each corresponding deduplicated block (e.g., access statistics may include a count, a weighted average, date stamps, etc.). For example, if six blocks contain duplicate data and only one is written to storage, data access statistics management module  may configure an attribute which may be incremented to six (reflecting the first write for the block written to storage as well as the five other blocks not written to storage that reference the deduplicated block.) According to some embodiments, data access statistics management module  may determine access statistics by counting references to a block and summing the reference count with the access statistics for the block in storage. According to other embodiments, access statistics may be modified in other ways to reflect the additional writes no reflected due to deduplication. For example, some access statistics may be date stamps or weighted averages.","Read requests, since they do not involve writing a data block, may always reach a block of data, whether inline or post-process (e.g., after backup) deduplication is occurring. Thus, a block of data may contain accurate read access statistics regardless of deduplication. Write access statistics however may traditionally be affected by deduplication.","According to some embodiments, data access statistics management module  may be invoked during deduplication and may be able to capture other access statistics that may have otherwise been lost during deduplication. For example, if three blocks contain duplicate data, data access statistics management module  may sum access statistics for each block and associate the summed statistics with the one deduplicated block written to storage (e.g., if a first block  has an access count of ten, a second block B has an access count of five, and a third block B has an access count of three, the deduplicated or merged block written to storage may have an access count of eighteen). Thus deduplicated blocks may have access counts which more accurately reflect the I\/O temperature of the data.","According to some embodiments, data access statistics management module  may also track additional references added to a deduplicated block and may increment access statistics for the deduplicated block accordingly. For example, if a block is written to storage with an access count of five and deduplication software adds another reference to the block (indicating that a duplicate block was not written to storage), data access statistics management module  may increment the access count to six. According to some embodiments, data access statistics management module  may capture access statistics for the block not written to storage and may sum those access statistics with the deduplicated block in storage. Data access statistics management module  may, according to some embodiments, perform other modifications to reflect the access statistics (e.g., calculate a weighted average, add a date stamp, etc.).",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 2","b":["200","200","200","212","200","214","217","218","220","222","224","226","228","230","232","233","234","237","238","235","290","235","239","240","242","246","212","228","247","212","230","248","212","250","252"]},"Bus  allows data communication between central processor  and system memory , which may include read-only memory (ROM) or flash memory (neither shown), and random access memory (RAM) (not shown), as previously noted. The RAM may be the main memory into which the operating system and application programs may be loaded. The ROM or flash memory can contain, among other code, the Basic Input-Output system (BIOS) which controls basic hardware operation such as the interaction with peripheral components. Applications resident with computer system  may be stored on and accessed via a computer readable medium, such as a hard disk drive (e.g., fixed disk ), an optical drive (e.g., optical drive ), a floppy disk unit , or other storage medium. For example, data access statistics management module  may be resident in system memory .","Storage interface , as with the other storage interfaces of computer system , can connect to a standard computer readable medium for storage and\/or retrieval of information, such as a fixed disk drive . Fixed disk drive  may be a part of computer system  or may be separate and accessed through other interface systems. Modem  may provide a direct connection to a remote server via a telephone link or to the Internet via an internet service provider (ISP). Network interface  may provide a direct connection to a remote server via a direct network link to the Internet via a POP (point of presence). Network interface  may provide such connection using wireless techniques, including digital cellular telephone connection, Cellular Digital Packet Data (CDPD) connection, digital satellite data connection or the like.","Many other devices or subsystems (not shown) may be connected in a similar manner (e.g., document scanners, digital cameras and so on). Conversely, all of the devices shown in  need not be present to practice the present disclosure. The devices and subsystems can be interconnected in different ways from that shown in . Code to implement the present disclosure may be stored in computer-readable storage media such as one or more of system memory , fixed disk , optical disk , or floppy disk . Code to implement the present disclosure may also be received via one or more interfaces and stored in memory. The operating system provided on computer system  may be MS-DOS\u00ae, MS-WINDOWS\u00ae, OS\/2\u00ae, OS X\u00ae, UNIX\u00ae, Linux\u00ae, or another known operating system.","Power manager  may monitor a power level of battery . Power manager  may provide one or more APIs (Application Programming Interfaces) to allow determination of a power level, of a time window remaining prior to shutdown of computer system , a power consumption rate, an indicator of whether computer system is on mains (e.g., AC Power) or battery power, and other power related information. According to some embodiments, APIs of power manager  may be accessible remotely (e.g., accessible to a remote backup management module via a network connection). According to some embodiments, battery  may be an Uninterruptable Power Supply (UPS) located either local to or remote from computer system . In such embodiments, power manager  may provide information about a power level of an UPS.","Referring to , there is shown a data access statistics management module  in accordance with an embodiment of the present disclosure. As illustrated, the data access statistics management module  may contain one or more components including segment merge module , segment reference module , and error logging and reporting module .","Segment merge module  may capture access statistics of segments and\/or blocks that are being merged or deduplicated. Segment merge module  may sum the statistics of the merged segments and\/or blocks and associate them with the deduplicated segment and\/or block written to storage. Segment merge module  may facilitate the capture of access statistics of segments and\/or blocks merged as part of an inline deduplication process.","Segment reference module  may capture access statistics of blocks and\/or segments deduplicated as part of an post storage deduplication process. According to some embodiments, segment merge module  may identify references to a deduplicated block and may sum a count of the identified references with current access statistics of the deduplicated block. According to some embodiments, other modifications to reflect the access statistics may be performed (e.g., calculation of a weighted average, adding a date stamp, etc.).","Error logging and reporting module  may produce logs, reports, or other information associated with data access statistics management.","Referring to , there is depicted a method  for data access statistics management in accordance with an embodiment of the present disclosure. At block , the method  may begin.","At block , it may be determined whether a block has been merged (i.e., deduplicated). If a block has been merged the method may continue at block . If a block has not been merged the method may continue at block .","At block , an access count of the deduplicated or merged block may be incremented by one for each reference to the deduplicated block as part of a post-deduplication processing. According to some embodiments, other modifications to reflect the access statistics may be performed (e.g., calculation of a weighted average, adding a date stamp, etc.). A reference to a deduplicated block may indicate that another block would have been written if not for deduplication, therefore a reference may indicate an additional write that is not counted due to deduplication.","At block , it may be determined whether a block is being merged (e.g., inline deduplication is occurring for that block). If a block is being merged, the method may continue at block . If a block is not being merged, the method may end at block .","At block , access statistics for blocks to be merged (i.e., deduplicated blocks) may be combined. Access statistics may be captured for each of the duplicate blocks prior to merging and may be summed or otherwise modified to reflect the additional access statistics (e.g., access statistics may include a count, a weighted average, date stamps, etc.). The summed access statistics may be associated with the merged block (e.g., an attribute associated with a merged\/deduplicated block may serve as a counter).","At block , the method may end.","At this point it should be noted that data access statistics management in accordance with the present disclosure as described above typically involves the processing of input data and the generation of output data to some extent. This input data processing and output data generation may be implemented in hardware or software. For example, specific electronic components may be employed in a data access statistics management module or similar or related circuitry for implementing the functions associated with data access statistics management in accordance with the present disclosure as described above. Alternatively, one or more processors operating in accordance with instructions may implement the functions associated with data access statistics management in accordance with the present disclosure as described above. If such is the case, it is within the scope of the present disclosure that such instructions may be stored on one or more processor readable storage media (e.g., a magnetic disk or other storage medium), or transmitted to one or more processors via one or more signals embodied in one or more carrier waves.","The present disclosure is not to be limited in scope by the specific embodiments described herein. Indeed, other various embodiments of and modifications to the present disclosure, in addition to those described herein, will be apparent to those of ordinary skill in the art from the foregoing description and accompanying drawings. Thus, such other embodiments and modifications are intended to fall within the scope of the present disclosure. Further, although the present disclosure has been described herein in the context of a particular implementation in a particular environment for a particular purpose, those of ordinary skill in the art will recognize that its usefulness is not limited thereto and that the present disclosure may be beneficially implemented in any number of environments for any number of purposes. Accordingly, the claims set forth below should be construed in view of the full breadth and spirit of the present disclosure as described herein."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["In order to facilitate a fuller understanding of the present disclosure, reference is now made to the accompanying drawings, in which like elements are referenced with like numerals. These drawings should not be construed as limiting the present disclosure, but are intended to be illustrative only.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
