---
title: Method and system for restoring software
abstract: Method and system are disclosed for restoring multiple instances of a software application to a predetermined baseline state. The method/system of the invention creates a baseline template from a single correct or “golden” installation of the software application. The baseline template may then be deployed to restore previously used instances of the software application to a baseline state.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09606787&OS=09606787&RS=09606787
owner: United Services Automobile Association
number: 09606787
owner_city: San Antonio
owner_country: US
publication_date: 20140822
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND","SUMMARY","DETAILED DESCRIPTION","Example 1","Example 2","Example 3","Example 4"],"p":["This application is a continuation of U.S. patent application Ser. No. 12\/951,694, filed Nov. 22, 2010, which issued as U.S. Pat. No. 8,843,919 on Sep. 23, 2014, which is a continuation of U.S. patent application Ser. No. 11\/322,492, filed on Dec. 30, 2005, which issued as U.S. Pat. No. 7,840,955 on Nov. 23, 2010, and each of which are hereby incorporated herein and priority to each of which is hereby claimed. This application is also related in subject matter to, and incorporates herein by reference in its entirety, each of the following: U.S. patent application Ser. No. 11\/322,429, filed on Dec. 30, 2005, now U.S. Pat. No. 7,802,247, issued on Sep. 1, 2010; and U.S. patent application Ser. No. 11\/322,786, filed on Dec. 30, 2005, now U.S. Pat. No. 7,831,968, issued on Nov. 9, 2010.","The disclosed embodiments relate generally to software applications and particularly to a method and system for restoring the software applications on multiple computing systems.","Advances in software programming and computing technology have made increasingly sophisticated and feature-rich software applications available to consumers and businesses alike. These powerful software applications provide a growing list of benefits in terms of improved accuracy, efficiency, and convenience for numerous tasks performed on a regular basis. Industry indicators predict that this trend is likely to continue and may even accelerate in the years ahead.","However, as software applications become more sophisticated, their installation and maintenance become correspondingly more difficult. E-commerce and online transaction-related software applications are particularly unwieldy in terms of size and complexity. Consequently, most companies retain a highly-trained technical support group or department dedicated to setting up and supporting various software applications used within their organizations. Users who need a software application may simply submit a request through the appropriate channels listing their specific requirements. The technical support department thereafter prepares the needed computing system (i.e., hardware and operating system), installs the requested software application, and presents the completed installation to the users.","An example of the procedure described above is illustrated in  via a system . A user  of the system  begins the procedure by submitting a request for a particular software application through designated\u2032 channels to an organization's technical support department. Technical support personnel then obtain an appropriate computing system , , or for installation of the requested software application, perform the installation, and test the installed software application to ensure proper operation. The installations are usually performed manually by inserting one or more portable media  (e.g., floppy disks or CD-ROMs) into an appropriate disk drive of the selected computing system , , or , usually one disk at a time. After the installation is complete, the technical support personnel either physically deliver the computing system , , or to the user or else make it available over a network connection (not expressly shown).","A drawback of the above procedure is that every request for the software application must be installed from the beginning on each computing system , , and via the portable media . Even for highly-trained technical support personnel, such a procedure is often fraught with potential problems and delays. For example, in addition to the lengthy installation time required, hardware and\/or software incompatibilities may exist (e.g., a resource conflict between the operating system and the software application). Furthermore, the software application may require one or more patches or fixes, sometimes in a certain sequence or order, that can add to an already long installation time. Moreover, there may sometimes be human errors, such as clicking the wrong button, striking the wrong key, inserting the wrong disk, and so forth, that frequently lengthen the installation time even more. All of these problems are exacerbated when the software application is large, complex, and is required to be installed numerous times on multiple computing systems.","Accordingly, what is needed is a more efficient way to make a software application available on multiple computing systems without having to install the software application from the beginning via floppy disks, CD-ROMs, or other portable media for each computing system.","The disclosed embodiments are directed to a method and system for providing multiple instances of a software application. The method\/system of the invention creates a baseline template from a single correct or \u201cgolden\u201d installation of the software application and uses the baseline template to restore previously used instances of the software application to a baseline state. In one embodiment, any references to a specific host or computing system in the configuration files or directories of the previously used instance of the software application are replaced with a temporary variable in the baseline template. The baseline template may then be stored on a designated server and uploaded to any computing system needing a baseline instance of the software application. Once uploaded, the variable is replaced with system-specific references to restore the baseline state. Since the software application is restored from the baseline template and not from floppy disks or CD-ROMs, the process takes significantly less time.","Following is a detailed description of illustrative embodiments with reference to the drawings wherein the same reference labels are used for the same or similar elements. As used throughout this description and the claims, the terms \u201ca\u201d and \u201can\u201d are intended to mean \u201cone or more.\u201d","As mentioned above, existing procedures for installing multiple instances of a software application, particularly a large and complex software application, are inefficient and fraught with potential for problems and delays. Various embodiments provide a method and system for more efficiently installing software applications in cases where it may not be necessary to perform a complete installation of the software application.","Consider the case where one user has finished using the software application and has relinquished his\/her computing system to another user. In such cases, it may be sufficient merely to restore the software application to a predetermined baseline state on the relinquished computing system rather than perform a new installation of the software application. The baseline state may be a \u201cclean\u201d or unused state, such as the state immediately after installation of the software application (i.e., before any users have used the software application), or it may be some predefined intermediate state (e.g., after one or more patches and fixes have been applied). Accordingly, the term \u201crestore\u201d is used herein to mean that the software application has been returned to some predetermined baseline state.","The method\/system uses a correct or \u201cgolden\u201d (i.e., error-free) installation of a software application to create a baseline template. The baseline template contains baseline versions of the files that are likely to be modified or deleted as the software application is used, along with the directory structure for these files. These likely-to-change files may be identified by monitoring the software application over a sufficiently long period of time or sufficiently high number of users. Such a baseline template may then be uploaded to any computing system requiring an instance of the software application and used to restore the software application to a baseline state. Since the baseline template is based on a correctly-installed instance of the software application, all subsequent restorations made from the baseline template are also correct. And, since the subsequent restorations are made from the baseline template and perhaps not portable media, such as floppy disks or CD-ROMs, the process takes significantly less time.",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 2","b":["200","200","202","204","204","204","206","106","202","204","204","204","206","204","204","204"],"i":["a","b","c ","a","b","c ","a","b","c "]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 3","b":["202","202","300","302","300","202","304","300","302","304","302","202","306","300","302","308","300","302"]},"The template server  may be coupled via the bus  to a display , such as a cathode ray tube (CRT), for displaying information to a user. An input device , including, for example, alphanumeric and other keys, is coupled to the bus  for communicating information and command selections to the processor . Another type of user input device is a cursor control , such as a mouse, a trackball, or cursor-direction keys for communicating direction information and command selections to the processor  and for controlling cursor movement on the display . The cursor control  typically has two degrees of freedom in two axes, a first axis (e.g., x) and a second axis (e.g., y), that allow the device to specify positions in a plane.","The term \u201ccomputer-readable instructions\u201d as used above refers to any instructions that may be performed by the processor  or other component. Similarly, the term \u201ccomputer-readable medium\u201d refers to any storage medium that may be used to store the computer-readable instructions. Such a medium may take many forms, including, but not limited to, non-volatile media, volatile media, and transmission media. Non-volatile media include, for example, optical or magnetic disks, such as the storage device . Volatile media include dynamic memory, such as main memory . Transmission media include coaxial cables, copper wire and fiber optics, including wires of the bus . Transmission media can also take the form of acoustic or light waves, such as those generated during radio frequency (RF) and infrared (IR) data communications. Common forms of computer-readable media include, for example, a floppy disk, a flexible disk, hard disk, magnetic tape, any other magnetic medium, a CD-ROM, DVD, any other optical medium, punch cards, paper tape, any other physical medium with patterns of holes, a RAM, a PROM, an EPROM, a FLASH-EPROM, any other memory chip or cartridge, a carrier wave, or any other medium from which a computer can read.","Various forms of the computer-readable media may be involved in carrying one or more sequences of one or more instructions to the processor  for execution. For example, the instructions may initially be borne on a magnetic disk of a remote computer. The remote computer can load the instructions into its dynamic memory and send the instructions over a telephone line using a modem. A modem local to the template server  can receive the data on the telephone line and use an infrared transmitter to convert the data to an infrared signal. An infrared detector coupled to the bus  can receive the data carried in the infrared signal and place the data on the bus . The bus  carries the data to the main memory , from which the processor  retrieves and executes the instructions. The instructions received by the main memory  may optionally be stored on the storage device  either before or after execution by the processor .","The template server  also includes a communication interface  coupled to the bus . The communication interface  provides a two-way data communication coupling between the template server  and the network . For example, the communication interface  may be an integrated services digital network (ISDN) card or a modem used to provide a data communication connection to a corresponding type of telephone line. As another example, the communication interface  may be a local area network (LAN) card used to provide a data communication connection to a compatible LAN. Wireless links may also be implemented. In any such implementation, the communication interface  sends and receives electrical, electromagnetic, optical, or other signals that carry digital data streams representing various types of information.","A software application  may be installed on the template server , for example, on the storage device . The installed software application  may then be used to create a baseline template  from which subsequent restorations of the software application  may be made. The baseline template  may thereafter be transferred to each user computing system , , or as needed over the network  to restore the software application . Such an arrangement allows baseline instances of the software application  to be provided on the user computing systems , , and without perhaps necessarily installing the entire application from the portable media .","The installed software application  is preferably a correct or \u201cgolden\u201d installation, meaning that it has been tested and observed to work properly and that at least some needed patches, fixes, modifications, and customizations have been applied. The use of a \u201cgolden\u201d installation ensures that the baseline template  is correct (i.e., validated) and that restorations of the software application  based on the baseline template  are also correct. To this end, the installation of the software application  is preferably performed manually from the original portable media . Although this task is tedious and time-consuming, it need only be performed correctly once to create the baseline template . It is also possible to install the software application  from, for example, a set of installation files stored on an application server (not expressly shown). If necessary, a trial-and-error approach may be used and the installation repeated until the software application  is determined to be correctly installed (i.e., a \u201cgolden\u201d installation).","In some cases, the installation of the software application  may produce one or more custom files and\/or directories that are specific to the host computing system (i.e., the template server ). Certain enterprise integration software applications, for example, WebSphere\u2122 from International Business Machine (IBM) Corp., create directories that contain the name of the host computing system in the directories (e.g., \u201c\/WebSphere\/AppServer\/ . . . \/ServerA\/ . . . \u201d). One or more files for these software applications, including the configuration files, may also contain references to the host computing system. An example of a WebSphere\u2122 directory listing taken using a standard \u201cdir\u201d command is shown in Example 1, where some of the directories have been truncated for economy of the description.\n\n","As can be seen from the above example, a number of directories have names that contain a reference to a specific computing system, namely, \u201ctestopslasjt.\u201d Some or all of these directories may contain files that are likely to change with usage (e.g., the configuration files and the configuration directories). Therefore, for software applications such as WebSphere\u2122, the installed software application  may be generalized before the baseline template  is created. This means that references to a specific computing system (e.g., the template server ) may be temporarily replaced with a generic reference (e.g., \u201cRICK\u201d) or variable (e.g., \u201cX\u201d) before creating the baseline template . The generic reference or variable may then be replaced with the name of one of the user computing systems , , or (e.g., Server A, Server B, Server C, etc.) when the baseline template  is used to restore the software application  on that user computing system.","The template server  may further include one or more scripting routines  stored, for example, on the storage device , that are designed to remove specific references to the host computing system. The scripting routines  may reside on the template server  as shown in this example, or they may reside on some other computing system, then executed on the template server  over the network . When executed, the scripting routines  recursively search through the directory names of the likely-to-change files (e.g., the configuration directories) looking for any computing system-specific directory names. The scripting routines  also search the content of likely-to-change files (e.g., the configuration files) for computing system-specific references in the files. The scripting routines  thereafter may search the found references, if any, and replace them with a temporary generic reference or variable.","An example of a PERL language scripting routine  for compressing the configuration files and for searching and replacing computing system-specific references in the configuration files of the software application  in a UNIX-based operating system is shown in Example 2 below. The various commands and statements used in such a scripting routine are believed to be well understood by those having ordinary skill in the art and will therefore not be described in detail here. Other scripting routines for other operating systems (e.g., Solaris, Linux, Windows, DOS, etc.) running on the template server  may also be used. Although the compression and file name and directory name searches have been combined in Example 2, it is certainly possible to create separate scripting routines  for the compression and the file name and directory name searches. When searching and replacing directory names, the scripting routines  may proceed through the directory structure in reverse order (i.e., deepest subdirectories first). Otherwise, one or more child directories may not be accessible once the parent directory names have been changed.",{"@attributes":{"id":"p-0033","num":"0048"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"#!\/usr\/bin\/perl"},{"entry":"#############################################"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["## This script makes the AfterFederation.zip","###"]},{"entry":["## template. It replaces instances of the","###"]},{"entry":["## current hostname with the variable \u201cRICK\u201d","###"]},{"entry":["## . . . . (directories and files)","###"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"#############################################"},{"entry":"use File: :Copy;"},{"entry":"my $HOST = \u2018hostname\u2019;"},{"entry":"chomp ($HOST);"},{"entry":"my $appFile = \u2018\/tmp\/FILES.txt\u2019;"},{"entry":"my $dirFile = \u2018\/tmp\/DIRS.txt\u2019;"},{"entry":"my $fileCounter=0;"},{"entry":"my $dirCounter=0;"},{"entry":"my $Variable = \u201cRICK\u201d;"},{"entry":"my @LIST = qw(DeploymentManager AppServer);"},{"entry":"foreach $i ( @LIST ) {"},{"entry":"if( -e $appFile && -e $dirFile ) {"},{"entry":"\u2003\u2018mv $appFile \/tmp\/FILES.txt.$i\u2019;"},{"entry":"\u2003\u2018mv $dirFile \/tmp\/DIRS.txt.$i\u2019;"},{"entry":"}"},{"entry":"####### Locating all FILES and DIRECTORIES"},{"entry":"with a hostname entry #########"},{"entry":"my @files = \u2018find \/opt\/WebSphere51\/$i\/config\/ -type "},{"entry":"f -exec grep -q \\\u201c$HOST\\\u201d {\u2009} \\\\\\; -"},{"entry":"print > $appFile 2>\/dev\/null\u2019;"},{"entry":"my @dirs = \u2018find \/opt\/WebSphere51\/$i\/config\/ "},{"entry":"-type d -name \\\u201c$HOST\\*\\\u201d > $dirFile"},{"entry":"2>\/dev\/null\u2019;"},{"entry":"sleep(5);"},{"entry":"#-------------------------------------------------------#"},{"entry":"#--- Changing files: hostname to RICK -------#"},{"entry":"#------------------------------------------------------#"},{"entry":"open(APPFILE, \u201c$appFile\u201d);"},{"entry":"@files=<APPFILE>;"},{"entry":"close (APPFILE);"},{"entry":"foreach $item ( @files ) {"},{"entry":"\u2003chomp ($item) ;"},{"entry":"\u2003print \u201cFile: \\t $item\\n\u201d;"},{"entry":"\u2003$itemBackup = $item . \u201c.BAK\u201d;"},{"entry":"\u2003print \u201c\\t\\tCopying $item to $itemBackup ...\\n\u201d;"},{"entry":"\u2003move($item, $itemBackup) or die \u201cCopy failed for $item: $!\u201d;"},{"entry":"\u2003print \u201c\\t\\tReplacing $HOST with $Variable ...\\n\u201d;"},{"entry":"\u2003my $replace= \u2018sed -e \u2018s\/$HOST\/$Variable\/g\u2019 $itemBackup >> $item\u2019;"},{"entry":"\u2003$fileCounter++;"},{"entry":"}"},{"entry":"print \u201cNUMBER OF FILES CHANGED: $fileCounter\\n\u201d;"},{"entry":"#---------------------------------------------------------#"},{"entry":"#--- Changing directories: hostname to RICK --#"},{"entry":"#---------------------------------------------------------#"},{"entry":"sub backwards {$b cmp $a};"},{"entry":"open(DIRFILE, \u201c$dirFile\u201d);"},{"entry":"@dirs=<DIRFILE>;"},{"entry":"close(DIRFILE);"},{"entry":"my @SortedDirs = sort backwards (@dirs);"},{"entry":"foreach $item ( @SortedDirs ) {"},{"entry":"\u2003chomp ( $item);"},{"entry":"\u2003if( $item =~ \/$HOST\/i ) {"},{"entry":"\u2003opendir(MD1, $item) \u2225 die (\u201cCan't open directory: $item\\n\u201d);"},{"entry":"\u2003@theFiles=readdir(MD1);"},{"entry":"\u2003closedir (MD1);"},{"entry":"\u2003chdir ($item);"},{"entry":"\u2003foreach $dir (@theFiles) {"},{"entry":"\u2003\u2003if( -d $dir ) {"},{"entry":"\u2003\u2003\u2003if( $dir =~ \/$HOST\/ ) {"},{"entry":"\u2003\u2003\u2003\u2003my $original = $dir;"},{"entry":"\u2003\u2003\u2003\u2003(my $new1 = $original) =~ s\/$HOST\/Variable\/;"},{"entry":"\u2003\u2003\u2003\u2003print \u201cNew Directory: $new1\\n\u201d,"},{"entry":"\u2003\u2003\u2003\u2003print \u201cMoving $original directory to $new1"},{"entry":"directory .....\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2003\u2018mv $original $new1\u2019;"},{"entry":"\u2003\u2003\u2003}"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"\u2003print \u201c\\n ........New Entry.................\\n\u201d;"},{"entry":"\u2003print \u201cDirectory: \\t $item\\n\u201d;"},{"entry":"\u2003$length = length ($item);"},{"entry":"\u2003$sub = rindex($item, $HOST);"},{"entry":"\u2003$substring = substr ($item, 0, $sub);"},{"entry":"\u2003@DirArray = split (\u039b\/\/, $item);"},{"entry":"\u2003my $lastElement = $DirArray[\u22121];"},{"entry":"\u2003chomp ($lastElement);"},{"entry":"\u2003if ( $lastElement =~ \/$HOST\/ ) {"},{"entry":"\u2003($replace = $lastElement) =~ s\/$HOST\/$Variable\/;"},{"entry":"\u2003$substring .= $replace;"},{"entry":"\u2003}"},{"entry":"print \u201cFinal Substring: ..... $substring\\n\u201d;"},{"entry":"my $orig = $item;"},{"entry":"my $new = $substring;"},{"entry":"print \u201cNew Directory: $new\\n\u201d;"},{"entry":"print \u201cMoving $orig direc.tory to $new directory .....\\n\u201d;"},{"entry":"\u2018mv $orig $new\u2019;"},{"entry":"$dirCounter++;"},{"entry":"\u2003} else {"},{"entry":"\u2003\u2003if ( -e $item ) {"},{"entry":"\u2003\u2003\u2003opendir (MD, $item) \u2225 die(\u201cCan't open directory: $item\\n\u201d);"},{"entry":"\u2003\u2003\u2003@thefiles=readdir(MD);"},{"entry":"\u2003\u2003\u2003closedir(MD);"},{"entry":"\u2003\u2003\u2003chdir($item);"},{"entry":"\u2003\u2003\u2003foreach $directory (@thefiles) {"},{"entry":"\u2003\u2003\u2003\u2003if( -d $directory ) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003if( $directory =~ \/$HOST\/ ) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003my $orig2 = $directory;"},{"entry":"\u2003\u2003\u2003\u2003\u2003(my $new2 = $orig2) =~ s\/$HOST\/$Variable\/;"},{"entry":"\u2003\u2003\u2003\u2003\u2003print \u201cNew Directory: $new2\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2003\u2003print \u201cMoving $orig2 directory to $new2 directory"},{"entry":".....\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2018mv $orig2 $new2\u2019;"},{"entry":"\u2003\u2003\u2003\u2003\u2003$dirCounter++;"},{"entry":"\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003}"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"}"},{"entry":"print \u201cNUMBER OF DIRECTORIES CHANGED: $dirCounter\\n\u201d;"},{"entry":"#------------------------------------------------------------#"},{"entry":"#---- Removing \/wstemp & \/config\/temp dirs ------#"},{"entry":"#------------------------------------------------------------#"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"After the software application  has been generalized, it may be used to create the baseline template . To create the baseline template , an archive or backup is made of the configuration files or other likely-to-change files along with the directory structure therefor. The archive or backup may be compressed in some cases, or it may simply be backed up without any compression. The compression may be performed using any suitable compression format (e.g., .ZIP, .TAR, .RAR, etc.), provided that the directory structure for the compressed files is maintained.","In some cases, the baseline template  may include more than one archive or backup files. For example, the archive or backup files may be organized according to their functions in the software application  or some other logical grouping, such as application server configuration files or other likely-to-change files and directories in one baseline template file, deployment manager configuration files and directories in another baseline template file, and so forth. Note that only the configuration files or other likely-to-change files of the software application  are used for the baseline template  and perhaps not all of the installed files (i.e., the baseline template  may not be an installation template).","After the baseline template  is created, it may be uploaded to any user computing system , , or requiring a baseline instance of the software application . The upload may be conducted by a direct file transfer from the template server  to a user computing system , , or , or it may be conducted over the network . The latter case allows any user computing system , , or connected to the network  to receive a copy of the baseline template  regardless of the physical location of the template server . Such an arrangement results in a much more efficient and convenient procedure than having to install the software application  on each computing system.","Once uploaded, the baseline template  may be decompressed, unpacked, expanded, or otherwise processed to retrieve the configuration files and directories for the software application  onto the new user computing system , , or , and the generic reference or variable may be replaced with the name of the new user computing system. In some embodiments, the scripting routines  mentioned earlier may be used to perform the decompression\/unpacking of the baseline template  and insert the name of the new user computing system , , or . An example of a PERL language scripting routine  that may be used to insert the name of the new user computing system , , or in the newly installed configuration files and directories of the software application  in a UNIX-based operating system is shown in Example 3 below. Other scripting routines may be used for other operating systems (e.g., Solaris, Linux, Windows, DOS, etc.) by those having ordinary skill in the art. Those having ordinary skill in the art will recognize that the caution regarding reverse sorting of the directory listing mentioned with respect to Example 2 applies here as well.",{"@attributes":{"id":"p-0038","num":"0053"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"#! \/usr\/bin\/perl"},{"entry":"#############################################"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"70pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["## This script takes the AfterFederation.zip","###"]},{"entry":["## template and replaces all the variable","###"]},{"entry":["## \u201cRICK\u201d instances with the current hostname","###"]},{"entry":["## of the node . . . . (directories and files)","###"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"217pt","align":"left"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"#############################################"},{"entry":"use File::Copy;"},{"entry":"my $HOST = \u2018hostname\u2019;"},{"entry":"chomp ($HOST);"},{"entry":"my $appFile = \u2018\/tmp\/FILES2.txt\u2019;"},{"entry":"my $dirFile = \u2018\/tmp\/DIRS2.txt\u2019;"},{"entry":"my $fileCounter=0;"},{"entry":"my $dirCounter=0;"},{"entry":"my $Variable = \u201cRICK\u201d;"},{"entry":"my $date= \u2018date+2 ;"},{"entry":"chomp ($date);"},{"entry":"print \u201c$date\\n\u201d;"},{"entry":"my @LIST= qw (DeploymentManager AppServer);"},{"entry":"foreach $i ( @LIST ) {"},{"entry":"if( -e $appFile && -e $dirFile ) {"},{"entry":"\u2003\u2018mv $appFile \/tmp\/FILES.txt.$i\u2019;"},{"entry":"\u2003\u2018mv $dirFile \/tmp\/DIRS.txt.$i\u2019;"},{"entry":"}"},{"entry":"my @files = \u2018find \/opt\/WebSphere51\/$i\/config\/ "},{"entry":"-type f -exec grep -q \\\u201c$Variable\\\u201d {\u2009} \\\\\\;"},{"entry":"-print > $appFile 2>\/dev\/null\u2019;"},{"entry":"my @dirs = \u2018find \/opt\/WebSphere51\/$i\/config\/ "},{"entry":"-type d -name \\\u201c$Variable\\*\\\u201d > $dirFile"},{"entry":"2>\/dev\/null\u2019;"},{"entry":"sleep(5);"},{"entry":"#----------------------------------------------------#"},{"entry":"#--- Changing files: RICK to hostname\u2003--#"},{"entry":"#----------------------------------------------------#"},{"entry":"open(APPFILE, \u201c$appFile\u201d);"},{"entry":"@files=<APPFILE>;"},{"entry":"close (APPFILE) ;"},{"entry":"foreach $item ( @files ) {"},{"entry":"\u2003chomp ($item);"},{"entry":"\u2003print \u201cFile: \\t $item\\n\u201d;"},{"entry":"\u2003$itemBackup =$item . \u201c.BAK\u201d;"},{"entry":"\u2003print \u201c\\t\\tCopying $item to $itemBackup ...\\n\u201d;"},{"entry":"\u2003move($item, $itemBackup) or die \u201cCopy failed for $item: $!\u201d;"},{"entry":"\u2003print \u201c\\t\\tReplacing $Variable with $HOST ...\\n\u201d;"},{"entry":"\u2003my $replace = \u2018sed -e \u2018s\/$Variable\/$HOST\/g\u2019 $itemBackup >> $item\u2019;"},{"entry":"\u2003$fileCounter++;"},{"entry":"\u2003unlink($itemBackup);"},{"entry":"}"},{"entry":"print \u201cNUMBER OF FILES CHANGED: $fileCounter\\n\u201d;"},{"entry":"#---------------------------------------------------------#"},{"entry":"#--- Changing directories: RICK to hostname --#"},{"entry":"#---------------------------------------------------------#"},{"entry":"sub backwards {$b cmp $a};"},{"entry":"open(DIRFILE, \u201c$dirFile\u201d);"},{"entry":"@dirs=<DIRFILE>;"},{"entry":"close (DIRFILE);"},{"entry":"my @SortedDirs = sort backwards(@dirs);"},{"entry":"$item = undef;"},{"entry":"foreach $item ( @SortedDirs ) {"},{"entry":"\u2003chomp($item);"},{"entry":"\u2003if( $item =~ \/$Variable\/i ) {"},{"entry":"\u2003opendir(MD1, $item) \u2225 die(\u201cCan't open directory: $item\\n\u201d);"},{"entry":"\u2003@theFiles=readdir(MD1);"},{"entry":"\u2003closedir (MD1);"},{"entry":"\u2003chdir($item);"},{"entry":"\u2003foreach $dir (@theFiles) {"},{"entry":"\u2003if ( -d $dir ) {"},{"entry":"\u2003\u2003if( $dir =~ \/$Variable\/ ) {"},{"entry":"\u2003\u2003\u2003my $original = $dir;"},{"entry":"\u2003\u2003\u2003(my $new1 = $original) =~ s\/$Variable\/$HOST\/;"},{"entry":"\u2003\u2003\u2003print \u201cNew Directory: $new1\\n\u201d;"},{"entry":"\u2003\u2003\u2003print \u201cMoving $original directory to $new1"},{"entry":"directory .....\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2018mv $original $new1\u2019;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"}"},{"entry":"print \u201c\\n ........NewEntry .................\\n\u201d;"},{"entry":"print \u201cDirectory: \\t $item\\n\u201d;"},{"entry":"$length = length($item);"},{"entry":"$sub = rindex($item, $Variable);"},{"entry":"$substring = substr($item, 0, $sub);"},{"entry":"@DirArray = split (\u039b\/\/, $item);"},{"entry":"my $lastElement = $DirArray[\u22121];"},{"entry":"chomp($lastElement);"},{"entry":"if ( $lastElement =~ \/$Variable\/ ) {"},{"entry":"\u2003\u2003($replace = $lastElement) =~ s\/$Variable\/$HOST\/;"},{"entry":"\u2003\u2003$substring .= $replace;"},{"entry":"\u2003}"},{"entry":"print \u201cFinal Substring: ..... $substring\\n\u201d;"},{"entry":"my $orig = $item;"},{"entry":"my $new = $substring;"},{"entry":"print \u201cNew Directory: $new\\n\u201d;"},{"entry":"print \u201cMoving $orig directory to $new directory ..... \\n\u201d;"},{"entry":"\u2018mv $orig $new\u2019;"},{"entry":"$dirCounter++;"},{"entry":") else {"},{"entry":"\u2003if ( -e $item ) {"},{"entry":"\u2003\u2003opendir(MD, $item) \u2225 die(\u201cCan't open directory: $item\\n\u201d);"},{"entry":"\u2003\u2003@thefiles=readdir(MD);"},{"entry":"\u2003\u2003closedir(MD);"},{"entry":"\u2003\u2003chdir ( $item) ;"},{"entry":"\u2003\u2003foreach $directory (@thefiles) {"},{"entry":"\u2003\u2003\u2003if( -d $directory) {"},{"entry":"\u2003\u2003\u2003\u2003if( $directory =~ \/$Variable\/ ) {"},{"entry":"\u2003\u2003\u2003\u2003\u2003my $orig2 = $directory;"},{"entry":"\u2003\u2003\u2003\u2003\u2003(my $new2 = $orig2) =~ s\/$Variable\/$HOST\/;"},{"entry":"\u2003\u2003\u2003\u2003\u2003print \u201cNew Directory: $new2\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2003\u2003print \u201cMoving $orig2 directory to $new2 directory"},{"entry":".....\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003\u2018mv $orig2 $new2\u2019;"},{"entry":"\u2003\u2003\u2003\u2003\u2003\u2003$dirCounter++;"},{"entry":"\u2003\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003}"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"}"},{"entry":"print \u201cNUMBER OF DIRECTORIES CHANGED: $dirCounter\\n\u201d;"},{"entry":"print \u201c$date\\n\u201d;"},{"entry":"}"},{"entry":"#----------------------------------------------------------#"},{"entry":"#--- Removing \/wstemp & \/config\/temp dirs -----#"},{"entry":"#----------------------------------------------------------#"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}]}}},"Thus far, the discussion has centered around creation of the baseline template  on the template server . From there, the baseline template  may be uploaded to a selected computing system and decompressed\/unpacked to complete restoration of the software application  to a baseline state. A technical support person usually performs the various tasks described (e.g., uploading, restoring, inserting computing system-specific references, etc.). In some embodiments, however, the technical support person may automate the various tasks by providing the baseline template  to a restoration tool along with the required scripting routines . The restoration tool thereafter performs the uploading, restoring, insertion of computing system-specific references, and other related tasks as needed (e.g., in real time) or according to some predetermined schedule set by the technical support person.",{"@attributes":{"id":"p-0040","num":"0055"},"figref":["FIG. 4","FIG. 2"],"b":["400","400","200","402","206","402","202","402","320","202","320","322","402","402"]},{"@attributes":{"id":"p-0041","num":"0056"},"figref":"FIG. 5","b":["402","500","318","500","320","502","320","204","204","204","504","320","506","318","508","500","500"],"i":["a","b","c"]},"Such a restoration tool as described above, when used in conjunction with a code repository, allows technical support personnel or other users to specify, for example, which baseline template  (assuming multiple versions of the baseline template) to use for the restoration and which scripting routine  to execute for the restoration. An example of a code repository that may be used with the deployment tool  for storing code is StarTeam\u2122 from Borland Corp. of Cupertino, Calif. An example of a PERL language scripting routine  that may be used with the OPS deployment tool for restoring the software application  to a baseline state is shown in Example 4 below. Other scripting routines written for other operating systems may certainly be used without departing from principles of the invention.",{"@attributes":{"id":"p-0043","num":"0058"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"273pt","align":"left"}},"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":"#!\/usr\/bin\/perl"},{"entry":"#DirectiveReplaced - #!\/\/usr\/bin\/perl"},{"entry":"use File: :Copy;"},{"entry":"#------------------------------------------------#"},{"entry":"#--- Extract Template Tar Directory -----#"},{"entry":"#------------------------------------------------#"},{"entry":"print \u201cEXTRACTING TEMPLATE TAR DIRECTORY ....\\n\u201d;"},{"entry":"my $TAR = \u201c\/www\/was50\/FederationZip51\/lib\/FederationTemplate_51.tar\u201d;"},{"entry":"\u2003if( -e $TAR) {"},{"entry":"\u2003\u2003my $extract= \u201ctar -xvf$TAR\u201d;"},{"entry":"\u2003\u2003my $curdir = system(\u201cpwd\u201d);"},{"entry":"\u2003\u2003print \u201cCurrent dir is $curdir \\n\u201d;"},{"entry":"\u2003\u2003print \u201cSetting current dir to \/www\/wtsutil\/bin \\n\u201d;"},{"entry":"\u2003\u2003chdir(\u201c\/www\/wtsutil\/bin\u201d);"},{"entry":"\u2003\u2003my $curdir = system(\u201cpwd\u201d);"},{"entry":"\u2003\u2003print \u201cCurrent dir is now $curdir \\n\u201d;"},{"entry":"\u2003\u2003system($extract);"},{"entry":"\u2003\u2003print \u201cCalling Restore Routine ....\\n\u201d;"},{"entry":"\u2003\u2003Restore( );"},{"entry":"\u2003} else {"},{"entry":"\u2003\u2003print \u201cNO FILE PRESENT .....!!!!\\n\u201d;"},{"entry":"\u2003\u2003exit (1);"},{"entry":"\u2003}"},{"entry":"sub Restore {"},{"entry":"#-------------------------------------------#"},{"entry":"#----------- Static Vars -----------------#"},{"entry":"#------------------------------------------#"},{"entry":"my $FederationDir = \u201c\/www\/wtsutil\/bin\/FederationTemplate\/\u201d;"},{"entry":"my $WASTEMPLATE = $FederationDir . \u201cBackupConfigs\/was.Template.BackupConfig.zip\u201d;"},{"entry":"my \u2003\u2003$WDMTEMPLATE \u2003\u2003=\u2003\u2003$FederationDir\u2003\u2003."},{"entry":"\u201cBackupConfigs\/wdm.Template.BackupConfig.zip\u201d;"},{"entry":"my $SCRIPT= $FederationDir . \u201cscripts\/AfterFederation_RestoreHostname.pl\u201d;"},{"entry":"my $WASCONFDIR = \u201c\/opt\/WebSphere51\/AppServer\/config\u201d;"},{"entry":"my $WDMCONFDIR = \u201c\/opt\/WebSphere51\/DeploymentManager\/config\u201d;"},{"entry":"print \u201cSTARTING CONFIG RESTORE ... \\n\u201d;"},{"entry":"#----------------------------------------------------#"},{"entry":"#--- Stopping all WebSphere Processes -----#"},{"entry":"#----------------------------------------------------#"},{"entry":"$procName = \u201cjava\u201d;"},{"entry":"$0sType= \u00b7 \u2018uname\u2019;"},{"entry":"chomp($OsType) ;"},{"entry":"print \u201cOperating System: ( $OsType ) --------------------------- \\n\u201d;"},{"entry":"my $killCMD;"},{"entry":"if( $0sType =~ \/Linux\/ ) {"},{"entry":"$killCMD = \u201cps -auxww | grep -v grep | grep -v deploynode | grep -i $procName |"},{"entry":"awk \u2018 { print \\$2)\u2019 | xargs kill -9\u201d;"},{"entry":"}"},{"entry":"if ( $OsType =~ \/SunOS\/ ) {"},{"entry":"$killCMD = \u201c\/usr\/ucb\/ps -auxww | grep -v grep | grep -v deploynode | grep -i"},{"entry":"$procName | awk \u2018{ print \\$2 }\u2019 | xargs kill -9\u201d;"},{"entry":"}"},{"entry":"if ( $OsType =~ \/AIX\/ ) {"},{"entry":"$killCMD = \u201cps -ef | grep $procName | grep -v grep | grep -v deploynode | awk \u2018{"},{"entry":"print \\$2 }\u2019 | xargs kill -9\u201d;"},{"entry":"}"},{"entry":"print \u201c\\tKilling all WebSphere(xx) Processes ...\\n\u201d;"},{"entry":"print \u201cKill Command: ( $killCMD) \\n\u201d;"},{"entry":"system($killCMD);"},{"entry":"#----------------------------------------------#"},{"entry":"#--- Removing config directories -------#"},{"entry":"#--- contents . . . . . . . . . ----------------#"},{"entry":"#----------------------------------------------#"},{"entry":"\u2003#--- WAS Configs ---#"},{"entry":"\u2003if (! (-e $WASCONFDIR)) {"},{"entry":"\u2003\u2003print (\u201cWas config dir $WASCONFDIR is empty - creating ... \\n\u201d);"},{"entry":"\u2003\u2003if (!mkdir(SWASCONFDIR, 0755)) {"},{"entry":"\u2003\u2003\u2003print \u201cError creating directory $WASCONFDIR = $! \\n\u201d;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"my $returnValuewas = chdir ( $WASCONFDIR) or die (\u201cCannot change to $_ directory"},{"entry":"... \\n\u201d);"},{"entry":"\u2003print \u201cRETURNVALUE WAS = $returnValuewas\\n\u201d;"},{"entry":"\u2003if($retumValuewas eq 1) {"},{"entry":"\u2003\u2003print \u201c\\tRemoving WAS Config files ... \\n\u201d;"},{"entry":"\u2003\u2003my $wasResu1t = \u201crm -Rf *\u201d;"},{"entry":"\u2003\u2003system($wasResult);"},{"entry":"\u2003\u2003print \u201c\\tPlacing Templated WAS Config files ... \\n\u201d;"},{"entry":"\u2003\u2003my $WASPLATE = \u201cjar -xvf$WASTEMPLATE\u201d;"},{"entry":"\u2003\u2003system($WASPLATE);"},{"entry":"\u2003\u2003print \u201cCleaning up BACKUP FILES ... \\n\u201d;"},{"entry":"\u2003\u2003my $cleanupWAS = \u201cfind\\. \\-type f \\-name \\\u201d*\\.BAK\\\u201d \\-print\\|xargs rm\u201d;"},{"entry":"\u2003\u2003system($cleanupWAS);"},{"entry":"}"},{"entry":"\u2003#--- WDM Configs -----#"},{"entry":"\u2003if (! (-e $WDMCONFDIR)) {"},{"entry":"\u2003\u2003print (\u201cWas config dir $WDMCONFDIR is empty - creating ... \\n\u201d);"},{"entry":"\u2003\u2003if (!mkdir($WDMCONFDIR, 0755)) {"},{"entry":"\u2003\u2003\u2003print \u201cError creating directory $WDMCONFDIR = $! \\n\u201d;"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"my $retumValuewdm = chdir($WDMCONFDIR) or die (\u201cCannot change to $_ directory"},{"entry":"...\\n\u201d);"},{"entry":"\u2003print \u201cRETURNVALUE WDM = $retumValuewdm\\n\u201d;"},{"entry":"\u2003if($retumValuewdm eq 1) {"},{"entry":"\u2003\u2003print \u201c\\tRemoving WDM Config files ...\\n\u201d;"},{"entry":"\u2003\u2003my $wdmResult = \u2018rm -Rf *\u2019;"},{"entry":"\u2003\u2003print \u201c\\tPlacing Templated WDM Config files ...\\n\u201d;"},{"entry":"\u2003\u2003my $WDMPLATE = \u201cjar -xvf$WDMTEMPLATE\u201d;"},{"entry":"\u2003\u2003system($WDMPLATE);"},{"entry":"\u2003\u2003print \u201cCleaning up BACKUP FILES ...\\n\u201d;"},{"entry":"\u2003\u2003my $cleanupWDM = \u201cfind \\. \\-type f \\-name \\\u201d*\\.BAK\\\u201d \\-print\\|xargs rm\u201d;"},{"entry":"\u2003\u2003system($cleanupWDM);"},{"entry":"\u2003}"},{"entry":"#----------------------------------------------------#"},{"entry":"#---- Running Search & Replace Script ----#"},{"entry":"#----------------------------------------------------#"},{"entry":"\u2003$scriptResult = \u201cperl $SCRIPT\u201d;"},{"entry":"\u2003print \u201c\\tRestoring Hostname to WAS & WDM Config Files ... \\n\u201d;"},{"entry":"\u2003system($scriptResult);"},{"entry":"\u2003print \u201cFINAL CLEANUP OF BACKUP FILES \\n\u201d;"},{"entry":"\u2003print \u201cWAS FILE CLEANUP ..... \\n\u201d;"},{"entry":"my $wAsClean = \u201cfind \/opt\/WebSphere51\/AppServer\/config\/ \\-type f \\-name \\\u201d*\\.BAK\\\u201d"},{"entry":"\\-print\\|xargs rm\u201d;"},{"entry":"\u2003system($wAsClean);"},{"entry":"\u2003print \u201cWDM FILE CLEANUP .....\\n\u201d;"},{"entry":"my $wDmClean = \u201cfind \/opt\/WebSphere51\/DeploymentManager\/config\/ \\-type f\\-name"},{"entry":"\\\u201d*\\.BAK\\\u201d \\-print\\|xargs rm\u201d;"},{"entry":"\u2003system($wDmClean);"},{"entry":"}"},{"entry":"my $host = \u2018hostname\u2019;"},{"entry":"chomp ($host) ;"},{"entry":"print \u201c\\nHostname: $host\\n\u201d;"},{"entry":"my $network = $host . \u201cNetwork\u201d;"},{"entry":"print \u201cNetwork: $network\\n \u2022;"},{"entry":"my\u2003\u2003\u2003\u2003\u2003\u2003\u2003$wdmsecFile \u2003\u2003\u2003\u2003\u2003="},{"entry":"\u201c\/opt\/WebSphere51\/DeploymentManager\/config\/cells\/network\/security.xml\u201d;"},{"entry":"my $wassecFile = \u201c\/opt\/WebSphere51\/AppServer\/config\/cells\/$network\/security.xml\u201d;"},{"entry":"my @Files = (\u201c$wdmsecFile\u201d, \u201c$wassecFile\u201d);"},{"entry":"my $oldPword;"},{"entry":"my $oldid;"},{"entry":"my $pword;"},{"entry":"my $id;"},{"entry":"my $copy1 = cp $wdmsecFile"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/config\/cells\/$network\/security.xml.preFederation\u2019;"},{"entry":"my $copy2 = \u2018cp $wassecFile"},{"entry":"\/opt\/WebSphere51\/AppServer\/config\/cells\/$network\/security.xml.preFederation\u2019;"},{"entry":"#-------------------------------------#"},{"entry":"#-- Retrieve old values from ---#"},{"entry":"#-- security.xml files.... ---------#"},{"entry":"#-------------------------------------#"},{"entry":"foreach $secFile (@Files) {"},{"entry":"\u2003if( -e $secFile) {"},{"entry":"\u2003\u2003print \u201c\\nProcessing $secFile ....\\n\u201d;"},{"entry":"\u2003\u2003open(APFILE, \u201c$secFile\u201d);"},{"entry":"\u2003\u2003@files=<APFILE>;"},{"entry":"\u2003\u2003close (APFILE);"},{"entry":"\u2003\u2003foreach $item ( @files ) {"},{"entry":"\u2003\u2003\u2003if ( $item =~ \/serverid\\=\\\u201d(\\w+)\\\u201d"},{"entry":"serverPassword\\=\\\u201d(\\{xor\\}\\w+)\\\u201d\/ ) {"},{"entry":"\u2003\u2003\u2003\u2003$oldid = $1;"},{"entry":"\u2003\u2003\u2003\u2003$oldPword = $2;"},{"entry":"\u2003\u2003\u2003\u2003#chomp( $oldId) ;"},{"entry":"\u2003\u2003\u2003\u2003#chomp($oldPword);"},{"entry":"\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003}"},{"entry":"\u2003\u2003\u2003print \u201cOLD WAS ACCOUNT\\n\u201d;"},{"entry":"\u2003\u2003\u2003print \u201cOld Id is: $oldId\\n\u201d;"},{"entry":"\u2003\u2003\u2003print \u201cOld PWord is : $oldPword\\n\u201d;"},{"entry":"#---------------------------------------#"},{"entry":"#--- set was account values ------#"},{"entry":"#---------------------------------------#"},{"entry":"\u2003\u2003print \u201cHost: $host\\n\u201d;"},{"entry":"\u2003\u2003if( $host =~ \/{circumflex over (\u2009)}prod\/i ) {"},{"entry":"\u2003\u2003$id= \u201cPRODWASSVC\u201d;"},{"entry":"\u2003\u2003$pword = \u201c\\{xor\\}bW9qKD4s\u201d;"},{"entry":"\u2003} elsif ( $host=~ \/{circumflex over (\u2009)}test\/i ) {"},{"entry":"\u2003\u2003$id = \u201cTESTWASSVC\u201d;"},{"entry":"\u2003\u2003$pword = \u201c\\{xor\\}bW9rKD4s\u201d;"},{"entry":"\u2003} elsif ( $host=~ \/{circumflex over (\u2009)}dev\/i ){"},{"entry":"\u2003\u2003$id = \u201cDEVWASSVC\u201d;"},{"entry":"\u2003\u2003$pword =\u201c\\{xor\\}bW9sKD4s\u201d;"},{"entry":"\u2003}"},{"entry":"\u2003print \u201c\\nNEW WAS ACCOUNT\\n\u201d;"},{"entry":"\u2003print \u201cID: $id\\n\u201d;"},{"entry":"\u2003print \u201cPWORD: $pword\\n\u201d;"},{"entry":"\u2003my @oldArray = (\u201c$oldId\u201d, \u201c$oldPword\u201d);"},{"entry":"\u2003my @newArray = (\u201c$id\u201d, \u201c$pword\u201d);"},{"entry":"\u2003my $k=0;"},{"entry":"#------------------------------------------#"},{"entry":"#-- Change values in security.xml --#"},{"entry":"#------------------------------------------#"},{"entry":"\u2003\u2003while( $k < 2 ){"},{"entry":"\u2003\u2003\u2003print \u201cFile: \\t $secFile\\n\u201d;"},{"entry":"\u2003\u2003\u2003$secFileBackup = $secFile. \u201c.BAK\u201d;"},{"entry":"\u2003\u2003\u2003print \u201c\\t\\tCopying $secFile to $secFileBackup ...\\n\u201d;"},{"entry":"\u2003\u2003\u2003move($secFile, $secFileBackup) or die \u201cCopy failed for $secFile: $!\u201d;"},{"entry":"\u2003\u2003\u2003print \u201c\\t\\tReplacing SoldArray[$k] with $newArray[$k] ...\\n\u201d;"},{"entry":"\u2003\u2003\u2003my $replace = \u2018sed -e \u2018s\/$oldArray[$k]\/$newArray[Sk]\/g\u2019 $secFileBackup >>"},{"entry":"$secFile\u2019;"},{"entry":"\u2003\u2003\u2003$k++;"},{"entry":"\u2003\u2003\u2003my $perms = +1 chmod 744 $secFileBackup\u2019;"},{"entry":"\u2003\u2003\u2003unlink($secFileBackup);"},{"entry":"\u2003\u2003}"},{"entry":"\u2003\u2003$k=0;"},{"entry":"\u2003} else {"},{"entry":"\u2003\u2003print \u201c$secFile does not exist !!!!!\u201d;"},{"entry":"\u2003}"},{"entry":"}"},{"entry":"#-------------------------------------------#"},{"entry":"#-- Linking SOAP & SAS Files -----#"},{"entry":"#-------------------------------------------#"},{"entry":"\u2003print \u201cHost: $host\\n\u201d;"},{"entry":"\u2003if( $host =~ \/{circumflex over (\u2009)}prod\/i ) {"},{"entry":"\u2003\u2003\u2003print \u201c\\n--------- Setting SOAP and SAS file to PROD -------\\n\\n\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/soapconfig\/soap.client-PROD.props.wdm"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/properties\/soap.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/soapconfig\/soap.client-PROD.props.was"},{"entry":"\/opt\/WebSphere51\/AppServer\/properties\/soap.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/sasconfig\/sas.client-PROD.props.wdm"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/properties\/sas.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/sasconfig\/sas.client-PROD.props.was"},{"entry":"\/opt\/WebSphere51\/AppServer\/properties\/sas.client.props\u2019;"},{"entry":"\u2003} elsif ( $host =~ \/{circumflex over (\u2009)}test\/i ) {"},{"entry":"\u2003\u2003print \u201c\\n--------- Setting SOAP and SAS file to TEST -------\\n\\n\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/soapconfig\/soap.client-TEST.props.wdm"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/properties\/soap.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/soapconfig\/soap.client-TEST.props.was"},{"entry":"\/opt\/WebSphere51\/AppServer\/properties\/soap.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/sasconfig\/sas.client-TEST.props.wdm"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/properties\/sas.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/sasconfig\/sas.client-TEST.props.was"},{"entry":"\/opt\/WebSphere51\/AppServer\/properties\/sas.client.props\u2019;"},{"entry":"\u2003} elsif ( $host =~ \/{circumflex over (\u2009)}dev\/i ) {"},{"entry":"\u2003\u2003\u2003print \u201c\\n--------- Setting SOAP and SAS file to DEV -------\\n\\n\\n\u201d;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/soapconfig\/soap.client-DEV.props.wdm"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/properties\/soap.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/soapconfig\/soap.client-DEV.props.was"},{"entry":"\/opt\/WebSphere51\/AppServer\/properties\/soap.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/sasconfig\/sas.client-DEV.props.wdm"},{"entry":"\/opt\/WebSphere51\/DeploymentManager\/properties\/sas.client.props\u2019;"},{"entry":"\u2003\u2003\u2003\u2018ln -fs \/www\/was50\/config\/sasconfig\/sas.client-DEV.props.was"},{"entry":"\/opt\/WebSphere51\/AppServer\/properties\/sas.client.props\u2019;"},{"entry":"\u2003}"},{"entry":"#-------------------------------------------#"},{"entry":"#-- Setting up setupCmdLine.sh ----#"},{"entry":"#-------------------------------------------#"},{"entry":"my $oldname;"},{"entry":"my $cmdLineFile = \u201c\/opt\/WebSphere51\/AppServer\/bin\/setupCmdLine.sh\u201d;"},{"entry":"my $copy3 = \u2018cp $cmdLineFile"},{"entry":"\/opt\/WebSphere51\/AppServer\/bin\/setupCmdLine.sh.afterFederation\u2019;"},{"entry":"print \u201cSetting up setupCmdLine.sh file .....\\n\u201d;"},{"entry":"print \u201cHost: $host\\n\u201d;"},{"entry":"open(APFILE, \u201c$cmdLineFile\u201d);"},{"entry":"@les=<APFILE>;"},{"entry":"close (APFILE) ;"},{"entry":"\u2003foreach $it ( @les ) {"},{"entry":"\u2003\u2003if( $it =~ \/WAS_CELL\\=(\\w+)Network\/ ) {"},{"entry":"\u2003\u2003\u2003$oldname $1;"},{"entry":"\u2003\u2003\u2003#chomp ($name);"},{"entry":"\u2003\u2003}"},{"entry":"\u2003}"},{"entry":"\u2003\u2003print \u201cOldName: $oldname\\n\u201d;"},{"entry":"\u2003\u2003print \u201cFile: \\t $cmdLineFile\\n\u201d;"},{"entry":"\u2003\u2003$cmdLineBackup = $cmdLineFile . \u201c.BAK\u201d;"},{"entry":"\u2003\u2003print \u201c\\t\\tCopying $cmdLineFile to $cmdLineBackup ...\\n\u201d;"},{"entry":"\u2003\u2003$cmdLineFile"},{"entry":"\u2003\u2003move($cmdLineFile, $cmdLineBackup) or die \u201cCopy failed for $cmdLineFile:"},{"entry":"\u2003\u2003$!\u201d;"},{"entry":"\u2003\u2003print \u201c\\t\\tReplacing $oldname with $host ... \\n\u201d;"},{"entry":"\u2003\u2003my $replace = \u2018sed -e \u2018s\/$oldname\/$host\/g\u2019 $cmdLineBackup >> $cmdLineFile\u2019;"},{"entry":"\u2003\u2003my $permision = \u2018chmod 744 $cmdLineFile\u2019;"},{"entry":"\u2003\u2003unlink($cmdLineBackup);"},{"entry":"#-----------------------------------------------------#"},{"entry":"#---- Cleaning up FederationTemplate Dir --#"},{"entry":"#-----------------------------------------------------#"},{"entry":"\u2003\u2003if ( -d \u201c\/www\/wtsutil\/bin\/FederationTemplate\u201d ) {"},{"entry":"\u2003\u2003system \u201crm -rf \/www\/wtsutil\/bin\/FederationTemplate\u201d;"},{"entry":"\u2003}"},{"entry":"\u2003if ( -d \u201c\/www\/was50\/FederationZip51\u201d ) {"},{"entry":"\u2003\u2003system \u201crm -rf \/www\/was50\/FederationZip51\u201d;"},{"entry":"\u2003}"},{"entry":"#################################################"},{"entry":"######### END OF SCRIPT ########################"},{"entry":"#################################################"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]}}}}},"In operation, the technical support person select the particular user computing system , , or on which to install the software application  through the user interface . In some embodiments, the technical support person also specifies when the restoration is to take place. The restoration tool  thereafter may automatically perform the restoration in the manner described above at the appropriate date and time. The date and time of the installation may be in real time or it may be according to some predetermined schedule, or it may occur based on some other condition or criteria. Once the restoration is complete, the software application  is ready to be used on the new user computing system , , or in significantly less time compared to a full installation of the software application .",{"@attributes":{"id":"p-0045","num":"0060"},"figref":"FIG. 6","b":["600","600","602","604","606"]},"At step , the baseline template is uploaded to a selected user computing system. The upload may occur over a network or it may be performed from one computing system (e.g., the template server ) directly to another computing system. At step , the baseline template is decompressed\/unpacked on the selected computing system to retrieve the configuration files, directories, and sub-directories of the software application. Generic references or variables are then replaced with the name of the selected user computing system at step  to complete the restoration of the software application to a baseline state. Note that this step may be done either manually by technical support personnel or through the use of an automated restoration tool such as the OPS deployment tool. At step , a determination may be made as to whether additional restorations of the software application are needed. If the answer is yes, the method  returns to step  and the restoration is repeated for the next computing system. If the answer is no, the method  is concluded.","The foregoing embodiments of the invention have been described with respect to the restoration of a complex software application across an organization's local or private network. However, the disclosed embodiments are not limited thereto and may be used to restore any software application across any network, including the Internet. In the latter case, the baseline template may be stored on a web server and made available through a web site hosted by the web server. The baseline template may then be downloaded and used to restore a software application as needed. The download may occur free of charge (e.g., freeware, shareware), or as part of an online purchase or other e-commerce transaction (preferably with the appropriate security mechanisms in place). Such an arrangement is useful where the software application that needs to be restored is particularly large and downloading the entire software application over the network would take a long time. In some embodiments, the provider of the baseline template may be a technical support provider for the software application and the receiver of the baseline template may be a purchaser of the software application.","Any compression algorithms, scripting routines (e.g., for handling computing system-specific references), or other software tools may be transferred along with the baseline template to the selected computing system. Alternatively, instead of several separate software tools, all required software tools may be bundled together in a single executable program (e.g., a \u201crestore\u201d file) written and compiled in an appropriate programming language (e.g., Java, Flash, Html, Xml, C++, etc.) and subsequently transferred to and executed on the selected computing system. In some embodiments, the executable program containing the software tools may be combined with the baseline template as a single file. In any event, the above arrangement allows businesses and consumers alike to benefit from the highly efficient restoration system and method.","While the disclosed embodiments have been described with reference to one or more particular examples, those skilled in the art will recognize that many changes may be made thereto without departing from the spirit and scope of the inventions. Therefore, each of the foregoing embodiments and obvious variations thereof is contemplated as falling within the spirit and scope of the claimed inventions, which is set forth in the following claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing and other advantages will become apparent from the following detailed description and upon reference to the drawings, wherein:",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"}]},"DETDESC":[{},{}]}
