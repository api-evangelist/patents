---
title: Live data as a service and corresponding programming infrastructure
abstract: Techniques for live data management are described. Some embodiments provide a Live Data Management System (“LDMS”) that provides a facility for managing live data objects and for efficiently developing client-server applications that utilize such live data objects. Live data objects are modules of computation that exist on both a client side and server side portion of a client-server application. Live data objects are configured to monitor changes to data hosted on or accessible via the server side, and to automatically update the client side without the need for polling or other requests made by the client side. The described techniques facilitate efficient software development of Web-based client server applications.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09134985&OS=09134985&RS=09134985
owner: 
number: 09134985
owner_city: 
owner_country: 
publication_date: 20140813
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["TECHNICAL FIELD","DETAILED DESCRIPTION"],"p":["The present disclosure relates to methods, techniques, systems, and frameworks for live data management and corresponding techniques for facilitating efficient software development of Web-based client server applications.","Embodiments described herein provide enhanced computer and network-based methods, techniques, and systems for live data management. The described techniques provide a framework for efficient software application development of client-server applications that use live data objects. Live data objects are objects that exist on both a client side and server side portion of a client-server application. Live data objects are configured to monitor changes to data hosted on (or accessible via) the server side, and to automatically update the client side without the need for polling or other requests made by the client side. More specifically, the server side live data object continuously monitors information and generates events, which can be handled by the client side by way of callbacks or similar mechanisms. The client side receives events that it desires to handle and incorporates newly received data as desired. The server side can work with dynamically changing data that is stored in one or more databases (relational or otherwise) and\/or other sources or types of data, including files, sensor data, or the like.","The described techniques also support or provide an application development framework. In this framework, the software developer can code both the client and server side portions of the client-server application together in a single source code module using libraries or other shared code provided by a live data management system or other source. In some embodiments, the shared code supports the ability to instantiate a live object on the server based on code and\/or data received from the client portion. More particularly, the client portion initially loads a Web page or other data that includes code defining the client-server application. Then, the client portion transmits to the server code and\/or data that defines the server portion of the application. In response and based on the received server code, the server instantiates the server portion of the application, including by instantiating data bases, tables, and\/or related data sources; instantiating server application code; instantiating live data objects; and initiating any bookkeeping operations, such as application tracking, message dispatching, and the like.","The described techniques facilitate the efficient implementation of the model-view-controller (\u201cMVC\u201d) design pattern in the client-server context. In particular, a developer defines the operation of all three elements of the model-view-controller pattern within a single source file or other module. For example, the single source file may define the \u201cmodel,\u201d by defining database schemas and corresponding operations for managing the application state. The single source file may further define the \u201ccontroller,\u201d by defining the operations performed on the server side to operate upon the model. Finally, the single source file may further define the \u201cview,\u201d by defining database views for accessing the data on the server side and\/or the user interface controls that are to be displayed on the client side for presentation of the application and its corresponding data.","The described techniques for client-server application development are at least in part facilitated by the live data object. In particular, live data objects free the software developer from needing to craft code to manage, monitor, and effectuate the transmission of data updates between the client and server portions of the application. Instead, the developer needs only to specify the types of changes or updates of interest in order to receive automatic notifications of changes and\/or other updates that occur with respect to data hosted on or managed by the server portion of the application.","1. Location-Based Recommendation System Overview",{"@attributes":{"id":"p-0012","num":"0011"},"figref":["FIG. 1A","FIG. 1A"],"b":["100","50","50","100","104","110","126","110","110","112","50","50","52","52","54","54","100","50","50","126"],"i":["a ","b","a ","b ","a ","b ","a ","b","a ","b "]},"In the illustrated example, the first client initially performs a page load to receive a Web page or other data from the LDMS . The loaded page need not necessarily be hosted by the LDMS , and can instead be provided by some third-party system. The loaded page includes contents (e.g., code, instructions, specifications, and\/or data) that define the client-server application. Upon loading the page, the client transmits an application definition (also called an \u201capplication context\u201d) to the LDMS . The client also generates, based on the contents of the page, the user interface and the proxy object ","Upon receipt of the application definition by the LDMS , the session manager  creates a new session . In particular, the session manager  executes or interprets the received application definition and in response, generates a new session  and generates any necessary tables and views in the session data . In the language of the MVC paradigm, the session data  thus operates as the model. The new session  includes a proxy application  and a proxy object . In the language of the MVC paradigm, the proxy application  functions as the controller. The proxy object  is responsible for monitoring changes to the session data  and\/or its schema and transmitting updates to the proxy object ","Next, the second client performs a page load to receive the same Web page (or other data) provided to the client . As described with respect to client , client similarly creates the user interface and proxy object . In one embodiment, the client also transmits the application definition to the LDMS , which creates a corresponding session  for the client . The session  for client also includes a proxy application and a proxy object (not shown) that are dedicated to serving the client ","Since clients and are in this example sharing the session data , the initialization performed by the LDMS with respect to the client differs slightly as compared to client . In particular, since the structure of the session data  (e.g., its tables and database views) has already been defined by the earlier initialization performed with respect to client , the session manager  need not perform those operations again on behalf of client ","In other embodiments, the clients and\/or need not necessarily transmit the application context to the LDMS . In such embodiments, the application context may be loaded from a database of the LDMS  or other source (e.g., file system) based on the request (e.g., as defined by a URL and associated parameters) made by a client.","Some embodiments may support the caching of application contexts. For example, when client initially transmits the application definition to the LDMS , the LDMS  may cache the application context in a database or other storage. Then, when client initializes the application (e.g., on page load), the LDMS  may determine whether the application has been modified (e.g., by comparing modification dates or code signatures\/digests). If the application has not been modified, the LDMS  utilizes the cached application context; if so, the LDMS  obtains the modified application from the client , performs the necessary initializations, and stores the application context in the cache for future access. Such an embodiment would provide benefits during application development and prototyping, in that any modification to the application would be reloaded, while providing efficiency by not needlessly reloading unmodified applications.","Next, a user of client operates the user interface to interact with the client portion of the client-server application. For example, the user may add, modify, or delete data presented by the user interface . In response, the user interface causes the proxy object to transmit the update (e.g., new data) to the LDMS . The proxy application  receives the data update, which is then reflected in the session data .","In response to data updates made to the session data , the proxy object  of each of the sessions  transmits the data update to its corresponding client or . The data update is then received by proxy object and , and in turn reflected by the corresponding user interface and . In this manner, any update to the session data  is automatically forwarded to every client interacting with the client-server application. For example, if the client deletes a data item via the user interface , the client will be notified of the deletion so that it can be presented via the user interface ",{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 1B","b":["100","50","100"]},"The illustrated LDMS  includes a security filter , a session manager , multiple local sessions , managed processes , application libraries , and a storage layer . The storage layer  includes user and security data , a session directory , and session data .","The security filter  is responsible for restricting access to authorized users. Information about authorized users and the types of operations they are permitted to perform is stored as user and security data .","The session manager  is responsible for managing the creation and destruction of sessions . The session manager  also dispatches incoming and outgoing messages or other transmissions (e.g., updated data) between the clients  and the corresponding local sessions . The session manager  records information (e.g., identifiers) of new sessions in the session directory .","The local sessions  each manage resources associated with one of the clients . Each local session  includes a stateless module , a proxy application , a proxy object , and a real-time database instance . The stateless module  includes any objects\/code that do not need any state to be maintained between requests. Such stateless objects may be used to answer questions, such as application version numbers, or to access resources, such as images and other static data. Other such stateless objects may provide authentication functions, math functions, or the like.","The proxy application  is a component of the overall application that is responsible for performing the core server-side operations of the client-server application. Proxy applications exist and execute for the entire life span of the overall application.","The proxy object  is a live data object that is responsible for forwarding data updates between the session data  and a corresponding client . The elements of the local session  are defined by code and\/or data received from the client , as described with respect to , above.","The application libraries  include shared code that is used to implement functions within the LDMS  and\/or the clients . For example, the shared libraries  may include infrastructure code for defining and implementing client-server applications that use proxy objects.","The managed processes  include server-side processes that correspond to local sessions . The managed processes  typically connect to third-party applications or directly to external systems. In an example deployment that provides live data services for an electronic power simulation engine, the managed processes  provide glue between an application a variety of third-party tools, utilities, and services.","Note that although the LDMS  is here shown as a stand-alone system, it may also or instead be deployed in other ways. For example, the LDMS  may be deployed within or behind a Web server or other type of application server that provides a front end for interacting with the LDMS . In this way, the LDMS  may be deployed in the context of a larger system, such as an e-commerce system, a customer relationship management system, or the like.","2. Location-Based Recommendation System Overview",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIGS. 2A-2D","FIGS. 2A-2D","FIGS. 2A-2D"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 2A","b":["200","200","202","204","204","202"]},"The chat room application of  is defined by computer program Listing 1, below. Listing 1 is a listing of a Java Server Page that includes JavaScript code for defining the illustrated chat room application. The Java Server Page shown in Listing 1 is loaded by a client Web browser. The code in lines 15-62 is substantially directed to defining the operation of the server portion of the client-server chat application. In particular, lines 17-36 define the tables and entities that represent the MVC model and are stored in a database hosted by the server as session data. Lines 43-51 define a handler for adding new values (e.g., chat messages) to the database. Line 53 requests that all data events be forwarded by the live data object (proxy object) on the server side. Lines 56-61 define an event handler for entering new chat messages into the database. Lines 83-89 define the client side user interface shown in , including user interface elements  and .",{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 2B","FIG. 2A"],"b":["210","210","202","204","210","212","202"]},"The chat room application of  is defined by computer program Listing 2, below. Listing 2 is a listing of a Java Server Page that includes JavaScript code for defining the illustrated chat room application. The Java Server Page show in Listing 2 adds functionality to the code of Listing 1. For example, lines 35-38 add a clear function that operates to remove messages associated with a specified user. This function is invoked on the server side in response to user activation of the clear button .",{"@attributes":{"id":"p-0036","num":"0035"},"figref":["FIG. 2C","FIG. 2A","FIG. 2B"],"b":["220","220","202","204","220","212","220","222"]},"The chat room application of  is defined by computer program Listing 3, below. Listing 3 is a listing of a Java Server Page that includes JavaScript code for defining the illustrated chat room application. The Java Server Page shown in Listing 3 adds functionality to the code of Listing 2. For example, lines 42-59 define the log as a live data object having corresponding methods\/functions, including init, shutdown, refresh, and eventcb (an event call back).",{"@attributes":{"id":"p-0038","num":"0037"},"figref":["FIG. 2D","FIG. 2A","FIG. 2B","FIG. 2C"],"b":["230","230","202","204","230","212","222","230","232","234","232","234"]},"The screen  also includes a start button  and a stop button . The start button  is configured to start the log by sending the appropriate message to the server portion of the client-server application. The stop button  is configured to stop the log by sending the appropriate message to the server portion of the client-server application.","The chat room application of  is defined by computer program Listing 4, below. Listing 4 is a listing of a Java Server Page that includes JavaScript code for defining the illustrated chat room application. The Java Server Page shown in Listing 4 adds functionality to the code of Listing 3. For example, lines 28-33 add a chat room table. Lines 61-77 define corresponding functions for tracking and managing chat rooms.","Note that only a small amount of code was added to each successive version of the chat room application described above. The source code demonstrates an iterative software development process in which the developer codes both the client and server side portions in a single source module. When this module is executed by the client (e.g., a Web browser), the server code portion is transmitted to the server, where it is executed.","The described techniques also facilitate a dynamic development cycle by automatically re-instantiating the server portion in response to code modifications. In particular, when the developer makes changes (e.g., adds a new feature), he need only modify the source module because when the module is again executed by the client, the modified server code portion will be transmitted to the server, where it will automatically replace any previously instantiated server code portion. As noted above, modified server code portion may be retransmitted on every instantiation, or alternatively, a caching scheme may be deployed so that code is only retransmitted when it is modified. During development, the developer is thus freed from manually accessing the server in order to stop, replace, and restart the server code portion, or otherwise perform any management tasks on the server. This dynamic, iterative mode of software development facilitated by the described techniques yields great efficiencies in the rate, flexibility, responsiveness, and expressiveness of the software development process.","Note that although JavaScript is used herein for illustrative purposes, the techniques are not limited to JavaScript or to any particular programming language or architecture. Nor do the techniques require the use of Java Server Pages or related technology. In other embodiments, other types of dynamic Web programming, servlet containers, application servers, or the like may be employed.","3. Example Processes",{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIGS. 3A-3K"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":["FIG. 3A","FIGS. 1A and 1B","FIG. 3A"],"b":["100","3100"]},"Block  includes at a first computing system, instantiating a client-server application, by: performing operation(s) of block(s) , ,  and , described below. The client-server application is typically instantiated by a server computing system that hosts an example LDMS and that interacts with one or more clients. The LDMS is configured to instantiate and manage server portions of client-server applications, along with associated live data objects that automatically reflect data updates to one or more clients interacting with the server system.","Block  includes receiving a string from a client portion of the client-server application, the client portion executing on a second computing system, the string encoded with data used to mirror facilities of the client portion of the client-server application. The received string is typically encoded with instructions that define or otherwise specify the data structures and operations of the server portion of the client-server application. The received string is in some embodiments transmitted by a Web browser or other Web-capable client application executing on the second computing system. The string is transmitted by the second computing system in response to loading a page that includes code (e.g., JavaScript) that defines the client-server application. The string may be encoded in various ways, such as via Base64 encoding, or similar. In other embodiments, arbitrary binary data may be received instead of (or in addition to) the string.","Block  includes instantiating a server portion of the client-server application based on the received string, the server portion executing on the first computing system and containing functions that are proxies for functions available in the client portion of the client-server application. Instantiating the server portion may include generating a session , along with corresponding proxy applications, objects, and database tables and views, as specified by the received string. If the server portion already exists (e.g., because it has been previously created by another client), then a session with a proxy application and related objects will be created, but new database structures will not.","Block  includes monitoring data from a data source in accordance with the server portion functions and to receive updates to data from the data source. Monitoring the data from the data source may include creating a live data object (proxy object) that is configured to track changes to an underlying database, file, sensor, or other source of data. The types of data events captured by the live data object are typically also specified via the received string.","Block  includes automatically forwarding the updates to the client portion, without receiving polling requests from the client portion. Forwarding the updates typically involves transmitting to the second computing device notifications or other messages that reflect changes to the monitored data. Some embodiments use AJAX (Asynchronous JavaScript and XML) to \u201cpush\u201d such notifications to the client portion without requiring any polling or other request from the client portion.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":["FIG. 3B","FIG. 3A","FIG. 3B"],"b":["3100","3200","3100"]},"Block  includes instantiating a database for execution on the first computing system, the database defined by the received string. The database represents the model in the MVC paradigm. Instantiating the database may include creating tables and associated database views for interacting with those tables, as specified by the received string. The received string may specify tables, relationships, integrity rules, and the like. The instantiated database may be shared by multiple users who are operating the client-server application executing on distinct computing systems. Other types of data sources or data management systems may of course be employed, such as file systems, device\/sensor abstractions, or the like. The database may be hosted by the first computing system or in other cases be resident on a remote system.","Block  includes instantiating a proxy application for execution on the first computing system, the proxy application configured to perform functions defined by the received string. The proxy application is the controller in the MVC paradigm. The proxy application includes functions specified by the received string for interacting with the database and\/or performing stateless functions or operations.",{"@attributes":{"id":"p-0054","num":"0053"},"figref":["FIG. 3C","FIG. 3A","FIG. 3C"],"b":["3100","3300","3100"]},"Block  includes instantiating a server-side live data object for execution on the first computing system, wherein the live data object is configured to transmit the updates to a corresponding client-side live data object executing on the second computing system. As shown in , the server (first computing system) hosts a live data object (proxy object) that interacts with a corresponding live data object executing on the client (second computing system). The server-side live data object is configured to forward data update notifications to the client-side live data object, which in turn may reflect the update on a corresponding client user interface.",{"@attributes":{"id":"p-0056","num":"0055"},"figref":["FIG. 3D","FIG. 3A","FIG. 3D"],"b":["3100","3400","3100"]},"Block  includes determining that code corresponding to the server portion has been modified. In some embodiments, determining that the server portion code has been modified includes receiving a second string that represents the modified server portion. The second string is typically received in or during a software development process, in which a developer has modified the code module (e.g., Web page) to change the functionality of the client-server application. The process can then determine whether the code has been modified by comparing the string to a previously received string. In other embodiments, the client instead transmits a modification date, version number, and\/or a digest (e.g., MD5 digest) to the server, which can be compared by the server to determine whether the client is in possession of modified code.","Block  includes in response to determining that the code has been modified, automatically replacing the server portion with the modified server portion, such that a developer of the modified server portion need not manually access the server in order to stop, replace, and\/or restart the server portion. In embodiments where the client always retransmits a string that defines the server portion, the process automatically re-initializes and restarts the server portion of the application based on the newly received string, including any corresponding database operations\/structures. In embodiments where the client first transmits a modification date, version number, or code digest, the server may request that the client transmit the corresponding code, such as by transmitting a second string that defines the server code portion.",{"@attributes":{"id":"p-0059","num":"0058"},"figref":["FIG. 3E","FIG. 3A","FIG. 3E"],"b":["3100","3500","3100"]},"Block  includes receiving the string a second time. The string may be received a second time from the second computing system or from some other computing system that is also executing the client-server application.","Block  includes determining that the string is unchanged, and in response, not replacing or restarting the server portion. The process determines that the string is unchanged, such as by comparing it to the previously received string, by comparing hash values, or the like. Because the string is not changed, the process need not replace the server portion with a modified server portion, and in particular, it need not modify the data structures (e.g., database tables and views).",{"@attributes":{"id":"p-0062","num":"0061"},"figref":["FIG. 3F","FIG. 3A","FIG. 3F"],"b":["3100","3600","3100"]},"Block  includes receiving the string from a Web client that executes on the second computing system and that loads a single page that defines both the client portion and the server portion, by defining a database, a proxy application, and a server-side live data object corresponding to the server portion. Examples of single pages are provided in program Listings 1-4, below. By packaging both the client and sever portions within a single page, software development efficiencies may be obtained. In particular, the developer can rapidly prototype the client-server application because the functionality, data structures, and interfaces between the client and server portions are all contained within a single, manageable, and comprehensible file.",{"@attributes":{"id":"p-0064","num":"0063"},"figref":["FIG. 3G","FIG. 3G"],"b":"3700"},"Block  includes at a first computing system, instantiating a client-server application, by: performing operation(s) of block(s) ,  and , described below. This process implements an example of the application development model described herein, wherein a developer can efficiently code a client-server application in a single module (e.g., a Web page). As also discussed above, the client-server application is typically instantiated by a server computing system that hosts an example LDMS and that interacts with one or more clients.","Block  includes providing a page that defines both a client portion and a server portion of the client-server application. The page may be provided by the first computing system or some other system, such as a separate Web server.","Block  includes receiving a string from the client portion of the client-server application, the client portion executing on a second computing system, the string encoded with data used to mirror facilities of the client portion of the client-server application. The received string is typically encoded with instructions that define or otherwise specify the data structures and operations of the server portion of the client-server application. The received string is in some embodiments transmitted by a Web browser or other Web-capable client application executing on the second computing system. The string is transmitted by the second computing system in response to loading a page that includes code (e.g., JavaScript) that defines the client-server application.","Block  includes instantiating a server portion of the client-server application based on the received string, the server portion executing on the first computing system and containing functions that are proxies for functions available in the client portion of the client-server application. Instantiating the server portion may include generating a session , along with corresponding proxy applications, objects, and database tables and views, as specified by the received string. If the server portion already exists (e.g., because it has been previously created by another client), then a session with a proxy application and related objects will be created, but new database structures will not.",{"@attributes":{"id":"p-0069","num":"0068"},"figref":["FIG. 3H","FIG. 3G","FIG. 3H"],"b":["3700","3800","3700"]},"Block  includes receiving the string from a Web client executing on the second computing system, wherein the Web client loads the page and transmits the string to the first computing system, wherein the page includes code that defines the database and corresponding views, code that defines functions performed by the proxy application, and code that defines functions performed by the server-side live data object to transmit updates to the database to a client-side live data object that executes within the Web client. Examples of pages are provided in program Listings 1-4, below. As discussed above, application development efficiencies may be obtained by this approach.",{"@attributes":{"id":"p-0071","num":"0070"},"figref":["FIG. 3I","FIG. 3G","FIG. 3I"],"b":["3700","3900","3700"]},"Block  includes determining that code corresponding to the server portion has been modified. As noted above, determining that the code has been modified may be performed in various ways, such as by receiving a second string that represents the server portion and comparing it to the previously received string; comparing version numbers; comparing hash values; comparing modification dates\/times; or the like.","Block  includes in response to determining that the code has been modified, automatically replacing the server portion with the modified server portion, such that a developer of the modified server portion need not manually access the server in order to stop, replace, and\/or restart the server portion. The server portion may be automatically re-initialized based on a second string received by the client portion",{"@attributes":{"id":"p-0074","num":"0073"},"figref":["FIG. 3J","FIG. 3I","FIG. 3J"],"b":["3900","31000","3900"]},"Block  includes receiving from the second computing system a second string that represents the modified server portion. As noted above, in some embodiments the client (second) computing system will on every page load (or other condition) retransmit the string, modified or not. In other embodiments, the second string will be transmitted by the client computing system in response to a request from the first computing system, such as may be sent when the first computing system determines that the code has been modified, based on a comparison of version numbers, modification dates, code digests, or the like.","Block  includes in response to receiving the second string, automatically replacing the server portion.",{"@attributes":{"id":"p-0077","num":"0076"},"figref":["FIG. 3K","FIG. 3G","FIG. 3K"],"b":["3700","31100","3700"]},"Block  includes receiving an indication that the client-server application is in developer mode. Developer mode may be specified by a server-side configuration file or other mechanism, such as by providing a developer key as part the request transmitted by the second computing system","Block  includes in response to the received indication, automatically replacing the server portion every time the code corresponding to the server portion is modified. Techniques for conditionally replacing the server portion upon code modification are discussed above.","4. Example Computing System Implementation",{"@attributes":{"id":"p-0080","num":"0079"},"figref":["FIG. 4","FIG. 4"],"b":["10","100","100","10","100"]},"In the embodiment shown, computing system  comprises a computer memory (\u201cmemory\u201d) , a display , one or more Central Processing Units (\u201cCPU\u201d) , Input\/Output devices  (e.g., keyboard, mouse, CRT or LCD display, and the like), other computer-readable media , and network connections . The LDMS  is shown residing in memory . In other embodiments, some portion of the contents, some or all of the components of the LDMS  may be stored on and\/or transmitted over the other computer-readable media . The components of the LDMS  preferably execute on one or more CPUs  and perform the techniques described herein. Other code or programs  (e.g., an administrative interface, a Web server, and the like) and potentially other data repositories, such as data repository , also reside in the memory , and preferably execute on one or more CPUs . Of note, one or more of the components in  may not be present in any specific implementation. For example, some embodiments may not provide other computer readable media  or a display .","The LDMS  is shown executing in the memory  of the computing system . Also included in the memory are a user interface manager  and an application program interface (\u201cAPI\u201d) . The user interface manager  and the API  are drawn in dashed lines to indicate that in other embodiments, functions performed by one or more of these components may be performed externally to the LDMS .","The LDMS  interacts via the network  with client devices , information sources , and third-party systems\/applications . The network  may be any combination of media (e.g., twisted pair, coaxial, fiber optic, radio frequency), hardware (e.g., routers, switches, repeaters, transceivers), and protocols (e.g., TCP\/IP, UDP, Ethernet, Wi-Fi, WiMAX) that facilitate communication between remotely situated humans and\/or devices. The third-party systems\/applications  may include any systems that provide data to, or utilize data from, the LDMS , including Web browsers, e-commerce sites, calendar applications, email systems, social networking services, and the like. The information sources  may include remote data repositories that are managed, monitored, or tracked by or via the LDMS . For example, the LDMS  may include live data objects (proxy objects) that reflect updates to data that is housed in one of the information sources .","The UI manager  provides a view and a controller that facilitate user interaction with the LDMS  and its various components. For example, the UI manager  may provide interactive access to the LDMS , such that users can interact with the LDMS , such as by configuring user accounts and\/or permissions, monitoring the status of various data repositories managed by the LDMS , controlling processes, and the like. In some embodiments, access to the functionality of the UI manager  may be provided via a Web server, possibly executing as one of the other programs . In such embodiments, a user operating a Web browser executing on one of the client devices  can interact with the LDMS  via the UI manager .","The API  provides programmatic access to one or more functions of the LDMS . For example, the API  may provide a programmatic interface to one or more functions of the LDMS  that may be invoked by one of the other programs  or some other module. In this manner, the API  facilitates the development of third-party software, such as user interfaces, plug-ins, adapters (e.g., for integrating functions of the LDMS  into Web applications), and the like. In some embodiments, the API  is a REST (\u201cRepresentational State Transfer\u201d) API that is accessed via HTTP.","In addition, the API  may be in at least some embodiments invoked or otherwise accessed via remote entities, such as code executing on one of the client devices , information sources , and\/or one of the third-party systems\/applications , to access various functions of the LDMS . In typical embodiments, all interaction between a client  and the LDMS  is performed via the API . As another example, one of the third-party systems  may utilize, via the API , the functions of the LDMS  to provide client-server applications to its own clients.","In an example embodiment, components\/modules of the LDMS  are implemented using standard programming techniques. For example, the LDMS  may be implemented as a \u201cnative\u201d executable running on the CPU , along with one or more static or dynamic libraries. In other embodiments, the LDMS  may be implemented as instructions processed by a virtual machine that executes as one of the other programs . In general, a range of programming languages known in the art may be employed for implementing such example embodiments, including representative implementations of various programming language paradigms, including but not limited to, object-oriented (e.g., JAVA, C++, C#, Visual Basic.NET, Smalltalk, and the like), functional (e.g., ML, Lisp, Scheme, and the like), procedural (e.g., C, Pascal, Ada, Modula, and the like), scripting (e.g., PERL, RUBY, PYTHON, JAVASCRIPT, VBScript, and the like), and declarative (e.g., SQL, PROLOG, and the like).","The embodiments described above may also use either well-known or proprietary synchronous or asynchronous client-server computing techniques. Also, the various components may be implemented using more monolithic programming techniques, for example, as an executable running on a single CPU computer system, or alternatively decomposed using a variety of structuring techniques known in the art, including but not limited to, multiprogramming, multithreading, client-server, or peer-to-peer, running on one or more computer systems each having one or more CPUs. Some embodiments may execute concurrently and asynchronously, and communicate using message passing techniques. Equivalent synchronous embodiments are also supported. Also, other functions could be implemented and\/or performed by each component\/module, and in different orders, and by different components\/modules, yet still achieve the described functions.","In addition, programming interfaces to the data stored as part of the LDMS , such as data in the storage layer  (user and security data , session directory , and session data ) and\/or data repository , can be available by standard mechanisms such as through C, C++, C#, and JAVA APIs; libraries for accessing files, databases, or other data repositories; through scripting languages such as XML; or through Web servers, FTP servers, or other types of servers providing access to stored data. The illustrated data stores may be implemented as one or more database systems, file systems, or any other technique for storing such information, or any combination of the above, including implementations using distributed computing techniques.","Different configurations and locations of programs and data are contemplated for use with techniques described herein. A variety of distributed computing techniques are appropriate for implementing the components of the illustrated embodiments in a distributed manner including but not limited to TCP\/IP sockets, RPC, RMI, HTTP, Web Services (XML-RPC, JAX-RPC, SOAP, and the like). Other variations are possible. Also, other functionality could be provided by each component\/module, or existing functionality could be distributed amongst the components\/modules in different ways, yet still achieve the functions described herein.","Furthermore, in some embodiments, some or all of the components of the LDMS  may be implemented or provided in other manners, such as at least partially in firmware and\/or hardware, including, but not limited to one or more application-specific integrated circuits (\u201cASICs\u201d), standard integrated circuits, controllers executing appropriate instructions, and including microcontrollers and\/or embedded controllers, field-programmable gate arrays (\u201cFPGAs\u201d), complex programmable logic devices (\u201cCPLDs\u201d), and the like. Some or all of the system components and\/or data structures may also be stored as contents (e.g., as executable or other machine-readable software instructions or structured data) on a computer-readable medium (e.g., as a hard disk; a memory; a computer network or cellular wireless network or other data transmission medium; or a portable media article to be read by an appropriate drive or via an appropriate connection, such as a DVD or flash memory device) so as to enable or configure the computer-readable medium and\/or one or more associated computing systems or devices to execute or otherwise use or provide the contents to perform at least some of the described techniques. Some or all of the components and\/or data structures may be stored on tangible, non-transitory storage mediums. Some or all of the system components and data structures may also be stored as data signals (e.g., by being encoded as part of a carrier wave or included as part of an analog or digital propagated signal) on a variety of computer-readable transmission mediums, which are then transmitted, including across wireless-based and wired\/cable-based mediums, and may take a variety of forms (e.g., as part of a single or multiplexed analog signal, or as multiple discrete digital packets or frames). Such computer program products may also take other forms in other embodiments. Accordingly, embodiments of this disclosure may be practiced with other computer system configurations.","All of the above U.S. patents, U.S. patent application publications, U.S. patent applications, foreign patents, foreign patent applications, non-patent publications, and appendixes referred to in this specification and\/or listed in the Application Data Sheet, including but not limited to U.S. Provisional Patent Application No. 61\/865,519, filed on Aug. 13, 2013 and entitled \u201cLIVE DATA AS A SERVICE AND CORRESPONDING PROGRAMMING INFRASTRUCTURE,\u201d is incorporated herein by reference, in its entirety.","From the foregoing it will be appreciated that, although specific embodiments have been described herein for purposes of illustration, various modifications may be made without deviating from the spirit and scope of this disclosure. For example, the methods, techniques, and systems for live data management are applicable to other architectures or in other settings. For example, the live data management techniques may be used generally for client-server applications for monitoring or interacting with any kind of dynamic data, including power systems data, online games, personal information systems, calendar applications, or the like. Also, the methods, techniques, and systems discussed herein are applicable to differing protocols, communication media (optical, wireless, cable, etc.) and devices (e.g., desktop computers, wireless handsets, electronic organizers, personal digital assistants, tablet computers, portable email machines, game machines, pagers, navigation devices, etc.).","5. Computer Program Listings","The following program Listings 1-4 include code that respectively corresponds to the examples presented with respect to , above.",{"@attributes":{"id":"p-0095","num":"0094"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"259pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Listing 1"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"238pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","<%@ page language=\u201cjava\u201d contentType=\u201ctext\/html; charset=UTF-8\u201d"]},{"entry":["2.","pageEncoding=\u201cUTF-8\u201d%>"]},{"entry":["3.","<%@ page import=\u201ccom.powerdata.proxyclient.User\u201d%>"]},{"entry":["4.","<% User u = User.GetCurrentUser(request); %>"]},{"entry":["5.","<html><head>"]},{"entry":["6.","<meta http-equiv=\u201cContent-Type\u201d content=\u201ctext\/html; charset=UTF-8\u201d>"]},{"entry":["7.","<script src=\u2018proxyclient\/jquery-1.9.1.js\u2019><\/script>"]},{"entry":["8.","<script src=\u2018proxyclient\/pdpc.js\u2019><\/script>"]},{"entry":["9.","<script src=\u2018proxyclient\/ldm.js\u2019><\/script>"]},{"entry":["10.","<title>Simple Chat<\/title>"]},{"entry":["11.","<script>"]},{"entry":["12.","\/**"]},{"entry":["13.","* Create and configure an application instance named SChat"]},{"entry":["14.","*\/"]},{"entry":["15.","Init(\u201cSChat\u201d).then(function(liveDataManager) {"]},{"entry":["16.","\u2003\u2003\/** Load server side data and business logic *\/"]},{"entry":["17.","\u2003\u2003liveDataManager.defineServer(function( ) {"]},{"entry":["18.","\u2003\u2003\u2003\u2003\/** Define the schema *\/"]},{"entry":["19.","\u2003\u2003\u2003\u2003this.tables = {"]},{"entry":["20.","\u2003\u2003\u2003\u2003\u2003chatMessage: {"]},{"entry":["21.","\u2003\u2003\u2003\u2003\u2003\u2003cols:{"]},{"entry":["22.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003User:\u201dString\u201d,"]},{"entry":["23.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003Message:\u201dString\u201d"]},{"entry":["24.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["25.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["26.","\u2003\u2003\u2003\u2003};"]},{"entry":["27.","\u2003\u2003\u2003\u2003\/** Define business entities *\/"]},{"entry":["28.","\u2003\u2003\u2003\u2003this.entities = {"]},{"entry":["29.","\u2003\u2003\u2003\u2003\u2003\/** track each chat message *\/"]},{"entry":["30.","\u2003\u2003\u2003\u2003\u2003chatMessage:{"]},{"entry":["31.","\u2003\u2003\u2003\u2003\u2003\u2003append:function(parms){"]},{"entry":["32.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.User = user.getUsername( );"]},{"entry":["33.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return db.append(\u201cchatMessage\u201d,parms);"]},{"entry":["34.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["35.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["36.","\u2003\u2003\u2003\u2003};"]},{"entry":["37.","\u2003\u2003\u2003\/**"]},{"entry":["38.","\u2003\u2003\u2003* Start the application"]},{"entry":["39.","\u2003\u2003\u2003*\/"]},{"entry":["40.","\u2003\u2003}).then(function(liveDataManager) {"]},{"entry":["41.","\u2003\u2003\u2003\/** After the database is set up we can open the table or view *\/"]},{"entry":["42.","\u2003\u2003\u2003liveDataManager.getView(\u201cTable:chatMessage\u201d).then(function(tview) {"]},{"entry":["43.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for new values"]},{"entry":["44.","\u2003\u2003\u2003\u2003\u2003tview.onSetValue.add("]},{"entry":["45.","\u2003\u2003\u2003\u2003\u2003\u2003function(tview,key,row,col,colname,coltype,value) {"]},{"entry":["46.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (colname == \u201cUser\u201d) {"]},{"entry":["47.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,value,null);"]},{"entry":["48.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003} else if (colname == \u201cMessage\u201d) {"]},{"entry":["49.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,null,value);"]},{"entry":["50.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["51.","\u2003\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["52.","\u2003\u2003\u2003\u2003\u2003\/\/ tell the view to send all data events"]},{"entry":["53.","\u2003\u2003\u2003\u2003\u2003\u2003tview.setObservable( );"]},{"entry":["54.","\u2003\u2003\u2003});"]},{"entry":["55.","\u2003\u2003});"]},{"entry":["56.","\u2003\u2003\/** User event handler for entry new messages *\/"]},{"entry":["57.","\u2003\u2003$(\u201c#msg\u201d).change(function( ) {"]},{"entry":["58.","\u2003\u2003\u2003\u2003var msg = $(\u201c#msg\u201d).val( );"]},{"entry":["59.","\u2003\u2003\u2003\u2002liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dappend\u201d,{message:msg});"]},{"entry":["60.","\u2003\u2003\u2003\u2003$(\u201c#msg\u201d).val(\u201c\u201c);"]},{"entry":["61.","\u2003\u2003});"]},{"entry":["62.","});"]},{"entry":"63."},{"entry":["64.","\/**"]},{"entry":["65.","* UI function for adding values to the chat history."]},{"entry":["66.","*\/"]},{"entry":["67.","function addChatMessage(key,user,msg) {"]},{"entry":["68.","\u2003if ($(\u201c#hist\u201d+key).length == 0) {"]},{"entry":["69.","\u2003\u2003$(\u201c#hist\u201d).append(\u201c<div id=\\\u201dhist\u201d+key+\u201d\\\u201d><span id=\\\u201dhistu\u201d + key +"]},{"entry":["70.","\u2003\u2003\u2003\u201c\\\u201d><\/span><span id=\\\u201dhistm\u201d+key+\u201d\\\u201d><\/span><\/div>\u201c);"]},{"entry":["71.","\u2003\u2003$(\u201c#hist\u201d).scrollTop($(\u201c#hist\u201d).height( ));"]},{"entry":["72.","\u2003}"]},{"entry":["73.","\u2003if (user) {"]},{"entry":["74.","\u2003\u2003color = (user == \u201c<%=u.getUsername( )%>\u201c)?\u201d#cc00cc\u201d:\u201d#0000cc\u201d;"]},{"entry":["75.","\u2003\u2003$(\u201c#histu\u201d+key).html(\u201c<font color=\u2018\u201c+color+\u201d\u2019>\u201c+user+\u201d:<\/font> \u201c);"]},{"entry":["76.","\u2003} else if (msg) {"]},{"entry":["77.","\u2003\u2003$(\u201c#histm\u201d+key).text(msg);"]},{"entry":["78.","\u2003}"]},{"entry":["79.","}"]},{"entry":"80."},{"entry":["81.","<\/script>"]},{"entry":["82.","<\/head>"]},{"entry":["83.","<body>"]},{"entry":["84.","Logged in as <%=u.getUsername( )%>"]},{"entry":["85.","<a href=\u201cpublic\/login.jsp?logout=true\u201d>[logout]<\/a>"]},{"entry":["86.","<h2>Simple Chat<\/h2>"]},{"entry":["87.","<div id=\u201chist\u201d style=\u201c ... \u201c><\/div>"]},{"entry":["88.","<input id=\u201cmsg\u201d type=\u201ctext\u201d style=\u201cwidth:400px\u201d \/><br\/>"]},{"entry":["89.","<\/body>"]},{"entry":["90.","<\/html>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0096","num":"0095"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"266pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Listing 2"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"224pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","<%@","page language=\u201cjava\u201d contentType=\u201ctext\/html; charset=UTF-8\u201d"]},{"entry":["2.",{},"pageEncoding=\u201cUTF-8\u201d%>"]},{"entry":["3.","<%@","page import=\u201ccom.powerdata.proxyclient.user\u201d%>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["4.","<% User u = User.GetCurrentUser(request); %>"]},{"entry":["5.","<html><head>"]},{"entry":["6.","<meta http-equiv=\u201cContent-Type\u201d content=\u201ctext\/html; charset=UTF-8\u201d>"]},{"entry":["7.","<script src=\u2018proxyclient\/jquery-1.9.1.js\u2019><\/script>"]},{"entry":["8.","<script src=\u2018proxyclient\/pdpc.js\u2019><\/script>"]},{"entry":["9.","<script src=\u2018proxyclient\/ldm.js\u2019><\/script>"]},{"entry":["10.","<title>Simple Chat<\/title>"]},{"entry":["11.","<script>"]},{"entry":["12.","\/**"]},{"entry":["13.","* Create an application instance named SChat"]},{"entry":["14.","*\/"]},{"entry":["15.","Init(\u201cSChat\u201d).then(function(liveDataManager) {"]},{"entry":["16.","\u2003\u2003\/** Load entity definitions to the server *\/"]},{"entry":["17.","\u2003\u2003liveDataManager.defineServer(function( ) {"]},{"entry":["18.","\u2003\u2003\u2003\u2003\/** Define the schema *\/"]},{"entry":["19.","\u2003\u2003\u2003\u2003this.tables = {"]},{"entry":["20.","\u2003\u2003\u2003\u2003\u2003chatMessage: {"]},{"entry":["21.","\u2003\u2003\u2003\u2003\u2003\u2003cols:{"]},{"entry":["22.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003User:\u201dString\u201d,"]},{"entry":["23.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003Message:\u201dString\u201d"]},{"entry":["24.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["25.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["26.","\u2003\u2003\u2003\u2003};"]},{"entry":["27.","\u2003\u2003\u2003\u2003\/** Define DB Entities *\/"]},{"entry":["28.","\u2003\u2003\u2003\u2003this.entities = {"]},{"entry":["29.","\u2003\u2003\u2003\u2003\u2003\/** track each chat message *\/"]},{"entry":["30.","\u2003\u2003\u2003\u2003\u2003chatMessage:{"]},{"entry":["31.","\u2003\u2003\u2003\u2003\u2003\u2003append:function(parms){"]},{"entry":["32.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.User = user.getUsername( );"]},{"entry":["33.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return db.append(\u201cchatMessage\u201d,parms);"]},{"entry":["34.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["35.","\u2003\u2003\u2003\u2003\u2003\u2003clear:function(parms){"]},{"entry":["36.","\u2003\u2003\u2003var keys = db.ndxSearch(\u201cchatMessage\u201d,\u201dUser\u201d,user.getUsername( ));"]},{"entry":["37.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003db.remove(\u201cchatMessage\u201d,keys);"]},{"entry":["38.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["39.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["40.","\u2003\u2003\u2003\u2003};"]},{"entry":["41.","\u2003\u2003}).then(function(liveDataManager) {"]},{"entry":["42.","\u2003\u2003\u2003\/** After the database is set up we can open the table or view *\/"]},{"entry":["43.","\u2003\u2003\u2003liveDataManager.getview(\u201cTable:chatMessage\u201d).then(function(tview) {"]},{"entry":["44.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for new values"]},{"entry":["45.","\u2003\u2003\u2003\u2003\u2003tview.onSetvalue.add("]},{"entry":["46.","\u2003\u2003\u2003\u2003\u2003\u2003function(tview,key,row,col,colname,coltype,value) {"]},{"entry":["47.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (colname == \u201cUser\u201d) {"]},{"entry":["48.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,value,null);"]},{"entry":["49.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003} else if (colname == \u201cMessage\u201d) {"]},{"entry":["50.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,null,value);"]},{"entry":["51.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["52.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["53.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for removed rows"]},{"entry":["54.","\u2003\u2003\u2003\u2003\u2003tview.onDeleteRow.add(function(tview,key) {"]},{"entry":["55.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003$(\u201c#hist\u201d+key).remove( );"]},{"entry":["56.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["57.","\u2003\u2003\u2003\u2003\u2003\/\/ tell the view to send all data events"]},{"entry":["58.","\u2003\u2003\u2003\u2003\u2003tview.setObservable( );"]},{"entry":["59.","\u2003\u2003\u2003});"]},{"entry":["60.","\u2003\u2003});"]},{"entry":["61.","\u2003\u2003\/** User event handler for entery new messages *\/"]},{"entry":["62.","\u2003\u2003$(\u201c#msg\u201d).change(function( ) {"]},{"entry":["63.","\u2003\u2003\u2003\u2003var msg = $(\u201c#msg\u201d).val( );"]},{"entry":["64.","\u2003\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dappend\u201d,{Message:msg});"]},{"entry":["65.","\u2003\u2003\u2003\u2003$(\u201c#msg\u201d).val(\u201c\u201c);"]},{"entry":["66.","\u2003\u2003});"]},{"entry":["67.","\u2003\u2003\/** user event handler for the clear button *\/"]},{"entry":["68.","\u2003\u2003$(\u201c#clear\u201d).click(function( ) {"]},{"entry":["69.","\u2003\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dclear\u201d);"]},{"entry":["70.","\u2003\u2003});"]},{"entry":["71.","});"]},{"entry":"72."},{"entry":["73.","\/**"]},{"entry":["74.","* UI function for adding values to the chat history."]},{"entry":["75.","*\/"]},{"entry":["76.","function addChatMessage(key,user,msg) {"]},{"entry":["77.","\u2003if ($(\u201c#hist\u201d+key).length == 0) {"]},{"entry":["78.","\u2003\u2003$(\u201c#hist\u201d).append(\u201c<div id=\\\u201dhist\u201d+key+\u201d\\\u201d><span id=\\\u201dhistu\u201d + key +"]},{"entry":["79.","\u2003\u2003\u2003\u201c\\\u201d><\/span><span id=\\\u201dhistm\u201d+key+\u201d\\\u201d><\/span><\/div>\u201c);"]},{"entry":["80.","\u2003\u2003$(\u201c#hist\u201d).scrollTop($(\u201c#hist\u201d).height( ));"]},{"entry":["81.","\u2003}"]},{"entry":["82.","\u2003if (user) {"]},{"entry":["83.","\u2003\u2003color = (user == \u201c<%=u.getUsername( )%>\u201c)?\u201d#cc00cc\u201d:\u201d#0000cc\u201d;"]},{"entry":["84.","\u2003\u2003$(\u201c#histu\u201d+key).html(\u201c<font color=\u2018\u201c+color+\u201d\u2019>\u201c+user+\u201d:<\/font> \u201c);"]},{"entry":["85.","\u2003} else if (msg) {"]},{"entry":["86.","\u2003\u2003$(\u201c#histm\u201d+key).text(msg);"]},{"entry":["87.","\u2003}"]},{"entry":["88.","}"]},{"entry":"89."},{"entry":["90.","<\/script>"]},{"entry":["91.","<\/head>"]},{"entry":["92.","<body>"]},{"entry":["93.","Logged in as <%=u.getUsername( )%>"]},{"entry":["94.","<a href=\u201cpublic\/login.jsp?logout=true\u201d>[logout]<\/a>"]},{"entry":["95.","<h2>Simple Chat<\/h2>"]},{"entry":["96.","<div id=\u201chist\u201d style=\u201c ... \u201c><\/div>"]},{"entry":["97.","<input id=\u201cmsg\u201d type=\u201ctext\u201d style=\u201cwidth:400px\u201d \/><br\/>"]},{"entry":["98.","<button id=\u201cclear\u201d>Clear<\/button>"]},{"entry":["99.","<\/body>"]},{"entry":["100.","<\/html>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0097","num":"0096"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"266pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Listing 3"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"224pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","<%@","page language=\u201cjava\u201d contentType=\u201ctext\/html; charset=UTF-8\u201d"]},{"entry":["2.",{},"pageEncoding=\u201cUTF-8\u201d%>"]},{"entry":["3.","<%@","page import=\u201ccom.powerdata.proxyclient.User\u201d%>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"245pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["4.","<% User u = User.GetCurrentUser(request); %>"]},{"entry":["5.","<html><head>"]},{"entry":["6.","<meta http-equiv=\u201cContent-Type\u201d content=\u201ctext\/html; charset=UTF-8\u201d>"]},{"entry":["7.","<script src=\u2018proxyclient\/jquery-1.9.1.js\u2019><\/script>"]},{"entry":["8.","<script src=\u2018proxyclient\/pdpc.js\u2019><\/script>"]},{"entry":["9.","<script src=\u2018proxyclient\/ldm.js\u2019><\/script>"]},{"entry":["10.","<title>Simple Chat<\/title>"]},{"entry":["11.","<script>"]},{"entry":["12.","\/**"]},{"entry":["13.","* Create and configure application instance named SChat"]},{"entry":["14.","*\/"]},{"entry":["15.","Init(\u201cSChat\u201d).then(function(liveDataManager) {"]},{"entry":["16.","\u2003\u2003\/** Load entity definitions to the server *\/"]},{"entry":["17.","\u2003\u2003liveDataManager.defineServer(function( ) {"]},{"entry":["18.","\u2003\u2003\u2003\u2003\/** Define the schema *\/"]},{"entry":["19.","\u2003\u2003\u2003\u2003this.tables = {"]},{"entry":["20.","\u2003\u2003\u2003\u2003\u2003chatMessage: {"]},{"entry":["21.","\u2003\u2003\u2003\u2003\u2003\u2003cols:{"]},{"entry":["22.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003User:\u201dString\u201d,"]},{"entry":["23.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003Message:\u201dString\u201d"]},{"entry":["24.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["25.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["26.","\u2003\u2003\u2003\u2003};"]},{"entry":["27.","\u2003\u2003\u2003\u2003\/** Define DB Entities *\/"]},{"entry":["28.","\u2003\u2003\u2003\u2003this.entities = {"]},{"entry":["29.","\u2003\u2003\u2003\u2003\u2003\/** track each chat message *\/"]},{"entry":["30.","\u2003\u2003\u2003\u2003\u2003chatMessage:{"]},{"entry":["31.","\u2003\u2003\u2003\u2003\u2003\u2003append:function(parms){"]},{"entry":["32.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.User = user.getUsername( );"]},{"entry":["33.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return db.append(\u201cchatMessage\u201d,parms);"]},{"entry":["34.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["35.","\u2003\u2003\u2003\u2003\u2003\u2003clear:function(parms){"]},{"entry":["36.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003var keys = db.ndxSearch(\u201cchatMessage\u201d,"]},{"entry":["37.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2009\u201cUser\u201d,user.getUsername( ));"]},{"entry":["38.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003db.remove(\u201cchatMessage\u201d,keys);"]},{"entry":["39.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["40.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["41.","\u2003\u2003\u2003\u2003};"]},{"entry":["42.","\u2003\u2003\u2003\u2003\/** Define Live Objects *\/"]},{"entry":["43.","\u2003\u2003\u2003\u2003this.liveObjects = {"]},{"entry":["44.","\u2003\u2003\u2003\u2003\u2003logs:{"]},{"entry":["45.","\u2003\u2003\u2003\u2003\u2003\u2003init:function(parms){"]},{"entry":["46.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003server.monitorEvents(\u201ceventcb\u201d);"]},{"entry":["47.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003client.dispatch(\u201cmessage\u201d,{type:\u201dLog\u201d,msg:\u201dRunning ...\u201d});"]},{"entry":["48.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["49.","\u2003\u2003\u2003\u2003\u2003\u2003shutdown:function( ){ },"]},{"entry":["50.","\u2003\u2003\u2003\u2003\u2003\u2003refresh:function(time){ },"]},{"entry":["51.","\u2003\u2003\u2003\u2003\u2003\u2003eventcb:function(parms){"]},{"entry":["52.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (parms.eventID == \u201cuserLogIn\u201d ||"]},{"entry":["53.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.eventID == \u201cUserLogOut\u201d) {"]},{"entry":["54.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003client.dispatch(\u201cmessage\u201d,"]},{"entry":["55.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2002{type:parms.eventID,msg:parms.user});"]},{"entry":["56.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["57.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["58.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["59.","\u2003\u2003\u2003\u2003};"]},{"entry":["60.","\u2003\u2003}).then(function(liveDataManager) {"]},{"entry":["61.","\u2003\u2003\u2003\/** After the database is set up we can open the table or view *\/"]},{"entry":["62.","\u2003\u2003\u2003liveDataManager.getview(\u201cTable:chatMessage\u201d).then(function(tview) {"]},{"entry":["63.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for new values"]},{"entry":["64.","\u2003\u2003\u2003\u2003\u2003tview.onSetValue.add("]},{"entry":["65.","\u2003\u2003\u2003\u2003\u2003\u2003function(tview,key,row,col,colname,coltype,value) {"]},{"entry":["66.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (colname == \u201cUser\u201d) {"]},{"entry":["67.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,value,null);"]},{"entry":["68.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003} else if (colname == \u201cMessage\u201d) {"]},{"entry":["69.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,null,value);"]},{"entry":["70.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["71.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["72.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for removed rows"]},{"entry":["73.","\u2003\u2003\u2003\u2003\u2003tview.onDeleteRow.add(function(tview,key) {"]},{"entry":["74.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003$(\u201c#hist\u201d+key).remove( );"]},{"entry":["75.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["76.","\u2003\u2003\u2003\u2003\u2003\/\/ tell the view to send all data events"]},{"entry":["77.","\u2003\u2003\u2003\u2003\u2003tview.setObservable( );"]},{"entry":["78.","\u2003\u2003\u2003});"]},{"entry":["79.","\u2003\u2003});"]},{"entry":["80.","\u2003\u2003\/** User event handler for entry new messages *\/"]},{"entry":["81.","\u2003\u2003$(\u201c#msg\u201d).change(function( ) {"]},{"entry":["82.","\u2003\u2003\u2003\u2003var msg = $(\u201c#msg\u201d).val( );"]},{"entry":["83.","\u2003\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dappend\u201d,{Message:msg});"]},{"entry":["84.","\u2003\u2003\u2003\u2003$(\u201c#msg\u201d).val(\u201c\u201c);"]},{"entry":["85.","\u2003\u2003});"]},{"entry":["86.","\u2003\u2003\/** User event handler for the clear button *\/"]},{"entry":["87.","\u2003\u2003$(\u201c#clear\u201d).click(function( ) {"]},{"entry":["88.","\u2003\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dclear\u201d);"]},{"entry":["89.","\u2003\u2003});"]},{"entry":"90."},{"entry":["91.","\u2003\u2003logger = null;"]},{"entry":["92.","\u2003\u2003$(\u201c#logopen\u201d).click(function( ) {"]},{"entry":["93.","\u2003\u2003\u2003\u2003liveDataManager.liveObject(\u201clogs\u201d,{ }).then(function(liveobj){"]},{"entry":["94.","\u2003\u2003\u2003\u2003\u2003\u2003logger = liveobj;"]},{"entry":["95.","\u2003\u2003\u2003\u2003\u2003\u2003logger.message = function(parms) {"]},{"entry":["96.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003$(\u201c#event\u201d).html(parms.type+\u201d: \u201c+parms.msg);"]},{"entry":["97.","\u2003\u2003\u2003\u2003\u2003\u2003};"]},{"entry":["98.","\u2003\u2003\u2003\u2003});"]},{"entry":["99.","\u2003\u2003});"]},{"entry":["100.","\u2003\u2003$(\u201c#logclose\u201d).click(function( ) {"]},{"entry":["101.","\u2003\u2003\u2003\u2003if (logger) logger.close( );"]},{"entry":["102.","\u2003\u2003\u2003\u2003$(\u201c#event\u201d).html(\u201c\u201c);"]},{"entry":["103.","\u2003\u2003\u2003\u2003logger = null;"]},{"entry":["104.","\u2003\u2003});"]},{"entry":["105.","});"]},{"entry":"106."},{"entry":["107.","\/**"]},{"entry":["108.","* UI function for adding values to the chat history."]},{"entry":["109.","*\/"]},{"entry":["110.","function addChatMessage(key,user,msg) {"]},{"entry":["111.","\u2003if ($(\u201c#hist\u201d+key).length == 0) {"]},{"entry":["112.","\u2003\u2003$(\u201c#hist\u201d).append(\u201c<div id=\\\u201dhist\u201d+key+\u201d\\\u201d><span id=\\\u201dhistu\u201d + key +"]},{"entry":["113.","\u2003\u2003\u2003\u201c\\\u201d><\/span><span id=\\\u201dhistm\u201d+key+\u201d\\\u201d><\/span><\/div>\u201c);"]},{"entry":["114.","\u2003\u2003$(\u201c#hist\u201d).scrollTop($(\u201c#hist\u201d).height( ));"]},{"entry":["115.","\u2003}"]},{"entry":["116.","\u2003if (user) {"]},{"entry":["117.","\u2003\u2003color = (user == \u201c<%=u.getUsername( )%>\u201c)?\u201d#cc00cc\u201d:\u201d#0000cc\u201d;"]},{"entry":["118.","\u2003\u2003$(\u201c#histu\u201d+key).html(\u201c<font color=\u2018\u201c+color+\u201d\u2019>\u201c+user+\u201d:<\/font> \u201c);"]},{"entry":["119.","\u2003} else if (msg) {"]},{"entry":["120.","\u2003\u2003$(\u201c#histm\u201d+key).text(msg);"]},{"entry":["121.","\u2003}"]},{"entry":["122.","}"]},{"entry":"123."},{"entry":["124.","<\/script>"]},{"entry":["125.","<\/head>"]},{"entry":["126.","<body>"]},{"entry":["127.","Logged in as <%=u.getUsername( )%>"]},{"entry":["128.","<a href=\u201cpublic\/login.jsp?logout=true\u201d>[logout]<\/a>"]},{"entry":["129.","<h2>Simple Chat<\/h2>"]},{"entry":["130.","<div id=\u201chist\u201d style=\u201c ... \u201c><\/div>"]},{"entry":["131.","<input id=\u201cmsg\u201d type=\u201ctext\u201d style=\u201cwidth:400px\u201d \/><br\/>"]},{"entry":["132.","<button id=\u201cclear\u201d>Clear<\/button>"]},{"entry":["133.","<button id=\u201clogopen\u201d>Start<\/button>"]},{"entry":["134.","<button id=\u201clogclose\u201d>Stop<\/button>"]},{"entry":["135.","<br\/><br\/>"]},{"entry":["136.","<div id=\u201cevent\u201d><\/div>"]},{"entry":["137.","<\/body>"]},{"entry":["138.","<\/html>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}},{"@attributes":{"id":"p-0098","num":"0097"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"273pt","align":"center"}},"thead":{"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Listing 4"},{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"231pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1.","<%@","page language=\u201cjava\u201d contentType=\u201ctext\/html; charset=UTF-8\u201d"]},{"entry":["2.",{},"pageEncoding=\u201cUTF-8\u201d%>"]},{"entry":["3.","<%@","page import=\u201ccom.powerdata.proxyclient.User\u201d%>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"252pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["4.","<% User u = User.GetCurrentUser(request); %>"]},{"entry":["5.","<html><head>"]},{"entry":["6.","<meta http-equiv=\u201cContent-Type\u201d content=\u201ctext\/html; charset=UTF-8\u201d>"]},{"entry":["7.","<script src=\u2018proxyclient\/jquery-1.9.1.js\u2019><\/script>"]},{"entry":["8.","<script src=\u2018proxyclient\/pdpc.js\u2019><\/script>"]},{"entry":["9.","<script src=\u2018proxyclient\/ldm.js\u2019><\/script>"]},{"entry":["10.","<title>Simple Chat<\/title>"]},{"entry":["11.","<script>"]},{"entry":["12.","\/**"]},{"entry":["13.","* Create and configure an application instance named SChat"]},{"entry":["14.","*\/"]},{"entry":["15.","Init(\u201cSChat\u201d).then(function(liveDataManager) {"]},{"entry":["16.","\u2003\u2003\/** Load entity definitions to the server *\/"]},{"entry":["17.","\u2003\u2003liveDataManager.defineServer(function( ) {"]},{"entry":["18.","\u2003\u2003\u2003\u2003\/** Define the schema *\/"]},{"entry":["19.","\u2003\u2003\u2003\u2003this.tables = {"]},{"entry":["20.","\u2003\u2003\u2003\u2003\u2003chatMessage: {"]},{"entry":["21.","\u2003\u2003\u2003\u2003\u2003\u2003cols:{"]},{"entry":["22.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003PK_chatMessage:\u201dPK\u201d,"]},{"entry":["23.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003User:\u201dString\u201d,"]},{"entry":["24.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003Message:\u201dString\u201d,"]},{"entry":["25.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003FK_chatRoom:\u201dLong\u201d"]},{"entry":["26.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["27.","\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["28.","\u2003\u2003\u2003\u2003\u2003chatRoom: {"]},{"entry":["29.","\u2003\u2003\u2003\u2003\u2003\u2003cols:{"]},{"entry":["30.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003PK_chatRoom:\u201dPK\u201d,"]},{"entry":["31.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003Room:\u201dString\u201d"]},{"entry":["32.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["33.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["34.","\u2003\u2003\u2003\u2003};"]},{"entry":["35.","\u2003\u2003\u2003\u2003\/** Define the views *\/"]},{"entry":["36.","\u2003\u2003\u2003\u2003this.views = {"]},{"entry":["37.","\u2003\u2003\u2003\u2003\u2003chat : ["]},{"entry":["38.","\u2003\u2003\u2003\u2003\u2003\u2003{scheme:\u201dview\u201d,alias:\u201dmsg\u201d,table:\u201dchatMessage\u201d},"]},{"entry":["39.","\u2003\u2003\u2003\u2003\u2003\u2003{scheme:\u201dview\u201d,alias:\u201drm\u201d,table:\u201dchatRoom\u201d},"]},{"entry":["40.","\u2003\u2003\u2003\u2003\u2003\u2003{scheme:\u201djoin\u201d,left:\u201dmsg.FK_chatRoom\u201d,right:\u201drm.PK_chatRoom\u201d},"]},{"entry":["41.","\u2003\u2003\u2003\u2003\u2003\u2003{scheme:\u201dproj\u201d,col:\u201dUser\u201d,exp:\u201dmsg.User\u201d},"]},{"entry":["42.","\u2003\u2003\u2003\u2003\u2003\u2003{scheme:\u201dproj\u201d,col:\u201dRoom\u201d,exp:\u201drm.Room\u201d},"]},{"entry":["43.","\u2003\u2003\u2003\u2003\u2003\u2003{scheme:\u201dproj\u201d,col:\u201dMessage\u201d,exp:\u201dmsg.Message\u201d}"]},{"entry":["44.","\u2003\u2003\u2003\u2003\u2003]"]},{"entry":["45.","\u2003\u2003\u2003\u2003};"]},{"entry":["46.","\u2003\u2003\u2003\u2003\/** Define DB Entities *\/"]},{"entry":["47.","\u2003\u2003\u2003\u2003this.entities = {"]},{"entry":["48.","\u2003\u2003\u2003\u2003\u2003\/** track each chat message *\/"]},{"entry":["49.","\u2003\u2003\u2003\u2003\u2003chatMessage:{"]},{"entry":["50.","\u2003\u2003\u2003\u2003\u2003\u2003append:function(parms){"]},{"entry":["51.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.User = user.getUsername( );"]},{"entry":["52.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (!parms.Room) parms.Room = \u201cLobby\u201d;"]},{"entry":["53.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.FK_chatRoom = entities.chatRoom.upsert(parms);"]},{"entry":["54.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return db.append(\u201cchatMessage\u201d,parms);"]},{"entry":["55.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["56.","\u2003\u2003\u2003\u2003\u2003\u2003clear:function(parms){"]},{"entry":["57.","\u2003\u2003\u2003\u2003\u2003\u2002var keys = db.ndxSearch(\u201cchatMessage\u201d,\u201duser\u201d,user.getUsername( ));"]},{"entry":["58.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003db.remove(\u201cchatMessage\u201d,keys);"]},{"entry":["59.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["60.","\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["61.","\u2003\u2003\u2003\u2003\u2003\/** track chat rooms *\/"]},{"entry":["62.","\u2003\u2003\u2003\u2003\u2003chatRoom:{"]},{"entry":["63.","\u2003\u2003\u2003\u2003\u2003\u2003lookup:function(parms){"]},{"entry":["64.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003var keys = db.ndxSearch(\u201cchatRoom\u201d,\u201dRoom\u201d,parms.Room);"]},{"entry":["65.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return (keys[0])?keys[0]:0;"]},{"entry":["66.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["67.","\u2003\u2003\u2003\u2003\u2003\u2003upsert:function(parms){"]},{"entry":["68.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003var keys = db.ndxSearch(\u201cchatRoom\u201d,\u201dRoom\u201d,parms.Room);"]},{"entry":["69.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003var key = (keys[0])?keys[0]:db.append(\u201cchatRoom\u201d,parms);"]},{"entry":["70.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003console.log(key);"]},{"entry":["71.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return key;"]},{"entry":["72.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["73.","\u2003\u2003\u2003\u2003\u2003\u2003append:function(parms){"]},{"entry":["74.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003return entities.chatRoom.upsert(parms);"]},{"entry":["75.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["76.","\u2003\u2003\u2003\u2003\u2003\u2003remove:function(parms){ }"]},{"entry":["77.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["78.","\u2003\u2003\u2003\u2003};"]},{"entry":["79.","\u2003\u2003\u2003\u2003\/** Define Live Objects *\/"]},{"entry":["80.","\u2003\u2003\u2003\u2003this.liveObjects = {"]},{"entry":["81.","\u2003\u2003\u2003\u2003\u2003logs:{"]},{"entry":["82.","\u2003\u2003\u2003\u2003\u2003\u2003init:function(parms){"]},{"entry":["83.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003server.monitorEvents(\u201ceventcb\u201d);"]},{"entry":["84.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003client.dispatch(\u201cmessage\u201d,{type:\u201dLog\u201d,msg:\u201dRunning ...\u201d});"]},{"entry":["85.","\u2003\u2003\u2003\u2003\u2003\u2003},"]},{"entry":["86.","\u2003\u2003\u2003\u2003\u2003\u2003shutdown:function( ){ },"]},{"entry":["87.","\u2003\u2003\u2003\u2003\u2003\u2003refresh:function(time){ },"]},{"entry":["88.","\u2003\u2003\u2003\u2003\u2003\u2003eventcb:function(parms){"]},{"entry":["89.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (parms.eventID == \u201cUserLogIn\u201d ||"]},{"entry":["90.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003parms.eventID == \u201cUserLogOut\u201d) {"]},{"entry":["91.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003client.dispatch(\u201cmessage\u201d,"]},{"entry":["92.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2002{type:parms.eventID,msg:parms.user});"]},{"entry":["93.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["94.","\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["95.","\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["96.","\u2003\u2003\u2003\u2003};"]},{"entry":["97.","\u2003\u2003}).then(function(liveDatamanager) {"]},{"entry":["98.","\u2003\u2003\u2003\/** After the database is set up we can open the table or view *\/"]},{"entry":["99.","\u2003\u2003\u2003liveDataManager.getview(\u201cchat\u201d).then(function(tview) {"]},{"entry":["100.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for new values"]},{"entry":["101.","\u2003\u2003\u2003\u2003\u2003tview.onSetvalue.add("]},{"entry":["102.","\u2003\u2003\u2003\u2003\u2003\u2003function(tview,key,row,col,colname,coltype,value) {"]},{"entry":["103.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (colname == \u201cUser\u201d) {"]},{"entry":["104.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,value,null);"]},{"entry":["105.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003} else if (colname == \u201cMessage\u201d) {"]},{"entry":["106.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003addChatMessage(key,null,value);"]},{"entry":["107.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["108.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["109.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for removed rows"]},{"entry":["110.","\u2003\u2003\u2003\u2003\u2003tview.onDeleteRow.add(function(tview,key) {"]},{"entry":["111.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003$(\u201c#hist\u201d+key).remove( );"]},{"entry":["112.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["113.","\u2003\u2003\u2003\u2003\u2003\/\/ tell the view to send all data events"]},{"entry":["114.","\u2003\u2003\u2003\u2003\u2003tview.setObservable( );"]},{"entry":["115.","\u2003\u2003\u2003});"]},{"entry":["116.","\u2003\u2003\u2003\/** Get the chat rooms *\/"]},{"entry":["117.","\u2003\u2003\u2003liveDataManager.getview(\u201cTable:chatRoom\u201d).then(function(tview) {"]},{"entry":["118.","\u2003\u2003\u2003\u2003\u2003\/\/ handler for new values"]},{"entry":["119.","\u2003\u2003\u2003\u2003\u2003tview.onSetvalue.add("]},{"entry":["120.","\u2003\u2003\u2003\u2003\u2003\u2003function(tview,key,row,col,colname,coltype,value) {"]},{"entry":["121.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003if (colname == \u201cRoom\u201d) {"]},{"entry":["122.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003$(\u201c#rooms\u201d).append(\u201c<div id=\u2018room\u201d + key +"]},{"entry":["123.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u201c\u2019 onclick=\u2018setRoom(\u201c+key+\u201d)\u2019>\u201c+value+\u201d<\/div>\u201d);"]},{"entry":["124.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003}"]},{"entry":["125.","\u2003\u2003\u2003\u2003\u2003});"]},{"entry":["126.","\u2003\u2003\u2003\u2003\u2003\/\/ tell the view to send all data events"]},{"entry":["127.","\u2003\u2003\u2003\u2003\u2003tview.setObservable( );"]},{"entry":["128.","\u2003\u2003\u2003});"]},{"entry":["129.","\u2003\u2003});"]},{"entry":["130.","\u2003\u2003\/** User event handler for entery new messages *\/"]},{"entry":["131.","\u2003\u2003$(\u201c#msg\u201d).change(function( ) {"]},{"entry":["132.","\u2003\u2003\u2003\u2003var msg = $(\u201c#msg\u201d).val( );"]},{"entry":["133.","\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dappend\u201d,{Message:msg});"]},{"entry":["134.","\u2003\u2003\u2003\u2003$(\u201c#msg\u201d).val(\u201c\u201c);"]},{"entry":["135.","\u2003\u2003});"]},{"entry":["136.","\u2003\u2003\/** User event to add a new chat room *\/"]},{"entry":["137.","\u2003\u2003$(\u201c#room\u201d).change(function( ) {"]},{"entry":["138.","\u2003\u2003\u2003\u2003var rm = $(\u201c#room\u201d).val( );"]},{"entry":["139.","\u2003\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatRoom\u201d,\u201dupsert\u201d,{Room:rm});"]},{"entry":["140.","\u2003\u2003\u2003\u2003$(\u201c#room\u201d).val(\u201c\u201c);"]},{"entry":["141.","\u2003\u2003});"]},{"entry":["142.","\u2003\u2003\/** User event handler for the clear button *\/"]},{"entry":["143.","\u2003\u2003$(\u201c#clear\u201d).click(function( ) {"]},{"entry":["144.","\u2003\u2003\u2003\u2003liveDataManager.callHandler(\u201cchatMessage\u201d,\u201dclear\u201d);"]},{"entry":["145.","\u2003\u2003});"]},{"entry":"146."},{"entry":["147.","\u2003\u2003logger = null;"]},{"entry":["148.","\u2003\u2003$(\u201c#logopen\u201d).click(function( ) {"]},{"entry":["149.","\u2003\u2003\u2003\u2003liveDataManager.liveObject(\u201clogs\u201d,{ }).then(function(liveobj){"]},{"entry":["150.","\u2003\u2003\u2003\u2003\u2003\u2003logger = liveobj;"]},{"entry":["151.","\u2003\u2003\u2003\u2003\u2003\u2003logger.message = function(parms) {"]},{"entry":["152.","\u2003\u2003\u2003\u2003\u2003\u2003\u2003$(\u201c#event\u201d).html(parms.type+\u201d: \u201c+parms.msg);"]},{"entry":["153.","\u2003\u2003\u2003\u2003\u2003\u2003};"]},{"entry":["154.","\u2003\u2003\u2003\u2003});"]},{"entry":["155.","\u2003\u2003});"]},{"entry":["156.","\u2003\u2003$(\u201c#logclose\u201d).click(function( ) {"]},{"entry":["157.","\u2003\u2003\u2003\u2003if (logger) logger.close( );"]},{"entry":["158.","\u2003\u2003\u2003\u2003$(\u201c#event\u201d).html(\u201c\u201c);"]},{"entry":["159.","\u2003\u2003\u2003\u2003logger = null;"]},{"entry":["160.","\u2003\u2003});"]},{"entry":["161.","});"]},{"entry":"162."},{"entry":["163.","\/**"]},{"entry":["164.","* UI function for adding values to the chat history."]},{"entry":["165.","*\/"]},{"entry":["166.","function addChatMessage(key,user,msg) {"]},{"entry":["167.","\u2003if ($(\u201c#hist\u201d+key).length == 0) {"]},{"entry":["168.","\u2003\u2003$(\u201c#hist\u201d).append(\u201c<div id=\\\u201dhist\u201d+key+\u201d\\\u201d><span id=\\\u201dhistu\u201d + key +"]},{"entry":["169.","\u2003\u2003\u2003\u201c\\\u201d><\/span><span id=\\\u201dhistm\u201d+key+\u201d\\\u201d><\/span><\/div>\u201c);"]},{"entry":["170.","\u2003\u2003$(\u201c#hist\u201d).scrollTop($(\u201c#hist\u201d).height( ));"]},{"entry":["171.","\u2003}"]},{"entry":["172.","\u2003if (user) {"]},{"entry":["173.","\u2003\u2003color = (user == \u201c<%=u.getUsername( )%>\u201d)?\u201d#cc00cc\u201d:\u201d#0000cc\u201d;"]},{"entry":["174.","\u2003\u2003$(\u201c#histu\u201d+key).html(\u201c<font color=\u2018\u201c+color+\u201d\u2019>\u201c+user+\u201d:<\/font> \u201c);"]},{"entry":["175.","\u2003} else if (msg) {"]},{"entry":["176.","\u2003\u2003$(\u201c#histm\u201d+key).text(msg);"]},{"entry":["177.","\u2003}"]},{"entry":["178.","}"]},{"entry":"179."},{"entry":["180.","<\/script>"]},{"entry":["181.","<\/head>"]},{"entry":["182.","<body>"]},{"entry":["183.","Logged in as <%=u.getusername( )%>"]},{"entry":["184.","<a href=\u201cpublic\/login.jsp?logout=true\u201d>[logout]<\/a>"]},{"entry":["185.","<h2>Simple Chat<\/h2>"]},{"entry":["186.","<table>"]},{"entry":["187.","<tr>"]},{"entry":["188.","<td><div id=\u201chist\u201d style=\u201c ... \u201d><\/div><\/td>"]},{"entry":["189.","<td><div id=\u201crooms\u201d style=\u201c ...\u201d><\/div><\/td>"]},{"entry":["190.","<\/tr>"]},{"entry":["191.","<tr>"]},{"entry":["192.","<td><input id=\u201cmsg\u201d type=\u201ctext\u201d style=\u201cwidth:400px\u201d \/><\/td>"]},{"entry":["193.","<td><input id=\u201croom\u201d type=\u201ctext\u201d style=\u201cwidth:200px\u201d \/><\/td>"]},{"entry":["194.","<\/tr>"]},{"entry":["195.","<\/table>"]},{"entry":["196.","<br\/>"]},{"entry":["197.","<button id=\u201cclear\u201d>Clear<\/button>"]},{"entry":["198.","<button id=\u201clogopen\u201d>Start<\/button>"]},{"entry":["199.","<button id=\u201clogclose\u201d>Stop<\/button>"]},{"entry":["200.","<br\/><br\/>"]},{"entry":["201.","<div id=\u201cevent\u201d><\/div>"]},{"entry":["202.","<\/body>"]},{"entry":["203.","<\/html>"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}]}}}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0003","num":"0002"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0004","num":"0003"},"figref":"FIG. 1B"},{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIGS. 2A-2D"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIGS. 3A-3K"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
