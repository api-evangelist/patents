---
title: Method and apparatus for processing a physical channel with partial transport format information
abstract: Techniques for recovering data transmitted on a physical channel in which the channelization code is not known at the time of the data recovery. A modulated signal is received an processed to provide received samples. A hypothesized channelization code (e.g., an OVSF code in the W-CDMA system) is selected and used to process the received samples to generate partially processed symbols. The hypothesized channelization code is a “base” code that can be used to generate all possible channelization codes that may have been used for the physical channel. Intermediate results representative of the partially processed symbols are stored and, upon determination of the actual channelization code, further processed in accordance with the actual and hypothesized channelization codes to provide the final results.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=06879576&OS=06879576&RS=06879576
owner: Qualcomm Incorporated
number: 06879576
owner_city: San Diego
owner_country: US
publication_date: 20000906
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE SPECIFIC EMBODIMENTS"],"p":["I. Field of the Invention","The present invention relates to data communication. More particularly, the present invention relates to a novel and improved method and apparatus for processing a physical channel with partial transport format information.","II. Description of the Related Art","A modern day communications system is required to support a variety of applications. One such communications system is a code division multiple access (CDMA) system that supports voice and data communication between users over a terrestrial link. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4,901,307, entitled \u201cSPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS,\u201d and U.S. Pat. No. 5,103,459, entitled \u201cSYSTEM AND METHOD FOR GENERATING WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM,\u201d both assigned to the assignee of the present invention and incorporated herein by reference.","A CDMA system is typically designed to conform to one or more standards. One such first generation standard is the \u201cTIA\/EIA\/IS-95 Remote Station-Base Station Compatibility Standard for Dual-Mode Wideband Spread Spectrum Cellular System,\u201d hereinafter referred to as the IS-95 standard and incorporated herein by reference. IS-95 compliant CDMA systems are able to transmit voice data and packet data. A newer generation standard is offered by a consortium named \u201c3Generation Partnership Project\u201d (3GPP) and embodied in a set of documents including Document Nos. 3G TS 25.211, 3G TS 25.212, 3G TS 25.213, and 3G TS 25.214, which are readily available to the public. The 3GPP standard is hereinafter referred to as the W-CDMA standard and incorporated herein by reference.","The W-CDMA standard defines a channel structure capable of supporting a number of users and designed for efficient transmission of packet data. In accordance with the W-CDMA standard, a user is typically assigned a \u201cdedicated\u201d channel on the downlink (i.e., from the base station to the user) and the uplink (i.e., from the user to the base station) for the duration of the call. The dedicated channel can be used for voice communication or transmission of small amounts of packet data, and thus has a (relatively) low bit rate. When the base station has a large amount of data to transmit, a \u201cshared\u201d channel may be assigned and used for the data transmission. The shared channel is allocated and de-allocated to users as needed.","The shared channel has a structure that supports a variety of uses and a bit rate that can be varied between a range of values (e.g., from 15 kbps up to 1.92 Mbps). The shared channel bit rate can also be dynamically changed from radio frame to radio frame, with each radio frame being a unit of transmission covering 15 time slots and each time slot corresponding to 0.667 msec.","In accordance with the W-CDMA standard, certain information necessary to properly recover the data transmitted on the shared channel is provided on the dedicated channel assigned to the user. For example, in certain instances, the bit rate of the radio frame and the channelization code (akin to the Walsh code in the IS-95 CDMA system) used to channelize the shared channel a re provided on the dedicated channel at approximately the same time as the data transmission on the shared channel. Consequently, the receiver unit is not able to process and recover the data on the shared channel in real-time.","Thus, techniques that can be used to efficiently process a physical channel, such as the shared channel in the W-CDMA system, when some characteristics of the physical channel are not known are highly desirable.","The present invention provides techniques to process a physical channel in which at least some of the information needed to fully process the physical channel is not available at the time of processing. In accordance with the invention, for a parameter that is unknown (e.g., a channelization code), a determination is made as to the possible values for that parameter. A hypothesized parameter value is then selected and used to process the physical channel to provide intermediate results, which require less storage than the unprocessed samples. The hypothesized parameter value is selected such that the intermediate results can further be processed, when the actual parameter value is known, to obtain the final results.","Certain aspects of the invention are especially suited for processing a received signal that has been processed and transmitted in accordance with a space time block coding transmit antenna diversity (STTD) mode defined by the W-CDMA standard. For some data transmissions in the W-CDMA system, the actual channelization code may not be known at the time of the data recovery at the receiver unit. For these data transmissions, a hypothesized channelization code can be used to partially process the received samples, to reduce the amount of data to be stored before the actual channelization code can be determined. The hypothesized channelization code is a fraction of, and can be used to generate the actual channelization code.","An aspect of the invention provides a method for recovering data transmitted on a physical channel in which a channelization code used for the physical channel is not known at the time of the data recovery. In accordance with the method, a modulated signal is received and processed to provide samples. A hypothesized channelization code is then selected and used to process the samples to generate partially processed symbols. Intermediate results representative of the partially processed symbols are stored and, upon determination of an actual channelization code used for the physical channel, further processed in accordance with the actual and hypothesized channelization codes to provide the final results.","The hypothesized channelization code is a \u201cbase\u201d code that can be used to generate all possible channelization codes that may have been used to process the physical channel. The hypothesized channelization code has a length that is shorter or equal to that of the actual channelization code. For a W-CDMA system, the hypothesized channelization code can be an orthogonal variable spreading factor (OVSF) code and can have a spreading factor of four or greater (e.g., four to 512). However, it is advantageous to use a hypothesized OVSF code having the largest possible spreading factor among the OVSF codes that can be used to generate all possible actual OVSF codes.","Various aspects, embodiments, and features of the invention are described in further detail below.",{"@attributes":{"id":"P-00027","num":"00027"},"figref":"FIG. 1","b":["100","100","102","102","102","104","106","106","104","100"],"i":["a ","g"]},"As shown in , base station transmits data to remote stations and on the downlink, base station transmits data to remote stations and , base station transmits data to remote station , and so on. In , the solid line with the arrow indicates a transmission from the base station to the remote station. A broken line with the arrow indicates that the remote station is receiving the pilot signal, but no user-specific data transmission, from the base station. The uplink communication is not shown in  for simplicity.","In certain transmission modes in the W-CDMA standard, a remote station can receive multiple transmissions from multiple antennas of a single base station for certain physical channel types including the (physical) downlink shared channel (DSCH). As shown in , remote station receives multiple transmissions from base station , remote station receives multiple transmissions from base station , and remote station receives multiple transmissions from base station ",{"@attributes":{"id":"P-00030","num":"00030"},"figref":"FIG. 2","b":["212","214","214","214","214"]},"The interleaved packet is provided to a modulator (MOD)  and may be scrambled with a scrambling sequence (for an IS-95 CDMA system), covered with a channelization code, and spread with spreading codes (e.g., short PNI and PNQ codes). The spreading with the spreading codes is referred to as \u201cscrambling\u201d by the W-CDMA standard. The channelization code can be an orthogonal variable spreading factor (OVSF) code (for a W-CDMA system), a Walsh code (for an IS-95 CDMA system), or some other orthogonal code, again depending on the particular CDMA system or standard being implemented. The spread data is then provided to a transmitter (TMTR)  and quadrature modulated, filtered, and amplified to generate one or more downlink signals. The downlink signal(s) are transmitted over the air from one or more antennas . The downlink processing is described in further detail in the IS-95 and W-CDMA standards.","At the receiver unit, the downlink signal(s) are received by an antenna  and routed to a receiver (RCVR) . Receiver  filters, amplifies, quadrature demodulates, and samples and quantizes the received signal. The digitized samples are then provided to a demodulator (DEMOD)  and despreaded (or descrambled) with despreading codes, may be descrambled with a descrambling code (for the IS-95 CDMA system), and decovered with a channelization code for each physical channel being processed. The despreading, descrambling, and channelization codes correspond to the codes used at the transmitter unit. The demodulated data is then provided to a decoder  that performs the inverse of the functions performed at encoder  (e.g., the de-interleaving, decoding, and CRC check functions). The decoded data is provided to a data sink .","A controller  can direct the operation of demodulator  and decoder . A memory unit  couples to demodulator  (and possibly also to controller , as indicated by the dashed line) and, in certain modes of operation, can be used to store intermediate results, or data, from demodulator .","The block diagram, as described above, supports transmissions of packet data, messaging, voice, video, and other types of communication on the downlink. A bi-directional communications system also supports uplink transmission from the remote station to the base station. However, the uplink processing is not shown in  for simplicity.",{"@attributes":{"id":"P-00035","num":"00035"},"figref":["FIG. 3A","FIG. 3A"],"b":["300","302","304","310","310","320"]},"Covering is used to channelize data such that the data on multiple physical channels can be optimally transmitted and received without interfering with each other. Each physical channel is assigned a particular channelization code selected from a set of channelization codes. The codes in the set are typically designed to be orthogonal with each other such that a particular code multiplied with itself and integrated over the length of the code will result in a high (energy) value, but if multiplied with other codes in the set and integrated over the code length will result in a low (or ideally, zero) value. Non-orthogonal channelization codes can also be used for the covering.","To perform covering, the channel bits to be transmitted are multiplied with the assigned channelization code. At the receiver, the transmitted bits are recovered by multiplying the received samples with the same code used to cover the bit and integrating over the length of the code. Only the bit that had been covered with the code used for decovering will result in a high value, and the bits from other physical channels that had been covered with other codes will integrate to a value close to zero.","Within channelizer , the STTD encoded data is provided to an I\/Q demultiplexer (DEMUX)  that demultiplexes the data into inphase (I) and quadrature (Q) data. The I data and Q data are provided to respective multipliers and and covered (i.e., multiplied) with the channelization code, Cd, assigned to the physical channel. Multipliers and perform covering using the channelization code in similar manner as the covering performed with Walsh code in the IS-95 CDMA system.","For an IS-95 CDMA system, Walsh codes having a fixed length of 64 chips are used to cover the traffic channels, with each physical channel having a variable but limited data rate (e.g., \u226632 kbps). W-CDMA uses orthogonal codes called OVSF codes that are identical to Walsh codes except that the index identifying the code is bit-reversed (e.g., for a length 64 code, Walsh code (64,5) (5=b000101) would be OVSF code (64,40) (40=b101000)). W-CDMA uses OVSF codes with length that varies from 4 to 512 chips and is dependent on the data rate of the physical channel. OVSF codes are described in further detail below.","The covered Q data from multiplexer is provided to a multiplexer  and multiplied with the complex symbol, j, to generate the imaginary part of the channelized data. The real part from multiplexer and the imaginary part from multiplexer  are combined by an adder  to provide the complex channelized data. The channelized data for each antenna is then scrambled with a complex scrambling code, PN, by a multiplier and scaled with a weight factor, G, by a multiplier . The weight factor, G, is selected for the physical channel being processed and is used to adjust the transmit power of the physical channel.","The scrambled and weighted data from multiplier , the scrambled and weighted data for other physical channels, and other data for some others physical channels (e.g., the common control physical channel) are combined by an adder  to generate composite data. The composite data for each antenna is further multiplied with a complex weight factor, W, by a multiplier . As specified in the W-CDMA standard, the weight factor is used for phase adjustment in closed loop mode  and for phase\/amplitude adjustment in closed loop mode .","The adjusted data from each multiplier  is then provided to a respective transmitter  that converts the data into an RF modulated signal, which is then transmitted from a respective antenna .",{"@attributes":{"id":"P-00043","num":"00043"},"figref":"FIG. 3B","b":["302","300","352","354","354","356","356","358","304"],"i":["a ","b","a ","b "],"sub":["c","c"]},{"@attributes":{"id":"P-00044","num":"00044"},"figref":"FIG. 4","b":"310","sub":["0","1","2","3","4","5","6","7"]},"STTD encoder  receives the input bit sequence and generates a number of output bit sequences, one output bit sequence for each antenna used to transmit the channel data (two output bit sequences are generated in the example shown in FIG. A). In accordance with the W-CDMA standard, the first output bit sequence for antenna  is a replica of the input bit sequence, and the second output bit sequence for antenna  contain the same bits, but the order of the bits is rearranged in time and some of the bits are inverted.","The STTD encoding to generate the second output bit sequence is performed by first partitioning the input bit sequence into blocks of four bits. The bit in the third bit position of each block (e.g., b) is swapped with the bit in the first bit position (e.g., b), and the bit in the fourth bit position (e.g., b) is swapped with the bit in the second bit position (e.g., b). The bits in the first and fourth bit positions in the block (e.g., band b) are also inverted in the second output bit sequence.",{"@attributes":{"id":"P-00047","num":"00047"},"figref":"FIG. 4B","b":["310","310","1","1"],"sub":["0","1","2","3","4","5","6","7","0","2","4","6","1","3","5","7","0","1","2","3","0","0","1","1","2","3"]},"Similarly, for antenna , the transmitter input bit sequence {\u2212b, b, b, b, \u2212b, b, b, \u2212b, . . . } is demultiplexed into the I sequence {\u2212b, b, \u2212b, b, . . . } and the Q sequence {b, \u2212b, b, \u2212b, . . . }. The I and Q sequences for antenna  can be viewed as a complex symbol sequence {\u2212S, S, \u2212S, S, . . . }, where \u2212S=\u2212b+jb, S=b\u2212jb, and so on. Srepresents the complex conjugate of S.","Transmission of the channel data over two or more antennas provides spatial diversity, which can improve performance against deleterious path effects. Rearranging the order of the bits in at least one of the transmissions provides temporal diversity, which can improve performance against impulse noise and interference. The bit inversion is used to allow the receiver unit to separate out the streams from the two antennas and consequently take advantage of the path diversity.","In accordance with the W-CDMA standard, the downlink shared channel (DSCH) can be used to transmit data at a variable bit rate ranging from 15 Kbps up to 1.92 Mbps. For the W-CDMA standard, the bit rate refers to the rate of the bits provided to modulator , i.e., after encoding, interleaving, and rate matching but before covering, spreading, and so on. The OVSF codes used to cover (and channelize) the data has a fixed chip rate (i.e., 3.84 Mcps for W-CDMA) but a variable length ranging from four chips to 512 chips. The length of the OVSF code is also referred to as the spreading factor, SF. Table 1 lists the bit rates (in Kbps) supported by W-CDMA and the corresponding OVSF code lengths (in chips).",{"@attributes":{"id":"P-d0e2219","num":"00002"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE 1"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Channel Bit Rate","OVSF Code Length"]},{"entry":[{},"(Kbps)","(chips)"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"56pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"15","512"]},{"entry":[{},"30","256"]},{"entry":[{},"60","128"]},{"entry":[{},"120","64"]},{"entry":[{},"240","32"]},{"entry":[{},"480","16"]},{"entry":[{},"960","8"]},{"entry":[{},"1920","4"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}]}},"br":{}},{"@attributes":{"id":"P-00052","num":"00052"},"figref":"FIG. 5","sub":["SF,i","2x","x","2x,2i","x,i","x,i","2x,2","x,1","x,2"],"i":"i"},"As shown in , only one OVSF code is defined for a code length of one (i.e., C=1). Two OVSF codes are defined for a code length of two (i.e., C=1.1 and C=1,\u22121), and are generated from the OVSF code of length 1 (i.e., C). Similarly, four OVSF codes are defined for a code length of four, with the OVSF codes (C=1,1,1,1) and (C=1,\u22121,1,\u22121) being generated from the OVSF code (C=1,1) and the OVSF codes (C=1,\u22121,1,\u22121) and (C=1,\u22121,\u22121,1) being generated from the OVSF code (C=1,\u22121).","In accordance with the W-CDMA standard, each user in communication with the base station is typically assigned a dedicated channel (DCH) on the downlink and may be assigned\/allocated a downlink shared channel (DSCH) as needed for packet data transmission. The parameters for the dedicated channel are either negotiated or may be known to the receiver unit at the time communication is established. For example, for the dedicated channel, the channelization code is known but other parameters such as rate matching parameters may or may not be known. If the parameters are not known at the time communication is established, a transport format combination indication (TFCI) is used t indicate the unknown transport format.","However, in part because of the dynamic nature of the downlink shared channel, its channelization code is typically not known a priori but provided instead on the dedicated channel. The transport format includes various parameters associated with the downlink shared channel such as, for example, the particular OVSF code assigned to the channel, the bit rate, and so on. The transport format of the downlink shared channel and the transport formats of other physical channels are combined into a transport format combination (TFC) and encoded into a TFCI that is transmitted to the receiver unit on the dedicated channel. The TFCI and its coding and transmission are described in detail in the W-CDMA standard.","Upon detection of the TFCI in the dedicated channel, the receiver unit is able to determine the transport formats for the individual physical channels, including that of the downlink shared channel. The receiver unit is then able to demodulate and decode the downlink shared channel.","In some instances, the TFCI is transmitted on the dedicated channel approximately concurrently with the data transmission on the downlink shared channel. Furthermore, because of the processing delay to demodulate and decode the dedicated channel, the TFCI may not be known until a short time after reception of the data transmission on the shared channel. The transport format information necessary to demodulate and decode the shared channel may therefore not be available in real-time. The invention provides techniques to efficiently process the data transmission when the actual OVSF code is not known.",{"@attributes":{"id":"P-00058","num":"00058"},"figref":"FIG. 6","b":"612"},"For each finger element, the samples are despread with a PN sequence at a time offset corresponding to the multipath being processed, at step . A hypothesized OVSF code is then identified for use in decovering the despread samples, at step . The hypothesized OVSF code is a code that can be used to generate the actual OVSF code used to cover the data at the base station, and is described in further detail below. If the received signal is from more than one base station and different actual OVSF codes are used at the transmitting base stations, then different hypothesized OVSF codes may be used for different finger elements.","For each finger element, the despread samples are then decover with the hypothesized OVSF code, and may further be coherently demodulated with pilot estimates, if available, to generate partially processed symbols, at step . The partially processed symbols represent a portion of the actual symbol or the entire actual symbol, depending on the relationship between the hypothesized and actual OVSF codes, as described in further detail below. The partially processed symbols from all assigned finger elements are then appropriately weighted and combined to generate combined symbols, or intermediate results, at step . The intermediate results may be stored to a buffer until the actual OVSF code is known.","At step , the actual OVSF code is determined. The intermediate results may then be retrieved from the buffer and further processed. Specifically, the intermediate results for each symbol period (i.e., each actual OVSF code length) are scaled and combined to generate the final result for that symbol period, at step . The scaling is dependent on the relationship between the hypothesized and actual OVSF codes, as described below. The final result represents an estimate of the transmitted symbol. For STTD decoding in the W-CDMA system, the final results from multiple symbol periods are scaled and combined, in a complementary manner to the STTD encoding performed at the base station, to generate recovered symbols, at step . The processing shown in  is described in further detail below.",{"@attributes":{"id":"P-00062","num":"00062"},"figref":["FIG. 7","FIG. 7"],"b":["700","710","712","712","720"]},"In typical implementations, the received signal is sampled at a sample rate, f, that is higher than the chip rate, f, of the received signal. For example, the chip rate may be f=1.2288 Mcps for the IS-95 CDMA system (or 3.84 Mcps for the W-CDMA system) but the sample rate may be, for example, 8 times (i.e., 8\u00d7chip), 16 times (i.e., 16\u00d7chip), 32 times (i.e., 32\u00d7chip), or other multiple of the chip rate. The higher sample rate allows for fine adjustment of the timing to \u201czoom in\u201d on a path position.","As shown in , rake receiver  includes a searcher element  and a number of finger elements through . Each of these elements receives the samples from receiver  and performs the tasks associated with the element or as directed by a controller . For example, searcher element  may be instructed by controller , or assigned to search for strong instances of the received signal. The strong signals may be present at different time offsets, and can be identified by searcher element  by processing the samples with different parameters (e.g., different PN codes, different time offsets, and so on). Searcher  may be designed to provide data corresponding to the searched signal or an indication of the search result to controller . Controller  assigns finger elements  to demodulate the strongest instances of the received signal, as determined with the assistance of searcher element .","Each assigned finger element  performs demodulation of one physical channel for one instance of the received signal (i.e., a signal at a particular assigned time offset), as directed by controller . When the channelization code is known, each assigned finger element  provides recovered symbols (e.g., S) corresponding to the assigned instance of the received signal. The recovered symbols from all assigned finger elements  are then provided to a combiner  and combined to provide composite symbols that are more indicative of the transmitted data. The combined symbols represent the recovered channel data, and are provided to the subsequent processing block (e.g., the decoder).","In accordance with the invention, in instances where the channelization code is not known, each assigned finger element  provides partially processed symbols corresponding to the assigned instance of the received signal (i.e., the assigned signal path). Each partially processed symbol can represent one recovered symbol or a fraction of one recovered symbol, depending on a hypothesized channelization code used to process the received samples and the actual channelization code. The partially processed symbols from various assigned finger elements  may also be combined to provide combined symbols more indicative of the transmitted data. The combined symbols from the combiner represent \u201cintermediate results\u201d that can be provided to, and stored by, a memory . The intermediate results are later retrieved and may further be processed, when the actual channelization code is known, to provide the recovered symbols representative of the recovered channel data. Processing with the hypothesized channelization code and post-processing of the intermediate data are described in further detail below.","The design and operation of a rake receiver for an CDMA system is described in further detail in U.S. Pat. No. 5,764,687, entitled \u201cMOBILE DEMODULATOR ARCHITECTURE FOR A SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM,\u201d and U.S. Pat. No. 5,490,165, entitled \u201cDEMODULATION ELEMENT ASSIGNMENT IN A SYSTEM CAPABLE OF RECEIVING MULTIPLE SIGNALS,\u201d both assigned to the assignee of the present invention and incorporated herein by reference.","Although not shown in  for simplicity, each finger element can also include a lock detector that computes a quality indicator (e.g., an average energy) of the recovered data at the finger element and masks the partially processed symbols from the finger element if the quality indicator does not exceed a minimum threshold. The masking ensures that only finger elements receiving signal of sufficient strength and reliability will contribute to the combined output, thus enhancing the quality of the recovered data.",{"@attributes":{"id":"P-00069","num":"00069"},"figref":"FIG. 8","b":["800","730","7","712","812","814","814"],"i":["a ","c. "]},"The descrambled samples include data for all physical channels in the received signal, including pilot data, control data, and data transmitted on the dedicated and shared channels. Separation of these various types of data is achieved at the transmitter unit by (1) channelizing each channel data with an OVSF code assigned for the particular channel, (2) time multiplexing the data, or (3) a combination of both.","In accordance with the W-CDMA standard, for closed loop mode , orthogonal pilots are used for the two transmit antennas. The orthogonal pilots for the two antennas are generated by using different symbol patterns, Wand W. Thus, at the receiver unit, the pilots are recovered by multipliers and using the same symbol patterns, W, and W. The pilot samples from multipliers and are then provided to respective accumulators and and accumulated over the length of the symbol patterns to obtain values indicative of the instantaneous phase and amplitude of the pilots. The instantaneous pilot values from accumulators and are then provided to respective pilot processors and ","The received pilot data is filtered and processed (e.g., interpolated or extrapolated, depending on the type of signal processing employed) to generate pilot estimates, {overscore (P)}and {overscore (P)}, used to demodulate the data. The despread pilot samples may also be provided to a pilot detector (DET)  that provides an indication of the quality of the received pilots. In a specific implementation, pilot detector  measures the power of the received pilots and provides a pilot quality estimate, {overscore (P)}.","In similar manner, the descrambled samples from multiplier  are provided to a multiplier and decovered with either the actual OVSF code, C, (if it is known) or a hypothesized OVSF code, C, (if the actual OVSF code is not known) to recover the data on the physical channel. The samples from multiplier are then provided to an accumulator and accumulated over the length of the OVSF code, Cor C, used to decover the samples. If the actual OVSF code, C, for the physical channel being processed is known, accumulator accumulates the samples over the length of the code to generate a received symbol. For example, referring back to Table 1, if the bit rate of the physical channel is 1.92 Mbps, accumulator accumulates the samples over a four-chip period to provide a received symbol. On the other extreme, if the bit rate of the physical channel is 7.5 kbps, accumulator accumulates the samples over a 512-chip period to provide a received symbol. The decovered symbols from accumulator may be delayed by a delay element  to match the delay of pilot processors .","In accordance with the invention, when the actual OVSF code is not known, the decovering is performed using the hypothesized OVSF code, C, having a spreading factor that may be less than that of the actual OVSF code. The accumulation by accumulator is then performed for a time period corresponding to the length of the hypothesized OVSF code. Thus, each decovered symbols from accumulator may be only a portion of an actual received symbol.","The pilot estimates, {overscore (P)}and {overscore (P)}, from pilot processors and and the decovered symbols from delay element  are provided to a data recovery element  that performs the necessary computations to generate the partially processed symbols for the finger element. In particular, data recovery element  may perform a dot product and a cross product between the pilot estimates and the decovered symbols to generate the partially processed symbols. The dot and cross products refer to the operations XP+XPand XP\u2212XP, respectively, where the I and Q components of the decovered data symbol are respectively X, and X, and the I and Q components of the estimated pilot are respectively Pand P. The data recovery process may further involve rotation and\/or scaling of either or both of the decovered data symbol and estimated pilot, as is known to those skilled in the art.","In , multipliers and , accumulators and , and pilot processors and may be referred to as the pilot processing unit of the finger element. For a mode in which pilot data is transmitted from only one antenna, only one of the pilot processing paths is needed and the other pilot processing path can be disabled. Multiplier , accumulator , and delay element  may be referred to as the data processing unit of the finger element.","The physical channel being processed may be transmitted from one antenna or two antennas (e.g., for the STTD mode in the W-CDMA system). Moreover, the physical channel may be modulated using either BPSK modulation (e.g., for an IS-95 CDMA system) or QPSK modulation (e.g., for a W-CDMA system).","In the STTD mode of the W-CDMA system, two RF modulated signals are transmitted from two transmit antennas for one physical channel. Each of the RF modulated signals can experience independent and different path loss. The received signal is thus a weighted sum of the two RF modulated signals, and can be expressed as:\n\n, \n\nwhere X is the received symbol sequence {X, X, X, X, . . . }, Sis the symbol sequence {S, S, S, S, . . . } transmitted from the first transmit antenna, Sis the symbol sequence {\u2212S, S, \u2212S, S, . . . } transmitted from the second transmit antenna, and \u03b1 and \u03b2 are the fading coefficients for the two paths. The received symbols can be expressed as:\n\n\u2003\u2003, Eq (1) \n\n\u2003\u2003, Eq (2) \n\n\u2003\u2003, Eq (3) \n\n\u2003\u2003, Eq (4) \n\nEquations 1 through 4 assume that the signals transmitted from antennas  and  are received at the finger element at approximately equal time, which is generally true in many instances. If the two paths are not received at the same time, then there may be some small degradation in performance, but the equations give above are still valid and the processing described herein can still be applied.\n","Because of time multiplexing of the symbols transmitted on the second transmit antenna, the received symbol sequence {X, X, X, X, . . . } are further processed to recover the transmitted symbol sequence {S, S, S, S, . . . }. To determine an estimate of the transmitted symbol S, equations 1 and 2 may be scaled and combined as follows: \n\n\nwhere {overscore (S)}is the recovered symbol, {overscore (\u03b1)} and {overscore (\u03b2)} are complex-valued estimates of the path losses (i.e., channel or fading coefficient) from the first and second transmit antennas, respectively, to the receive antenna. The noise term is due to imperfect channel estimation. Since the pilots are also transmitted from both transmit antennas, and the pilot data value is known, the pilot estimates described above can be used as the channel estimates, {overscore (\u03b1)} and {overscore (\u03b2)}, in the above equations. Similarly, to determine an estimate of the transmitted symbol S, equations 1 and 2 may be scaled and combined as follows: \n\n\nThus, the recovered symbols, {overscore (S)}and {overscore (S)}, can be computed as:\n\n{overscore (S)}=({overscore (\u03b1)}), and\u2003\u2003Eq (5) \n\n{overscore (S)}=(\u2212{overscore (\u03b2)}).\u2003\u2003Eq (6) \n","To recover the data transmitted on the physical channel, it is necessary to decover the descrambled samples with the same OVSF code, C, used to channelize the physical channel at the transmitter. However, as noted above, the bit rate for the shared channel in the W-CDMA system is variable and the bit rate for a particular radio frame is provided on the dedicated channel, which may be transmitted approximately concurrently with the data.","Several techniques can be used to recover the data on a physical channel (such as the downlink shared channel in the W-CDMA system) having a variable but unknown bit rate (i.e., unknown OVSF code). In one technique, the descrambled samples are stored to memory and later retrieved for processing when information on the physical channel is known. Because of various factors (e.g., the size of the radio frame, the high bit rate, the higher resolution used to represent the unprocessed samples, and so on), a large memory is required to store the unprocessed samples. Also, descrambled samples are stored for all assigned finger elements.","In another technique, the descrambled data can be decovered for all possible OVSF codes (or all OVSF codes possible with the physical channel being processed). For example, the descrambled data can be decovered for OVSF code C=1,1,1,1, OVSF code C=1,1,\u22121,\u22121, and so on, concluding with OVSF code C=1,\u22121,\u22121,1,\u22121,1,1,\u22121, . . . Since there are almost 1024 possible OVSF codes, the brute force processing for all possible OVSF codes can be extensive and the implementation cost may be high. Thus, other techniques that can reduce the amount of necessary buffering and\/or computation are highly desirable.","In accordance with the invention, if the actual OVSF code is not known, a hypothesized OVSF code is used to process the received samples. The actual OVSF code is the code that was actually used to channelize the physical channel being processed. Initially, a set of all OVSF codes that can be used to generate all possible actually used OVSF codes is determined. The OVSF code with the largest spreading factor within this set can then be selected as the hypothesized OVSF code. The hypothesized OVSF code is thus a \u201cbase\u201d OVSF code that can be used to generate all possibilities of the actual OVSF code. The code tree for generating the OVSF codes has a known structure and this property of the OVSF code is exploited in the present invention. If the actual OVSF code is known to be a member of a set of possible codes, then the hypothesized OVSF code with the largest spreading factor that can be used to generate the possible codes in the set is used to decover the data.","For example, referring back to , if the actual OVSF code has a spreading factor of 4 and it is known that the code is either Cor C, then the OVSF code Ccan be used to process the physical channel since Ccan be used to generate Cand C. As another example, if the actual OVSF code is known to be a member of a set that includes Cto Cand Cto C, then the OVSF code Ccan be used to process the physical channel. If the actual OVSF code is known to be a member of a smaller code set that includes Cto Cand Cto C, then the OVSF code Chaving a larger spreading factor can be used to process the physical channel. The OVSF code selected for use to process the physical channel is referred to as the hypothesized OVSF code.","For a clearer understanding of the invention, the processing of the received samples using a hypothesized OVSF code is now described for a specific example. In this example, the hypothesized OVSF code is half the length of the actual OVSF code.",{"@attributes":{"id":"P-00097","num":"00097"},"figref":"FIG. 9","sub":["0 ","1","00","01","10","12","a0 ","a1 ","4"]},"If the actual OVSF code is known, the following terms can be computed for each finger element assigned to process a particular signal path:\n\n","However, if the actual OVSF code is not known, a hypothesized OVSF code can be generated and used for processing the received samples. For each assigned finger element, the following terms can be computed using the hypothesized OVSF code:\n\n","The above terms represent intermediate results that can be stored in a memory the actual OVSF code is determined. Once the actual OVSF code is known, the intermediate results can be retrieved from memory and appropriated combined as follows:\n\n","As illustrated by the above example, equations (5) and (6) cannot be executed in its entirety with the hypothesized OVSF code because the length of the symbols Sand Sis not known. For example, if the hypothesized OVSF code has a length of 4 chips and the actual OVSF code has a length of 8 chips, then each transmitted symbol lasts two hypothesized OVSF codes. As another example, if the actual OVSF code has a length of 16 chips, then each transmitted symbol lasts four hypothesized OVSF codes. With the invention, partial processing is performed using the hypothesized OVSF code and the intermediate results are later combined to provide the desired outputs.","For the simple example described above, the same pilot estimates, \u03b1 and \u03b2, are used for all four symbols Y, Y, Y, and Y. However, it is also possible to use the most updated pilot estimates available at the time of the symbol being processed. In this case, instead of using a single set of \u03b1 and \u03b2, four sets \u03b1and \u03b2through \u03b2and \u03b2can be used to process the symbols Ythrough Y, respectively.","Referring back to , each finger element processes one instance of the received signal to generate the partially processed symbols for that finger. Specifically, each finger despreads the received samples, decovers the despread samples using the hypothesized OVSF code, and demodulates the decovered symbols with the pilot estimates to generate the partially processed symbols. The actual OVSF code may be made up of a concatenation of Q appropriately weighted (with either +1 or \u22121) hypothesized OVSF codes, depending on the pattern of the actual OVSF code. Thus, Q pairs of partially processed symbols are generated by each finger element for each transmitted symbol. For the W-CDMA system, Q can be 1, 2, 4, . . . , or 128, depending on relationship between the actual and hypothesized OVSF codes: Each pair of partially processed symbols thus corresponds to a portion of the transmitted symbol (for Q=2, 4, . . . or 128) or the entire transmitted symbol (for Q=1). Each finger element computes the Q pairs of partially processed symbols as (\u03b1Y) and (\u03b2Y), with one pair of partially processed symbols generated for each hypothesized OVSF code length.","For data transmission received from one base station, the same hypothesized OVSF code is used for all assigned finger elements. As noted above, for data transmissions received from multiple base stations and covered with different actual OVSF codes, different hypothesized OVSF codes may be used to decover the received samples. For both cases, the partially processed symbols from all assigned finger elements are combined to generate the intermediate results.","The partially processed symbols from all assigned finger elements are then provided to combiner  and appropriated weighted and combined into combined symbols, which represent the intermediate results. Specifically, the partially processed symbols from all assigned finger elements for each hypothesized OVSF code length are scaled and combined to generate the intermediate results for that hypothesized OVSF code length. Again, Q pairs of intermediate results, ({overscore (\u03b1Y)}) and ({overscore (\u03b2Y)}) through ({overscore (\u03b1Y)}) and ({overscore (\u03b2Y)}), are generated for each transmitted symbol. The intermediate results are then provided to the next processing unit or stored.","Once the actual OVSF code is known, the intermediate results can be retrieved and further processed, if necessary, to obtain the recovered symbols. As an example, if the physical channel was processed using a hypothesized OVSF code C=1,1 and the actual OVSF code is C1,1,\u22121,\u22121, then the intermediate results are retrieved, appropriately inverted as defined by the actual OVSF code, and integrated over the length of the actual OVSF code to obtain the recovered symbols. For the above example, the second pair of intermediate results is inverted to account for the inversion in the second half of the Ccode. The first set of intermediate results, corresponding to ({overscore (\u03b1Y)}) through ({overscore (\u03b1Y)}), from the Q pairs are combined to obtain the term ({overscore (\u03b1X)}). Similarly, the second set of intermediate results, corresponding to ({overscore (\u03b2Y)}) through ({overscore (\u03b2Y)}), from the Q pairs are combined to obtain the term ({overscore (\u03b2X)}). These terms are then combined as shown in equations (5) and (6) to obtain the recovered symbols. Referring to , the processing of the intermediate results can be performed by controller , by circuitry within combiner , or by other circuitry not shown in FIG. .","The processing units described herein (e.g., multipliers , accumulators , pilot processors , data recovery element , controller , and others) can be implemented in various manners such as an application specific integrated circuit (ASIC), a digital signal processor, a microcontroller, a microprocessor, or other electronic circuits designed to perform the functions described herein. Also, the processing units can be implemented with a general-purpose or specially designed processor operated to execute instruction codes that achieve the functions described herein. Thus, the processing units described herein can be implemented using hardware, software, or a combination thereof.","The memory unit can be implemented memory technologies including, for example, random access memory (RAM), Flash memory, and others. The memory unit can also be implemented with storage element such as, for example, a hard disk, a CD-ROM drive, and others. Various other implementation of the memory unit are possible and within the scope of the present invention.","The foregoing description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus, the present a invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The features, nature, and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify correspondingly throughout and wherein:",{"@attributes":{"id":"P-00017","num":"00017"},"figref":"FIG. 1"},{"@attributes":{"id":"P-00018","num":"00018"},"figref":"FIG. 2"},{"@attributes":{"id":"P-00019","num":"00019"},"figref":"FIG. 3A"},{"@attributes":{"id":"P-00020","num":"00020"},"figref":"FIG. 3B"},{"@attributes":{"id":"P-00021","num":"00021"},"figref":"FIGS. 4A and 4B"},{"@attributes":{"id":"P-00022","num":"00022"},"figref":"FIG. 5"},{"@attributes":{"id":"P-00023","num":"00023"},"figref":"FIG. 6"},{"@attributes":{"id":"P-00024","num":"00024"},"figref":"FIG. 7"},{"@attributes":{"id":"P-00025","num":"00025"},"figref":["FIG. 8","FIG. 7"]},{"@attributes":{"id":"P-00026","num":"00026"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
