---
title: Document collection manipulation
abstract: In a system for inputting and managing document collections, the order in which documents are presented to the system dictates the organization and hierarchy for the electronically stored document collection. Users can add annotations to documents and collections by writing on a coversheet; the system scans the coversheet, reads the written material, and adds the material to the electronically stored document and/or collection. In addition, in one aspect the invention provides a mechanism for granting different levels of access to different individuals, by generating coversheets that point to the same collection but that provide different levels of access to the collection.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07757162&OS=07757162&RS=07757162
owner: Ricoh Co. Ltd.
number: 07757162
owner_city: Tokyo
owner_country: JP
publication_date: 20031015
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE EMBODIMENTS"],"p":["This application is related to the following commonly owned and co-pending U.S. patent applications, the disclosures of which are incorporated by reference:\n\n","1. Field of the Invention","The present invention relates generally to document management, and more specifically to mechanisms for accessing, manipulating, and disseminating collections of documents.","2. Background of the Invention","Despite the ideal of a paperless environment that the popularization of computers had promised, paper continues to dominate the office landscape. Ironically, the computer itself has been a major contributing source of paper proliferation. The computer simplifies the task of document composition, and thus has enabled even greater numbers of publishers. The computer promotes individual expression through the use of graphics tools, image capture devices, image enhancement tools, and so on, in addition to traditional text editing. Oftentimes, documents must be shared among colleagues, thus generating even more paper.","Despite advances in technology, practical substitutes for paper remain to be developed. Computer displays, PDAs (personal digital assistants), wireless devices, and the like all have their various advantages, but they lack the simplicity, reliability, portability, relative permanence, universality, and familiarity of paper. In many situations, paper remains the simplest and most effective way to store and distribute information.","The conveniences and advantages that paper offers signal that its complete replacement is not likely to occur soon, if ever. Perhaps then, the role of the computer is not to achieve a paperless society. Instead, the role of the computer may be as a tool to move effortlessly between paper and electronic representations and maintain connections between the paper and the electronic media with which it was created.","In U.S. Pat. No. 5,754,308, \u201cSystem and Method for Archiving Digital Versions of Documents and for Generating Quality Printed Documents Therefrom,\u201d Lopresti et al. describe one method for moving between paper and electronic representations. The system uses an enhanced copier to scan a document information designator present on each page that uniquely identifies that page and enables retrieval of a stored digital representation of that page for output. This system requires hard copies of each page to be used for retrieval and does not guarantee security during the storage or retrieval processes.","Related, commonly owned applications for \u201cMethod and Apparatus for Composing Multimedia Documents,\u201d and \u201cMultimedia Document Sharing Method and Apparatus,\u201d the disclosures of which are incorporated herein by reference, describe techniques for organizing multimedia documents into one or more collections. A collection coversheet representative of the collection can be printed on a suitable medium, such as paper. This coversheet can provide access to the collection by using a multi-function peripheral (MFP). In this way, individuals can share multimedia documents in the collection by distributing copies of the coversheet to recipients.","It is desirable to simplify the process of creating and manipulating document collections, so as to encourage users to make more effective use of such electronic storage mechanisms. Existing techniques provide user interfaces allowing users to specify, via input devices such as buttons and touchscreens, what operations are desired. However, what is needed is a system and method that simplifies operation of the system by allowing a user to specify desired operations without having to learn or use a user interface.","In many situations, users may wish to add annotations to stored documents and collections. What is needed is a mechanism for automatically reading such annotations, processing them if appropriate, and adding them to the electronically stored copies of documents and collections. What is further needed is a mechanism for performing such operations in a simple, easy-to-use way.","Often, a user wishes to provide different levels of access to a document or collection to different individuals. What is needed is a mechanism for providing such different levels of access for different users, while maintaining the convenience of using coversheets to provide access to collections.","According to one aspect, the present invention simplifies the process of inputting documents into a collection. Rather than specifying a collection organization and hierarchy via a user interface, the user simply arranges the documents in an order that represents the desired organization. The system of the present invention interprets the order in which documents are presented upon input, and arranges the documents in a particular organization and hierarchy according to the presented order.","For example, if the first document identifies an existing collection, subsequent documents are added to the identified existing collection. If the first document does not identify a collection, the first document and subsequent documents are added to a new collection. If, in either of these processes, a subsequent document identifies a collection, the identified collection is added as a subcollection (or, alternatively, the documents within the second collection are individually added to the first collection).","According to another aspect, the present invention provides an input mechanism for accepting and storing annotations provided by a user. As described in related applications referenced above, a collection coversheet representative of the collection is printed on a suitable medium, such as paper for example. According to this aspect of the invention, the user can annotate the collection coversheet, for example by writing on it with an ordinary pen or pencil. The coversheet (or other piece of paper containing annotations) is then scanned, and the user's annotations are added to the collection.","According to another aspect, the present invention provides a mechanism for granting different levels of access to a collection or document to different individuals. As described in related applications referenced above, a collection coversheet representative of the collection is printed on a suitable medium, such as paper for example; the coversheet then provides access to the collection. According to this aspect of the invention, the coversheet also specifies a level of access, such as read-only access, add-only access, or full permission. Upon scanning the coversheet, the system of the invention grants the level of access specified by the coversheet.","Thus, users can share documents in the collection by distributing copies of coversheets to recipients, and the recipients can be granted differing levels of access to the collection according to indicators on their respective coversheets.","Further features of the invention, its nature and various advantages will be more apparent from the accompanying drawings and the following detailed description.","The present invention is now described more fully with reference to the accompanying Figures, in which several embodiments of the invention are shown. The present invention may be embodied in many different forms and should not be construed as limited to the embodiments set forth herein. Rather these embodiments are provided so that this disclosure will be complete and will fully convey the invention to those skilled in the art.","In the following description, for purposes of explanation, numerous specific details are set forth in order to provide a thorough understanding of the invention. It will be apparent, however, to one skilled in the art that the invention can be practiced without these specific details. In other instances, structures and devices are shown in block diagram form in order to avoid obscuring the invention.","Reference in the specification to \u201cone embodiment\u201d or \u201can embodiment\u201d means that a particular feature, structure, or characteristic described in connection with the embodiment is included in at least one embodiment of the invention. The appearances of the phrase \u201cin one embodiment\u201d in various places in the specification are not necessarily all referring to the same embodiment.","Some portions of the detailed description that follows are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here, and generally, conceived to be a self-consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually, though not necessarily, these quantities take the form of electrical or magnetic signals capable of being stored, transferred, combined, compared, and otherwise manipulated. It has proven convenient at times, principally for reasons of common usage, to refer to these signals as bits, values, elements, symbols, characters, terms, numbers, or the like.","It should be borne in mind, however, that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion, it is appreciated that throughout the description, discussions utilizing terms such as \u201cprocessing\u201d or \u201ccomputing\u201d or \u201ccalculating\u201d or \u201cdetermining\u201d or \u201cdisplaying\u201d or the like, refer to the action and processes of a computer system, or similar electronic computing device, that manipulates and transforms data represented as physical (electronic) quantities within the computer system's registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage, transmission or display devices.","The present invention also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes, or it may comprise a general-purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium, such as, but is not limited to, any type of disk including floppy disks, optical disks, CD-ROMs, and magnetic-optical disks, read-only memories (ROMs), random access memories (RAMs), EPROMs, EEPROMs, magnetic or optical cards, or any type of media suitable for storing electronic instructions, and each coupled to a computer system bus.","The algorithms and modules presented herein are not inherently related to any particular computer or other apparatus. Various general-purpose systems may be used with programs in accordance with the teachings herein, or it may prove convenient to construct more specialized apparatuses to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition, the present invention is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the invention as described herein. Furthermore, as will be apparent to one of ordinary skill in the relevant art, the modules, features, attributes, methodologies, and other aspects of the invention can be implemented as software, hardware, firmware or any combination of the three. Of course, wherever a component of the present invention is implemented as software, the component can be implemented as a standalone program, as part of a larger program, as a plurality of separate programs, as a statically or dynamically linked library, as a kernel loadable module, as a device driver, and\/or in every and any other way known now or in the future to those of skill in the art of computer programming. Additionally, the present invention is in no way limited to implementation in any specific operating system or environment.","In this application, the term \u201cdocument\u201d refers to any collection of information capable of being stored electronically, including but not limited to text, word processing and spreadsheet files, e-mail messages, voice and audio recordings, images and video recordings.","The terms \u201cpaper\u201d, \u201cpaper medium\u201d, or \u201csheet\u201d as used in this application are intended to refer to any tangible medium on which information can be formed whether by a printing process, written, drawn, imprinted, embossed, etc. For purposes of this invention, the term \u201cprinting\u201d is intended to encompass all manner of forming images on an image-bearing medium whether by optical, mechanical, thermal, or electrical methods, or combinations thereof.","The term \u201ccollection\u201d refers to one or more groups of electronic documents or media that might include digital images, audio recordings, scanned images from pages of a document, and\/or files such as Microsoft Word documents or Microsoft Excel spreadsheets. Collections can also contain pointers to other collections. Collections can include user-provided markings, annotations, and the like. Collections can also include metadata representing related information such as date of creation, modification date, access permissions, and the like.","For purposes of the following description, a collection is stored on a collection server (or other storage device). Each collection has a specific, unique address or identifier, such as a uniform resource locator (URL), which provides a pointer to the collection. References herein to a pointer, collection identifier, or distributed resource identifier (DRI) can be considered to refer to a URL or any other mechanism, tag, handle, pointer, or technique for identifying a file, collection, directory, or other group of files.","As described in the above-referenced related patent applications, a coversheet can be generated for a collection. The coversheet includes a representation of the contents of the collection with, in one embodiment, an overview image showing thumbnails that represent all of the documents in the collection, and a representation of the unique identifier for the collection. In one embodiment of the present invention, the techniques described herein are combined with the coversheet methods and systems described in the related patent applications.","System Architecture","Referring now to , there is shown a pictorial representation of an illustrative embodiment showing the various components that are part of the present invention. Referring also to , there is shown a corresponding block diagram, containing various functional components. Multi-function peripheral (MFP)  is connected through a network  to collection server  for storing collections  of documents . MFP  provides functionality for creating and modifying collections , and for communicating with server  for the purpose of transmitting and receiving collections  and documents .","For illustrative purposes,  depict several different data capture devices. In a particular embodiment, a MFP  scans documents  and coversheets  via scanner  (scanner  is not shown in , as it is internal to MFP ). Additional capture devices include but are not limited to microphones , digital cameras , video cameras , memory cards and other removable media , as well as additional devices (not shown). Any or all of devices , , , , as well as collection server , can be connected directly to MFP  or can be connected via network . Documents  and collections  can also be received and transmitted via fax, e-mail, or other communication means. MFP  also has the ability to output documents  and coversheets  by printing them via printer  (printer  is not shown in , as it is internal to MFP ).","MFP  also includes, in one embodiment, control panel  that provides a user interface for controlling MFP . Referring momentarily to , there is shown an example of a control panel  for MFP . Control panel  may include, for example, any or all of keypad , buttons (not shown), and touchscreen displays . In one embodiment, control panel  also provides feedback to the user through display  and indicator lights . For example, control panel  may indicate a current state of MFP , or might indicate the task or action currently being performed by MFP .","Also shown in  is collection , including documents , and collection coversheet . As described in the above-referenced related applications, coversheets  provide a convenient mechanism for accessing, retrieving, and distributing documents  and collections . The present invention provides several enhancements and improvements to the functionality and usage of MFP  in connection with coversheets , documents , and collections .","Additional details concerning the architecture and operation of MFP  are provided in the above-referenced related applications, the disclosures of which are incorporated herein by reference.","Collections and Coversheets","Referring now to , there is shown an example of a collection coversheet  for an empty collection . An empty collection  contains no documents , and is essentially a placeholder for storing documents  in the future.","Referring now to , there is shown a collection coversheet  for a collection  having seven documents  and one subcollection pointer . Three documents  are images from a digital camera, four documents  are scanned pages from MFP , and subcollection pointer  is a pointer to another collection  containing two documents . Collection overview  provides an overall representation of collection , including thumbnails of the documents  and subcollection pointer  therein.","In one embodiment, collection coversheet  is a piece of paper that includes several elements: header , machine-readable bar code , human-readable collection identifier or pointer , and collection overview . In addition, coversheet  includes area  in which the user may write annotations. As will be described in more detail below, such annotations can be scanned by MFP  and added to collections  according to the techniques of the present invention.","In one embodiment, header  contains printed information about collection , including for example: the author; a list of zero, one or more individuals to be notified if the collection  is modified; time and date information of collection  creation, modification, and\/or printout; and collection  topic or subject.","One skilled in the art will recognize that the present invention can be implemented using other types and arrangements of coversheets , and that such coversheets  may be provided on media other than paper.","Collection Identifier","As described in the related applications, machine-readable bar code  contains an encoded representation of a unique pointer to collection  on collection server . This pointer is referred to herein as a distributed resource identifier (DRI). When presented in human-readable form , a DRI can take on a form similar to a uniform resource locator (URL) as is commonly used to identify documents in the World Wide Web. In one embodiment, the present invention uses DRIs as unique collection pointers. DRIs are globally unique, difficult to guess, and can provide access to collections from remote locations, via a network such as the Internet.","Within this description, the terms \u201cpointer\u201d, \u201ccollection identifier\u201d, \u201cdistributed resource identifier\u201d, and \u201cDRI\u201d are used interchangeably to represent a unique identifier that points to a stored collection  (or, in some cases, to a document ). In some cases, more than one identifier points to the same collection , in order to provide different ways of accessing that collection . Identifiers can be represented in human-readable form and\/or machine-readable form.","The DRI for a collection  may point to a directory that contains the collection of documents as well as information used to build the collection overview and some additional metadata. A DRI can also point directly to an individual document .","Bar code representation  of a DRI allows for automated access to the collection without requiring the user to manually enter the location; rather, MFP  scans coversheet  to obtain the DRI. It will be appreciated, of course, that any machine-readable indicium can be used instead of bar code ; in one embodiment, MFP  employs optical character recognition (OCR) to read a human-readable representation  of a DRI.","Since a collection  can include several documents , the DRI is often a directory reference rather than a reference to a particular file. For example, in an operating system such as Unix, the DRI can be a directory reference such as \/usr\/collection. Alternatively, the DRI can refer to a file that in turn leads to an identification of the constituent elements (documents ) of a collection . In still another alternative, the DRI can be a reference to a database that stores collection . It will be appreciated that many other alternatives for storing collections of information may be used.","In accordance with an aspect of the invention, the text of the DRI  may be made up of a string of characters that includes a random text component. This randomly generated text provides a measure of security; it helps prevent access to a collection because it is non-intuitive and virtually impossible to guess. Identifying a collection with an identifier that has no correlation to the content of the collection may present a strong impediment to hacking attempts; the hacker simply has no idea where the collection may be located, or that the collection even exists.","The example DRI \u201c\/root\/usr\/collection\u201d assumes a single-machine architecture. In a more generalized configuration of two or more machines, the DRI can include a machine name component. For example, a URL format for identifying World Wide Web pages might be used. In accordance with this particular embodiment of the invention, the DRI constitutes the path portion of the URL. Purely by convention, the path portion uses the following naming format according to a particular embodiment of this aspect of the present invention:",". . . \/-DDS-\/ORIGIN\/ . . . ,","where:","DDS is the name of a particular repository of collections ; and","ORIGIN is the fully-qualified hostname of the origin server for the collection  identified by the DRI.","Thus, for example, suppose a collection  is identified by the following URL:","http:\/\/machine1.com\/-msg-\/machine2.com\/2002\/1022\/398hy9y8h8#$30er#\/1\/","The domain corresponding to the machine that stores collection  is identified by \u201cmachine1.com.\u201d The path portion refers to a collection  stored in a repository named \u201c-msg-.\u201d The original collection  (i.e., its place of creation) is located on a machine named \u201cmachine2.com.\u201d Thus, in this case, \u201cmachine1\u201d contains a copy of the collection . In this particular embodiment of the invention, collections  are contained in directories, though other data storage conventions can be used; for example, collections  can be stored and managed in a database. The collection  shown in the example above is stored in a directory called:","\u201c\/2002\/1022\/398hy9y8h8#$30er#\/1\/\u201d","The string \u201c398hy9y8h8#$30er#\u201d represents randomly generated text. Finally, as will be discussed below, the directory represented by the terminal pathname \u201c\/1\/\u201d refers to the first (initial, original, base, etc.) version of the collection .","In this particular embodiment, both the host machine (\u201cmachine1\u201d) and the origin machine (\u201cmachine2\u201d) use the following directory structure and URL naming structure. The host machine has a directory called \u201c-msg-\u201d contained in a directory for storing collections . The \u201c-msg-\u201d directory has a sub-directory called \u201cmachine2.com\u201d which contains all the collections originating on \u201cmachine2.com.\u201d Generally, a sub-directory is provided for each machine that can be an originator of a collection.","A DRI represents a collection  by providing a unique, secure pointer to a directory or to a file within that directory on a collection server . Given the DRI, a person or machine has enough information to access the collection .","It is possible to modify a collection , for example, by adding new documents ; adding, deleting, or modifying annotations (as will be described in more detail below); or modifying or deleting existing documents . In one embodiment, when a collection  is modified, the terminal pathname in the collection  is incremented so that the original collection  with the original DRI is unchanged and the new collection  is placed in a new directory. This allows a DRI to always point at the same unmodified collection  and at the same time, make newer versions of the collection  easy to find. Symbolic links, or \u201caliases\u201d, can be established between files representing documents , so that a single data file can appear to be located in two separate directories. Using such links, different versions of a collection  can be built without duplicating any data files because a file that appears in the \/1\/ and the \/2\/ version can be linked rather than duplicated.","Accordingly, in one embodiment, when a collection  is modified, a new directory is created (such as \/2\/) and symbolic links in \/2\/ are created that point to files in \/1\/. Files need not be duplicated. New files added to the new version of the collection  reside directly in \/2\/, and files which were in \/1\/ and are not in \/2\/ remain without links. The annotations, overview, and metadata in \/2\/ are modified appropriately.","Inputting Documents","The present invention provides improved techniques for allowing a user to create new collections  and to populate existing collections  with documents . New collections can be created as follows: The user can input data from paper documents  by placing the documents  on an automatic document feeder (not shown) for scanning by scanner  of MFP . The user can input documents , images, or other files or data from electronic media such as a memory card by placing the media  in an appropriate reader (not shown) connected to MFP . According to techniques described in more detail below, the user places the documents  or other data in a particular order to indicate that a new collection  should be created; in response, MFP  proceeds to retrieve any media placed on or in MFP  by the user or recorded by the user. Those skilled in the art will understand that it is possible to find media by checking sensors, activating scanners, or searching file systems on connected memory cards. MFP  stores all the retrieved media in the newly created collection.","Including an Existing Collection in a New Collection","As documents  are input into a collection , MFP  searches the documents for machine-readable indicia containing DRIs . Techniques for locating barcodes in images are known in the art and available from a variety of sources. MFP  can recognize that a page containing a DRI represents a collection . As described in more detail below, MFP  can be programmed such that inserting a page with a DRI into any collection , new or existing, is understood as a request to add that collection  to the new collection . In other words, the page containing the DRI represents a request to add the collection  pointed to by that DRI to the collection  currently being created or added to. In one embodiment, the overview image of that collection  is retrieved and added as a thumbnail to the new collection  and the subject of that collection  is used as the title for the thumbnail.","Separating Documents","As a user is creating a new collection  or adding to an existing collection , it may be desired to rapidly input a series of documents  to MFP . A separator page , an example of which is shown in , can be used to denote the end of one document  and the beginning of a new document . MFP  detects separator page  and, thereby recognizes that a new document  is about to begin. Separator page  makes it possible for the user to queue several documents for MFP  to scan in one stack. In one embodiment, separator page  is an easily produced sheet of paper with a printed machine-readable indicator such as a barcode . Separator page  may be similarly formatted as a collection coversheet. Alternatively, separator page  may be any kind of separator identifiable by MFP .","According to one embodiment, MFP  scans each input page for a machine-readable indicator. When separator page  is scanned, MFP  reads barcode , recognizes that it is a separator page , and begins to store subsequently input pages as a separate document .","Adding to an Existing Collection","When a user wishes to add documents  to an existing collection , the user provides a DRI to identify the existing collection . The user can indicate to which collection  to add documents  by inputting the DRI manually, or by providing a coversheet  including a machine-readable indicator of the DRI. The advantage of having a machine-readable DRI identifying the collection  is that MFP  or any device that can locate and decode machine-readable codes can determine which collection  is represented by the coversheet . There are many other methods for presenting the MFP  with a machine-readable DRI, and those methods and techniques are not enumerated here because they are understood by those skilled in the art.","Determining Collection Organization and Hierarchy by Document Order","In one embodiment, the user need not explicitly specify, via a control panel  or other user input device, operations such as creating new collections  or adding to existing collections . Instead, the order in which documents  are presented to MFP  determines which task will be performed. In this manner, the user is not required to explicitly specify an action; rather, he or she merely provides the documents  in a particular order, and MFP  automatically performs the desired action based on the order. Accordingly, collection  organization and hierarchy are specified by document  order.","Referring now to , there is shown a flow chart depicting an example of a method for determining collection  organization and hierarchy by document  order. One skilled in the art will recognize that the particular configuration and method of  is merely exemplary, and that MFP  can be configured to perform different actions in response to document order, and in response to the presence or absence of a DRI.","In the example, MFP  determines whether to create a new collection  or add to an existing collection  by determining whether the first presented document  of a group of one or more documents  contains a DRI. If the first document  contains a DRI, the document  and subsequent documents  are added to the collection  identified by the DRI. If the first document  does not contain a DRI, a new collection  is created, and the document  and subsequent documents  are added to the new collection .","Part A. In Part A of the method, MFP  receives  a first document . If, in , MFP  finds no machine-readable DRI, MFP  assumes that the user wishes to create a new collection (steps  to ); for illustrative purposes, this new collection is referred to as collection D. MFP  creates  a new collection D, obtains  a new DRI from collection server  for collection D, and adds  first document  to collection D. MFP  then proceeds to Part B of the method, as described below.","If, in , MFP  finds that the first document  does contain a DRI, MFP  assumes that the user wishes to add to an existing collection; for illustrative purposes, this existing collection is referred to as collection E. MFP  retrieves  collection E identified by the DRI from the collection server . Additional documents , processed in Part B as described below, are added to collection E.","Part B. Part B proceeds as follows. MFP  determines  whether any more documents  are presented. If not, the method ends . If any documents are presented, MFP  receives  the next document  and determines  whether a machine-readable DRI can be found on this document . If no machine-readable DRI can be found, the document  is added  to collection D or E.","If, in , MFP  does find a machine-readable DRI on the document , then MFP  retrieves  the collection identified by the DRI from collection server ; for illustrative purposes, this collection is referred to as collection F. MFP  then adds  collection F as a subcollection to collection D or E. The overview image of the collection F is retrieved and added as a thumbnail to collection D or E, and the subject or title of collection F is used as the title for the thumbnail. For example, if a user presents a stack of documents containing a first document  followed by a second document , followed by a coversheet , the MFP  would create a new collection D, populate the new collection D with the first two documents , and add the collection F identified by the DRI on the coversheet as a subcollection.","After completing step  or , MFP  returns to step  to determine whether more documents  are presented. If so, each document is received and processed as described above. When no more documents  are presented, the method ends .","Referring now to , there are shown two examples of document sequences that dictate particular actions to be performed by MFP . In , documents A through E are provided in a stack, with document A being presented first. It is assumed, for illustrative purposes, that MFP  receives the documents  in a top-down order; however, the documents  could instead be received in a bottom-up order. First document A includes a DRI A, causing MFP  to access existing collection A identified by DRI A. Documents B and C are then added to existing collection A; in one embodiment, documents B and C are placed in a new subcollection which in turn is added to existing collection A. Document D includes DRI B, causing MFP  to include, in collection A, the collection B identified by DRI B. As described above, collection B can be included as a subcollection of collection A, or alternatively the individual documents (not shown) of collection B can be included in collection A. Then, MFP  proceeds to add document E to collection A. Once the appropriate documents B, C, E, and the collection B, have been added to collection A, collection A is stored in collection server .","In , documents H through M are provided in a stack, with document H being presented first. First document H does not include a DRI. This causes MFP  to create a new collection C. Documents H through M are then added to new collection C, and collection A is stored in collection server .","Annotations","In one embodiment of the invention, a user can annotate collections  in several ways, for example by using electronic drawing tools or by marking directly on coversheets . If the user has requested an opportunity to add annotations, the MFP  can present a canvas and an object-based drawing tool like those found in Microsoft's PowerPoint software or Adobe Illustrator or similar programs. A user may also mark directly on a coversheet  with a conventional writing implement such as a pen, either to indicate commands to the MFP  or to make annotations as desired in the overview area  or in the note-taking space . MFP  detects such annotations and performs the requested operation: either by performing specified commands, adding the annotations to the appropriate documents  within collection , or adding a new document  including the annotations.","Referring now to , there is shown a flowchart depicting a method for detecting and processing user-added annotations made on a coversheet , according to one embodiment. One skilled in the art will recognize that the various steps depicted in  can be performed in any order, and that the invention is not limited to the particular order depicted.","MFP  scans  collection coversheet , reads  the DRI on coversheet , accesses  collection  identified by the DRI, and detects  the presence of annotations. Various methods of detecting marks on a document are known in the art and have been described in related cross-referenced applications. In one embodiment, MFP  automatically detects notes when a coversheet  is scanned, and MFP  optionally automatically continues the process to add notes to collection .","Although the exemplary method is described in terms of detecting annotations on coversheet , other mechanisms for receiving annotations from a user may be employed. For example, in another embodiment, the user can request, via a command entered on control panel  or other input device, an opportunity to add notations. This option may also be provided as a prompt by MFP , either automatically or in response to certain predefined conditions (such as previously received notations, previously set user preferences, or any other condition). If the user indicates that he or she wishes to add annotations, he or she can do so via control panel  or other input device. Annotations can also be input via e-mail transmission, fax transmission, or any other communication method. For example, a user can fax to MFP  an image of a coversheet  including annotations.","MFP  extracts  the annotations from the coversheet. In one embodiment, extracting  the annotations includes imaging the entire coversheet; alternatively, MFP  can image only the notes area  of coversheet . If notes area  has lines to facilitate note-taking, the MFP  optionally removes those lines from the image. If desired or appropriate, the image is processed using optical character recognition (OCR) or other methods for ascertaining the content of the image. Alternatively, the image may be retained in bitmapped form with no processing, or it may be converted to a graphical description language such as Scalable Vector Graphics (SVG) or PostScript. In one embodiment, the user is given an opportunity (via control panel  or other input\/output means) to select whether the image should be processed and how. The image can be appropriately time and date-stamped, and\/or additional information (such as authorship) may be added. MFP  then adds  the image of the extracted notes to collection ; the image may be added as a separate document , or it may be added to an existing document , or it may be added in such a manner that it is not part of any document  but is visible in overview  for collection . Alternatively, MFP  can add the image to an existing document .","In one embodiment, annotations are added to a collection  and not to a document  within the collection. When annotations are added to collection  via notes area  of coversheet , the annotations are added as an image in collection . The notes are not part of an existing document , although they may be associated with a document  either by proximity on coversheet  or by an indication that the notes were added to collection  soon after the document  was added.","Limiting Access Permissions Through Differentiated Collection Identifiers","In one embodiment of the invention, MFP  provides the capability to generate a coversheet  that grants limited permission to access a collection . For example, in response to a user's request, MFP  can provide a coversheet  that grants \u201cread-only\u201d or \u201cadd-only\u201d access. A coversheet  granting \u201cread-only\u201d access allows the recipient of the coversheet  to read, view, share, or print a collection  but does not allow the recipient to modify the collection . A coversheet  granting \u201cadd-only\u201d access allows the recipient to add documents  (and\/or other media) to the collection  but does not allow the recipient to access any of the documents  already in the collection . In one embodiment, a recipient of an add-only coversheet  is therefore unable to modify documents  he or she has added to collection ; the level of access is akin to a \u201cdrop-box\u201d. One skilled in the art will recognize many different levels and types of access can be granted, including for example:\n\n","In addition, in one embodiment a \u201cfilter\u201d mode is available, which causes an access level of a subcollection to be inherited from (or limited by) the access level of the containing collection.","In one embodiment, a collection identifier (such as a DRI) specifies a level of access, for example by providing a particular path to a collection  that implicitly includes the access specification. In addition, different collection identifiers can be provided for a particular collection, each collection identifier specifying a different level of access. Such functionality may be implemented, in one embodiment, using techniques analogous to Unix file system permissions and symbolic links. Each data file in a Unix file system has at least one pointer to the file stored in a directory. Links can be created which exist in other directories or perhaps in the same directory but with a different name. These links point to the exact same data on the disk as the original file, but have different metadata. That metadata includes the filename and full pathname, as well as file permissions. Unix files can be given restricted access that limits or allows certain individuals to read or write the file. A file can be set up so that it can be read, written, or deleted by anyone. The same file, through a link, can be given a more restrictive set of permissions, perhaps only letting one or a few people read the file and letting no one delete it. Even though two different pointers point to the same data, the particulars of the access level for the data depends on the restrictions specified in the pointers, not in the data.","Thus, in one embodiment MFP  can create multiple coversheets  allowing different access levels for a particular collection  or document . For example, a full access coversheet  can be generated as well as a coversheet  that grants limited access. The collection identifier or DRI printed on the full access coversheet  points to a directory via a path that allows full access to collection , while the collection identifier or DRI printed on the limited access coversheet  points to the directory via a different path that allows limited access to collection . As described in more detail below, an \u201c-access-\u201d file specifies different access privileges based on the path used to access the directory.","In one embodiment of the present invention, collection server  maintains a mapping between collection identifiers and collection  locations, and further maintains records to indicate the access permission level for each collection identifier. When an MFP  requests a particular type of access using a collection identifier, collection server  determines whether the identifier allows the requested access, and responds accordingly. Alternatively, collection server  can provide access permission information to MFP , and MFP  can make the determination as to whether to process with the request.","In one embodiment, the multiple access level techniques described herein are combined with secure access techniques described in related U.S. patent application Ser. No. 10\/639,282 titled \u201cPhysical Key for Accessing a Securely Stored Digital Document,\u201d filed Aug. 11, 2003, the disclosure of which is incorporated by reference. Thus, physical keys can be printed or otherwise generated, wherein each physical key contains a collection identifier that identifies an access level. Different physical keys can provide different access levels for the same collection  or document . The physical key can then be used to initiate decryption of the referenced document  or collection , and can enforce the specified level of access to the decrypted document  or collection . For add-only access, the physical key can permit encryption of newly added documents  without permitting decryption or reading of the document  or collection .","Referring now to , there is shown one possible approach for maintaining access level information. As shown in , such information can be kept in -access- file . -access- file  is located in directory , which is pointed to by collection identifiers C, D, and E. Directory  also includes subdirectories such as  (and others). Each subdirectory  in directory  includes a different version of collection .","Collection identifiers C, D, and E provide different levels of access to documents  of collection . Such an arrangement requires no duplication of data; specifically, the collection information and files are stored at the same location. Each new version of collection  is stored in a separate subdirectory  within directory  pointed to by collection identifiers C, D, and E. In the example shown, the file that stores access level information is referred to as \u201c-access-\u201d, although any filename or file format can be used. In one embodiment, this file is stored in the same directory  as the subdirectory  containing documents  and other files; in another embodiment it is stored subdirectory  (and\/or other subdirectories) itself.","In one embodiment, -access- file is stored at server , and is never transmitted or revealed in full. Rather, server  only transmits or communicates that portion of the -access- file that is relevant or needed for a particular access request; alternatively server  consults the -access- file and allows or denies the requested access accordingly. In one embodiment, server  provides an API allowing authorized individuals to selectively edit the -access- file or portions thereof.","Several collection identifiers, or DRIs, can point to the same subdirectory . As shown in , three unique collection identifiers C, D, and E point to the same subdirectory . -access- file  specifies access levels corresponding to identifiers C, D, and E. Directory  contains various files accessible according to the specified access levels. In one embodiment, -access- file  is an Extended Markup Language (XML) file specifying permitted operations on files in subdirectory . An example of an excerpt of an -access- file  is as follows:",{"@attributes":{"id":"p-0109","num":"0123"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<accesscontrol"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"identityhash=\u201cb44b689d57f0a37e7da6855feaa792bd\u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/602270e10ae23143483c5324ad10ae26\/\u201d"]},{"entry":[{},"rights=\u201caried\u201d>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c2\/TargetARep1.jpg\u201d rights=\u201cr\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/7f033ef5f460f9aed3483d77f74f377c\/\u201d rights=\u201cr\u201d"]},{"entry":[{},"\/>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/a1efc714aca292a3c7407961f44d6034\/\u201d rights=\u201c \u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<rect rights=\u201crf\u201d x=\u201c0\u201d y=\u201c0\u201d width=\u201c600\u201d"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"height=\u201c200\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<polygon rights=\u201ci\u201d points=\u201c200,0 350,0"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"350,600 200,600\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/7cd0b356d7cf69f7e8f2a7ecd0f4003d\/\u201d rights=\u201ci\u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<halfplanes rights=\u201crf\u201d lines=\u201c0,\u22121,200\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<!-- Can append only if y >= 200 -->"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/c9b7e5aa318b59acad4ca5e36463c2ac\/\u201d rights =\u201ci\u201d"]},{"entry":[{},">"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c*\/overview.jpg\u201d rights=\u201cr\u201d \/> <!-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"- Read access to overview image -->"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/4dbc87ae4854ce964b89275936e71306\/\u201d rights =\u201crf\u201d"]},{"entry":[{},">"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<map orig=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/c33c235bea8ce75309f722b37d82cbb2\/\u201d"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"147pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"new=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/6403cdd5dcde5cc3f6ed8efb25c2105b\/\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/access>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/accesscontrol>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"An example of an element in -access- file  that would provide full access is as follows:",{"@attributes":{"id":"p-0111","num":"0125"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/602270e10ae23143483c5324ad10ae26\/\u201d"]},{"entry":[{},"rights=\u201careid\u201d \/>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The \u201crights\u201d parameter includes letters a, r, e, i, d, indicating admin, read, edit, insert, and delete rights.","An example of an element in -access- file  that would provide read-only access is as follows:",{"@attributes":{"id":"p-0114","num":"0128"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/7f033ef5f460f9aed3483d77f74f377c\/\u201d right s=\u201crf\u201d"]},{"entry":[{},"\/>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The \u201crights\u201d parameter includes the letter r indicating read rights. The \u201crights\u201d parameter further indicates (via the f) that the specified access rights should filter down into subcollections and other items contained within the collection. Subcollection rights are masked by the main collection's access rights; thus if the main collection's access rights specify read-only access, the subcollection cannot be given edit, insert, or delete rights. Thus, individual documents (or subcollections) within a collection are given the more restrictive of 1) a particular access level for that document or subcollection; and 2) an access level for the containing collection. Determination of an access level can be performed on-the-fly, in response to a user's attempt to access the document or subcollection, as described in more detail below.","In general, only an individual with \u201cadmin\u201d access can change -access- file . Changes are made through a server API, so that the server does not need to reveal the entire -access- file, and security is maintained. By default, new layers are given the same access permissions as previous layers.","-access- file  can specify access levels for an entire collection, or for subcollections, or for individual files or regions within a collection. In general, an access level associated with a more specific DRI takes precedence over an access level associated with a less specific DRI. For example, if a \u201cread\u201d access level is specified for a collection DRI, and an \u201cedit\/delete\u201d access level is specified for a DRI of an individual file within that collection, the \u201cedit\/delete\u201d access level takes precedence, so the user can edit or delete the file. Similarly, if no access level is specified for a collection, but \u201cread\u201d access is specified for a region within the collection, the user can read documents within that region. However, if the \u201cfilter\u201d attribute is set, the access level for a subcollection or individual item may be limited by the access level for the containing collection.","As discussed above, in general server  never reveals or transmits the entire -access- file; rather, only the <accesscontrol> element and <access> elements related to a specific collection or request are given out. For example, consider the following excerpt of an -access- file:",{"@attributes":{"id":"p-0119","num":"0133"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<accesscontrol"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"identityhash=\u201cb44b689d57f0a37e7da6855feaa792bd\u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/602270e10ae23143483c5324ad10ae26\/\u201d"]},{"entry":[{},"rights=\u201caried\u201d>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c2\/TargetARep1.jpg\u201d rights=\u201cr\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/7f033ef5f460f9aed3483d77f74f377c\/\u201d rights=\u201crx\u201d"]},{"entry":[{},"\/>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/a1efc714aca292a3c7407961f44d6034\/\u201d rights=\u201c \u201d>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<rect rights=\u201cr\u201d x=\u201c0\u201d y=\u201c0\u201d width=\u201c600\u201d"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"height=\u201c200\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<polygon rights=\u201ci\u201d points=\u201c200,0 350,0"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"350,600 200,600\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/7cd0b356d7cf69f7e8f2a7ecd0f4003d\/\u201d rights=\u201ci\u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<halfplanes rights=\u201cr\u201d lines=\u201c0,\u22121,200\u201d \/> <!-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"- Can append only if y >= 200 -->"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},"<access dri=\u201c\/-msg-"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/c9b7e5aa318b59acad4ca5e36463c2ac\/\u201d rights =\u201ci\u201d"]},{"entry":[{},">"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<overview dri=\u201c2\/overview.jpg\u201d rights=\u201cr\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<!-- Read access to overview image -->"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/access>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/accesscontrol>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"When a client attempts to access the collection using a DRI such as","\/-msg-\/touchverse\/c9b7e5aa318b59acad4ca5e36463c2ac","server  returns the following portions of the -access- file:",{"@attributes":{"id":"p-0123","num":"0137"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<?xml version=\u201c1.0\u201d encoding=\u201cUTF-8\u201d?>"]},{"entry":[{},"<accesscontrol"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"identityhash=\u201cb44b689d57f0a37e7da6855feaa792bd\u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/c9b7e5aa318b59acad4ca5e36463c2ac\/\u201d rights =\u201ci\u201d"]},{"entry":[{},">"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"56pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"161pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<overview dri=\u201c2\/overview.jpg\u201d rights=\u201cr\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<\/access>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/accesscontrol>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The client now has the identifier for the collection, as well as information specifying the particular documents  or other objects it is permitted to access. <access> elements for other collection identifiers are not given out, since they are not needed by the client.","Avoiding transmission of the entire -access- file improves the overall security of the system. Some systems which have multiple servers are set up so that each server knows about all the other servers. If the system is configured so that the servers \u201ctrust\u201d one another, they can share sensitive information. However, such configurations are vulnerable to security exploits where a computer masquerades as a trusted server or a computer listens in on communications between trusted servers and captures the sensitive information exchanged between those servers.","The technique described herein avoids this problem. By configuring servers so that they minimize the exchange of sensitive information, such security exploits can be minimized or eliminated. A policy of never giving out the -access- file serves this function. Since, in one embodiment, server  does not give out the entire -access- file, the present invention can be securely implemented even when it is used in conjunction with untrusted servers.","Individual files, subcollections, or other elements can be given different access levels than their containing collections. In one embodiment, <access> elements in -access- file  are arranged in a tree structure that maps to the directory structure of the collection, thus providing a representation of the collection hierarchy. Wildcards (*) in DRI paths indicate that a particular access level applies to a file in multiple directories. The following example of an excerpt of an -access- file  illustrates these concepts:",{"@attributes":{"id":"p-0128","num":"0142"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/touchverse\/602270e10ae23143483c5324ad10ae26\/\u201d"]},{"entry":[{},"rights=\u201caried\u201d>"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c*\/TargetARep1.jpg\u201d rights=\u201cr\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The above excerpt sets the rights for the directory at \u201caried\u201d (specifying admin, read, insert, edit, and delete access rights), and sets the access rights for the TargetARep1.jpg file at \u201cr\u201d (specifying read access rights).","Some files in a collection contain the DRI of that collection . For instance, in one embodiment, both the TVM file (which describes all of the documents  in the collection ) and the SVG file (which provides the graphical layout of the collection ) may contain references to the DRI as well as to DRIs of other collections .","In general, DRIs are modified before providing the files to a client. Specifically, each TVM file contains the DRI of the collection  that it represents. This DRI corresponds to the DRI that was used to access the TVM file. When collection server  provides the TVM file to a client, the DRI contained in the TVM file is rewritten to be that of the DRI that the client already knows.","If the \u201cf\u201d attribute is active, and the TVM file contains a reference to a collection  that has more permissive access permissions than the containing collection , a new collection  is created with restricted permissions, and the TVM file is rewritten to reflect the restricted collection  instead of the permissive collection .","When a new restricted access DRI is created, -access- file  includes <map> elements to map the original DRIs to the new restricted access DRIs so that the correct level of access is provided.","In one embodiment, a single collection  can have multiple permission regions , specified for example according to region within collection overview . Referring now to , there is shown an example of a collection  having multiple permission regions. Collection overview  is divided into two permission regions A, B defined by reference to a horizontal line  at a coordinate position of y=200. An item whose top-left corner is located in region A above line  carries read-only permissions, while an item whose top-left corner is located in region B below line  carries insert-only permissions. Thus, in the example shown, documents N, P, and Q would carry read-only permissions, while document R would not be readable since it lies within the insert-only region B. (In one embodiment, document R would not be shown on coversheet , since that document R is not readable by the possessor of that coversheet .) Of course, these access limitations would apply only to a user using a DRI associated with the particular -access- file that specifies such limitations; a user using another DRI might have a different set of access permissions.","An example of an <access> element for specifying access levels as shown in the example of  is as follows:",{"@attributes":{"id":"p-0136","num":"0150"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/a1efc714aca292a3c7407961f44d6034\/\u201d rights=\u201c \u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<rect rights=\u201crf\u201d x=\u201c0\u201d y=\u201c0\u201d width=\u201c600\u201d"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"height=\u201c200\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<polygon rights=\u201ci\u201d points=\u201c200,0 350,0 350,600"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"200,600\u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"Another example of an <access> element specifying a similar configuration of access levels is as follows:",{"@attributes":{"id":"p-0138","num":"0152"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<access dri=\u201c\/-msg-"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"\/touchverse\/7cd0b356d7cf69f7e8f2a7ecd0f4003d\/\u201d rights=\u201ci\u201d >"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"175pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":{"entry":[{},"<halfplanes rights=\u201cr\u201d lines=\u201c0,\u22121,200 \u201d \/>"]}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"189pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"<\/access>"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}}]}}},"The <halfplanes> element specifies a half-space within the two-dimensional region of the overview image, using a coordinate system wherein, for example, the (0,0) point is in the upper left corner of the overview image. Referring again to , the SVG file that specifies the layout of overview , a width and height is specified. For purposes of illustration, the width and height are 600 units and 350 units, respectively. The <halfplanes> element specifies a dividing line  at y=200 using an equation Ax+By+C (in this example, A=0, B=\u22121, and C=200.) Any (x,y) pair which, when plugged into this equation, returns a value which is less than 0 is considered out of the halfplane. For instance, (20, 210) produces a value of \u221210 and is not in the halfplane specified by the <halfplanes> element, but (0, 0) returns a value of 200 and is therefore within the halfplane. Thus, it can be determined whether any particular object is within the region defined by the <halfplanes> element.","Referring now to , there is shown a flowchart of a method of determining an access level according to region. The bounding box for a document  or other target is determined ; in one embodiment, this may be the smallest rectangle that completely encloses the document  representation in overview . The variable \u201cpoint\u201d is defined  as the top-left corner of the bounding box.","In steps  through , access regions  are consulted in turn, to determine which one contains point. An access region  is consulted , and a determination is made  as to whether point lies within region . If so, the defined region access permissions for region  are assigned to the target. If point does not lie within region , and more regions  exist , the next access region  is consulted . If point does not lie within region , and no more regions  exist , permissions are assigned  based on a default for collection .","As discussed above, the \u2018f\u2019 or \u201cfilter\u201d access parameter prevents documents or sub-collections within a main collection from having access rights that are higher than those of the main collection. For example, if a main collection has access rights of read-only, documents or sub-collections within that collection could have full permissions only if the filter parameter were turned off, or if a higher access permission is specified for a particular document or sub-collection in the -access- file.","When the filter parameter is specified, sub-collection and document access rights are masked by the rights associated with the main (containing) collection). Thus, the access rights for the sub-collection or document would be the more restrictive of a) the access rights specified for that sub-collection or document; and b) the access rights of the main (containing) collection.","In one embodiment, a new version of the sub-collection or document is created on-the-fly when needed. Thus, for example, if a main collection specifies read-only access, and the filter parameter is specified, the system of the present invention would create a read-only version for any document or sub-collection within that main collection that does not already have a read-only version. In one embodiment, such a version is created only in response to an attempt to access the document or sub-collection. The DRI for the new version is then provided by server  so that a client can access it at the appropriate access level.","For example, suppose a coversheet  is presented that indicates read-only access for collection A. If collection A contains subcollection B, and the available DRI for subcollection B points to a collection with unrestricted access, a new read-only pointer for subcollection B is generated. Server  adds a <map> element to the -access- file for collection A, indicating that read-only access to subcollection B is available via the new DRI. Then, server  responds to the request for collection A by providing the read-only pointer to subcollection B. TVM and SVG files are rewritten as needed to point to the new DRI.","In one embodiment, a user can create a more restricted version of a collection only by copying the collection and assigning the more restricted access level to the copy. In another embodiment, the user can create a new DRI that corresponds to the original collection but is more restrictive in the access it allows.","In one embodiment, an identityhash attribute is provided as a unique collection identifier available to all clients, regardless of their access privileges and regardless of the DRI they use to access the collection. The identityhash attribute allows clients to determine if two different DRI's point to the same collection. Clients are thereby able to delete redundant DRI's, particularly when more than one DRI points to the same collection (either with the same or with different access levels). In addition, the identityhash attribute allows remote servers to build an -access- file without requiring them to have access to the entire -access- file.","When a client accesses a collection using a DRI, the client is given or can request the identityhash value of that collection from the server. If the identityhash matches that of another collection with a different DRI that the client is already aware of, then the client can determine that both DRIs point to the same collection. This is especially useful for remote servers. If several clients request collections through a remote server, the server can determine which DRIs point to the same collections. It is convenient and efficient for the server to merge all DRIs that point to a single collection. Such a technique also saves space on the server. In order to merge multiple DRIs into a single collection, the server creates a link from all DRIs to the one directory that contains the files and subdirectories in the collection, merges the -access- file entries, and creates <map> elements in the -access- file.","Referring now to , there is shown a flowchart depicting a method for creating limited access coversheet according to one embodiment. The method is described in the context of granting levels of access to collections  of documents  via paper coversheets . One skilled in the art will recognize many variations are possible in light of this description without departing from the principles of this invention. In particular, the various steps depicted in  can be performed in any order, and the invention is not limited to the particular order depicted.","MFP  creates  a new collection  or accesses an existing one. In response to a user's request, MFP  obtains  a DRI corresponding to each distinct access level. For example, if the user requests a coversheet  that allows add-only access and a second coversheet  that allows read-only access, MFP  would obtain a DRI for each of the two access levels. In one embodiment, each DRI is obtained from collection server ; alternatively, DRIs may be retrieved from local storage based on previously obtained data. Preferably, DRIs cannot be derived from one another. Thus, an individual who has been granted one level of access, and is therefore in possession of a DRI for that access level, cannot easily determine or guess the DRI for another access level.","In one embodiment, step  includes the following substeps:\n\n","Then, for each requested access level, MFP  outputs  a coversheet  containing the DRI corresponding to the access level; alternatively, MFP  can email the DRI or otherwise output or transmit it without necessarily generating a coversheet . In one embodiment, MFP  is configured to generate certain types of coversheet  by default. For example, if an add-only coversheet  is requested and no other coversheet  is requested, MFP  may, by default, generate a full-access coversheet as well. This would prevent a situation wherein the add-only DRI is the only DRI output, and no DRI to a version that permits reading is known, so that nobody would have permission to read the added documents. In another embodiment, MFP  may prompt the user to confirm a choice that would potentially lead to such a problem. Such confirmation may be obtained, for example, by presenting an \u201cAre you sure?\u201d dialog box on control panel  or other user interface.","Once a limited limited-access coversheet is created, it can be used to access collections. Referring now to , there is shown a flowchart depicting a method for using limited-access coversheets  to access collections . One skilled in the art will recognize that the various steps depicted in  can be performed in a sequence other than that depicted, and that the invention is not limited to the particular order shown in the Figure.","MFP  scans  coversheet  (or otherwise receives an image representing a collection) and reads  the DRI. The DRI identifies a version of a collection  with a given level of access. MFP  uses the DRI to retrieve  the version of the collection  identified by the DRI from collection server . In response to receiving  a user's request to perform an action with respect to the collection , the MFP  determines  whether the action is permitted by either: a) transmitting the request to collection server  so that server  can determine whether the action is permitted; or b) using the access metadata from collection server  to determine whether the action is permitted ; or c) performing some other operation for determining whether the action is permitted given the level of access permitted by the DRI. If the action is permitted, MFP  executes  the action on the documents . If the action is not permitted, MFP  denies  the action, and in one embodiment indicates the denial to the user via control panel  or other output device.","In one embodiment, allowance or denial of the action can take place at server  rather than (or in addition to) taking place at MFP . Thus, even when MFP  fails to block an unauthorized action from taking place, server  can deny the action if it is determined that the level of access specified by the DRI does not permit the requested action. For example, if MFP  accepts a newly scanned document  for addition to collection , and server  determines that the DRI presented only permits read-only access, server  denies the addition, and transmits a message to MFP  so that MFP  can communicate the denial to the user.","In one embodiment, the techniques described herein are combined with techniques for providing limited permission overview regions as described in related U.S. patent application Ser. No. 10\/404,916 titled \u201cMethod and Apparatus for Composing Multimedia Documents,\u201d filed Mar. 31, 2003, the disclosure of which is incorporated by reference. For example, the related application provides additional description and Figures depicting collection coversheets having various permission levels. One skilled in the art will recognize that the above-described techniques can also be combined with other techniques set forth elsewhere in this disclosure and\/or in related disclosures that are incorporated by reference.","Additional Functionality","In some embodiments, the present invention is able to provide access levels that change or expire upon the occurrence of some predetermined event. The following are examples of such functionality. Any of these features may be included alone or in combinations with one another and\/or with other functionality described above.","Modifying Access Levels. In one embodiment, authorized persons can modify a level of access of a collection . Such authorized persons may include, for example, document administrators. In one embodiment, anyone who possesses a coversheet  that specifies \u201cadmin\u201d access can perform such operations, including modifying access levels for others. In another embodiment, one or more specific individuals have this capability; known techniques of identity verification can be used to determine whether to grant \u201cadmin\u201d access to an individual. When the access level of a collection  is modified, collection server  modifies the access permissions information for collection  accordingly, and\/or assigns a distinct DRI to a version of the collection  that provides the specified access level.","Expiring Coversheets. In one embodiment, when a collection coversheet  is created, the user can specify that coversheet  will expire after a predetermined period of time, or after it has been used a predetermined number of times. Such a feature may be especially useful in applications where it is desirable to strictly control the number of copies of a document that are in circulation. After the expiry event takes place, server  denies access to the document  or collection  referenced by the coversheet . In another embodiment, after the expiry event takes place (or upon occurrence of some other trigger event that has been previously specified), the access level associated with coversheet  changes to a more (or less) restrictive access level.","For example, a DRI on a coversheet  can initially allow full access, but upon occurrence of an expiry event or other trigger event, the \u201c-access-\u201d file can be changed so that the same DRI allows only read-only access. Examples of such trigger events include: review by a supervisor; suspected security breach; submission or filing; transmission of the document to an outside entity; or a deadline for changes. In one embodiment, MFP  tracks each access of collection , and further tracks which user is accessing the document. To do so, the MFP  may also require that a user of a coversheet  identify him- or herself in some manner, for example by password, name, biometric scan, or the like, in order to use the coversheet  to access the collection. The initial user that created collection , along with possibly other users possessing coversheets that allow \u201cadmin\u201d-level access, can specify whether such identification is required before access is granted. After the trigger event has occurred, MFP  may optionally notify (for example via e-mail) known possessors of coversheets  that their access levels have been changed or have expired.","In one embodiment, the relevant variables for the event criteria are tracked in the metadata associated with the collection  or stored in a log. The log can be present in MFP , stored in collection server , or stored anywhere else that is accessible to the system. Maximum reliability and security can be achieved by storing the log in server  rather than in MFP  or in some unsecured location. In addition, the relevant event criteria may be printed on the coversheet. For example, coversheets  may be appropriately time- and date-stamped with their expiration dates using a machine-readable format, or human-readable format, or both. These date stamps can be compared with the present time when access is attempted, to determine whether coversheet  has expired. If access to collection  through coversheet  has not expired, MFP  allows access. As another example, a coversheet may expire after a predefined number of copies have been made at MFP .","Identification Authentication. In one embodiment, a user presenting a coversheet  is required to verify his or her identity before being permitted to access the collection . The user that created the coversheet  may specify that such authentication is required with respect to a particular coversheet . Identity authentication can be performed by password entry, biometric scan, or other techniques that are well known in the art. In addition, such functionality may be combined with the secure decryption key techniques described in related U.S. patent application Ser. No. 10\/639,282 titled \u201cPhysical Key for Accessing a Securely Stored Digital Document,\u201d filed Aug. 11, 2003, the disclosure of which is incorporated by reference.","Additional Prerequisites. In one embodiment, MFP  requires certain conditions to be satisfied before it outputs a collection  or document , even when coversheet  is presented. As discussed above, in one embodiment the user that created the coversheet  may specify that recipient authentication be required before collection  can be output or accessed. The present invention can also be combined with watermarking techniques, as described for example in the above-reference related patent applications, so that printed output of MFP  is traceable to a particular recipient. Alternatively, a different DRI can be used for each printed coversheet , so that the coversheet  is directly traceable without the use of watermarks.","Blocked Access. From time to time, it may be desirable to block access to a collection , either permanently, or temporarily (such as while updating a collection ). In one embodiment, an administrator (i.e. a user in possession of a coversheet  that includes a DRI permitting admin access) can request that access to one or more collections  be blocked, and can specify the time period during which it will be blocked. While access is blocked, server  refuses to honor any coversheets  that have been issued for collection . In one embodiment, control panel  (or other output device) can provide an explanation of the block to the user attempting access, and can optionally provide additional information such as an estimated time when the block will be lifted.","Customized Level of Access by Document. In one embodiment, in addition to providing the ability to specify an access level for a collection , the invention allows a user to specify individual access levels on a document-by-document basis within the collection . If the user selects this option, MFP  presents, on control panel  or other display device, a list of documents  within the collection  so that the user can individually specify the level of access for each document . Alternatively, the user can indicate on coversheet  various access levels for different documents  within collection . MFP  can then scan coversheet  and send a request to server  to apply the indicated access restrictions. The user can also specify the \u201cfilter\u201d option, as described above, whereby a collection's access level applied is recursively applied to subcollections within the collection.","Denying Access Beyond Level Specified. In one embodiment, alternative methods and mechanisms exist for accessing collections  and documents , so that coversheets  are not the only method of obtaining access. Thus, if a coversheet  is lost or destroyed, or if the DRI is lost or unreadable, it may still be possible to access the collection  associated with the coversheet  on an emergency basis. For example, a user may browse for a collection  using control panel , or may use conventional techniques for navigating to and selecting collections  and documents .","If security is desired, such alternative ways of gaining access to a collection  can be restricted to authorized administrators, system operators, and the like. In another embodiment, to maximize security, such alternative ways are eliminated, so that coversheet  is the only way to access a collection  or document . Additional security can be provided by combining aspects of this invention with inventions described in related U.S. patent application Ser. No. 10\/639,282 titled \u201cPhysical Key for Accessing a Securely Stored Digital Document,\u201d filed Aug. 11, 2003, the disclosure of which is incorporated by reference.","The present invention has been described in connection with a specific implementation of a typical embodiment thereof. It will be understood by those skilled in the relevant art that many changes can be made without departing from the true spirit and scope of the present invention. Therefore, it is intended by the appended claims to cover all such changes and modifications that come within the true spirit and scope of this invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings illustrate several embodiments of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0021","num":"0031"},"figref":"FIG. 1A"},{"@attributes":{"id":"p-0022","num":"0032"},"figref":"FIG. 1B"},{"@attributes":{"id":"p-0023","num":"0033"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0024","num":"0034"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0025","num":"0035"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0026","num":"0036"},"figref":"FIG. 5A"},{"@attributes":{"id":"p-0027","num":"0037"},"figref":"FIG. 5B"},{"@attributes":{"id":"p-0028","num":"0038"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0029","num":"0039"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0030","num":"0040"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0031","num":"0041"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0032","num":"0042"},"figref":"FIG. 10A"},{"@attributes":{"id":"p-0033","num":"0043"},"figref":"FIG. 10B"},{"@attributes":{"id":"p-0034","num":"0044"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0035","num":"0045"},"figref":"FIG. 12"}]},"DETDESC":[{},{}]}
