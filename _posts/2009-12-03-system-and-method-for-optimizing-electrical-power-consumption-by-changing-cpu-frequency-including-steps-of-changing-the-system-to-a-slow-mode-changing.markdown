---
title: System and method for optimizing electrical power consumption by changing CPU frequency including steps of changing the system to a slow mode, changing a phase locked loop frequency register and changing the system to a normal mode
abstract: A system and a method for optimizing power in an electronic device are described. The system may be used to implement low power techniques to achieve maximum performance with low battery utilization. A processing load level monitor monitors load(s) on processors. Processor frequencies are updated through the driver until the load is close to 100%, which means that the core frequency is changed to the load processor around 100% at the minimum possible frequency.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08589707&OS=08589707&RS=08589707
owner: STMicroelectronics International N.V.
number: 08589707
owner_city: Amsterdam
owner_country: NL
publication_date: 20091203
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["RELATED APPLICATION","FIELD OF THE INVENTION","BACKGROUND","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS"],"p":["The present application claims priority of India Provisional Patent Application No. 2772\/Del\/2008 filed Dec. 5, 2008, which is incorporated herein in its entirety by this reference.","The present disclosure relates to optimization of electrical power and more specifically to a device for optimizing consumption of electrical power to procure maximum performance with the same power utilization.","Power management is an essential element for battery operated electronic devices. With the rising performance expectations on multimedia devices, it is important to implement low power techniques to have maximum performance with low battery utilization. Even though multiple parallel execution units increase the performance of the processor, power is wasted when some of the processing units are idle during various time intervals.","Various techniques have been implemented to optimize power. Since the power consumption of the processor is proportional to the frequency, reduction of the frequency of the system clock reduces the power consumption of the microprocessor.","There are some other means to implement this type of power optimization by increasing or decreasing voltage and frequency. But, it is done using dedicated hardware which can monitor and change voltage\/frequency of a single processor at one time. This adds the extra cost of a dedicated hardware chipset, which is designed for this purpose. High performance has increased power consumption. What is desired is an embedded application to find the best trade-off between energy efficiency and performance by scaling CPU frequency and voltage levels.","A system according to an embodiment of the present invention includes a device for optimizing consumption of electrical power. The system preferably includes a processor block, a processing load level monitor coupled to the processor block, and an operating frequency and\/or voltage adjustor coupled to the output of the load level monitor and to the processor block. In a method of the present invention, consumption of electrical power is optimized by monitoring processing load levels and adjusting operating frequency and\/or voltage. Preferably, the operating voltage and\/or frequency is adjusted until the load reaches an optimum level, and the frequency is updated based on the system usage level. The instant invention may be operative to manage multiple cores at no extra cost.","The embodiments of the present disclosure will be described in detail with reference to the accompanying drawings. However, the present disclosure is not limited to the embodiments and the embodiments described herein in the art of the present disclosure. The disclosure is described with reference to specific circuits, block diagrams, signals, etc. simply to provide a more thorough understanding of the disclosure. The detailed description of the disclosure is as follows:","The present disclosure teaches a system comprising a device for optimizing consumption of electrical power. Said system includes a processor block, a processing load level monitor coupled to the processor block and an operating frequency and\/or voltage adjustor coupled to the output of said load level monitor and the processor block. The processing load level monitor monitors and calculates the load of the processors and the operating frequency and\/or voltage adjustor updates the voltage and\/or frequency of said processors till the load is reached to the optimum level, said frequency is updated based on the system usage level.","The present disclosure also teaches a method for optimizing consumption of electrical power. The method steps include monitoring processing load level and adjusting operating frequency and\/or voltage.","The present disclosure further teaches a device for optimizing consumption of electrical power. Said system includes a processor block, a processing load level monitor coupled to the processor block and an operating frequency and\/or voltage adjustor coupled to the output of said load level monitor and the processor block. The processing load level monitor monitors and calculates the load of the processors and the operating frequency and\/or voltage adjustor updates the voltage and\/or frequency of said processors till the load reaches an optimum level. Said frequency is updated based on the system usage level.","The present disclosure also teaches a multimedia system comprising a device for optimizing consumption of electrical power. Said multimedia system includes a processor block, a processing load level monitor coupled to the processor block and an operating frequency and\/or voltage adjustor coupled to the output of said load level monitor and the processor block. Processing load level monitor monitors and calculates the load of the processors and the operating frequency and\/or voltage adjustor updates the voltage and\/or frequency of said processors till the load is reached at an optimum level, and said frequency is updated based on the system usage level.",{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 1","b":["101","102","103"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 2","b":["204","201","203","201","205","202","203","204","205"]},"An application sends a request through the frequency and\/or voltage adjustor to update the operating frequency and voltage level (if required). The processing load level monitor changes the frequency based on the system usage level, is not based on the user application (e.g., VOIP call\/video playback, etc.), and is expandable to any number of processors in the system on chip (SoC).","System power consumption in a digital based system is described as:\n\nPower=\n\nwhere C is the capacitance being switched per clock cycle, V is voltage, and F is the processor frequency (cycles per second).\n","There will be a relative effect in power consumption level with respect to the change in the voltage or frequency.","Frequency reduction brings down the number of instructions a processor can issue in a given amount of time, hence performance is reduced. Therefore, it is generally used when the workload is low. In contrary, performance is increased by raising the processor's frequency beyond the manufacturer's design specifications.","Table 1 which follows shows different frequencies and applications thereof.",{"@attributes":{"id":"p-0030","num":"0029"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"1"},"colspec":{"@attributes":{"colname":"1","colwidth":"280pt","align":"center"}},"thead":{"row":{"entry":"TABLE 1"}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":{"@attributes":{"namest":"1","nameend":"1","align":"center","rowsep":"1"}}},{"entry":"Frequencies and Applications"}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"77pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["ARM\/CPU","Bus\/DSP",{},{},{}]},{"entry":["Frequencies","Frequencies","Voltage Supply"]},{"entry":["in MHz","in MHz","for the APE","Description","Application"]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"1","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"char","char":"."}},{"@attributes":{"colname":"4","colwidth":"70pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"77pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["66.0","66.0","1.20","For optimum power","MP3 playback with"]},{"entry":["81.6","81.6","1.20","and performance","display off."]},{"entry":["100.8","100.8","1.20","requirements when"]},{"entry":["201.6","132.0","1.20","workload is low."]},{"entry":["264.0","132.0","1.20","Normal mode","Normal mode"]},{"entry":["307.2","153.6","1.34","Where slightly higher","To handle complex"]},{"entry":["326.4","163.2","1.34","performance on CPU","video types like"]},{"entry":[{},{},{},"& High performance","H.264, VC1, etc."]},{"entry":[{},{},{},"on DSP are required."]},{"entry":["393.6","131.2","1.34","Where CPU needs","Video playback with"]},{"entry":[{},{},{},"High performance &","size > VGA (more data"]},{"entry":[{},{},{},"normal DSP","processing on CPU)"]},{"entry":["489.0","163","1.5","Where CPU as well","Very high bitrate"]},{"entry":[{},{},{},"as DSP needs Very","data processing for"]},{"entry":[{},{},{},"High performance","GPS\/3D Games, etc."]},{"entry":{"@attributes":{"namest":"1","nameend":"5","align":"center","rowsep":"1"}}}]}}]}}},"Broadly speaking there are two fundamental methods provided by an Operating System to measure CPU Usage. The facilities provided by Windows CE\/Windows Mobile for measuring CPU load are described below. Application Programming Interface may vary from one Operating System (OS) to another, but the method will be same.","Thread CPU usage is helpful to measure CPU usage of a particular thread. GetThreadTimes in Windows embedded obtains timing information about a specified thread. Thread CPU usage can be used in the following two ways:\n\n","Each OS provides a means to know the CPU idle time. This can be used to calculate the overall CPU Load. Windows Embedded provides GetIdleTime, GetTickCount to help measure the CPU idle time during a particular period. For Multimedia processors like Audio\/Video DSPs, firmware support need to be added with custom APIs, which will provide the DSP load information on demand. If these types of APIs are not available from OS then similar APIs are needed to be developed by calculating the MIPS (Million instructions per second) and MCPS (Million clocks per second).","The following steps need to be carried out dynamically in order to scale the system from one frequency to other.\n\n","Peripheral Clock Status on various use cases are shown in Table 2. Comparison between FULL and IDLE processor is presented. When the system is running at Normal Frequency difference is found in the Microprocessor Core current. Same benefit can be achieved when clocks are gated after scaling to a lower frequency.",{"@attributes":{"id":"p-0036","num":"0040"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"center"}}],"thead":{"row":{"entry":[{},"TABLE 2"]}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]},{"entry":[{},"USE CASES"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"10"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"7","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"8","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"9","colwidth":"21pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"DMA0\/1,",{},{},{},{},{},"MSP\/USB\/",{},{}]},{"entry":[{},"SDMC\/",{},{},{},{},{},"UART\/",{},"I2C0\/"]},{"entry":[{},"SMC","Video","Audio","CLCD","GPIO","MSP1","SSP\/ . . .","SDIO","I2C1"]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"252pt","align":"center"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Peripheral Clock"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"1","align":"center","rowsep":"1"}}]}]}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"10"},"colspec":[{"@attributes":{"colname":"1","colwidth":"49pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"4","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"5","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"6","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"7","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"8","colwidth":"42pt","align":"left"}},{"@attributes":{"colname":"9","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"10","colwidth":"21pt","align":"left"}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Full","On","On","On","On","On","On","On","On","On"]},{"entry":["Audio","On","Off","On","Off","On","On","Off","On","On"]},{"entry":"Playback"},{"entry":["Video","On","On","On","On","On","On","Off","On","On"]},{"entry":"Playback"},{"entry":"(Decoding &"},{"entry":"Rendering)"},{"entry":["Idle","On","Off","Off","On","On","Off","Off","Off","Off"]},{"entry":["Idle\/LCD Off","On","Off","Off","Off","On","Off","Off","Off","Off"]},{"entry":{"@attributes":{"namest":"1","nameend":"10","align":"center","rowsep":"1"}}}]}}]}}},"Embodiments of the method for optimizing consumption of electrical power are described in  and . The methods are illustrated as a collection of blocks in a logical flow graph, which represents a sequence of operations that can be implemented in hardware, software, or a combination thereof. The order in which the process is described is not intended to be construed as a limitation, and any number of the described blocks can be combined in any order to implement the process, or an alternate process.",{"@attributes":{"id":"p-0038","num":"0042"},"figref":"FIG. 3","b":["301","302"]},{"@attributes":{"id":"p-0039","num":"0043"},"figref":"FIG. 4","b":["401","402","403","404"]},"a. Prepare the system to execute in sync with CLCDC vsync","b. Preparation of Code to run from Cache\/ESRAM","c. Disable MMU and put SDRAM in self refresh mode.","d. Change the voltage (if required)","e. Prepare the system movement","f. Set to Normal mode and wait for Normal to take place","g. Configure Memory controller (SDMC) timing values","h. Enable MMU and get SDRAM out off self refresh","In step  drivers are resumed which has been suspended\/frozen.",{"@attributes":{"id":"p-0049","num":"0053"},"figref":"FIG. 5","b":["500","501"]},{"@attributes":{"id":"p-0050","num":"0054"},"figref":["FIG. 6","FIG. 4","FIG. 4"],"b":["601","1","601","2","601","602","603","604","3","5","605","4"],"ul":{"@attributes":{"id":"ul0005","list-style":"none"},"li":{"@attributes":{"id":"ul0005-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0006","list-style":"none"},"li":["1. Prepare the system to execute in sync with CLCDC vsync","2. Preparation of Code to run from Cache\n        \n        ","3. Put SDRAM in self refresh\n        \n        ","4. Change voltage (Range mentioned in the hardware specification based on the frequency)\n        \n        ","5. Change Frequency (Normal->Slow->Overdrive)","a. Go in SLOW mode","b. Change the PLL frequency register","c. Go in NORMAL mode (and wait for NORMAL mode)","6. Change SDMC configuration to execute in changed frequency","a. Program the new Memory controller (SDMC) timing values.","7. Get SDRAM out off self refresh\n        \n        "]}}}},{"@attributes":{"id":"p-0051","num":"0077"},"figref":"FIG. 7","b":["701","702","703","703","1","703","2","703","3","703","4","703","5","703","6","703","7"]},"The following factors are considered during all the transitions:\n\n",{"@attributes":{"id":"p-0053","num":"0083"},"figref":"FIG. 8","b":"1"},{"@attributes":{"id":"p-0054","num":"0084"},"figref":"FIG. 9"},"For more clarity, the following two examples are given:\n\n","Although the disclosure of the instant disclosure has been described in connection with the embodiment of the present disclosure illustrated in the accompanying drawings, it is not limited thereto. It will be apparent to those skilled in the art that various substitutions, modifications and changes may be made thereto without departing from the scope and spirit of the disclosure."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The aforementioned aspects and other features of the present disclosure will be explained in the following description, taken in conjunction with the accompanying drawings, wherein:",{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 6","FIG. 2"]},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 9"}]},"DETDESC":[{},{}]}
