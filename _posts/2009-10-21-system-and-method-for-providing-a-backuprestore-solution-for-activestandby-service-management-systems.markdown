---
title: System and method for providing a backup-restore solution for active-standby service management systems
abstract: The preferred embodiments described herein include a system and method for providing a backup-restore solution for active-standby service management systems. In one embodiment, a telecommunication system is disclosed having first and second service management systems (SMS), a storage device shared by the first and second SMSs and circuitry operative to provide backup/restore functionality. This provides system redundancy in that the second SMS can perform the same functions as the first SMS in the event that the first SMS is unavailable due to, for example, system failures, a scheduled maintenance, or an upgrade process. Other embodiments are provided, and each of the embodiments described herein can be used alone or in combination with one another.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08045686&OS=08045686&RS=08045686
owner: AT&T Intellectual Property I, LP
number: 08045686
owner_city: Atlanta
owner_country: US
publication_date: 20091021
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["PRIORITY CLAIM","TECHNICAL FIELD","BACKGROUND","DETAILED DESCRIPTION OF THE PRESENTLY PREFERRED EMBODIMENTS"],"p":["This patent document is a continuation of U.S. patent application Ser. No. 10\/961,502, now U.S. Pat. No. 7,627,099, filed on Oct. 8, 2004, titled \u201cSYSTEM AND METHOD FOR PROVIDING A BACKUP-RESTORE SOLUTION FOR ACTIVE-STANDBY SERVICE MANAGEMENT SYSTEMS\u201d, the content of which is incorporated herein in its entirety for all purposes.","The present invention relates generally to telecommunication systems and in particular to data redundancy and fault tolerance in telecommunication systems.","A service management system (SMS) in an Advanced Intelligent Network (AIN) platform provides data for services logic needed for call traffic routing by a service control point (SCP). To provide data redundancy and fault tolerance in the AIN platform, the data that is provided by the SMS is often stored in several databases across identical but geographically dispersed SCPs. It is also desired to provide redundancy and fault tolerance to cover situations in which an SMS is unavailable due to, for example, system failures, a scheduled maintenance, or an upgrade process.","By way of introduction, the preferred embodiments described herein include a system and method for providing a backup-restore solution for active-standby service management systems. In one embodiment, a telecommunication system is disclosed having first and second service management systems (SMS), a storage device shared by the first and second SMSs and circuitry operative to provide backup\/restore functionality. This provides system redundancy in that the second SMS can perform the same functions as the first SMS in the event that the first SMS is unavailable due to, for example, system failures, a scheduled maintenance, or an upgrade process. Other embodiments are provided, and each of the embodiments described herein can be used alone or in combination with one another.","Turning now to the drawings,  is an illustration of a telecommunication environment of a preferred embodiment comprising an Advanced Intelligent Network (AIN) platform . The AIN platform  is a telephone network architecture that separates service logic from switching equipment, allowing new services to be added without having to redesign switches to support the new services. The AIN platform  is a distributed, fault-tolerant, middleware product that provides low-level system management capabilities for telecommunications products. The AIN platform  comprises various components, whose complex and effective communications deliver real-time call routing capabilities associated with intelligent networks.  shows, at a very high-level, the functionality of the AIN platform . As shown in , a customer provides a request for telecommunication services and features to a provisioner of the AIN platform , and the provisioner enters the services components and features into the AIN platform . Once the AIN platform  is provisioned, it provides the requested services and features when the customer makes a call.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":["FIG. 2","FIG. 2"],"b":["100","100","110","120","130","140","150","110","130","130","140","150","100"]},"By way of background, an SSP is a switch at a telephone company central office equipped with AIN software. When the SSP receives a number dialed by a caller, the SSP suspends call processing and launches a query to an SCP via an STP, which routes call traffic to the proper SCP. The SCP contains a database with service logic and handles queries sent from the SSP by consulting its database and returning information about how to handle the call to the SSP, which switches the call in accordance with the received information. In some cases, instead of sending a query to an SCP, a call can be handled more quickly by an Intelligent Peripheral (IP) attached to an SSP over a high-speed connection. For example, a customized voice announcement can be delivered by the IP in response to the dialed number, or a voice call can be analyzed and recognized.","Examples of services that can be provided by an SCP include, but are not limited to, toll-free services, account code services, and virtual private network (VPN) services. A toll-free service allows businesses to offer toll-free calls to their customers. When an SSP sends a toll-free call to an SCP, the toll-free service logic is accessed, which translates the dialed number by executing a call plan associated with the dialed number. The routing information is then returned to the SSP. An account code service validates caller identification and tracks usage of the service. This service is triggered when the caller makes an account code call. The SSP detects the trigger based upon the user's identity and sends the SCP a query message for treatment instructions. The SCP validates the account code and instructs the SSP to allow or disallow the call to proceed. A VPN service allows customers to implement features that are typically associated with dedicated network facilities and switches on a public switched telephone network. A customer may be a business with several geographically-dispersed locations, utilizing customized dial plans and customer profiles to define the specific features. Customers can access the VPN from a dedicated facility, dialing a 1-8xx remote number, or dialing a ten-digit public number from a switched location.","The service logic in the SCP database is provisioned by an SMS, which centrally manages data additions and updates to the SCP databases.  is a block diagram of the active and standby SMSs ,  of the AIN platform . These SMSs ,  each comprise web servers , \u2032, a services database , \u2032, a replication server , \u2032, backup\/restore circuitry , \u2032, and a shared storage device , \u2032. The services logic in the services database  is provisioned through a web-based GUI or batch processes, often referred to as Operation Support Systems (OSS). In operation, a customer provides a request for a telecommunication service (e.g., begin a toll-free service on a certain date and time), and the request is submitted to GUI and API (Application Programming Interface) web servers . The provisioning requests received by the web servers  are in HTML or XML format in this embodiment and are translated into calls-to-java servlets, which, in turn, enter services logic data into the SMS database . At the appropriate time, the replication server  replicates a relatively small subset of the data stored in the SMS database  to the SCP databases . The data replicated to the SCP databases  is preferably the minimal subset of data stored in the SMS database  that is sufficient for call traffic rerouting (i.e., the active services logic; the non-replicated data in the SMS database  can relate to historical and inactive services logic).","Each SCP  manages four identical Service Units (SU), and each SU hosts a services database  storing the services logic replicated by the replication server . This configuration provides eight identical databases across two identical but geographically dispersed SCPs . Each SCP load-balances the incoming queries across its four identical SU services databases. The data stored in each of the eight SU services databases is in sync with the other SU databases since the data is replicated from the same source\u2014the SMS services database . This provides data redundancy and fault tolerance across the SCP databases , thereby helping to guarantee uninterrupted service to customers.","Because the SMS  is the provisioning platform for the AIN platform  and the only source of data for services logic needed for call traffic routing, it is preferred that a redundancy system also be provided for the SMS . To provide SMS fault tolerance in this embodiment, two SMSs are used\u2014an active SMS  and a standby SMS . The active SMS  has a main subscriber database , which is copied to the SCPs , and the standby SMS  adapted to perform the same functions as the active SMS  in the event that the active SMS  is unavailable due to, for example, system failures, a scheduled maintenance, or an upgrade process. In other words, all provisioning and replication to the SCP SU databases  are carried out through the active SMS , and the standby SMS  provides a replica of the active SMS  and serves as a fail-over system to provide desired system redundancy. By incorporating two identical SMS systems\u2014one active and one standby\u2014high availability and maximum provisioning uptime is achieved. Provisioning occurs on the active SMS , and the standby SMS  is used as a fail-over system from the active SMS . In the case of active SMS  failure, the standby SMS  can be utilized so that provisioning can continue with minimum interruption. As such, it is preferred that the data stored on the standby SMS  be in-sync with the data stored on the active SMS  so a quick switchover can take place with no data loss.","In order to achieve highest availability for the SMS, it is preferred that (1) the switchover time from the active SMS  to the standby SMS  be minimized to provide a desired level of performance, (2) the switchover process be as automated as possible to avoid human errors typical to manual processes to provide a desired level of accuracy, and (3) the switchover process be scalable to accommodate growth in the SMS's database. Also, in order to minimize any outage during the switchover from the active SMS  to the standby SMS , the services database \u2032 on the standby SMS  should preferably be in-sync with the services database  on the active SMS .","To provide this level of redundancy in this preferred embodiment, both the active SMS  and the standby SMS  comprise backup\/restore circuitry , \u2032 and a shared storage device , \u2032 (see ). \u201cCircuitry\u201d can take any suitable form, including, but not limited to, a general-purpose processor executing computer-executable program code embodied on a computer-usable medium such as RAM or a disk, an application specific integrated circuit, and a programmable logic controller. It is important to note that any appropriate software and\/or hardware, analog or digital, now in existence or later developed, can be used, and that \u201ccircuitry\u201d can be a combination of hardware and software or hardware only. Also, it should be noted that \u201cfirst circuitry\u201d and \u201csecond circuitry,\u201d as used in the claims, can refer to two processors running two separate programs or a single processor running two separate programs or two parts of a single program. Similar usage applies to \u201cthird circuitry,\u201d \u201cfourth circuitry,\u201d etc.","Preferably, the backup\/restore circuitry , \u2032 residing on both the active and standby SMSs ,  comprises a set of backup\/restore computer programs. In this embodiment, the same set of backup\/restore programs is stored on both the active and standby SMSs , , but only the backup programs are active on the active SMS , and only the restore programs are active on the standby SMS . The non-active programs remain dormant until the active (standby) SMS becomes the standby (active) SMS, in which case the dormant programs become active, and the active programs become dormant. It is preferred that the backup of the active SMS's database  be stored in the shared storage device \u2032 in the standby SMS  instead of the storage device  in the active SMS . In this way, if the active SMS  fails while a load from the shared storage device to the standby SMS's database is in progress, the loading can continue with no interruption. Alternatively, the backup of the active SMS's database  can be stored in the shared storage device  in the active SMS .","The backup\/restore circuitry  in the active SMS  automatically stores a backup of the active SMS's database  in the standby SMS's shared storage device \u2032, and the backup\/restore circuitry \u2032 in the standby SMS  automatically copies the backup of the standby SMS's database from the shared storage device \u2032 to the standby SMS's database \u2032. The storage devices , \u2032 are \u201cshared\u201d in the sense that data can be moved between the storage devices , \u2032 and the databases , \u2032 without physically moving the storage devices , \u2032. This provides a full-automation solution that requires no human intervention to move the storage devices , \u2032 between the active and standby SMSs , , thereby avoiding human error and saving cost on labor. This is in contrast to a backup scheme that uses removal media, such as a digital tape, that requires a user to physically transport the tape from one SMS to the other. Such a manual procedure not only adds labor costs to the backup and restore process but also poses a risk due to human errors that manual processes are susceptible to. To further reduce the risk of human error, the backup\/restore circuitry can handle the entire backup and restore process in an automated way with no human intervention (in contrast to inserting a tape into the active SMS on a nightly basis, manually initiating the backup function, manually removing the tape after the backup is completed and inserting it into the standby SMS, and manually initiating and monitoring the restore process on the standby SMS).","The shared storage device  can take any suitable form, including, but not limited to, a disk (i.e., magnetic, optical, etc.), a solid state storage device (e.g., RAM), tape, etc. It is preferred that a relatively-fast storage device, such as a disk storage device, be used over a relatively-slow storage device, such as tape. Disks have a much higher speed and throughput as compared to tapes, resulting in much shorter outages. For example, a backup\/restore procedure using a shared disk drive that takes about an hour to perform can take about six hours to perform using tape. Accordingly, using a shared disk drive instead of tape can reduce provisioning outages (i.e., times when the SMS is operating in non-redundant mode) by a factor of six. Another benefit with using disk rather than tape is that disk storage does not have the same capacity limitation imposed by tape. Consider, for example, the situation in which a DDS3 tape capable of storing 17.6 GB worth of data is used to back up and restore a SMS database storing 19 GB of data. In this situation, two tapes would be needed, which increases switchover time, extends outages, and adds a tape-change procedure with its associated manual involvement and risk of errors. In contrast, a suitably-large disk drive can store four days worth of backups on a round-robin basis.","In a presently preferred embodiment, the circuitry , \u2032 each comprises a processor running programs that are UNIX korn shell scripts, with embedded Sybase Transact-SQL commands and queries. The tasks that each program performs are as follows. It is important to note that the details (e.g., times, etc.) and other limitations set forth below should not be read into the claims unless expressly recited therein.","NightlyDiskBkp.ksh","This program cleans up old database backups in the shared storage device. In this embodiment, database backups older than four days are removed from the shared storage device. This program initiates another program called dbdump.ksh. NightlyDiskBkp.ksh starts automatically at 12:45 AM on the active SMS  on daily basis and through a UNIX cron job. The time for automatic start was chosen based on other activities on the platform to minimize the contention on the platform.","dbdump.ksh","This program creates a backup of a database or all databases (based on parameters passed to the program) except tempdb, to the shared storage device. This program also communicates with an alarming system to notify Network Operation Center (NOC) personnel on success or any issues during the operations. This notification is sent in a form an IPR (Information and Problems Report). This program currently takes 40 minutes for all databases, including a services database with current size of 19 GB.","NightlyDiskLoad.ksh","This program starts automatically at 1:45 AM on daily basis on the standby SMS  and through a UNIX cron job. NightlyDiskLoad.ksh executes another program called dbload.ksh three times consecutively and for three databases called SMSCatalogs, gensms, and services. SMSCatalogs stores the data related to database backup history. The gensms database contains configuration parameters for SMS, SCPs, and the replication process, as well as information on transactions and their statuses. The services database contains core business information on services logics and provisioning history. NightlyDiskLoad.ksh also creates a log file at the end, which can be viewed by NOC personnel. This log file reports on time and success\/failure status of the load process.","dbload.ksh","This program loads the database backups from the shared storage into the data server on the standby SMS . Dbload.ksh preferably does not load Sybase system databases since they are data server specific and are preferably not loaded from the active data server. This program brings SMSCatalogs database online, but gensms and services database are set to standby_access mode. If the loading databases are in use or the platform is not in the standby mode, the load preferably aborts the operations to avoid overwriting an active database. This is a safety measure to prevent any damage in case the program is used in ways that it is not designed for (e.g. database load on the active SMS).",{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIGS. 4 and 5","b":["150","140","140","150","240","240"]},"Turning first to , the NightlyDiskBkp.ksh program starts automatically at 12:45 AM on the active SMS  (act ). Next, database backups older than four days are removed from the shared storage device \u2032 (act ). The dbdump.ksh program is then initiated for all databases (act ), and a list of all databases on the active SMS  except tempdb is created in memory (act ). The first database is then dumped to the shared memory device (act ). It is then determined whether the dump was successful (act ). If the dump was not successful, an IPR is issued to indicate failure (act ), and the next database on the list is dumped to the shared storage device \u2032 (act ). If the dump was successful, an IPR is issued to indicate success (act ), and it is determined whether the list is at its end (act ). If the end of the list has not been reached, the next database on the list is dumped to the shared storage device \u2032 (act ). If the end of the list has been reached, the dbdump.ksh program ends, and control is returned to the NightlyDiskBkp.ksh program (act ), which ends (act ).","Turning now to the flowchart of the nightly restore operation in , the NightlyDiskLoad.ksh program starts automatically at 1:45 AM on the standby SMS  (act ). Then, the database parameter name is set to the first database name in the ordered list of SMSCatalogs, gensms, and services (act ), and the dbload.ksh program is initiated for this database (act ). It is then determined if the SMS is in minset, which is required for standby in this embodiment (act ). If it is not, a message is displayed and emailed to the root user (act ), and the dbload.ksh program ends, and control is returned to the NightlyDiskLoad.ksh program (act ). If it is, it is determined whether any user or process is using this database (act ). If he\/it is, a message is displayed and emailed to the root user (act ). The dbload.ksh program then ends, and control is returned to the NightlyDiskLoad.ksh program (act ). If he\/it is not, the database is loaded into the data server from the most-recent backup of this database on the shared storage device \u2032 (act ). It is then determined if this database is SMSCatalogs (act ). If it is, the database is brought online (act ), and the dbload.ksh program ends, and control is returned to the NightlyDiskLoad.ksh program (act ). If it is not, the database is brought up to standby_access mode (act ), and the dbload.ksh program ends, and control is returned to the NightlyDiskLoad.ksh program (act ). Next, it is determined if the end of the database list has been reached. If it has not, the database name parameter is set to the next database name in the ordered list of SMSCatalogs, gensms, and services (act ), and the dbload.ksh program is initiated for this database (act ). If it has, a report log file is generated listing backups used and the time that the load completed for each database (act ). The NightlyDiskLoad.ksh program then ends (act ).","There are many alternatives that can be used with these preferred embodiment. For example, while an AIN platform was used in the examples set forth above, other types of telecommunication systems (i.e., non-AIN systems) can be used. Also, the SSPs ,  can directly transfer network signaling protocols to the SCPs ,  without the use of the STPs , , and a central office not equipped with an SSP can be provided with software to send messages to the SCPs ,  in an AIN-query format. Further, in the examples described above, both the active and standby SMSs ,  comprise backup\/restore circuitry , \u2032; however, only the backup functionality is active on the active SMS , and only the restore functionality is used in the standby SMS . In alternate embodiments, the backup\/restore circuitry is stored entirely in the active SMS , entirely in the standby SMS , distributed between the active and standby SMSs , , or located in a component separate from the active and standby SMSs , . Further, while the backup\/restore circuitry automatically started the backup and restore processes in the examples set forth above, in an alternate embodiment, the backup and\/or restore processes are initiated by human interaction.","Further, in the examples described above, both the active SMS and the standby SMS have a shared storage device. Other configurations of the shared storage device are possible. For example, in one alternate embodiment, only one, but not both, of the active and standby SMSs have a shared storage device. This allows the storage device to be added to and managed by one of the SMS platforms (active or standby) with a Network File System (NFS) mounted across the other SMS platform to allow the storage device to be accessible by the other platform. However, if the SMS platform that hosts the storage device becomes unavailable, the storage device may not be accessible by the other SMS platform. As described above, using two separate storages, one on each SMS platform, mitigates this issue and increases the availability of the SMS platform.","Also, by configuring each SMS with a storage device, database backups can be dumped from the active database on the storage device that is hosted by the standby SMS. In this configuration, if the active SMS fails while the load is in progress on the standby SMS, the loading will continue with no interruption. As another alternative, instead of being part of the active and\/or standby SMS, the storage device can be a component (stand-alone or part of some other network element) separate from both the active and standby SMSs. Further, instead of using a shared storage device as an intermediary, the database backups can occur directly from the active SMS database to the standby SMS database. Also, while the backup\/restore functionality was described above in regard to an SMS, it should be noted that this backup\/restore functionality can be used to provide fault tolerance and data redundancy for any telecommunication component, such as, but not limited to, an SCP, SSP, or any other AIN or non-AIN component. Lastly, while the backup\/restore functionality described above was implemented on both SMSs, in an alternative embodiment, the backup\/restore functionality can be used to backup and restore one, but not both, SMSs.","In a presently preferred embodiment, the SMS ,  uses a Sun E5500 (or Sunfire E6900) hardware platform and a Sun Solaris 8 operating system, the web servers , \u2032 are Apache Tomcat 4.1.29 web servers, the database , \u2032 is managed by a Sybase Adaptive Server Enterprise 12.0 (or 12.5), and the replication server , \u2032 is a Sybase Replication Server 12.0 (or 12.6). In this presently preferred embodiment, each SCP SU database  stores 700 MB of data, and the SMS database , \u2032 stores over 19 GB of data. Here, the SMS database  stores data pertaining to historical and inactive services logic in addition to active services which are replicated to SCP SU databases . It should be noted that the version numbers are subject to change due to software upgrades. Despite future version changes, the functionality described herein remains applicable. That is, the functionality described herein is not dependent on the specific software program or versions used, nor is it affected by backward compatible software upgrades. Of course, any other suitable type of component can be used, and the components mentioned above should not be read into the claims unless explicitly recited therein.","It is intended that the foregoing detailed description be understood as an illustration of selected forms that the invention can take and not as a definition of the invention. It is only the following claims, including all equivalents, that are intended to define the scope of this invention."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0005","num":"0004"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0006","num":"0005"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0007","num":"0006"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0008","num":"0007"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
