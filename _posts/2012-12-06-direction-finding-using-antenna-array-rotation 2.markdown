---
title: Direction finding using antenna array rotation
abstract: A direction finding system for finding the angle of arrival of a target signal from a transmitter. The system includes a plurality of directional antennas positioned to face different directions for receiving the target signal. The antennas are mounted as an antenna array on a rotatable mount for supporting and rotating the antenna array. A receiver unit down converts the RF target signal to IF signals that are digitized by an A/D converter providing digital values. A computer computes the power in the signals from the A/D samples. A computer stores calibration information for the directional antennas, processes the digital values and the calibration information to determine a rotation angle Î± for rotating the antennas to provide new digital values, processes the new digital values and the calibration information to determine an intersection angle, and subtracts the rotation angle from the intersection angle to determine the final value for the angle of arrival of the target signal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09551777&OS=09551777&RS=09551777
owner: 
number: 09551777
owner_city: 
owner_country: 
publication_date: 20121206
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY","DETAILED DESCRIPTION"],"p":["This invention relates to direction finding (DF) systems and more particularly to systems for finding the angle of arrival of radio frequency signals received from a transmitter.","DF systems have receiving antennas located at a DF site for receiving a target signal from a transmitter located at some bearing angle from the DF site. DF systems determine the angle of arrival (AOA) of the target signal at the DF site but typically do not determine the distance between the DF site and the transmitter.","Geolocation systems find the geolocation of a transmitter within a region. By knowing the location of the transmitter in the region, a geolocation system can determine the angle of arrival of the target signal at any receiving antenna in the region and can determine the distance between the transmitter and the receiving antenna.","Geolocation systems determine the location of a transmitter using two or more antennas at spatially separated antenna sites. Two DF systems can determine the location of a transmitter by finding the intersection of the lines from the DF system at the measured AOA's. Geolocation systems can use time difference of arrival (TDOA) of signals from the transmitter to the antennas to determine the geolocation of the transmitter. TDOA systems require three or more sites to be highly synchronized in time (to less than 10 nsec), require a broadband network to transfer signals to a central processor, produce large errors when the main signal is blocked by a building or something else and produce very large errors if the transmitter is not within the triangle defined by the three sites.","DF systems in general are simpler and less expensive than geolocation systems. DF systems are of two main types, phase-comparison and amplitude-comparison.","In phase-comparison DF systems, two or more antennas are configured so that the relative phases of the antenna outputs are unique. The angle of arrival is computed by analyzing the relative phases of the antenna outputs. Interferometer systems are examples of phase-comparison DF systems. Interferometer systems have relatively high angle of arrival (AOA) measurement accuracy (1\u00b0-3\u00b0), but their costs are high and extensive phase calibration is required. The interferometer systems must be thermally calibrated or compensated and multiple antennas are needed for each band to resolve ambiguities. For lower frequencies, the antenna arrays can get quite large.","In Watson-Watt systems, two co-located sets of antennas are oriented perpendicularly and the signals from the sets of antennas are subtracted. The bearing angle is computed by taking the arctangent of the ratio of the subtracted signals. The subtraction is done at RF and requires the phase of the two antennas, cables and subtraction circuit to be well matched. This operation inherently makes Watson-Watt systems phase sensitive. Watson-Watt systems are inexpensive and compact with medium AOA accuracy (4\u00b0-7\u00b0), however, they usually only cover up to 1 GHz.","In amplitude-comparison DF systems, two or more unique amplitude outputs are obtained from one or more directional antennas positioned at different angles. The angle of arrival is computed by analyzing the relative amplitudes of these outputs.","The antennas in DF systems are connected to one or more radio receivers. The radio receivers have various configurations including single-channel and multi-channel radio receivers. The antenna systems include, for example, configurations such as (i) a single-channel receiver connected to a single antenna, (ii) a single-channel receiver connected to multiple antennas and (iii) a multi-channel receiver connected to multiple antennas.","In one example of an amplitude-comparison DF system, a single antenna for receiving the transmitter signal is attached to a rotating pedestal and is connected to a single-channel receiver. The angle of arrival of the transmitter signal is determined as the pedestal angle where the received signal is strongest.","In another example of an amplitude-comparison DF system, a multi-antenna array is connected to one or more receivers for receiving the transmitter signal. The power levels of the signals received by the different directional antennas are used to determine the angle of arrival of the transmitter signal. With well selected antennas, the power levels of the received signals at the strongest two adjacent antennas in a multi-array of antennas are unique for determining the angle of arrival of the signal.","The multi-antenna array systems using amplitude comparison of the power level have the following advantages over other DF systems: no phase calibration\/stability requirements; no precise timing requirements; inexpensive; one set of antennas can cover a wide frequency range; simple power calibration; the package containing the system can be light weight and compact; insensitivity to aging and thermal issues since these effects tend to be common mode to all antennas and hence are cancelled in the \u0394Power calculations.","The multi-antenna array systems using amplitude comparison of the power values have the disadvantages of low accuracy and high sensitivity to RF local field amplitude variations caused by multipath and other problems.","Some direction finding systems are mobile and are located on vehicles. As the vehicles move, the systems calculate the angle of arrival of received signals. To do so, the angle of arrival outlier measurements are discarded and the rest of the measurements are processed to calculate a weighted mean angle of arrival. Some direction finding systems are stationary and operate to determine the angle of arrival of a stationary transmitter.","While many amplitude-comparison DF systems have been employed, the systems suffer from poor accuracy or high sensitivity to multipath interference and non-ideal antenna and system characteristics. Many of these problems cannot be corrected by calibration. While such amplitude-comparison DF systems are inexpensive, compact and relatively free from thermal and phase problems, they generally have low AOA accuracy (10\u00b0-15\u00b0) where higher AOA accuracy of from 1\u00b0-3\u00b0 is needed.","In consideration of the above background, there is a need for improved multi-antenna array amplitude-comparison DF systems with higher accuracy and with reduced sensitivity to problems which cannot be corrected with calibration.","The present invention is a direction finding system for finding the angle of arrival of a target signal from a transmitter. The system includes a plurality of directional antennas positioned to face different directions for receiving the target signal. The antennas are mounted as an antenna array on a rotatable mount for supporting and rotating the antenna array. A receiver unit connects to the directional antennas and down converts the radio frequency signals to intermediate frequency (IF) signals that are digitized by an A\/D converter providing digital values representing the target signal. A computer computes the power in the signals of interest from the A\/D samples. A computer stores calibration information for the directional antennas, processes the digital values and the calibration information to determine a rotation angle \u03b1 for rotating the antennas to provide new digital values, processes the new digital values and the calibration information to determine an intersection angle, and subtracts the rotation angle from the intersection angle to determine the final value for the angle of arrival of the target signal.","The direction finding system uses calibration information which is \u0394PowerCal values determined for a pair of adjacent antennas and the measured digital values are processed to form \u0394Power values for the pair of adjacent antennas.","The direction finding system determines the rotation angle \u03b1 as an angle where the \u0394PowerCal values are free of ambiguities and exhibit a long, steep and smooth slope.","In one embodiment of the direction finding system, the computer executes the processing steps of determining if an ambiguity exists in the digital power value and upon detecting the ambiguity commands the rotatable mount to rotate an increment angle. The computer repeats the determining step for one or more increment angles until the \u0394PowerCal values are in a region free of ambiguities.","In one embodiment of the direction finding system, the receiver unit includes one or more receivers that connect to the directional antennas through a switch. The switch connects different ones of the directional antennas to the receiver at different times whereby the receiver processes the outputs from the connected ones of the directional antennas.","The direction finding system includes an antenna array unit supporting the plurality of directional antennas positioned to face different directions for receiving the target signal, includes a rotatable mount for supporting and rotating the antenna array unit, includes a receiver unit having one or more receivers for down converting the radio frequency signal to an intermediate frequency (IF) that is digitized by the A\/D converter. A computer computes the power in the signal of interest form the digital power values from the A\/D samples. A computer stores calibration information for the directional antennas as a function of angular direction and provides \u0394PowerCal calibration data values for a pair of the antennas. The computer provides \u0394Power measured data values for the received signals from the pair of antennas for the target signal, compares the \u0394Power measured data values with the \u0394PowerCal calibration data values to determine a rotation angle for rotating the antenna array unit, provides new \u0394Power measured data values for the received data values from the pair of antennas for the target signal at the rotation angle location, interpolates the \u0394PowerCal values to determine the intersection angle where the new \u0394Power data values intersect the \u0394PowerCal calibration data values and subtracts the rotation angle from the intersection angle to determine the final value for the angle of arrival of the target signal.","The foregoing and other objects, features and advantages of the invention will be apparent from the following detailed description made in conjunction with the drawings.","In , a block diagram representation of a direction finding system  is shown including a multi-antenna array unit , a radio receiver unit  and a computer . The direction finding system  operates to detect the angle of arrival (AOA) of received radio frequency (RF) signals called \u201ctarget signals\u201d from a transmitter with an unknown bearing. In the embodiment of , the antenna array unit  includes N directional antennas -, -, . . . , -, . . . , -N\u22121), -N. In typical embodiments, the number N can be any integer value equal to two or more. In one embodiment, the antennas are broadband spiral antennas. Broadband spiral antennas are selected because they a) work well with horizontal and vertical polarization, b) have roughly constant antenna beam width over a wide range of frequencies, c) are small, flat and light weight and d) have good antenna gain (\u02dc6 dB). To cover a wider range of frequencies, multiple sets of antennas can be used. For example, 8 inch diameter antennas are used to cover 0.5-6 GHz and 2 inch spirals are used to cover 4-18 GHz. Spiral antennas that cover lower frequencies get large as the wavelength gets larger. To go down to 150 MHz, the selected spirals are about 30 inches in diameter making the array diameter about 55 inches.","The antenna array unit  includes a rotatable table  which enables the azimuth angle of the antennas -, -, . . . , -N to be selected for each target signal. The multi-antenna array unit  connects to a radio receiver unit . The radio receiver unit  includes one or more receivers  including the receivers -, -, . . . , -R where R is any integer equal to or less than N. The R receivers receive N signals from N antennas. When R is equal to N, there is a receiver for each antenna. When R is less than N, two or more antennas share the same receiver. When R is equal to one, all antennas share the same receiver.","The connect unit - in the antenna array unit  selects the particular one or ones of the antennas to be connected to the receiver unit  at any particular time. If the number of antennas equals the number of receivers, that is R equals N, then connector unit - is an N-channel cable. If the number of antennas is less than the number of receivers, that is R less than N, then connect unit - includes a switch for switching receivers among antennas.","The received target signals down converted by the receiver  are processed in the IF processing unit . The IF processing unit  has both analog and digital embodiments. In analog embodiments, processing unit  includes, for example, analog filters and analog power meters for determining power values of the IF signals which are input to computer . In digital embodiments, processing unit  includes one or more A\/D converters and the converted signals are connected to the computer . In one embodiment, multiple A\/D converters are provided, one for each of the receivers . In other embodiments, one or more A\/D converters are shared among multiple receivers.","With received antenna signals that are fairly constant over the measurement period, a switch and single receiver will provide good AOA measurements. This measurement period usually takes 1-100 msec depending on the signal integration desired. If the received signals are short, such as radar pulses, switching between antennas is a fairly poor technique as each antenna will have different pulses. If the signal transmitter is a rotating antenna radar, AOA errors will occur. Using multiple receivers to simultaneously measure the power in the same pulse eliminates this problem.","The connector unit - in the antenna array unit  selects by direct connection in a cable or through a switch  for switching the particular one or ones of the antennas to be connected to the receiver unit  at any particular time. The received target signals detected by the receivers  are processed in the IF processing unit  and are connected to the computer . The computer  is typically a standard microprocessor that operates to control all of the subsystems and communicate with the user. In some embodiments, the computer  includes a field programmable gate array (FPGA) to perform functions, such as switch control and signal processing, that need to be done quickly. The computer  processes the converted signals to calculate the signal power values for angle of arrival determination. To calculate the signal power values, the computer filters off all signal energy not in the prescribed bandwidth of the signal of interest. The signal power values are the total signal power in the signal bandwidth. The filtering can be done with digital filtering or an FFT. The computer  also connects to rotatable table , the switch  and the receiver  for controlling the timing and selection of the antennas to be connected to the receiving unit  and for controlling the processing of data received. The receivers  are controlled by the computer  subsystems to set the center frequency, bandwidth and gain to down convert the signals of interest. When the system  is commanded to take a recording, it records a short burst from each of the antennas to determine the signal level. Then longer recordings are made switching through each of the antennas with the gain of the receiver set to the level to optimize the A\/D input level and keep the SNR as high as possible. These recordings are used to determine the power level for the AOA algorithms. The direction finding system  operates to detect the angle of arrival of received radio frequency target signals using an amplitude comparison algorithm. The power levels of the target signals received by the different antennas -, -, . . . , -N are used to determine the angle of arrival. A pair of the adjacent ones of the antennas -, -, . . . , -N is selected for any particular received target signal where the pair is the two adjacent antennas with the strongest received signal levels for the target signal. If the RF power of the signal changes in the time it takes to record the signal from two adjacent signals, AOA errors will result. The switch  should be switched between adjacent antennas as fast as possible to minimize the change in received signal strength. In one embodiment for high speed, the switching of the switch  is performed in a high-speed FPGA under control of the system computer . The FPGA is used to do fast switching to minimize the chance that the target signal changed power between consecutive switch positions.","In , a block diagram representation of a direction finding system  is shown including a 6-antenna array unit  with a radio receiver unit . The direction finding system  operates to detect the angle of arrival (AOA) of received radio frequency (RF) signals called \u201ctarget signals\u201d. In the embodiment of , the antenna array unit  includes six directional antennas -, -, . . . , -. The antennas are typically identical but can be different. The antennas form a 6-antenna array unit where the antennas are arrayed at 60\u00b0 intervals to cover a 360\u00b0 angular range for receiving target signals. In a single receiver embodiment for , the radio receiver unit  includes a single receiver  that receives signals from the antennas -, -, . . . , - one at a time through operation of switch . The received target signals detected by the receivers  are A\/D converted in the A\/D converter unit  and the converted signals are connected to the computer . The computer  processes the converted signals to calculate the power in the signal of interest for angle of arrival determination.","In , the block diagram representation of the physical signal path extends from the antenna , through receiver  and A\/D converter \u2032 to the computer . The signal spectrum into the receiver  is at RF frequencies. The signal spectrum output from the receiver and input to the A\/D converter \u2032 is at IF frequencies. The A\/D converter digitizes the IF signal producing at its output a digital-time-waveform representation of the IF signal.","In , a block diagram representation of the computer signal processing steps, for one embodiment for determining signal power values, includes a multiply-by-window function , an FFT function  and a sum function . The multiply-by-window function  processes the A\/D samples to feed the FFT, the weighted output consists of real data samples. The FFT function  processes the real data and produces outputs in bins in the form of complex data having I and Q components. The sum function  forms the sum over the FFT bins containing the signal of interest. The sum is the square of the I and Q components, \u03a3(I+Q), which produces the signal power for the signal of interest.","In , a representation of a typical RF signal spectrum input to the receiver  from the antenna  of  with the SIGNAL OF INTEREST designated.","In , a representation of the IF signal spectrum output from the receiver  in response to the input of  with the SIGNAL OF INTEREST designated.","In , a representation is shown of the signal spectrum of the SIGNAL OF INTEREST as isolated by FFT processing.","In , a block diagram representation of the  direction finding system  is shown with the multi-antenna array unit  shown in a perspective view. In , the antenna array unit  includes six directional antennas -, -, . . . , -. In one embodiment, each of the antennas is an eight inch broadband spiral antenna. The switch  in the antenna array unit  selects the particular one or ones of the antennas -, -, . . . , - to be connected to the receiver unit  at any particular time. In alternate embodiments, the receiver unit  has two receivers (one for the two strongest antenna signals) or has six receivers (one for each of six antennas). The received signals detected by the receiver unit  are A\/D converted in the A\/D converter UNIT  and the converted signals are connected to the computer . The computer  processes and stores the signal power values for angle of arrival determination. The computer  also connects to rotatable table , the switch  and the receiver  for controlling the timing and selection of the antennas to be connected to the receiving unit  and for controlling the processing of data received.","In , a schematic view of antenna patterns - and - from the pair of antennas - and - of the multi-antenna array unit  of  and  are shown. A received RF target signal  from a transmitter  is shown. The angle of arrival, \u03b2, of the RF signal  from transmitter  in the example of  is between 180\u00b0 and 240\u00b0 measured relative to the reference direction . Of course, the angle of arrival, \u03b2, can be any value from 0\u00b0 to 360\u00b0. The pair of antennas selected from the multi-antenna array unit  is determined as the pair of antennas having the strongest signals. Since the antennas -, -, . . . , - are directional, the pair of antennas - and - together are likely to have the strongest signals for a target signal having an angle of arrival between 180\u00b0 and 240\u00b0. The antennas - and - are the selected pair for purposes of the  example with a target signal having an angle of arrival of 199.6\u00b0. If the angle of arrival were between 0\u00b0 and 60\u00b0, 60\u00b0 and 120\u00b0, 120\u00b0 and 180\u00b0, 240\u00b0 and 300\u00b0, or 300\u00b0 and 360\u00b0 then the selected pairs likely would be antennas - and -, - and -, - and -, - and - and - and -, respectively.","In , the received power level for the antenna - is designated with a solid circle at the intersection of the received signal  and the array pattern -, \u201cReceived Power - (-)\u201d. The received power level for the antenna - is designated with a solid circle at the intersection of the received signal  and the array pattern -, \u201cReceived Power - (-)\u201d.","In , the multi-antenna array unit  of  and  is shown at the reference orientation with the plane of the antenna A1 normal to the reference direction  as described in connection with . The antennas - and - are the selected pair of antennas for purposes of the  and  example where the angle of arrival, \u03b2, of the RF target signal  is between 180\u00b0 and 240\u00b0. In the particular example described, \u03b2=199.6\u00b0. In , the selected pair of antennas - and - each detects the target signal  and produces target signal power values used to determine the angle of rotation required for the antenna array unit  in order to provide an accurate angle of arrival determination. The angel of rotation, \u03b1\u00b0, can be positive or negative, that is, +\u03b1\u00b0 or \u2212\u03b1\u00b0.","In , the multi-antenna array unit  of  and  is shown at a rotation angle orientation. The rotation angle orientation resulted by rotating the antenna array unit  clockwise +\u03b1\u00b0 relative to the reference orientation of . In , the selected pair of antennas - and - each detects the target signal  and produces target signal power values used to determine the angle of rotation according to the angle of arrival algorithm processing.","The angle of arrival algorithm encompasses a number of processes. The angle of arrival algorithm requires calibration of each of the antennas in the antenna array unit . For each antenna array unit , a calibration table of received calibration power levels is formed for each antenna in response to a transmitted calibration signal. The transmitted calibration signal is transmitted to cover the full angular range from 0\u00b0 to 360\u00b0. In order to cover the full angular range from 0\u00b0 to 360\u00b0, each antenna is positioned relative to the direction of the calibration signal at each one of a number of calibration angles called angle calibration steps. In one embodiment, the angle calibration steps are 2\u00b0 apart so that there are 180 angle calibration steps required to cover the full 360\u00b0. The power measurements are made at each calibration step angle for each antenna and for each frequency over a frequency operation range. The frequency operation range is covered by frequency steps that typically range from 1 MHz steps to 50 MHz steps. The completed calibration table includes, for each antenna, a received calibration power level at each angle step for each frequency step.","In order to determine the angle of arrival of a target signal, the first step is to determine the power levels received in each of the N antennas (six antennas in the embodiment of  and ) in response to receiving the target signal. The two adjacent antennas having the highest power levels are selected as the antenna pair for further processing and are named \u201cAntenna \u201d and \u201cAntenna \u201d.","Since any particular target signal to be processed to determine its angle of arrival may have a frequency that is in between the frequency step entries in the calibration table, interpolation methods are employed to improve accuracy. The result of such interpolation is referred to as an interpolated calibration table and\/or as interpolated calibration data.","The initial processing determines the approximate frequency of a received target signal, that is, determines the target signal frequency. Assuming that the target signal frequency is not precisely one of the step frequencies in the calibration table but falls between step frequencies, the calibration table is interpolated to provide interpolated calibration power levels at each of the step angles for each antenna in the antenna pair.","The interpolated calibration data for each antenna of the antenna pair has variations which may evidence, for example, ripple regions, shallow slope regions and longer and steeper smooth slope regions. The regions are observable visually when plotted in a Power versus Angle graph but the regions are intrinsically present in the data whether graphed or not.","After forming the interpolated calibration power levels for each antenna, the calibrated power difference values (\u0394PowerCal) are calculated by subtracting the ANTENNA 2 power values from the ANTENNA 1 values. The \u0394PowerCal values thus calculated will also typically evidence ripple regions, shallow slope regions and longer and steeper smooth slope regions that vary as a function of angle. The calibrated power difference values (\u0394PowerCal) are processed to find a good region for further analysis. The good region selected is typically the longest region having a steeper smooth slope. The ends of the good region have power values that are away from the ambiguities caused by the ripples. Power buffer regions of 3-6 dB are typically used. The good region also has a frequency guard band to keep away from regions where the slope is shallow. A typical guard band is 2 MHz. These guard bands ensure that a noise or modulation on the signal does not cause enough of a power error to take the signal into ambiguous or high error angles. For the good region selected, the maximum \u0394PowerCal, \u0394PowerCal, and the minimum \u0394PowerCal, \u0394PowerCal, are determined. These calibration values \u0394PowerCaland \u0394PowerCalare used to determine an appropriate angle and direction for rotating the antenna array unit  for accurate angle of arrival determination.","After processing the calibration data to determine the calibration values \u0394PowerCaland \u0394PowerCalvalues, the measured power levels for the target signal are processed. For the target signal, the power difference values (\u0394Power) are calculated by subtracting the ANTENNA 2 power values from the ANTENNA 1 values for the target signal.","A determination is made as to whether the measured \u0394Power, \u0394Power, for the received target signal is greater than the calibration \u0394PowerCaland if greater, the antenna array unit  is rotated clockwise an angle +\u03b1 until the measured \u0394Power, \u0394Power, is less than \u0394PowerCal. After such a +\u03b1 rotation angle, the received target signal is operating in the good region.","Also, a determination is made as to whether the measured \u0394Power, \u0394Power, for the received target signal is less than the calibration \u0394PowerCaland if less, the antenna array unit  is rotated counter clockwise an angle \u2212\u03b1 until the measured \u0394Power, \u0394Power, is greater than \u0394PowerCal. After such a \u2212\u03b1 rotation angle, the received target signal is operating in the good region.","After the antenna array unit  has been rotated by the rotation angle, +\u03b1 or \u2212\u03b1, the \u0394PowerCal data is interpolated to determine the new measured angle of arrival. The new measured angle of arrival is the angle where the \u0394Powervalue intersects the \u0394PowerCal data.","After determining the new measured angle of arrival, the rotation angle, +\u03b1 or \u2212\u03b1, is subtracted from the new measured angle of arrival to find the true angle of arrival.","In , a plot of Power (dB) vs. Angle (deg) of Antenna  is designated as curve  and of Antenna  is designated as curve . The curves  and  have smooth polynomial shapes and are idealized representations of antenna power levels detected by Antenna  and Antenna  from a calibration signal. Antenna  and Antenna  represent, for example, antenna A4 and antenna A5, respectively, as depicted in . The curve  in  is a plot of the \u0394PowerCal versus Angle curve formed by subtracting the data values represented by curve  from the data values represented by curve  over an angular range from about 100 to 300 degrees.","While the antenna patterns for curves  and  of  are smooth and monotonically decreasing from the center point, such ideal patterns are not representative of most antennas. Unfortunately, at most frequencies, the antenna patterns in an array of antennas have ripple resulting in angle of arrival ambiguities.","In , a plot  of calibration data for two antennas is shown for a 2.42 GHz signal. Antenna  is designated as having calibration curve  and Antenna  is designated as having calibration curve . Curve  is determined as the \u0394PowerCal values by subtracting the curve  values from the curve  values over the range from about 100\u00b0 to 300\u00b0. The calibration data represented by curve  is used for determining the angle of arrival AOA of a target signal having a 2.42 GHz frequency. By way of example, it is assumed that a target signal has measured values of power such that the difference of measured power between antenna  and antenna  is 9 dB, that is, \u0394Power=9.0 dB. For \u0394Power=9.0 dB, the calibration data represented by curve  in  has seven angle of arrival ambiguities as indicated by the ripple in curve  crossing the horizontal line designating the \u0394Power=9.0 dB value seven times.","In order to remove the angle of arrival ambiguities described in connection with , processing of the calibration data and repositioning of the directional antennas is carried out. The antenna array unit  and each of the antennas -, -, . . . , - are calibrated and the calibration values for each antenna are stored as calibration data in a calibration table. The calibration table contains the received power over 360 degrees of azimuth for all antennas at the frequencies of interest. In one embodiment, the 360 degrees are covered using 2 degree azimuth steps. Of course, smaller or larger steps can be used for higher or lower resolution. The frequency resolution is determined by the rate of change of the pattern over frequency for the frequencies of interest. In some bands, as low as 1 MHz steps are used. In well behaved frequencies or low priority frequencies, the calibration uses 50 MHz steps, for example.","In order to remove the angle of arrival ambiguities described in connection with , processing of the calibration data and repositioning of the directional antennas is carried out. The antenna array unit  and each of the antennas -, -, . . . , - are calibrated and the calibration values for each antenna are stored as calibration data in a calibration table. The calibration table contains the received power over 360 degrees of azimuth for all antennas at the frequencies of interest. In one embodiment, the 360 degrees are covered using 2 degree azimuth steps. Of course, smaller or larger steps can be used for higher or lower resolution. The frequency resolution is determined by the rate of change of the pattern over frequency for the frequencies of interest. In some bands, as low as 1 MHz steps are used. In well behaved frequencies or low priority frequencies, the calibration uses 50 MHz steps, for example.","The table is compiled by putting the antenna array on a rotary stage and receiving the known signal transmitted by a local antenna. The power is measured for each antenna at each frequency and angle. The calibration can be done in an anechoic chamber, an antenna range or in the deployment site.","An example of a calibration table segment at one frequency for an array with six antennas is shown in the following TABLE 1. Similar tables are generated for all frequencies of interest.",{"@attributes":{"id":"p-0077","num":"0076"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"7"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"5","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"6","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"7","colwidth":"28pt","align":"center"}}],"thead":{"row":[{"entry":"TABLE 1"},{"entry":{"@attributes":{"namest":"1","nameend":"7","align":"center","rowsep":"1"}}},{"entry":["Azimuth","Power1","Power2","Power3","Power4","Power5","Power6"]},{"entry":{"@attributes":{"namest":"1","nameend":"7","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["\u2212180","\u221263.71","\u221263.75","\u221260.84","\u221247.61","\u221257.14","\u221270.32"]},{"entry":["\u2212178","\u221263.39","\u221262.36","\u221260.70","\u221247.51","\u221256.29","\u221268.90"]},{"entry":["\u2212176","\u221263.25","\u221262.08","\u221261.12","\u221247.72","\u221255.78","\u221267.40"]},{"entry":["\u2212174","\u221263.20","\u221262.55","\u221262.08","\u221247.92","\u221255.29","\u221265.76"]},{"entry":["\u2212172","\u221263.33","\u221263.92","\u221263.68","\u221248.13","\u221254.90","\u221264.39"]},{"entry":["\u2212170","\u221263.74","\u221266.25","\u221265.89","\u221248.34","\u221254.60","\u221263.47"]},{"entry":["\u2212168","\u221264.50","\u221269.34","\u221268.32","\u221248.56","\u221254.33","\u221262.96"]},{"entry":["\u2212166","\u221265.77","\u221272.02","\u221269.82","\u221248.79","\u221254.01","\u221262.89"]},{"entry":["\u2212164","\u221267.90","\u221271.88","\u221269.80","\u221249.04","\u221253.52","\u221263.43"]},{"entry":{"@attributes":{"namest":"1","nameend":"7","align":"center","rowsep":"1"}}}]}}}}},"In , plots of Received Power Differences, \u0394PowerCal, versus Angle for two pairs of antennas are shown over an angular range from \u221220 to 140 degrees for a 2340 MHz signal. The antenna system is the antenna array unit  with the six antennas -, -, . . . , -. Each adjacent pair of the antennas -, -, . . . , - is used to cover approximately 70 degrees. More explicitly, the antennas A1 and A2 cover \u22125\u00b0 to 65\u00b0, the antennas A2 and A3 cover 55\u00b0 to 125\u00b0, the antennas A3 and A4 cover 115\u00b0 to 185\u00b0, the antennas A4 and A5 cover 175\u00b0 to 245\u00b0, the antennas A5 and A6 cover 235\u00b0 to 305\u00b0, and the antennas A5 and A6 cover 295\u00b0 to 5\u00b0.","In , the curve  represents the \u0394PowerCal difference between the A1 antenna - and the A2 antenna - values over the range from approximately \u221220\u00b0 to 140\u00b0 and the curve  represents the difference values between the A2 antenna - and the A3 antenna - signals over the range from approximately \u221220\u00b0 to 140\u00b0.","With the \u0394PowerCal difference calibration curves  and  of , the \u201cgood\u201d angles are identified. The useful ranges which contain the \u201cgood\u201d angles are the portions of the curves  and  that are monotonic and are away from ambiguities or shallow slope regions. These useful good ranges are shown by the rectangles formed with dashed lines in . More particularly, for the curve , one useful range, GOOD REGION 1, is from approximately 20\u00b0 to 36\u00b0. For the curve , one useful range, GOOD REGION 2, is from approximately 80\u00b0 to 95\u00b0. If no good region is found, the system will check the calibration tables for other antenna in the array to see if rotating to different antennas will have good regions. For example, if Antenna  and Antenna  don't have a good region, perhaps Antenna  and Antenna  or Antenna  and Antenna  will have a good region. If the system does not have a good region at the given frequency, the AOA is measured and reported to the user with an indication that the measurement likely has large errors. In actual testing, 200 frequencies were checked and good regions of at least 6 degrees in width existed for every antenna pair.","In , an expanded plot of Received Power Difference, \u0394PowerCal, versus Angle for the difference between the A1 and A2 antenna data values is shown as represented by curve  in . The expanded angular range in  is from \u221220 to 80 degrees. In that expanded range, the GOOD REGION 1 extends from about 20\u00b0 to 36\u00b0. The GOOD REGION 1 is the same as identified in . The GOOD REGION 1 includes regions before approximately 20\u00b0 and after approximately 36\u00b0 that appear noise free and hence act as guard bands around the GOOD REGION 1.","In , a plot of the calibration Received Power Difference, \u0394PowerCal, versus Angle for the difference between the A1 and A2 antenna signals is shown as represented by curve  over an angular range from \u221210 to 40 degrees for a 2340 MHz signal. A test RF signal to be measured for angle of arrival is originally detected with a Received \u0394Power value of approximately 4 dB indicating a new angle of arrival between 2\u00b0 and 3\u00b0. Since the new angle of arrival is not within the GOOD REGION 2, the antenna unit  of  and  is rotated a degrees to bring the received test signal within the GOOD REGION 2. The rotation angle, \u03b1, is not known when the \u0394Power is measured. Due to the ambiguities caused by the ripples shown in , there are multiple choices for \u03b1. The smallest ambiguous value of a is used first to rotate the antenna array. If there are no ambiguities, the calibration table is interrogated to determine the best estimate of the angle \u03b1 needed to get in the good region and the array is rotated by this amount. After this rotation, \u0394Power is measured again. If this is in the good region, the AOA is measured. If this is not in the good region, the search process is repeated until \u0394Power is in the good region. In the  example, the angle of rotation, \u03b1, equals approximately +20\u00b0 and the measured angle of arrival is 22.5\u00b0 for a net AOA of 2.5\u00b0. If the good region requires a significant rotation angle \u03b1, the calibration tables for the strongest antenna and the other adjacent antenna is checked to see if the good region for that antenna pair requires less rotation in the other direction. The angle of rotation, \u03b1, has been observed in some embodiments to be 40\u00b0 degrees, however, it is possible to have larger angles of rotation with a 6 antenna array.","If time permits or if higher AOA accuracy is desired, the stage can be used to step across the angles in the good region taking multiple AOA measurements. The AOA measurements can be processed to remove outliers. This removal can be as simple as removing the high and low measurements or removing those measurements more outside \u00b12 to 3 sigma from the mean value of the AOA measurements. The AOA measurements can be processed to weight the remaining measurements with the signal's signal-to-noise ratio (SNR) and compute the weighted mean of the remaining AOAs.","In , a plot of the AOA Error versus Frequency is shown for calibration frequency steps of 5 MHz and of 20 MHz over the frequency range from 2340 MHz to 2400 MHz. It is apparent from  that the error when using 20 MHz calibration frequency steps is less than about 5\u00b0 and the error when using 5 MHz calibration frequency steps is less than about 2.5\u00b0. These errors are substantially less than errors that exist when no rotation occurs. Non-rotation operation has errors which typically are +\/\u221215\u00b0 to 20\u00b0. The data for  were taken at one angle in the good region. Using multiple angles in the good region reduced the AOA error significantly.","The present invention is implemented with further and other embodiments. For example, the algorithms for implementing the antenna rotation include the following embodiments. The signal power is measured in many ways including (i) filtering the signal to the signal bandwidth and measuring the power with a power meter; this operation can be done in analog on the IF signal and reading the resultant power value from a power meter or digitally on the digitized samples, (ii) filtering the signal with a digital tuner and determining the power as the average of (I+Q) from the complex tuner output samples and (iii), calculating an FFT on the signal and summing the power in all bins in the signal bandwidth as shown in .","If multiple signals are present in the processed bandwidth, AOA errors can occur if the two signals have similar AOAs. If they are separated significantly in azimuth angle (>120\u00b0) and have similar power levels (within 6 dB), the system can measure the AOA on both signals, however, the AOA's will have somewhat larger errors than with only one signal present. The use of filtering such as a FFT greatly reduces or eliminates the impact of multiple signals at different frequencies. If there are multiple target signals at the same frequency with similar power levels from the same general direction, the system is more likely to produce an incorrect AOA. If the multiple target signals come from significantly different directions, the system is more likely to produce proper results for the strongest signal.","As still further embodiments, various algorithms are used to interpolate the calibration table. For example, linear interpolation is used for each angle between calibration table values at frequencies on either side of the signal frequency. Still further, a spline fit is determined across more frequencies. Interpolation is done using linear power (Watts) or log power (dBm).","If the antennas are well behaved with a minimum amount of ripple, the antenna patterns are fit to polynomials. The use of polynomials calibration table storage space and allows the angle of arrival to be calculated instead of interpolated from the table.","The DF operation is performed with the assistance of computer program operations. A typical computer program for that purpose is listed hereinafter as Appendix 1. The computer program of Appendix 1 includes the subroutines listed in the following TABLE 2:",{"@attributes":{"id":"p-0090","num":"0089"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":[{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"35pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"42pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"56pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE 2"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]},{"entry":[{},{},"Call","Start"]},{"entry":[{},{},"Subroutine","Subroutine"]},{"entry":[{},"Subroutine Name","Line","Line"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"3","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":{"entry":{}}}},{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"4"},"colspec":[{"@attributes":{"colname":"1","colwidth":"35pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"42pt","align":"char","char":"."}},{"@attributes":{"colname":"4","colwidth":"56pt","align":"char","char":"."}}],"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["1","DFcode.m",{},"1"]},{"entry":["2","readCal.m","2","43"]},{"entry":["3","calcPower.m","4","93"]},{"entry":["4","getAntennas.m","6","129"]},{"entry":["5","findGoodCalAngles.m","9","144"]},{"entry":["6","readdPwr.m","26","253"]},{"entry":["7","calcAOAfit.m","31","261"]},{"entry":["8","processAOA.m","35","267"]},{"entry":["9","getAvgFFT.m","112","274"]},{"entry":{"@attributes":{"namest":"1","nameend":"4","align":"center","rowsep":"1"}}}]}}]}}},"In TABLE 2, the 1routine DFcode.m executes to perform the DF method with a six element antenna array on rotatable table  as shown in ,  and . The execution operates to measure the Angle Of Arrival (AOA) of a signal which in the example described is at a frequency, freq=2420 MHz, over interpolated angles for calibration data from 0\u00b0 to 360\u00b0. The antenna calibration data is read from the directory \u201cfolderCal\u201d and is interpolated to return the 6\u00d7N table at frequency \u201cfreq\u201d. N is the number of angles in the calibration table, typically 180 (2 deg increment). The angle data is processed with a spline fit to return the power values at the angles in array \u201cang\u201d.","The 1routine DFcode.m calls the subroutines listed in TABLE 2. The subroutines are readCal.m, calcPower.m, getAntennas.m, findGoodCalAngles.m, readdPwr.m, calcAOAfit.m, processAOA.m and getAvgFFT.m. These subroutines are first called at the lines in Appendix 1 listed in the Call Subroutine Line column in TABLE 2. The subroutines begin at the lines in Appendix 1 indicated in the Start Subroutine Line column of TABLE 2.","The 2subroutine \u201creadCal.m\u201d called at line 2 of APPENDIX 1 starts at line 43 of Appendix 1. The 2subroutine inputs are: folder: directory with the calibration data files where the file contains only cal files and the header file; freq: signal frequency to return cal data for the six antennas (MHz); ang: angles to return cal data (deg). The 2subroutine output is: pCal(antenna,power). The 2subroutine code executes pCal=readCal(folderCal, freq, ang) to store the calibration table for frequency \u201cfreq\u201d and \u201cang\u201d angles.","The subroutine \u201creadADCsamples\u201d is another read subroutine and operates analogously to the \u201creadCal.m\u201d subroutine and for conciseness is not shown in the code of Annex . The receiver is tuned to \u201cfreq\u201d MHz and bandwidth is set by the digital tuner. The decimation factor and read \u201cnSam\u201d sample values are input to \u201cfileOut\u201d on disk. The \u201cfs\u201d value is the sample rate used by the ADC. The \u201creadADCsamples\u201d subroutine call sets up the configuration (freq, decimation, nSam) for future readADC commands.","The 3subroutine calcPower.m, called at line 4 of APPENDIX 1, starts at line 93 of Appendix 1. The ADC samples are read from a disk file where the inputs are: file: file name with the samples from the A\/D converter; fs: Sample rate used by the A\/D converter (Msam\/sec); freq: Frequency of the signal of interest. The output is: pwr_dBm: signal power (dBm). The power for each of the six antennas is calculated and returns the six results in \u201cpwr_dBm\u201d where pwr_dBm=calcPower([folder fileOut], fs, freq). The 3subroutine calcPower.m calls at line 113 of Appendix 1 the 9subroutine getAvgFFT.m at line 274 of Appendix 1 where [freq, pwr] =getAvgFFT(y, fs, nFFT) computes and plots the Hanning windowed FFT of data in vector y. The inputs are x: vector with input time samples; fs: sample rate of data (MHz); nFFT: FFT size to use. The outputs are f: frequency values for each bin (MHz); and pwr: power values for each bin (mWatts).","The 4subroutine getAntennas.m, called at line 6 of APPENDIX 1, starts at line 130 of Appendix 1 and operates to find the two adjacent antennas with the highest power. The 4subroutine determines the strongest antenna number and then the strongest adjacent antenna. The inputs, pwr, are the power values from each of the antennas (dBm). The outputs are ant1: Antenna number with the highest power and ant2: Antenna number with 2highest power adjacent to ant1.","After finding the ant1 and ant2 in the 4subroutine, the \u0394Power calibration differences for ant1 and ant2 are formed in line 7 of Appendix 1 (dpCal curve), dpCal=pCal(ant1,:)\u2212pCal(ant2,:) and the \u0394Power measured signals for ant1 and ant2 are formed in line 8 of Appendix 1 (dPwr curve), dPwr=pwr_dBm(ant1)\u2212pwr_dBm(ant2).","The 5subroutine findGoodCalAngles.m, called at line 9 of APPENDIX 1, starts at line 145 of Appendix 1 and operates to find the good angles in the dpCal curve. The Outputs are aScan, first and last angles to scan as the good region (deg); dpScan, delta Power Cal corresponding to the ends of the good regions (dB); kScan, the index of the ang or dp data with the ends of the good regions; aBest, best angle to use for a single measurement (deg); dPbest, the best delta Power Cal for a single measurement (dB).","In lines 11 through 25 of APPENDIX 1, the antennas are rotated clockwise at line 11 or counterclockwise at line 16 by a rotation angle.","The 6subroutine readdPwr.m, called at line 26 of APPENDIX 1, starts at line 253 of Appendix 1 and operates to read the power levels for ant1 and ant2 and form the dPwr difference between the two. The computer system commands the receiver and A\/D converter to collect data, read that data from disk and calculate the dPwr. The A\/D converter is read using configuration file established earlier with the line 3 of APPENDIX 1 call to \u201creadADCsamples\u201d. This config file, \u201cfileDatCmd\u201d sets the signal frequency, decimation factor (bandwidth), number of samples to read and which antennas to read. The digitized samples are stored \u201cfile\u201d signal file family. The readADCsamples command appends the antenna number and suffix \u201c.dat\u201d on each output file name.","The 7subroutine calcAOAfit.m, called at line 31 of APPENDIX 1, starts at line 261 of Appendix 1 and operates to calculate the AOA from the dPwr value and dpCal curve. The inputs are dPwr: delta power value from the two antennas (dB), kScan: start and stop array index of good region in dpCal array; dpCal: delta power cal array (dB); ang: angles of each element of dpCal (deg). The output is aoa: best AOA value (deg). The operation finds the array index \u201ckAOA\u201d of the dpCal data closest to the measured delta power \u201cdPwr\u201d.","The 8subroutine processAOA.m, called at line 35 of APPENDIX 1, starts at line 267 of Appendix 1 and operates to process the AOA arrays into the AOA histogram and find the best AOA value. The inputs are the aoas: array of the measured AOA's and the outputs is aoa: best AOA value.","Other embodiments not explicitly included in APPENDIX 1 are possible. In one embodiment, the power of ant2 is included with each element in aoas. The values where the power is significantly off from the max are discarded. The center of mass of the AOA values weighted with the power are returned. In another embodiment, the slope of the dpCal where the AOA was calculated is included. The AOA values are weighted by the slope.","While the invention has been particularly shown and described with reference to preferred embodiments thereof it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the scope of the invention. \n\n\n\n\n\n\n\n\n\n\n\n"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 8","FIG. 2"]},{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 9","FIG. 2","FIG. 8"]},{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 10","FIG. 2","FIG. 8"]},{"@attributes":{"id":"p-0035","num":"0034"},"figref":["FIG. 11","FIG. 2","FIG. 8","FIG. 10"]},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":["FIG. 13","FIG. 9"]},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":["FIG. 15","FIG. 14"]},{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 16","FIG. 15"]},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 17"}]},"DETDESC":[{},{}]}
