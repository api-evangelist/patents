---
title: System and method for managing power consumption
abstract: In accordance with particular embodiments, a method for managing power consumption includes receiving from a plurality of electricity relays an indication of a current state associated with each of the plurality of electricity relays. The method also includes receiving a power rate associated with a cost of power. The method further includes determining a threshold state based on the power rate and the current state associated with each of the plurality of electricity relays. The method additionally includes transmitting one or more control requests to one or more of the plurality of electricity relays. A first control request transmitted to a first electricity relay is based on the threshold state and a first current state associated with the first electricity relay.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09300138&OS=09300138&RS=09300138
owner: Fujitsu Limited
number: 09300138
owner_city: Kawasaki-shi
owner_country: JP
publication_date: 20111017
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATION","TECHNICAL FIELD OF THE INVENTION","BACKGROUND OF THE INVENTION","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims priority under 35 U.S.C. \u00a7119(e) to U.S. Provisional Application Ser. No. 61\/494,069 filed Jun. 7, 2011, which is hereby incorporated by reference in its entirety.","This invention relates in general to a system and method for managing power consumption.","Various industries are striving to find solutions to reduce power bills despite increasing electricity rates. Demand Response (DR) is one such method. DR works to reduce the amount of power consumed during a peak load period. DR systems help utility companies avoid blackouts, defer construction of new generation\/transmission facilities, and reduce costs. For consumers, DR systems help reduce electricity bills by reducing the amount of power consumed during the more costly peak load periods.","In many cases, office buildings are considered as a single consumer from the perspective of the utility company. The building owners typically provide a comprehensive electricity service to their tenants who pay a fixed fee for the administration and power service. The electricity programs for office buildings may often include both power consumption charges (e.g., the power rate (cost per kilowatt hour)*power consumption) and demand charges (e.g., based on the peak load (in unit of kW) within a billing period). Thus, the more power that is used during the peak hours, the higher the electricity bill is for the building.","In accordance with particular embodiments, a method for managing power consumption includes receiving from a plurality of electricity relays an indication of a current state associated with each of the plurality of electricity relays. The method also includes receiving a power rate associated with a cost of power. The method further includes determining a threshold state based on the power rate and the current state associated with each of the plurality of electricity relays. The method additionally includes transmitting one or more control requests to one or more of the plurality of electricity relays. A first control request transmitted to a first electricity relay is based on the threshold state and a first current state associated with the first electricity relay.","Technical advantages of particular embodiments may include decreasing the amount of power consumed by a particular business entity. Accordingly, the business entity may reduce their power bill and decrease their environmental impact. Other technical advantages will be readily apparent to one skilled in the art from the following figures, descriptions and claims. Moreover, while specific advantages have been enumerated above, various embodiments may include all, some or none of the enumerated advantages.",{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 1","b":["110","150","110","150","110","150","150"]},"Building  may be an office building, a commercial building, an industrial building, a warehouse building, a residential building, a factory, multiple buildings within a single campus, or any other configuration in which it may suitable to have one or more environment stations  manage power consumption for various devices within building . Regardless of the configuration of building , it may comprise a number of devices that consume electricity. For example, lights, computers, various appliances (e.g., HVAC systems, water heaters, ovens and microwaves, etc.) and electronics (e.g., televisions, telecommunications equipment, networking equipment, signs, routers, etc.). Some of the devices within building  may be able to store energy, for example thermal energy or electrical charge, and thus may operate without having electricity or power continuously flowing thereto. Environment station  may be configured to manage power consumption, via electricity relays , for one or more devices  with an ability to store energy.","Environment station  may include any combination of hardware, software embedded in a computer readable medium, and\/or encoded logic incorporated in hardware or otherwise stored (e.g., firmware) to implement any number functions to manage the consumption of power by devices  of building . In certain embodiments, environment station  may implement its power consumption management so as to minimize the impact to normal office operations. For example, environment station  may consider shedding demand from reducible loads and\/or deferrable loads during peak hours. Reducible loads are those loads that can be turned off without negatively impacting, beyond acceptable parameters, the operations of building  (e.g., turning off lights in unoccupied rooms). Deferrable loads are those loads with the capability of storing energy (e.g., in a battery) or delaying a load within delay tolerances (e.g., within a number of degrees of a desired temperature). For example, a laptop may be a deferrable load because laptops may use either power provided directly from an outlet or it may defer from using power from the outlet and instead use power stored in its battery.","In , building  is connected to network . Network  may be any network or combination of networks capable of transmitting signals, data, and\/or messages, including signals, data or messages transmitted through WebPages, e-mail, text chat, voice over IP (VoIP), and instant messaging. Network  may include one or more LANs, WANs, MANs, PSTNs, WiMAX networks, global distributed networks such as the Internet, Intranet, Extranet, or any other form of wireless or wired networking. Network  may use any of a variety of protocols for either wired or wireless communication.","In certain embodiments, network  may connect environment station  with power company  and weather information provider . Information provided by power company  and weather information provider  may be collected, processed, and\/or distributed (e.g., distributed among electricity relays ) in order to provide power management for devices . Depending on the embodiment and\/or scenario, power company  may provide environment station  with information such as the current power rate, the current demand rate, any special circumstances (e.g., special demand response rates), or any other information (e.g., prior peak loads, current power consumption, etc.) which may be helpful to environment station  in managing the power consumption of building . As used herein, the power rate may be used to generally refer to the information provided by the power company regarding the cost of power. Depending on the power company, the power rate may include an power rate (e.g., the cost per kilowatt hour), a demand rate (e.g., the cost per kilowatt based on the peak load within a given period, such as a billing period), and\/or any other rates or information that may impact the cost of power. Depending on the embodiment and\/or scenario, weather information provider  may provide environment station  with information such as the current temperature, forecasted temperature, or any other information (e.g., historical weather information for the same day or time, etc.) which may be helpful to environment station  in managing the power consumption of building .","Depending on the configuration of the power management system, environment station  may provide power management in a centralized, distributed, or hybrid configuration. The type of configuration may be a balance between communication overhead (between environment station  and electricity relays ) and the amount of control that is desired.","In a centralized configuration, environment station  may receive information from power company  (e.g., power rate, demand rate, etc.) and from weather information provider  (e.g., current temperature, forecasted temperature, etc.). Environment station  may also receive information from electricity relays . The information from electricity relays  may comprise the amount of power consumed by the associated device  (e.g., electricity relay may provide information regarding the power consumed by device ), the current state of the associated device (e.g., the temperature of the water of a water heater or the state of charge (SOC) of a battery of a laptop, etc.), commands or requests provided by a user of the associated device (e.g., an override command), or any other information which may be helpful to environment station  in managing the power consumption of devices . Although not depicted, environment station  may also receive information regarding power consumed by other devices or components within building . Based on the received information, environment station  may identify particular devices for which the flow of power should be stopped or resumed. Environment station  may then send messages to the individual electricity relays  indicating whether they are to stop or allow the flow of power to the associated device compared to the other configurations. This configuration may provide a higher level of control, and thus may provide better power reductions, but may require more signaling overhead between components.","In a distributed configuration, environment station  may provide electricity relays  with information regarding the amount of power being used by building  (e.g., based on devices  and\/or other devices within building ). Environment station  may also provide electricity relays  with a power rate associated with a cost of power. The power rate may be provided by power company  and may vary over time. In some embodiments, environment station  may also provide electricity relays  with weather information. Electricity relays  may also receive a message regarding, or may otherwise determine, a state associated with a corresponding device . The state may be based on, or represent, a percentage of available capacity or it may be a ratio of, or difference between, a current parameter to an ideal parameter (e.g., the current temperature to a desired temperature). Based on this information, each electricity relay  may make its own determination, independent of the other electricity relays , as to whether to allow power to flow to the corresponding device . In this configuration, there is a relatively low amount of overhead because environment station  only provides the power usage and power rate information (and in some embodiments weather information). In some scenarios, the electricity relays do not need to send any information to the environment station. On the other hand, because each electricity relay  is independently making its own decision, environment station  may have relatively little control over how building  consumes power.","In a hybrid configuration, environment station  may receive power rate information from power company  and weather information from weather information provider . Environment station  may use the information along with one or more control parameters received from an operator (e.g., a system or building administrator responsible for managing the power consumption of building ) to generate one or more threshold values. Environment station  may transmit the one or more thresholds to electricity relays . Electricity relays  may compare a state associated with the corresponding device  with the received thresholds to determine when to allow power to flow to the corresponding device . For example, in some embodiments, environment station  may determine two thresholds. If the state of the corresponding device  is above an upper threshold, electricity relay  may stop the flow of power to the corresponding device ; if the state is below a lower threshold, electricity relay  may start allowing power to flow to the corresponding device ; and if the state is between the two thresholds, electricity relay  may stop the flow of power to the corresponding device  and\/or may start a back-off timer before resuming the flow of power to the corresponding device . Each electricity relay  may use a different or random length back-off timer to help reduce the number of devices  that begin receiving power at the same time.","In a hybrid configuration, environment station  may have greater control over the power consumption of devices  than in the distributed configuration because the environment station  can adjust the various thresholds to affect the power consumption of building . However, it may not have the same level of control as the centralized configuration because environment station  may not send individual commands to individual electricity relays. The hybrid configuration may also have a lower overhead than the centralized configuration because individual electricity relays  may not send information to environment station  nor may environment station  individually signal each electricity relay  when to stop and when to allow the flow of power to the corresponding device . However, as discussed above, the hybrid configuration may not provide the same level of control as the centralized configuration.","Depending on the type of device  and\/or the control scheme used by environment station , the management of power consumption may include more than deciding whether to stop or allow the flow of power to the device. For example, environment station  may determine to reduce the amount of power that the device consumes. For example, environment station  may decide to lower the CPU speed of computers (e.g., desktop or laptop). As another example, environment station  may determine to lower the brightness of lights, signs, or display devices. As another example, environment station  may decide to adjust the duration of inactivity of a computer before the computer enters a hibernation state. As another example, environment station  may decide to reduce the amount of power provided to an HVAC unit to allow the HVAC unit to provide cool air that is not quite as cool as if the HVAC unit was able to receive full power.","In certain embodiments, an operator responsible for managing the power consumption of building  may adjust the control parameter to modify the various thresholds. This may provide the operator with the ability to control the level of conservation with which environment station  manages power consumption for building . The control parameter may be adjusted in any of the configurations. In the distributed configuration, environment station  may distribute any adjustments to the control parameter to electricity relays .","In certain embodiments, the threshold values used in any of the configurations may also be adjusted in a dynamic manner based on the peak load and the current load. For example, in some instances, power company  may base the power rate on the time that the power is consumed, as well as the peak load consumed by building  during a particular cycle, such as a billing cycle. In some instances, environment station  (and\/or electricity relays ) may attempt to limit the power consumption so as to minimize the peak load generated by building . This may be done by adjusting one or more thresholds so as to limit the amount of power that is consumed at any given time. In certain embodiments, the threshold may be reduced quickly as the power consumption reaches a peak load (e.g., a previous peak load within the same current cycle). Then, as the current load decreases, power station  may gradually increase the threshold back up.","Devices  may comprise any of a variety of different types of devices able to store energy. The depicted devices include HVAC device , laptop devices and , and water heater . The energy may be stored in any of a variety of different ways. For example, laptops and may store energy within their batteries. HVAC device may store energy in the temperature of the rooms. Water heater device may store energy in the water held within water heater . Because devices  are able to store energy, in one form or another, building  may continue to function within acceptable parameters even though power may not be flowing to some of the corresponding devices . For example, water heater may not need to continually heat the water if the water is already hot. Another example, HVAC may lower the temperature of building  a few degrees below a threshold before a peak load period and then may allow the temperature to rise a few degrees above a threshold during the peak load period. Similarly, laptops and may store power in their batteries and then can run on battery power during at least a portion of a peak load period. Although particular devices  have been depicted, other devices capable of storing energy in one form or another may also be controlled by environment station . In some embodiments, device  may include the logic used to control the flow of power. For example, if electricity relay is integrated into laptop C, the processor of laptop may be used in providing the decision for when to allow the flow of power to laptop ","Electricity relays  may include any combination of hardware, software embedded in a computer readable medium, and\/or encoded logic incorporated in hardware or otherwise stored (e.g., firmware) to implement any number of functions that allow electricity relays  to control the flow of power to their associated devices . Electricity relays  may be able to communicate with environment station  and a corresponding device . Electricity relays  may control the flow of power to the corresponding device . The flow of power may be based on information or requests provided by environment station . The information provided may vary depending upon the configuration of environment station  and electricity relays .","Depending upon device , electricity relay  may be an external component or an internal component to the corresponding device . For example, electricity relay may be an external component to HVAC , such as a standalone device functionally located between a power source and HVAC . Alternatively, electricity relay A may be integrated into a thermostat associated with HVAC . As another example, electricity relay may be a component of the power adapter used to convert AC power from building  to DC power for laptop ","In another scenario, electricity relay may be integrated into laptop . In yet another scenario, electricity relay may be a standalone device, integrated into an outlet or powerstrip, or otherwise electrically positioned a power source and laptop . In some embodiments, electricity relay  may control the flow of power based on information provided by the corresponding device . For example, the corresponding device  may provide electricity relay  with information regarding the state of the device. For example, laptop may communicate the state of charge of laptop 's battery to electricity relay . As another example, water heater may provide electricity relay with the state of the temperature of the water within water heater ","Power company  may be a utility company responsible for providing electrical power for one or more buildings, such as building . Power company  may charge building  for the power it consumes on a dynamic basis. For example, depending on the time of day, the power rate (e.g., the cost per kilowatt hour) may vary. The power rate charged to building  may also vary depending on the demand rate (e.g., the cost per kilowatt during peak demand). For example, the higher the highest peak within a billing cycle is, the higher the demand rate for that billing cycle. In some instances, the power rate may vary depending on the demand on the utility company by multiple buildings. That is, as more electricity is being consumed, the rate for electricity may increase. As another example, the rate may increase as the amount of power being produced decreases. For example, where a power company uses windmills to generate power, the power may be more expensive on a non-windy day than on a windy day. Power company  may be able to communicate the power rate and\/or the demand rate to environment station . The information may be communicated through, for example, network .","Weather information provider  may be able to provide environment station  with a variety of different types of weather information. For example, weather information provider  may provide current temperature, forecasted temperature, cloud cover, rain, or any other weather indicator which may be suitable for environment station  to consider in determining, or predicting, how to manage power consumption and\/or when there might be a spike in load. For example, if the forecast is for a high temperature, environment station  may predict an increased HVAC load as building  runs the air conditioning to cool down building . Based on this determination, environment station  may, for example, lower one or more thresholds to delay when laptops stop using their battery and begin using AC power. Environment station  may also pre-heat, or pre-cool, building  in anticipation of a predicted spike in power consumption by building .","Although the embodiment depicted in  illustrates a particular number, type, and configuration of electricity relays and devices, other embodiments contemplate any number or arrangement of such components. In addition, the elements may include components centrally located (local) with respect to one another or distributed throughout building  and\/or outside building .",{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 2","b":["200","200","210","220","210","230","210","210","230","210","230"],"i":["a ","a ","b ","b. "]},"Electricity relays  and environment station  may each include one or more portions of one or more computer systems. In particular embodiments, one or more of these computer systems may perform one or more steps of one or more methods described or illustrated herein. In particular embodiments, one or more computer systems may provide functionality described or illustrated herein. In particular embodiments, encoded software running on one or more computer systems may perform one or more steps of one or more methods described or illustrated herein or provide functionality described or illustrated herein.","The components of electricity relays  and environment station  may comprise any suitable physical form, configuration, number, type and\/or layout. As an example, and not by way of limitation, electricity relays  and\/or environment station  may comprise an embedded computer system, a system-on-chip (SOC), a single-board computer system (SBC) (such as, for example, a computer-on-module (COM) or system-on-module (SOM)), a desktop computer system, a laptop or notebook computer system, an interactive kiosk, a mainframe, a mesh of computer systems, a mobile telephone, a personal digital assistant (PDA), a server, or a combination of two or more of these. Where appropriate, electricity relays  and\/or environment station  may include one or more computer systems; be unitary or distributed; span multiple locations; span multiple machines; or reside in a cloud, which may include one or more cloud components in one or more networks.","Where appropriate, one or more components of power consumption management system  may perform without substantial spatial or temporal limitation one or more steps of one or more methods described or illustrated herein. As an example, and not by way of limitation, power consumption management system  may perform in real time or in batch mode one or more steps of one or more methods described or illustrated herein. One or more power consumption management systems may perform at different times or at different locations one or more steps of one or more methods described or illustrated herein, where appropriate.","In the depicted embodiment, electricity relay and environment station  each include their own respective processors  and , memory  and , storage  and , interfaces  and , and buses  and . These components may work together to manage a building's power consumption by managing the flow of power to one or more devices, such as devices . Although a particular power consumption management system is depicted having a particular number of particular components in a particular arrangement, this disclosure contemplates any suitable power consumption management system  having any suitable number of any suitable components in any suitable arrangement. For simplicity, similar components of electricity relay and environment station  will be discussed together wherein the components of environment station  will be identified in parenthesis. However, it is not necessary for both devices to have the same components, or the same type of components. For example, processor  may be a general purpose microprocessor and processor  may be an application specific integrated circuit (ASIC).","Processor  (and\/or ) may be a microprocessor, controller, or any other suitable computing device, resource, or combination of hardware, software and\/or encoded logic operable to provide, either alone or in conjunction with other components, (e.g., memory  or , respectively) power consumption management functionality. Such functionality may include processing power rate information provided by a utility company to determine when to allow and when to prevent the flow of power to, for example, device . The functions performed by the components of electricity relay  and environment station  may vary depending on the configuration of power consumption management system . For example, in a centralized configuration, processor  may use the current power rate information as well as state information associated with device to determine whether electricity relay should stop the flow of power to device . As another example, in a distributed configuration, processor  may use the current power rate information as well as state information associated with device to determine whether electricity relay should stop the flow of power to device . Additional examples and functionality provided, at least in part, by processor  (and\/or ) will be discussed below.","In particular embodiments, processor  (and\/or ) may include hardware for executing instructions, such as those making up a computer program. As an example and not by way of limitation, to execute instructions, processor  (and\/or ) may retrieve (or fetch) instructions from an internal register, an internal cache, memory  (and\/or ), or storage  (and\/or ); decode and execute them; and then write one or more results to an internal register, an internal cache, memory  (and\/or ), or storage  (and\/or ).","In particular embodiments, processor  (and\/or ) may include one or more internal caches for data, instructions, or addresses. This disclosure contemplates processor  (and\/or ) including any suitable number of any suitable internal caches, where appropriate. As an example and not by way of limitation, processor  (and\/or ) may include one or more instruction caches, one or more data caches, and one or more translation lookaside buffers (TLBs). Instructions in the instruction caches may be copies of instructions in memory  (and\/or ) or storage  (and\/or ) and the instruction caches may speed up retrieval of those instructions by processor  (and\/or ). Data in the data caches may be copies of data in memory  (and\/or ) or storage  (and\/or ) for instructions executing at processor  (and\/or ) to operate on; the results of previous instructions executed at processor  (and\/or ) for access by subsequent instructions executing at processor  (and\/or ), or for writing to memory  (and\/or ), or storage  (and\/or 225); or other suitable data. The data caches may speed up read or write operations by processor  (and\/or ). The TLBs may speed up virtual-address translations for processor  (and\/or ). In particular embodiments, processor  (and\/or ) may include one or more internal registers for data, instructions, or addresses. Depending on the embodiment, processor  (and\/or ) may include any suitable number of any suitable internal registers, where appropriate. Where appropriate, processor  (and\/or ) may include one or more arithmetic logic units (ALUs); be a multi-core processor; include one or more processors  (and\/or ); or any other suitable processor.","Memory  (and\/or ) may be any form of volatile or non-volatile memory including, without limitation, magnetic media, optical media, random access memory (RAM), read-only memory (ROM), flash memory, removable media, or any other suitable local or remote memory component or components. In particular embodiments, memory  (and\/or ) may include random access memory (RAM). This RAM may be volatile memory, where appropriate. Where appropriate, this RAM may be dynamic RAM (DRAM) or static RAM (SRAM). Moreover, where appropriate, this RAM may be single-ported or multi-ported RAM, or any other suitable type of RAM or memory. Memory  (and\/or ) may include one or more memories  (and\/or ), where appropriate. Memory  (and\/or ) may store any suitable data or information utilized by electricity relay (and\/or environment station ), including software embedded in a computer readable medium, and\/or encoded logic incorporated in hardware or otherwise stored (e.g., firmware). In particular embodiments, memory  (and\/or ) may include main memory for storing instructions for processor  (and\/or ) to execute or data for processor  (and\/or ) to operate on. In particular embodiments, one or more memory management units (MMUs) may reside between processor  (and\/or ) and memory  (and\/or ) and facilitate accesses to memory  (and\/or ) requested by processor  (and\/or ).","As an example and not by way of limitation, electricity relay  may load instructions from storage  (and\/or ) or another source (such as, for example, another computer system) to memory  (and\/or ). Processor  (and\/or ) may then load the instructions from memory  (and\/or ) to an internal register or internal cache. To execute the instructions, processor  (and\/or ) may retrieve the instructions from the internal register or internal cache and decode them. During or after execution of the instructions, processor  (and\/or ) may write one or more results (which may be intermediate or final results) to the internal register or internal cache. Processor  (and\/or ) may then write one or more of those results to memory  (and\/or ). In particular embodiments, processor  (and\/or ) may execute only instructions in one or more internal registers or internal caches or in memory  (and\/or ) (as opposed to storage  (and\/or ) or elsewhere) and may operate only on data in one or more internal registers or internal caches or in memory  (and\/or ) (as opposed to storage  (and\/or ) or elsewhere).","In particular embodiments, storage  (and\/or ) may include mass storage for data or instructions. As an example and not by way of limitation, storage  (and\/or ) may include a hard disk drive (HDD), a floppy disk drive, flash memory, an optical disc, a magneto-optical disc, magnetic tape, or a Universal Serial Bus (USB) drive or a combination of two or more of these. Storage  (and\/or ) may include removable or non-removable (or fixed) media, where appropriate. Storage  (and\/or ) may be internal or external to electricity relay  (and\/or environment station ), where appropriate. In particular embodiments, storage  (and\/or ) may be non-volatile, solid-state memory. In particular embodiments, storage  (and\/or ) may include read-only memory (ROM). Where appropriate, this ROM may be mask-programmed ROM, programmable ROM (PROM), erasable PROM (EPROM), electrically erasable PROM (EEPROM), electrically alterable ROM (EAROM), or flash memory or a combination of two or more of these. Storage  (and\/or ) may take any suitable physical form and may comprise any suitable number or type of storage. Storage  (and\/or ) may include one or more storage control units facilitating communication between processor  (and\/or ) and storage  (and\/or ), where appropriate.","In particular embodiments, interface  (and\/or ) may include hardware, encoded software, or both providing one or more interfaces for communication (such as, for example, packet-based communication) between electricity relay , environment station , device , any networks, any network devices, and\/or any other computer systems. As an example and not by way of limitation, communication interface  (and\/or ) may include a network interface controller (NIC) or network adapter for communicating with an Ethernet or other wire-based network and\/or a wireless NIC (WNIC) or wireless adapter for communicating with a wireless network.","Depending on the embodiment, interface  (and\/or ) may be any type of interface suitable for any type of network in which the components of power consumption management system  may be used. As an example, and not by way of limitation, the components of power consumption management system  may communicate with one another in an ad-hoc network, a personal area network (PAN), a local area network (LAN), a wide area network (WAN), a metropolitan area network (MAN), or through one or more portions of the Internet or a combination of two or more of these. One or more portions of one or more of these networks may be wired or wireless. One or more portions of one or more of these networks may use a proprietary protocol. For example, electricity relays  and environment station  may use a proprietary and\/or ad-hoc protocol to communicate information amongst one another. The components of power consumption management system  may communicate with a wireless PAN (WPAN) (such as, for example, a BLUETOOTH WPAN), a Wi-Fi network, a WI-MAX network, an LTE network, an LTE-A network, a cellular telephone network (such as, for example, a Global System for Mobile Communications (GSM) network), or any other suitable wireless network or a combination of two or more of these. Electricity relay  (and\/or environment station ) may include any suitable interface  (and\/or ) for any one or more of these networks, where appropriate.","In some embodiments, interface  (and\/or ) may include one or more interfaces for one or more I\/O devices. One or more of these I\/O devices may enable communication between a person and electricity relay  (and\/or environment station ). As an example and not by way of limitation, an I\/O device may include a keyboard, keypad, microphone, monitor, mouse, printer, scanner, speaker, still camera, stylus, tablet, touchscreen, trackball, video camera, another suitable I\/O device or a combination of two or more of these. An I\/O device may include one or more sensors. Particular embodiments may include any suitable type and\/or number of I\/O devices and any suitable type and\/or number of interfaces  (and\/or ) for them. Where appropriate, interface  (and\/or ) may include one or more drivers enabling processor  (and\/or ) to drive one or more of these I\/O devices. Interface  (and\/or ) may include one or more interfaces  (and\/or ), where appropriate.","Bus  (and\/or ) may include any combination of hardware, software embedded in a computer readable medium, and\/or encoded logic incorporated in hardware or otherwise stored (e.g., firmware) to couple components of electricity relay  (and\/or environment station ) to each other. As an example and not by way of limitation, bus  (and\/or ) may include an Accelerated Graphics Port (AGP) or other graphics bus, an Enhanced Industry Standard Architecture (EISA) bus, a front-side bus (FSB), a HYPERTRANSPORT (HT) interconnect, an Industry Standard Architecture (ISA) bus, an INFINIBAND interconnect, a low-pin-count (LPC) bus, a memory bus, a Micro Channel Architecture (MCA) bus, a Peripheral Component Interconnect (PCI) bus, a PCI-Express (PCI-X) bus, a serial advanced technology attachment (SATA) bus, a Video Electronics Standards Association local (VLB) bus, or any other suitable bus or a combination of two or more of these. Bus  (and\/or ) may include any number, type, and\/or configuration of buses  (and\/or ), where appropriate. In particular embodiments, one or more buses  (which may each include an address bus and a data bus) may couple processor  (and\/or ) to memory  (and\/or ). Bus  (and\/or ) may include one or more memory buses.","Herein, reference to a computer-readable storage medium encompasses one or more tangible and non-transitory computer-readable storage media possessing structures. As an example, and not by way of limitation, a computer-readable storage medium may include a semiconductor-based or other integrated circuit (IC) (such, as for example, a field-programmable gate array (FPGA) or an application-specific IC (ASIC)), a hard disk, an HDD, a hybrid hard drive (HHD), an optical disc, an optical disc drive (ODD), a magneto-optical disc, a magneto-optical drive, a floppy disk, a floppy disk drive (FDD), magnetic tape, a holographic storage medium, a solid-state drive (SSD), a RAM-drive, a SECURE DIGITAL card, a SECURE DIGITAL drive, a flash memory card, a flash memory drive, or any other suitable tangible computer-readable storage medium or a combination of two or more of these, where appropriate. Herein, reference to a computer-readable storage medium excludes any medium that is not eligible for patent protection under 35 U.S.C. \u00a7101. Herein, reference to a computer-readable storage medium excludes transitory forms of signal transmission (such as a propagating electrical or electromagnetic signal per se) to the extent that they are not eligible for patent protection under 35 U.S.C. \u00a7101.","Particular embodiments may include one or more computer-readable storage media implementing any suitable storage. In particular embodiments, a computer-readable storage medium implements one or more portions of processor  (and\/or ) (such as, for example, one or more internal registers or caches), one or more portions of memory  (and\/or ), one or more portions of storage  (and\/or ), or a combination of these, where appropriate. In particular embodiments, a computer-readable storage medium implements RAM or ROM. In particular embodiments, a computer-readable storage medium implements volatile or persistent memory. In particular embodiments, one or more computer-readable storage media embody encoded software.","Herein, reference to encoded software may encompass one or more applications, bytecode, one or more computer programs, one or more executables, one or more instructions, logic, machine code, one or more scripts, or source code, and vice versa, where appropriate, that have been stored or encoded in a computer-readable storage medium. In particular embodiments, encoded software includes one or more application programming interfaces (APIs) stored or encoded in a computer-readable storage medium. Particular embodiments may use any suitable encoded software written or otherwise expressed in any suitable programming language or combination of programming languages stored or encoded in any suitable type or number of computer-readable storage media. In particular embodiments, encoded software may be expressed as source code or object code. In particular embodiments, encoded software is expressed in a higher-level programming language, such as, for example, C, Perl, or a suitable extension thereof. In particular embodiments, encoded software is expressed in a lower-level programming language, such as assembly language (or machine code). In particular embodiments, encoded software is expressed in JAVA. In particular embodiments, encoded software is expressed in Hyper Text Markup Language (HTML), Extensible Markup Language (XML), or other suitable markup language.","The following explanation may provide additional detail as to some of the components and features of power consumption management system . The illustrated components of power consumption management system  may allow an owner or manager of a building, campus, or business (generally referred to as a building) to build and\/or operate their own power consumption management system within their building to control the flow of power to devices having a deferrable load. In particular embodiments, the power demand of devices  may be considered as a value which can be controlled by environment station . Processor  may control the power usage of devices  via one or more thresholds. Interface  may broadcast the one or more thresholds to electricity relays .","The control may be implemented through environment station  and electricity relays  located within the building. This may be done using existing building infrastructure. The flow of power may be controlled to limit the power used by the controlled devices when other heavy loads (e.g. the air conditioning) are consuming power, or during peak hours when the power rate is high. In some embodiments, the management may involve pre-storing energy in the device before peak hours (e.g., charging batteries, lowering or raising a temperature), selectively allowing power to flow to devices to avoid having power flow to all the devices simultaneously, deferring the flow of power until after peak hours, reducing the amount of power that flows to devices, or a combination of any of the above.","Power consumption management system  may be arranged in a variety of configurations including a distributed configuration, a centralized configuration, and a hybrid configuration. The different configurations may represent a balance between the amount of control over the devices and the amount of signaling overhead.","In a distributed configuration, interface  of environment station  may periodically announce (e.g., broadcast over a LAN) overall building power usage (e.g., in kW) and the aggregated power usage of devices  (e.g., via sub-meters associated with devices ). Interface  of electricity relay may receive the announcement from environment station  and pass this information to memory  or storage . Interface  may also receive power rate information and store it in memory  or storage . The power rate information may be received from a utility company via network  or it may be received from environment station . Also stored in memory  or storage  may be the state (e.g., the charge or temperature) associated with device . Processor  may then use the information stored in memory  or storage  to decide whether to stop or allow power to flow to device . A distributed configuration provides simple and low communication overheads but provides limited control over the actual consumption of power.","In one embodiment of a centralized configuration, interface  may periodically receive information regarding the state associated with devices . This information may be received from devices  or from electricity relays . The state information for the different devices may be stored in memory  or storage . Processor  may then sort the devices based on their state (e.g., in decreasing order of their state). Processor  may then analyze the sorted list to determine a threshold value such that a desired number of devices have a state that is above or below the threshold. Interface  may then broadcast the threshold to electricity relays . In some embodiments, interface  may send individual instructions to specific electricity relays  requesting that they allow or stop the flow of power. In embodiments in which environment station  broadcasts a threshold, processor  of electricity relay may then compare the received threshold to a state associated with device to determine whether to stop or allow the flow of power to device ","In some embodiments, processor  may also consider one or more self-protection mechanisms that may be stored in memory  or storage . The self-protection mechanisms may be provided in case communication is lost between electricity relay and environment station . For example, the protection mechanisms may specify that electricity relay shall allow power to flow to device automatically if its state is below a lower threshold and electricity relay shall automatically stop the flow of power to device if its state is above an upper threshold.","In some embodiments, environment station  may treat power consumption management as an optimization problem. In particular embodiments, because the control decisions may be made at different times based on different observation states, environment station  may treat power consumption management as a stochastic dynamic programming problem. One possible objective function may comprise processor  minimizing the electricity bill for the building based on the power rate associated with the building. For example, an objective function that takes into account the power rate and the demand rate may be formulated as:",{"@attributes":{"id":"p-0057","num":"0056"},"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"munder":{"mi":"min","mrow":{"mo":["{","}"],"mrow":{"mo":["[","]"],"msub":{"mi":"r","mrow":{"mi":["i","t"],"mo":","}}}}},"mo":"\u2062","mrow":{"mrow":{"mo":["{","}"],"mrow":{"mrow":[{"munderover":{"mo":"\u2211","mrow":{"mi":"t","mo":"=","mn":"1"},"mi":"T"},"mo":"\u2062","mrow":{"msub":{"mi":["c","et"]},"mo":"\u00b7","mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"n"},"mo":"\u2062","mrow":{"msub":[{"mi":"p","mrow":{"mi":["i","t"],"mo":","}},{"mi":"r","mrow":{"mi":["i","t"],"mo":","}}],"mo":"\u00b7"}}}},{"msub":{"mi":["c","d"]},"mo":"\u00b7","mrow":{"munder":{"mi":"max","mrow":{"mi":"t","mo":"=","mrow":{"mn":"1","mo":"~","mi":"T"}}},"mo":"\u2062","mrow":{"mo":["(",")"],"mrow":{"mrow":{"munderover":{"mo":"\u2211","mrow":{"mi":"i","mo":"=","mn":"1"},"mi":"n"},"mo":"\u2062","mrow":{"msub":[{"mi":"p","mrow":{"mi":["i","t"],"mo":","}},{"mi":"r","mrow":{"mi":["i","t"],"mo":","}}],"mo":"\u00b7"}},"mo":"+","msub":{"mi":["B","t"]}}}}}],"mo":"+"}},"mo":"."}}}},"br":{},"b":["230","220","220","220"],"sub":["et ","i,t ","i,t ","i,t","i,t","d ","t "]},"In certain embodiments, processor  may impose the following constraints on the objective function above: (1) the state associated with each device being managed by environment station  may be maintained between a lower threshold m, and an upper threshold M such that m\u2266SOC\u2266M, \u2200=1\u02dcn, t=1\u02dcT where SOCmay represent the state of device i at time t; (2) a minimum state level of a device at the end of the control interval (e.g., a user can specify that by 6:00 p.m. the state of device i is at or above a minimum state level) such that SOC\u2267\u03b2, \u2200i=1\u02dcn where \u03b2i may represent the minimum SOC of device i at the end of the control interval; and (3) the power at each laptop may be balanced such that:\n\n11\n\nwhere umay represent the power used by device i at time t.\n","In certain embodiments, different operators or managers of different buildings may wish to use different electricity rate programs which may lead to different optimization problems. For example, if real-time pricing is to be considered, the price of power, c, may change over time, otherwise cmay be a constant c. As another example, if the demand charge is not considered, the second term in the objective function can be removed and the optimization problem becomes simpler.","In some embodiments, such as where device  is a laptop, the power, P, consumed by the battery charger of the laptop may depend on the level of charge of the battery. Depending on the type of charging used, constant current phase or constant voltage phase, the power used may be different. In some embodiments, given the state of charge of the battery, the required charging power may be retrieved from a look-up table without adding extra complexity to the optimization problem. For example, if all the batteries' state of charge are below a certain threshold and in the fast charging mode (e.g., constant current charging phase), Pmay be simplified as a constant P.","In some embodiments, processor  may be able to select among multiple levels (as opposed to a binary on\/off) for allowing the flow of power to a device. For example, in some embodiments, the rate at which devices  adjust their state may vary (e.g., a battery charger may be able to charge the battery at different speeds or an HVAC unit may be able to control the amount of cold air that is added to a room). In such embodiments, P, and\/or r, may be replaced. For example, the value of Pmay be a continuous value within a specified range such that p\u2266p\u2266P, \u2200i=1\u02dcn, t=1\u02dcT or a discrete value of a set of values (e.g., charging rate values) such that p\u03b5{P}, \u2200i=1\u02dcn, t=1\u02dcT","After interface  of electricity relay receives a broadcasted threshold, processor  may compare the threshold with the current state associated with device . If the current state is greater than the threshold, then electricity relay may stop the flow of power to device . If the current state is less than the threshold then electricity relay may allow power to flow to device . In some embodiments, to avoid synchronized action among electricity relays , processor  may initiate a back-off timer before electricity relay may stop and\/or allow power to flow to device . In some embodiments, the back-off time may comprise a random component to vary the amount of time. In some embodiments, in addition to or instead of being random, the back-off time may vary based on the state associated with a device. This may, for example, enable a device with a lower state to start receiving power sooner (e.g., by setting a shorter back-off time). In some embodiments, the value of the back-off time may be a function of the state of the device, SOC, the threshold received from environment station , \u03b7, and a back-off window size (e.g., a maximum back-off time), W, such that",{"@attributes":{"id":"p-0063","num":"0062"},"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mrow":[{"mi":["back","off","time"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}]},{"mi":"U","mo":"\u2061","mrow":{"mo":["(",")"],"mrow":{"mfrac":{"mrow":[{"mi":["SOC","\u03b7"],"mo":"-"},{"mn":"1","mo":"-","mi":"\u03b7"}]},"mo":"\u00b7","mi":"W"}}}],"mo":"="},"mo":","}}},"br":{}},"In some embodiments, two thresholds, \u03b7and \u03b7, may be broadcast by interface  of environment station . This may enhance the control resolution of environment station . If processor  determines that device 's state is less than a lower threshold, \u03b7, electricity relay may allow power to flow to device . If processor  determines that device 's state is greater than an upper threshold, \u03b7, electricity relay may stop the flow of power to device . If processor  determines that device 's state is between the two thresholds, \u03b7and \u03b7, electricity relay may wait for a back-off amount of time before allowing power to flow to device . In such an embodiment, the back-off time may be based on the following formula",{"@attributes":{"id":"p-0065","num":"0064"},"maths":{"@attributes":{"id":"MATH-US-00003","num":"00003"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":{"mrow":[{"mi":["back","off","time"],"mo":["\u2062","\u2062","\u2062","\u2062"],"mstyle":[{"mtext":"-"},{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}]},{"mrow":{"mo":["(",")"],"mrow":{"mrow":[{"mo":["\u2308","\u2309"],"mrow":{"mfrac":{"mrow":[{"msub":{"mi":"\u03b7","mn":"2"},"mo":"-","mi":"SOC"},{"msub":[{"mi":"\u03b7","mn":"2"},{"mi":"\u03b7","mn":"1"}],"mo":"-"}]},"mo":"\u00b7","mi":"W"}},{"mi":"U","mo":"\u2061","mrow":{"mo":["(",")"],"mn":"1"}}],"mo":"+"}},"mo":"\u00b7","mi":"B"}],"mo":"="},"mo":","}}},"br":{},"b":["230","221"],"i":"a "},"In some embodiments, environment station  may try to limit the peak value of power consumed by the building within a control interval. As the power consumed by the building approaches or surpasses a peak load (e.g. when air conditioning is turned on), environment station  may reduce one or more charging thresholds. Lowering the threshold may stop the flow of power to one or more devices . The greater the drop in the threshold, the more devices for which power is likely to be stopped. As the power consumed by the building drops below the peak value, the one or more threshold may gradually be increased. In some embodiments, the decrease may be more dramatic than the increases. In such an embodiment, memory  or storage  may store a previously recorded peak load value (e.g., the highest peak of a previous interval or the highest peak so far within the current interval). Processor  may load this stored value and use it as an initial target peak load during the control interval. If the current power load consumed by the building exceeds the stored peak value, the stored peak value may be updated to reflect the current power load.","A hybrid configuration may include a lower communication overhead than a centralized configuration but may result in less control.","In some embodiments, memory  and\/or , and\/or storage  and\/or  may store personal preferences for different users. This may allow for more customized control of the flow of power to specific devices . For example, each user can specify a desired state for their device at a particular time (e.g., a fully charged battery at 6:00 p.m.). As another example, devices  may have different modes of operation. For example, HVAC units or water heaters may have standard, economy, and\/or performance modes; laptops or computers may include regular, computing, power saving, mobile, presentation, and\/or gaming modes. Based on the different modes, the default thresholds may vary. In some embodiments, a quota value may be used in addition to a threshold. In such an embodiment, dynamic switching between different modes may be allowed by considering a quota limit. For example, if the power usage of a laptop is close to the quota limit, it is possible to change the mode of this laptop to power saving mode where more aggressive power saving such as reduced processor speed, dimmer display, shorter inactive time to enter hibernation, lower state threshold, etc. may be used.","In some embodiments, such as where the power company does not provide real-time power rate information, processor  may use data stored in memory  and\/or storage  to predict or determine the real-time power rate.","Thus far, several different embodiments and features have been presented. Particular embodiments may combine one or more of these features depending on operational needs and\/or component limitations. This may allow for great adaptability of a power consumption management system to the needs of various organizations and users. Some embodiments may include additional features.",{"@attributes":{"id":"p-0071","num":"0070"},"figref":"FIG. 3","b":["150","220","160","210"]},"The method begins at step  where one or more electricity relays generate an indication of the current state of their associated device. For example, if the associated device is a laptop, the electricity relay may generate an indication of the state of charge of the battery of the laptop. The indication may be generated based on a message received from the associated device. For example, the laptop may send a message to the electricity relay that indicates the state of charge of the laptop's battery. In some embodiments, the current state may be generated based on information collected by the electricity relay. For example, based on the flow of power to the associated device through the electricity relay, the electricity relay may be able to determine the state associated with the device. In particular embodiments, the electricity relay may be a part of the device and thus may be able to determine the current state based on readings (e.g., from sensors) from within the device.","In some embodiments or scenarios, the indication of the current state of the device may be an indication of the energy stored by the device. For example, if the device is a water heater, the current state may be indicative of the current temperature of the water, how far the current temperature of the water is from a desired temperature of the water, an amount of hot water still left in the water heater (e.g., the water heater may stop the flow of cool water into the water heater during times when the power is off thus as hot water is used the water tank of the water heater will be drained), or any other metric or value which may used in determining the current state of the device. In some embodiments, the indication may be generated on a periodic basis, upon detecting a triggering event (e.g., a user turns on the air conditioning), at scheduled intervals, or a combination of the above.","At step  the environment station receives the indication of the current state from the electricity relay. The environment station may receive indications from a number of electricity relays distributed throughout a building (e.g., a single building, multiple buildings, a campus, one or more offices of a business, etc.) for which the environment station may be controlling or managing the power consumption. The environment station may receive the indications from the electricity relays over any of a variety of different wired or wireless communication technologies and\/or protocols. For example, the indications may be received over a local area network, a fiber-optic network, an Ethernet network, a Wi-Fi network, a proprietary network used specifically by the environment station and the electricity relays, or any other wired or wireless network or protocol.","At step  the received indications are sorted. The indications may be sorted in an increasing or decreasing order. For example, if the environment station is managing the power consumption for laptops, the indications of the current states of the laptop's batteries may be sorted such that the batteries with the lowest charge are at the top of the list and batteries with the greatest charge are at the bottom of the list, or vice versa. As another example, if the environment station is managing the power consumption for water heaters or HVAC units, the indications of the current states may be sorted such that the units with the greatest differential between a desired temperature and the current temperature are at the top of the list and those with the smallest differential between the current temperature and the set temperature are at the bottom of the list, or vice versa.","At step  the environment station receives a power rate. The power rate may be associated with a cost of power from a power company. Depending on the power company, the power rate may comprise two different values. One value may be the power rate which may comprise the monetary cost per kilowatt hour of power consumed by the devices within the building. Another value may be a demand rate which may be the monetary cost per kilowatt based on the peak amount of power consumed during a control interval, billing cycle, or some other period of time. That is, power may be more expensive for a building that consumed ten thousand kilowatts at its peak versus a building that consumed one thousand kilowatts at its peak. The power rate may vary over time based on any of a number of factors. For example, the power rate may increase as the power company experiences an increase in overall power consumption by its customers. As another example, the power company may increase the power rate when its source of power generation is reduced (e.g., if the power company relies on wind power, on a non-windy day the power rate may be higher). As another example, the power rate may vary depending on the time of day and the amount of power consumed by the building. In some embodiments, the environment station may attempt to reduce the amount of power being used by the controlled devices so as to keep the peak demand usage low to avoid increasing the demand rate.","At step  a threshold state is determined by the environment station. The threshold state may be determined so as to minimize an electricity bill using an objective function. The threshold state may, in essence, be determined so as to shift the amount of power consumed during times of higher power rates to times when the power rate is lower. The threshold may also be determined to reduce the power consumption as the building's power consumption approaches and\/or exceeds a peak value. This may be done to avoid increasing a peak demand amount.","In some embodiments, the threshold state may include two thresholds, an upper threshold and a lower threshold. The upper threshold may be based on the state at which the device no longer needs to receive power (e.g., the battery is sufficiently charged to run the laptop for a period of time). The lower threshold may be based on the point at which power needs to flow to the device (e.g., the battery's charge is low enough that the laptop may shutdown within a relatively short period of time). The lower threshold may be a safety mechanism such that regardless of the power rate or consumption of power by the building, any device having a state below the lower threshold will receive power. Between the upper threshold and the lower threshold may be a state where the environment station may select devices at random, or based on varying factors, to have the flow of power to the device shut off. Because the state associated with the device is above the lower threshold, it may not be critical that the device receives power. In some embodiments, the threshold state may be set so that a certain number of devices fall above or below the upper or lower threshold. This may be facilitated by the list sorted at step .","At step  a control request is transmitted. The control request may indicate whether the electricity relay is to stop or allow power to flow to the device. The control request may be transmitted individually to specific electricity relays depending on the threshold state determined at step . For example, the environment station may compare the plurality of current states received from the electricity relays with the threshold state. It may then select devices that are above an upper threshold, above a single threshold, or between two thresholds. The environment station may then transmit control requests to the electricity relays of the selected devices requesting that the electricity relays stop the flow of power to their respective devices. In some embodiments, where there are several devices for which power is to be turned off (e.g., where there are multiple devices above the determined threshold state) the control request may be transmitted in a staggered fashion so that several electricity relays are not simultaneously stopping the flow of power. This may prevent having to simultaneously provide power to all those devices at a later time. The control requests may be sent using the same communication standard or medium that was used to receive the indication of the current state at step .","In the depicted scenario, it has been determined the electricity relay is to stop the flow of power to its associated device. For example, it may have been determined that the device is above a threshold state and that it may be possible to stop the flow of power to the device without impacting (within acceptable limits) the performance of the device. Based on this determination, the control request sent at step  may include a request that the electricity relay stop the flow of power to the device. At step  the flow of power is stopped. In other scenarios, the message sent from the environment station may be one that requests the electricity relay to allow, limit, or reduce the flow of power to the device. In such scenarios, step  may comprise allowing, limiting, or reducing the flow of power to the device. For example, once the device stops receiving power, its state will begin to drop over time. After the state falls below a threshold, the control request transmitted at step  may be to allow power to flow to the device. Then, at step  the electricity relay may allow power to flow to the device.","At step , an override request is received. The override request may be received automatically (e.g., based on an operation mode of the device) or manually (e.g., based on a command entered by a user). For example, in some embodiments a user, or the device, may receive a message indicating that the power to the device is about to be turned off. The user or device may then enter an override request to keep the power flowing to the device.","The steps depicted in  are just an example of one embodiment. Other embodiment may have different steps arranged in a different order. For example, the control request sent at step  may request that power be allowed to flow to the device. Accordingly, step  may allow the flow of power to the device rather than stopping the flow of power, as illustrated in the depicted scenario. The depicted method comprises only a single iteration. In practice, the steps in  may be repeated in a continuous loop. Each loop that is repeated may comprise only a subset of the steps illustrated in .",{"@attributes":{"id":"p-0083","num":"0082"},"figref":["FIG. 4","FIG. 4"]},"The method begins at step  where a power usage value is received. The power usage value may be indicative of an amount of power consumed by a plurality of devices. In some embodiments, the power usage value may also include the amount of power consumed by a subset of the plurality of devices. A subset of the plurality of devices may include the devices for which an electricity relay is configured to control the flow of power. These devices may include devices for whom power is being managed (e.g., devices that are connected to an electricity relay) and\/or devices that are not being managed (e.g., devices that are not connected to an electricity relay). In some embodiments, the power usage value may be reflective of the entire power consumption of the building within which the electricity relays, environment station, and devices are located.","At step  a power rate is received by the electricity relay. As discussed above, the power rate may include an power rate as well as a demand rate. In some embodiments, the power rate may be received from an environment station, such as environment station  or environment station . In particular embodiments, the power rate may be received from the power company (e.g., via the Internet).","At step  a state associated with the device is determined. In some embodiments, the state may be determined from a message or other information received from the device. In some embodiments, the state associated with the device may be determined by the electricity relay. For example, the electricity relay may be integrated into the corresponding device. In such an embodiment, electricity relay may be able to use sensors within the device to determine the state of the device. As another example, the electricity relay may monitor the flow of power to the device in order to determine the state associated with the device.","At step  the electricity relay determines whether to allow power to flow to the device. This may be determined based on the power usage value, the power rate, and the current state associated with the device.","The steps depicted in  are just an example of one embodiment. Other embodiment may have different steps arranged in a different order. The depicted method comprises only a single iteration. In practice, the steps in  may be repeated in a continuous loop. Each loop that is repeated may comprise only a subset of the steps illustrated in .",{"@attributes":{"id":"p-0089","num":"0088"},"figref":"FIG. 5"},"The method begins at step  with the environment station receiving a control parameter from an operator. The operator may be a person responsible for the power consumption of a building. The control parameter may be thought of as an adjustable knob which allows the operator to increase or decrease the aggressiveness with which the environment station reduces power consumption within the building. In some embodiments, the control parameter may be pre-programmed into the environment station. In some embodiments, the control parameter may be received when the environment station is initially being configured. In particular embodiments, the control parameter may be received at various times during the operation of the environment station. Although it is depicted as the first step in , the control parameter may be received at any point during the method. Moreover, one or more of the steps depicted in  may be repeated multiple times without receiving another control parameter. For example, the control parameter may be received when the environment station is first initialized, and subsequently steps  through  may be executed several times. After a month, the operator may decide to updates the control parameter and step  may be performed at that time.","At step  a baseline peak load value is determined. The baseline peak load value may be based on a desired peak amount of power consumed by the building within a given period. For purposes of this method, it may be assumed that the given period is a single billing cycle. The baseline peak load value may be a predetermined or preset target peak load value. For example, an operator may decide what peak value they want to use in order to limit their demand rate charge. In some embodiments, the baseline peak load value may be based on a previous peak value within the current billing cycle. For example, when the power load of the building exceeds the current baseline peak load value, the baseline peak load value may be determined to be the current power load. The baseline peak load value may be used by the environment station in determining when, and to what extent, to reduce power consumption by the building. For example, the environment station may begin reducing power consumption before the current power load reaches the baseline peak load value to reduce the likelihood or extent that the power load of the building exceeds the baseline peak load value. This may help the building avoid incurring an increase to the demand rate.","At step  the environment station receives power rate information. As in the previous methods discussed above, the power rate information may include both an power rate and a demand rate. The power rate information may be received from a utility company through any suitable wireless or wired communication means.","At step  a threshold is determined. As discussed above, depending on the embodiment, the threshold may comprise a single threshold or a pair of thresholds comprising an upper threshold and a lower threshold. Whether it is a single threshold or a pair of thresholds, the threshold value may be based on at least the control parameter and the power rate. In some embodiments, the lower the control parameter, the more aggressive the environment station may be in reducing the amount of power consumed by the building. For example, lowering the control parameter may lower one or more thresholds. The lower threshold may result in electricity relays stopping the flow power to their corresponding devices sooner and\/or more often. In particular embodiments, the threshold may be modified based on changes to the power rate. For example, an increase in the power rate may result in the environment station lowering the threshold to more aggressively reduce the amount of power consumed by the building.","At step  a power load value is received. The power load value may be received from one or more meters associated with the building. The power load value may be indicative of the amount of power being consumed by the building. The power load value may comprise one or two values that indicate the amount of power consumed by devices managed by the environment station and\/or devices not managed by the environment station. In some embodiments, the power load value may be used to determine whether the building is approaching or has surpassed the baseline peak load value. In some embodiments, the environment station may predict the power load value based on a received load message. For example, if the environment station receives a load message indicating that the air conditioning is about to turn on, the environment station may determine that a new peak value may be expected. In some embodiments, the environment station may receive weather information from a weather information provider, such as weather information provider . The information may forecast hot weather for the day. Based on this information the environment station may determine that it is going to be using an increased amount of power to run the HVAC unit and thus may be more aggressive in reducing the power used by, for example, laptops.","At step  the power load value is compared to the baseline peak load value. This comparison may be done to determine whether the building is approaching or has already surpassed the peak load value. An increase in the peak load value may cause an increase in the demand rate. In some embodiments, the demand rate may be divided into different levels, each level having a range of peak power consumption and a corresponding charge. In such an instance, the environment station may exceed the baseline peak value by a certain amount as long as it does not rise into the next level.","At step  the threshold is adjusted. In certain embodiments, the amount of the adjustment may be determined based on the comparison at step . For example, if the power load value has exceeded the baseline peak load value, the threshold may be lowered.","Alternatively, if the power load value is below the baseline peak load value, the threshold may be raised. In some embodiments, the amount with which the threshold is lowered at any given time may be greater than the amount by which the threshold is raised at any given time.","At step  the threshold is broadcast to the electricity relays. Because the threshold is a global threshold, each electricity relay may receive the same threshold or thresholds. Each of the plurality of electricity relays may use the received threshold to individually control the flow of power to their respective device. The threshold value may be broadcast using any of a variety of techniques. For example, the threshold may be broadcast over a local area network, a wireless network, or a proprietary network created between the environment station and the plurality of electricity relays.","At step  a state associated with the corresponding device is determined by each respective electricity relay. The state may be determined based on a message received from the corresponding device. For example, if a corresponding device is a laptop, the laptop may send the electricity relay a message indicating the state of its battery (e.g., the charge of the battery). As another example, the electricity relay may be integrated into the corresponding device. This may allow the electricity relay to determine the state associated with the device based on the sensors and other components of the device. The state of the device may be indicative of the amount of energy currently stored by the device. For example, if the device is a laptop, the state may be indicative of the charge of the laptop's battery. The state may be based on the percentage of the charge remaining, the length of time the laptop can run using only the battery, or any other indicator of the amount of energy stored by the laptop's battery. As another example, if the device is an HVAC unit, a water heater or any other device capable of storing thermal energy, the state may be based on a current temperature (e.g., of a room or the water), a difference between the current temperature and an ideal or set temperature, how long the device can maintain the current temperature or remain within a certain number of degrees of the set temperature, or any other indicator of the amount of stored thermal energy. For example, based on the rate at which the temperature changes within the device, the device may determine how long it can maintain the current temperature or how long it can keep the temperature above or below a certain temperature.","At decision step , the electricity relay compares the current state to an upper threshold state to determine whether or not the current state is greater than the upper threshold state. If the current state is greater than the upper threshold state the method continues to step  where the electricity relay stops the flow of power to the device. If the current state is less than the upper threshold, then the method continues to decision step  to determine if the current state is less than a lower threshold.","At step , the electricity relay determines that power is not to flow to the device. In particular, because the current state is greater than the threshold state, the corresponding device may be able to operate within acceptable parameters without receiving power. Over time, as the current state of the device decreases, it may eventually be determined that power needs to flow to the device. In other words, because power is not flowing to the device, the state of the device may, over time, decrease until its state is below one or both thresholds and it is determined, at step , that power is to flow to the device.","At decision step , the electricity relay determines whether the current state is less than a lower threshold. The lower threshold used at step  may be lower than the upper threshold used at step . If the current state is less than the lower threshold, then the method continues to step  where power is allowed to flow to the device. If it is determined that the current state is above the lower threshold (and below the upper threshold) then the method continues to step  where a back-off timer is initiated. The lower threshold may act as a failsafe to ensure that a device below the lower threshold receives power and the device is able to continue to operate within acceptable parameters.","At step , a back-off timer is initiated. The back-off timer may be initiated in order to prevent several devices from simultaneously allowing power to flow to their respective devices. For example, when an operator changes the control parameter, several devices may suddenly find themselves having a current state that is between the two threshold values. Rather than having several electricity relays simultaneously allowing power to flow to the devices, each electricity relay associated with a device between the two thresholds may initiate their own unique back-off timer. This may result in the electricity relays allowing power to flow to the devices in a staggered fashion. This may help prevent increasing the peak load of the building. In certain embodiments, such as the one depicted in , the back-off time is used when the current state is between the two thresholds. In some embodiments that only use one threshold, the back-off timer may be used any time the current state is below the threshold. In some embodiments, the length of time of the back-off timer may vary for a particular device based on the current state of the device.","At step  it is determined that power is to be allowed to flow to the device. This may be done where the current state is less than both the thresholds, or after the back-off timer initiated at step  has expired. Allowing power to flow without waiting for a back-off timer when the current state is less than the lower threshold state may be a failsafe to avoid having a device operate under unacceptable parameters because of a lack of power. Once power begins to flow to the device, the current state will begin to rise. At some point the current state will be greater than the upper threshold and it will be determined that power no longer needs to flow to the device.","The steps depicted in  are just an example of one embodiment. Other embodiment may have different steps arranged in a different order. For example, in some embodiments, only a single threshold may be used as opposed to the two thresholds used in steps  and . In such an embodiment, electricity relays either may have a back-off timer that is set short enough and a threshold that is set high enough such that there is little risk of the back-off timer continuing to run after the device reaches the critical state in which it can no longer operate within acceptable parameters. In some embodiments, when only one threshold is used, no back-off timer may be used. That is, once the current state falls below the threshold state, the electricity relay may allow power to flow to the device. When the state is above the single threshold, the electricity relay may stop the flow of power to the device. As another example, in some embodiments, the method may include allowing a user of a device to provide an override request. For example, if a user is planning on unplugging their laptop from the building power supply, the user may wish to have the battery fully charged. In such a scenario, the user may provide an override request if the electricity relay stops the flow of power to the laptop. The depicted method comprises only a single iteration. In practice, the steps in  may be repeated in a continuous loop. Each loop that is repeated may comprise only a subset of the steps illustrated in .","Some of the steps illustrated in  may be combined, modified, or deleted where appropriate, and additional steps may also be added to any of the flowcharts. For example, the override request shown in step  of the method illustrated in  may be included in either of the methods depicted in . Additionally, steps may be performed in any suitable order without departing from the scope of particular embodiments.","While various implementations and features are discussed with respect to multiple embodiments, it should be understood that such implementations and features may be combined in various embodiments. For example, features and functionality discussed with respect to a particular figure, such as , may be used in connection with features and functionality discussed with respect to another such figure, such as  or , according to operational needs or desires.","Although particular embodiments have been described in detail, it should be understood that various other changes, substitutions, and alterations may be made hereto without departing from the spirit and scope of particular embodiments. For example, although an embodiment has been described with reference to a number of elements included within electricity relay  and environment station  such as a processor, memory, storage, an interface, and a bus, these elements may be combined, rearranged or positioned in order to accommodate particular power consumption management architectures or needs. In addition, any of these elements may be provided as separate external components to electricity relay , environment station , or each other where appropriate. Particular embodiments contemplate great flexibility in the arrangement of these elements as well as their internal components.","Numerous other changes, substitutions, variations, alterations and modifications may be ascertained by those skilled in the art and it is intended that particular embodiments encompass all such changes, substitutions, variations, alterations and modifications as falling within the spirit and scope of the appended claims."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["For a more complete understanding of particular embodiments and their advantages, reference is now made to the following description, taken in conjunction with the accompanying drawings, in which:",{"@attributes":{"id":"p-0009","num":"0008"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIGS. 3-5"}]},"DETDESC":[{},{}]}
