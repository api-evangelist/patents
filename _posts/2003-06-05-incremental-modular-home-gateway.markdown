---
title: Incremental modular home gateway
abstract: The invention concerns a communication device including several external data sources, at least a local area network connecting peripherals, means enabling to establish connections between the local area network and the external data sources, means for controlling the incoming data from the external sources and for sending them to the local area network in order to reduce the bandwidth occupation on the local area network. The device also includes means for updating signalization tables included in the incoming data and means for inserting the modified signalization tables in the transport stream sent to the local area network. It is applicable to IEEE 1394 networks.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07899042&OS=07899042&RS=07899042
owner: Thomson Licensing
number: 07899042
owner_city: Boulogne-Billancourt
owner_country: FR
publication_date: 20030605
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"p":["This application claims the benefit, under 35 U.S.C. \u00a7365 of International Application PCT\/EP03\/50216, filed Jun. 5, 2003, which was published in accordance with PCT Article 21(2) on Dec. 24, 2003 in English and which claims the benefit of European patent application No. 02364030.3, filed Jun. 13, 2002.","The invention concerns a communication device and a communication method.","The invention can be applied for example in the field of home networks.","Typically, a home network allows communication, connection, interoperability between video equipments for personal or recorded video displaying, video games, . . . but mainly it should give to the user the opportunity to communicate easily with the external world.","Video programs, images, music, text pages, information data can be accessed from numerous sources provided by different heterogeneous means of transmission.","For example, television can be broadcasted from satellite, terrestrial, cable, LMDS (Broadcast Network) or delivered by Internet (Broadband Network). That is also true for music or web pages. There is no limit in mixing technologies.","A first approach to connect and adapt the home network to the outside world is to use a residential gateway that has numerous means of reception, a bridge that translates the transport protocol of the incoming data to the protocol supported by the home network.","A solution, commonly proposed, is to provide a box with slots (commonly PCI slots) in which the proper daughter boards are inserted according to the accesses requested by the user.","Such a solution is proposed in the patent application WO 00\/11840 filed in the name of Mitsubishi on Aug. 12, 1999 entitled \u201chome gateway\u201d.","This solution presents a lot of drawbacks that are commonly not admitted in consumer products:\n\n","Patent applications WO 99\/57839 entitled \u201cmethod and apparatus for user and device command and control in a network\u201d filed on May 7, 1999 and WO 01\/13374 entitled \u201cdevice communication and control in a home network connected to an external network\u201d filed on Aug. 17, 2000, both filed in the name of Samsung, describe a system interconnecting several external sources to a local area network. Each module provides a connection with an external data source. However, such modules do not modify the incoming stream in order to enable the cohabitation of several streams on the local area network and in particular do not adapt the incoming streams data rate to the limited bandwidth of a local area network.","The invention proposes a communication device comprising\n\n","According to the invention, the device comprises:\n\n","Such a device controls the incoming data and thus, when the local area network is connected to many external sources, the invention is particularly suitable as it improves the simultaneous transfers of data from the different external sources.","According to a preferred embodiment, the communication device is intended to establish one connection with an external source upon request of peripherals of the local area network.","The connection with an external source is then made when requested, this can enable to save bandwidth on the local area network. Moreover, thanks to the means for controlling the incoming data, the bandwidth occupation is optimized for serving as many as possible requests from the peripherals.","According to a preferred embodiment, the communication device comprises filtering means intended to remove some data coming from the external sources to create a single program transport stream or a partial multiple program transport stream for the local area network from the multiple program transport stream selected from the external source.","A way to reduce the bandwidth is to remove the unnecessary information from the incoming data stream. When the incoming data stream comprises transport streams composed of several programs, some of the programs may not be requested by peripherals on the local area network. Thus a way to reduce the bandwidth is to remove the programs having packet identifiers not requested by the peripherals.","According to a preferred embodiment, the communication device comprises\n\n","When the incoming data is composed of several audio and video streams, the selection of one or more audio or video programs implies also the modification of the tables describing the content of the stream. The tables are modified and then reinserted in the modified stream.","According to a preferred embodiment, the filtering means are intended to remove packets containing non-requested packet identifiers from the multiple transport streams to create single transport streams.","According to a preferred embodiment, the communication device has means to guarantee a copy protection of the data coming from the external source.","Content protection is a key concern in providing audio video data to subscribers.","Some audio video digital programs, music, data are free, some others are in the copyright. These ones are mostly scrambled.","When a customer has paid rights, he can display and record the analog pictures.","In a network, every data of any type can be stored, modified, transmitted, duplicated without significant distortion thanks to the powerful features of the digital equipments that are interconnected.","Royalties must me preserved on one hand and, in the other hand, some copy permission could be granted to the customer.","For the customer, copy permission could be as simple as an instant display or as permissible as a full ownership. Access control level is granted by the owner of the material and the rights are managed by the access control of the gateway module.","Thanks to the access control from the gateway module, all the data in the copyright that are available in the home network have been given the access by the copy protection system.","According to a preferred embodiment, the local area network is compliant with IEEE-1394 protocol.","According to a preferred embodiment, the communication device is intended to generate a data stream on the local area network compliant with DVB or DSS standard.","The invention also concerns a system comprising:\n\n","When the home network is compliant with the IEEE-1394 network, an other fact is often ignored by IEEE-1394 gateway designers:\n\n","A modular gateway as proposed can enable the access to several isochronous channels as each module has its own IEEE-1394 interface and the controlling means enable the cohabitation of the different isochronous channels by sharing the bandwidth among the different gateway modules.","The invention also concerns a communication method between several external data sources and a local area network, said local area network connecting peripherals, comprising the step of:\n\n","The invention also concerns a computer program product comprising program instructions for executing the steps of the method for creating semantic browsing options according to the invention, when said program is loaded on a computer.","The preferred embodiment illustrated by the different figures is based on a local area network compliant with the IEEE-1394 standard and the incoming stream is compliant with MPEG-2 standard.","On , the device  comprises a receiver\/demodulator module  connected to an external network .","The external network  can be a broadcast network, such as a satellite, a terrestrial or a cable network. The receiver demodulator module  comprises radio frequency circuits, a QPSK (standing for \u201cQuaternary Phase Shift Keying\u201d, a COFDM (standing for \u201cCoded Orthogonal Frequency Division Multiplexing\u201d) or QAM (standing for \u201cQuadrature Amplitude Modulation\u201d) demodulator according to the type of chosen front end.","The external network can also be a broadband network such as an ADSL (standing for \u201cAsymmetric Digital Subscriber Line\u201d) network. It gives the means of communication according to the IP protocol for accessing the broadband network.","The receiver demodulator  is connected to a signal processor .","The signal processor  comprises at least a stream filtering module , a tables updating module , a content protection module  and an IP bridging module .","The filtering module is in charge of controlling the incoming data from the external network , in order to save bandwidth on the IEEE-1394 network.","Saving bandwidth on the local area network is particularly important when several communication devices  are connected to the local area network. Each of the device being for instance connected to a different external network, enabling the end user to access several external networks such as ADSL, cable, satellite, . . . .","One limit in connecting a large number of devices  is the bandwidth of the IEEE-1394 network at a given time. When the client terminal, called also peripheral, is requiring a new stream, the local area network can afford the extra load or not.","The interoperability middleware takes care about the status of the home network and assists the user to optimize the network via the User Interface.","Very often, only a program from a multiple program stream is requested so the required bandwidth is reduced; if the incoming stream is compliant with MPEG-2, the stream can be reduced from 30 Mb\/s (the whole multiple program) to 4 Mb\/s. So, each time one program is requested, the stream is sorted to make a SPTS (Single Program Transport Stream) from the MPTS (Multiple Program Transport Stream).","The Program Tables are modified in relationship with the new content of the stream.","The SPTS is created by removing unused PIDs (standing for \u201cPacket Identifiers\u201d) from the MPTS without modifying the PTS\/DTS (standing for \u201cPresentation Time Stamp\/Decode Time Stamp\u201d), then the packets occupy the same temporal location making a stream with holes.","The resultant transport stream is DVB (standing for \u201cDigital Video Broadcast\u201d) or DSS (standing for \u201cDigital Satellite System\u201d) compliant so it is directly sent to the IEEE-1394 bus chipset that is designed for broadcasting isochronous DVB or DSS streams on the home network.",{"@attributes":{"id":"p-0057","num":"0079"},"figref":"FIG. 2"},"The signal processor  comprises also a module  in charge of updating the tables of the incoming stream towards the filtered stream.","The transport stream tables of information describe the content of the stream. They are transmitted inside packets with a known packet identifier (PID).","These packets of data are sorted and temporary stored in a memory of the signal processor , such as a FIFO (standing for \u201cFirst-In First-Out\u201d) memory.","When a predetermined number of packets are stored, they are transferred to the DRAM (standing for \u201cDynamic Random Access Memory\u201d) . The tables are then analyzed by a processor , modified and updated. Then, they are transferred back to the memory of the signal processor . As soon as a packet is ready, it is inserted into the stream in place of a hole in the stream. The holes are created by the filtering module when some packets containing non requested PIDs are removed from the MPTS stream.","The signal processor  comprises also an IP (standing for \u201cInternet Protocol\u201d) bridging module .","IP bridging is performed according to the RFC 2374 December 1999 by P. Johansson that specifies how to use the IEEE Std-1394-1995 for a high performance serial bus, for the transport of Internet Protocol version 4 (Ipv4) datagrams; it defines the necessary methods, data structures and codes for that purpose. These include not only packet formats and encapsulation methods for datagrams, but also an Address Resolution Protocol (1394 ARP) and a Multicast Channel Allocation Protocol (MCAP). Both 1394 ARP and MCAP are specific to Serial bus; the latter permits management of serial bus resources when used by IP multicast groups.","The module  comprises also a content protection module .","As explained earlier, the copy protection system enables the copyright protection of the programs and also enables, if allowed, the copy permission to the end user.","Such a content protection module is thus important in the field of audio video content where copy protection is a key concern.","In a preferred embodiment, the used copy protection system is associated with a smart card reader . The smart card reader enables the user to be identified and informs also the device  of the rights of the user.","The signal processor module is connected to an IEEE-1394 port  composed of a link layer and of a physical layer. It is a standard interface to an IEEE-1394 network. Two IEEE-1394 ports are connected to enable the chaining of peripherals.","A flash memory  and a read only memory (ROM)  are connected to the IEEE-1394 port, to a processor  and to the signal processor .","The flash memory  and the Rom memory  are used by the processor  to store the code instructions. A DRAM (standing for \u201cDynamic Random Access Memory\u201d)  is also connected to the processor.","Device  also comprises a power supply unit , and a clock module  in charge of providing clocks to the different modules of device .","An I2C (standing for \u201cInter-Integrated Circuit\u201d) interface is also connected to the receiver demodulator  and to the processor . The registers of the tuner and the demodulator are programmed through the serial bus interface I2C.","A phone modem , that performs the access to the external network, allows the connection with the broadcaster for interactive TV or the connection to a server for Internet services.","In the cable version, not represented, a modulator can be added to provide a return channel for data returned to a server by using the cable as a bi-directional link.","A firmware  is also running under the control of the processor and will be described with the help of .",{"@attributes":{"id":"p-0076","num":"0098"},"figref":"FIG. 2"},"The incoming stream is, in a preferred embodiment, a Multiple Program Transport Stream (MPTS) compliant with MPEG-2 standard.","Such a stream includes multiple programs. Among these programs, some of them may not be required by the peripherals located on the IEEE-1394 network. So the filtering module  of the signal processor  is in charge of removing the data packets, which are not required by the peripherals.","The MPTS stream comprises also the information tables represented by the SI (standing for \u201cSystem Information\u201d) packets. SI packets are extracted from the incoming MPTS stream and modified according to the newly created stream, called pseudo SPTS stream, which contains only the data packets, which are requested by the peripherals, the modified SI packets and holes instead of the removed packets.",{"@attributes":{"id":"p-0080","num":"0102"},"figref":"FIG. 3","b":"1"},"A house  comprising a home network connected to external sources, , , , , is represented.","The home network comprises an IEEE-1394 network connecting several peripherals such as a home server , a primary display , a camcorder , a digital recorder , a personal computer , a secondary display  and two wireless transmission modules  and .","Four devices A, B, C, D, also called gateway modules, are each connected to an external source.","Modules A and B are respectively connected to satellite antennas  and . Module C is connected to a terrestrial TV antenna , module D is connected to an ADSL network .","The gateway modules are, in a preferred embodiment, clustered in an attic or a cellar of the house. They are chained and only one optical fiber links the cluster to the rest of the network. Such an optical fiber enables to have a relatively long haul transmission or link between the cluster of gateways and the rest of the network. This can be of interest for a home installation purpose.","Such a system enables the connection to several external sources and the number of connections is not limited by the bandwidth of the network as each of the gateway modules has controlling means enabling it to optimize the amount of data sent to the local area network. Moreover, one great advantage of having each gateway connected to an external source is that each of the gateway module has an IEEE-1394 port and thus a sufficient number of isochronous channels can be handled simultaneously. The gateway is thus distributed, fully scalable, giving the end user the best freedom in building its own network. The global gateway function is the sum of small hardware devices controlled by clients in a home network. Clients can be the displays  or , the home server , the digital recorder  or the analog camcorder .",{"@attributes":{"id":"p-0087","num":"0109"},"figref":"FIG. 4","b":"1"},"The firmware stack is running under control of a real time operating system.","At low level, the hardware adaptation layers are composed of several interfaces according to the external sources that are connected.","The hardware adaptation layers make the interface between the receivers and the upper protocol stacks.","The hardware interface in use is depending on the type of the gateway module: it depends on the external source the gateway module is connected to.","A module  controls the access to the IEEE-1394 local area network.","A module  controls the access to the broadcast network and a module  controls the access to the broadband network.","The upper layer is a kernel core in charge of the protocols supported by the gateway modules. The kernel core comprises:\n\n","The upper layer called \u201cuser's libraries core\u201d supports a proprietary interoperability protocol. In another embodiment HAVI (standing for \u201cHome Audio Video interoperability\u201d) or other protocol can also be implemented.","An API (standing for \u201cApplication Programming Interface\u201d) is delivered for allowing an easy implementation of the user application. The user application includes the remote control of the gateway module, data processing . . ."],"heading":["BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Further features of the invention will appear in the following description of exemplary embodiments made with reference to the attached drawing where:",{"@attributes":{"id":"p-0039","num":"0061"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0040","num":"0062"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0041","num":"0063"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0042","num":"0064"},"figref":"FIG. 4"}]},"DETDESC":[{},{}]}
