---
title: Systems and methods for improving calibration of a linear array sensor
abstract: Systems and methods provide calibration for a linear array sensor. A test pattern having a plurality of lines is used. Comparison between expected and measured spacing between a pair of neighboring lines is used to determine sensor position displacement.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07154110&OS=07154110&RS=07154110
owner: Xerox Corporation
number: 07154110
owner_city: Stamford
owner_country: US
publication_date: 20040930
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS"],"p":["1. Field of Invention","This invention relates to systems and methods for improving calibration of a linear array sensor.","2. Description of Related Art","Linear array sensors have been used in binary applications, such as, for example, in a bar code reader. In these applications, each sensor element is used to determine whether light is on or off.","A linear array sensor consists of a series of light sensitive pixels. The pixels are generally characterized by a dark current and a gain. The dark current gives rise to a charge on the sensor when there is no light input. The gain gives the additional charge built up on each pixel per unit of light input.","The dark current and gain of each pixel can be different. When linear array sensors are used for input scanners, the sensitivity of the sensors is calibrated by measuring the response of each pixel under no illumination and the response of each sensor scanning a uniform strip. These two measurements are used to calculate a gain and an offset for the each pixel. This calibration is used to derive a linear equation to relate the charge buildup on each pixel, to the reflection from a surface.","The voltage increase of linear array sensors in response to light input is linear for small light exposures, but saturates for high light exposures. Therefore, for some applications, it may be necessary to use a non-linear equation to relate the response of the sensor to the light exposure.","Some linear array sensors are composed of separate sensor chips butted together. The spacing between neighboring pixels across the sensor chips may not be equal to the spacing between the pixels within a sensor chip. In addition, the sensor chip may be slightly rotated with respect to the axis of the sensor, changing the pixel spacing projected onto the axis of the sensor. Some applications of a linear array sensor require an accurate knowledge of the spacing between each pixel. One particular application is the use of the linear array as a registration sensor in a direct marking printer.","Various exemplary embodiments of the systems and methods according to this invention provide a method for a spatial calibration of a linear array sensor, comprising: providing a target that may have one or more strips; each strip comprising a line target having a plurality of lines of known spacing; obtaining a series of linear array sensor profiles for each strip at different relative positions of the linear array sensor to the strips in a direction perpendicular to the direction of the lines; extracting the centers of the lines from the linear array sensor profile; and determining a displacement associated with each pixel of the linear array sensor based on the known spacing and the measured spacing of the lines.","Various exemplary embodiments of the systems and methods according to this invention provide a method for gray level calibration of a linear array sensor in applications where a substrate of nonuniform reflectivity is monitored. The substrate can be a belt or a drum.","In various exemplary embodiments, the substrate is a drum. The drum has an axis and rotates about the axis. The method comprises: determining a first set of calibration parameters when the drum is at a first rotation angle about the axis, the first set of calibration parameters associated with calibrating the linear array sensor in a direction along the axis when the drum is at the first rotation angle about the axis; determining a second set of calibration parameters when the drum is at a second rotation angle about the axis, the second set of calibration parameters associated with calibrating the linear array sensor in the direction along the axis when the drum is at the second rotation angle about the axis; and storing the first and second sets of calibration parameters.","In various other exemplary embodiments, the substrate is a belt. The belt moves in a process direction along a path. The method comprises: determining a first set of calibration parameters when a reference point of the belt is at a first location along the path, the first set of calibration parameters associated with calibrating the linear array sensor in a direction perpendicular to the path when the belt is at the first location; determining a second set of calibration parameters when the reference point is at a second location in the path, the second set of calibration parameters associated with calibrating the linear array sensor in the direction perpendicular to the path when the reference point is at the second location; and storing the first and second sets of calibration parameters.","In various exemplary embodiments, more than two sets of parameters are obtained and stored. In such exemplary embodiments, a number of n=C\/S sets of parameters are stored, where C is the circumference of the drum or the length of the belt, and S is a distance over which the calibration may change.","In various exemplary embodiments, more than two levels of illumination are provided on the substrate. The corresponding responses at the linear sensor are used for nonlinear gray level calibration.","This and other features and advantages of this invention are described in, or are apparent from, the following detailed description of various exemplary embodiments of the systems and methods according to this invention.","Various exemplary embodiments of systems and methods according to this invention provide improved calibration for linear array sensors. In various exemplary embodiments, the calibration may be performed before a linear array sensor is mounted in a printer. In this exemplary embodiment, the test pattern is printed on paper or some other substrate. In this exemplary embodiment, the linear array sensor may be a full-width array sensor. In various other exemplary embodiments, the calibration may be performed in the printer on the substrate that the linear array sensor is imaging.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":["FIG. 1","FIG. 1"],"b":["10","20","30","10","12","14","12","14","16","40","50","30","10","20","30","16"]},"In various exemplary embodiments, the spacing of the lines in different strips  and  are the same. In various other exemplary embodiments, the spacing of the lines in different strips  and  are different.","In various exemplary embodiments, the distances between different neighboring pairs of the lines  are regular or the same. In various other exemplary embodiments, the distances between different neighboring pairs of the lines  are different or random.","In various exemplary embodiments, the calibration is made by monitoring the test pattern  when the linear array sensor  is in a fixed position. In various other exemplary embodiments, the calibration is made by obtaining a plurality of measurements with the linear array sensor  moved in the cross process direction , which is perpendicular to the direction of the plurality of lines.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIG. 2","FIG. 1"],"b":["30","50"]},"The sensor  can be calibrated before being used in a printer.  illustrates an exemplary embodiment of a test pattern , a substrate, such as paper , with the test pattern , and a sensor . In the system shown in , the test pattern  consists of a set of one or more strips , . Each strip ,  consists of a set of lines  oriented in the process direction  and spaced in the cross process direction . The sensor  can monitor the test pattern  as the substrate  moves under the sensor . Alternatively, the sensor  can monitor the test pattern  as the sensor  is moved over the test pattern .",{"@attributes":{"id":"p-0033","num":"0032"},"figref":["FIG. 4","FIG. 3"],"b":["30","50","16"]},"In various exemplary embodiments, measurements are obtained for the linear array pixel response profile for a dark level and for a single exposure level. In such exemplary embodiments, a gain and an offset for each pixel of the linear array may be established.","In various other exemplary embodiments, measurements are obtained for the linear array pixel response profile for a dark level and for more than one light exposure levels. In such exemplary embodiments, a non-linear relationship may be established between each pixel and the light exposure.","In various exemplary embodiments, to establish the non-linear relationship for each pixel in a linear sensor before it is mounted in a printer (calibration-on-paper technique), the linear array pixel response profile may be mapped by varying the illumination level and monitoring the response to a uniform patch of high reflectivity. An alternative for the calibration-on-paper technique is to monitor a plurality of uniform surfaces, each having a different reflectivity.","In various exemplary embodiments, for establishing the non-linear relationship for each pixel of a linear sensor after the sensor is mounted on the drum (calibration-on-drum technique), the linear array pixel response profile may be mapped by varying the illumination while the sensor monitors a fixed location on the drum surface.","In various exemplary embodiments, to establish the non-linear relationship for each pixel of a linear sensor, the sensor response to more than one levels of illumination intensity is measured. Typically, the response is linear for low levels of illumination. Also typically, at higher illumination levels, the sensitivity of sensor response decreases until it starts to saturate. For calibration purposes, various techniques may be used to relate the sensor response to the local reflectivity of the surface. In one exemplary embodiment, the intermediate responses may be interpolated between the measured responses for each sensor pixel. In other various exemplary embodiments, a function may be fit to each pixel response as a function of illumination intensity. In various exemplary embodiments, a quadratic polynomial function is used to fit the sensor responses. In various other exemplary embodiments, an exponential function is used.","In various exemplary embodiments, a table of coefficients of the fitting function is obtained. The coefficients are used to expeditiously convert a raw sensor measurement into a calibrated sensor measurement when needed.","Various exemplary embodiments of the systems and methods according to this invention provide for marking device receiving member signature calibration. In one exemplary embodiment, the variations of the drum in reflection may have an x-axis signature component, as a function of the axis of the drum (the x-direction), and a rotational signature component, as a function of the rotation angle \u03b8 of the drum. In another exemplary embodiment, the variations of the belt in reflection may have an x-axis signature component, as a function of the cross process position on the belt (the x-direction), and a process direction signature component, as a function of the cross process position on the belt.","In the exemplary embodiment in which the receiving member is a drum, the variation of the reflection along the axis of the drum for a fixed \u03b8 may be confounded with the linear sensor pixel profile. In various exemplary embodiments, for the calibration-on-drum technique, the calibration of the sensor response may automatically calibrate for the x-axis drum signature.","When the drum reflection variation along the x-axis is separable from the drum reflection variation as a function of \u03b8, the drum reflection may be expressed as a product of the x-axis component and the rotational component:\n\n(,\u03b8)=()(\u03b8),\u2003\u2003(1)\n\nwhere r is the reflectivity of the drum surface.\n","In various exemplary embodiments, the reflection variation as a function of \u03b8 (the rotational signature) may be measured by measuring a linear sensor profile and determining the average response of all the pixels. The average sensor response is monitored as a function of rotation angle for a fixed illumination. The average sensor response is used as a scale factor for the calibration. During operation of the sensor, the rotation angle is monitored using a drum encoder, with an appropriate scale factor. The sensor profile is multiplied by the scale factor preceding further processing of the linear sensor image.","When the drum reflection variations in the x-axis direction are not separable from the rotational signature, the rotational signature may depend on a geometric parameter, such as the runout of the drum, or a variation in the property of the drum surface. In various exemplary embodiments, a separate calibration is performed at each rotational angle of the drum. A relationship may be established between drum rotational angles and the period of variations. During operation of the sensor, the rotation angle is monitored using a drum encoder, with an appropriate calibration table.","In various exemplary embodiments using a drum, n sets of calibration parameters are obtained and stored, where n is an integer greater than two and less than n=C\/S, C being a circumference of the drum, and S being a distance on a surface of the drum corresponding to an angular difference between two rotation angles over which the calibration can change significantly.","In the exemplary embodiment in which the receiving member is a belt, the variation of the reflection in the cross process direction for a fixed process direction position may be confounded with the linear sensor pixel profile. In various exemplary embodiments, the calibration of the sensor response may automatically calibrate for the cross process direction belt signature. When the belt reflection variation in the cross process direction is separable from the belt reflection variation as a function of the process direction position, the belt response may be calibrated in a way similar to that expressed in Equation (1), except that the rotational component r(\u03b8) of the drum needs to be replaced by a corresponding process direction component of the belt.","In various exemplary embodiments using a belt, n sets of calibration parameters are obtained and stored, where n is an integer greater than two and less than n=C\/S, C being the length of the belt, and S being a distance on the belt between two process direction positions over which the calibration can change significantly.","Various exemplary embodiments of the systems and methods according to this invention provide sensor pixel position calibration. In various exemplary embodiments, a sensor pixel position calibration may be made by measuring a random line target on a receiving member. The receiving member may include an image recording medium, a photoreceptor drum, an intermediate belt, or the like.",{"@attributes":{"id":"p-0049","num":"0048"},"figref":["FIG. 5","FIG. 1","FIG. 5"],"b":["120","120","121","210"]},"In various exemplary embodiments, for the calibration-on-paper technique, the line spacing  in the test pattern is known. For example, the line spacing has been accurately measured using another technique. Or, the device that prints the lines is know a priori to accurately position the lines. In various exemplary embodiments, for the calibration-on-drum technique, the test pattern is printed on the drum itself.","In various exemplary embodiments, a calibration is needed for a direct marking print engine. The ink ejected from a direct marking print head can have some misdirectionality in the cross process position that is different for each nozzle, but is constant over the time it takes to write the test pattern. In various exemplary embodiments, this misdirection may be mitigated by printing test patterns containing sets of lines printed by a same nozzle. In this configuration, the separation of dashes printed only with the same nozzle is compared and analyzed in calibration. In various exemplary embodiments, the separation is controlled by printing the test pattern with multiple passes, and then measuring the displacement between passes with an x-axis encoder. The separation between test pattern lines can be derived from the x-axis encoder response.","The spatial calibration is performed by analyzing one or more linear sensor response profiles taken when the drum is positioned under the sensor. The presence of printed lines changes sensor response. In particular, the presence of ink on the drum can either decrease or increase the response of sensors, depending on the relative colors of the ink and the drum and the texture of the ink and the drum. For the ease of discussion, it is assumed that the presence of ink decreases sensor response. However, it should be appreciated that the discussion below also applies when the presence of ink increases sensor response.","In various exemplary embodiments, a cross section  of sensor response is used for calibration. As shown in , the cross section  of the sensor response is a collection of profiles through the lines or dashes  in the test pattern . A profile includes sensor response along the cross process direction  at a particular process direction location. In various exemplary embodiments, the cross section  is a collection of profiles through all the dashes  in the test pattern . In various other exemplary embodiments, the cross section  is a collection of profiles through the dashes  near an area where calibration is required.","In a response profile of a cross section  of sensor response, sensor response maxima occur at locations corresponding to positions where dashes  do not exist, such as the gaps  between dashes . On the other hand, sensor response minima occur in the response profile at positions corresponding to locations where dashes  are printed. The positions of the minima are used to obtain the locations of the corresponding dashes .","In various exemplary embodiments, the centers  of the lines or dashes may be determined based on the cross section of sensor response, using the minima in the response profile. The determination may be achieved by any existing or later developed techniques. In various exemplary embodiments, the center  of a dash line is determined based on an interpretation of the response data near the dash line, a mid-point of the line edges of a detected dash line, a non-linear least squares fit, or a multi-dimension vector under the Radar theory.","In various exemplary embodiments the test pattern  includes S strips (see ). Each strip can be measured one or more times, with the sensor in a different cross process position. Each strip can contain N lines. N can be different for each strip, but for simplicity, we assume it is equal for all strips.","In various exemplary embodiments, the spacing  between neighboring lines  which is known is used. Let p\u2212pbe the difference in the positions of the line indexed by j+1 and the line indexed by j for measurement number i. Note that more than one measurement can be taken per strip for the linear sensor in a different cross process position. The difference between the measured and expected spacing may be expressed as:\n\n\u0394=()\u2212(),\u2003\u2003(2)\n\nwhere the first term on the right hand side of the equation is the known spacing .\n","In one exemplary embodiment, sufficient measurements are made so that \u0394x is sampled as finely as the spacing between pixel elements on the linear array sensor. In another exemplary embodiment, less measurements are made and an interpolation technique is used to determine the offsets of the pixel elements that have not sampled the position of a line from the ones that have sampled the position of a line.","A sparse matrix equation may be established by obtaining Equation (2) for a plurality of neighboring line pairs in the test pattern . In addition, an overdetermined matrix equation may be obtained by establishing the Equation (2) for a plurality of measurements. In various exemplary embodiments, the Moore-Penrose technique or another equivalent technique may be used to solve this matrix equations.","In various exemplary embodiments, the solution obtained from the matrix equations is used as a displacement associated with each pixel element of the sensor. This displacement may be used to fine tune the calculation of the line centers . For example, when a line center  is found to be centered under a particular sensor, and this center  was determined as being displaced 10 \u03bcm, then the actual line center will be measured as 10 \u03bcm different from what is assumed based on equally spaced center positions.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":["FIG. 6","FIG. 6"],"b":["100","110"]},"Next, in step S, a function is fit to the sensor responses obtained. In various exemplary embodiments, a linear function is fit to extract parameters such as the dark current and the gain. In various other exemplary embodiments, a non-linear function is fit to extract coefficients, including parameters that indicate saturation of the response.","Then, in step S, measurements are obtained from sensor responses on a random line target. Next, in step S, line centers are extracted from the measured sensor response. In various exemplary embodiments, the sensor response is normalized, and the line centers are extracted from the normalized sensor response.","Then, in step S, sensor displacement is determined from matrix equations comparing expected and actual or measured displacement. Method then proceeds to step S.","In step S, a determination is made whether the displacement determination process needs to be repeated for improved accuracy. If it is determined in step S that improved accuracy is needed, the method returns to step S. Otherwise, operation proceeds to step S, where the method ends.","It should be understood that some steps in , such as steps S, S and S, may be omitted.",{"@attributes":{"id":"p-0067","num":"0066"},"figref":["FIG. 7","FIG. 6"]},"As shown in , the method starts at step S and continues to step S, where sensor responses to the illumination level on the drum are obtained. Next, in step S, a function is fit to the sensor responses to extract coefficients or\/and parameters. The function may be linear or non-linear.","Then, in step S, measurements are obtained from sensor responses at a fixed illumination level as a function of rotation angle of the drum. In various exemplary embodiments, this step is used for drum signature calibration, such as drum rotational signature calibration.","Next, in step S, a random line target is generated using x-axis controller to produce line pairs of known separation. Next, in step S, measurements are obtained from sensor response to the random line target.","Then, in step S, line centers are extracted from the measured sensor response. In various exemplary embodiments, the measured sensor response is normalized and the line centers are extracted from the normalized sensor response.","Next, in step S, sensor displacement is determined from matrix equations comparing expected and measured or actual displacement. Operation of the method proceeds to step S.","In step S, it is determined whether to repeat the displacement determination process for improved accuracy. If it is determined at S that improved accuracy is needed, operation returns to step S. Otherwise, operation continues to step S, where the method ends.","It should be understood that some steps in , such as steps S, S and S, may be omitted.",{"@attributes":{"id":"p-0075","num":"0074"},"figref":["FIG. 8","FIG. 7"],"b":["300","310","320","330","340","350","360","370","380","390","395"]},"In various exemplary embodiments, the system  is implemented on a programmable general purpose computer. However, the system  can also be implemented on a special purpose computer, a programmed microprocessor or microcontroller and peripheral integrated circuit elements, an ASIC or other integrated circuits, a digital signal processor (DSP), a hard wired electronic or logic circuit, such as discrete element circuit, a programmable logic device such as a PLD, PLA, FPGA or PAL, or the like. In general, any device capable of implementing a finite state machine that is in turn capable of implementing the flowchart shown in  can be used to implement the system .","The input\/output interface  interacts with the outside of the system . In various exemplary embodiments, the input\/output interface  may receive input from the outside, such as an input , via one or more links . The input\/output interface  may output data to an output  via one or more links .","The memory  may also store any data and\/or program necessary for implementing the functions of the system . The memory  can be implemented using any appropriate combination of alterable, volatile, or non-volatile memory or non-alterable or fixed memory. The alterable memory, whether volatile or non-volatile, can be implemented using any one or more of static or dynamic RAM, a floppy disk and a disk drive, a writable or rewritable optical disk and disk drive, a hard drive, flash memory or the like. Similarly, the non-alterable or fixed memory can be implemented using any one or more of ROM, PROM, EPROM, EEPROM, an optical ROM disk, such as a CD-ROM or a DVD-ROM disk and disk drive or the like.","The sensor response obtaining circuit, routine or application  obtains linear array sensor response. The function fitting circuit, routine or application  performs function fitting to the sensor response. The drum signature calibrating circuit, routine or application  performs drum signature calibration. The line center extracting circuit, routine or application  extracts line centers from the sensor response. The displacement determining circuit, routine or application  determines sensor displacement. In various exemplary embodiments, the displacement determining circuit, routine or application  determines sensor displacement using Equation (4). The sensor accuracy controlling circuit, routine or application  determines whether repetition of process is necessary to improve accuracy.","The sensor response obtaining circuit, routine or application , the function fitting circuit, routine or application , the drum signature calibrating circuit, routine or application , the line center extracting circuit, routine or application , the displacement determining circuit, routine or application , and the sensor accuracy controlling circuit, routine or application , may receive data from, or send data to, the memory .","In operation, the sensor response obtaining circuit, routine or application , under control of the controller , receives linear array sensor response to illumination levels and sensor response to random line target. The function fitting circuit, routine or application , under control of the controller , fits a function to the sensor response to the illumination levels. In various exemplary embodiments, the function fitting performance establishes sensor response calibration.","The drum signature calibrating circuit, routine or application , under control of the controller , calibrates drum signature when the sensor has been mounted in a printer. In various exemplary embodiments, the drum signature calibrating circuit, routine or application , on the controller of the controller , calibrates drum signature in the x-axis direction and\/or drum rotational signature based on the sensor response to illumination levels.","The line center extracting circuit, routine or application , under control of the controller , extracts line centers from the sensor response to the random line target. The displacement determining circuit, routine or application , under control of the controller , determines sensor displacement based on the extracted line centers and the known spacing between the line pairs in the random line target. The sensor accuracy controlling circuit, routine or application , under control of the controller , determines whether the extraction of line centers and\/or determination of sensor displacement should be repeated for improved accuracy.","While particular embodiments have been described, alternatives, modifications, variations and improvements may be implemented within the spirit and scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Various exemplary embodiments of the systems and methods of this invention will be described in detail, with reference to the following figures, wherein:",{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 8"}]},"DETDESC":[{},{}]}
