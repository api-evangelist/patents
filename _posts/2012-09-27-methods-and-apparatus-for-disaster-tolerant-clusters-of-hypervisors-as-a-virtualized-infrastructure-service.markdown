---
title: Methods and apparatus for disaster tolerant clusters of hypervisors as a virtualized infrastructure service
abstract: Methods and apparatus for configuring disaster tolerant clusters of hypervisors as a virtualized service. In an exemplary embodiment, a system discovers WWPNs components, identifies networks zones in SANs having connectivity with at least one of the storage arrays and at least one of the journaling appliances, and creates a disaster recovery service offerings including replication in accordance with the selected service offering.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08898507&OS=08898507&RS=08898507
owner: EMC Corporation
number: 08898507
owner_city: Hopkinton
owner_country: US
publication_date: 20120927
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["As is known in the art, cloud computing systems contain a large number of servers and hardware devices, servers, storage systems, networking devices, software modules and components. When configuring a highly available (\u201cHA\u201d) computer system these systems are independent and redundant to provide services regardless of single points of failure. When a computer system (\u201chost\u201d) communicates with a storage system (\u201carray\u201d) using network attached storage (\u201cNAS\u201d) provided over a network (\u201cnetwork\u201d) the host, network, and array are single points of failure. Creating an HA service is achieved by mirroring storage volumes (\u201cvolume\u201d) to redundant arrays as the volumes are modified by the host thereby creating a copy of the volume and making it available via redundant hosts and networks.","The array contains a module or appliance having a splitter (\u201csplitter\u201d) that splits host operations on a volume into duplicates. A splitter is utilized by replication software services (\u201creplication\u201d) to duplicate volume operations and transport them to a redundant array. The replication reproduces the operation on a redundant volume in a redundant array.","In cloud computing, the host is insulated from the operating system software (\u201cOS\u201d) by use of a hypervisor (\u201chypervisor\u201d). The hypervisor creates a software-virtualized representation of the host hardware upon which the OS is installed and virtualized creating a virtual machine (\u201cVM\u201d). Hypervisors on many hosts can communicate across networks regarding VM and host health. In addition, hypervisors can use these networks in conjunction with the replicated volume to manage multiple copies of the VM using redundant hosts. The combination of replication and virtual machines provide an enhanced service where virtual machines will be protected against failures in the infrastructure.","Sets of hosts, switches, and arrays are assembled in close proximity to make up a unit of cloud infrastructure (\u201cinfrastructure\u201d) sometimes referred to as a pod (\u201cpod\u201d) of devices. The pod components are physically connected via Ethernet networks, for example. The logical configuration of pods components and network creates a platform that is sold or leased as a service (\u201cservice\u201d) from a menu of predefined configuration offerings (\u201coffering\u201d) for consumers of cloud computing. Offerings from vendors name the type and quantity of resources such as 3 highly available servers with 16 GB of memory having 4 processors with 20 GB of disk space each and a shared storage volume of 200 GB. This allows for the consumer to use the host and storage resources in predetermined offerings within the pods making up the cloud.","The present invention provides automated configuration for disaster tolerant clusters of hypervisors as a virtualized infrastructure service. Using an information model (IM) including hosts, arrays, network devices, and replication and service offerings in the cloud-computing environment, steps to configure array and replication system can be computed to create a storage service from a storage service offering. Provisioning can execute changes to logical configurations of array and replication services comprised of hosts, networks, replication nodes, and array resources. Provisioning identifies a set of hosts and adaptors along with the replication configurations and array configurations required to provide hosts with high availability as it relates to geographic disasters and\/or single component failures.","Exemplary embodiments of the invention allow for provisioning and configuration of sets of logical services staged at geographic locations utilizing replication and hypervisors, and for automated staging of hosts for use as redundant services and identifies available locations where volumes may be replicated to provide HA or disaster recovery (DR) services.","In one embodiment, using an information model of splitter and POD locations in conjunction with a grading and classification system for physical resources, the system can identify and create logical resources required to satisfy a set of constraints for logical configuration, replication and other resource selections. Resources can then be provisioned into infrastructure services based on Class of Service using a service offering definition into sets of pod infrastructures. Selecting and activating a predefined disaster recovery (\u201cDR\u201d) service offering initiates the automation of the disaster tolerant virtualized infrastructure service.","In one aspect of the invention, a method comprises discovering, using a processor, WWPNs for storage arrays in a system by reading an interface of the storage arrays, discovering WWPNs of ports of the discovered storage arrays, discovering WWPNs of journaling appliances, discovering WWPNs of splitters seen by the journaling appliances, discovering paths for the splitters, discovering network adaptor addresses for the paths, identifying networks zones in SANs having connectivity with at least one of the storage arrays and at least one of the journaling appliances, determining ones of the storage arrays logged in and zoned in the SANs, determining WWPNs of the storage arrays logged in and zoned in the SANs, determining WWPN zoning of the storage arrays, identify adaptors for storage arrays zoned and logged in, determining ones of the storage arrays and ones of the journaling appliances zoned together for correlating replication networks host, determining ones of the storage arrays seen the journaling appliances for correlating ones of the splitters, identifying disaster recovery pools, creating a disaster recovery policy, creating disaster recovery service offerings, the service offerings including geographically separated primary and secondary storage, receiving a user selection of a disaster recovering service offering, assigning hosts to the selected service offering, creating a hypervisor at primary and secondary infrastructure for the selected service offering, creating a volume at the primary and secondary infrastructure for the selected service offering, mapping and masking volumes to the journaling appliance and the hypervisor for the selected service offering, and enabling replication in accordance with the selected service offering.","The method can further include one or more of the following features: applying disaster recovery policy settings to the service, determining an ability to connect volumes from a first pod to a second pod, discovering configuration information for the splitters including adaptor ports of a storage array on which a first one of the splitters is running, using the splitter configuration information to associate replication networks to the storage arrays and to build disaster recovery pools, determining a list of paths for the splitters and a list of network adapter addresses for the paths, correlating the storage arrays to replication networks via a storage area network, correlating the journaling appliances via the storage area networks, and\/or deleting the selected service.","In another aspect of the invention, an article comprises: a computer readable medium containing stored non-transitory instructions that enable a machined to perform: discovering, WWPNs for storage arrays in a system by reading an interface of the storage arrays, discovering WWPNs of ports of the discovered storage arrays, discovering WWPNs of journaling appliances, discovering WWPNs of splitters seen by the journaling appliances, discovering paths for the splitters, discovering network adaptor addresses for the paths, identifying networks zones in SANs having connectivity with at least one of the storage arrays and at least one of the journaling appliances, determining ones of the storage arrays logged in and zoned in the SANs, determining WWPNs of the storage arrays logged in and zoned in the SANs, determining WWPN zoning of the storage arrays, identify adaptors for storage arrays zoned and logged in, determining ones of the storage arrays and ones of the journaling appliances zoned together for correlating replication networks host, determining ones of the storage arrays seen the journaling appliances for correlating ones of the splitters, identifying disaster recovery pools, creating a disaster recovery policy, creating disaster recovery service offerings, the service offerings including geographically separated primary and secondary storage, receiving a user selection of a disaster recovering service offering, assigning hosts to the selected service offering, creating a hypervisor at primary and secondary infrastructure for the selected service offering, creating a volume at the primary and secondary infrastructure for the selected service offering, mapping and masking volumes to the journaling appliance and the hypervisor for the selected service offering, and enabling replication in accordance with the selected service offering.","The article can further include instructions for enabling one or more of the following features: applying disaster recovery policy settings to the service, determining an ability to connect volumes from a first pod to a second pod, discovering configuration information for the splitters including adaptor ports of a storage array on which a first one of the splitters is running, using the splitter configuration information to associate replication networks to the storage arrays and to build disaster recovery pools, determining a list of paths for the splitters and a list of network adapter addresses for the paths, correlating the storage arrays to replication networks via a storage area network, correlating the journaling appliances via the storage area networks, and\/or deleting the selected service.","In a further aspect of the invention, a system comprises: at least one processor, memory coupled to the at least one processor, the memory and the at least one processor configured to enable: discovering WWPNs for storage arrays in a system by reading an interface of the storage arrays, discovering WWPNs of ports of the discovered storage arrays, discovering WWPNs of journaling appliances, discovering WWPNs of splitters seen by the journaling appliances, discovering paths for the splitters, discovering network adaptor addresses for the paths, identifying networks zones in SANs having connectivity with at least one of the storage arrays and at least one of the journaling appliances, determining ones of the storage arrays logged in and zoned in the SANs, determining WWPNs of the storage arrays logged in and zoned in the SANs, determining WWPN zoning of the storage arrays, identify adaptors for storage arrays zoned and logged in, determining ones of the storage arrays and ones of the journaling appliances zoned together for correlating replication networks host, determining ones of the storage arrays seen the journaling appliances for correlating ones of the splitters, identifying disaster recovery pools, creating a disaster recovery policy, creating disaster recovery service offerings, the service offerings including geographically separated primary and secondary storage, receiving a user selection of a disaster recovering service offering, assigning hosts to the selected service offering, creating a hypervisor at primary and secondary infrastructure for the selected service offering, creating a volume at the primary and secondary infrastructure for the selected service offering, mapping and masking volumes to the journaling appliance and the hypervisor for the selected service offering, and enabling replication in accordance with the selected service offering.",{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 1","b":["100","102","104","106","108"]},"The compute layer  comprises components, such as blade servers, chassis and network interconnects that provide the computing power for the platform. The storage layer  comprises the storage components for the platform. The network layer  comprises the components that provide switching and routing between the compute and storage layers ,  within and between platforms, and to the client or customer network.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 2","FIG. 1"],"b":["100","106","150","104","152","102","154","156","108","102"]},{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 3","FIG. 4","FIG. 3"],"b":["302","304","306","302","308","302","310","308","302","312","314","302","316","306","314","318","320","306","316","310","322","316","326"]},"It is understood that a variety of other configurations having different interconnections and storage configuration can be provided to meet the needs of a particular application.","The management layer can include a number of applications to perform various functions for overall control, configuration, etc., of the various platform components. For example, management applications can include a visualization function, such as vSphere\/vCenter, by VMware of Palto Alto, Calif. A further management application can be provided as part of the Unified Computing System (UCS) by Cisco. It is understood that the blade chassis and fabric interconnection can be considered part of the UCS. Another management application can includes a management interface, such as EMC Unisphere, to provide a flexible, integrated experience for managing existing storage systems, such as CLARIION and CELERRA storage devices from EMC. A further management application includes a platform element manager, such as unified infrastructure manager (UIM) by EMC, for managing the configuration, provisioning, and compliance of the platform.","It is understood that various vendor specific terminology, product name, jargon, etc., may be used herein. It is further understood that such vendor specific information is used to facilitate an understanding of embodiments of the invention and should not limit the invention in any way. Any specific vendor information should be construed to mean a generic product, function, or module, absent a clear indication to the contrary.",{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 5","b":["500","500","502","504","506","506","508"]},"The unified infrastructure manager  further includes a change and configuration management module , a policy-based compliance and analysis module , a unified infrastructure provisioning module , a consolidation topology and event service module , and an operational awareness module . The various modules interact with platform elements, such as devices in compute, network and storage layers, and other management applications. The unified infrastructure manager  performs platform deployment by abstracting the overall provisioning aspect of the platform(s) and offering granular access to platform components for trouble shooting and fault management.",{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 6","b":["600","602","604","606","609","600","600"]},"Example:",{"@attributes":{"id":"p-0055","num":"0000"},"ul":{"@attributes":{"id":"ul0001","list-style":"none"},"li":"naviseccli-h 192.168.101.40 bind r5 0-rg0-cap20-rc 1-sp a-sq gg-wc 1"}},"APIs provide a native computer programming language binding that can be executed from the native computer programming language. Java is a widely used language in computer programming and many vendors provide java language libraries and examples to execute commands against the management interface of their devices.",{"@attributes":{"id":"p-0057","num":"0056"},"figref":["FIG. 7","FIG. 1"],"b":["700","702","704","704","706"]},{"@attributes":{"id":"p-0058","num":"0057"},"figref":["FIG. 8","FIG. 7","FIG. 8A"],"b":["800","801"]},"Referring again to , one or more hosts  are associated with a service to fulfill the compute requirements of the service. One or more network adaptors  are associated with a service to indicate the need for Ethernet connectivity to a network. A network profile  is associated with each adaptor  that indicates the VLAN and IP address required to fulfill the storage connectivity using the Ethernet. This network profile  is associated to a storage profile  to indicate that the host is to obtain storage from a network with this VLAN and IP network.","The service offering  is used to hold the relationships and detailed description for the user to choose the offering from a menu of offerings. The storage profile  is associated with the offering  to indicate the class of storage and service settings for the storage to be configured such as features like de-duplication, write once read many, auto-extension, maximum auto-extensions, thin provisioning, etc. A volume profile  is associated with the storage profile  to indicate specific volume properties and characteristics such as size and quota limitations.",{"@attributes":{"id":"p-0061","num":"0060"},"figref":["FIG. 9","FIG. 10"]},{"@attributes":{"id":"p-0062","num":"0061"},"figref":"FIG. 11"},"In step , based on the offering chosen by the user, a pod can be selected by the management layer using the service information model that defines the desired quality of service and class of service required. This information is described in the service information model storage profile and volume profile (see ). Using this information the system can determine the correct pod placement for the volume.","A POD is chosen by matching the class of service defined in the offering with the class of service provided by the POD. The Class of Service (CoS) is defined as a label that is relative to the service provided by the POD. For example, as shown in , a Gold class of service could be defined as having a dedicated LAN, large storage, dedicated ESX and a large server. Silver and Bronze offerings provide less in at least one area. In embodiment, the Gold class of service provides de-duplication. When selecting a POD for service placement the management layer selects an array that provides the de-duplication feature for Gold services. The list of CoS for an array would be cross referenced with the list of CoS for a service offering to locate an acceptable pod and array on which to create the service.","In step , once the volume characteristics and properties are known from the service information model, the service layer can begin to create the volume by defining the configuration settings such as size, protection levels, and placement of the volume on a data mover in relationship to the VLANs connecting the host and array adaptors from the configuration model. The properties of the volume are used in conjunction with the CoS of the Storage Profile to create the configuration settings of the volumes in the service. The Service's network profile determines the VLAN upon which to establish the network connection to the network shared volume. In step , it is determined whether the volume exists, such as by using the management interface of the array the service layer to query the array(s) of the pod to see if there were already volumes created for that service If it is determined the service docs not already contain a volume that meets the criteria of the offering, the management layer executes commands through a mediation interface to the physical device management system to create the volume using the characteristics determined above in step .","Processing continues in step  wherein the volume is exported. Using the network profile information contained in the service information model, the service layer determines the network access restrictions consisting of the VLAN, IP address, and authentication credentials for the network-attached volume.","In step , a host interface is determined using the service information model network profile and the VLAN and IP address settings are determined for the host adaptor. In step , the management layer determines cross-connects. Using the VLAN the correct adaptor for the array can be determined by cross-referencing the membership of the adaptor in a given VLAN. In step , using the information determined above, the array management interface is configured to expose the created volume using NFS protocol to the determined IP address.",{"@attributes":{"id":"p-0068","num":"0067"},"figref":["FIG. 12","FIG. 11"]},{"@attributes":{"id":"p-0069","num":"0068"},"figref":["FIG. 13","FIG. 9"]},{"@attributes":{"id":"p-0070","num":"0069"},"figref":"FIG. 14"},"Exemplary disaster recovery journaling systems are shown and described in exemplary U.S. Pat. Nos. 8,214,612, 8,060,714, and 7,774,565, all of which are incorporated herein by reference. In production mode, a journaling appliance is configured to act as a source side protection agent for a host device. The appliance replicates SCSI I\/O requests where a replicated SCSI I\/O request is sent to the other appliance. After receiving an acknowledgement from the other appliance, the appliance sends the SCSI I\/O request to the logical unit. A splitter is provided as part of the journaling system to \u2018split\u2019 write requests.",{"@attributes":{"id":"p-0072","num":"0071"},"figref":"FIG. 15","b":["1500","1502","1504","1506","1508","1510","1512","1514","1516","1512","1518","1520","1500","1506","1512","1522","1524"]},"The array  is instructed via mediation to create a volume  and export it to network adaptor . The volume  is created using the service offering's storage and volume profiles. The array adaptor  exports the volume  to the network adaptor  and implements the access control defined in the service network profile. The switch\/VLAN  carries NFS over IP traffic from the adaptor  of the array to the adaptor  of the host . The host uses its operating system network file system sub-system to make the array volume visible to the guest of the host. The replication  host appliances and network connectivity supply replication services",{"@attributes":{"id":"p-0074","num":"0073"},"figref":"FIG. 16","b":["1600","1602","1604","1606","1608","1610","1612","1614"]},"Table 1 below shows administration information needed for the replication services. This information provides the replication system(s) information. Replication splitter and array information is discovered using this management information.",{"@attributes":{"id":"p-0076","num":"0075"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"77pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Field\/Type","Usage"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"In Use\/Boolean","In use indicates the replication is using"]},{"entry":[{},{},"the replication network. All other"]},{"entry":[{},{},"details are discovered by relationship"]},{"entry":[{},{},"of replication to array splitter to array"]},{"entry":[{},{},"to POD"]},{"entry":[{},"Name\/String","Symbolic name for this network of"]},{"entry":[{},{},"replication"]},{"entry":[{},"SN #\/String","Serial number of the replication"]},{"entry":[{},{},"system"]},{"entry":[{},"Volumes","Number of physical volumes under"]},{"entry":[{},{},"management and being actively"]},{"entry":[{},{},"replicated"]},{"entry":[{},"LUNs","Number of logical volumes as seen by"]},{"entry":[{},{},"the DR service"]},{"entry":[{},"POD (Vblock)\/String","Logical names of PODs connected in"]},{"entry":[{},{},"this replication network"]},{"entry":[{},"Type","Type of POD"]},{"entry":[{},"Splitter","Type of Splitter hosted on the array"]},{"entry":[{},"Status","Last known status of POD"]},{"entry":[{},{},"infrastructure as being operational or"]},{"entry":[{},{},"failed"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},{"@attributes":{"id":"p-0077","num":"0076"},"figref":"FIG. 17"},"Table 2 below represents the DR policy settings for an exemplary infrastructure service offering. These DR settings will store policies for the replication settings applied when provisioning the DR storage volumes. This information is entered as policy into the algorithm.",{"@attributes":{"id":"p-0079","num":"0078"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"91pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"126pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 2"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Field\/Type","Usage"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Grade\/String","A symbolic name assigned to the"]},{"entry":[{},"policy used to indicate the policy by"]},{"entry":[{},"name in an infrastructure service"]},{"entry":[{},"storage settings"]},{"entry":["RPO\/Time","Recover Point Objective - the goal for"]},{"entry":[{},"the maximum amount of data that will"]},{"entry":[{},"ever be lost due to a disaster or other"]},{"entry":[{},"data-destroying event. Zero is best."]},{"entry":["RTO\/Time","Recover Time Objective - the goal for"]},{"entry":[{},"the maximum time that a recovery"]},{"entry":[{},"operation should ever take. Generally"]},{"entry":[{},"this is in the range of minutes to"]},{"entry":[{},"hours. Zero or instant is best."]},{"entry":["Snapshot policy\/Time ","Identifies how often to take backups"]},{"entry":["Frequency","of volumes for local recovery"]},{"entry":["Granularity\/String","Identifies the rate at which the"]},{"entry":[{},"replication network transmits volume"]},{"entry":[{},"operations for replication"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},{"@attributes":{"id":"p-0080","num":"0079"},"figref":"FIG. 18"},"Table 3 contains information discovered using the replication system management API. This table represents the ability to connect volumes from one POD to another using the replication network.",{"@attributes":{"id":"p-0082","num":"0081"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"105pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}}],"thead":{"row":[{"entry":"TABLE 3"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}},{"entry":["Field\/Type","Usage"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":["Primary POD (Vblock)\/String","Label or logical name for primary"]},{"entry":[{},"cloud infrastructure and location"]},{"entry":["Secondary POD (Vblock)\/String","Label or logical name for secondary"]},{"entry":[{},"cloud infrastructure and location"]},{"entry":["Grade\/String","Symbolic name for the grade of"]},{"entry":[{},"replication provided between these"]},{"entry":[{},"PODs"]},{"entry":["Total Capacity\/Integer","Storage capacity available for"]},{"entry":[{},"replication between volumes at these"]},{"entry":[{},"POD"]},{"entry":["Free Capacity\/Integer","Storage capacity unused by active "]},{"entry":[{},"volumes which is available for"]},{"entry":[{},"replication of new volumes between "]},{"entry":[{},"PODs"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},{"@attributes":{"id":"p-0083","num":"0082"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0084","num":"0083"},"figref":["FIG. 20","FIG. 20"],"b":["2000","2002","2004"]},{"@attributes":{"id":"p-0085","num":"0084"},"tables":{"@attributes":{"id":"TABLE-US-00004","num":"00004"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"84pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"112pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Field\/Type","Usage"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Name\/String","Symbolic name for the DR Pool"]},{"entry":[{},"Primary Pool\/String","Name of array and native storage"]},{"entry":[{},{},"pool"]},{"entry":[{},"Secondary Pool\/String","Name of array and native storage "]},{"entry":[{},{},"pool"]},{"entry":[{},"Primary Sight\/String","Location name of POD"]},{"entry":[{},{},"infrastructure"]},{"entry":[{},"Secondary Sight\/String","Location name of POD"]},{"entry":[{},{},"infrastructure"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},{"@attributes":{"id":"p-0086","num":"0085"},"figref":"FIGS. 21A-D","b":["2100","2102","2104","2106","2108","2110","2112"]},"The initiator group includes servers , the port group  includes a series of ports , and the storage group  includes a volume . The data masking view , in addition to the servers, ports and volumes, includes journaling appliances  with HBAs.",{"@attributes":{"id":"p-0088","num":"0087"},"figref":"FIG. 22"},"Table 5 below identifies the zones in the SAN containing connectivity to a storage array and replication network.",{"@attributes":{"id":"p-0090","num":"0089"},"tables":{"@attributes":{"id":"TABLE-US-00005","num":"00005"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"21pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"63pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"133pt","align":"left"}}],"thead":{"row":[{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]},{"entry":[{},"Field","Usage"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"Adaptor","Address of adaptor connected to this"]},{"entry":[{},{},"zone"]},{"entry":[{},"ZoneMember","Logical name for this zone member"]},{"entry":[{},"Zone","Logical name for this zone"]},{"entry":[{},"Zoneset","Logical name for the set of zones active"]},{"entry":[{},{},"in this zone"]},{"entry":[{},"SAN","Identifier for the network containing "]},{"entry":[{},{},"this zone"]},{"entry":[{},"SAN Device","Identifier for the SAN switch in this"]},{"entry":[{},{},"zone"]},{"entry":[{},"Array","Identifier for the array device in this"]},{"entry":[{},{},"zone"]},{"entry":[{},"Replication host","Identifier for the replication netowrk"]},{"entry":[{},{},"host in this zone"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"2","align":"center","rowsep":"1"}}]}]}}}}},{"@attributes":{"id":"p-0091","num":"0090"},"figref":"FIG. 23","b":["2300","2302","2304","2306","2308","2310","2312","2314","2316"]},"To perform correlation, WWPNs of storage arrays must be discovered (step  ). This is performed by reading the management interface of each array. Exemplary pseudo code below organizes the data into a list, type StorageArrayWWPN, containing each storage array and all of the WWPNs of the storage array ports.",{"@attributes":{"id":"p-0093","num":"0092"},"tables":{"@attributes":{"id":"TABLE-US-00006","num":"00006"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"210pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"class StorageArrayWWPN {"]},{"entry":[{},"\u2003List<WWPN> wwpns"]},{"entry":[{},"\u2003EMC_UIMStorageArray storageArray"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ Determine the WWPNs of a storage array"]},{"entry":[{},"StorageArrayWWPNs("]},{"entry":[{},"\u2003EMC_UIMStorageArray storageArray)"]},{"entry":[{},"{"]},{"entry":[{},"\u2003List<WWPN> WWPNList"]},{"entry":[{},"\u2003foreach storageAdapter (EMC_UIMStorageAdapter contained in "]},{"entry":[{},"\u2003storageArray) {"]},{"entry":[{},"\u2003\u2003foreach storagePort (EMC_UIMStoragePort contained in "]},{"entry":[{},"\u2003\u2003storageAdapter) {"]},{"entry":[{},"\u2003\u2003\u2003WWPNList.add(storagePort.WWPN)"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003return WWPNList"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ Collect the WWPNs of all storage arrays"]},{"entry":[{},"StorageArrays( )"]},{"entry":[{},"{"]},{"entry":[{},"\u2003List<StorageArrayWWPN> storageArrayList"]},{"entry":[{},"\u2003\u2002foreach storageArray (EMC_UIMStorageArray discovered in UIM) {"]},{"entry":[{},"\u2003\u2003StorageArrayWWPN sa"]},{"entry":[{},"\u2003\u2003\u2002sa.storageArray = storageArray"]},{"entry":[{},"\u2003\u2003sa.wwpns = StorageArrayWWPNs(storageArray)"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003return storageArrayList"]},{"entry":[{},"}"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Step  of  refers to replication system discovery. In addition to discovery of the replication system, additional configuration information from each replication system host is needed to perform the correlation. From each replication host the network adaptors are discovered, as well as the splitter configuration. The splitter configuration contains the adaptor ports of the storage array where the splitter is running. The replication host adaptors can be used to discover the host connectivity within the network and the splitter configuration will be used while associating replication networks to storage arrays and building DR pools. Exemplary pseudo code for replication discovery is set forth below.",{"@attributes":{"id":"p-0095","num":"0094"},"tables":{"@attributes":{"id":"TABLE-US-00007","num":"00007"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"28pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"189pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"class RPAWWPN {"]},{"entry":[{},"\u2003List<WWPN> wwpns"]},{"entry":[{},"\u2003List<WWPN> splitters"]},{"entry":[{},"\u2003RPA rpa"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ Determine the WWPNs of a RPA"]},{"entry":[{},"RPAWWPNs("]},{"entry":[{},"\u2003RPA rpa)"]},{"entry":[{},"{"]},{"entry":[{},"\u2003List<WWPN> WWPNList"]},{"entry":[{},"\u2003\/\/ Find the WWPNs of the RPA"]},{"entry":[{},"\u2003foreach wwpn (WWPN contained in rpa) {"]},{"entry":[{},"\u2003\u2003WWPNList.add(wwpn)"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003return WWPNList"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ Determine the WWPNs of the splitters seen by the RPA"]},{"entry":[{},"RPASplitterPaths("]},{"entry":[{},"\u2003RPA rpa)"]},{"entry":[{},"{"]},{"entry":[{},"\u2003List<WWPN> splitterPathList"]},{"entry":[{},"\u2003\u2002foreach splitter (Splitter contained in rpa) {"]},{"entry":[{},"\u2003\u2003foreach splitterPath (SplitterPath contained in splitter) {"]},{"entry":[{},"\u2003\u2003\u2003if (splitterPathList.contains(splitterPath.WWPN)) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003continue \/\/ Already have a path to this WWPN"]},{"entry":[{},"\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\u2003splitterPathList.add(splitterPath.WWPN)"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003return splitterPathList"]},{"entry":[{},"}"]},{"entry":[{},"\/\/ Collect the WWPNs and splitter WWPNs of all RPAs"]},{"entry":[{},"RPAs( )"]},{"entry":[{},"{"]},{"entry":[{},"\u2003List<RPAWWPN> rpaList"]},{"entry":[{},"\u2003\u2002foreach rpa (RPA discovered in UIM) {"]},{"entry":[{},"\u2003\u2003RPAWWPN rp"]},{"entry":[{},"\u2003\u2003rp.rpa = rpa"]},{"entry":[{},"\u2003\u2003rp.wwpns = RPAWWPNs(rpa)"]},{"entry":[{},"\u2003\u2003rp.splitters = RPASplitterPaths(rpa)"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003return rpaList"]},{"entry":[{},"}"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"The recover point appliance (\u201cRPA\u201d) class contains a list of splitters, and each splitter contains a list of paths, and each path contains a list of network adaptor addresses. These adaptor addresses are the addresses of the storage adaptor ports on the storage arrays running the splitter.","For correlating splitters and replication networks, given that the adaptor addresses are known for the array and replication network, the endpoints in the SAN for each device, have been identified, correlation of the storage arrays to the replication networks via the SAN topology can be performed.","This is accomplished in three steps:\n\n","Step  of  identifies the set of storage adaptors that are connected to the SAN. The first step is to collect all of the storage adaptor identifiers (WWPNs) that are logged into the SAN. This is maintained and discovered from the SAN switch management interface API. FIG. [WHAT FIG?] models the connectivity table entries as ConnectedPort objects. The ConnectedPort class contains the WWPN (adaptor address) of the device logged into the SAN array adaptor port (e.g. the WWPN of the device physically connected to the SAN switch port). A list, loggedIn List, is created from this data. The system establishes the physical connectivity of the storage host or array to the SAN switches. Exemplary pseudo code is set forth below.",{"@attributes":{"id":"p-0100","num":"0102"},"tables":{"@attributes":{"id":"TABLE-US-00008","num":"00008"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"210pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/\/ Determine the storage arrays logged in and zoned in the SAN"]},{"entry":[{},"SystemsInSan("]},{"entry":[{},"\u2003List<SystemAdaptor> systemList"]},{"entry":[{},"\u2003StorageSwitch mds)"]},{"entry":[{},"{"]},{"entry":[{},"\u2003class WWPNToVSAN {"]},{"entry":[{},"\u2003\u2003WWPN wwpn"]},{"entry":[{},"\u2003\u2003VSAN vsan"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003List<WWPNToVSAN> loggedInList"]},{"entry":[{},"\u2003List<WWPNZoning> zonedList"]},{"entry":[{},"\u2003List<WWPNZoning> zonedAndloggedInList"]},{"entry":[{},"\u2003\/\/ Find all of the logged and zoned Storage Array WWPNs"]},{"entry":[{},"\u2003foreach v (VSAN contained in the mds) {"]},{"entry":[{},"\u2003\u2003\/\/ Step 1: Determine the adaptor addresses logged into the SAN"]},{"entry":[{},"\u2003\u2003foreach fcIntf (FCInterface contained in v) {"]},{"entry":[{},"\u2003\u2003\u2003foreach connPort (ConnmtedPort contained in fcIntf) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003foreach system (SystemWWPN contained in systemList) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003if (system.wwpns.contains(connPort.WWPN) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003loggedInList.add(connPort.WWPN, v)"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\/\/ Step 2: Determine the storage array WWPN zoning"]},{"entry":[{},"\u2003\u2003foreach zs (Zoneset contained in v) {"]},{"entry":[{},"\u2003\u2003\u2003foreach z (Zone contained in zs) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003foreach zm (ZoneMember contained in z) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003foreach system (StorageArrayWWPN contained in "]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003systemList) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003if (system.wwpns.contains(zm.WWPN) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003zonedList.add(zm.WWPN, zm, z, zs, v, mds,"]},{"entry":[{},"storageArray.storageArray)"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003\/\/ Step 3: Only return storage adaptors that are zoned and logged in"]},{"entry":[{},"\u2003foreach zoned (WWPNZoning contained in zonedList) {"]},{"entry":[{},"\u2003\u2003bool found = false"]},{"entry":[{},"\u2003\u2003foreach loggedIn (WWPNToVSAN contained in loggedInList) {"]},{"entry":[{},"\u2003\u2003\u2003if (loggedIn.wwpn == zoned.wwpn) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003if (loggedIn.vsan.Id != zoned.vsan.Id) {"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003print \u201d Found adaptor logged into to VSAN \u201d + "]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003loggedIn.vsan.Id + \u201c but zoned in VSAN \u201d + zoned.vsan.Id"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003continue"]},{"entry":[{},"\u2003\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003\u2003\u2003\/\/ Found a zoned and logged in storage array WWPN in the "]},{"entry":[{},"\u2003\u2003\u2003\u2003same VSAN!"]},{"entry":[{},"\u2003\u2003\u2003\u2003found = true"]},{"entry":[{},"\u2003\u2003\u2003\u2003zonedAndloggedInList.add(zoned)"]},{"entry":[{},"\u2003\u2003\u2003}"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003\u2003if (!found) {"]},{"entry":[{},"\u2003\u2003\u2003print \u201cFound adaptor zoned in VSAN \u201d + zoned.vsan.Id +"]},{"entry":[{},"\u2003\u2003\u2003\u2003\u201c but the adaptor is not logged into the VSAN\u201d"]},{"entry":[{},"\u2003\u2003}"]},{"entry":[{},"\u2003}"]},{"entry":[{},"\u2003return zonedAndloggedInList"]},{"entry":[{},"}"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"Step  of  correlates replication networks host (RPA) via the storage networks. Creating an intersection of the data collected correlates this information. Processing calls the previous processing and then inspects the collected data to find zones that contain both storage array WWPNs and RPA WWPNs. This identifies zones on the SAN that have both physical and logical connectivity to a storage array and the RPA. The data collection and correlation is repeated for each SAN switch. Exemplary pseudo code is set forth below.",{"@attributes":{"id":"p-0102","num":"0104"},"tables":{"@attributes":{"id":"TABLE-US-00009","num":"00009"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"210pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"0pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"\/\/ Determine storage arrays and RPAs zoned together",{}]},{"entry":[{},"RPAStorageArrayZoning( )",{}]},{"entry":[{},"{",{}]},{"entry":[{},"\u2003List<StorageArrayWWPN> storageArrayList = StorageArrays( )",{}]},{"entry":[{},"\u2003List<RPAWWPN> rpaList = RPAs( )",{}]},{"entry":[{},"\u2003List<WWPNZoning> zonedList",{}]},{"entry":[{},"\u2003\/\/ Determine the storage arrays and RPAs zoned in each MDS",{}]},{"entry":[{},"\u2003foreach mds (SANDevice) {",{}]},{"entry":[{},"\u2003\u2003List<WWPNZoning> storageArrayZoneList",{}]},{"entry":[{},"\u2003\u2003List<WWPNZoning> rpaZoneList",{}]},{"entry":[{},"\u2003\u2003\u2003\/\/ Get zoning ink for the storage arrays and RPAs",{}]},{"entry":[{},"\u2003\u2003\u2003storageArrayZoneList.add (SystemsInSan(storageArrayList, mds))",{}]},{"entry":[{},"\u2003\u2003\u2003rpaZoneList.add(SystemsInSan(rpaList, mds))",{}]},{"entry":[{},"\u2003\u2003\u2003\/\/ Determine the storage arrays and RPAs zoned together",{}]},{"entry":[{},"\u2003\u2003\u2003foreach storageArrayZone (WWPNZoning contained in",{}]},{"entry":[{},"\u2003\u2003\u2003storageArrayZoneList) {",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003foreach rpaZone (WWPNZoning contained in rpaZonList)",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\/\/ See if the WWPNs of the storage array and RPA are ",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003in the same",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\/\/ zone, zoneset, vsan, and mds",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003if (storageArrayZone.vsan.Id == rpaZone.vsan.Id &&",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2002storageArrayZone.set == rpaZone.zoneset &&",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2002storageArrayZone.zone == rpaZone.zone) {",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003WWPNZoning z = storageArrayZone",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003z.rpa = rpaZone.rpa",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003\u2003zonedList.add(z)",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003}",{}]},{"entry":[{},"\u2003\u2003\u2003}",{}]},{"entry":[{},"\u2003\u2003}",{}]},{"entry":[{},"\u2003}",{}]},{"entry":[{},"\u2003return zonedList",{}]},{"entry":[{},"}"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"Step  of  correlates the splitters including host splitter correlations. This ensures the replication network host (RPA) is properly configured and can utilize the storage array splitters. Exemplary pseudo code is set forth below.",{"@attributes":{"id":"p-0104","num":"0106"},"tables":{"@attributes":{"id":"TABLE-US-00010","num":"00010"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0","pgwide":"1"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"3"},"colspec":[{"@attributes":{"colname":"1","colwidth":"7pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"245pt","align":"left"}},{"@attributes":{"colname":"3","colwidth":"7pt","align":"left"}}],"thead":{"row":{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"class RPASplitter {",{}]},{"entry":[{},"\u2003StorageArray storageArray",{}]},{"entry":[{},"\u2003RPA rpa",{}]},{"entry":[{},"}",{}]},{"entry":[{},"\/\/ Determine the storage arrays of the splitters seen by the RPA",{}]},{"entry":[{},"RPAToStorageArrays( )",{}]},{"entry":[{},"{",{}]},{"entry":[{},"\u2003List<StorageArrayWWPN> storageArrayList = StorageArrays( )",{}]},{"entry":[{},"\u2003List<RPAWWPN> rpaList = RPAs( )",{}]},{"entry":[{},"\u2003List<RPASplitter> splitterList",{}]},{"entry":[{},"\u2003\u2003foreach rpa (RPAWWPN contained in rpaList) {",{}]},{"entry":[{},"\u2003\u2003\u2003foreach splitter (WWPN contained in rpa.splitters) {",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003foreach storageArray (StorageArrayWWPN contained in storageArrayList) {",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003if (splitterList.contains(storageArray.storageArray) {",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003continue \/\/ Already found a path to this storage array",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003}",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003if (!storageArray.wwpns.contains(splitter) {",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\u2003continue \/\/ The WWPN in the splitter it not on t is storage array",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003}",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003\/\/ Found the storage array running the splitter",{}]},{"entry":[{},"\u2003\u2003\u2003\u2003\u2003splitterList.add(storageArray.storageArray, rps.rpa)",{}]},{"entry":[{},"\u2003\u2003\u2003}",{}]},{"entry":[{},"\u2003\u2003}",{}]},{"entry":[{},"\u2003}",{}]},{"entry":[{},"\u2003return splitterList",{}]},{"entry":[{},"}"]},{"entry":{"@attributes":{"namest":"1","nameend":"3","align":"center","rowsep":"1"}}}]}}}}},"Processing utilizes information models before provisioning of the configuration changes on the storage array and replication networks. Processing is performed once for each new POD infrastructure put under system management.\n\n","User Input Assertions\n\n",{"@attributes":{"id":"p-0107","num":"0113"},"figref":["FIG. 24","FIG. 16","FIG. 23"],"b":["2400","2402","2404","2406","2408"]},"In step , a connectivity model is produced, such as the model of . In step , pools are identified, as shown in . In step , a DR policy is created, such as that shown in . In step , a DR service offering is created, such as shown in , A, A. The service offering is then ready for provisioning.","After the above discovery and processing, exemplary embodiments of the invention provide automated provisioning of compute systems in DR cluster configurations. To manage these configurations, the system performs a series of processing steps. The system discovers physical and logical topology for the SAN and replication network connectivity, as shown in ,  and  and accompanying pseudo code, to determine connectivity and relationships between storage arrays, splitters, and replication. This allows the system to: understand logical connectivity between replication and storage systems, understand the replication connectivity between PODs, and supply storage selection criteria for service catalogs.","The system creates predefined services using offerings described above. The system can provision primary and secondary POD resources, such as volumes and hypervisors, provision NAS volume exports to hypervisors and hosts on the hypervisor, and provision replication services between volumes being replicated. The system can provide two volumes that are geographically separated as one logical DR enabled volume, and provide DR services using a DR enabled volume.",{"@attributes":{"id":"p-0111","num":"0117"},"figref":["FIG. 25","FIG. 11A","FIG. 19","FIG. 20","FIG. 8"],"b":["2500","2502","2504","2506"]},"In step , hypervisor(s) are created at primary and secondary POD(s) and in step , volumes are created at the primary and secondary POD. In step , the system maps and masks volumes to RPA(s) and hypervisor(s), see, e.g., . After creating the hypervisors at step , an API can be run at the hypervisor management system in step . After creating volumes in step , and map\/mask in step , an API can be run at the array management system in step . After map\/mask in step , in step , replication is enabled, see, e.g.,  , .","It is understood that a splitter can be located in variety of locations to meet the needs of a particular location. In one embodiment, a splitter SPL can be located in the arrays AR, as shown in . In another embodiment, a splitter SPL can be located in the SAN, as shown in . Splitters can reside on the array and\/or in the SAN (fabric-based splitter). The journaling appliance, such as Recoverpoint by EMC Corporation, works to replicate this split traffic. The appliance can work in pairs or in clusters to keep locations replicated.","Referring to , a computer includes a processor , a volatile memory , an output device , a non-volatile memory  (e.g., hard disk), and a graphical user interface (GUI)  (e.g., a mouse, a keyboard, a display, for example). The non-volatile memory  stores computer instructions , an operating system  and data , for example. In one example, the computer instructions  are executed by the processor  out of volatile memory  to perform all or part of the processing described above. An article  can comprise a machine-readable medium that stores executable instructions causing a machine to perform any portion of the processing described herein.","Processing is not limited to use with the hardware and software described herein and may find applicability in any computing or processing environment and with any type of machine or set of machines that is capable of running a computer program. Processing may be implemented in hardware, software, or a combination of the two. Processing may be implemented in computer programs executed on programmable computers\/machines that each includes a processor, a storage medium or other article of manufacture that is readable by the processor (including volatile and non-volatile memory and\/or storage elements), at least one input device, and one or more output devices. Programs may be implemented in a high level procedural or object-oriented programming language to communicate with a computer system. However, the programs may be implemented in assembly or machine language. The language may be a complied or an interpreted language and it may be deployed in any form, including as a stand-alone program or as a module, component, subroutine, or other unit suitable for use in a computing environment. A computer program may be deployed to be executed on one computer or on multiple computers at one site or distributed across multiple sites and interconnected by a communication network. A computer program may be stored on a storage medium or device (e.g., CD-ROM, hard disk, or magnetic diskette) that is readable by a general or special purpose programmable computer for configuring and operating the computer when the storage medium or device is read by the computer to perform processing.","One skilled in the art will appreciate further features and advantages of the invention based on the above-described embodiments. Accordingly, the invention is not to be limited by what has been particularly shown and described, except as indicated by the appended claims. All publications and references cited herein are expressly incorporated herein by reference in their entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The foregoing features of this invention, as well as the invention itself, may be more fully understood from the following description of the drawings in which:",{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 3","FIG. 2"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":["FIG. 4","FIG. 3"]},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 8A"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0026","num":"0025"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 11A"},{"@attributes":{"id":"p-0028","num":"0027"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0029","num":"0028"},"figref":["FIG. 13","FIG. 9"]},{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0032","num":"0031"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0033","num":"0032"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIGS. 21A-D"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 24"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 25"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 25A"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 25B"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 26"}]},"DETDESC":[{},{}]}
