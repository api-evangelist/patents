---
title: Arrangement for common-format notification delivery messages based on notification device type in an IP-based notification architecture
abstract: A notification architecture utilizes multiple processes configured for managing notification operations based on reception of SMTP-based messages within IMAP based message stores. The notification architecture includes a notification process, configured for receiving notification messages for respective subscribers from messaging sources according to a prescribed open protocol such as Internet Protocol. The notification process accesses subscriber profile information from an open protocol-based subscriber directory based on the received notification messages. The notification process determines, for each received notification message, the subscriber's notification preference based on the accessed profile information, and selectively outputs a notification delivery message according to a prescribed open protocol to at least one notification delivery process within the notification architecture based on the subscriber's notification preference. The notification process may have access via the prescribed open protocol to multiple notification delivery processes, each configured for outputting a notification to a subscriber's notification device according to a corresponding device protocol. Hence, subscribers may be notified of events according to their respective preferences, including subscriber device type, or time of notification. The notification process also generates the notification delivery message using selected portions of the notification information and subscriber information based on the notification device type, providing a common format for device specific notification messages. Hence, each notification delivery process can receive device specific notification messages according to a common format from the notification process or another external process.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07092497&OS=07092497&RS=07092497
owner: Cisco Technology, Inc.
number: 07092497
owner_city: San Jose
owner_country: US
publication_date: 20031112
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"p":["This application is a continuation of commonly-assigned, application No. Ser. No. 09\/629,052, filed Jul. 31, 2000 now U.S. Pat. No. 6,671,355.","1. Field of the Invention","The present invention relates to message notification systems configured for sending a notification message to a subscriber having received a message.","2. Description of the Related Art","The evolution of the public switched telephone network has resulted in a variety of voice applications and services that can be provided to individual subscribers and business subscribers. Such services include voice messaging systems that enable landline or wireless subscribers to record, playback, and forward voice mail messages. However, the ability to provide enhanced services to subscribers of the public switched telephone network is directly affected by the limitations of the public switched telephone network. In particular, the public switched telephone network operates according to a protocol that is specifically designed for the transport of voice signals; hence any modifications necessary to provide enhanced services can only be done by switch vendors that have sufficient know-how of the existing public switched telephone network infrastructure.","For example, existing messaging systems such as voice mail messaging systems rely on a proprietary notification system that has limited adaptability to expanded notification schemes. For example, the simplest type of notification system involves a message waiting indicator on a telephone connected to a private branch exchange (PBX), where the PBX asserts a message waiting indicator signal in response to receiving a proprietary command from a connected voice mail system. A more advanced system may initiate a page to a subscriber's pager indicating reception of the stored voice message. In each of these cases, however, the notification process necessarily relies on the proprietary features of the PBX and the associated voice mail system.","Wireless based communications system have voice messaging systems that notify a wireless subscriber via his or her wireless telephone of a stored voicemail message. Such notification systems are beneficial in cases where the subscriber was making another call on his or her wireless telephone, or if the subscriber's wireless telephone was previously unavailable due to being turned off or outside a service area. Such wireless based communications systems, however, rely on the proprietary features of the wireless indications system in order to notify the wireless subscriber.","Short Message Services (SMS) have been implemented in wireless telephone communications systems as a way to send a message to a subscriber's cellular phone to notify the subscriber that he or she has received a new voice mail. A messaging server, also referred to as a Short Message Service Center (SMSC), is configured for receiving a notification message from a messaging source according to Short Message Peer to Peer Protocol (SMPP). The messaging source may be, for example, a voice mail system, a paging system, or an e-mail interface resident within the wireless telephone communications system. The SMSC, in response to receiving the notification message from the messaging source, transmits a short message to the cellular phone based on the destination telephone number specified within the notification message. However, this arrangement still provides only limited flexibility in enabling different sources to send a notification to a cellular phone. Hence, the above-described arrangement still lacks sufficient flexibility and scalability to enable messaging subscribers to select the means for notification.","Unified communications systems are under development as a way of enhancing messaging services for users such as wireless telephone subscribers. A disadvantage of unified communications systems implemented as enhanced versions of the voice mail system, paging system, or e-mail interface resident within the wireless telephone communications system is that such implementation requires detailed knowledge of the proprietary protocols associated with the voice mail systems. Hence, such implementations are available only from switch vendors having knowledge of the proprietary protocols.","Use of a unified communications system implemented independent of the existing proprietary voice mail systems enables service providers to use scalable and distributed systems using recognized communication protocols. Hence, the service providers may use such unified communications systems across multiple platforms, independent of protocol, for storage of various types of messages, for example voice messages, facsimile, and e-mail stored in a centralized messaging store. However, the problem still remains that there exists several different types of notification devices, such as a pager, a phone indicator light, stutter dial tone, facsimile, and telephone. Moreover, for each message that enters a messaging store, one or more subscribers may need to be notified over one or more different notification devices. Finally, the different types of notification devices have respective notification protocols, increasing the complexity in designing a notification source for sending a notification to different types of notification devices.","There is a need for an arrangement that provides an open standards-based architecture for delivering notification for unified messaging systems over a broad range of notification devices.","There also is a need for an arrangement that provides a scalable notification architecture that can provide notification to subscribers via subscriber-selected devices according to subscriber-selected notification requirements.","There also is a need for an arrangement that provide a common, open standards-based messaging format that enables any application to generate or interpret a notification message that may be used to send a notification to a broad range of notification devices.","These and other needs are attained by the present invention, where a notification process, configured for receiving notification messages for respective subscribers from messaging sources according to a prescribed open protocol such as Internet Protocol, accesses subscriber profile information from an open protocol-based subscriber directory based on the received notification messages. The notification process determines, for each received notification message, the subscriber's notification preference based on the accessed profile information, and selectively outputs a notification delivery message according to a prescribed open protocol to at least one notification delivery process based on the subscriber's notification preference. The notification process may have access via the prescribed open protocol to multiple notification delivery processes, each configured for outputting a notification to a subscriber's notification device according to a corresponding device protocol. Hence, subscribers may be notified of events according to their respective preferences, including subscriber device type, or time of notification. Moreover, the notification process generates the notification delivery message using selected portions of the notification information and subscriber information based on the notification device type, providing a common format for device specific notification messages. Hence, each notification delivery process can receive device specific notification messages according to a common format from the notification process or another external process.","One aspect of the present invention provides a method in a server. The method includes obtaining a notification message having been sent from a notification source according to a first open network protocol, the notification message specifying at least one notification recipient and notification information describing a first message having triggered the notification source to send the notification message. The method also includes accessing a subscriber directory, according to a second open network protocol, for subscriber attribute information specifying subscriber notification preference for the specified at least one notification recipient. A notification delivery message is generated that includes (1) a message information part having at least a selected portion of the notification information based on a notification device type specified by the subscriber notification preference, and (2) at least one subscriber information part that specifies attributes for notifying the corresponding at least one notification recipient based on the notification device type. The notification delivery message is output, according to a third open network protocol, to a selected corresponding one of a plurality of notification delivery processes for delivery of the selected portion of the notification information according to a corresponding device protocol of the notification device type. The obtaining of the notification message, and the accessing of a subscriber directory for subscriber notification preferences using open network protocols provides centralized management of notification delivery, enabling the supply of a notification delivery message to selected notification delivery processes based on respective device protocols. Hence, a notification source such as a voice messaging system can send a notification message in order to initiate notification delivery according to a user-selected notification preference such as an e-mail message during business hours, a cellphone during specified meeting hours, or a pager during evening hours. Moreover, the notification preference may specify multiple notification devices, independent of the nature of the notification source. Hence, a subscriber may establish notification preferences for any type of notification device, including selected notification based on the notification source.","Another aspect of the present invention provides a method in a server. The method includes detecting a notification event for at least one notification recipient having a corresponding preference for at least one notification device type, and generating for each notification device type, a notification delivery message. Each notification delivery message includes (1) a message information part having selected notification information based on the notification device type, and (2) at least one subscriber information part that specifies attributes for notifying the corresponding at least one notification recipient based on the corresponding notification device type. The method also includes outputting according to an open network protocol, for each notification device type, the corresponding notification delivery message to a corresponding selected one of a plurality of notification delivery processes for delivery of the selected notification information according to a corresponding device protocol of the notification device type. Hence, any server having access to determine the notification device type for a notification recipient can generate a notification delivery message to be output according to an open protocol to a selected notification delivery process for delivery, eliminating the necessity of implementing device-specific protocols by the server.","Additional advantages and novel features of the invention will be set forth in part in the description which follows and in part will become apparent to those skilled in the art upon examination of the following or may be learned by practice of the invention. The advantages of the present invention may be realized and attained by means of instrumentalities and combinations particularly pointed out in the appended claims.","The disclosed embodiment is directed to an arrangement for providing a common format for device specific notification messages, used to provide notification information to an identified notification recipient based on the notification device type used by the notification recipient. Use of a common format for the device specific notification messages, sent according to an open network protocol such as SMTP, enables any notification process capable of detecting a notification event and identifying a notification device type preference for a notification recipient to send a notification message to an identified notification delivery process, even if the notification process is not part of a unified notification architecture. A description will be provided of the notification architecture that utilizes open network protocols, followed by a description of the common format for device specific notification messaging.",{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 1","b":["10","12","14","12","16","18","20","20","20","20","20"],"i":["a ","b","a ","b "]},"Each notification delivery process  also has a corresponding SMTP based mailbox , referred to as a secondary mailbox, configured for receiving a corresponding notification delivery message . As described in detail below, each SMTP based mailbox  is configured for receiving according to SMTP protocol a corresponding notification delivery message  that specifies selected notification information to be utilized for notification according to a corresponding device-specific protocol. Although the notification delivery message  is typically sent by the notification process  according to accessed subscriber notification preferences, described below, the notification delivery message \u2032 may also be sent independently by the external notification service if properly configured to supply the appropriate notification information according to the device-specific protocol.","Each notification delivery process  is configured for delivering a notification to a subscriber's notification device , according to a corresponding device protocol, based on reception of a notification delivery message  in its corresponding mailbox . For example, the notification delivery process is configured for sending an SMTP-based notification to an e-mail client using an SMTP server for distribution of the selected notification information according to the protocol of the e-mail client . Similarly, the notification delivery process is configured for outputting an SMS-based message to the SMS server for delivery to the subscriber's cellphone . The notification delivery process is configured for sending an outgoing facsimile transmission to a subscriber's fax machine using a fax server , and the notification delivery process is configured for sending a command to the message waiting indicator server for asserting a message waiting light on a subscriber's telephone . The notification delivery process is configured for sending a paging command to a paging server for delivery of a wireless page to a subscriber's pager , and the notification delivery process is configured for requesting an outgoing call server , for example a PBX or a voice over IP call controller, to place an outgoing call to a subscriber's telephone used for notification (e.g., a home telephone or a secretary's telephone) in order to notify the subscriber of the event specified in the notification delivery message .","The notification process  is configured for outputting at least one notification delivery message  to a corresponding selected secondary mailbox  for delivery of a notification to the selected notification device  according to the corresponding protocol. In particular, the notification process  regularly polls the primary mailbox  for received messages from the message store or the external notification service , and obtains the notification messages according to IMAP protocol. According to the disclosed embodiment, the message store outputs a notification message to the primary mailbox  for each message received by the message store . The notification message , illustrated in , specifies at least one notification recipient within a subscriber information part and notification information within a message information part.","The notification process  generates the notification delivery message  and selects the notification delivery process  for delivery of notification information to the corresponding selected notification device  based on accessing subscriber attribute information that specifies the subscriber's notification preferences. In particular, the notification process , in response to detecting a notification message in the primary mailbox , accesses a subscriber directory according to LDAP protocol for retrieval of subscriber attribute information for each notification recipient specified in the notification message .","In particular, the notification process  will determine, for each notification recipient specified in the notification message , whether the notification recipient is a notification subscriber (i.e., subscribes to the notification service), and the subscriber notification preferences for the notification recipient. For example, the subscriber notification preferences may specify that the notification subscriber prefers an e-mail notification at a first prescribed time, an SMS based message at a second prescribed time, and a message waiting indicator (MWI) at all times. Note that the prescribed times for different notification devices may overlap, causing the notification process  to generate multiple device-specific notification delivery message  for a single notification message .",{"@attributes":{"id":"p-0031","num":"0030"},"figref":["FIGS. 2A and 2B","FIG. 1","FIG. 2A","FIG. 2B"],"b":["28","28"]},"As illustrated with respect to , the notification process  retrieves the subscriber notification preferences  from the LDAP directory , for example the destination addresses  of the corresponding notification devices to be used for notification. For example, the subscriber notification preferences  include key value pairs that specify an e-mail address for the e-mail client , and a cellular telephone number of the subscriber's cellphone for SMS notification by the SMS server ","Upon retrieval of the subscriber notification preferences , the notification process  generates at least one notification delivery message  that specifies the destination address  of a corresponding notification device  for the notification recipient, and at least a corresponding selected portion  of the notification information. In particular, the notification process  extracts selected portions of notification information , from the notification message  based on the notification device specified by the subscriber notification preference, and inserts the selected portions of the notification information into the notification delivery message . As illustrated in , items that may be extracted from the received notification message  include: the sender's e-mail address, the sender's telephone number, the sender's name, the subject of the message, the priority of the message, the message type (e-mail, a fax, voice mail), the date and time of the message, the total size of the message, a text excerpt, and a MIME-encoded voice or fax attachment.","For example, the notification process  may generate the notification delivery message for the notification delivery process by including an SMTP header that specifies the destination e-mail address of the secondary mailbox , the subscriber information (also referred to as the subscriber information part) illustrated as the destination address of the e-mail client , and notification information (also referred to as the message information part) such as the source of the original message (\u201cFrom\u201d), date and time stamp, subject line, and a copy of the MIME encoded message attached as a binary file in case the user wishes to play the message (in the case of a .wav file) or view the message (in the case of a tiff file). In addition, the notification process  may generate a notification delivery message for the notification delivery process by including an SMTP header that specifies the destination e-mail address of the secondary mailbox the subscriber information illustrated as the telephone number of the cellphone , and notification information such as the source of the original message (\u201cFrom\u201d), date and time stamp, subject line, and message type. Note that the contents of the notification information differs from the contents of the notification information based on the relative capabilities of the notification devices and . Hence, the notification process  selects the notification information based on the capabilities of the notification device.",{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 2B","b":["18","40","28","28"]},"In particular, the notification delivery message  is constructed as a multipart mixed message with two or more attachments. For example, the notification delivery message  includes a single message information attachment  and at least one subscriber information attachment  for each recipient of the original message. The multipart message may also include either an optional voice attachment or a facsimile attachment implemented as a MIME encoded binary file ","The message information attachment  contains information about the original message that triggered the notification process, including key value pairs such as sender's e-mail, sender's phone, sender's name, subject, priority, message type, prescribed logging information, time, total size, and number of attachments. The subscriber information attachment  contains information about how to notify a subscriber, and lists information about specific subscriber and the notification preference for one or more devices. As illustrated in  the subscriber information provides information on how to notify a subscriber using the e-mail client as the device type; the subscriber information illustrates the information necessary for leaving a message waiting indicator on a subscriber's telephone ","Hence, the data in the message information attachment  and the subscriber information attachment  varies depending on the device type. For a pager, subscriber information would contain an e-mail address or information necessary to deliver the message to the paging provider . For a cellphone, as illustrated in attachment , the subscriber information would include details to contact the short message service of the cellular phone provider.","Hence, the notification process  or the external notification source generates a notification delivery message  having a prescribed format based on the notification device type.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":["FIG. 3","FIG. 3"],"b":["10","12","14"]},"In addition, the disclosed architecture has the advantage that each of the processes  and  are scalable across multiple servers for large-scale deployment as multiprocess systems, where each process communicates with another process by sending SMTP-based messages. For example, multiple notification processes  may be arranged to serve respective groups of subscribers, where a first notification process (e.g., ) forwards a received notification message  to the primary mailbox  of a second notification process (e.g., ) if the first notification process does not serve the subscriber specified in the received notification message.","As shown in , the method begins in step  by the messaging server or the external notification source by sending the notification message  with a copy of the stored message (shown in  as portions and ) to the primary mailbox  of the notification process . The notification process  regularly polls the primary mailbox , implemented within the IMAP message store, and obtains the notification message  in step  according to IMAP protocol and parses the notification message  for the notification recipients.","Upon identifying the notification recipients from the notification message , the notification process  accesses the subscriber LDAP directory  in step  to determine whether the notification recipients are valid notification subscribers. If the notification recipients are valid notification subscribers, the notification process  accesses the subscriber LDAP directory  in step  for the subscriber notification preferences  and all parameters associated with the device protocols to enable notification to the identified user device . If any notification recipient is not a valid notification subscriber, the process is dropped with respect to that notification recipient.","The notification process  parses the notification preferences  in step , and generates the notification delivery messages  for each notification subscriber in step . In particular, the notification process  determines for each notification device  the corresponding destination address , determines the message destination address for the corresponding secondary mailbox  based on the selected device, and attaches the selected notification information  based on the selected device. Typically the notification process  will access a local table that identifies the SMTP destination address for each of the secondary mailboxes . The notification process  then sends the notification delivery messages  to the secondary mailboxes  in step .","As described above, the external notification source may independently generate and output its own notification delivery message \u2032 in accordance with steps  and , where the external notification source may be configured for accessing its own subscriber information .","Each notification delivery process  periodically polls its corresponding secondary mailbox  according to IMAP protocol, and in step  obtains its corresponding received notification delivery message  and parses the notification delivery message  for the destination address information  and the notification information . The notification delivery process  then delivers the supplied notification  to the corresponding associated device server  according to the device server protocol in step . For example, the notification delivery process would send an e-mail message for transmission by the SMTP server that specifies the destination address of the e-mail client and the notification information as an attachment to the e-mail. The notification delivery process , however, would send an SMS message to the SMS message server that specifies the destination address of the cellphone and the text based notification information for display on the subscribers cellphone . The device server  would then send the notification message in step  to the corresponding subscriber device  according to the device specific protocol.","If notification to a device  should fail, the notification delivery process  schedules and performs any number of retries to the device . For example, the information about the message and the subscriber that still needs to be notified may be written to disk, plus the time at which the next retries should occur. Hence, each delivery process  processes any new incoming IMAP messages, and processes any needed retries.",{"@attributes":{"id":"p-0048","num":"0047"},"figref":["FIG. 4","FIG. 3"],"b":["12","12","70","72","74","12","74","74","16","74","30","74","28","22"],"i":["a ","b ","c "]},"As shown in , the application runtime environment  includes a polling resource  configured for issuing function calls at regular prescribed intervals for obtaining the notification messages  from the primary mailbox  according to IMAP protocol. The application runtime environment  also includes a message parser  configured for parsing the retrieved notification messages  for identification of the notification recipients.","The application runtime environment  also includes a message generator  configured for generating the notification delivery messages based on the subscriber notification preference information retrieved from the LDAP directory , and based on the notification information within the received notification message . The message generator  generates a notification delivery message  for a selected subscriber device  having selected portions of the notification information based on a corresponding protocol specific notification template . In particular, the initialization file  includes a notification template for each of the notification delivery processes : each notification template specifies the relevant key-value pairs from the notification message  to be added to the notification delivery message  for the corresponding subscriber device . Hence, the message generator  utilizes a selected notification template based on the subscriber device  specified in the subscriber notification preference information: if the subscriber preference specifies an e-mail client , the message generator  utilizes an e-mail-specific template that specifies the key-value pairs of the notification information within the notification message  that should be included within the notification delivery message  to be sent to the secondary mailbox ; if the subscriber preference specifies an SMS-based client , the message generator  utilizes an SMS-specific template that specifies the key-value pairs of the notification information within the notification message  that should be included within the notification delivery message  to be sent to the secondary mailbox , etc. Hence, the message generator  is able to select portions of the notification information from the notification message  to be included in the notification delivery message  based on the subscriber device type  specified in the subscriber notification preference information.","The application runtime environment  also includes a set of libraries  that may be implemented as dynamically linked libraries (DLLs) or application programming interface (API) libraries. The libraries  enable the runtime environment  to implement procedure calls, such as issuing function calls to the IMAP directory  for retrieval of the notification messages , the LDAP directory  for retrieval of the subscriber notification preference information, and an SMTP server for sending the notification delivery messages .","According to the disclosed embodiment, a notification architecture is built upon the open standards of Internet Message Access Protocol (IMAP), Lightweight Directory Access Protocol (LDAP), and Simple Mail Transfer Protocol (SMTP). Hence, the notification architecture can be made available on a large number of platforms, and can be built upon any number of IMAP compliant messaging stores and LDAP compliant directory stores. In addition, the number of overall LDAP lookups is minimized, since the notification process  obtains all necessary information at one time for each of the notification delivery processes . In addition, network traffic is minimized since each notification delivery process  can receive selected portions of the original stored message as needed, as opposed to a complete copy. Finally, the notification process  and each of the notification delivery processes  are accessible by any SMTP source by sending an SMTP based message with the appropriate notification information to the appropriate mailbox  or . Hence, the same notification system  can be utilized to support unified messaging services by the message store , while providing added value for external notification services . Hence, any Web appliance consent notification to any device directly.","While this invention has been described in connection with what is presently considered to be the most practical and preferred embodiment, it is to be understood that the invention is not limited to the disclosed embodiments, but, on the contrary, is intended to cover various modifications and equivalent arrangements included within the spirit and scope of the appended claims."],"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","BEST MODE FOR CARRYING OUT THE INVENTION"],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["Reference is made to the attached drawings, wherein elements having the same reference numeral designations represent like elements throughout and wherein:",{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":["FIGS. 2A and 2B","FIG. 1"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":["FIG. 4","FIG. 1"]}]},"DETDESC":[{},{}]}
