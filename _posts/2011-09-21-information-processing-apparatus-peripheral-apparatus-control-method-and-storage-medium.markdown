---
title: Information processing apparatus, peripheral apparatus control method, and storage medium
abstract: A peripheral apparatus control system that provides a device management screen capable of producing appropriate view contents and functions according to the use environment of each user for improving operability. The system includes an information processing apparatus, a peripheral apparatus, a driver capable of controlling the peripheral apparatus, a peripheral apparatus management function capable of managing the peripheral apparatus, and a peripheral apparatus management screen. The system determines a view content of the peripheral apparatus management screen according to an attribute of the driver.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08725908&OS=08725908&RS=08725908
owner: Canon Kabushiki Kaisha
number: 08725908
owner_city: Tokyo
owner_country: JP
publication_date: 20110921
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to an information processing apparatus, a peripheral apparatus control method, and a related program.","2. Description of the Related Art","A peripheral apparatus control system enables a user of an information processing apparatus to access a peripheral apparatus via an appropriate interface, such as Universal Serial Bus (USB), Ethernet\u00ae, or wireless LAN. This kind of control systems can be effectively used for various users in their houses and offices. An example of the peripheral apparatus is, for example, a printer, a copying machine, a facsimile machine (which may be referred to as \u201cFAX\u201d in the following description), a scanner, a digital camera, a digital video camera, or a multifunction peripheral.","Windows\u00ae 7, i.e., an operating system provided by Microsoft Corporation, includes newly introduced functions to manage peripheral apparatuses connected to an information processing apparatus, such as a personal computer (which may be referred to as \u201cPC\u201d in the following description). For example, a \u201cDevices and Printers\u201d folder is a window that displays apparatuses connected to the PC. Device Stage\u2122 has a link function capable of displaying a link to a unique application or service provided by each peripheral apparatus. The \u201cDevice Stage\u201d is a trademark of Microsoft Corporation.","A \u201cDevices and Printers\u201d folder screen (see ) can be displayed when it is selected on a \u201cstart menu\u201d screen of the Windows\u00ae. Further, a Device Stage\u2122 screen (see ) of each peripheral apparatus can be opened when it is selected from the \u201cDevices and Printers\u201d folder. The Device Stage\u2122 can provide a visual screen that enables each user to easily access a function or service relating to the apparatus.","For example, when the peripheral apparatus is a printer, a list of print standby documents and a printer property screen can be displayed on the Device Stage\u2122 screen. In this case, users can launch a print queue and the printer property screen via the Device Stage\u2122 screen to confirm information of the peripheral apparatus (printer).","There are various online services available via the Internet for information processing apparatuses and peripheral apparatuses, due to the growth of the Internet. For example, if the Device Stage\u2122 screen provides a link to a support site on the Internet that is provided by a manufacturer of an apparatus, users can easily access an intended site relating to their apparatuses.","The content of the Device Stage\u2122 is meta data, which is exclusively constituted by a resource file (e.g., XML format file, image file, and icon file). Thus, it is feasible to customize view contents and functions of the Device Stage\u2122 of each peripheral apparatus by customizing the meta data (i.e., XML file, image file, and icon file) for each peripheral apparatus.","Operational controls of the apparatus are described in the above-described XML file. The XML file is a static text file. Therefore, the XML file cannot include any functions and variables, which are generally packaged in a general program (software). However, variables that can be used in the above-described XML file are prepared for some information supported by the OS.","For example, variables for a printer driver name (friendly name) allocated to a printer queue and variables for a WIA driver name allocated to a scanner function WIA driver using the WIA can be provided by the OS.","Further, it is feasible to control the processing based on a path of a registry and information (content) having been set in the registry, and an architecture of the processor. However, it is unfeasible to control the processing based on an attribute value of a printer class driver. In the present exemplary embodiment, the Device Stage\u2122 may be referred to as a device management screen.","It is now assumed that an example of the peripheral apparatus is a multifunction printer (which may be referred to as \u201cMFP\u201d in the following description). The MFP is functionally operable as a printer, a facsimile machine, and a scanner. The MFP includes a storage device. When a user performs an operation relating to a printer class driver in an environment in which a Windows\u00ae OS preceding the Windows\u00ae 7 is installed on a PC that is connected to an MFP or a printer (i.e., a device), it is common that the user performs the operation according to the following procedure.\n\n","For example, according to a conventional technique discussed in Japanese Patent Application Laid-Open No. 2005-85132, if a user performs an operation relating to a printer class driver via the Device Stage\u2122 in an environment in which a device associated with a plurality of printer class drivers is connected to the PC, a user is required to perform an operation differently. The Device Stage\u2122 cannot identify each printer class driver based on its attribute. Therefore, the user performs the operation according to the following procedure.\n\n","For example, it is now assumed that a user performs an operation relating to an arbitrary printer class driver in a case where an MFP associated with a printer driver and a FAX driver (i.e., printer class drivers) is connected to a single PC. In this case, the user performs the operation without specifying a target printer class driver in the above-described steps (2-1) to (2-4).","Subsequently, in step (2-5), a list of printer class drivers associated with the MFP is displayed (as described below with reference to ). The user is requested to select a target printer class driver in the displayed list. Therefore, user operability deteriorates compared to the conventional example in which users can perform a sequential operation for each target printer class driver.","The content to be displayed on the Device Stage\u2122 and display conditions thereof are described in a device management control file. It is feasible to allocate a task to each printer class driver referring to the driver name. However, in this case, if a different driver name is given to an updated driver, the task allocated to the driver does not function any more. Further, if numerous driver names are described in the device management control file, it will take a long time to complete the display of the Device Stage\u2122.","The present invention is directed to a peripheral apparatus control system that can provide a device management screen capable of providing appropriate view contents and functions according to the use environment of each user to provide excellent operability. When a user performs an operation relating to a printer class driver, the peripheral apparatus control system according to the present invention enables the user to perform the operation without deteriorating the user operability.","According to an aspect of the present invention, an information processing apparatus includes a driver capable of controlling a peripheral apparatus that has unique information. The information processing apparatus includes a management unit configured to manage the peripheral apparatus and display a peripheral apparatus management screen, wherein the management unit is configured to acquire an attribute of the driver and determine a view content of the peripheral apparatus management screen according to the acquired attribute of the driver.","The present invention brings the following effects.\n\n","Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.","Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings.","Hereinafter, the description relating to the Windows\u00ae 7 Operating System is based on the information opened to the public, as of Sep. 15, 2010, on the Internet site (http:\/\/msdn.microsoft.com\/en-us\/library\/default.aspx) of Microsoft Developer Network (MSDN), and therefore its detailed description is not repeated in the following exemplary embodiments.","Further, in the context of the following description, the term \u201cUSB\u201d represents Universal Serial Bus. The description relating to the \u201cUSB\u201d is based on the information opened to the public, as of Sep. 15, 2010, on the Internet site (http:\/\/www.usb.org\/home) of Universal Serial Bus and therefore its detailed description is not repeated in the following exemplary embodiments.","Further, in the context of the following description, the term \u201cWSD\u201d represents Web Services on Devices. The description relating to the \u201cWSD\u201d is based on the information opened to the public, as of Sep. 15, 2010, on the Internet site (http:\/\/www.microsoft.com\/whdc\/connect\/rally\/rallywsd.mspx) of Windows\u00ae Hardware Developer Central, and therefore its detailed description is not repeated in the following exemplary embodiments.",{"@attributes":{"id":"p-0044","num":"0053"},"figref":["FIG. 1","FIG. 1","FIG. 2A"],"b":["1","2","1","2","1","2"]},"A multifunction printer (hereinafter, referred to as \u201cMFP\u201d)  is an example of a peripheral device according to the present invention, which can be configured by a color inkjet printer, a color facsimile machine, a color scanner, and an external storage for a flash memory. The MFP  is functionally operable mainly as a printer and additionally as a facsimile machine and a scanner.","The peripheral apparatus according to the present invention is, for example, a printer, a copying machine, a facsimile machine, a scanner, a digital camera, or a multi-function peripheral having similar functions. The MFP  has a hardware configuration illustrated in . The MFP  is connected to the PC  via the USB interface  or the network  to perform bidirectional communications.","The PC  includes an application , which has a file format (*.EXE) executable by the Windows\u00ae system. As an example of the application according to the present invention, the application  has the capability of displaying a device management screen (i.e., a peripheral apparatus management screen) illustrated in . The PC  further includes a printer driver  illustrated in  and a FAX driver  illustrated in .","The network  is a home network established in a home of a user (i.e., a client) who uses the MFP . The network  is an office network established in ABC Corporation. The PC  connected to the network  includes a web server  that is functionally operable as a web server. The web server  provides a website of ABC Corporation, which is accessible via the Internet.","A compact disc read only memory (CD-ROM)  is a storage medium that can be inserted into a dedicated slot of the PC  and can store software (computer programs) and electronic files. The CD-ROM  includes a file storing unit . The web server  of the PC  includes a file storing unit . A device management control file  illustrated in  is stored in and can be distributed from the file storing unit  of the web server  or the file storing unit  of the CD-ROM . An analog telephone line  is usable when the PC  transmits or receives facsimile data via the MFP .","A flash memory  can be inserted into a flash memory slot (not illustrated) of the MFP . The flash memory  is a storage that can be referred to by the PC .",{"@attributes":{"id":"p-0051","num":"0060"},"figref":["FIGS. 2A and 2B","FIG. 2A","FIG. 2A"],"b":["1","2","1"]},"As illustrated in , the PC  includes a random access memory (RAM) , a hard disk drive (HDD)  serving as a storage unit, and a keyboard (KBD)  as an example of an input unit. The PC  further includes a central processing unit (CPU)  serving as a control unit, a liquid crystal display (LCD)  as an example of a display unit, and a network board (NB)  as an example of a communication control unit. The above-described functional units constituting the PC  are mutually connected via a bus .","The NB  includes a USB port for the USB interface . The storage unit can be a portable CD-ROM or a built-in ROM, which can realize functions of various applications (e.g., a device management  and a print application ) and modules (software programs) illustrated in , , , and .","The MFP  has a hardware configuration illustrated in . The MFP  illustrated in  includes a central processing unit (CPU)  constituted by a microprocessor. The CPU  is functionally operable according to a program stored in a read only memory (ROM)  to control a RAM , a communication unit , a recording unit , an operation unit , a display unit , a reading unit , a facsimile control unit , and an external storage control unit .","The ROM  stores a software program relating to the control of the printer driver  (see ), which causes the MFP  to perform recording (printing) processing and also perform processing for notifying the PC  of a printing operation state. Further, the ROM  stores a software program relating to the control of the FAX driver (see ), which causes the MFP  to perform facsimile transmission or reception processing and also perform processing for notifying the PC  of a facsimile transmission or reception state.","The ROM  further stores a software program relating to the control of a scanner driver (not illustrated), which causes the MFP  to perform image reading processing and also perform processing for notifying the PC  of a reading operation state.","The RAM  temporarily stores print data to be printed by the recording unit , which is mainly transmitted from the PC . Further, the RAM  temporarily stores image data read by the reading unit , facsimile transmission data transmitted from the PC , and facsimile reception data received by the facsimile control unit .","The communication unit  includes connection ports dedicated to the USB interface  and the network , and a connection port dedicated to the analog telephone line . The communication unit  can control USB, Ethernet\u00ae, and facsimile analog communications. The recording unit  includes a printing unit and an electric circuit. The printing unit includes an inkjet type recording head, color inks, a carriage, and a recording sheet conveying mechanism. For example, the electric circuit of the recording unit  is an ASIC that can generate print pulses to be supplied to the above-described recording head based on the above-described print data.","When a user performs a printing operation or a facsimile transmission operation via an application installed on the PC , the view content (image data) of an opened file is temporarily stored, as an EMF format spool file, in the HDD  of the PC . Then, the spool file is converted via the printer driver  or the FAX driver  into print data or facsimile transmission data including commands to control the MFP . Then, the converted data of the spool file is transmitted to the MFP  via the USB interface  or the network .","The recording unit  can generate print pulses converted from the print data received by the MFP  and perform printing on a recording sheet based on the generated print pulses. The facsimile control unit  converts the facsimile transmission data received by the MFP  into facsimile communication protocols, and transmits the facsimile communication protocols to a destination facsimile apparatus via the analog telephone line . The operation unit  has various buttons (e.g., a power source button and a reset button) to enable users to operate the MFP .","The display unit  includes a touch panel and a liquid crystal display (LCD) to display a state of the MFP  and enable users to input and display various settings and telephone numbers. The reading unit  is constituted by a color image sensor and an electric circuit constituted by an image processing ASIC. The reading unit  can control a scanner function of the MFP .","The facsimile control unit  is constituted by a facsimile modem and an analog communication circuit. The facsimile control unit  can control facsimile transmission and reception according to the facsimile communication protocols. The external storage control unit  is constituted by a flash memory attachment slot and a storage interface circuit, and can control an attached flash memory.",{"@attributes":{"id":"p-0063","num":"0072"},"figref":["FIG. 3","FIG. 3"],"b":["1","92","91","1","90","89","88"]},"Plug and Play Extensions (PnP-X), which can support a network connected device, is packaged as a standard function in the Windows\u00ae 7 OS. The PnP-X is one of extension functions for the Plug and Play. In the present exemplary embodiment, the above-described N-PnP can be used as a function comparable to the Plug and Play Extensions (PnP-X).","The PC  further includes a device driver group , an application\/DDI interface , and an application group . The device driver group  includes a standard driver group  packaged as standard drivers of the OS and an IHV driver group  provided by the IHV. The application\/DDI interface  includes an Application Programming Interface (API) and a Device Driver Interface (DDI). The application group  includes an application (Device Management) , which is packaged as a standard application of the OS. The application group  further includes the print application  described below with reference to .","The device management  can manage, execute, and display a \u201cDevices and Printers\u201d folder  illustrated in  and a device management screen  illustrated in  via an application\/DDI interface .",{"@attributes":{"id":"p-0067","num":"0076"},"figref":["FIG. 4","FIG. 4"],"b":["50","1","3","50","33","34","35","36","39"]},"The print application  is, for example, Notepad (Notepad.exe), which is packaged as a standard text editor of the OS. A Graphic Device Interface (GDI)  is a part of the OS. A print queue  is provided, as a part of a spooler , for queuing of a print job.","The print processor  can change a print layout and perform special processing on an image to be printed. The graphics driver  performs printer driver image processing as a core function of the image processing to be performed by the print driver. More specifically, the graphics driver  can process an image to be printed based on a drawing command received from the GDI , and can generate a print control command. The UI module  can provide and control a user interface of the printer driver.","The language monitor  is functionally operable as a data communication interface that can control data transmission\/reception. The status monitor  can display an operational state (e.g., residual ink amount, warning, and error of the MFP ). A port monitor  can transmit data, if received from the language monitor , to an appropriate port. Further, the port monitor  can receive data from the MFP  via a class driver .","The class driver  is a low-level module closest to the port. In the present exemplary embodiment, the class driver  corresponds to a driver for a unique protocol (WSD or IHV) printer class, which controls the port (e.g., the USB or network port in the present exemplary invention). The printer driver  is provided by ABC Corporation (i.e., the manufacturer of the MFP ).",{"@attributes":{"id":"p-0072","num":"0081"},"figref":["FIG. 6","FIG. 6"]},"The FAX driver illustrated in  is the FAX driver  installed on the PC  and dedicated to the MFP . The FAX driver  includes a plurality of modules (i.e., a print processor , a graphics driver , a UI module , a language monitor , and a status monitor ). The print application  is, for example, Notepad (Notepad.exe), which is packaged as a standard text editor of the OS. A Graphics Device Interface (GDI)  is a part of the OS.","A printer queue  is provided, as a part of the spooler , for queuing of a print job (i.e., a facsimile transmission job). The print processor  can change a layout of a facsimile transmitted image and perform special processing on an image to be facsimile transmitted. The graphics driver , as a core function of the image processing to be performed by the FAX driver, performs facsimile transmission image processing. More specifically, the graphics driver  can process an image to be facsimile transmitted based on a drawing command received from the GDI , and can generate a facsimile transmission control command.","The UI module  can provide and control a user interface of the FAX driver. The language monitor  is functionally operable as a data communication I\/F that can control data transmission\/reception. The status monitor  can display an operational state (e.g., result of facsimile transmission and warning\/error of the MFP ). An address book  can centrally manage registration and change of facsimile transmission destination information (e.g., name, FAX number, etc.).","The port monitor  can transmit data, if received from the language monitor , to an appropriate port. Further, the port monitor  can receive data from the MFP  via the class driver .","The class driver  is a low-level module closest to the port. In the present exemplary embodiment, the class driver  corresponds to a driver for a unique protocol (WSD or IHV) printer class, which controls the port (e.g., the USB or network port in the present exemplary invention). The FAX driver  is provided by ABC Corporation (i.e., the manufacturer of the MFP ).",{"@attributes":{"id":"p-0078","num":"0087"},"figref":["FIG. 7A","FIG. 7A"],"b":["50","104","3"]},{"@attributes":{"id":"p-0079","num":"0088"},"figref":["FIG. 7B","FIG. 6"],"b":"150"},"A print setting dialog  illustrated in  enables users to select each operation portion on the dialog, and perform each setting required for facsimile transmission to be performed by the MFP . An address book  enables users to register and manage the information relating to each facsimile transmission destination.",{"@attributes":{"id":"p-0081","num":"0090"},"figref":["FIGS. 5A to 5D","FIG. 5A"],"b":["500","1","1","500","501","503"]},"In the \u201cDevices and Printers\u201d folder , the device  is in an unusable state because the line type of an icon representing the device  is a dotted line. On the other hand, the device  is in a usable state because the line type of an icon representing the device  is a solid line.","The device management screen  illustrated in  can be launched and displayed in response to a selection of the device  in the \u201cDevices and Printers\u201d folder  illustrated in .","The device management screen  can be used to manage the MFP . Items displayed at an upper part of the device management screen  are a device icon , a device name , and a manufacturer information . Data of the device icon  is stored as a part of a device management control file storing unit  (not illustrated).","Further, information displayed in the field of the device name  is the device name of the device  stored in the \u201cDevices and Printers\u201d folder . Further, information displayed in the field of the manufacturer information  is a character string designated in a <dm:manufacturer> element  illustrated in . Items displayed at a lower part of the device management screen  are links to functions relating to the device .","More specifically, a printer setting button  and a FAX setting button  are displayed in the lower part of the device management screen . As illustrated in , a <dm:functions> element  includes two <dm:function> elements  and  indicating button and function information.","A device management screen  illustrated in  can be launched and displayed in response to a selection of the device  in the \u201cDevices and Printers\u201d folder  illustrated in . The device management screen  can be used to manage the MFP . Items displayed at an upper part of the device management screen  are a device icon , a device name , and manufacturer information . Data of the device icon  is stored as a part of the device management control file storing unit  (not illustrated).","Further, information displayed in the field of the device name  is a device name of the device  of the \u201cDevices and Printers\u201d folder . Further, information displayed in the field of the manufacturer information  is character string designated in the <dm:manufacturer> element  illustrated in . An item displayed at a lower part of the device management screen  is a link to a function related to the device . More specifically, a printer\/FAX setting button  is displayed at the lower part of the device management screen . The <dm:functions> element  illustrated in  includes a <dm:function> element  indicating button and function information.","A printer selection screen  illustrated in  can be launched and displayed in response to a selection of the printer\/FAX setting button  illustrated in . The printer selection screen  enables users to select an operation target printer class driver. If there is only one printer class driver associated with the device, the printer selection screen  is not displayed.",{"@attributes":{"id":"p-0090","num":"0099"},"figref":["FIG. 8","FIG. 8"],"b":["800","800","11","12"]},"In , information set in the <dm:manufacturer> element  is the name of ABC Corporation, which is the manufacturer of the device (i.e., the MFP ). Information set in a <dm:model> element  is Kmmn, which is the model name of the device (i.e., the MFP ). The information set in the elements  and  can be used when the device management control file  is installed.","Further, the device management control file  includes information required to constitute the device management screen . To display the printer setting button  and the FAX setting button  illustrated in  on the device management screen  to be launched and displayed when the MFP  is connected to the PC , the <dm:function> elements , , and  indicating button and function information respectively are set in the <dm:functions> element .","In the <dm:function> element , a character string \u201cPrinter Preferences\u201d to be displayed on the printer setting button  is set in a <dm:name xml:lang=\u201cen-US\u201d>Printer Preferences<\/dm:name> element . Further, information indicating a condition to be satisfied to display the printer setting button  is set in a <dm:required> element .","A <dm:device>printer<\/dm:device> element  indicates that a device connected to the PC  via the USB interface  or the network  can use the printer class driver  or  to realize a printer function or a FAX function.","A <dm:attributeFAX>false<\/dm:attributeFAX> element  indicates that the device connected to the PC  via the USB interface  or the network  is associated with a printer class driver that does not include any FAX attribute. More specifically, the condition to be indicated by the <dm:required> element  is that the printing utilizing a printer class driver that does not include any FAX attribute is feasible. Information indicating a printer print setting launching function is set in a <dm:execute>openPrinterPreferences<\/dm:execute> element .","In the <dm:function> element , information set in a <dm:name xml:lang=\u201cen-US\u201d>FAX Preferences<\/dm:name> element  is a character string \u201cFAX Management\u201d to be displayed on the FAX setting button .","Information set in a <dm:required> element  is a condition to be satisfied to display the FAX setting button . Information set in a <dm:device>printer<\/dm:device> element  indicates that the device connected to the PC  via the USB interface  or the network  can use the printer class driver  or  to realize the printer function or the FAX function.","Information set in a <dm:attributeFAX>true<\/dm:attributeFAX> element  indicates that the device connected to the PC  via the USB interface  or the network  is associated with a printer class driver whose attribute is FAX. More specifically, the condition indicated by the <dm:required> element  is that the printing utilizing a printer class driver that does not include any FAX attribute is feasible.","Information set in a <dm:execute>openFAXPreferences<\/dm:execute> element  indicates a function capable of launching FAX print settings.","In the <dm:function> element , information set in the <dm:name xml:lang=\u201cen-US\u201d>FAX Preferences<\/dm:name> element  is a character string \u201cPrinter\/FAX Preferences\u201d to be displayed on the printer\/FAX setting button .","Information set in a <dm:required> element  is a condition to be satisfied to display the printer\/FAX setting button . Information set in a <dm:device>printer<\/dm:device> element  indicates that the device connected to the PC  via the USB interface  or the network  can use the printer class driver  or  to realize the printer function or the FAX function.","Information set in a <dm:attributeFAX invert=\u201ctrue\u201d\/> element  indicates that the device connected to the PC  via the USB interface  or the network  is associated with a printer class driver whose attribute is unknown. More specifically, the condition to be indicated by the <dm:required> element  is that the printing utilizing an unknown printer class driver that does not include any FAX attribute is feasible.","Information set in a <dm:execute>openPrinterFAXPreferences<\/dm:execute> element  indicates a function capable of launching printer\/FAX setting. In a case where the device is associated with a plurality of printer class drivers, if the printer\/FAX setting is launched, the printer selection screen  illustrated in  can be displayed to enable users to select a target printer class driver. If the device is associated with only one printer class driver, a setting screen dedicated to the printer class driver can be displayed.","If operation buttons of printer class drivers are displayed in respective attributes on the device management screen  with reference to the attributes of respective printer class drivers, a user can select a desired operation button by designating a desired printer class driver. Thus, the user operability can be improved.",{"@attributes":{"id":"p-0105","num":"0114"},"figref":["FIG. 14","FIG. 14","FIG. 10"],"b":["80","901","902","903","904","905","800","1405","905"]},"The print application  includes a launching source determination unit , an application control unit , a default device setting unit , a print control unit , a status acquisition unit , and a default device information storing unit .","The device management screen  can be launched and displayed when the MFP  is connected to the PC  via the USB interface  or the network . The device management screen  can be launched and displayed in response to a selection of a device in the \u201cDevices and Printers\u201d folder  illustrated in . In the following description, it is assumed that the device management screen  illustrated in  is launched and displayed when the MFP  is connected to the PC  via the USB interface  or the network .",{"@attributes":{"id":"p-0108","num":"0117"},"figref":["FIG. 9","FIG. 9","FIG. 9"],"b":["202","204","201","1301","3","1","14","4","1302","1"]},"The device ID can be expressed, for example, using a character string \u201cMFG:ABC;MDL:Kmmn;CLS:PRINTER;CMD:P4;DES:ABC Kmmn;ATR:PRN.\u201d The following information is a device ID relating to the printer function of the MFP , which the PC  can acquire from the MFP  via the USB interface  or the network .\n\n","Next, in step S, the device management  determines whether the drivers (e.g., the printer driver , the FAX driver , and the scanner driver (not illustrated)) is already installed on the PC . If it is determined that the driver is not installed on the PC  (NO in step S), then in step S, the OS installs the drivers (the printer driver , the FAX driver , the scanner driver).","Subsequently, in step S, the OS loads the drivers (i.e., the printer driver , the FAX driver , and the scanner driver). If the loading of the drivers (i.e., the printer driver , the FAX driver , and the scanner driver) is completed, the device (i.e., the MFP ) can be registered in the \u201cDevices and Printers\u201d folder  illustrated in .","In step S, the device management  determines whether the device management control file  illustrated in  is already installed on the PC . The device management  can perform the processing of step S by checking if the installed device management control file matches with the drivers (the printer driver , the FAX driver , scanner driver) based on manufacturer (MFG:) and model (MDL:) information included in the device ID.","If it is determined that the device management control file  is not yet installed (NO in step S), then in step S, the device management  executes control file installation processing illustrated in . Then, in step S, the device management  executes device management screen launching processing illustrated in . Then, in step S, the device management  terminates the device connection processing of the flowchart illustrated in .","If it is determined that the device management control file  is already installed (YES in step S), the processing proceeds to step S. If it is determined that the drivers (i.e., the printer driver , the FAX driver , and the scanner driver) are already installed (YES in step S), the processing proceeds to step S.",{"@attributes":{"id":"p-0115","num":"0130"},"figref":"FIG. 10","b":["10","202","204","201"]},"If the device management  executes the device management control file installation processing in step S illustrated in , then in step S illustrated in , the device management  starts device management installation processing.","Further, in step S, the device management  confirms a device ID of the device (i.e., the MFP ) connected via the USB interface  or the network . In step S, the device management  searches for the device management control file  dedicated to the device (i.e., the MFP ) connected to the PC  based on the manufacturer (MFG:) and model (MDL:) information included in the device ID.","In the device management control file  illustrated in , the manufacturer (MFG:) \u201cABC\u201d and the model (MDL:) \u201cKmmn\u201d corresponding to the device (i.e., the MFP ) are described in the <dm:manufacturer> element  and the <dm:model> element . The device management  searches for the device management control file  dedicated to the device (i.e., the MFP ) in the file storing unit  provided in the web server , or in the file storing unit  of the CD-ROM  inserted in the PC , based on the information described in the element  and the element .","In step S, the device management  determines whether the device control file  has been acquired from the file storing unit  or . If it is determined that the device management control file  has been acquired (YES in step S), then in step S, the device management  stores the device management control file  in a predetermined portion in the HDD  of the PC . Further, in step S, the device management  installs the device management control file .","If the installation of the device management control file  is completed, then in step S, the device management  terminates the device management control file installation processing. In the present exemplary embodiment, it is assumed that the device management control file  corresponding to the device (i.e., the MFP ) has been detected and installed. If it is determined that the device management control file  has not been acquired (NO in step S), the device management  does not install the device management control file  and then, in step S, terminates the device management control file installation processing.",{"@attributes":{"id":"p-0121","num":"0136"},"figref":["FIG. 11","FIG. 11"],"b":["202","204","201"]},"If the device management  executes the device management screen launching processing in step S illustrated in , or when a user selects the device  from the \u201cDevices and Printers\u201d folder , then in step S illustrated in , the device management  starts the device management screen launching processing.","In step S, the device management control unit  acquires a device name selected from the \u201cDevices and Printers\u201d folder . In the present exemplary embodiment, the device  is selected. Therefore, the device name \u201cABC Kmmn\u201d is acquired. In step S, the device management control file reading unit  loads the device management control file  illustrated in , which has been stored in step S illustrated in , based on the acquired device name. In step S, the device management control unit  executes device management screen view content constructing processing illustrated in  based on the device management control file .","In step S, the device management control unit  causes the display unit  to display the device management screen  according to the device management screen view content constructed in step S. Then in step S, the device management  terminates the device management screen launching processing.",{"@attributes":{"id":"p-0125","num":"0140"},"figref":["FIG. 12","FIG. 12"],"b":["202","204","201"]},"If the device management control unit  executes the device management screen view content constructing processing in step S illustrated in , then in step S illustrated in , the device management control unit  starts the device management screen view content constructing processing.","In step S, the device management control unit  confirms printer connection and printer class driver installation status with according to the content of the <dm:device> element  illustrated in . If the MFP  is connected to the PC  via the USB interface  or the network  and the printer class driver associated with the MFP  is installed (YES in step S), the processing proceeds to step S. In other cases (NO in step S), the processing proceeds to step S.","In step S, the device management control unit  generates a list of printer class drivers associated with the device (i.e., the MFP ), and counts the total number \u201cn\u201d of the printer class drivers. In step S, the device management control unit  selects the first printer class driver (counter i=1) in the list. In step S, the device management control unit  executes printer class driver attribute acquisition processing illustrated in .","If the printer class driver attribute has been acquired in step S (YES in step S), the processing proceeds to step S. If the printer class driver attribute has not been acquired in step S (NO in step S), the processing proceeds to step S.","In step S, the device management control unit  constructs the printer\/FAX setting button  according to the content of the <dm:execute> element  illustrated in . Then, the processing proceeds to step S. If the printer\/FAX setting button  is executed, the printer selection screen  that allows users to select a target printer class driver can be displayed. If the printer\/FAX setting button  is already constructed at the processing execution timing of step S, the device management control unit  does not newly construct the printer\/FAX setting button .","In step S, the device management control unit  confirms the presence of a FAX attribute with respect to the printer class driver. If the printer class driver does not have any FAX attribute (NO in step S), the processing proceeds to step S. If the FAX attribute of the printer class driver is present (YES in step S), the processing proceeds to step S.","In step S, the device management control unit  constructs the printer setting button  according to the content of the <dm:execute> element  illustrated in . Then, the processing proceeds to step S. In step S, the device management control unit  constructs the FAX setting button according to the content of the <dm:execute> element  illustrated in . Then, the processing proceeds to step S. In step S, the device management control unit  increments the counter value i by one (i.e., i=i+1). Subsequently, in step S, the device management control unit  compares the counter value i with the total number n of the printer class drivers included in the printer class driver list.","If the counter value i is equal to or less than the total number n of the printer class drivers included in the printer class driver list (NO in step S), the device management control unit  performs the above-described processing of step S to step S on the i-th printer class driver. If the counter value i is greater than the total number n of the printer class drivers included in the printer class driver list (YES in step S), the processing proceeds to step S. The device management control unit  terminates the device management screen view content constructing processing.",{"@attributes":{"id":"p-0134","num":"0149"},"figref":["FIGS. 13A and 13B","FIG. 13"],"b":["202","204","201"]},"If the device management control unit  executes the printer class driver attribute acquisition processing in step S illustrated in , then in step S illustrated in , the device management control unit  starts the printer class driver attribute acquisition processing.","In step S, the device management control unit  generates a printer information structure. For example, when the OS is Windows\u00ae 7, a PRINTER_INFO_ structure  illustrated in  corresponds to the printer information structure to be generated by the device management control unit . In the present exemplary embodiment, the device management control unit  processes the PRINTER_INFO_ structure  as an example of the printer information structure. To this end, the PRINTER_INFO_ structure  includes a member variable \u201cAttributes\u201d  illustrated in , which represents attributes of the printer class driver.","The printer class driver includes a plurality of attributes and a unique value (unique information) is allocated to each attribute. For a corresponding attribute of the printer class driver, it is feasible to express the attribute of the printer class driver by generating a value combined with a unique value of each attribute and setting the generated value as the Attributes . In the present exemplary embodiment, PRITNER_ATTRIBUTES_FAX is prepared as a unique value representing the FAX attribute.","It is feasible to determine whether the printer class driver is a FAX driver by checking if the value having been set in the Attributes includes a value corresponding to PRINTER_ATTRIBUTE_FAX. In step S illustrated in , the device management control unit  prepares the PRINTER_INFO_ structure  (i.e., the printer information structure).","In step S, the device management control unit  sends an inquiry about the attribute to the printer class driver based on the PRINTER_INFO_ structure . If the OS is a Windows\u00ae, the device management control unit  can inquire about the attribute of a designated printer class driver by calling GetPrinter API with the PRINTER_INFO_ structure  designated as an argument.","If the printer class driver does not have any FAX attribute, then in step S illustrated in , the printer class driver does not set a value corresponding to PRINTER_ATTRIBUTE_FAX as Attribute  of the PRINTER_INFO_ structure . In other words, attribute information to be set in this case indicates that the printer class driver is dedicated to a printer.","If the printer class driver has the FAX attribute, then in step S illustrated in , the printer class driver sets a value corresponding to PRINTER_ATTRIBUTE_FAX as Attribute  of the PRINTER_INFO_ structure . In step S, the device management control unit  stores the PRINTER_INFO_ structure  acquired from the printer class driver. Then in step S, the device management control unit  terminates the processing of the flowchart illustrated in .",{"@attributes":{"id":"p-0142","num":"0157"},"figref":["FIG. 15","FIG. 15"],"b":["2","1001"]},"The first exemplary embodiment includes confirming an attribute of a printer class driver and determining a view content of a device management screen based on the confirmed attribute information. A second exemplary embodiment is different from the first exemplary embodiment in that an object to be confirmed is an attribute of a device.",{"@attributes":{"id":"p-0144","num":"0159"},"figref":"FIG. 16"},"If the device management control unit  executes the device management screen view content constructing processing in step S illustrated in , then in step S illustrated in , the device management control unit  starts the device management screen view content constructing processing.","In step S, the device management control unit  confirms printer connection and printer class driver installation status according to the content of the <dm:device> element  illustrated in . If the MFP  is connected to the PC  via the USB interface  or the network  and the printer class driver associated with the MFP  is installed (YES in step S), the processing proceeds to step S. In other cases (NO in step S), the processing proceeds to step S.","In step S, the device management control unit  generates a list of devices associated with the MFP , and counts the total number \u201cn\u201d of the devices. In the present exemplary embodiment, the PC  can recognize the printer function and the FAX function as different devices. In step S, the device management control unit  selects the first device (counter i=1) in the list. In step S, the device management control unit  executes printer device attribute acquisition processing illustrated in .","If the printer device attribute has been acquired in step S (YES in step S), the processing proceeds to step S. If the printer device attribute has not been acquired in step S (NO in step S), the processing proceeds to step S. In step S, the device management control unit  constructs the printer\/FAX setting button  according to the content of the <dm:execute> element  illustrated in . Then, the processing proceeds to step S.","If the printer\/FAX setting button  is executed, the printer selection screen  that allows users to select a setting target printer class driver can be displayed. If the printer\/FAX setting button  is already constructed at the processing execution timing of step S, the device management control unit  does not newly construct the printer\/FAX setting button .","In step S, the device management control unit  confirms the presence of the FAX attribute with respect to the device. If the device does not have any FAX attribute (NO in step S), the processing proceeds to step S. If the FAX attribute of the device is present (YES in step S), the processing proceeds to step S. In step S, the device management control unit  constructs the printer setting button  according to the content of the <dm:execute> element  illustrated in .","In step S, the device management control unit  constructs the FAX setting button according to the content of the <dm:execute> element  illustrated in . Then, in step S, the device management control unit  increments the counter value i by one (i.e., i=i+1). Subsequently, in step S, the device management control unit  compares the counter value i with the total number n of the devices included in the device list. If the counter value i is equal to or less than the total number n of the devices included in the device list (NO in step S), the device management control unit  performs the above-described processing of step S to step S on the i-th device. If the counter value i is greater than the total number n of the printer class drivers included in the device list (YES in step S), the processing proceeds to step S. The device management control unit  terminates the device management screen view content constructing processing.",{"@attributes":{"id":"p-0152","num":"0167"},"figref":["FIG. 16","FIG. 12","FIG. 16"],"b":["902","1206","1701","902"]},"In step S, the device management control unit  secures a storage area for main body information. In the present exemplary embodiment, the device ID is used as the main body information.","The device ID can be expressed, for example, using a character string \u201cMFG:ABC;MDL:Kmmn FAX;CLS:PRINTER;CMD:F4FAX;DES:ABC Kmmn FAX;ATR:FAX\u201d, which includes the following information.\n\n","In step S, the device management control unit  inquires the device about the device ID. In step S, the device sends the device ID. In step S, the device management control unit  stores the device ID received from the device.","In step S, the device management control unit  acquires attribute information, which is included in the device ID. According to the above-described example of the device ID, \u201cATR:FAX;\u201d included in the device ID represents the attribute information of the device. If the device has a FAX attribute, \u201cATR:FAX;\u201d is included in the device ID. If the device does not have any FAX attribute, the device ID is expressed, for example, using a character string \u201cMFG:ABC;MDL:Kmmn;CLS:PRINTER;CMD:P4;DES:ABC Kmmn;ATR:PRN;\u201d which includes the following information.\n\n","According to the above-described example of the device ID, \u201cATR:PRN;\u201d included in the device ID represents the attribute information of the device. If the device does not have any FAX attribute, \u201cATR:PRN;\u201d is included in the device ID.","If the device management control unit  has failed in acquiring attribute information from the printer class driver in the processing of step S illustrated in  according to the first exemplary embodiment, it is useful to acquire attribute information from the device in the processing to be performed in step S illustrated in  according to the second exemplary embodiment. Further, if the device management control unit  has failed in acquiring attribute information from the device in the processing of step S illustrated in  according to the second exemplary embodiment, it is useful to acquire attribute information from the printer class driver in the processing to be performed in step S illustrated in  according to the first exemplary embodiment.","Aspects of the present invention can also be realized by a computer (such as a CPU or a micro-processing unit (MPU)) of a system or an apparatus (or a device) that reads out and executes a program recorded on a memory device to perform the functions of the above-described embodiments, and by a method, the steps of which are performed by a computer of a system or an apparatus by, for example, reading out and executing a program recorded on a memory device to perform the functions of the above-described embodiments. For this purpose, the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable medium or a non-transitory computer-readable medium). In such a case, the system or the apparatus, and the recording medium where the program is stored, are included as being within the scope of the present invention.","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.","This application claims priority from Japanese Patent Application No. 2010-221799 filed Sep. 30, 2010, which is hereby incorporated by reference herein in its entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0024","num":"0033"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0025","num":"0034"},"figref":"FIGS. 2A and 2B"},{"@attributes":{"id":"p-0026","num":"0035"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0027","num":"0036"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0028","num":"0037"},"figref":"FIGS. 5A to 5D"},{"@attributes":{"id":"p-0029","num":"0038"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0030","num":"0039"},"figref":"FIGS. 7A and 7B"},{"@attributes":{"id":"p-0031","num":"0040"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0032","num":"0041"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0033","num":"0042"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0034","num":"0043"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0035","num":"0044"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0036","num":"0045"},"figref":"FIGS. 13A and 13B"},{"@attributes":{"id":"p-0037","num":"0046"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0038","num":"0047"},"figref":"FIG. 15","b":"2"},{"@attributes":{"id":"p-0039","num":"0048"},"figref":"FIG. 16"}]},"DETDESC":[{},{}]}
