---
title: Light host management protocol on multicast capable router
abstract: a method for reducing computational and/or bandwidth requirements in a network including a multicast router and a layer 2 network element by efficiently communicating required source state information. The method comprises receiving at the layer 2 network element a source interest list from a host over a multicast network. The layer 2 multicast network element transmits a message to the multicast router, the message formatted to be processed by a multicast routing protocol on the multicast router after a protocol header is removed by a light host management protocol on the multicast router without any additional processing. Responsive to receiving the message at the multicast router, the light host management protocol removes the protocol header and sending the message to the multicast routing protocol to alter a set of multicast sources to be routed to the host.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08379641&OS=08379641&RS=08379641
owner: Telefonaktiebolaget L M Ericsson (Publ)
number: 08379641
owner_city: Stockholm
owner_country: SE
publication_date: 20090911
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS-REFERENCE TO RELATED APPLICATIONS","FIELD OF THE INVENTION","BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims priority to Provisional Application Ser. No. 61\/227,027, filed Jul. 20, 2009. The present Application is related to a co-pending application with Ser. No. 12\/506,108 titled \u201cEfficient Host Management Protocol on Multicast Capable Router,\u201d filed on the same date as the provisional application.","Embodiments of the present invention relate to a system for managing multicast communication. Specifically, embodiments of the invention relate to efficient management of host requests for source data over a multicast network.","The use of multicast protocols and the administration of networks implementing multicast protocols are expanding to support new technologies such as Internet Protocol Television (IPTV) and on demand video. These networks utilize set top boxes (STBs), also referred to as hosts, which request data from a list of sources that are specified by the STBs. The sources are data sources that are available over a multicast network such as IPTV channels. These sources can be streamed using multicast to any number of hosts.","The STBs send their list of sources that they are requesting to receive through the multicast network via a host management protocol (HMP). HMPs include Internet Group Management Protocol (IGMP) and Multicast Listener Discover (MLD). These protocols then communicate the requested list of sources to a multicast routing protocol (MRP) to establish the routing of each requested source to the respective hosts. The MRPs include Protocol Independent Multicast (PIM). In some instances, the requested source interest list is transmitted through an L2 snooping device to a multicast router that executes the MRP.","The HMP communicates the entire list of requested sources to the MRP each time a source interest list is received from a host. This causes the MRP to reprocess sources that it has previously received from the HMP. There are two lists of sources that can be provided by the HMP to the MRP. One list of sources is a set of sources to be included (i.e., the host is requesting that these sources be sent to it) and the other list of source is a set of source to be excluded (i.e., the host is requesting that these resources not be sent to it). Multiple hosts on each subnet send these source interest lists and the HMP constructs and aggregates a source state per subnet comprising the interested sources for all the hosts on that subnet. When any of these hosts sends a new source interest list, the entire aggregated state in the HMP is sent to the MRP.","In a network where a L2 snooping network element is present between the hosts and the multicast router, the HMP on the L2 network element processes the received source interest lists from the hosts to update the snooping state maintained by it and forwards the sources lists in their entirety to the router so that the MRP can update the routing. On the router, the MRP is assisted by a local HMP to process the received source interest lists and communicate state to the MRP. The local HMP must retrieve source identification information from a set of group records in the received HMP messaged requiring significant processing of the received message by the HMP to enable the source identification information within the message to be provided to the MRP.","Embodiments of the invention include a method for reducing computational and\/or bandwidth requirements in a network including a multicast router and a layer 2 network element by efficiently communicating required source state information. The method comprises receiving at the layer 2 network element, executing a modified host management protocol, a source interest list from a host over a multicast network, the source interest list to identify at least one multicast source to be one of excluded or included from routing to the host. Responsive to the step of receiving, the layer 2 multicast network element transmits a message to the multicast router, the message formatted to be processed by a multicast routing protocol on the multicast router after a protocol header is removed by a light host management protocol on the multicast router without any additional processing. Responsive to receiving the message at the multicast router, the light host management protocol removes the protocol header and sending the message to the multicast routing protocol to alter a set of multicast sources to be routed to the host.","Embodiments of the invention include a network with reduced computational or bandwidth by efficiently communication source state information comprising a host device to track a first source interest list based on user input and to transmit the source interest list over a multicast network to a first network element, wherein the source interest list to identify at least one multicast source to be one of excluded or included from routing to the host. A first network element in communication with the host device over a multicast network executes a modified host management protocol, the modified host management protocol to generate a message based on the source interest list. The message is formatted to be processed by a multicast routing protocol after a protocol header is removed without any additional processing. The modified host management protocol transmits the message to a second network element executing a multicast routing protocol to alter a set of multicast sources to be routed to the host device. The second network element manages multicast routing based on the message received over the network from the first network element. The second network element executes a light host management protocol and the multicast routing protocol. The light host management protocol removes the protocol header from the message and forwards the message to the multicast routing protocol without further processing of the message.","Embodiments of the invention include a network element that executes a modified host management protocol to reduce computational and\/or bandwidth requirements for multicast routing by efficiently communicating required source state information. The network element comprises a modified host management protocol component to receive a source interest list from a host over a network. The modified host management protocol component to generate a message based on the source interest list. The message formatted to be processed by a multicast routing protocol after a protocol header is removed without any additional processing. The modified host management protocol component to transmit the message to a second network element executing a light host management protocol and a multicast routing protocol to alter a set of multicast sources to be routed to the host.","Embodiments of the invention include a method for reducing computational and\/or bandwidth requirements of multicast routing. The method comprises receiving at a multicast router a message formatted to be processed by a multicast routing protocol on the multicast router after a protocol header is removed by a light host management protocol on the multicast router without any additional processing. The message is generated and transmitted by a modified host management protocol on a layer 2 network element responsive to a source interest list received from a host. The source interest list identifies at least one multicast source to be one of excluded or included from routing to the host. The light host management protocol removes the protocol header in the multicast router. The message is provided with the protocol header removed to the multicast routing protocol. A set of multicast sources routings are altered to the host based on the message by the multicast routing protocol.","In the following description, numerous specific details are set forth. However, it is understood that embodiments of the invention may be practiced without these specific details. In other instances, well-known circuits, structures and techniques have not been shown in detail in order not to obscure the understanding of this description. It will be appreciated, however, by one skilled in the art that the invention may be practiced without such specific details. Those of ordinary skill in the art, with the included descriptions, will be able to implement appropriate functionality without undue experimentation.","The operations of the flow diagrams will be described with reference to the exemplary embodiments of . However, it should be understood that the operations of flow diagrams can be performed by embodiments of the invention other than those discussed with reference to , and the embodiments discussed with reference to  can perform operations different than those discussed with reference to the flow diagrams of .","The techniques shown in the figures can be implemented using code and data stored and executed on one or more electronic devices (e.g., an end station, a network element, etc.). Such electronic devices store and communicate (internally and\/or with other electronic devices over a network) code and data using machine-readable media, such as machine-readable storage media (e.g., magnetic disks; optical disks; random access memory; read only memory; and flash memory devices; phase-change memory). In addition, such electronic devices typically include a set of one or more processors coupled to one or more other components, such as one or more storage devices, user input\/output devices (e.g., a keyboard, a touch screen, and a display), and network connections. The coupling of the set of processors and other components is typically through one or more busses and bridges (also termed as bus controllers). The storage device and signals carrying the network traffic respectively represent one or more machine-readable storage media and machine-readable communication media. Thus, the storage device of a given electronic device typically stores code and\/or data for execution on the set of one or more processors of that electronic device. Of course, one or more parts of an embodiment of the invention may be implemented using different combinations of software, firmware, and hardware.","As used herein, a network element (e.g., a router, switch, bridge, etc.) is a piece of networking equipment, including hardware and software, that communicatively interconnects other equipment on the network (e.g., other network elements, end stations, etc.). Some network elements are \u201cmultiple services network elements\u201d that provide support for multiple networking functions (e.g., routing, bridging, switching, Layer 2 aggregation, session border control, multicasting, and subscriber management), and\/or provide support for multiple application services (e.g., data, voice, and video). Subscriber end stations (e.g., servers, workstations, laptops, palm tops, mobile phones, smart phones, multimedia phones, Voice Over Internet Protocol (VOIP) phones, portable media players, GPS units, gaming systems, set-top boxes (STBs), etc.) access content\/services provided over the Internet and\/or content\/services provided on virtual private networks (VPNs) overlaid on the Internet. The content and\/or services are typically provided by one or more end stations (e.g., server end stations) belonging to a service or content provider or end stations participating in a peer to peer service, and may include public web pages (free content, store fronts, search services, etc.), private web pages (e.g., username\/password accessed web pages providing email services, etc.), corporate networks over VPNs, IPTV, etc. Typically, subscriber end stations are coupled (e.g., through customer premise equipment coupled to an access network (wired or wirelessly)) to edge network elements, which are coupled (e.g., through one or more core network elements to other edge network elements) to other end stations (e.g., server end stations).","The embodiments of the present invention provide a system, network and method for avoiding the disadvantages of the prior art including: duplication of information, processing each time a host sends a message containing group record related data, slow processing time inducing delay in the system and longer \u2018zapping\u2019 times (i.e., time required to change between sources) caused by having to perform redundant processing to extract source identification information from message, and a requirement to refresh state data for the routing tables in turn requires sending control messages from an L2 network element.","The embodiments of the invention overcome these disadvantages by using only a light HMP on the multicast router and relying on a message format utilized by the L2 network element that provides only the minimum information needed to maintain the routing tables and that does not require any processing by the light HMP to pass on to the multicast routing protocol except removal of the protocol header from the message. This provides the following advantages: more efficient processing due to avoiding processing and transmission or sharing of duplicate information including avoiding maintenance of state information by the light HMP at the multicast router, simplified processing for the light HMP by providing it only a simple smaller message with a source interest list and indicators for the type or routing update needed that can be passed to the multicast routing protocol, and improved zapping times due to overall network and system efficiency.","In addition, other embodiments of the present invention provide a system, network and method for avoiding the disadvantages of the prior art including: duplication of information processing each time a host sends a message containing previously received sources, creation of two lists (i.e., include lists and exclude lists) when sending source information, poor scaling due to the large size of source lists, vulnerability to denial of service attacks by repeated sending of large source lists, slow processing time inducing delay in the system and longer \u2018zapping\u2019 times (i.e., time required to change between sources).","These embodiments of the invention overcome these disadvantages by identifying differences between source interest lists received from hosts and a source state at network element. Only the differences between the source interest list and the source state are provided to the multicast routing protocol. This provides the following advantages: more efficient processing due to avoiding processing and transmission or sharing of duplicate information, simplified processing for the multicast routing protocol by providing it only a single smaller source interest list to process, scalability due to only processing the differences between source state and source interest list information, enhanced security enabled by ignoring redundant source interest lists, improved zapping times due to overall network and system efficiency.",{"@attributes":{"id":"p-0027","num":"0026"},"figref":"FIG. 1","b":["101","113","113","103","109","117","113","113","113","113","113","113"]},"The STBs  can be any type of host device for managing the delivery of source data to a user. An example of an S\u2032I\u2032B is console device for delivering Internet Protocol Television (IPTV) to a user. STBs  can include console devices, gaming devices, desktops, workstations, digital video recorders (DVRs), optical disk playback devices (e.g., digital versatile disc (DVD) players), handheld devices, cellular phones and similar computing devices. These devices execute software or include hardware components that manage the user experience and generate requests for any number of data sources .","These STBs  or \u2018hosts\u2019 generate a list of sources that are of interest to a user or \u2018source interest lists\u2019 that are sent to network element  executing a modified host management protocol (HMP). In one embodiment, these source interest lists contain a full set of all sources that the STB  is requesting in the form of an include list or an exclude list. In another embodiment, the source interest lists received from a STB  may only reflect changes to its source interests. An include list is a set of sources that the STB  is requesting to be sent to the STB . An exclude list is a set of sources that the STB  is requesting not to be sent to the STB . Each time a list is sent by the STB  it may be a list of changes to the settings or sources or a complete list reflecting all user input or settings received to that point. The format of the message can be in the Internet Group Management Protocol (IGMP), Multicast Listener Discover (MLD) fog mats or any similar protocol used to convey host information to the multicast network elements. These messages can be sent over the multicast sub network C to an L2 network element  or a multicast router .","The invention encompasses alternative embodiments including an embodiment where the STBs  communicate directly with a modified HMP  on a multicast router  or similar network element. In another embodiment, the invention includes at least one L2 network element  where a modified HMP  processes the source interest lists received from the STBs .","In the embodiment of the multicast network where an L2 network element  is present, a modified HMP  on the L2 network element  process each received message from each of the hosts and maintains a source state based on the source interest list for each STB . The processing of the messages received from the STBs  is discussed in greater detail herein below in reference to  and . In one embodiment, the modified HMP  identifies the differences between the received source interest list and the maintained source state. In other embodiments, the process as described in greater detail in  is omitted. The modified HMP  then provides this information to a multicast routing protocol (MRP) by generating a message to be sent through a remote modified HMP  to the remote MRP  or calls a function or method (e.g., of an application programming interface (API)) of a local MRP or local L2 snooper .","In one embodiment, the message or call passes on only the difference in state or sources instead of the entire source interest list to minimize the computational resources and bandwidth required to update the multicast routing. The MRP updates the multicast routing from the various sources  in accordance with the received source interest list change. The MRP can be any multicast routing protocol including Protocol Independent Multicast (PIM), PIM\u2014sparse mode and similar MRPs.","The modified HMP  also generates a simplified message and the requisite data to formulate this message as described further in . This simplified message is capable of being processed by a light HMP  instead of a full HMP. The modified HMP  utilizes its state information and its analysis of the receives source list and related information in the message received from the host to determine generate a source identifier list of sources to be either directed to a host or blocked from a host. This information is used to set two fields in the message that indicate a default for non-specified sources (i.e., forward to host or block from host) and whether the specified source are to be forwarded to the host or blocked.","The modified HMP  and MRP or L2 snooper  present on the L2 network element , as well as, the modified HMP  and MRP  present on the multicast router  can be implemented as a software components in the form of instructions to be executed by line cards, control cards, network processors or similar processing components of the respective network elements , . In other embodiments, these elements are implemented as firmware or hardware components.","Source state information can be tracked at the modified HMP  as an aggregate of all STBs  connected to a network element on a subnet, as separate information for each STB or similarly tracked. Similarly, the source state information can be tracked as a set of source identifiers, source addresses or similar information sufficient for identifying a specific source in the multicast network. The source state can be implemented by separately tracking sources to exclude from each host, sources to include for each host or by complete tracking of either. The source state can also be tracked for both individual STBs  and multiple STBs in aggregate.","In multicast networks where an L2 network element  is present, but the MRP  is only present on a separate multicast router , the message is sent over the multicast sub network B to an HMP or light HMP  present on the multicast router . The format of the message is discussed in greater detail below. A standard message format according to IGMP or MLD is handled by an HMP local to the multicast router . The HMP  processes the received message and calls (e.g., through a function or method of an API) the MRP  to provide it with the source interest list or source interest list changes that were received. A light message is handled by a light HMP  where the light HMP only removes the header of the message before providing it to the MRP and calling the MRP with an appropriate function or method using the parameters specified by the message (i.e., default \u2018forward\u2019, \u2018prune\u2019 or \u2018delete\u2019 and source identifier list \u2018forward,\u2019 \u2018prune\u2019 or \u2018delete\u2019) thereby reducing the processing and space requirements for the multicast router . The light HMP  does not maintain a source state and relies on the parameters specified in the message. Upon receipt of the updated source interest list, the MRP updates its routing tables to provide the requested data from sources  to the hosts  over the multicast sub network A.","The L2 network element  can be any type of network router or network element capable of executing a modified HMP and\/or snooper or providing modified HMP and snooper implementation in firmware or hardware or any combination thereof. The L2 network element  can support any number of STBs  or hosts using any type of networking protocol. The multicast network can include any number of L2 network elements  that operate in parallel to service the STBs .","The multicast router  is a network element that implements multicast routing and the MRP. The multicast router  can be any type of networking element capable of implementing MRP  and a light HMP  or full HMP. The multicast router  can support any number of STBs  or hosts, sources  or L2 network elements  using any type of networking protocol. The multicast system can include any number of multicast routers  that operate in parallel to service the STBs  and sources .","The sources  can be any type of data sources provided by any number of end station servers. The data sources  can be streaming or static data sources. The data provided can be IPTV data or similar sources suitable for multicasting. The servers providing these services can utilize any multicast protocol for transmitting these source data to the hosts over the multicast network including the multicast sub networks A-C. The servers providing the sources  can be any type of computing devices including dedicated server machines, desktops, workstations or similar computing devices.",{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 2","b":"201"},"The source interest list is sent to the modified HMP implemented either at an L2 network element or at a multicast router. The modified HMP analyzes the source interest list to determine if it is an include list (i.e., a source interest list that indicates each of the sources that the host is requesting to be sent to the host) (block ). In other embodiments, source interest lists and source states may only be implemented as effective include lists or exclude lists. One skilled in the art would understand that these are subsets of the process described herein.","If the source interest list is not an include list, then it is known that the list is an exclude list (i.e., a source interest list that indicates each of the sources that the host does not want to receive). The modified HMP then compares the received source interest list with the exclude source state maintained by the modified HMP to determine whether there are any differences (block ). If there are not differences between the received exclude list and the maintained exclude state then no action is required and the process awaits the next received source interest list (block ).","However, if the comparison of the received exclude list and the exclude state maintained by the modified HMP reveals differences, then the modified HMP determines whether the MRP is present on the same device as the modified HMP carrying out the comparison (block ). If the MRP is present on the same device, then the modified HMP sends the differences between the received exclude list and the current exclude state to the MRP via a function or method call or similar process (block ). The function or method call can be made through an application programming interface (API) or similar interface. Providing the changes to the MRP completes the handling of the source interest list in the process (block ) and the process awaits the reception of the next source interest list (block ).","If the MRP is not present on the same device as the modified HMP, then the modified HMP prepares a message to be sent to the MRP at the multicast router or similar location (block ). The message provides the differences between the received exclude list and the exclude state maintained by the modified HMP. In all cases, the modified HMP updates the maintained state to reflect the received exclude list. The HMP message can be a standard HMP or modified HMP message. After the message is sent, the processing of the received source interest list has completed (block ) and the process awaits the reception of the next source interest list (block ).","If the received source interest list is an include list (i.e., a source interest list that identifies those sources a host want to receive), then the modified HMP compares the received source interest list to the maintained include source state (block ). If there is no difference between the received source interest list and the include source state maintained by the modified HMP, then no action is taken and the process awaits the next source interest list to be received (block ).","If the comparison reveals differences between the received source interest list and the maintained include source state, then the modified HMP determines whether the MRP is present on the current network element (block ). If the MRP is present on the current network element, then the modified HMP sends the difference between the received source interest list and the maintained include source state through a function or method call (e.g., a method or function of an API) to the MRP or similar mechanism (block ). If the MRP is not present on the same network element as the modified HMP, then the modified HMP generates a message in a standard or modified HMP format. The HMP message is then sent to the multicast router (block ). After the differences are provided to the MRP the processing of the received source interest list ends (block ). The process then awaits the receipt of another source interest list (block ). The include source state is updated to reflect the changes of the received source interest list during the comparison of the two.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 3","b":["301","303"]},"Generating the message includes processing the source interest list received from the host to update the source state maintained by the modified HMP. The light HMP message that is generated includes an entire representation of the changed state or only the changes to the state. The format of the light HMP message is shown in detail below in regard to . As part of completing the light HMP message the modified HMP determines a default for non-specified sources (i.e., whether sources not explicitly listed in a source state or source interest list are to be blocked or forwarded to a host) and whether the source state or source interest list is an include or exclude list, which correspond to forwarding the sources and pruning them, respectively. This information is stored in the message and allows the light HMP to utilize the information to direct the MRP to forward or prune sources without having to maintain the source state at the multicast router.","A light HMP on the multicast router receives the light HMP message (block ). The light HMP then strips the message of its header and provides the data from the message to the MRP (block ). The data is provided by a function call (e.g., a method or function of an API) or similar mechanism to the MRP. No other processing other than the removal of the header is performed by the light HMP. This is enabled by the format of the light HMP message, which contains data in a format that can be processed by the MRP once the protocol header is stripped. The header of the light HMP message indicates whether the data of the message, which is a list of source identifiers is to be forwarded, pruned or deleted and similarly whether non-specified sources are to be forwarded, pruned or deleted by default. This information may be passed to the MRP as a parameter of the function or method of the MRP that was called or in selecting the function or method. The light HMP does not maintain a source state thereby reducing its processing requirements.","Reducing the processing requirements for the message reduces the processing requirements of the multicast router as a whole and enables those resources to be utilized for other functions thereby improving the efficiency of the multicast router and the overall multicast network. Similarly, the light HMP message is simpler and contains less data than a standard HMP message, thereby reducing the bandwidth requirements of the network.",{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 4A","b":"401"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 4B","b":["405","407"]},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 5","b":["501","503","501"]},"In one embodiment, the Type field identifies the message as a source update report or message allowing the light HMP to recognize it as something that can be processed by stripping the header and providing the body of the message to an MRP. The type field may be a 2 bit field. The Group mode field can also be a 2 bit field that can be set to indicate \u2018forward,\u2019 \u2018prune\u2019 or \u2018delete.\u2019 The Group mode field indicates the default for all sources from which traffic is received at a network element, but not specifically tracked in a source interest list received from a host. If a host wants to receive traffic only from certain sources then the mode will be set to prune and traffic from all other sources will be dropped. If a host does not want to receive traffic from only certain sources, then the mode is set to forward and traffic from all other sources will be forwarded to the host. When the HMP wants the state for sources to be deleted in the MRP, the mode can be set to delete.","The Source mode can also be a 2 bit field that is similar to the Group mode field. The same settings of prune, forward and delete can be specified, but the settings only apply to the source identifier list in the message. Thus, if a host wants to receive traffic only from the list of source identifiers, then the source mode is set to forward. If the host does not want to receive traffic from the list of source identifiers then the source mode is set to prune.","The source count field can have a size of 10 bits and indicates the number or source identifiers in the body of the message. The checksum field can be a 16 bit field that may be a 16-bit one's complement of the one's complement sum of the whole message. For computing the checksum, the checksum field itself can be set to zero. The light HMP verifies a checksum before processing the message. The group address field is set to the multicast address for which the host has sent the request. The source identifier fields are 32 bit or 64 bit IP addresses of the sources.","Thus, a method, system and apparatus for host protocol management have been described. It is to be understood that the above description is intended to be illustrative and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reading and understanding the above description. The scope of the invention should, therefore, be determined with reference to the appended claims, along with the full scope of equivalents to which such claims are entitled."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The present invention is illustrated by way of example, and not by way of limitation, in the figures of the accompanying drawings in which like references indicate similar elements. It should be noted that different references to \u201can\u201d or \u201cone\u201d embodiment in this disclosure are not necessarily to the same embodiment, and such references mean at least one. Further, when a particular feature, structure, or characteristic is described in connection with an embodiment, it is submitted that it is within the knowledge of one skilled in the art to effect such feature, structure, or characteristic in connection with other embodiments whether or not explicitly described.",{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 4A"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 4B"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 5"}]},"DETDESC":[{},{}]}
