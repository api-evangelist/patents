---
title: Broadcast refresh of RFID tag persistence
abstract: A reader may broadcast a refresh command to a population or subpopulation of tags and thereby refresh and extend the persistence time of a tag flag, such as an inventoried flag. The characteristics, timing, and other details of this broadcast refresh command may be determined based on the state of a reader, environmental, tag-population, and/or tag-capability conditions and parameters. The refresh command may be a Select command of the Gen2 Specification, in which case parameters of the Select command specify the refresh operation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09330284&OS=09330284&RS=09330284
owner: IMPINJ, INC.
number: 09330284
owner_city: Seattle
owner_country: US
publication_date: 20111012
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["CROSS REFERENCE TO RELATED APPLICATIONS","BACKGROUND","BRIEF SUMMARY","DETAILED DESCRIPTION"],"p":["This application claims the benefit of U.S. Provisional Patent Application Ser. No. 61\/476,527 filed on Apr. 18, 2011. The disclosures of the provisional patent application are hereby incorporated by reference for all purposes.","Radio-Frequency Identification (RFID) systems typically include RFID readers, also known as RFID reader\/writers or RFID interrogators, and RFID tags. RFID systems can be used in many ways for locating and identifying objects to which the tags are attached. RFID systems are particularly useful in product-related and service-related industries for tracking objects being processed, inventoried, or handled. In such cases, an RFID tag is usually attached to an individual item, or to its package.","In principle, RFID techniques entail using an RFID reader to interrogate one or more RFID tags. The reader transmitting a Radio-Frequency (RF) wave performs the interrogation. The RF wave is typically electromagnetic, at least in the far field. The RF wave can also be predominantly electric or magnetic in the near field. The RF wave may encode one or more commands that instruct the tags to perform one or more actions.","A tag that senses the interrogating RF wave may respond by transmitting back another RF wave. The tag generates the transmitted back RF wave either originally, or by reflecting back a portion of the interrogating RF wave in a process known as backscatter. Backscatter may take place in a number of ways.","The reflected-back RF wave may encode data stored in the tag, such as a number. The response is demodulated and decoded by the reader, which thereby identifies, counts, or otherwise interacts with the associated item. The decoded data can denote a serial number, a price, a date, a destination, other attribute(s), any combination of attributes, and so on. Accordingly, when a reader receives tag data it can learn about the item that hosts the tag and\/or about the tag itself.","An RFID tag typically includes an antenna system, a radio section, a power-management section, and frequently a logical section, a memory, or both. In earlier RFID tags the power-management section included an energy storage device such as a battery. RFID tags with an energy storage device are known as battery-assisted, semi-active, or active tags. Advances in semiconductor technology have miniaturized the electronics so much that an RFID tag can be powered solely by the RF signal it receives. Such RFID tags do not include an energy storage device, and are called passive tags. Of course, even passive tags typically include temporary energy- and data\/flag-storage elements such as capacitors or inductors.","A goal of many RFID systems is for a reader to inventory all of the tags in a population. Typically, a reader inventories a first tag, instructs the tag not to reply for a period of time (a persistence time), and then proceeds to inventory a second tag. In an ideal world, the reader would continue the process until it has inventoried all of the tags. Unfortunately, if the reader has not finished inventorying all of the tags within the persistence time then the first tag will forget that it has already been inventoried and will allow itself to be inventoried again. Subsequently, the second tag will exhibit the same behavior, followed by later tags. If the tag population is very large then the reader may spend so much time re-inventorying already-inventoried tags that it cannot spend enough time searching for the hard-to-inventory tags. As a result, some of the tags in the population may not be inventoried at all.","One solution is for the tags to have very long persistence times. However, this solution is problematic because if an inventoried tag leaves the field-of-view of a first reader and enters the field-of-view of a second reader before its persistence time has expired, then it will not respond to the second reader until the end of its persistence time, and may actually leave the field-of-view of the second reader before it is inventoried at all. In this two-reader scenario it is therefore desirable for tags to have short persistence times. The conundrum is that in some situations it may be desirable for a tag to have long persistence times, whereas in other situations it may be desirable for tags to have short persistence times. Currently, tags have persistence times that are chosen at the time of manufacture and cannot be changed afterward. These chosen persistence times are at best a compromise and not ideal for many inventory situations.","This summary is provided to introduce a selection of concepts in simplified forms that are further described below in the detailed description. This summary is not intended to identify key features or essential features of the claimed subject matter, nor is it intended as an aid in determining the scope of the claimed subject matter.","Embodiments are directed to RFID readers and reader methods for refreshing the inventoried-flag persistence times of a population of RFID tags. The reader broadcasts a refresh command based on a value of a refresh parameter. The refresh command instructs tags that support the refresh feature to refresh the persistence time(s) of one or more tag inventoried flags. A reader may determine the refresh parameter based on the reader state, an environmental condition, a tag-population parameter, and\/or a tag-capability parameter. The reader state may include one or more parameters indicative of a previous value of the refresh parameter, a previous command, a next command, a tag or reader communication rate, and\/or an impending frequency hop. The environmental condition may include parameter(s) indicative of RF noise, signal-to-noise ratio(s), and\/or temperature. The tag-population parameter may include the number of tags in the tag population, a population-flush parameter, and\/or a recurring-tag parameter. The tag-capability parameter may include a flag-persistence parameter and\/or a tag-refresh support parameter. By providing the capability for a reader to broadcast a command to a population of tags to refresh their inventoried flags, the flag persistence times can be adjusted to be appropriate for any given inventory situation.","These and other features and advantages will be apparent from a reading of the following detailed description and a review of the associated drawings. It is to be understood that both the foregoing general description and the following detailed description are explanatory only and are not restrictive of aspects as claimed.","Various embodiments will be described in detail with reference to the drawings, where like reference numerals represent like parts and assemblies throughout the several views. Reference to various embodiments does not limit the scope of the invention, which is limited only by the scope of the claims attached hereto. Additionally, any examples set forth in this specification are not intended to be limiting and merely set forth some of the many possible embodiments for the claimed subject matter.","Throughout the specification and claims, the following terms take at least the meanings explicitly associated herein, unless the context clearly dictates otherwise. The meanings identified below are not intended to limit the terms, but merely provide illustrative examples for the terms. The meaning of \u201ca,\u201d \u201can,\u201d and \u201cthe\u201d includes plural reference, the meaning of \u201cin\u201d includes \u201cin\u201d and \u201con.\u201d The term \u201cconnected\u201d means a direct electrical connection between the items connected, without any intermediate devices. The term \u201ccoupled\u201d means either a direct electrical connection between the items connected or an indirect connection through one or more passive or active intermediary devices. The term \u201ccircuit\u201d means either a single component or a multiplicity of components, either active and\/or passive, that are coupled together to provide a desired function. The term \u201csignal\u201d means at least one of current, voltage, charge, temperature, data, or other measurable quantity. The terms \u201cRFID reader\u201d and \u201cRFID tag\u201d are used interchangeably with the terms \u201creader\u201d and \u201ctag\u201d, respectively, throughout the text and claims.","All of the circuits described in this document may be implemented as circuits in the traditional sense, such as with integrated circuits etc. All or some of them can also be implemented equivalently by other ways known in the art, such as by using one or more processors, Digital Signal Processing (DSP), a Floating Point Gate Array (FPGA), etc.",{"@attributes":{"id":"p-0030","num":"0029"},"figref":"FIG. 1","b":["100","110","112","120","110","112","126","110","126"]},"Reader  and tag  exchange data via wave  and wave . In a session of such an exchange each encodes, modulates, and transmits data to the other, and each receives, demodulates, and decodes data from the other. The data can be modulated onto, and demodulated from, RF waveforms. The RF waveforms are typically in a suitable range of frequencies, such as those near 900 MHz, 2.4 GHz, and so on.","Data exchange can be performed in a number of ways. Protocols are devised for readers and tags to exchange symbols, also called RFID symbols. A symbol can be a delimiter, a calibration symbol, and so on. Symbols can encode binary data, such as \u201c0\u201d and \u201c1\u201d, if that is desired. When symbols are processed by reader  and tag  they can be considered and treated as numbers having corresponding values, and so on.","RFID tag  can be a passive, battery-assisted, or active tag. Where RFID tag  is a passive tag, it is powered from wave .",{"@attributes":{"id":"p-0034","num":"0033"},"figref":["FIG. 2","FIG. 1"],"b":["220","120","220"]},"RFID tag  is formed on a substantially planar inlay , which can be made in many ways known in the art. RFID tag  includes an electrical circuit  which is preferably implemented as an integrated circuit (IC). IC  is arranged on inlay .","RFID tag  also includes an antenna for exchanging wireless signals with the environment. The antenna is often flat and attached to inlay . IC  is electrically coupled to the antenna via suitable antenna terminals (not shown in ).","The antenna may be made in a number of ways. In the example of , the antenna is made from two distinct antenna segments , which are shown here forming a dipole. Many other embodiments are possible, using any number of antenna segments. In some embodiments the antenna can comprise a single segment, and different points of the single segment can be coupled to one or more of the antenna terminals of IC . For example, the antenna can be a loop, with its ends coupled to the IC terminals. It should be remembered that even a single antenna segment can behave like multiple segments at the frequencies of RFID wireless communication.","In operation, a signal is received by the antenna and communicated to IC . IC  both harvests power, and responds if appropriate, based on the incoming signal and the IC's internal state. IC  may respond by modulating the reflectance of the antenna, which generates backscatter  from wave  transmitted by the reader. Coupling together and uncoupling the antenna terminals of IC  can modulate the antenna's reflectance, as can a variety of other means.","In the embodiment of , antenna segments  are separate from IC . In other embodiments the antenna segments may be formed on IC . Furthermore, an interface element may be used to couple the IC  to the antenna segments  (not shown in ).","The components of the RFID system of  may communicate with each other in any number of modes. One such mode is called full duplex. Another such mode is called half-duplex, and is described below.",{"@attributes":{"id":"p-0041","num":"0040"},"figref":["FIG. 3","FIG. 1","FIG. 2"],"b":["300","120","220"]},"RFID reader  and RFID tag  talk and listen to each other by taking turns. As seen on axis TIME, when RFID reader  talks to RFID tag  the communication session is designated as \u201cR\u2192T\u201d, and when RFID tag  talks to RFID reader  the communication session is designated as \u201cT\u2192R\u201d. Along the TIME axis, a sample R\u2192T communication session occurs during a time interval , and a following sample T\u2192R communication session occurs during a time interval . Of course interval  is typically of a different duration than interval \u2014here the durations are shown approximately equal only for purposes of illustration.","According to blocks  and , RFID reader  talks during interval , and listens during interval . According to blocks  and , RFID tag  listens while RFID reader  talks (during interval ), and talks while RFID reader  listens (during interval ).","In terms of actual technical behavior, during interval , RFID reader  talks to RFID tag  as follows. According to block , RFID reader  transmits wave , which was first described in . At the same time, according to block , RFID tag  receives wave  and processes it, to extract data and so on. Meanwhile, according to block , RFID tag  does not backscatter with its antenna, and according to block , RFID reader  has no wave to receive from RFID tag .","During interval , RFID tag  talks to RFID reader  as follows. According to block , RFID reader  transmits a Continuous Wave (CW), which can be thought of as a carrier signal that ideally encodes no information. As discussed before, this carrier signal serves both to be harvested by RFID tag  for its own internal power needs, and also as a wave that RFID tag  can backscatter. Indeed, during interval , according to block , RFID tag  does not receive a signal for processing. Instead, according to block , RFID tag  modulates the CW emitted according to block , so as to generate backscatter wave . Concurrently, according to block , RFID reader  receives backscatter wave  and processes it.","An order, a timing, and other parameters of RFID tag\/reader communications may be defined by industry and\/or government protocols (also known as standards). For example, the Class-1 Generation-2 UHF RFID Protocol for Communications at 860 MHz-960 MHz (\u201cGen2 Specification\u201d) by EPCglobal, Inc. is one such industry standard. The contents of the Gen2 Specification version 1.2.0 are hereby incorporated by reference.",{"@attributes":{"id":"p-0047","num":"0046"},"figref":["FIG. 4","FIG. 1","FIG. 1"],"b":["400","400","410","470","410","470","110","410","470","110","400","410"]},"Local block  is responsible for communicating with the tags. Local block  includes a block  of an antenna and its driver. Some readers, like that shown in local block , contain a single antenna and driver. Some readers contain multiple antennas and\/or drivers and a method to switch signals among them, including sometimes using different antennas for transmitting and for receiving. And some readers contain multiple antennas and drivers that operate simultaneously. A demodulator\/decoder block  demodulates and decodes waves received from the tags via antenna\/driver block . Modulator\/encoder block  encodes and modulates an RF wave to be transmitted to the tags via antenna\/driver block .","Local block  additionally includes an optional local processor . Local processor  may be implemented in any number of ways known in the art. Such ways include, by way of examples and not of limitation, digital and\/or analog processors such as microprocessors and digital-signal processors (DSPs); controllers such as microcontrollers; software running in a machine such as a general purpose computer; programmable circuits such as Field Programmable Gate Arrays (FPGAs), Field-Programmable Analog Arrays (FPAAs), Programmable Logic Devices (PLDs), Application Specific Integrated Circuits (ASIC), any combination of one or more of these; and so on. In some cases, some or all of the decoding function in block , the encoding function in block , or both, may be performed instead by local processor . In some cases local processor  may implement an encryption or authorization function; in some cases one or more of these functions can be distributed among other blocks such as encoding block , or may be entirely incorporated in another block.","Local block  additionally includes an optional local memory . Local memory  may be implemented in any number of ways known in the art. Such ways include, by way of examples and not of limitation, nonvolatile memories (NVM), read-only memories (ROM), random access memories (RAM), any combination of one or more of these, and so on. These memories can be implemented separately from local processor , or in an IC with local processor , with or without other components. Local memory , if provided, can store programs for local processor  to run.","In some embodiments, local memory  stores data read from tags, or data to be written to tags, such as Electronic Product Codes (EPCs), Tag Identifiers (TIDs) and other data. Local memory  can also include reference data that is to be compared to the EPC or TID codes, instructions and\/or rules for how to encode commands for the tags, modes for controlling antenna , secret keys, key pairs, and so on. In some of these embodiments, local memory  is provided as a database.","Some components of local block  typically treat the data as analog, such as the antenna\/driver block . Other components such as local memory  typically treat the data as digital. At some point there is a conversion between analog and digital. Based on where this conversion occurs, a reader may be characterized as \u201canalog\u201d or \u201cdigital\u201d, but most readers contain a mix of analog and digital functionality.","If remote components  are provided, they are coupled to local block  via an electronic communications network . Network  can be a Local Area Network (LAN), a Metropolitan Area Network (MAN), a Wide Area Network (WAN), a network of networks such as the internet, or a mere local communication link, such as a USB, PCI, and so on. In turn, local block  then includes a local network connection  for communicating with communications network . Communications on the network can be secure, such as if they are encrypted or physically protected, or insecure if they are not encrypted or otherwise protected.","There can be one or more remote component(s) . If more than one, they can be located at the same location or in different locations. They can communicate with each other and with local block  via communications network , or via other similar networks, using remote network connection(s) . Only one such connection  is shown, which is similar to local network connection .","Remote component(s)  can also include a remote processor . Remote processor  can be made in any way known in the art, such as was described with reference to local processor . Remote processor  may also implement an encryption function, similar to local processor .","Remote component(s)  can also include a remote memory . Remote memory  can be made in any way known in the art, such as was described with reference to local memory . Remote memory  may include a local database or a different database of a standards organization, such as one that can reference EPCs. Remote memory  may also contain information associated with commands, tag profiles, keys, or the like, similar to local memory .","Of the above-described elements, it may be advantageous to consider a combination of these components, designated as operational processing block . Operational processing block  includes those components that are provided of the following: local processor , remote processor , local network connection , remote network connection , and by extension an applicable portion of communications network  that links remote network connection  with local network connection . The portion can be dynamically changeable, etc. In addition, operational processing block  can receive and decode RF waves received via antenna , and cause antenna  to transmit RF waves according to what it has processed.","Operational processing block  includes either local processor , or remote processor , or both. If both are provided, remote processor  can be made such that it operates in a way complementary with that of local processor . In fact, the two can cooperate. It will be appreciated that operational processing block , as defined this way, is in communication with both local memory  and remote memory , if both are present.","Accordingly, operational processing block  is location independent, in that its functions can be implemented either by local processor , or by remote processor , or by a combination of both. Some of these functions are preferably implemented by local processor , and some by remote processor . Operational processing block  accesses local memory , or remote memory , or both for storing and\/or retrieving data.","RFID reader system  operates by operational processing block  generating communications for RFID tags. These communications are ultimately transmitted by antenna block , with modulator\/encoder block  encoding and modulating the information on an RF wave. Then data is received from the tags via antenna block , demodulated and decoded by demodulator\/decoder block , and processed by processing operational processing block .","Embodiments of an RFID reader system can be implemented as hardware, software, firmware, or any combination. It is advantageous to consider such a system as subdivided into components or modules. A person skilled in the art will recognize that some of these components or modules can be implemented as hardware, some as software, some as firmware, and some as a combination. An example of such a subdivision is now described, together with the RFID tag as an additional module.",{"@attributes":{"id":"p-0062","num":"0061"},"figref":"FIG. 5","b":["500","500"]},"An RFID tag  is considered here as a module by itself. RFID tag  conducts a wireless communication  with the remainder via air interface . It is noteworthy that air interface  is really only a boundary, in that signals or data that pass through it are not intended to be transformed from one thing to another. Protocols as to how readers and tags are to communicate with each other, for example the Gen 2 Specification, also properly characterize that boundary as an interface.","RFID system  includes one or more reader antennas , and an RF front-end module  for interfacing with reader antenna(s) . These can be made as described above.","RFID system  also includes a signal-processing module . In one embodiment, signal-processing module  exchanges waveforms with RF front-end module , such as I and Q waveform pairs.","RFID system  also includes a physical-driver module , which is also known as data-link module. In some embodiments physical-driver module  exchanges data with signal-processing module . Physical-driver module  can be the stage associated with the framing of data.","RFID system  additionally includes a media access control module , which is also known as MAC layer module. In one embodiment, MAC layer module  exchanges data packets with physical driver module . MAC layer module  can make decisions for sharing the medium of wireless communication, which in this case is the air interface.","RFID system  moreover includes an application-programming library-module . This module  can include application programming interfaces (APIs), other objects, etc.","All of these RFID system functionalities can be supported by one or more processors. One of these processors can be considered a host processor. Such a host processor might include a host operating system (OS) and\/or central processing unit (CPU), as in module . In some embodiments, the processor is not considered as a separate module, but one that includes some of the above-mentioned modules of RFID system .","User interface module  may be coupled to application-programming-library module , for accessing the APIs. User interface module  can be manual, automatic, or both. It can be supported by the host OS\/CPU module  mentioned above, or by a separate processor, etc.","It will be observed that the modules of RFID system  form a chain. Adjacent modules in the chain can be coupled by appropriate instrumentalities for exchanging signals. These instrumentalities include conductors, buses, interfaces, and so on. These instrumentalities can be local, e.g. to connect modules that are physically close to each other, or over a network, for remote communication.","The chain is used in one direction for receiving RFID waveforms and in the other direction for transmitting RFID waveforms. In receiving mode, reader antenna(s)  receives wireless waves, which are in turn processed successively by the various modules in the chain. Processing can terminate in any one of the modules. In transmitting mode, waveform initiation can be in any one of the modules. Ultimately, signals are routed to reader antenna(s)  to be transmitted as wireless waves.","The architecture of RFID system  is presented for purposes of explanation, and not of limitation. Its particular subdivision into modules need not be followed for creating embodiments. Furthermore, the features of the present disclosure can be performed either within a single one of the modules, or by a combination of them.","Embodiments additionally include programs, and methods of operation of the programs. A program is generally defined as a group of steps or operations leading to a desired result, due to the nature of the elements in the steps and their sequence. A program is often implemented as a sequence of steps or operations for a processor. One such program can be to direct a reader to refresh the persistence times of RFID tags.","Performing the steps, instructions, or operations of a program requires manipulating physical quantities. Usually, though not necessarily, these quantities may be transferred, combined, compared, and otherwise manipulated or processed according to the steps or instructions, and they may also be stored in a computer-readable medium. These quantities include, for example, electrical, magnetic, and electromagnetic charges or particles, states of matter, and in the more general case can include the states of any physical devices or elements. It is convenient at times, principally for reasons of common usage, to refer to information represented by the states of these quantities as bits, data bits, samples, values, symbols, characters, terms, numbers, or the like. It should be borne in mind, however, that all of these and similar terms are associated with the appropriate physical quantities, and that these terms are merely convenient labels applied to these physical quantities, individually or in groups.","Embodiments furthermore include storage media. Such media, individually or in combination with others, have stored thereon instructions of a program made according to the embodiments. A storage medium according to the embodiments is a computer-readable medium, such as a memory, and is read by a processor of the type mentioned above. If a memory, it can be implemented in a number of ways, such as Read Only Memory (ROM), Random Access Memory (RAM), Flash memory, EPROM memory, EEPROM memory, and many others as will be known to those skilled in the art.","Even though it is said that the program may be stored in a computer-readable medium, it should be clear to a person skilled in the art that it need not be a single memory, or even a single machine. Various portions, modules or features of it may reside in separate memories, or even separate machines. The separate machines may be connected directly, or through a network such as a local access network (LAN) or a global network such as the Internet.","Often, for the sake of convenience only, it is desirable to implement and describe a program as software. The software can be unitary, or thought of in terms of various interconnected distinct software modules.",{"@attributes":{"id":"p-0079","num":"0078"},"figref":["FIG. 6","FIG. 3"],"b":["600","600","600"]},{"@attributes":{"id":"p-0080","num":"0079"},"figref":["FIG. 7","FIG. 7"],"b":["700","702","702","706","706"]},"After the inventory operation , the tag-flag physical parameter will decay over time, as indicated by curve . At some time  the tag-flag physical parameter will decay below threshold , switching the flag value from B back to A. The difference between time  and time  is the flag's persistence time, and is how long the flag holds the value B. The rate at which the physical parameter decays may be a function of one or more tag and\/or environmental conditions, such as tag design or temperature.","If the tag is capable of executing a broadcast refresh, and a reader broadcasts a refresh command  such that the tag receives it before time  (and therefore before the physical parameter has decayed below threshold ), then the refresh command  adjusts (or instructs the tag to adjust) the physical parameter to increase the persistence time of the asserted flag value (in the example of  the asserted value is \u201cB\u201d). The term \u201cbroadcast\u201d as used in this document implies that the command is directed to a plurality of tags rather than to a singulated tag (where \u201csingulated\u201d is defined as an individual tag singled-out by a reader from among the plurality of tags). As above, the adjustment amount may be static or dynamic, as long as the post-refresh parameter value is different from the parameter value before the refresh command. By broadcasting successive refresh commands (e.g., refresh command ) the resulting decay curve  can be adjusted such that the effective flag persistence time (i.e., the time at which the curve  drops below the threshold ) can be extended as far beyond the normal flag persistence time as desired.",{"@attributes":{"id":"p-0083","num":"0082"},"figref":"FIG. 8","b":["800","800","804","802","806","802","802","806","814","806","808","802","808","802","814","816","818","810","802","812","812"]},{"@attributes":{"id":"p-0084","num":"0083"},"figref":["FIG. 9","FIG. 8","FIG. 8","FIG. 8","FIG. 8","FIG. 8","FIG. 8"],"b":["900","800","900","904","804","906","806","906","902","914","814","908","908","902","912","908","916","918","910","816","818","902"]},{"@attributes":{"id":"p-0085","num":"0084"},"figref":["FIG. 10","FIG. 1"],"b":["1000","1000","110","1000","1002","1004","1004","1004"]},"During step , the reader evaluates one or more refresh conditions and then determines and\/or updates a refresh parameter based on the refresh condition(s). The refresh parameter determines whether and\/or when the reader should broadcast a refresh command and may have a binary value, a time, a flag, or any other suitable indicator. For example, if the refresh parameter is a binary parameter then the binary parameter may indicate whether a refresh command should be immediately broadcast or not. If the refresh parameter is instead (or also includes) a time parameter then the time parameter may indicate the time at which the next refresh command should be broadcast, such as in an absolute format (e.g., at 3:00 PM) or in a relative format (e.g., in 2 seconds).","In some embodiments the refresh conditions may include the reader state. For example, if the reader state indicates that a refresh command was recently broadcast then the refresh parameter may be set or adjusted to delay the next refresh command. Similarly, if the reader state indicates that some time has elapsed since the last refresh command was broadcast then the refresh parameter may be adjusted to reduce the time before the next refresh command is broadcast.","Optionally, the reader state may include a previous-command parameter and\/or a next-command parameter, indicating one or more previous commands transmitted by the reader and one or more future commands to be transmitted by the reader, respectively. For example, if the reader had just broadcast a refresh command then the next refresh command may not be needed immediately, and the previous-command parameter may be set or adjusted to cause the refresh parameter to delay the next refresh command. Similarly, if the reader will be transmitting a query command or a tag access command shortly, a refresh command may interfere, and the next-command parameter may be set or adjusted to cause the refresh parameter to delay the next refresh command.","Optionally, the reader state may include a tag or reader communication rate and\/or an impending frequency-hop parameter. The communication rate, which may be preset or dynamically set by the reader, determines the number of tags the reader can read in a given time span. If the communication rate is low then the refresh parameter may be set or adjusted to increase the frequency of refresh commands relative to inventorying commands to compensate for the low communication rate. Similarly, if the rate is high, indicating that the reader can communicate with many tags in a given time span, then the refresh parameter may be set or adjusted to decrease the frequency of the refresh commands relative to the inventorying commands. In a similar fashion, the impending frequency-hop parameter indicates whether the reader will change the communications channels\/frequencies in the near future. If so, then the refresh parameter may be adjusted to delay the next refresh command until after the frequency hop.","In certain embodiments the refresh conditions may include an environmental condition such as an RF noise parameter, a signal-to-noise ratio parameter, and\/or a temperature parameter. For example, if the RF noise parameter indicates that there is a significant amount of RF noise in the environment, or if the signal-to-noise ratio parameter indicates that the signal-to-noise ratio is low, then the refresh parameter may be adjusted to cause the reader to broadcast refresh commands more often, to account for the increased likelihood of noise interfering with the refresh command. Similarly, if the temperature parameter indicates that the temperature is high, which decreases tag-flag persistence times, then the refresh parameter may be adjusted to cause the reader to broadcast refresh commands more often to account for the lower flag persistence times.","The refresh conditions may include a tag-population parameter approximating the number of tags in the tag population, a recurring-tag parameter, and\/or a population-flush parameter. If there are many tags in the population then the tag-population parameter may be adjusted to cause the reader to broadcast refresh commands more often, to give the reader the maximum opportunity to inventory not-inventoried tags, and vice-versa. Similarly, if a recurring-tag parameter indicates that certain tags are recurring in the inventorying process more often than desired (which may indicate faster-than-expected flag decay) then the recurring-tag parameter may be adjusted to cause the reader to broadcast refresh commands more often.","In some situations, it may be desirable to clear or deassert the inventoried flags of all tags in the population. In these situations, a population-flush parameter may be set to cause the reader to delay the transmission of refresh commands beyond the flag persistence time such that all tag flags have the opportunity to decay.","In some embodiments the refresh conditions may include one or more tag-capability parameters indicating the capabilities of tags in the current tag population. For example, a tag-capability parameter may be a flag-persistence parameter indicating the persistence time of tag flags in the current tag population. If the flag-persistence parameter indicates that tag flags have relatively long persistence times then the refresh parameter may be adjusted to increase the time interval between successive broadcast refresh commands. If, on the other hand, the flag-persistence parameter indicates that the tag flags have relatively short persistence times then the refresh parameter may be adjusted to decrease the time interval between successive broadcast refresh commands.","As another example, a tag-capability parameter may include a tag-refresh support parameter indicating whether tags in the current population are capable of implementing the commanded refresh functionality. If none or few of the tags in the current population have a refresh capability then the refresh parameter may be adjusted to cause the reader to disable broadcasting refresh commands until tags that have the commanded refresh capability enter the tag population.","After the reader has evaluated the refresh conditions in step , it proceeds to step  where it decides if a refresh command should be broadcast based on the refresh conditions and refresh parameter determined in step . If the decision is affirmative then the reader proceeds to step , where it broadcasts a refresh command. Subsequently, or if it decided that a refresh command should not be broadcast at step , the reader proceeds to step  where it continues the inventorying process.","The above-mentioned refresh command can be constructed to be distinct from or in accordance with the communications protocol. A refresh command that is distinct from the communications protocol may be a custom or a proprietary command. A refresh command that is in accordance with the communications protocol may be a protocol command itself, or may co-opt a protocol command with a modified payload configured to instruct the tags to implement the refresh operation. In any case, a refresh command may optionally transfer a refresh value (such as a refresh persistence time) to the tags. As one example of a refresh command in accordance with a protocol, the refresh command can be a Select command of the Gen2 Specification, and the payload section can be a mask field within the Select. The Select command has the benefit that the Gen2 Specification specifies that it can be broadcast to a population of tags simultaneously. The following not-limiting example specifies one way (among the many possible) to use the Select command to specify a refresh operation.",{"@attributes":{"id":"p-0097","num":"0096"},"figref":["FIG. 11A","FIGS. 11B and 11C"]},{"@attributes":{"id":"p-0098","num":"0097"},"figref":["FIG. 11B","FIG. 11A","FIG. 11B"]},{"@attributes":{"id":"p-0099","num":"0098"},"figref":["FIG. 11C","FIG. 11B"]},"For the embodiment of , which is one of many possible embodiments, Membank=10specifies TID memory, Pointer=06points to the last two bits of the Class Identifier, Length=14indicates that 20 bits follow, ClassID=10selects EPCglobal tags, MDID=000000000001specifies Impinj, Indicator=1specifies a custom operation, Command Code=00000specifies a refresh operation, and no Data follow the Command Code because, in this embodiment, the refresh command does not need any data. Other commands may use the Data field, and its formatting will depend on the command code. In this embodiment the tag ignores the Target and Action field in the Select command; in other embodiments, the tag may use these fields.","In certain embodiments, a Select command that encapsulates an operation such as a refresh may apply the operation to only a subpopulation of tags. For example, the Select may select tags that are in motion or not in motion, tags that are locked or not locked, tags that have a particular bit sequence in a memory location, tags that have a certain power level, tags with any particular feature or characteristic, or any other criteria. In these situations, the refresh operation encapsulated within the Select command may be executed by those tags meeting the selected feature, characteristic, or criteria; or by tags not meeting the selected feature, characteristic, or criteria; or a mix thereof.","Numerous details have been set forth in this description, which is to be taken as a whole, to provide a more thorough understanding of the invention. In other instances, well-known features have not been described in detail, so as to not obscure unnecessarily the invention.","The invention includes combinations and subcombinations of the various elements, features, functions and\/or properties disclosed herein. The following claims define certain combinations and subcombinations, which are regarded as novel and non-obvious. Additional claims for other combinations and subcombinations of features, functions, elements and\/or properties may be presented in this or a related document."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The following Detailed Description proceeds with reference to the accompanying Drawings, in which:",{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0016","num":"0015"},"figref":["FIG. 3","FIG. 1"]},{"@attributes":{"id":"p-0017","num":"0016"},"figref":["FIG. 4","FIG. 1"]},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 11A"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":["FIG. 11B","FIG. 11A"]},{"@attributes":{"id":"p-0026","num":"0025"},"figref":["FIG. 11C","FIG. 11B"]}]},"DETDESC":[{},{}]}
