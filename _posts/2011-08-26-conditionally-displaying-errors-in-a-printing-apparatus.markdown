---
title: Conditionally displaying errors in a printing apparatus
abstract: An information processing apparatus that processes a job includes a determination unit configured to determine whether the job is a job in which print output is not performed by a printing apparatus, and a display unit configured to perform such control that information of occurrence of a first error in the printing apparatus is not displayed, if it is determined that the job is a job in which print output is not performed by the printing apparatus.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09218147&OS=09218147&RS=09218147
owner: Canon Kabushiki Kaisha
number: 09218147
owner_city: Tokyo
owner_country: JP
publication_date: 20110826
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","SUMMARY OF THE INVENTION","DESCRIPTION OF THE EMBODIMENTS"],"p":["1. Field of the Invention","The present invention relates to a technology for providing information concerning print processing to a user.","2. Description of the Related Art","Conventionally, there already exists a technology for notifying an error which has occurred in a printing apparatus, to a user in a status information display function (see e.g., Japanese Patent Application Laid-Open No. 2008-305142). According to Japanese Patent Application Laid-Open No. 2008-305142, acquiring and notifying information of the printing apparatus to a status information display unit, and causing the status information display unit to display the information, by a command transmission and reception unit of a printing control apparatus, is discussed. Furthermore, for a case where contents of a print command to be transmitted to the printing apparatus or setting information of the printing apparatus are inappropriately combined, a technique for temporarily stopping a transfer of the print command to the printing apparatus and notifying a setting error of the printing apparatus to the status information display unit is also discussed.","Usually, the printing control apparatus, upon receiving a print request from an application, generates a print command, and transmits the print command to the printing apparatus. On the other hand, there is a print request which does not require the printing control apparatus to transmit the print command. As an example thereof, there is a print request for form file creation. In a case where there is a problem with a print setting of the print request for form file creation, it is desired to notify as a priority an error of the print setting to a user. On the other hand, processing of the print request for form file creation is finalized inside the information processing apparatus, without generating the print command. For this reason, in performing processing of the print request for form file creation, there is an issue that, even if an error on the printing apparatus side is detected, the user does not want to display the error.","According to an aspect of the present invention, an information processing apparatus is an information processing apparatus that processes jobs, and includes a determination unit configured to determine whether a job is not a job in which print output is not performed by a printing apparatus, and a display unit configured, if it is determined that the job is a job in which print output is not performed by the printing apparatus, to perform such control that information of occurrence of a first error in the printing apparatus is not displayed.","According to another aspect of the present invention, an information processing apparatus is an information processing apparatus that processes jobs, and includes a first error detection unit configured to detect a occurrence of a first error in a printing apparatus, a second error detection unit configured to detect a second error related to one or more settings of the job, a determination unit configured to determine whether the job is a job in which print output is not performed by the printing apparatus, and a display unit configured, if the first error and the second error are detected, and it is determined that the job is a job in which print output is not performed by the printing apparatus, to perform such control that information of the second error is displayed with priority over information of the first error.","Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.","Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings.","The exemplary embodiments described below are not intended to limit the present invention according to claims, and all of combinations of features described in the present exemplary embodiments are not necessarily essential for a solving means of the present invention.","A configuration of a printing system including a printing apparatus (printing apparatus ) according to the present first exemplary embodiment and an information processing apparatus (personal computer ) connected to the printing apparatus will be described with reference to the block diagram in .  illustrates the printing system including the printing apparatus  and the personal computer  connected to the printing apparatus  as one exemplary embodiment of the present invention. The personal computer  includes an input interface  and a central processing unit (CPU) , a read-only memory (ROM) , a random-access memory (RAM) , an external storage apparatus , an output interface , a display unit , a keyboard , a mouse , and an input\/output interface . An initialization program is contained in the ROM , and various types of data of an application program group, an operating system (OS), a printer driver and others are stored in the external storage apparatus . The RAM  is a memory which various types of programs stored in the external storage apparatus  use as a work memory.","In the present exemplary embodiment, the functions described below in the personal computer  and the processing associated with the flowcharts described below are implemented by the CPU  performing the processing in accordance with a procedure of a program stored in the ROM  or the like.","The printing apparatus  includes an input\/output interface , a RAM , a print engine , a ROM , and a CPU . The input\/output interface  is connected to the input\/output interface  of the personal computer . In the present exemplary embodiment, a connection interface is assumed to be a universal serial bus (USB) (registered trademark), but it is acceptable whatever the interface. Further, an expansion option which expands the functions of the printing apparatus  can be also connected to the input\/output interface .","The RAM  is used as a main memory and a work memory of the CPU , and is used as a reception buffer for temporarily storing the received print job, and stores various types of data therein. The print engine  performs printing based on the data stored in the RAM .","In the ROM , various types of control programs such as a status management program , and data which respective control programs use are contained, and the CPU  controls respective units of the printing apparatus  according to these control programs. The status management program is a program for monitoring a state of the printing apparatus  on the basis of information of various types of sensors (not illustrated) arranged inside the printing apparatus , and creating status information, and storing it in the RAM .","Herein, process sharing of the personal computer  and the printing apparatus  has been shown as described above by way of an example, but it is not limited to especially this sharing configuration and other configurations are also acceptable.",{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 2","b":["220","201","213","212","214","211"]},"The spool data  is managed by the spooler  as a print job with names and the like added. The print job is supplied to the printer  and printed there, after having been converted into a print command which a printer  (an example of the printing apparatus ) can interpret using the printer driver . The application  adds the print setting information returned from a user interface module  to the print job via the print support function of OS , when performing print instruction. The print setting information is information which has been set in advance, before print start instruction from the application  is issued.","A print job passed to the printer driver  is first processed by a page configuration module . The page configuration module  performs page configuration processing with respect to the print job, such as rearranging pages of the print job according to print setting information, bringing together a plurality of pages into one page.","Next, the print job is passed to a preview activation module . The preview activation module , if an instruction to display print preview information is given in the print setting information, calls a print preview display module . The print preview display module  displays a print preview screen on the display unit  of the personal computer , and provides a means for allowing a user to check a print result in advance. If an instruction to display print preview information is not given in the print setting information, the preview activation module  passes the print job to the command generation module .","The command generation module  converts print data of the print job into print commands which the printer  can interpret according to the print setting information. The print commands are transmitted to the printer  in sequence by the command transmission and reception module . Furthermore, the command transmission and reception module  reads out a state of the printer  such as information that an error of the printer  has occurred, or page information of current printing, and passes it to a status information display module . The status information display module  analyzes a state of the printer , displays a status information display screen (not illustrated) which displays information of the printer  on the display unit  of the personal computer , and provides a means for allowing a user to check a state of the print job or a state of the printer .","In the present exemplary embodiment, an example in which the status information display module  displays the status information display screen to notify the information to the user is described, but it is not limited to this. For example, the status information display module  only performs state analysis or the like of the printer , and the processing of conveying the information to the user using the information display screen may be performed using a print support function of the OS.","The printer  uses transparent ink besides color inks such as cyan, magenta, yellow, and black (CMYK). The transparent ink is used for the purposes of homogenization of gloss feeling of images, and expansion of color gamut, and it is also possible to obtain decoration effect by not performing coating on a specific region.","The printer driver  has, as a coating method for the transparent ink, three modes of a whole surface coating mode, an automatic coating mode, and a user setting mode. The whole surface coating mode is a mode to apply the transparent ink in an entire printing range of a printing medium. The automatic coating mode is a mode of not applying the transparent ink on a printing medium which involves no transparent ink, and applying the transparent ink on a printing medium which involves the transparent ink in a region other than white point region among print data. More specifically, the automatic coating mode is a mode for switching according to whether to apply the transparent ink depending on a setting value of job setting of a printing medium type.","The user setting mode is a mode for providing designability to a printing result on the printing medium by not partly applying the transparent ink to change appearance, and is composed of two modes, i.e., a form file creation mode and a form combination printing mode. The form file creation mode is a mode for creating a region where the transparent ink is not applied (transparent ink removed region), and storing it as a form file. The form combination printing mode is a mode for executing print without applying the transparent ink, on only a designated region of the transparent ink removed region included in the selected form file. In the present exemplary embodiment, print processing for enhancing decoration of print output products using a specific ink (especially, the transparent ink) is realized by using a form for identifying a print region of the specific ink. It is conceivable to perform similar decoration with color inks other than the transparent ink such as silver ink.","Further, usable transparent ink coating modes differ for each printing mode determined by a combination of the print settings, and are classified into three categories as follows. The details of the printing modes will be described below. The three categories include a printing mode in which \u201cautomatic coating mode\u201d\/\u201cwhole surface coating mode\u201d\/\u201cuser setting mode (form file creation mode\/form combination printing mode)\u201d are possible, a printing mode in which \u201cautomatic coating mode\u201d\/\u201cwhole surface coating mode\u201d are possible, and a printing mode in which only \u201cautomatic coating mode\u201d is possible.","The printing mode in which only \u201cautomatic coating mode\u201d is usable is a printing mode in which the transparent ink is not applied. In a printing medium in which the effect of the transparent ink is minimal, including a plain paper or matte coated printing medium, a method of a color conversion, or print control is designed on the precondition that the transparent ink is not used. As a result, only the \u201cautomatic coating mode\u201d is usable as the transparent ink coating mode. In this case the \u201cautomatic coating mode\u201d will represent that \u201cthe transparent ink is not applied\u201d.","On the other hand, as to a type of a printing medium which can obtain an effect, such as homogenization of gloss feeling, by using the transparent ink, the \u201cautomatic coating mode\u201d and the \u201cwhole surface coating mode\u201d, in which the transparent ink is applied, become usable. In a case of these paper sheets type, whether the \u201cuser setting mode\u201d is usable differs depending on the printing modes. This is because in the printing mode in which it is difficult to produce decoration effect by using the transparent ink such as a printing mode in which priority is given to speed, only the \u201cautomatic coating mode\u201d and the \u201cwhole surface coating mode\u201d are made usable. Accordingly, in the printing mode in which it is difficult to obtain the decoration effect, a problem that a suitable print result cannot be obtained when using the user setting mode is prevented from occurring.","A printing mode table  in  is an example of the printing mode table which retains information concerning usable transparent ink coating mode for each printing mode. For example, a printing mode () of \u201cglossy paper A, color, borderless print ON, image quality priority\u201d, represents that the automatic coating mode, the whole surface coating mode, and the user setting mode are all usable. Further, a printing mode () of \u201cglossy paper A, color, borderless print ON, standard\u201d represents that only the automatic coating mode, and the whole surface coating mode are usable.","The methods of the color conversion, and the print control are thus determined according to setting values covering from type of printing medium as a higher level setting item, to print quality as a lower level setting item. Therefore, in the present exemplary embodiment, each one of combinations of these setting values is called a printing mode.","Hereinbelow, referring to , processing of the command generation module  will be described.  is a flowchart illustrating processing centering on setting error determination relating to the transparent ink coating mode, by the command generation module . In step S, the command generation module  performs print setting matching determination processing. More specifically, when printing is instructed, the command generation module  refers to print setting information in a print job, determines presence or absence of a mismatch (unusable combination is set) among setting items and changes setting values of some items.","Here, referring to , the print setting matching determination processing (step S) by the command generation module  will be described in detail. In step S, the command generation module  first refers to the setting value of the transparent ink coating mode in the print setting information. The command generation module  terminates matching determination processing, because if the setting value of the transparent ink coating mode is set to the automatic coating mode, the automatic coating mode is usable in all of the printing modes, and thus no mismatches exist.","In step S, if the transparent ink coating mode is set to the whole surface mode, the command generation module  determines with reference to the printing mode table  whether the whole surface coating mode is usable, in a printing mode corresponding to a current print setting. If the whole surface coating mode is usable as a result of the determination (YES in step S), the command generation module  terminates the processing as it is, since no mismatches exist. If it is determined that the whole surface coating mode cannot be used in the set printing mode (NO in step S), then in step S, the command generation module  changes the transparent ink coating mode to the automatic coating mode, and terminates the processing.","In step S, if a setting value of the transparent ink coating mode is the user setting mode, the command generation module  determines with reference to the printing mode table , whether the user setting mode is usable, in a printing mode corresponding to a current print setting. If the user setting mode is usable as a result of the determination (YES in step S), the command generation module  terminates the processing as it is, since no mismatches exist.","If it is determined that the user setting mode cannot be used in the printing mode being set (NO in step S), then in step S, the command generation module  further determines whether to select the form file creation mode or the form combination printing mode of the user setting mode.","If the form combination printing mode (FORM COMBINATION PRINTING MODE in step S) is selected, then in step S, the command generation module  changes the transparent ink coating mode to the automatic coating mode, and terminates the processing. If the form file creation mode (FORM FILE CREATION MODE in step S) is selected, then in step S, the command generation module  stores in the RAM  the fact that the original mode in the print setting was the form file creation mode. Thereafter, in step S, the command generation module  changes the transparent ink coating mode to the automatic coating mode, and terminates the processing.","Next, processing of the determinations in step S and later in the flowchart in  will be described. In step S, the command generation module  refers to the print setting changed as needed according to the processing step S, and determines whether the print setting is set to the form file creation mode. If it is determined that the print setting is not set to the form file creation mode in the determination in step S (NO in step S), then in step S, the command generation module  refers to the information stored in the RAM  in step S, and determines whether the transparent ink coating mode has been changed from the form file creation mode in step S.","The command generation module , upon determining that the transparent ink coating mode has been changed (YES in step S), executes error display processing in step S and later. In step S and later, the command generation module  informs the subject error information to the user, and does not implement print and form creation processing. The processing in step S and later (an example of display control processing) will be described below.","If the command generation module  determines that the transparent ink coating mode has been changed from the form file creation mode in the determination in step S, the process is taken as an error to avoid consumption of useless printing medium by the user's unexpected print processing. While form files are only generated and printing is not performed in the form file creation mode, printing will be performed, if change to another mode is made and continued in step S. A user who has designated the form file creation does not desire that output processing onto a printing medium will be performed, and occurrence of unexpected print processing results in a useless consumption of the printing medium, which is undesirable.","If it is determined that the transparent ink coating mode has not been changed from the form file creation mode in the determination in step S (NO in step S), then in step S, the command generation module  determines whether the transparent ink coating mode is set to the form combination printing mode. If it is determined that the transparent ink coating mode is not set to the form combination printing mode in the determination in step S (NO in step S), then in step S, the command generation module  performs ordinary print processing which does not use form files. The details of step S will be described below using a separate flowchart.","If it is determined that the transparent ink coating mode is set to the form combination printing mode in the determination in step S (YES in step S), then in step S, the command generation module  determines whether a designated form file exists in the print setting. The form file is designated by an operation of input device such as the mouse , or the keyboard  by a user (user operation). If the designated form file exists (NO in step S), then in step S, the command generation module  performs form combination print processing using the form file. The details of step S will be described below using a separate flowchart. If the designated form file does not exist (YES in step S), the command generation module  executes error display processing in step S and later.","If it is determined to be the form file creation mode in the determination in step S (YES in step S), then in step S, the command generation module  checks whether equal to or greater than the specified number of upper limit of form files exist. If they exist (YES in step S), the command generation module  executes error display processing in step S and later. The purpose of the determination in step S is to avoid tightness of the external storage apparatus , which is attributed to the generation of a great amount of form files.","If equal to or greater than a specified number of upper limit of form files do not exist (NO in step S), then in step S, the command generation module  checks form name in the print setting information, and determines whether correct form name is designated. The purpose of the determination in step S is to avoid the generation or overwrite of unintended form files. If there are no blanks in the form names, and existing form files having identical names do not exist, the command generation module  determines that the designated form name is normal.","If the form name is normal (NO in step S), then in step S, the command generation module  performs form file creation processing. The processing in step S will be described below. If the form name is incorrect (YES in step S), the command generation module  executes error display processing in step S and later.","Finally, the error display processing in step S and later will be described which is executed if either one of four conditions in the flowchart in  is satisfied. First, in step S, the command generation module  generates a setting error notification command for notifying that a setting error has occurred, and transmits the command to the command transmission and reception module .","The command transmitted by the command generation module  usually reaches the printer  via the command transmission and reception module . However, the command transmission and reception module , upon receiving the setting error notification command, performs processing for notifying that the setting error has occurred, without transmitting it to the printer . The detailed processing of the command transmission and reception module  will be described below.","As illustrated in the flowchart in , the command generation module  will never transmit another print command, before transmitting the setting error notification command in step S. In other words, if a setting error has occurred, every command does not reach the printer , throughout the processing of the entire print job. Accordingly, at the time of occurrence of the setting error, the command generation module  can avoid the printer  from unnecessarily performing initialization operation. Depending on a state of the printing system, the print command which the command generation module  has transmitted may reach the printer , without passing through the command transmission and reception module . The setting error notification command is configured as a command for causing the printer  not to incorrectly operate on that occasion.","Here, using , data structure of a setting error notification command  will be described. A start of command is denoted by a <command> element . A target which the command controls is denoted by a <controlmode=\u201cdriver\u201d> element . An attribute value, driver, is set to mode attribute of control tag. In other words, it indicates that this command is a command for controlling the driver. Notification content is specifically written by a <notify>element . An Error Code  () is set to data of the <notify>element . The command transmission and reception module , upon receiving the Error Code (), recognizes it as a setting error.","For data of the element , an Error Code corresponding to a content of the error is set by the command generation module , and is referred to in order to recognize an error type in the command transmission and reception module . In the present exemplary embodiment, the command generation module  sets and transmits corresponding Error Code depending on which error condition of the determinations shown in steps S, S, S, and S has been satisfied.","After transmitting the setting error notification command in step S, then in step S, the command generation module  skips all ordinary print command generation processing and transmission processing. In a case of a printing system in which the command generation module  actively acquires pages while print job is being executed, this skip processing is carried out by not implementing all processing from acquisition of the pages to generation of the command.","After skipping all the print command generation processing, in step S, the command generation module  returns information representing success of the processing to the spooler  (system). In other words, the command generation module  terminates the processing, as having been successful in the generation of the commands for setting error notification, although the print command generation processing has been internally skipped.","Here, even if the commands for setting error notification are still retained by the spooler , the spooler  transmits the setting error notification command to the command transmission and reception module  when receiving information representing the success. Accordingly, it is assured that the setting error notification command surely reaches the command transmission and reception module .","The command which the command generation module  has transmitted, usually, reaches the command transmission and reception module  via the spooler . Usually, in the event that an error has occurred which makes it impossible to continue the process by the command generation module , the command generation module , after interrupting the print command generation processing, returns the information representing failure of the processing to the spooler . Accordingly, suspension of the processing is notified to other modules of the printer driver , and the print job can be promptly suspended.","In this case, however, it is not assured that print commands, which the command generation module  has transmitted before suspending the processing, all reach the command transmission and reception module . As illustrated in step S, it can be assured that print commands, which the command generation module  has transmitted, reach the command transmission and reception module , by returning information representing success to the system.","More specifically, the command generation module  returns the information representing the success to the system in step S, thereby enabling to assure that the setting error notification command reaches the command transmission and reception module . Accordingly, by the processing of the command transmission and reception module  described below, an exact stoppage of the print job can be performed utilizing a mechanism of the spooler . Since ordinary print command generation, and transmission processing are skipped in step S, the print job is promptly terminated, after the print job is stopped and terminated by the command transmission and reception module .","Using , print processing without using the form file which the command generation module  implements in step S will be described in detail.","First, in step S, the command generation module  performs rasterization on the basis of the print job of current pages, and creates multivalued raster data. The rasterize processing may be also implemented by utilizing either a program which the printer driver  provides, or a function which the OS provides. Next, in step S, the command generation module  performs color conversion processing. The color conversion processing includes conversion processing into color space which relies on the printer , color converting processing from RGB (red, green, blue) system data of an input system expressed with luminance signals into CMYK system data of an output system for expressing with density signals, and other processing. In accordance with print settings relating to the transparent ink coating method, generation of transparent ink plane is also performed by a method suitable for either \u201cautomatic\u201d, or \u201cwhole surface\u201d.","Next, in step S, the command generation module  performs binarization processing, for quantizing the CMYK system data into 1-bit data for each color. Then, in step S, the command generation module  performs conversion into, and transmission of the print commands which the printer  can interpret. The transmitted print commands reach the printer , via the command transmission and reception module , and the printer  form an image corresponding to the received print commands on a printing medium. Finally, in step S, the command generation module  determines whether all pages are completed in step S, and advances the process to the next page if there are the remaining pages. When there are no remaining pages, the command generation module  terminates the processing.","Using , the form file creation processing which the command generation module  performs in step S will be described in detail. A structure of the form files will be described below. First, in step S, the command generation module  refers to a specified location in the external storage apparatus  as an example of a storage unit, and removes form files which exist in an incomplete form, if any. The purpose of the processing is to remove incomplete form files which remain in a case where incorrect termination is performed halfway through the form file creation processing. Next, in step S, the command generation module  creates empty form file in the specified location for creating a form file in the external storage apparatus , and in step S, writes a job header on the created form file.","Here, a structure of the job header will be described in detail with reference to . A job header  is composed of a version , a form name , and a total number of pages . The version  represents version information relating to a format of the form file. The form name  represents a name of the form file, and the form name subjected to correct or incorrect determination in step S is stored therein. The total number of pages  represents a number of pages of the transparent ink removed region information existing in the form file, and is stored in step S described below.","After writing the job header, then in step S, the command generation module  checks whether a page having the identical transparent ink removed region exists in the form file. If the command generation module  recognizes that a second copy and later of printing multiple copies are being processed, it may determine that the identical transparent ink removed region already exists. If the identical transparent ink removed region already exists (YES in step S), then in step S, the command generation module  writes a page header containing information which refers to existing pages, and terminates the processing on the current page. By this processing, the form file creation processing can be completed at a high speed, and a size of the form files can be made smaller as well. If the identical transparent ink removed region does not exist (NO in step S), then in step S, the command generation module  writes the page header.","A structure of the page header will be described in detail with reference to . A page header  is composed of a page identifier (ID) , a print setting , a page size , a width , a height , and a page data position . The page ID  is a value for uniquely identifying the page. The print setting  is various types of print settings at the time of print execution in the form file creation mode. The print setting  includes information concerning a size of printing medium, an orientation of printing and the like, and the print settings  is referred to by the user interface module , when a form file list is displayed.","The page size  represents in a byte unit a size of the transparent ink removed region which the page header refers to. The width  and the height  represent in a pixel unit a width and a height of the transparent ink removed region which the page header refers to. The page data position  represents a position of the ink removed region which the page header refers to, and an offset position from the front end of the form file is stored therein.","After writing the page header in step S, then in step S, the command generation module  performs rasterization on the basis of the print job of the current page to create multivalued raster data. In step S, the command generation module  binarizes the multivalued raster data to create binary raster data.","Here, in the multivalued raster data, a region of pure white is binarized as \u20181\u2019 and a region other than pure white as \u20180\u2019. In step S, the command generation module  writes the binary raster data thus created into the form file. The binary raster data represents transparent ink removed region information in the current page, and the transparent ink is not applied in the region of \u20180\u2019 at the time of form combination printing. In this way, the regions other than pure white are regarded as the transparent ink removed region which the user designates as a form region and all regions other than pure white are stored as \u20180\u2019.","In step S, the command generation module  checks whether the remaining pages exist. If the remaining pages exist (NO in step S), then in step S, the command generation module  refers to the next page, and returns to the step S. In step S, if there are no remaining pages, the command generation module  updates the number of pages to be stored in the job header, which is final information.","Simultaneously with step S, the command generation module  adds information indicating that the form file creation has been normally completed. The information may be included in the job header, or the fact that the form file creation has been normally completed may be expressed by giving a particular name to the form file. Alternatively, the fact that the form file creation has been normally completed may be expressed by separately creating a management list which stores information concerning normally created form files in a list format, and by appending the information to the management list. A form file not having information, which is added in step S and indicates that the form file creation has been normally completed, is removed as an incomplete form file in step S, at the time of the next form file creation. Finally, in step S, the command generation module  closes the form file, and terminates the form file creation processing.","As described above, upon receiving the print job of the form file creation mode, the command generation module  creates a form including the transparent ink removed region information, as an external file in the external storage apparatus , without supplying the print command to the printer . An example of thus generated form file will be described in detail with reference to .","At the front end of the form file , there is the job header  to be added in step S. Next, a 1page header , and a 1transparent ink removed region information  come. In the page data position , a front-end position of the 1transparent ink removed region information  is stored as one of elements of the 1page header . Next, a 2page header  comes.","Here, the command generation module  is assumed to determine that 2transparent ink removed region information is the same as the 1in step S in . In such a case, a front-end value of the 1transparent ink removed region information  is stored, in a page data position as one of elements of the 2page header . Such a page header in the form of referring to existing page is created according to step S in . Thereafter, the page header, and the transparent ink removed region information are repetitively stored when needed.","With reference to , the form combination print processing which the command generation module  performs in step S will be described in detail. First, in step S, the command generation module  opens a form file. Then, in step S, the command generation module  reads out a job header which is stored at the front end of the form file. Next, in step S, the command generation module  rasterizes the current page, then in step S, performs color conversion processing. These processing (steps S and S) are equivalent to the processing in steps S and S in . In step S, the command generation module  creates a transparent ink plane by a method equivalent to the coating method \u201cwhole surface\u201d of transparent printing.","Next, in step S, the command generation module  removes the transparent ink according to the transparent ink removed region of the current page, from the transparent ink plane information in step S. Thereafter, in step S, the command generation module  performs binarization processing, then in step S, performs command addition and transmission processing. These processing is equivalent to the processing in steps S and S in . Finally, in step S, the command generation module  determines whether all pages are completed in step S, and advances the processing to the next page if the remaining pages are present. When the remaining pages are not present, then in step S, the command generation module  closes the form file opened in step S, and terminates the processing.","As described above, a print job for creating the form file generated by the command generation module  is presented as printing which is not output to the printing apparatus . However, the printing which is not output to the printing apparatus  is not limited to this.",{"@attributes":{"id":"p-0091","num":"0090"},"figref":"FIG. 9","b":["226","900","226","212"]},"In step S, the command transmission and reception module  checks whether a cancel instruction of the print job is given from the spooler . If a cancel instruction of the print job has been given from the spooler  (YES in step S), then in step S, the command transmission and reception module  terminates the processing. If a cancel instruction of the print job has not been given (NO in step S), then in step S, the command transmission and reception module  checks whether the command has been received. If the command has not been received (NO in step ), the command transmission and reception module  returns to the processing in step S to wait for a command reception. If it is determined that the command has been received (YES in step ) in the determination in step S, then in step S, the command transmission and reception module  acquires a status of the printer . Subsequently, in step S, the command transmission and reception module  parses the received command, and interprets the command.","Next, in step S, the command transmission and reception module  determines whether the command is a setting error notification command. More specifically, the command transmission and reception module  is an example of a setting error detection unit that detects setting errors. If the command is not a setting error notification command (NO in step S), then in step S, the command transmission and reception module  determines whether the printer  is in an error state, from the status of the printer  acquired in step S. More specifically, the command transmission and reception module  is an example of an apparatus error detection unit that detects an apparatus error. If the printer  is not in the error state (NO in step S), then in step S, the command transmission and reception module  transmits the command to the printer .","Subsequently, in step S, the command transmission and reception module  determines whether command transmission to the printer  is successful. If the command transmission has been successful (YES in step S), then in step S, the command transmission and reception module  notifies the spooler  that the command transmission has been successful. At the same time, in step S, the command transmission and reception module  notifies a size of the command transmitted to the printer , to the spooler .","Subsequently, in step S, the command transmission and reception module  determines whether all commands have been completely received. If it is determined that all commands have not been received (NO in step S), the command transmission and reception module  returns the processing to step S, and continues the processing until all commands are completely received. If it is determined that all the commands have been completely received in the determination in step S (YES in step S), then in step S, the command transmission and reception module  terminates the processing.","In step S, if the command transmission and reception module  determines that the command transmission to the printer  has failed in the determination in step S (NO in step S), it notifies the command transmission failure to the spooler , and returns the processing to step S. Further, if the command transmission and reception module  determines that the printer  is in an error state in the determination in step S (YES in step S), then in step S, it instructs the status information display module  to perform error display. The processing of the status information display module  will be described below.","The processing in which the command transmission and reception module  recognizes that the command is a setting error notification command in the determination in step S will be described in detail using .",{"@attributes":{"id":"p-0098","num":"0097"},"figref":"FIG. 14","b":["1401","1402","1402","1403","1403","1","1404","226","1","1404"]},"When the command transmission and reception module  determines that the command is a setting error notification command in the determination , it instructs the status information display module  to display an error in step S. The processing of the status information display module  will be described below. In step S, the command transmission and reception module  notifies the spooler  that transmission has been successful. Subsequently, in step S, the command transmission and reception module  notifies the spooler  that a size of the command transmitted to the printer  is \u201c0 byte\u201d.","By the command transmission and reception module  performing the processing in steps S and S, the printer driver  is enabled to perform error display, without causing the spooler  to recognize that the processing of the print job has failed. Further, by the command transmission and reception module  performing the processing in steps S and S, the printer driver  is enabled to reserve the processing of the print job until a user operates the operation unit on the error display.",{"@attributes":{"id":"p-0101","num":"0100"},"figref":["FIG. 10","FIG. 10"],"b":["226","227","227","226","227"]},"In step S, the command transmission and reception module  starts error display instruction processing. Then, in step S, the command transmission and reception module  determines whether some error is occurring. Some error refers to an error of the printer  determined in the determination in step S, or a setting error of the print job determined in the determination in step S. If it is determined that no error is occurring in the determination in step S (NO in step S), then in step S, the command transmission and reception module  terminates error display instruction processing.","If it is determined that some error is occurring in the printer  in the determination in step S (YES in step S), then in step S, the command transmission and reception module  checks for a type of the print job. The type of print job may be determined by the command transmission and reception module  from the setting information of the print data, or may be determined by the command generation module  on upstream side or the page configuration module  upon receiving a notification. If it is determined as a print job to be output to the printer  in the determination in step S (YES in step S), then in step S, the command transmission and reception module  writes in a file  an error of the printer  and a setting error of the print job.",{"@attributes":{"id":"p-0104","num":"0103"},"figref":"FIG. 12A","b":["1201","230","1202","1200","1040","226","230","230","230","230"]},"In step S, error information is recorded in the file . After that, in step S, the command transmission and reception module  activates the status information display module , then in step S, terminates the processing. In the determination in step S, if it is determined that a print job is not to be output to the printer  (NO in step S), then in step S, the command transmission and reception module  masks the error (printer error) of the printer .","In the present exemplary embodiment, as a method for communication between processes of modules each other, a file sharing will be described by way of an example. In step S, the command transmission and reception module  writes error information in the file . Communication processing between different processes is realized by the status information display module  loading the file . The processing of the status information display module  will be described below.","If it is determined that a print job is not to be output to the printer  in the determination in step S, the command transmission and reception module  performs the processing in step S for masking the error of the printer . After having executed mask processing in step S, in step S, the command transmission and reception module  records the remaining error information in the file . Then in step S, the command transmission and reception module  activates the status information display module . After having activated the status information display module  in step S, then in step S, the command transmission and reception module  terminates the processing.","Here, the processing in step S will be described in detail with reference to .  illustrates a state in which only a setting error A  is recorded in a file  () by the command transmission and reception module . For example, the setting error A indicates an error in a case where the command generation module  determines that a form name (form file name) is incorrect in the determination in step S made at the time of form file creation. If only the setting error (the setting error A) of the print job has occurred, the command transmission and reception module  writes the setting error A  in the file  as error information since the error of the printer  does not exist.",{"@attributes":{"id":"p-0109","num":"0108"},"figref":"FIG. 12C","b":["1221","226","1220","1221","230","1221","230","226","1221","1225","1226","226"]},{"@attributes":{"id":"p-0110","num":"0109"},"figref":"FIG. 12D","b":["1231","226","1230","1231","230","1232","1231","230","226","1231","1235","1236","226"]},"In this way, after error information has been recorded in the file  in step S, then in step S, the command transmission and reception module  activates the status information display module , and in step S, terminates the processing.","Subsequently, the processing of the status information display module  activated from the command transmission and reception module  in step S will be described. In step S, the status information display module  starts the processing. Then, in step S, the status information display module  confirms the file  on which the error information has been recorded.","If the error information  in  has been recorded on the file , then in step S, the status information display module  determines that the error information does not exist (NO in step S), and in step S, terminates the processing. In the determination in step S, if it is determined that error information exists (YES in step S), then in step S, the status information display module  displays the error. If the error information () in , or the error information  in  has been recorded on the file , the status information display module  displays an error screen  as illustrated in .","If a plurality of errors is described like the error information  in , the status information display module  may adopt specifications that give priority to the display of an error at the front end. In that case, the status information display module  displays the error screen  as illustrated in .","The status information display module , after displaying an error in step S, checks whether the error has been cancelled in step S. The status information display module  confirms, for example, the error screen  in , and checks whether the user has closed a cover of the printer . For example, information that the user has closed the cover of the printer , is notified from the printer  to the status information display module  via the command transmission and reception module . In the determination in step S, if it is determined that the error has been cancelled (YES in step S), then in step S, the status information display module  terminates the processing.","In the determination in step S, if it is determined that the error has not been cancelled, (NO in step S), then in step S, the status information display module  checks whether job cancel instruction is given from the user. The job cancel instruction is conveyed to the status information display module , in response to the user depressing a \u201cCancel Printing\u201d button  displayed on the error screen  in , or a \u201cCancel\u201d button  displayed on the error screen () in .","If a job cancel instruction has not been given from the user (NO in step S), the status information display module  returns to step S. If job cancel instruction has been given from the user (YES in step S), then in step S, the status information display module  implements job cancel processing, and after that, in step S, terminates the processing.","The status information display module  may request the spooler  to perform job cancel by utilizing application programming interface (API) which the OS provides. Alternatively, the status information display module  performs cancel notification to the command transmission and reception module  as communication between processes. Then, the command transmission and reception module  may terminate the print job, by notifying the spooler  that the command size received in the determination in step S has been transmitted to the printer .","As described above, the command transmission and reception module  masks an error no to be displayed depending on a type of the print job, and notifies the error to the status information display module . Accordingly, it becomes possible for the status information display module  to notify appropriate error information to the user.","Further, in the present exemplary embodiment, a configuration is described in which the printer driver  transfers no data to the printer  in a case of a print job which is not transmitted to the printer . However, the printer driver  may transfer data for the purpose of communication establishment with the printer , or communication check. Even in such a case, with the configuration in which the printer driver  does not transmit to the printer  a command such as print instruction on a printing medium, the objectives of the present invention can be fulfilled.","Hereinbelow, a second exemplary embodiment will be described. In the printer driver  that notifies all detected errors to the user, specifications for listing errors according to priority of errors which should be notified by the status information display module  are assumed. In this case, even when the processing of the print job which is not to be transmitted to the printer  is in progress, it is difficult for the printer driver  to employ processing for neglecting the error of the printer . In a second exemplary embodiment, a method for solving this issue will be described in detail using  and .",{"@attributes":{"id":"p-0122","num":"0121"},"figref":["FIG. 15","FIG. 15"],"b":["226","227","226","227","227"]},"In step S, the command transmission and reception module  starts error display instruction processing, then in step S, determines whether some error is occurring. Some error refers to an error of the printer  determined in the determination in step S, or a setting error of the print job determined in the determination in step S. If it is determined that no error is occurring, in the determination in step S (NO in step S), then in step S, the command transmission and reception module  terminates the error display instruction processing.","In the determination in step S, if the command transmission and reception module  determines that some error is occurring in the printer  (YES in step S), then in step S, it checks for a type of the print job. The type of the print job may be configured such that the command transmission and reception module  determines from setting information of print data, or may be configured such that the command transmission and reception module  determines upon receiving notification from the command generation module  on upstream side or the page configuration module .","In step S, the command transmission and reception module  assigns the order of notification priority to errors, depending on the type of print job checked in step S. After the order of notification priority has been assigned to the errors according to step S, then in step S, the command transmission and reception module  records the error information on the file . Thereafter, in step S, the command transmission and reception module  activates the status information display module , then in step S, terminates the processing.",{"@attributes":{"id":"p-0126","num":"0125"},"figref":"FIGS. 12E and 12F","b":["1540","1240","1250","226","1241","1251"]},"If the type of print job checked in step S is a print job not to be output to the printer , it is desirable that a setting error of the print job is notified on a priority basis to the user. Thus, a state in which the command transmission and reception module  assigns notification priority \u201c1\u201d to the setting error (setting error A) of the print job is indicated in  in . Subsequently, a state in which the command transmission and reception module  assigns a lower notification priority \u201c2\u201d than that of the setting error (setting error A) of the print job, to the error (cover open error) of the printer  is indicated in  in .","On the other hand, if the type of the print job checked in step S is a print job to be output to the printer , the command transmission and reception module  assigns notification priority \u201c1\u201d to an error (cover open error) of the printer , when an error of the printer  should be notified to user on a priority basis. This state is indicated in  in .","Subsequently, a state in which the command transmission and reception module  assigns a lower notification priority \u201c2\u201d than that of the error (cover open error) of the printer  to the setting error (setting error C) of the print job is indicated in  in . Setting error C is an error determined on the basis of the command which the command transmission and reception module  has received and a state of the printer . Here, the type of the printing medium indicated in the command is usable in the sheet feed port (not illustrated) of the printer , but an error for indicating a warning in a case where there is separate sheet feed port from which a higher print quality can be obtained, is taken as the example.","Subsequently, the processing of the status information display module  activated from the command transmission and reception module  in step S will be described. In step S, the status information display module  starts the processing. Then in step S, the status information display module  confirms the file  in which error information has been recorded. If error information has not been recorded in the file , the status information display module  determines that the error information does not exist (NO in step S), then in step S, terminates the processing. In the determination in step S, if it is determined that the error information exists (YES in step S), then in step S, the status information display module  displays the error.","If the error information  in  has been recorded in the file , the status information display module  displays an error screen  as illustrated in . On the error screen , there is a region where an error list is displayed, which indicates a state where a setting error  of the print job with the highest notification priority is selected. On the error screen , detailed description relating to the selected error is displayed. In step S, the user can also stop printing by depressing a \u201cCancel\u201d button .","On the other hand, if the error information  in  is recorded in the file , the status information display module  displays an error screen  as illustrated in .","The error screen  indicates a state in which an error (cover open error) of the printer  is occurring as an error with the highest notification priority. In addition, the error screen  indicates a state in which a setting error  of the print job with the second highest notification priority is selected. On the error screen , detailed description relating to the selected error is displayed. In step S, the user can also stop printing by depressing a \u201cCancel\u201d button . Also, the user can neglect the error by depressing an \u201cIgnore\u201d button , and continue printing.","In step S, the status information display module  displays errors. After that, in step S, the status information display module  checks whether all errors have been cancelled. In the determination in step S, if it is determined that all errors have been cancelled (YES in step S), then in step S, the status information display module  terminates the processing. In the determination in step S, if it is determined that errors have not been cancelled (NO in step S), then in step S, the status information display module  checks whether a job cancel instruction has been given from the user. The job cancel instruction is conveyed to the status information display module  in response to the user depressing the \u201cCancel\u201d buttons  and  displayed on the error screen  in , and the error screen  in .","In step S, if the job cancel instruction has not been given from the user (NO in step S), the status information display module  returns the processing to step S. In step S, if the job cancel instruction has been given from user (YES in step S), then in step S, the status information display module  implements job cancel processing, and thereafter in step S, terminates the processing.","As described above, the command transmission and reception module  controls an order of priority of errors to be notified, depending on a type of the print job and notifies the status information display module , thereby the status information display module  can notify appropriate error information to the user.","In the exemplary embodiments so far, an example of the printer driver  in which information is notified to the user only when a print job exists is described. However, the present invention can also be applied to the printer driver  which monitors at all times information of the printer , and notifies it to the user, as a third the exemplary embodiment.","The objectives of the present invention are achieved by supplying to a system or an apparatus, a recording medium which has recorded a program code of a software for implementing the functions of the above-described exemplary embodiments as a fourth exemplary embodiment, and by causing a computer (or a CPU, a micro-processing unit (MPU), and\/or the like) of the system or the apparatus to read out and execute the program code stored in the recording medium. In this case, the program code itself readout from the storage medium implements the functions of the above-described exemplary embodiments, and the storage medium that has stored the program code constitutes the present invention.","As a storage medium for supplying the program code, for example, a flexible disk, a hard disk, an optical disk, a magneto-optical disk, a compact disk ROM (CD-ROM), a CD recordable (CD-R), a magnetic tape, a nonvolatile memory card, a ROM, and a digital versatile disk (DVD) can be used.","Further, the functions of the above-described exemplary embodiments are implemented not only by executing a program code which the computer reads out, but also by an operating system (OS) or the like running on the computer, which performs a part of or the whole of actual processing according to instructions of the program code. Needless to say, in such a case, such program code is included in the present invention.","Furthermore, the functions of the above-described exemplary embodiments are implemented by performing a part of or the whole of the actual processing by a CPU or the like provided in a function expansion board inserted into the computer or in a function expansion unit connected to the computer, according to instructions issued by the program code that is readout from the storage medium after written to a memory provided on the function expansion board or on the function expansion unit. Needless to say, in such a case, such program code is included in the present invention.","The present invention can also be realized by executing the following process. That is, a process in which a software (program) that implements the functions of the above-described embodiments is supplied to the system or apparatus via a network or a recording medium of various types, and then a computer of the system or apparatus (or devices such as a CPU, an MPU, and\/or the like) reads out the program and executes it. In such a case, the recording medium where the program is stored as well as the program are included in the present invention.","While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.","This application claims priority from Japanese Patent Application No. 2010-194152 filed Aug. 31, 2010, which is hereby incorporated by reference herein in its entirety."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":["The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.",{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIGS. 11A","b":["11","11"]},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIGS. 12A","b":["12","12","12","12","12"]},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIGS. 13A","b":["13","13","13"]},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0025","num":"0024"},"figref":"FIG. 15"}]},"DETDESC":[{},{}]}
