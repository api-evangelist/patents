---
title: Generating risk profile using data of home monitoring and security system
abstract: Systems and methods are described comprising a touchscreen that includes a processor coupled to a security system at a premises. A plurality of user interfaces presented via the touchscreen includes a security interface and a network interface. The security interface provides control of functions of the security system and access to data collected by the security system. The network interface provides access to network devices. The network devices are located at the premises and are coupled to the touchscreen. A security server at a remote location is coupled to the gateway and comprises a client interface through which remote client devices exchange data with the gateway and the security system. At least one of the security server and touchscreen collect behavioral data using the security system and the network devices, and generate a risk score using the behavioral data.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09609003&OS=09609003&RS=09609003
owner: iControl Networks, Inc.
number: 09609003
owner_city: Redwood City
owner_country: US
publication_date: 20140307
---

{"@attributes":{"id":"description"},"RELAPP":[{},{}],"heading":["RELATED APPLICATIONS","TECHNICAL FIELD","BACKGROUND","INCORPORATION BY REFERENCE","DETAILED DESCRIPTION"],"p":["This application claims the benefit of United States (U.S.) Patent Application No. 61\/789,542, filed Mar. 15, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/782,345, filed Mar. 14, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/802,077, filed Mar. 15, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/777,061, filed Mar. 12, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/778,853, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/779,028, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/779,753, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/780,092, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/780,290, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/780,435, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/780,538, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/780,637, filed Mar. 13, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/781,401, filed Mar. 14, 2013.","This application claims the benefit of U.S. Patent Application No. 61\/781,713, filed Mar. 14, 2013.","This application is a continuation in part application of U.S. patent application Ser. No. 12\/197,946, filed Aug. 25, 2008.","This application is a continuation in part application of U.S. patent application Ser. No. 13\/718,851, filed Dec. 18, 2012.","This application is a continuation in part application of U.S. patent application Ser. No. 13\/932,837, filed Jul. 1, 2013.","This application is a continuation in part application of U.S. patent application Ser. No. 11\/761,745, filed Jun. 12, 2007.","This application is a continuation in part application of U.S. patent application Ser. No. 12\/019,568, filed Jan. 24, 2008.","This application is a continuation in part application of U.S. patent application Ser. No. 13\/925,181, filed Jun. 24, 2013.","This application is a continuation in part application of U.S. patent application Ser. No. 13\/531,757, filed Jun. 25, 2012.","This application is a continuation in part application of U.S. patent application Ser. No. 13\/335,279, filed Dec. 22, 2011.","This application is a continuation in part application of U.S. patent application Ser. No. 12\/539,537, filed Aug. 11, 2009.","This application is a continuation in part application of U.S. patent application Ser. No. 12\/750,470, filed Mar. 30, 2010.","This application is a continuation in part application of U.S. patent application Ser. No. 13\/104,932, filed May 10, 2011.","The embodiments described herein relate generally to a method and apparatus for improving the capabilities of security systems in home and business applications. More particularly, the embodiments described herein relate to a touchscreen device that integrates security system control and functionality with network content interactivity, management and presentation.","The field of home and small business security is dominated by technology suppliers who build comprehensive \u2018closed\u2019 security systems, where the individual components (sensors, security panels, keypads) operate solely within the confines of a single vendor solution. For example, a wireless motion sensor from vendor A cannot be used with a security panel from vendor B. Each vendor typically has developed sophisticated proprietary wireless technologies to enable the installation and management of wireless sensors, with little or no ability for the wireless devices to operate separate from the vendor's homogeneous system. Furthermore, these traditional systems are extremely limited in their ability to interface either to a local or wide area standards-based network (such as an IP network); most installed systems support only a low-bandwidth, intermittent connection utilizing phone lines or cellular (RF) backup systems. Wireless security technology from providers such as GE Security, Honeywell, and DSC\/Tyco are well known in the art, and are examples of this proprietary approach to security systems for home and business.","Furthermore, with the proliferation of the internet, ethernet and WiFi local area networks (LANs) and advanced wide area networks (WANs) that offer high bandwidth, low latency connections (broadband), as well as more advanced wireless WAN data networks (e.g. GPRS or COMA 1\u00d7RTT) there increasingly exists the networking capability to extend these traditional security systems to offer enhanced functionality. In addition, the proliferation of broadband access has driven a corresponding increase in home and small business networking technologies and devices. It is desirable to extend traditional security systems to encompass enhanced functionality such as the ability to control and manage security systems from the world wide web, cellular telephones, or advanced function internet-based devices. Other desired functionality includes an open systems approach to interface home security systems to home and small business networks.","Due to the proprietary approach described above, the traditional vendors are the only ones capable of taking advantage of these new network functions. To date, even though the vast majority of home and business customers have broadband network access in their premises, most security systems do not offer the advanced capabilities associated with high speed, low-latency LANs and WANs. This is primarily because the proprietary vendors have not been able to deliver such technology efficiently or effectively. Solution providers attempting to address this need are becoming known in the art, including three categories of vendors: traditional proprietary hardware providers such as Honeywell and GE Security; third party hard-wired module providers such as Alarm.com, NextAlarm, and uControl; and new proprietary systems providers such as InGrid.","A disadvantage of the prior art technologies of the traditional proprietary hardware providers arises due to the continued proprietary approach of these vendors. As they develop technology in this area it once again operates only with the hardware from that specific vendor, ignoring the need for a heterogeneous, cross-vendor solution. Yet another disadvantage of the prior art technologies of the traditional proprietary hardware providers arises due to the lack of experience and capability of these companies in creating open internet and web based solutions, and consumer friendly interfaces.","A disadvantage of the prior art technologies of the third party hard-wired module providers arises due to the installation and operational complexities and functional limitations associated with hardwiring a new component into existing security systems. Moreover, a disadvantage of the prior art technologies of the new proprietary systems providers arises due to the need to discard all prior technologies, and implement an entirely new form of security system to access the new functionalities associated with broadband and wireless data networks. There remains, therefore, a need for systems, devices, and methods that easily interface to and control the existing proprietary security technologies utilizing a variety of wireless technologies.","Each patent, patent application, and\/or publication mentioned in this specification is herein incorporated by reference in its entirety to the same extent as if each individual patent, patent application, and\/or publication was specifically and individually indicated to be incorporated by reference.","An integrated security system is described that integrates broadband and mobile access and control with conventional security systems and premise devices to provide a tri-mode security network (broadband, cellular\/GSM, POTS access) that enables users to remotely stay connected to their premises. The integrated security system, while delivering remote premise monitoring and control functionality to conventional monitored premise protection, complements existing premise protection equipment. The integrated security system integrates into the premise network and couples wirelessly with the conventional security panel, enabling broadband access to premise security systems. Automation devices (cameras, lamp modules, thermostats, etc.) can be added, enabling users to remotely see live video and\/or pictures and control home devices via their personal web portal or webpage, mobile phone, and\/or other remote client device. Users can also receive notifications via email or text message when happenings occur, or do not occur, in their home.","Although the detailed description herein contains many specifics for the purposes of illustration, anyone of ordinary skill in the art will appreciate that many variations and alterations to the following details are within the scope of the embodiments described herein. Thus, the following illustrative embodiments are set forth without any loss of generality to, and without imposing limitations upon, the claimed invention.","As described herein, computer networks suitable for use with the embodiments described herein include local area networks (LAN), wide area networks (WAN), Internet, or other connection services and network variations such as the world wide web, the public internet, a private internet, a private computer network, a public network, a mobile network, a cellular network, a value-added network, and the like. Computing devices coupled or connected to the network may be any microprocessor controlled device that permits access to the network, including terminal devices, such as personal computers, workstations, servers, mini computers, main-frame computers, laptop computers, mobile computers, palm top computers, hand held computers, mobile phones, TV set-top boxes, or combinations thereof. The computer network may include one of more LANs, WANs, Internets, and computers. The computers may serve as servers, clients, or a combination thereof.","The integrated security system can be a component of a single system, multiple systems, and\/or geographically separate systems. The integrated security system can also be a subcomponent or subsystem of a single system, multiple systems, and\/or geographically separate systems. The integrated security system can be coupled to one or more other components (not shown) of a host system or a system coupled to the host system.","One or more components of the integrated security system and\/or a corresponding system or application to which the integrated security system is coupled or connected includes and\/or runs under and\/or in association with a processing system. The processing system includes any collection of processor-based devices or computing devices operating together, or components of processing systems or devices, as is known in the art. For example, the processing system can include one or more of a portable computer, portable communication device operating in a communication network, and\/or a network server. The portable computer can be any of a number and\/or combination of devices selected from among personal computers, personal digital assistants, portable computing devices, and portable communication devices, but is not so limited. The processing system can include components within a larger computer system.","The processing system of an embodiment includes at least one processor and at least one memory device or subsystem. The processing system can also include or be coupled to at least one database. The term \u201cprocessor\u201d as generally used herein refers to any logic processing unit, such as one or more central processing units (CPUs), digital signal processors (DSPs), application-specific integrated circuits (ASIC), etc. The processor and memory can be monolithically integrated onto a single chip, distributed among a number of chips or components, and\/or provided by some combination of algorithms. The methods described herein can be implemented in one or more of software algorithm(s), programs, firmware, hardware, components, circuitry, in any combination.","The components of any system that includes the integrated security system can be located together or in separate locations. Communication paths couple the components and include any medium for communicating or transferring files among the components. The communication paths include wireless connections, wired connections, and hybrid wireless\/wired connections. The communication paths also include couplings or connections to networks including local area networks (LANs), metropolitan area networks (MANs), wide area networks (WANs), proprietary networks, interoffice or backend networks, and the Internet. Furthermore, the communication paths include removable fixed mediums like floppy disks, hard disk drives, and CD-ROM disks, as well as flash RAM, Universal Serial Bus (USB) connections, RS-232 connections, telephone lines, buses, and electronic mail messages.","Aspects of the integrated security system and corresponding systems and methods described herein may be implemented as functionality programmed into any of a variety of circuitry, including programmable logic devices (PLDs), such as field programmable gate arrays (FPGAs), programmable array logic (PAL) devices, electrically programmable logic and memory devices and standard cell-based devices, as well as application specific integrated circuits (ASICs). Some other possibilities for implementing aspects of the integrated security system and corresponding systems and methods include: microcontrollers with memory (such as electronically erasable programmable read only memory (EEPROM)), embedded microprocessors, firmware, software, etc. Furthermore, aspects of the integrated security system and corresponding systems and methods may be embodied in microprocessors having software-based circuit emulation, discrete logic (sequential and combinatorial), custom devices, fuzzy (neural) logic, quantum devices, and hybrids of any of the above device types. Of course the underlying device technologies may be provided in a variety of component types, e.g., metal-oxide semiconductor field-effect transistor (MOSFET) technologies like complementary metal-oxide semiconductor (CMOS), bipolar technologies like emitter-coupled logic (ECL), polymer technologies (e.g., silicon-conjugated polymer and metal-conjugated polymer-metal structures), mixed analog and digital, etc.","It should be noted that any system, method, and\/or other components disclosed herein may be described using computer aided design tools and expressed (or represented), as data and\/or instructions embodied in various computer-readable media, in terms of their behavioral, register transfer, logic component, transistor, layout geometries, and\/or other characteristics. Computer-readable media in which such formatted data and\/or instructions may be embodied include, but are not limited to, non-volatile storage media in various forms (e.g., optical, magnetic or semiconductor storage media) and carrier waves that may be used to transfer such formatted data and\/or instructions through wireless, optical, or wired signaling media or any combination thereof. Examples of transfers of such formatted data and\/or instructions by carrier waves include, but are not limited to, transfers (uploads, downloads, e-mail, etc.) over the Internet and\/or other computer networks via one or more data transfer protocols (e.g., HTTP, FTP, SMTP, etc.). When received within a computer system via one or more computer-readable media, such data and\/or instruction-based expressions of the above described components may be processed by a processing entity (e.g., one or more processors) within the computer system in conjunction with execution of one or more other computer programs.","Unless the context clearly requires otherwise, throughout the description and the claims, the words \u201ccomprise,\u201d \u201ccomprising,\u201d and the like are to be construed in an inclusive sense as opposed to an exclusive or exhaustive sense; that is to say, in a sense of \u201cincluding, but not limited to.\u201d Words using the singular or plural number also include the plural or singular number respectively. Additionally, the words \u201cherein,\u201d \u201chereunder,\u201d \u201cabove,\u201d \u201cbelow,\u201d and words of similar import, when used in this application, refer to this application as a whole and not to any particular portions of this application. When the word \u201cor\u201d is used in reference to a list of two or more items, that word covers all of the following interpretations of the word: any of the items in the list, all of the items in the list and any combination of the items in the list.","The above description of embodiments of the integrated security system and corresponding systems and methods is not intended to be exhaustive or to limit the systems and methods to the precise forms disclosed. While specific embodiments of, and examples for, the integrated security system and corresponding systems and methods are described herein for illustrative purposes, various equivalent modifications are possible within the scope of the systems and methods, as those skilled in the relevant art will recognize. The teachings of the integrated security system and corresponding systems and methods provided herein can be applied to other systems and methods, not only for the systems and methods described above.","The elements and acts of the various embodiments described above can be combined to provide further embodiments. These and other changes can be made to the integrated security system and corresponding systems and methods in light of the above detailed description.","In accordance with the embodiments described herein, a wireless system (e.g., radio frequency (RF)) is provided that enables a security provider or consumer to extend the capabilities of an existing RF-capable security system or a non-RF-capable security system that has been upgraded to support RF capabilities. The system includes an RF-capable Gateway device (physically located within RF range of the RF-capable security system) and associated software operating on the Gateway device. The system also includes a web server, application server, and remote database providing a persistent store for information related to the system.","The security systems of an embodiment, referred to herein as the iControl security system or integrated security system, extend the value of traditional home security by adding broadband access and the advantages of remote home monitoring and home control through the formation of a security network including components of the integrated security system integrated with a conventional premise security system and a premise local area network (LAN). With the integrated security system, conventional home security sensors, cameras, touchscreen keypads, lighting controls, and\/or Internet Protocol (IP) devices in the home (or business) become connected devices that are accessible anywhere in the world from a web browser, mobile phone or through content-enabled touchscreens. The integrated security system experience allows security operators to both extend the value proposition of their monitored security systems and reach new consumers that include broadband users interested in staying connected to their family, home and property when they are away from home.","The integrated security system of an embodiment includes security servers (also referred to herein as iConnect servers or security network servers) and an iHub gateway (also referred to herein as the gateway, the iHub, or the iHub client) that couples or integrates into a home network (e.g., LAN) and communicates directly with the home security panel, in both wired and wireless installations. The security system of an embodiment automatically discovers the security system components (e.g., sensors, etc.) belonging to the security system and connected to a control panel of the security system and provides consumers with full two-way access via web and mobile portals. The gateway supports various wireless protocols and can interconnect with a wide range of control panels offered by security system providers. Service providers and users can then extend the system's capabilities with the additional IP cameras, lighting modules or security devices such as interactive touchscreen keypads. The integrated security system adds an enhanced value to these security systems by enabling consumers to stay connected through email and SMS alerts, photo push, event-based video capture and rule-based monitoring and notifications. This solution extends the reach of home security to households with broadband access.","The integrated security system builds upon the foundation afforded by traditional security systems by layering broadband and mobile access, IP cameras, interactive touchscreens, and an open approach to home automation on top of traditional security system configurations. The integrated security system is easily installed and managed by the security operator, and simplifies the traditional security installation process, as described below.","The integrated security system provides an open systems solution to the home security market. As such, the foundation of the integrated security system customer premises equipment (CPE) approach has been to abstract devices, and allows applications to manipulate and manage multiple devices from any vendor. The integrated security system DeviceConnect technology that enables this capability supports protocols, devices, and panels from GE Security and Honeywell, as well as consumer devices using Z-Wave, IP cameras (e.g., Ethernet, wifi, and Homeplug), and IP touchscreens. The DeviceConnect is a device abstraction layer that enables any device or protocol layer to interoperate with integrated security system components. This architecture enables the addition of new devices supporting any of these interfaces, as well as add entirely new protocols.","The benefit of DeviceConnect is that it provides supplier flexibility. The same consistent touchscreen, web, and mobile user experience operate unchanged on whatever security equipment selected by a security system provider, with the system provider's choice of IP cameras, backend data center and central station software.","The integrated security system provides a complete system that integrates or layers on top of a conventional host security system available from a security system provider. The security system provider therefore can select different components or configurations to offer (e.g., CDMA, GPRS, no cellular, etc.) as well as have iControl modify the integrated security system configuration for the system provider's specific needs (e.g., change the functionality of the web or mobile portal, add a GE or Honeywell-compatible TouchScreen, etc.).","The integrated security system integrates with the security system provider infrastructure for central station reporting directly via Broadband and GPRS alarm transmissions. Traditional dial-up reporting is supported via the standard panel connectivity. Additionally, the integrated security system provides interfaces for advanced functionality to the CMS, including enhanced alarm events, system installation optimizations, system test verification, video verification, 2-way voice over IP and GSM.","The integrated security system is an IP centric system that includes broadband connectivity so that the gateway augments the existing security system with broadband and GPRS connectivity. If broadband is down or unavailable GPRS may be used, for example. The integrated security system supports GPRS connectivity using an optional wireless package that includes a GPRS modem in the gateway. The integrated security system treats the GPRS connection as a higher cost though flexible option for data transfers. In an embodiment the GPRS connection is only used to route alarm events (e.g., for cost), however the gateway can be configured (e.g., through the iConnect server interface) to act as a primary channel and pass any or all events over GPRS. Consequently, the integrated security system does not interfere with the current plain old telephone service (POTS) security panel interface. Alarm events can still be routed through POTS; however the gateway also allows such events to be routed through a broadband or GPRS connection as well. The integrated security system provides a web application interface to the CSR tool suite as well as XML web services interfaces for programmatic integration between the security system provider's existing call center products. The integrated security system includes, for example, APIs that allow the security system provider to integrate components of the integrated security system into a custom call center interface. The APIs include XML web service APIs for integration of existing security system provider call center applications with the integrated security system service. All functionality available in the CSR Web application is provided with these API sets. The Java and XML-based APIs of the integrated security system support provisioning, billing, system administration, CSR, central station, portal user interfaces, and content management functions, to name a few. The integrated security system can provide a customized interface to the security system provider's billing system, or alternatively can provide security system developers with APIs and support in the integration effort.","The integrated security system provides or includes business component interfaces for provisioning, administration, and customer care to name a few. Standard templates and examples are provided with a defined customer professional services engagement to help integrate OSS\/BSS systems of a Service Provider with the integrated security system.","The integrated security system components support and allow for the integration of customer account creation and deletion with a security system. The iConnect APIs provides access to the provisioning and account management system in iConnect and provide full support for account creation, provisioning, and deletion. Depending on the requirements of the security system provider, the iConnect APIs can be used to completely customize any aspect of the integrated security system backend operational system.","The integrated security system includes a gateway that supports the following standards-based interfaces, to name a few: Ethernet IP communications via Ethernet ports on the gateway, and standard XML\/TCP\/IP protocols and ports are employed over secured SSL sessions; USB 2.0 via ports on the gateway; 802.11b\/g\/n IP communications; GSM\/GPRS RF WAN communications; CDMA 1\u00d7RTT RF WAN communications (optional, can also support EVDO and 3G technologies).","The gateway supports the following proprietary interfaces, to name a few: interfaces including Dialog RF network (319.5 MHz) and RS485 Superbus 2000 wired interface; RF mesh network (908 MHz); and interfaces including RF network (345 MHz) and RS485\/RS232bus wired interfaces.","Regarding security for the IP communications (e.g., authentication, authorization, encryption, anti-spoofing, etc), the integrated security system uses SSL to encrypt all IP traffic, using server and client-certificates for authentication, as well as authentication in the data sent over the SSL-encrypted channel. For encryption, integrated security system issues public\/private key pairs at the time\/place of manufacture, and certificates are not stored in any online storage in an embodiment.","The integrated security system does not need any special rules at the customer premise and\/or at the security system provider central station because the integrated security system makes outgoing connections using TCP over the standard HTTP and HTTPS ports. Provided outbound TCP connections are allowed then no special requirements on the firewalls are necessary.",{"@attributes":{"id":"p-0085","num":"0084"},"figref":"FIG. 1","b":["100","100","102","104","110","102","102","104","106","108","104","102","104","120"]},"The integrated security system service (also referred to as iControl service) can be managed by a service provider via browser-based Maintenance and Service Management applications that are provided with the iConnect Servers. Or, if desired, the service can be more tightly integrated with existing OSS\/BSS and service delivery systems via the iConnect web services-based XML APIs.","The integrated security system service can also coordinate the sending of alarms to the home security Central Monitoring Station (CMS) . Alarms are passed to the CMS  using standard protocols such as Contact ID or SIA and can be generated from the home security panel location as well as by iConnect server  conditions (such as lack of communications with the integrated security system). In addition, the link between the security servers  and CMS  provides tighter integration between home security and self-monitoring devices and the gateway . Such integration enables advanced security capabilities such as the ability for CMS personnel to view photos taken at the time a burglary alarm was triggered. For maximum security, the gateway  and iConnect servers  support the use of a mobile network (both GPRS and CDMA options are available) as a backup to the primary broadband connection.","The integrated security system service is delivered by hosted servers running software components that communicate with a variety of client types while interacting with other systems.  is a block diagram of components of the integrated security system , under an embodiment. Following is a more detailed description of the components.","The iConnect servers  support a diverse collection of clients  ranging from mobile devices, to PCs, to in-home security devices, to a service provider's internal systems. Most clients  are used by end-users, but there are also a number of clients  that are used to operate the service.","Clients  used by end-users of the integrated security system  include, but are not limited to, the following:\n\n","In addition to the end-user clients, the iConnect servers  support PC browser-based Service Management clients that manage the ongoing operation of the overall service. These clients run applications that handle tasks such as provisioning, service monitoring, customer support and reporting.","There are numerous types of server components of the iConnect servers  of an embodiment including, but not limited to, the following: Business Components which manage information about all of the home security and self-monitoring devices; End-User Application Components which display that information for users and access the Business Components via published XML APIs; and Service Management Application Components which enable operators to administer the service (these components also access the Business Components via the XML APIs, and also via published SNMP MIBs).","The server components provide access to, and management of, the objects associated with an integrated security system installation. The top-level object is the \u201cnetwork.\u201d It is a location where a gateway  is located, and is also commonly referred to as a site or premises; the premises can include any type of structure (e.g., home, office, warehouse, etc.) at which a gateway  is located. Users can only access the networks to which they have been granted permission. Within a network, every object monitored by the gateway  is called a device. Devices include the sensors, cameras, home security panels and automation devices, as well as the controller or processor-based device running the gateway applications.","Various types of interactions are possible between the objects in a system. Automations define actions that occur as a result of a change in state of a device. For example, take a picture with the front entry camera when the front door sensor changes to \u201copen\u201d. Notifications are messages sent to users to indicate that something has occurred, such as the front door going to \u201copen\u201d state, or has not occurred (referred to as an iWatch notification). Schedules define changes in device states that are to take place at predefined days and times. For example, set the security panel to \u201cArmed\u201d mode every weeknight at 11:00 pm.","The iConnect Business Components are responsible for orchestrating all of the low-level service management activities for the integrated security system service. They define all of the users and devices associated with a network (site), analyze how the devices interact, and trigger associated actions (such as sending notifications to users). All changes in device states are monitored and logged. The Business Components also manage all interactions with external systems as required, including sending alarms and other related self-monitoring data to the home security Central Monitoring System (CMS) . The Business Components are implemented as portable Java J2EE Servlets, but are not so limited.","The following iConnect Business Components manage the main elements of the integrated security system service, but the embodiment is not so limited:\n\n","Additional iConnect Business Components handle direct communications with certain clients and other systems, for example:\n\n","The iConnect Business Components store information about the objects that they manage in the iControl Service Database  and in the iControl Content Store . The iControl Content Store is used to store media objects like video, photos and widget content, while the Service Database stores information about users, networks, and devices. Database interaction is performed via a JDBC interface. For security purposes, the Business Components manage all data storage and retrieval.","The iControl Business Components provide web services-based APIs that application components use to access the Business Components' capabilities. Functions of application components include presenting integrated security system service data to end-users, performing administrative duties, and integrating with external systems and back-office applications.","The primary published APIs for the iConnect Business Components include, but are not limited to, the following:\n\n","Each API of an embodiment includes two modes of access: Java API or XML API. The XML APIs are published as web services so that they can be easily accessed by applications or servers over a network. The Java APIs are a programmer-friendly wrapper for the XML APIs. Application components and integrations written in Java should generally use the Java APIs rather than the XML APIs directly.","The iConnect Business Components also have an XML-based interface  for quickly adding support for new devices to the integrated security system. This interface , referred to as DeviceConnect , is a flexible, standards-based mechanism for defining the properties of new devices and how they can be managed. Although the format is flexible enough to allow the addition of any type of future device, pre-defined XML profiles are currently available for adding common types of devices such as sensors (SensorConnect), home security panels (PanelConnect) and IP cameras (CameraConnect).","The iConnect End-User Application Components deliver the user interfaces that run on the different types of clients supported by the integrated security system service. The components are written in portable Java J2EE technology (e.g., as Java Servlets, as JavaServer Pages (JSPs), etc.) and they all interact with the iControl Business Components via the published APIs.","The following End-User Application Components generate CSS-based HTML\/JavaScript that is displayed on the target client. These applications can be dynamically branded with partner-specific logos and URL links (such as Customer Support, etc.). The End-User Application Components of an embodiment include, but are not limited to, the following:\n\n","A number of Application Components are responsible for overall management of the service. These pre-defined applications, referred to as Service Management Application Components, are configured to offer off-the-shelf solutions for production management of the integrated security system service including provisioning, overall service monitoring, customer support, and reporting, for example. The Service Management Application Components of an embodiment include, but are not limited to, the following:\n\n","The iConnect servers  also support custom-built integrations with a service provider's existing OSS\/BSS, CSR and service delivery systems . Such systems can access the iConnect web services XML API to transfer data to and from the iConnect servers . These types of integrations can compliment or replace the PC browser-based Service Management applications, depending on service provider needs.","As described above, the integrated security system of an embodiment includes a gateway, or iHub. The gateway of an embodiment includes a device that is deployed in the home or business and couples or connects the various third-party cameras, home security panels, sensors and devices to the iConnect server over a WAN connection as described in detail herein. The gateway couples to the home network and communicates directly with the home security panel in both wired and wireless sensor installations. The gateway is configured to be low-cost, reliable and thin so that it complements the integrated security system network-based architecture.","The gateway supports various wireless protocols and can interconnect with a wide range of home security control panels. Service providers and users can then extend the system's capabilities by adding IP cameras, lighting modules and additional security devices. The gateway is configurable to be integrated into many consumer appliances, including set-top boxes, routers and security panels. The small and efficient footprint of the gateway enables this portability and versatility, thereby simplifying and reducing the overall cost of the deployment.",{"@attributes":{"id":"p-0109","num":"0135"},"figref":"FIG. 3","b":"102"},"The gateway application layer  is the main program that orchestrates the operations performed by the gateway. The Security Engine  provides robust protection against intentional and unintentional intrusion into the integrated security system network from the outside world (both from inside the premises as well as from the WAN). The Security Engine  of an embodiment comprises one or more sub-modules or components that perform functions including, but not limited to, the following:\n\n","As standards evolve, and new encryption and authentication methods are proven to be useful, and older mechanisms proven to be breakable, the security manager can be upgraded \u201cover the air\u201d to provide new and better security for communications between the iConnect server and the gateway application, and locally at the premises to remove any risk of eavesdropping on camera communications.","A Remote Firmware Download module  allows for seamless and secure updates to the gateway firmware through the iControl Maintenance Application on the server , providing a transparent, hassle-free mechanism for the service provider to deploy new features and bug fixes to the installed user base. The firmware download mechanism is tolerant of connection loss, power interruption and user interventions (both intentional and unintentional). Such robustness reduces down time and customer support issues. Gateway firmware can be remotely download either for one gateway at a time, a group of gateways, or in batches.","The Automations engine  manages the user-defined rules of interaction between the different devices (e.g. when door opens turn on the light). Though the automation rules are programmed and reside at the portal\/server level, they are cached at the gateway level in order to provide short latency between device triggers and actions.","DeviceConnect  includes definitions of all supported devices (e.g., cameras, security panels, sensors, etc.) using a standardized plug-in architecture. The DeviceConnect module  offers an interface that can be used to quickly add support for any new device as well as enabling interoperability between devices that use different technologies\/protocols. For common device types, pre-defined sub-modules have been defined, making supporting new devices of these types even easier. SensorConnect  is provided for adding new sensors, CameraConnect  for adding IP cameras, and PanelConnect  for adding home security panels.","The Schedules engine  is responsible for executing the user defined schedules (e.g., take a picture every five minutes; every day at 8 am set temperature to 65 degrees Fahrenheit, etc.). Though the schedules are programmed and reside at the iConnect server level they are sent to the scheduler within the gateway application. The Schedules Engine  then interfaces with SensorConnect  to ensure that scheduled events occur at precisely the desired time.","The Device Management module  is in charge of all discovery, installation and configuration of both wired and wireless IP devices (e.g., cameras, etc.) coupled or connected to the system. Networked IP devices, such as those used in the integrated security system, require user configuration of many IP and security parameters\u2014to simplify the user experience and reduce the customer support burden, the device management module of an embodiment handles the details of this configuration. The device management module also manages the video routing module described below.","The video routing engine  is responsible for delivering seamless video streams to the user with zero-configuration. Through a multi-step, staged approach the video routing engine uses a combination of UPnP port-forwarding, relay server routing and STUN\/TURN peer-to-peer routing.",{"@attributes":{"id":"p-0118","num":"0149"},"figref":"FIG. 4","b":["102","102","402","102","404","406","408"]},"Referring to the WAN portion  of the gateway , the gateway  of an embodiment can communicate with the iConnect server using a number of communication types and\/or protocols, for example Broadband , GPRS  and\/or Public Switched Telephone Network (PTSN)  to name a few. In general, broadband communication  is the primary means of connection between the gateway  and the iConnect server  and the GPRS\/CDMA  and\/or PSTN  interfaces acts as back-up for fault tolerance in case the user's broadband connection fails for whatever reason, but the embodiment is not so limited.","Referring to the LAN portion  of the gateway , various protocols and physical transceivers can be used to communicate to off-the-shelf sensors and cameras. The gateway  is protocol-agnostic and technology-agnostic and as such can easily support almost any device networking protocol. The gateway  can, for example, support GE and Honeywell security RF protocols , Z-Wave , serial (RS232 and RS485)  for direct connection to security panels as well as WiFi  (802.11b\/g) for communication to WiFi cameras.","The integrated security system includes couplings or connections among a variety of IP devices or components, and the device management module is in charge of the discovery, installation and configuration of the IP devices coupled or connected to the system, as described above. The integrated security system of an embodiment uses a \u201csandbox\u201d network to discover and manage all IP devices coupled or connected as components of the system. The IP devices of an embodiment include wired devices, wireless devices, cameras, interactive touchscreens, and security panels to name a few. These devices can be wired via ethernet cable or Wifi devices, all of which are secured within the sandbox network, as described below. The \u201csandbox\u201d network is described in detail below.",{"@attributes":{"id":"p-0122","num":"0153"},"figref":"FIG. 5","b":["500","250","255","257","102","102","255","257","102","252","250","252","251","251","200","102","250","102","250","250","200","254","250","102"]},{"@attributes":{"id":"p-0123","num":"0154"},"figref":"FIG. 6","b":["600","250","255","257","102","102","255","257","102","252","251","251","200","252","250","251","252","102","200","252","250","102","255","257","250","200","255","257","102","250","250","200","254","250","102"]},"The examples described above with reference to  are presented only as examples of IP device integration. The integrated security system is not limited to the type, number and\/or combination of IP devices shown and described in these examples, and any type, number and\/or combination of IP devices is contemplated within the scope of this disclosure as capable of being integrated with the premise network.","The integrated security system of an embodiment includes a touchscreen (also referred to as the iControl touchscreen or integrated security system touchscreen), as described above, which provides core security keypad functionality, content management and presentation, and embedded systems design. The networked security touchscreen system of an embodiment enables a consumer or security provider to easily and automatically install, configure and manage the security system and touchscreen located at a customer premise. Using this system the customer may access and control the local security system, local IP devices such as cameras, local sensors and control devices (such as lighting controls or pipe freeze sensors), as well as the local security system panel and associated security sensors (such as door\/window, motion, and smoke detectors). The customer premise may be a home, business, and\/or other location equipped with a wired or wireless broadband IP connection.","The system of an embodiment includes a touchscreen with a configurable software user interface and\/or a gateway device (e.g., iHub) that couples or connects to a premise security panel through a wired or wireless connection, and a remote server that provides access to content and information from the premises devices to a user when they are remote from the home. The touchscreen supports broadband and\/or WAN wireless connectivity. In this embodiment, the touchscreen incorporates an IP broadband connection (e.g., Wifi radio, Ethernet port, etc.), and\/or a cellular radio (e.g., GPRS\/GSM, CDMA, WiMax, etc.). The touchscreen described herein can be used as one or more of a security system interface panel and a network user interface (UI) that provides an interface to interact with a network (e.g., LAN, WAN, internet, etc.).","The touchscreen of an embodiment provides an integrated touchscreen and security panel as an all-in-one device. Once integrated using the touchscreen, the touchscreen and a security panel of a premise security system become physically co-located in one device, and the functionality of both may even be co-resident on the same CPU and memory (though this is not required).","The touchscreen of an embodiment also provides an integrated IP video and touchscreen UI. As such, the touchscreen supports one or more standard video CODECs\/players (e.g., H.264, Flash Video, MOV, MPEG4, M-JPEG, etc.). The touchscreen UI then provides a mechanism (such as a camera or video widget) to play video. In an embodiment the video is streamed live from an IP video camera. In other embodiments the video comprises video clips or photos sent from an IP camera or from a remote location.","The touchscreen of an embodiment provides a configurable user interface system that includes a configuration supporting use as a security touchscreen. In this embodiment, the touchscreen utilizes a modular user interface that allows components to be modified easily by a service provider, an installer, or even the end user. Examples of such a modular approach include using Flash widgets, HTML-based widgets, or other downloadable code modules such that the user interface of the touchscreen can be updated and modified while the application is running. In an embodiment the touchscreen user interface modules can be downloaded over the internet. For example, a new security configuration widget can be downloaded from a standard web server, and the touchscreen then loads such configuration app into memory, and inserts it in place of the old security configuration widget. The touchscreen of an embodiment is configured to provide a self-install user interface.","Embodiments of the networked security touchscreen system described herein include a touchscreen device with a user interface that includes a security toolbar providing one or more functions including arm, disarm, panic, medic, and alert. The touchscreen therefore includes at least one screen having a separate region of the screen dedicated to a security toolbar. The security toolbar of an embodiment is present in the dedicated region at all times that the screen is active.","The touchscreen of an embodiment includes a home screen having a separate region of the screen allocated to managing home-based functions. The home-based functions of an embodiment include managing, viewing, and\/or controlling IP video cameras. In this embodiment, regions of the home screen are allocated in the form of widget icons; these widget icons (e.g. for cameras, thermostats, lighting, etc) provide functionality for managing home systems. So, for example, a displayed camera icon, when selected, launches a Camera Widget, and the Camera widget in turn provides access to video from one or more cameras, as well as providing the user with relevant camera controls (take a picture, focus the camera, etc.)","The touchscreen of an embodiment includes a home screen having a separate region of the screen allocated to managing, viewing, and\/or controlling internet-based content or applications. For example, the Widget Manager UI presents a region of the home screen (up to and including the entire home screen) where internet widgets icons such as weather, sports, etc. may be accessed). Each of these icons may be selected to launch their respective content services.","The touchscreen of an embodiment is integrated into a premise network using the gateway, as described above. The gateway as described herein functions to enable a separate wireless network, or sub-network, that is coupled, connected, or integrated with another network (e.g., WAN, LAN of the host premises, etc.). The sub-network enabled by the gateway optimizes the installation process for IP devices, like the touchscreen, that couple or connect to the sub-network by segregating these IP devices from other such devices on the network. This segregation of the IP devices of the sub-network further enables separate security and privacy policies to be implemented for these IP devices so that, where the IP devices are dedicated to specific functions (e.g., security), the security and privacy policies can be tailored specifically for the specific functions. Furthermore, the gateway and the sub-network it forms enables the segregation of data traffic, resulting in faster and more efficient data flow between components of the host network, components of the sub-network, and between components of the sub-network and components of the network.","The touchscreen of an embodiment includes a core functional embedded system that includes an embedded operating system, required hardware drivers, and an open system interface to name a few. The core functional embedded system can be provided by or as a component of a conventional security system (e.g., security system available from GE Security). These core functional units are used with components of the integrated security system as described herein. Note that portions of the touchscreen description below may include reference to a host premise security system (e.g., GE security system), but these references are included only as an example and do not limit the touchscreen to integration with any particular security system.","As an example, regarding the core functional embedded system, a reduced memory footprint version of embedded Linux forms the core operating system in an embodiment, and provides basic TCP\/IP stack and memory management functions, along with a basic set of low-level graphics primitives. A set of device drivers is also provided or included that offer low-level hardware and network interfaces. In addition to the standard drivers, an interface to the RS 485 bus is included that couples or connects to the security system panel (e.g., GE Concord panel). The interface may, for example, implement the Superbus 2000 protocol, which can then be utilized by the more comprehensive transaction-level security functions implemented in PanelConnect technology (e.g SetAlarmLevel (int level, int partition, char *accessCode)). Power control drivers are also provided.",{"@attributes":{"id":"p-0136","num":"0167"},"figref":"FIG. 7","b":["700","700","702","704","706","700","710","712","714","716","718","720","722","724","726","728"]},"More specifically, the touchscreen, when configured as a home security device, includes but is not limited to the following application or software modules: RS 485 and\/or RS-232 bus security protocols to conventional home security system panel (e.g., GE Concord panel); functional home security classes and interfaces (e.g. Panel ARM state, Sensor status, etc.); Application\/Presentation layer or engine; Resident Application; Consumer Home Security Application; installer home security application; core engine; and System bootloader\/Software Updater. The core Application engine and system bootloader can also be used to support other advanced content and applications. This provides a seamless interaction between the premise security application and other optional services such as weather widgets or IP cameras.","An alternative configuration of the touchscreen includes a first Application engine for premise security and a second Application engine for all other applications. The integrated security system application engine supports content standards such as HTML, XML, Flash, etc. and enables a rich consumer experience for all \u2018widgets\u2019, whether security-based or not. The touchscreen thus provides service providers the ability to use web content creation and management tools to build and download any \u2018widgets\u2019 regardless of their functionality.","As discussed above, although the Security Applications have specific low-level functional requirements in order to interface with the premise security system, these applications make use of the same fundamental application facilities as any other \u2018widget\u2019, application facilities that include graphical layout, interactivity, application handoff, screen management, and network interfaces, to name a few.","Content management in the touchscreen provides the ability to leverage conventional web development tools, performance optimized for an embedded system, service provider control of accessible content, content reliability in a consumer device, and consistency between \u2018widgets\u2019 and seamless widget operational environment. In an embodiment of the integrated security system, widgets are created by web developers and hosted on the integrated security system Content Manager (and stored in the Content Store database). In this embodiment the server component caches the widgets and offers them to consumers through the web-based integrated security system provisioning system. The servers interact with the advanced touchscreen using HTTPS interfaces controlled by the core engine and dynamically download widgets and updates as needed to be cached on the touchscreen. In other embodiments widgets can be accessed directly over a network such as the Internet without needing to go through the iControl Content Manager","Referring to , the touchscreen system is built on a tiered architecture, with defined interfaces between the Application\/Presentation Layer (the Application Engine) on the top, the Core Engine in the middle, and the security panel and gateway APIs at the lower level. The architecture is configured to provide maximum flexibility and ease of maintenance.","The application engine of the touchscreen provides the presentation and interactivity capabilities for all applications (widgets) that run on the touchscreen, including both core security function widgets and third party content widgets.  is an example screenshot  of a networked security touchscreen, under an embodiment. This example screenshot  includes three interfaces or user interface (UI) components -, but is not so limited. A first UI  of the touchscreen includes icons by which a user controls or accesses functions and\/or components of the security system (e.g., \u201cMain\u201d, \u201cPanic\u201d, \u201cMedic\u201d, \u201cFire\u201d, state of the premise alarm system (e.g., disarmed, armed, etc.), etc.); the first UI , which is also referred to herein as a security interface, is always presented on the touchscreen. A second UI  of the touchscreen includes icons by which a user selects or interacts with services and other network content (e.g., clock, calendar, weather, stocks, news, sports, photos, maps, music, etc.) that is accessible via the touchscreen. The second UI  is also referred to herein as a network interface or content interface. A third UI  of the touchscreen includes icons by which a user selects or interacts with additional services or components (e.g., intercom control, security, cameras coupled to the system in particular regions (e.g., front door, baby, etc.) available via the touchscreen.","A component of the application engine is the Presentation Engine, which includes a set of libraries that implement the standards-based widget content (e.g., XML, HTML, JavaScript, Flash) layout and interactivity. This engine provides the widget with interfaces to dynamically load both graphics and application logic from third parties, support high level data description language as well as standard graphic formats. The set of web content-based functionality available to a widget developer is extended by specific touchscreen functions implemented as local web services by the Core Engine.","The resident application of the touchscreen is the master service that controls the interaction of all widgets in the system, and enforces the business and security rules required by the service provider. For example, the resident application determines the priority of widgets, thereby enabling a home security widget to override resource requests from a less critical widget (e.g. a weather widget). The resident application also monitors widget behavior, and responds to client or server requests for cache updates.","The core engine of the touchscreen manages interaction with other components of the integrated security system, and provides an interface through which the resident application and authorized widgets can get information about the home security system, set alarms, install sensors, etc. At the lower level, the Core Engine's main interactions are through the PanelConnect API, which handles all communication with the security panel, and the gateway Interface, which handles communication with the gateway. In an embodiment, both the iHub Interface and PanelConnect API are resident and operating on the touchscreen. In another embodiment, the PanelConnect API runs on the gateway or other device that provides security system interaction and is accessed by the touchscreen through a web services interface.","The Core Engine also handles application and service level persistent and cached memory functions, as well as the dynamic provisioning of content and widgets, including but not limited to: flash memory management, local widget and content caching, widget version management (download, cache flush new\/old content versions), as well as the caching and synchronization of user preferences. As a portion of these services the Core engine incorporates the bootloader functionality that is responsible for maintaining a consistent software image on the touchscreen, and acts as the client agent for all software updates. The bootloader is configured to ensure full update redundancy so that unsuccessful downloads cannot corrupt the integrated security system.","Video management is provided as a set of web services by the Core Engine. Video management includes the retrieval and playback of local video feeds as well as remote control and management of cameras (all through iControl CameraConnect technology).","Both the high level application layer and the mid-level core engine of the touchscreen can make calls to the network. Any call to the network made by the application layer is automatically handed off to a local caching proxy, which determines whether the request should be handled locally. Many of the requests from the application layer are web services API requests, although such requests could be satisfied by the iControl servers, they are handled directly by the touchscreen and the gateway. Requests that get through the caching proxy are checked against a white list of acceptable sites, and, if they match, are sent off through the network interface to the gateway. Included in the Network Subsystem is a set of network services including HTTP, HTTPS, and server-level authentication functions to manage the secure client-server interface. Storage and management of certificates is incorporated as a part of the network services layer.","Server components of the integrated security system servers support interactive content services on the touchscreen. These server components include, but are not limited to the content manager, registry manager, network manager, and global registry, each of which is described herein.","The Content Manager oversees aspects of handling widget data and raw content on the touchscreen. Once created and validated by the service provider, widgets are \u2018ingested\u2019 to the Content Manager, and then become available as downloadable services through the integrated security system Content Management APIs. The Content manager maintains versions and timestamp information, and connects to the raw data contained in the backend Content Store database. When a widget is updated (or new content becomes available) all clients registering interest in a widget are systematically updated as needed (a process that can be configured at an account, locale, or system-wide level).","The Registry Manager handles user data, and provisioning accounts, including information about widgets the user has decided to install, and the user preferences for these widgets.","The Network Manager handles getting and setting state for all devices on the integrated security system network (e.g., sensors, panels, cameras, etc.). The Network manager synchronizes with the gateway, the advanced touchscreen, and the subscriber database.","The Global Registry is a primary starting point server for all client services, and is a logical referral service that abstracts specific server locations\/addresses from clients (touchscreen, gateway , desktop widgets, etc.). This approach enables easy scaling\/migration of server farms.","The touchscreen of an embodiment operates wirelessly with a premise security system. The touchscreen of an embodiment incorporates an RF transceiver component that either communicates directly with the sensors and\/or security panel over the panel's proprietary RF frequency, or the touchscreen communicates wirelessly to the gateway over 802.11, Ethernet, or other IP-based communications channel, as described in detail herein. In the latter case the gateway implements the PanelConnect interface and communicates directly to the security panel and\/or sensors over wireless or wired networks as described in detail above.","The touchscreen of an embodiment is configured to operate with multiple security systems through the use of an abstracted security system interface. In this embodiment, the PanelConnect API can be configured to support a plurality of proprietary security system interfaces, either simultaneously or individually as described herein. In one embodiment of this approach, the touchscreen incorporates multiple physical interfaces to security panels (e.g. GE Security RS-485, Honeywell RF, etc.) in addition to the PanelConnect API implemented to support multiple security interfaces. The change needed to support this in PanelConnect is a configuration parameter specifying the panel type connection that is being utilized.","So for example, the setARMState( ) function is called with an additional parameter (e.g., Armstate=setARMState(type=\u201cARM STAY|ARM AWAY|DISARM\u201d, Parameters=\u201cExitDelay=30|Lights=OFF\u201d, panelType=\u201cGE Concord4 RS485\u201d)). The \u2018panelType\u2019 parameter is used by the setARMState function (and in practice by all of the PanelConnect functions) to select an algorithm appropriate to the specific panel out of a plurality of algorithms.","The touchscreen of an embodiment is self-installable. Consequently, the touchscreen provides a \u2018wizard\u2019 approach similar to that used in traditional computer installations (e.g. InstallShield). The wizard can be resident on the touchscreen, accessible through a web interface, or both. In one embodiment of a touchscreen self-installation process, the service provider can associate devices (sensors, touchscreens, security panels, lighting controls, etc.) remotely using a web-based administrator interface.","The touchscreen of an embodiment includes a battery backup system for a security touchscreen. The touchscreen incorporates a standard Li-ion or other battery and charging circuitry to allow continued operation in the event of a power outage. In an embodiment the battery is physically located and connected within the touchscreen enclosure. In another embodiment the battery is located as a part of the power transformer, or in between the power transformer and the touchscreen.","The example configurations of the integrated security system described above with reference to  include a gateway that is a separate device, and the touchscreen couples to the gateway. However, in an alternative embodiment, the gateway device and its functionality can be incorporated into the touchscreen so that the device management module, which is now a component of or included in the touchscreen, is in charge of the discovery, installation and configuration of the IP devices coupled or connected to the system, as described above. The integrated security system with the integrated touchscreen\/gateway uses the same \u201csandbox\u201d network to discover and manage all IP devices coupled or connected as components of the system.","The touchscreen of this alternative embodiment integrates the components of the gateway with the components of the touchscreen as described herein. More specifically, the touchscreen of this alternative embodiment includes software or applications described above with reference to . In this alternative embodiment, the touchscreen includes the gateway application layer  as the main program that orchestrates the operations performed by the gateway. A Security Engine  of the touchscreen provides robust protection against intentional and unintentional intrusion into the integrated security system network from the outside world (both from inside the premises as well as from the WAN). The Security Engine  of an embodiment comprises one or more sub-modules or components that perform functions including, but not limited to, the following:\n\n","As standards evolve, and new encryption and authentication methods are proven to be useful, and older mechanisms proven to be breakable, the security manager can be upgraded \u201cover the air\u201d to provide new and better security for communications between the iConnect server and the gateway application, and locally at the premises to remove any risk of eavesdropping on camera communications.","A Remote Firmware Download module  of the touchscreen allows for seamless and secure updates to the gateway firmware through the iControl Maintenance Application on the server , providing a transparent, hassle-free mechanism for the service provider to deploy new features and bug fixes to the installed user base. The firmware download mechanism is tolerant of connection loss, power interruption and user interventions (both intentional and unintentional). Such robustness reduces down time and customer support issues. Touchscreen firmware can be remotely download either for one touchscreen at a time, a group of touchscreen, or in batches.","The Automations engine  of the touchscreen manages the user-defined rules of interaction between the different devices (e.g. when door opens turn on the light). Though the automation rules are programmed and reside at the portal\/server level, they are cached at the gateway level in order to provide short latency between device triggers and actions.","DeviceConnect  of the touchscreen includes definitions of all supported devices (e.g., cameras, security panels, sensors, etc.) using a standardized plug-in architecture. The DeviceConnect module  offers an interface that can be used to quickly add support for any new device as well as enabling interoperability between devices that use different technologies\/protocols. For common device types, pre-defined sub-modules have been defined, making supporting new devices of these types even easier. SensorConnect  is provided for adding new sensors, CameraConnect  for adding IP cameras, and PanelConnect  for adding home security panels.","The Schedules engine  of the touchscreen is responsible for executing the user defined schedules (e.g., take a picture every five minutes; every day at 8 am set temperature to 65 degrees Fahrenheit, etc.). Though the schedules are programmed and reside at the iConnect server level they are sent to the scheduler within the gateway application of the touchscreen. The Schedules Engine  then interfaces with SensorConnect  to ensure that scheduled events occur at precisely the desired time.","The Device Management module  of the touchscreen is in charge of all discovery, installation and configuration of both wired and wireless IP devices (e.g., cameras, etc.) coupled or connected to the system. Networked IP devices, such as those used in the integrated security system, require user configuration of many IP and security parameters, and the device management module of an embodiment handles the details of this configuration. The device management module also manages the video routing module described below.","The video routing engine  of the touchscreen is responsible for delivering seamless video streams to the user with zero-configuration. Through a multi-step, staged approach the video routing engine uses a combination of UPnP port-forwarding, relay server routing and STUN\/TURN peer-to-peer routing. The video routing engine is described in detail in the Related Applications.",{"@attributes":{"id":"p-0168","num":"0204"},"figref":"FIG. 9","b":["900","250","255","256","957","902","902","252","250","252","251","251","200","902","250","902","250","250","200","254","250","902"]},{"@attributes":{"id":"p-0169","num":"0205"},"figref":"FIG. 10","b":["1000","250","255","256","1057","1002","1002","252","251","251","200","252","250","251","252","1002","200","252","250","1002","255","156","1057","250","200","255","256","1057","1002","250","250","200","254","250","1002"]},"The gateway of an embodiment, whether a stand-along component or integrated with a touchscreen, enables couplings or connections and thus the flow or integration of information between various components of the host premises and various types and\/or combinations of IP devices, where the components of the host premises include a network (e.g., LAN) and\/or a security system or subsystem to name a few. Consequently, the gateway controls the association between and the flow of information or data between the components of the host premises. For example, the gateway of an embodiment forms a sub-network coupled to another network (e.g., WAN, LAN, etc.), with the sub-network including IP devices. The gateway further enables the association of the IP devices of the sub-network with appropriate systems on the premises (e.g., security system, etc.). Therefore, for example, the gateway can form a sub-network of IP devices configured for security functions, and associate the sub-network only with the premises security system, thereby segregating the IP devices dedicated to security from other IP devices that may be coupled to another network on the premises.","The gateway of an embodiment, as described herein, enables couplings or connections and thus the flow of information between various components of the host premises and various types and\/or combinations of IP devices, where the components of the host premises include a network, a security system or subsystem to name a few. Consequently, the gateway controls the association between and the flow of information or data between the components of the host premises. For example, the gateway of an embodiment forms a sub-network coupled to another network (e.g., WAN, LAN, etc.), with the sub-network including IP devices. The gateway further enables the association of the IP devices of the sub-network with appropriate systems on the premises (e.g., security system, etc.). Therefore, for example, the gateway can form a sub-network of IP devices configured for security functions, and associate the sub-network only with the premises security system, thereby segregating the IP devices dedicated to security from other IP devices that may be coupled to another network on the premises.",{"@attributes":{"id":"p-0172","num":"0208"},"figref":"FIG. 11","b":["1100","1102","1104","1106"]},{"@attributes":{"id":"p-0173","num":"0209"},"figref":"FIG. 12","b":["1200","1202","1204","1206","1208"]},"In an example embodiment,  is a flow diagram  for integration or installation of an IP device into a private network environment, under an embodiment. The IP device includes any IP-capable device that, for example, includes the touchscreen of an embodiment. The variables of an embodiment set at time of installation include, but are not limited to, one or more of a private SSID\/Password, a gateway identifier, a security panel identifier, a user account TS, and a Central Monitoring Station account identification.","An embodiment of the IP device discovery and management begins with a user or installer activating  the gateway and initiating  the install mode of the system. This places the gateway in an install mode. Once in install mode, the gateway shifts to a default (Install) Wifi configuration. This setting will match the default setting for other integrated security system-enabled devices that have been pre-configured to work with the integrated security system. The gateway will then begin to provide  DHCP addresses for these IP devices. Once the devices have acquired a new DHCP address from the gateway, those devices are available for configuration into a new secured Wifi network setting.","The user or installer of the system selects  all devices that have been identified as available for inclusion into the integrated security system. The user may select these devices by their unique IDs via a web page, Touchscreen, or other client interface. The gateway provides  data as appropriate to the devices. Once selected, the devices are configured  with appropriate secured Wifi settings, including SSID and WPA\/WPA-2 keys that are used once the gateway switches back to the secured sandbox configuration from the \u201cInstall\u201d settings. Other settings are also configured as appropriate for that type of device. Once all devices have been configured, the user is notified and the user can exit install mode. At this point all devices will have been registered  with the integrated security system servers.","The installer switches  the gateway to an operational mode, and the gateway instructs or directs  all newly configured devices to switch to the \u201csecured\u201d Wifi sandbox settings. The gateway then switches  to the \u201csecured\u201d Wifi settings. Once the devices identify that the gateway is active on the \u201csecured\u201d network, they request new DHCP addresses from the gateway which, in response, provides  the new addresses. The devices with the new addresses are then operational  on the secured network.","In order to ensure the highest level of security on the secured network, the gateway can create or generate a dynamic network security configuration based on the unique ID and private key in the gateway, coupled with a randomizing factor that can be based on online time or other inputs. This guarantees the uniqueness of the gateway secured network configuration.","To enable the highest level of performance, the gateway analyzes the RF spectrum of the 802.11x network and determines which frequency band\/channel it should select to run.","An alternative embodiment of the camera\/IP device management process leverages the local ethernet connection of the sandbox network on the gateway. This alternative process is similar to the Wifi discovery embodiment described above, except the user connects the targeted device to the ethernet port of the sandbox network to begin the process. This alternative embodiment accommodates devices that have not been pre-configured with the default \u201cInstall\u201d configuration for the integrated security system.","This alternative embodiment of the IP device discovery and management begins with the user\/installer placing the system into install mode. The user is instructed to attach an IP device to be installed to the sandbox Ethernet port of the gateway. The IP device requests a DHCP address from the gateway which, in response to the request, provides the address. The user is presented the device and is asked if he\/she wants to install the device. If yes, the system configures the device with the secured Wifi settings and other device-specific settings (e.g., camera settings for video length, image quality etc.). The user is next instructed to disconnect the device from the ethernet port. The device is now available for use on the secured sandbox network.",{"@attributes":{"id":"p-0182","num":"0218"},"figref":"FIG. 14","b":["1403","1402","1","2"]},"Referring to , the touchscreen  incorporates an application  that is implemented as computer code resident on the touchscreen operating system, or as a web-based application running in a browser, or as another type of scripted application (e.g., Flash, Java, Visual Basic, etc.). The touchscreen core application  represents this application, providing user interface and logic for the end user to manage their security system or to gain access to networked information or content (Widgets). The touchscreen core application  in turn accesses a library or libraries of functions to control the local hardware (e.g. screen display, sound, LEDs, memory, etc.) as well as specialized librarie(s) to couple or connect to the security system.","In an embodiment of this security system connection, the touchscreen  communicates to the gateway , and has no direct communication with the security panel. In this embodiment, the touchscreen core application  accesses the remote service APIs  which provide security system functionality (e.g. ARM\/DISARM panel, sensor state, get\/set panel configuration parameters, initiate or get alarm events, etc.). In an embodiment, the remote service APIs  implement one or more of the following functions, but the embodiment is not so limited: Armstate=setARMState(type=\u201cARM STAY|ARM AWAY|DISARM\u201d, Parameters=\u201cExitDelay=30|Lights=OFF\u201d); sensorState=getSensors(type=\u201cALL|SensorName|SensorNameList\u201d); result=setSensorState(SensorName, parameters=\u201cOption1, Options2, . . . Option n\u201d); interruptHandler=SensorEvent( ); and, interruptHandler=alarmEvent( ).","Functions of the remote service APIs  of an embodiment use a remote PanelConnect API  which resides in memory on the gateway . The touchscreen  communicates with the gateway  through a suitable network interface such as an Ethernet or 802.11 RF connection, for example. The remote PanelConnect API  provides the underlying Security System Interfaces  used to communicate with and control one or more types of security panel via wired link  and\/or RF link . The PanelConnect API  provides responses and input to the remote services APIs , and in turn translates function calls and data to and from the specific protocols and functions supported by a specific implementation of a Security Panel (e.g. a GE Security Simon XT or Honeywell Vista P). In an embodiment, the PanelConnect API  uses a 345 MHz RF transceiver or receiver hardware\/firmware module to communicate wirelessly to the security panel and directly to a set of 345 MHz RF-enabled sensors and devices, but the embodiment is not so limited.","The gateway of an alternative embodiment communicates over a wired physical coupling or connection to the security panel using the panel's specific wired hardware (bus) interface and the panel's bus-level protocol.","In an alternative embodiment, the Touchscreen  implements the same PanelConnect API  locally on the Touchscreen , communicating directly with the Security Panel  and\/or Sensors  over the proprietary RF link or over a wired link for that system. In this embodiment the Touchscreen , instead of the gateway , incorporates the 345 MHz RF transceiver to communicate directly with Security Panel  or Sensors  over the RF link . In the case of a wired link the Touchscreen  incorporates the real-time hardware (e.g. a PIC chip and RS232-variant serial link) to physically connect to and satisfy the specific bus-level timing requirements of the SecurityPanel.","In yet another alternative embodiment, either the gateway  or the Touchscreen  implements the remote service APIs. This embodiment includes a Cricket device (\u201cCricket\u201d) which comprises but is not limited to the following components: a processor (suitable for handling 802.11 protocols and processing, as well as the bus timing requirements of SecurityPanel); an 802.11 (WiFi) client IP interface chip; and, a serial bus interface chip that implements variants of RS232 or RS485, depending on the specific Security Panel.","The Cricket also implements the full PanelConnect APIs such that it can perform the same functions as the case where the gateway implements the PanelConnect APIs. In this embodiment, the touchscreen core application  calls functions in the remote service APIs  (such as setArmState( )). These functions in turn couple or connect to the remote Cricket through a standard IP connection (\u201cCricket IP Link\u201d) (e.g., Ethernet, Homeplug, the gateway's proprietary Wifi network, etc.). The Cricket in turn implements the PanelConnect API, which responds to the request from the touchscreen core application, and performs the appropriate function using the proprietary panel interface. This interface uses either the wireless or wired proprietary protocol for the specific security panel and\/or sensors.",{"@attributes":{"id":"p-0190","num":"0226"},"figref":"FIG. 15","b":["1510","1520","1530","1540"]},"Unlike conventional systems that extend an existing security system, the system of an embodiment operates utilizing the proprietary wireless protocols of the security system manufacturer. In one illustrative embodiment, the gateway is an embedded computer with an IP LAN and WAN connection and a plurality of RF transceivers and software protocol modules capable of communicating with a plurality of security systems each with a potentially different RF and software protocol interface. After the gateway has completed the discovery and learning  of sensors and has been integrated  as a virtual control device in the extant security system, the system becomes operational. Thus, the security system and associated sensors are presented  as accessible devices to a potential plurality of user interface subsystems.","The system of an embodiment integrates  the functionality of the extant security system with other non-security devices including but not limited to IP cameras, touchscreens, lighting controls, door locking mechanisms, which may be controlled via RF, wired, or powerline-based networking mechanisms supported by the gateway or servers.","The system of an embodiment provides a user interface subsystem  enabling a user to monitor, manage, and control the system and associated sensors and security systems. In an embodiment of the system, a user interface subsystem is an HTML\/XML\/Javascript\/Java\/AJAX\/Flash presentation of a monitoring and control application, enabling users to view the state of all sensors and controllers in the extant security system from a web browser or equivalent operating on a computer, PDA, mobile phone, or other consumer device.","In another illustrative embodiment of the system described herein, a user interface subsystem is an HTML\/XML\/Javascript\/Java\/AJAX presentation of a monitoring and control application, enabling users to combine the monitoring and control of the extant security system and sensors with the monitoring and control of non-security devices including but not limited to IP cameras, touchscreens, lighting controls, door locking mechanisms.","In another illustrative embodiment of the system described herein, a user interface subsystem is a mobile phone application enabling users to monitor and control the extant security system as well as other non-security devices.","In another illustrative embodiment of the system described herein, a user interface subsystem is an application running on a keypad or touchscreen device enabling users to monitor and control the extant security system as well as other non-security devices.","In another illustrative embodiment of the system described herein, a user interface subsystem is an application operating on a TV or set-top box connected to a TV enabling users to monitor and control the extant security system as well as other non-security devices.",{"@attributes":{"id":"p-0198","num":"0234"},"figref":"FIG. 16","b":["1600","1610","1620","1620","1630","1640","1650","1660","1630","1630"]},"Moreover, other elements of the system of an embodiment may be conventional, well-known elements that need not be explained in detail herein. For example, security system  could be any type home or business security system, such devices including but not limited to a standalone RF home security system or a non-RF-capable wired home security system with an add-on RF interface module. In the integrated security system  of this example, security system  includes an RF-capable wireless security panel (WSP)  that acts as the master controller for security system . Well-known examples of such a WSP include the GE Security Concord, Networx, and Simon panels, the Honeywell Vista and Lynx panels, and similar panels from DSC and Napco, to name a few. A wireless module  includes the RF hardware and protocol software necessary to enable communication with and control of a plurality of wireless devices . WSP  may also manage wired devices  physically connected to WSP  with an RS232 or RS485 or Ethernet connection or similar such wired interface.","In an implementation consistent with the systems and methods described herein, Gateway  provides the interface between security system  and LAN and\/or WAN for purposes of remote control, monitoring, and management. Gateway  communicates with an external web server , database , and application server  over network  (which may comprise WAN, LAN, or a combination thereof). In this example system, application logic, remote user interface functionality, as well as user state and account are managed by the combination of these remote servers. Gateway  includes server connection manager , a software interface module responsible for all server communication over network . Event manager  implements the main event loop for Gateway , processing events received from device manager  (communicating with non-security system devices including but not limited to IP cameras, wireless thermostats, or remote door locks). Event manager  further processes events and control messages from and to security system  by utilizing WSP manager .","WSP manager  and device manager  both rely upon wireless protocol manager  which receives and stores the proprietary or standards-based protocols required to support security system  as well as any other devices interfacing with gateway . WSP manager  further utilizes the comprehensive protocols and interface algorithms for a plurality of security systems  stored in the WSP DB client database associated with wireless protocol manager . These various components implement the software logic and protocols necessary to communicate with and manager devices and security systems . Wireless Transceiver hardware modules  are then used to implement the physical RF communications link to such devices and security systems . An illustrative wireless transceiver  is the GE Security Dialog circuit board, implementing a 319.5 MHz two-way RF transceiver module. In this example, RF Link  represents the 319.5 MHz RF communication link, enabling gateway  to monitor and control WSP  and associated wireless and wired devices  and , respectively.","In one embodiment, server connection manager  requests and receives a set of wireless protocols for a specific security system  (an illustrative example being that of the GE Security Concord panel and sensors) and stores them in the WSP DB portion of the wireless protocol manager . WSP manager  then utilizes such protocols from wireless protocol manager  to initiate the sequence of processes detailed in  and  for learning gateway  into security system  as an authorized control device. Once learned in, as described with reference to  (and above), event manager  processes all events and messages detected by the combination of WSP manager  and the GE Security wireless transceiver module .","In another embodiment, gateway  incorporates a plurality of wireless transceivers  and associated protocols managed by wireless protocol manager . In this embodiment events and control of multiple heterogeneous devices may be coordinated with WSP , wireless devices , and wired devices . For example a wireless sensor from one manufacturer may be utilized to control a device using a different protocol from a different manufacturer.","In another embodiment, gateway  incorporates a wired interface to security system , and incorporates a plurality of wireless transceivers  and associated protocols managed by wireless protocol manager . In this embodiment events and control of multiple heterogeneous devices may be coordinated with WSP , wireless devices , and wired devices .","Of course, while an illustrative embodiment of an architecture of the system of an embodiment is described in detail herein with respect to , one of skill in the art will understand that modifications to this architecture may be made without departing from the scope of the description presented herein. For example, the functionality described herein may be allocated differently between client and server, or amongst different server or processor-based components. Likewise, the entire functionality of the gateway  described herein could be integrated completely within an existing security system . In such an embodiment, the architecture could be directly integrated with a security system  in a manner consistent with the currently described embodiments.",{"@attributes":{"id":"p-0206","num":"0242"},"figref":"FIG. 17","b":["1620","1610","1620","1710","1720","1725","1611","1613","1620","1611","1730","1620","1740","1610","1611","1750"]},"Gateway  utilizes the appropriate protocols to mimic  the first identified device . In this operation gateway  identifies itself using the unique or pseudo-unique identifier of the first found device , and sends an appropriate change of state message over RF Link . In the event that WSP  responds to this change of state message, the device  is then added  to the system in database . Gateway  associates  any other information (such as zone name or token-based identifier) with this device  in database , enabling gateway , user interface modules, or any application to retrieve this associated information.","In the event that WSP  does not respond to the change of state message, the device  is not added  to the system in database , and this device  is identified as not being a part of security system  with a flag, and is either ignored or added as an independent device, at the discretion of the system provisioning rules. Operations hereunder repeat  operations , ,  for all devices  if applicable. Once all devices  have been tested in this way, the system begins operation .","In another embodiment, gateway  utilizes a wired connection to WSP , but also incorporates a wireless transceiver  to communicate directly with devices . In this embodiment, operations under  above are removed, and operations under  above are modified so the system of this embodiment utilizes wireline protocols to add itself as an authorized control device in security system .","A description of an example embodiment follows in which the Gateway (, element ) is the iHub available from iControl Networks, Palo Alto, Calif., and described in detail herein. In this example the gateway is \u201cautomatically\u201d installed with a security system.","The automatic security system installation begins with the assignment of an authorization key to components of the security system (e.g., gateway, kit including the gateway, etc.). The assignment of an authorization key is done in lieu of creating a user account. An installer later places the gateway in a user's premises along with the premises security system. The installer uses a computer to navigate to a web portal (e.g., integrated security system web interface), logs in to the portal, and enters the authorization key of the installed gateway into the web portal for authentication. Once authenticated, the gateway automatically discovers devices at the premises (e.g., sensors, cameras, light controls, etc.) and adds the discovered devices to the system or \u201cnetwork\u201d. The installer assigns names to the devices, and tests operation of the devices back to the server (e.g., did the door open, did the camera take a picture, etc.). The security device information is optionally pushed or otherwise propagated to a security panel and\/or to the server network database. The installer finishes the installation, and instructs the end user on how to create an account, username, and password. At this time the user enters the authorization key which validates the account creation (uses a valid authorization key to associate the network with the user's account). New devices may subsequently be added to the security network in a variety of ways (e.g., user first enters a unique ID for each device\/sensor and names it in the server, after which the gateway can automatically discover and configure the device).","A description of another example embodiment follows in which the security system (, element ) is a Dialog system and the WSP (, element ) is a SimonXT available from General Electric Security, and the Gateway (FIG. , element ) is the iHub available from iControl Networks, Palo Alto, Calif., and described in detail herein. Descriptions of the install process for the SimonXT and iHub are also provided below.","GE Security's Dialog network is one of the most widely deployed and tested wireless security systems in the world. The physical RF network is based on a 319.5 MHz unlicensed spectrum, with a bandwidth supporting up to 19 Kbps communications. Typical use of this bandwidth\u2014even in conjunction with the integrated security system\u2014is far less than that. Devices on this network can support either one-way communication (either a transmitter or a receiver) or two-way communication (a transceiver). Certain GE Simon, Simon XT, and Concord security control panels incorporate a two-way transceiver as a standard component. The gateway also incorporates the same two-way transceiver card. The physical link layer of the network is managed by the transceiver module hardware and firmware, while the coded payload bitstreams are made available to the application layer for processing.","Sensors in the Dialog network typically use a 60-bit protocol for communicating with the security panel transceiver, while security system keypads and the gateway use the encrypted 80-bit protocol. The Dialog network is configured for reliability, as well as low-power usage. Many devices are supervised, i.e. they are regularly monitored by the system \u2018master\u2019 (typically a GE security panel), while still maintaining excellent power usage characteristics. A typical door window sensor has a battery life in excess of 5-7 years.","The gateway has two modes of operation in the Dialog network: a first mode of operation is when the gateway is configured or operates as a \u2018slave\u2019 to the GE security panel; a second mode of operation is when the gateway is configured or operates as a \u2018master\u2019 to the system in the event a security panel is not present. In both configurations, the gateway has the ability to \u2018listen\u2019 to network traffic, enabling the gateway to continually keep track of the status of all devices in the system. Similarly, in both situations the gateway can address and control devices that support setting adjustments (such as the GE wireless thermostat).","In the configuration in which the gateway acts as a \u2018slave\u2019 to the security panel, the gateway is \u2018learned into\u2019 the system as a GE wireless keypad. In this mode of operation, the gateway emulates a security system keypad when managing the security panel, and can query the security panel for status and \u2018listen\u2019 to security panel events (such as alarm events).","The gateway incorporates an RF Transceiver manufactured by GE Security, but is not so limited. This transceiver implements the Dialog protocols and handles all network message transmissions, receptions, and timing. As such, the physical, link, and protocol layers of the communications between the gateway and any GE device in the Dialog network are totally compliant with GE Security specifications.","At the application level, the gateway emulates the behavior of a GE wireless keypad utilizing the GE Security 80-bit encrypted protocol, and only supported protocols and network traffic are generated by the gateway. Extensions to the Dialog RF protocol of an embodiment enable full control and configuration of the panel, and iControl can both automate installation and sensor enrollment as well as direct configuration downloads for the panel under these protocol extensions.","As described above, the gateway participates in the GE Security network at the customer premises. Because the gateway has intelligence and a two-way transceiver, it can \u2018hear\u2019 all of the traffic on that network. The gateway makes use of the periodic sensor updates, state changes, and supervisory signals of the network to maintain a current state of the premises. This data is relayed to the integrated security system server (e.g., , element ) and stored in the event repository for use by other server components. This usage of the GE Security RF network is completely non-invasive; there is no new data traffic created to support this activity.","The gateway can directly (or indirectly through the Simon XT panel) control two-way devices on the network. For example, the gateway can direct a GE Security Thermostat to change its setting to \u2018Cool\u2019 from \u2018Off\u2019, as well as request an update on the current temperature of the room. The gateway performs these functions using the existing GE Dialog protocols, with little to no impact on the network; a gateway device control or data request takes only a few dozen bytes of data in a network that can support 19 Kbps.","By enrolling with the Simon XT as a wireless keypad, as described herein, the gateway includes data or information of all alarm events, as well as state changes relevant to the security panel. This information is transferred to the gateway as encrypted packets in the same way that the information is transferred to all other wireless keypads on the network.","Because of its status as an authorized keypad, the gateway can also initiate the same panel commands that a keypad can initiate. For example, the gateway can arm or disarm the panel using the standard Dialog protocol for this activity. Other than the monitoring of standard alarm events like other network keypads, the only incremental data traffic on the network as a result of the gateway is the infrequent remote arm\/disarm events that the gateway initiates, or infrequent queries on the state of the panel.","The gateway is enrolled into the Simon XT panel as a \u2018slave\u2019 device which, in an embodiment, is a wireless keypad. This enables the gateway for all necessary functionality for operating the Simon XT system remotely, as well as combining the actions and information of non-security devices such as lighting or door locks with GE Security devices. The only resource taken up by the gateway in this scenario is one wireless zone (sensor ID).","The gateway of an embodiment supports three forms of sensor and panel enrollment\/installation into the integrated security system, but is not limited to this number of enrollment\/installation options. The enrollment\/installation options of an embodiment include installer installation, kitting, and panel, each of which is described below.","Under the installer option, the installer enters the sensor IDs at time of installation into the integrated security system web portal or iScreen. This technique is supported in all configurations and installations.","Kits can be pre-provisioned using integrated security system provisioning applications when using the kitting option. At kitting time, multiple sensors are automatically associated with an account, and at install time there is no additional work required.","In the case where a panel is installed with sensors already enrolled (i.e. using the GE Simon XT enrollment process), the gateway has the capability to automatically extract the sensor information from the system and incorporate it into the user account on the integrated security system server.","The gateway and integrated security system of an embodiment uses an auto-learn process for sensor and panel enrollment in an embodiment. The deployment approach of an embodiment can use additional interfaces that GE Security is adding to the Simon XT panel. With these interfaces, the gateway has the capability to remotely enroll sensors in the panel automatically. The interfaces include, but are not limited to, the following: EnrollDevice(ID, type, name, zone, group); SetDeviceParameters(ID, type, Name, zone, group), GetDeviceParameters(zone); and RemoveDevice(zone).","The integrated security system incorporates these new interfaces into the system, providing the following install process. The install process can include integrated security system logistics to handle kitting and pre-provisioning. Pre-kitting and logistics can include a pre-provisioning kitting tool provided by integrated security system that enables a security system vendor or provider (\u201cprovider\u201d) to offer pre-packaged initial \u2018kits\u2019. This is not required but is recommended for simplifying the install process. This example assumes a \u2018Basic\u2019 kit is preassembled and includes one (1) Simon XT, three (3) Door\/window sensors, one (1) motion sensor, one (1) gateway, one (1) keyfob, two (2) cameras, and ethernet cables. The kit also includes a sticker page with all Zones (1-24) and Names (full name list).","The provider uses the integrated security system kitting tool to assemble \u2018Basic\u2019 kit packages. The contents of different types of starter kits may be defined by the provider. At the distribution warehouse, a worker uses a bar code scanner to scan each sensor and the gateway as it is packed into the box. An ID label is created that is attached to the box. The scanning process automatically associates all the devices with one kit, and the new ID label is the unique identifier of the kit. These boxes are then sent to the provider for distribution to installer warehouses. Individual sensors, cameras, etc. are also sent to the provider installer warehouse. Each is labeled with its own barcode\/ID.","An installation and enrollment procedure of a security system including a gateway is described below as one example of the installation process.\n\n","An installation and enrollment procedure of a security system including a gateway is described below as an alternative example of the installation process. This installation process is for use for enrolling sensors into the SimonXT and integrated security system and is compatible with all existing GE Simon panels.","The integrated security system supports all pre-kitting functionality described in the installation process above. However, for the purpose of the following example, no kitting is used.\n\n","The panel of an embodiment can be programmed remotely. The CMS pushes new programming to SimonXT over a telephone or GPRS link. Optionally, iControl and GE provide a broadband link or coupling to the gateway and then a link from the gateway to the Simon XT over GE RF.","In addition to the configurations described above, the gateway of an embodiment supports takeover configurations in which it is introduced or added into a legacy security system. A description of example takeover configurations follow in which the security system (, element ) is a Dialog system and the WSP (, element ) is a GE Concord panel (e.g., equipped with POTS, GE RF, and Superbus 2000 RS485 interface (in the case of a Lynx takeover the Simon XT is used) available from General Electric Security. The gateway (, element ) in the takeover configurations is an iHub (e.g., equipped with built-in 802.11b\/g router, Ethernet Hub, GSM\/GPRS card, RS485 interface, and iControl Honeywell-compatible RF card) available from iControl Networks, Palo Alto, Calif. While components of particular manufacturers are used in this example, the embodiments are not limited to these components or to components from these vendors.","The security system can optionally include RF wireless sensors (e.g., GE wireless sensors utilizing the GE Dialog RF technology), IP cameras, a GE-iControl Touchscreen (the touchscreen is assumed to be an optional component in the configurations described herein, and is thus treated separately from the iHub; in systems in which the touchscreen is a component of the base security package, the integrated iScreen (available from iControl Networks, Palo Alto, Calif.) can be used to combine iHub technology with the touchscreen in a single unit), and Z-Wave devices to name a few.","The takeover configurations described below assume takeover by a \u201cnew\u201d system of an embodiment of a security system provided by another third party vendor, referred to herein as an \u201coriginal\u201d or \u201clegacy\u201d system. Generally, the takeover begins with removal of the control panel and keypad of the legacy system. A GE Concord panel is installed to replace the control panel of the legacy system along with an iHub with GPRS Modem. The legacy system sensors are then connected or wired to the Concord panel, and a GE keypad or touchscreen is installed to replace the control panel of the legacy system. The iHub includes the iControl RF card, which is compatible with the legacy system. The iHub finds and manages the wireless sensors of the legacy system, and learns the sensors into the Concord by emulating the corresponding GE sensors. The iHub effectively acts as a relay for legacy wireless sensors.","Once takeover is complete, the new security system provides a homogeneous system that removes the compromises inherent in taking over or replacing a legacy system. For example, the new system provides a modern touchscreen that may include additional functionality, new services, and supports integration of sensors from various manufacturers. Furthermore, lower support costs can be realized because call centers, installers, etc. are only required to support one architecture. Additionally, there is minimal install cost because only the panel is required to be replaced as a result of the configuration flexibility offered by the iHub.","The system takeover configurations described below include but are not limited to a dedicated wireless configuration, a dedicated wireless configuration that includes a touchscreen, and a fished Ethernet configuration. Each of these configurations is described in detail below.",{"@attributes":{"id":"p-0240","num":"0340"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0241","num":"0341"},"figref":"FIG. 19"},"The GE-iControl Touchscreen can be used with either of an 802.11 connection or Ethernet connection with the iHub. Because the takeover involves a GE Concord panel (or Simon XT), the touchscreen is always an option. No extra wiring is required for the touchscreen as it can use the 4-wire set from the replaced keypad of the legacy system. This provides power, battery backup (through Concord), and data link (RS485 Superbus 2000) between Concord and touchscreen. The touchscreen receives its broadband connectivity through the dedicated 802.11 link to the iHub.",{"@attributes":{"id":"p-0243","num":"0343"},"figref":"FIG. 20"},"The takeover installation process is similar to the installation process described above, except the control panel of the legacy system is replaced; therefore, only the differences with the installation described above are provided here. The takeover approach of an embodiment uses the existing RS485 control interfaces that GE Security and iControl support with the iHub, touchscreen, and Concord panel. With these interfaces, the iHub is capable of automatically enrolling sensors in the panel. The exception is the leverage of an iControl RF card compatible with legacy systems to \u2018takeover\u2019 existing RF sensors. A description of the takeover installation process follows.","During the installation process, the iHub uses an RF Takeover Card to automatically extract all sensor IDs, zones, and names from the legacy panel. The installer removes connections at the legacy panel from hardwired wired sensors and labels each with the zone. The installer pulls the legacy panel and replaces it with the GE Concord panel. The installer also pulls the existing legacy keypad and replaces it with either a GE keypad or a GE-iControl touchscreen. The installer connects legacy hardwired sensors to appropriate wired zone (from labels) on the Concord. The installer connects the iHub to the local network and connects the iHub RS485 interface to the Concord panel. The iHub automatically \u2018enrolls\u2019 legacy RF sensors into the Concord panel as GE sensors (maps IDs), and pushes or otherwise propagates other information gathered from HW panel (zone, name, group). The installer performs a test of all sensors back to CMS. In operation, the iHub relays legacy sensor data to the Concord panel, emulating equivalent GE sensor behavior and protocols.","The areas of the installation process particular to the legacy takeover include how the iHub extracts sensor info from the legacy panel and how the iHub automatically enrolls legacy RF sensors and populates Concord with wired zone information. Each of these areas is described below.","In having the iHub extract sensor information from the legacy panel, the installer \u2018enrolls\u2019 iHub into the legacy panel as a wireless keypad (use install code and house ID\u2014available from panel). The iHub legacy RF Takeover Card is a compatible legacy RF transceiver. The installer uses the web portal to place iHub into \u2018Takeover Mode\u2019, and the web portal the automatically instructs the iHub to begin extraction. The iHub queries the panel over the RF link (to get all zone information for all sensors, wired and RF). The iHub then stores the legacy sensor information received during the queries on the iConnect server.","The iHub also automatically enrolls legacy RF sensors and populates Concord with wired zone information. In so doing, the installer selects \u2018Enroll legacy Sensors into Concord\u2019 (next step in \u2018Takeover\u2019 process on web portal). The iHub automatically queries the iConnect server, and downloads legacy sensor information previously extracted. The downloaded information includes an ID mapping from legacy ID to \u2018spoofed\u2019 GE ID. This mapping is stored on the server as part of the sensor information (e.g., the iConnect server knows that the sensor is a legacy sensor acting in GE mode). The iHub instructs Concord to go into install mode, and sends appropriate Superbus 2000 commands for sensor learning to the panel. For each sensor, the \u2018spoofed\u2019 GE ID is loaded, and zone, name, and group are set based on information extracted from legacy panel. Upon completion, the iHub notifies the server, and the web portal is updated to reflect next phase of Takeover (e.g., \u2018Test Sensors\u2019).","Sensors are tested in the same manner as described above. When a HW sensor is triggered, the signal is captured by the iHub legacy RF Takeover Card, translated to the equivalent GE RF sensor signal, and pushed to the panel as a sensor event on the SuperBus 2000 wires.","In support of remote programming of the panel, CMS pushes new programming to Concord over a phone line, or to the iConnect CMS\/Alarm Server API, which in turn pushes the programming to the iHub. The iHub uses the Concord Superbus 2000 RS485 link to push the programming to the Concord panel.",{"@attributes":{"id":"p-0251","num":"0351"},"figref":"FIG. 21","b":["2100","2102","2104","2106"]},{"@attributes":{"id":"p-0252","num":"0352"},"figref":"FIG. 22","b":["2200","2202","2204","2206"]},"Components of the gateway of the integrated security system described herein control discovery, installation and configuration of both wired and wireless IP devices (e.g., cameras, etc.) coupled or connected to the system, as described herein with reference to , as well as management of video routing using a video routing module or engine. The video routing engine initiates communication paths for the transfer of video from a streaming source device to a requesting client device, and delivers seamless video streams to the user via the communication paths using one or more of UPnP port-forwarding, relay server routing and STUN\/TURN peer-to-peer routing, each of which is described below.","By way of reference, conventional video cameras have the ability to stream digital video in a variety of formats and over a variety of networks. Internet protocol (IP) video cameras, which include video cameras using an IP transport network (e.g., Ethernet, WiFi (IEEE 802.11 standards), etc.) are prevalent and increasingly being utilized in home monitoring and security system applications. With the proliferation of the internet, Ethernet and WiFi local area networks (LANs) and advanced wide area networks (WANs) that offer high bandwidth, low latency connections (broadband), as well as more advanced wireless WAN data networks (e.g. GPRS or CDMA 1\u00d7RTT), there increasingly exists the networking capability to extend traditional security systems to offer IP-based video. However, a fundamental reason for such IP video in a security system is to enable a user or security provider to monitor live or otherwise streamed video from outside the host premises (and the associated LAN).","The conventional solution to this problem has involved a technique known as \u2018port fowarding\u2019, whereby a \u2018port\u2019 on the LAN's router\/firewall is assigned to the specific LAN IP address for an IP camera, or a proxy to that camera. Once a port has been \u2018forwarded\u2019 in this manner, a computer external to the LAN can address the LAN's router directly, and request access to that port. This access request is then forwarded by the router directly to the IP address specified, the IP camera or proxy. In this way an external device can directly access an IP camera within the LAN and view or control the streamed video.","The issues with this conventional approach include the following: port forwarding is highly technical and most users do not know how\/why to do it; automatic port forwarding is difficult and problematic using emerging standards like UPnP; the camera IP address is often reset in response to a power outage\/router reboot event; there are many different routers with different ways\/capabilities for port forwarding. In short, although port forwarding can work, it is frequently less than adequate to support a broadly deployed security solution utilizing IP cameras.","Another approach to accessing streaming video externally to a LAN utilizes peer-to-peer networking technology. So-called peer-to-peer networks, which includes networks in which a device or client is connected directly to another device or client, typically over a Wide Area Network (WAN) and without a persistent server connection, are increasingly common. In addition to being used for the sharing of files between computers (e.g., Napster and KaZaa), peer-to-peer networks have also been more recently utilized to facilitate direct audio and media streaming in applications such as Skype. In these cases, the peer-to-peer communications have been utilized to enable telephony-style voice communications and video conferencing between two computers, each enabled with an IP-based microphone, speaker, and video camera. A fundamental reason for adopting such peer-to-peer technology is the ability to transparently \u2018punch through\u2019 LAN firewalls to enable external access to the streaming voice and video content, and to do so in a way that scales to tens of millions of users without creating an untenable server load.","A limitation of the conventional peer-to-peer video transport lies in the personal computer (PC)-centric nature of the solution. Each of the conventional solutions uses a highly capable PC connected to the video camera, with the PC providing the advanced software functionality required to initiate and manage the peer-to-peer connection with the remote client. A typical security or remote home monitoring system requires multiple cameras, each with its own unique IP address, and only a limited amount of processing capability in each camera such that the conventional PC-centric approach cannot easily solve the need. Instead of a typical PC-centric architecture with three components (a \u201c3-way IP Video System\u201d) that include a computer device with video camera, a mediating server, and a PC client with video display capability, the conventional security system adds a plurality of fourth components that are standalone IP video cameras (requiring a \u201c4-way IP Video System\u201d), another less-than-ideal solution.","In accordance with the embodiments described herein, IP camera management systems and methods are provided that enable, a consumer or security provider to easily and automatically configure and manage IP cameras located at a customer premise. Using this system IP camera management may be extended to remote control and monitoring from outside the firewall and router of the customer premise.","With reference to , the system includes a gateway  having a video routing component so that the gateway  can manage and control, or assist in management and control, or video routing. The system also includes one or more cameras (e.g., WiFi IP camera , Ethernet IP camera , etc.) that communicate over the LAN  using an IP format, as well as a connection management server  located outside the premise firewall  and connected to the gateway  by a Wide Area Network (WAN) . The system further includes one or more devices , ,  located outside the premise and behind other firewalls , ,  and connected to the WAN . The other devices , ,  are configured to access video or audio content from the IP cameras within the premise, as described above.","Alternatively, with reference to , the system includes a touchscreen  or  having a video routing component so that the touchscreen  or  can manage and control, or assist in management and control, or video routing. The system also includes one or more cameras (e.g., WiFi IP camera , Ethernet IP camera , etc.) that communicate over the LAN  using an IP format, as well as a connection management server  located outside the premise firewall  and connected to the gateway  by a Wide Area Network (WAN) . The system further includes one or more devices , ,  located outside the premise and behind other firewalls , ,  and connected to the WAN . The other devices , ,  are configured to access video or audio content from the IP cameras within the premise, as described above.",{"@attributes":{"id":"p-0262","num":"0362"},"figref":"FIG. 23","b":["2310","2311","2312","2313","2320","2321"]},"When a server relay is present , the IP camera is instructed  to stream to the server, and the connection is managed  through the server. In response to the stream terminating , operations return to gateway operation , and waits to receive another request  for a stream from one of the plurality of IP video cameras available on the LAN.","When a server relay is not present , the requestor's WAN IP address\/port is provided  to the gateway or gateway relay. When a gateway relay is present , the IP camera is instructed  to stream to the gateway, and the gateway relays  the connection to the requestor. In response to the stream terminating , operations return to gateway operation , and waits to receive another request  for a stream from one of the plurality of IP video cameras available on the LAN. When a gateway relay is not present , the IP camera is instructed  to stream to an address, and a handoff  is made resulting in direct communication between the camera and the requestor. In response to the stream terminating , operations return to gateway operation , and waits to receive another request  from one of the plurality of IP video cameras available on the LAN.","The integrated security system of an embodiment supports numerous video stream formats or types of video streams. Supported video streams include, but are not limited to, Motion Picture Experts Group (MPEG)-4 (MPEG-4)\/Real-Time Streaming Protocol (RTSP), MPEG-4 over Hypertext Transfer Protocol (HTTP), and Motion Joint Photographic Experts Group (JPEG) (MJPEG).","The integrated security system of an embodiment supports the MPEG-4\/RTSP video streaming method (supported by video servers and clients) which uses RTSP for the control channel and Real-time Transport Protocol (RTP) for the data channel. Here the RTSP channel is over Transmission Control Protocol (TCP) while the data channel uses User Datagram Protocol (UDP). This method is widely supported by both streaming sources (e.g., cameras) and stream clients (e.g., remote client devices, Apple Quicktime, VideoLAN, IPTV mobile phones, etc).","Encryption can be added to the two channels under MPEG-4\/RTSP. For example, the RTSP control channel can be encrypted using SSL\/TLS. The data channel can also be encrypted.","If the camera or video stream source inside the home does not support encryption for either RTSP or RTP channels, the gateway located on the LAN can facilitate the encrypted RTSP method by maintaining separate TCP sessions with the video stream source device and with the encrypted RTSP client outside the LAN, and relay all communication between the two sessions. In this situation, any communication between the gateway and the video stream source that is not encrypted could be encrypted by the gateway before being relayed to the RTSP client outside the LAN. In many cases the gateway is an access point for the encrypted and private Wifi network on which the video stream source device is located. This means that communication between the gateway and the video stream source device is encrypted at the network level, and communication between the gateway and the RTSP client is encrypted at the transport level. In this fashion the gateway can compensate for a device that does not support encrypted RTSP.","The integrated security system of an embodiment also supports reverse RTSP. Reverse RTSP includes taking a TCP-based protocol like RTSP, and reversing the roles of client and server (references to \u201cserver\u201d include the iControl server, also referred to as the iConnect server) when it comes to TCP session establishment. For example, in standard RTSP the RTSP client is the one that establishes the TCP connection with the stream source server (the server listens on a port for incoming connections). In Reverse RTSP, the RTSP client listens on a port for incoming connections from the stream source server. Once the TCP connection is established, the RTSP client begins sending commands to the server over the TCP connection just as it would in standard RTSP.","When using Reverse RTSP, the video stream source is generally on a LAN, protected by a firewall. Having a device on the LAN initiate the connection to the RTSP client outside the firewall enables easy network traversal.","If the camera or video stream source inside the LAN does not support Reverse RTSP, then the gateway facilitates the Reverse RTSP method by initiating separate TCP sessions with the video stream source device and with the Reverse RTSP client outside the LAN, and then relays all communication between the two sessions. In this fashion the gateway compensates for a stream source device that does not support Reverse RTSP.","As described in the encryption description above, the gateway can further compensate for missing functionalities on the device such as encryption. If the device does not support encryption for either RTSP or RTP channels, the gateway can communicate with the device using these un-encrypted streams, and then encrypt the streams before relaying them out of the LAN to the RTSP Reverse client.","Servers of the integrated security system can compensate for RTSP clients that do not support Reverse RTSP. In this situation, the server accepts TCP connections from both the RTSP client and the Reverse RTSP video stream source (which could be a gateway acting on behalf of a stream source device that does not support Reverse RTSP). The server then relays the control and video streams from the Reverse RTSP video stream source to the RTSP client. The server can further compensate for the encryption capabilities of the RTSP client; if the RTSP client does not support encryption then the server can provide an unencrypted stream to the RTSP client even though an encrypted stream was received from the Reverse RTSP streaming video source.","The integrated security system of an embodiment also supports Simple Traversal of User Datagram Protocol (UDP) through Network Address Translators (NAT) (STUN)\/Traversal Using Relay NAT (TURN) peer-to-peer routing. STUN and Turn are techniques for using a server to help establish a peer-to-peer UDP data stream (it does not apply to TCP streams). The bandwidth consumed by the data channel of a video stream is usually many thousands of times larger than that used by the control channel. Consequently, when a peer-to-peer connection for both the RTSP and RTP channels is not possible, there is still a great incentive to use STUN\/TURN techniques in order to achieve a peer-to-peer connection for the RTP data channel.","Here, a method referred to herein as RTSP with STUN\/TURN is used by the integrated security system. The RTSP with STUN\/TURN is a method in which the video streaming device is instructed over the control channel to stream its UDP data channel to a different network address than that of the other end of the control TCP connection (usually the UDP data is simply streamed to the IP address of the RTSP client). The result is that the RTSP or Reverse RTSP TCP channel can be relayed using the gateway and\/or the server, while the RTP UDP data channel can flow directly from the video stream source device to the video stream client.","If a video stream source device does not support RTSP with STUN\/TURN, the gateway can compensate for the device by relaying the RTSP control channel via the server to the RTSP client, and receiving the RTP data channel and then forwarding it directly to the RTSP with STUN\/TURN enabled client. Encryption can also be added here by the gateway.","The integrated security system of an embodiment supports MPEG-4 over HTTP. MPEG-4 over HTTP is similar to MPEG-4 over RTSP except that both the RTSP control channel and the RTP data channel are passed over an HTTP TCP session. Here a single TCP session can be used, splitting it into multiple channels using common HTTP techniques like chunked transfer encoding.","The MPEG-4 over HTTP is generally supported by many video stream clients and server devices, and encryption can easily be added to it using SSL\/TLS. Because it uses TCP for both channels, STUN\/TURN techniques may not apply in the event that a direct peer-to-peer TCP session between client and server cannot be established.","As described above, encryption can be provided using SSL\/TLS taking the form of HTTPS. And as with MPEG-4 over RTSP, a gateway can compensate for a stream source device that does not support encryption by relaying the TCP streams and encrypting the TCP stream between the gateway and the stream client. In many cases the gateway is an access point for the encrypted and private Wifi network on which the video stream source device is located. This means that communication between the gateway and the video stream source device is encrypted at the network level, and communication between the gateway and the video stream client is encrypted at the transport level. In this fashion the gateway can compensate for a device that does not support HTTPS.","As with Reverse RTSP, the integrated security system of an embodiment supports Reverse HTTP. Reverse HTTP includes taking a TCP-based protocol like HTTP, and reversing the roles of client and server when it comes to TCP session establishment. For example, in conventional HTTP the HTTP client is the one that establishes the TCP connection with the server (the server listens on a port for incoming connections). In Reverse HTTP, the HTTP client listens on a port for incoming connections from the server. Once the TCP connection is established, the HTTP client begins sending commands to the server over the TCP connection just as it would in standard HTTP.","When using Reverse HTTP, the video stream source is generally on a LAN, protected by a firewall. Having a device on the LAN initiate the connection to the HTTP client outside the firewall enables easy network traversal.","If the camera or video stream source inside the LAN does not support Reverse HTTP, then the gateway can facilitate the Reverse HTTP method by initiating separate TCP sessions with the video stream source device and with the Reverse HTTP client outside the LAN, and then relay all communication between the two sessions. In this fashion the gateway can compensate for a stream source device that does not support Reverse HTTP.","As described in the encryption description above, the gateway can further compensate for missing functionalities on the device such as encryption. If the device does not support encrypted HTTP (e.g., HTTPS), then the gateway can communicate with the device using HTTP, and then encrypt the TCP stream(s) before relaying out of the LAN to the Reverse HTTP client.","The servers of an embodiment can compensate for HTTP clients that do not support Reverse HTTP. In this situation, the server accepts TCP connections from both the HTTP client and the Reverse HTTP video stream source (which could be a gateway acting on behalf of a stream source device that does not support Reverse HTTP). The server then relays the TCP streams from the Reverse HTTP video stream source to the HTTP client. The server can further compensate for the encryption capabilities of the HTTP client; if the HTTP client does not support encryption then the server can provide an unencrypted stream to the HTTP client even though an encrypted stream was received from the Reverse HTTP streaming video source.","The integrated security system of an embodiment supports MJPEG as described above. MJPEG is a streaming technique in which a series of JPG images are sent as the result of an HTTP request. Because MJPEG streams are transmitted over HTTP, HTTPS can be employed for encryption and most MJPEG clients support the resulting encrypted stream. And as with MPEG-4 over HTTP, a gateway can compensate for a stream source device that does not support encryption by relaying the TCP streams and encrypting the TCP stream between the gateway and the stream client. In many cases the gateway is an access point for the encrypted and private Wifi network on which the video stream source device is located. This means that communication between the gateway and the video stream source device is encrypted at the network level, and communication between the gateway and the video stream client is encrypted at the transport level. In this fashion the gateway can compensate for a device that does not support HTTPS.","The integrated system of an embodiment supports Reverse HTTP. Reverse HTTP includes taking a TCP-based protocol like HTTP, and reversal of the roles of client and server when it comes to TCP session establishment can be employed for MJPEG streams. For example, in standard HTTP the HTTP client is the one who establishes the TCP connection with the server (the server listens on a port for incoming connections). In Reverse HTTP, the HTTP client listens on a port for incoming connections from the server. Once the TCP connection is established, the HTTP client begins sending commands to the server over the TCP connection just as it would in standard HTTP.","When using Reverse HTTP, the video stream source is generally on a LAN, protected by a firewall. Having a device on the LAN initiate the connection to the HTTP client outside the firewall enables network traversal.","If the camera or video stream source inside the LAN does not support Reverse HTTP, then the gateway can facilitate the Reverse HTTP method by initiating separate TCP sessions with the video stream source device and with the Reverse HTTP client outside the LAN, and then relay all communication between the two sessions. In this fashion the gateway can compensate for a stream source device that does not support Reverse HTTP.","As described in the encryption description above, the gateway can further compensate for missing functionalities on the device such as encryption. If the device does not support encrypted HTTP (e.g., HTTPS), then the gateway can communicate with the device using HTTP, and then encrypt the TCP stream(s) before relaying out of the LAN to the Reverse HTTP client.","The servers can compensate for HTTP clients that do not support Reverse HTTP. In this situation, the server accepts TCP connections from both the HTTP client and the Reverse HTTP video stream source (which could be a gateway acting on behalf of a stream source device that does not support Reverse HTTP). The server then relays the TCP streams from the Reverse HTTP video stream source to the HTTP client. The server can further compensate for the encryption capabilities of the HTTP client; if the HTTP client does not support encryption then the server can provide an unencrypted stream to the HTTP client even though an encrypted stream was received from the Reverse HTTP streaming video source.","The integrated security system of an embodiment considers numerous parameters in determining or selecting one of the streaming formats described above for use in transferring video streams. The parameters considered in selecting a streaming format include, but are not limited to, security requirements, client capabilities, device capabilities, and network\/system capabilities.","The security requirements for a video stream are considered in determining an applicable streaming format in an embodiment. Security requirements fall into two categories, authentication and privacy, each of which is described below.","Authentication as a security requirement means that stream clients must present credentials in order to obtain a stream. Furthermore, this presentation of credentials should be done in a way that is secure from network snooping and replays. An example of secure authentication is Basic Authentication over HTTPS. Here a username and password are presented over an encrypted HTTPS channel so snooping and replays are prevented. Basic Authentication alone, however, is generally not sufficient for secure authentication.","Because not all streaming clients support SSL\/TLS, authentication methods that do not require it are desirable. Such methods include Digest Authentication and one-time requests. A one-time request is a request that can only be made by a client one time, and the server prevents a reuse of the same request. One-time requests are used to control access to a stream source device by stream clients that do not support SSL\/TLS. An example here is providing video access to a mobile phone. Typical mobile phone MPEG-4 viewers do not support encryption. In this case, one of the MPEG-4 over RTSP methods described above can be employed to get the video stream relayed to an server. The server can then provide the mobile phone with a one-time request Universal Resource Locator (URL) for the relayed video stream source (via a Wireless Application Protocol (WAP) page). Once the stream ends, the mobile phone would need to obtain another one-time request URL from the server (via WAP, for example) in order to view the stream again.","Privacy as a security requirement means that the contents of the video stream must be encrypted. This is a requirement that may be impossible to satisfy on clients that do not support video stream encryption, for example many mobile phones. If a client supports encryption for some video stream format(s), then the \u201cbest\u201d of those formats should be selected. Here \u201cbest\u201d is determined by the stream type priority algorithm.","The client capabilities are considered in determining an applicable streaming format in an embodiment. In considering client capabilities, the selection depends upon the supported video stream formats that include encryption, and the supported video stream formats that do not support encryption.","The device capabilities are considered in determining an applicable streaming format in an embodiment. In considering device capabilities, the selection depends upon the supported video stream formats that include encryption, the supported video stream formats that do not support encryption, and whether the device is on an encrypted private Wifi network managed by the gateway (in which case encryption at the network level is not required).","The network\/system capabilities are considered in determining an applicable streaming format in an embodiment. In considering network\/system capabilities, the selection depends upon characteristics of the network or system across which the stream must travel. The characteristics considered include, for example, the following: whether there is a gateway and\/or server on the network to facilitate some of the fancier video streaming types or security requirements; whether the client is on the same LAN as the gateway, meaning that network firewall traversal is not needed.","Streaming methods with the highest priority are peer-to-peer because they scale best with server resources. Universal Plug and Play (UPnP) can be used by the gateway to open ports on the video stream device's LAN router and direct traffic through those ports to the video stream device. This allows a video stream client to talk directly with the video stream device or talk directly with the gateway which can in turn facilitate communication with the video stream device.","Another factor in determining the best video stream format to use is the success of STUN and TURN methods for establishing direct peer-to-peer UDP communication between the stream source device and the stream client. Again, the gateway and the server can help with the setup of this communication.","Client bandwidth availability and processing power are other factors in determining the best streaming methods. For example, due to its bandwidth overhead an encrypted MJPEG stream should not be considered for most mobile phone data networks.","Device bandwidth availability can also be considered in choosing the best video stream format. For example, consideration can be given to whether the upstream bandwidth capabilities of the typical residential DSL support two or more simultaneous MJPEG streams.","Components of the integrated security system of an embodiment, while considering various parameters in selecting a video streaming format to transfer video streams from streaming source devices and requesting client devices, prioritize streaming formats according to these parameters. The parameters considered in selecting a streaming format include, as described above, security requirements, client capabilities, device capabilities, and network\/system capabilities. Components of the integrated security system of an embodiment select a video streaming format according to the following priority, but alternative embodiments can use other priorities.","The selected format is UPnP or peer-to-peer MPEG-4 over RTSP with encryption when both requesting client device and streaming source device support this format.","The selected format is UPnP or peer-to-peer MPEG-4 over RTSP with authentication when the requesting client device does not support encryption or UPnP or peer-to-peer MPEG-4 over RTSP with encryption.","The selected format is UPnP (peer-to-peer) MPEG-4 over HTTPS when both requesting client device and streaming source device support this format.","The selected format is UPnP (peer-to-peer) MPEG-4 over HTTP when the requesting client device does not support encryption or UPnP (peer-to-peer) MPEG-4 over HTTPS.","The selected format is UPnP (peer-to-peer) MPEG-4 over RTSP facilitated by gateway or touchscreen (including or incorporating gateway components) (to provide encryption), when the requesting client device supports encrypted RTSP and the streaming source device supports MPEG-4 over RTSP.","The selected format is UPnP (peer-to-peer) MPEG-4 over HTTPS facilitated by gateway or touchscreen (including or incorporating gateway components) (to provide encryption) when the requesting client device supports MPEG-4 over HTTPS and the streaming source device supports MPEG-4 over HTTP.","The selected format is UPnP (peer-to-peer) MJPEG over HTTPS when the networks and devices can handle the bandwidth and both requesting client device and streaming source device support MJPEG over HTTPS.","The selected format is Reverse RTSP with STUN\/TURN facilitated by the server when the streaming source device initiates SSL\/TLS TCP to server, the streaming source device supports Reverse RTSP over SSL\/TLS with STUN\/TURN, and the requesting client device supports RTSP with STUN\/TURN.","The selected format is Reverse RTSP with STUN\/TURN facilitated by server and gateway or touchscreen (including or incorporating gateway components) when the gateway initiates SSL\/TLS TCP to the server and to the streaming source device, the streaming source device supports RTSP, and the requesting client device supports RTSP with STUN\/TURN.","The selected format is Reverse MPEG over RTSP\/HTTP facilitated by the server when the streaming source device initiates SSL\/TLS TCP to server, the streaming source device supports Reverse RTSP or HTTP over SSL\/TLS, and the requesting client device supports MPEG over RTSP\/HTTP.","The selected format is Reverse MPEG over RTSP\/HTTP facilitated by server and gateway or touchscreen (including or incorporating gateway components) when the gateway initiates SSL\/TLS TCP to server and to streaming source device, the streaming source device supports MPEG over RTSP or HTTP, and the requesting client device supports MPEG over RTSP\/HTTP.","The selected format is UPnP (peer-to-peer) MJPEG over HTTP when the networks and devices can handle the bandwidth and when the requesting client device does not support encryption and does not support MPEG-4.","The selected format is Reverse MJPEG over HTTPS facilitated by the server when the streaming source device initiates SSL\/TLS TCP to server, the streaming source device supports Reverse MJPEG over SSL\/TLS, and the requesting client device supports MJPEG.","The selected format is Reverse MJPEG over HTTPS facilitated by server and gateway or touchscreen (including or incorporating gateway components) when the gateway initiates SSL\/TLS TCP to the server and to the streaming source device, the streaming source device supports MJPEG, and the requesting client device supports MJPEG.",{"@attributes":{"id":"p-0318","num":"0418"},"figref":"FIG. 24"},"Additional detailed description of camera tunnel implementation details follow.","An embodiment uses XMPP for communication with a remote video camera as a lightweight (bandwidth) method for maintaining real-time communication with the remote camera. More specifically, the remote camera is located on another NAT (e.g., NAT traversal).","An embodiment comprises a method for including a remotely located camera in a home automation system. For example, using XMPP via cloud XMPP server to couple or connect camera to home automation system. This can be used with in-car cameras, cell phone cameras, and re-locatable cameras (e.g., dropped in the office, the hotel room, the neighbor's house, etc.).","Components of an embodiment are distributed so that any one can be offline while system continues to function (e.g., panel can be down while camera still up, motion detection from camera, video clip upload etc. continue to work.","Embodiments extend the PSIA in one or more of the following areas: wifi roaming configuration; video relay commands; wifi connectivity test; media tunnel for live video streaming in the context of a security system; motion notification mechanism and configuration (motion heartbeat) (e.g., helps with scalable server); XMPP for lightweight communication (helps with scalable server, reduced bandwidth, for maintaining persistent connection with a gateway); ping request sent over XMPP as health check mechanism; shared secret authentication bootstrapping process; asynchronous error status delivery by the camera for commands invoked by the gateway if the camera is responsible for delivering errors to the gateway in an asynchronous fashion (e.g., gateway requests a firmware update or a video clip upload).","Embodiments extend the home automation system to devices located on separate networks, and make them useable as general-purpose communication devices. These cameras can be placed in the office, vacation home, neighbor house, software can be put onto a cell phone, into a car, navigation system, etc.","Embodiments use a global device registry for enabling a device\/camera to locate the server and home to which it is assigned.","Embodiments include methods for bootstrapping and re-bootstrapping of authentication credentials. The methods include activation key entry by installer into the cloud web interface. Activation key generation is based upon mac address and a shared secret between manufacturer and the service provider. Embodiments of the system allow activation of a camera with valid activation key that is not already provisioned in the global registry server.","Embodiments include a web-based interface for use in activating, configuring, remote firmware update, and re-configuring of a camera.","Embodiments process or locate local wifi access points and provide these as options during camera configuring and re-configuring. Embodiments generate and provide recommendations around choosing a best wifi access point based upon characteristics of the network (e.g., signal strength, error rates, interference, etc.). Embodiments include methods for testing and diagnosing issues with wifi and network access.","Embodiments include cameras able to perform this wifi test using only one physical network interface, an approach that enables the camera to dynamically change this physical interface from wired to wifi. Embodiments are able to change the network settings (wifi etc) remotely using the same process.","Cameras of an embodiment can be configured with multiple network preferences with priority order so that the camera can move between different locations and the camera can automatically find the best network to join (e.g., can have multiple ssid+bssid+password sets configured and prioritized).","Regarding firmware download, embodiments include a mechanism to monitor the status of the firmware update, provide feedback to the end user and improve overall quality of the system.","Embodiments use RTSP over SSL to a cloud media relay server to allow live video NAT traversal to a remote client (e.g., PC, cell phone, etc.) in a secure manner where the camera provides media session authentication credentials to the server. The camera initiates the SSL connection to the cloud and then acts as a RTSP server over this connection.","Embodiments include methods for using NAT traversal for connecting to the cloud for remote management and live video access allows the integrated security components to avoid port forwarding on the local router(s) and as a result maintain a more secure local network and a more secure camera since no ports are required to be open.","Embodiments enable camera sensors (e.g., motion, audio, heat, etc.) to serve as triggers to other actions in the automation system. The capture of video clips or snapshots from the camera is one such action, but the embodiments are not so limited.","A camera of an embodiment can be used by multiple systems.","A detailed description of flows follows relating to the camera tunnel of an embodiment.","A detailed description of camera startup and installation follows as it pertains to the camera tunnel of an embodiment.","Activation Key",{"@attributes":{"id":"p-0338","num":"0000"},"ul":{"@attributes":{"id":"ul0028","list-style":"none"},"li":{"@attributes":{"id":"ul0028-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0029","list-style":"none"},"li":["a. camera to follow same algorithm as ihub where activation key is generated from serial based upon a one-way hash on serial and a per-vendor shared secret.","b. Used com.icontrol.util.ops.activation.ActivationKeyUtil class to validate serialNo<->activationKey.\n\nRegistry Request\n\n[partner]\/registry\/[device type]\/[serial]\n","a. new column in existing registry table for id type; nullable but the application treats null as \u201cgateway\u201d.","b. rest endpoints allow adding with the new optional argument.","c. current serial and siteId uniqueness enforcement by application depends upon device type (for any device type, there should be uniqueness on serial; for gateway device type, there should be uniqueness on siteId; for other device types, there need not be uniqueness on siteId).","d. if no activation yet (e.g., no entry) then send dummy response (random but repeatable reply; may include predictable \u201cdummy\u201d so that steps below can infer.","e. add\/update registry server endpoints for adding\/updating entries.\n\nIf Camera has No Password\n\nCamera retrieves \u201cPending Key\u201d via POST to \/<CredentialGatewayURL>\/GatewayService\/<siteID>\/PendingDeviceKey.\n","a. pending key request (to get password) with serial and activation key.","b. server checks for dummy reply; if dummy then responds with retry backoff response.","c. server invokes pass-through API on gateway to get new pending key.","d. if device is found, then gateway performs validation of serial+activation key, returns error if mismatch.","e. if activation key checks out, then gateway checks pending key status.","f. if device currently has a pending key status, then a new pending password is generated.","g. gateway maintains this authorization information in a new set of variables on the camera device.","h. device-authorization\/session-key comprises the current connected password.","i. device-authorization\/pending-expiry comprises a UTC timestamp representing the time the current pending password period ends; any value less than the current time or blank means the device is not in a pending password state.","j. device-authorization\/pending-session-key comprises the last password returned to the camera in a pending request; this is optional (device may choose to maintain this value in memory).","k. session-key and pending-session-key variables tagged with \u201cencryption\u201d in the device def which causes rest and admin to hide their value from client.\n\nConnectInfo Request\n","a. returns xmpp host and port to connect to (comes from config as it does for gateway connect info).","b. returns connectInfo with additional <xmpp> parameter.\n\nStart Portal Add Camera Wizard\n","a. user enters camera serial, activation key.","b. addDevice rest endpoint on gateway called","c. gateway verifies activation key is correct.","d. gateway calls addDevice method on gapp server to add LWG_SerComm_iCamera_1000 with given serial to site.","e. Server detects the camera type and populates registry.","f. gateway puts device into pending password state (e.g., updates device-auth\/pending-expiry point).","g. rest endpoints on gateway device for managing device pending password state.","h. start pending password state: POST future UTC value to device-auth\/pending-expiry; device-auth\/pending-expiry set to 30 minutes from time device was added.","i. stop pending password state: POST\u22121 to device-auth\/pending-expiry.","j. check pending password state: GET device-auth\/pending-expiry.","k. message returned with \u201cLocation\u201d header pointing to relative URI.","l. user told to power on camera (or reboot if already powered on).","m. once camera connects, gateway updates device-auth\/pending-expiry to \u22121 and device-auth\/session-key with password and device\/connection-status to connected","n. portal polls for device\/connection-status to change to connected; if does not connect after X seconds, bring up error page (camera has not connected\u2014continue waiting or start over).","o. user asked if wifi should be configured for this camera.","p. entry fields for wifi ssid and password.","q. portal can pre-populate ssid and password fields with picklist of any from other cameras on the site.","r. get XML of available SSIDs.","s. non-wifi option is allowed.","t. portal submits options to configure camera (use null values to specify non-wifi); upon success, message is returned with \u201cLocation\u201d header pointing to relative URI.","u. checks configuration progress and extracting \u201cstatus\u201d and \u201csubState\u201d fields.","v. puts device state into \u201cconfiguring\u201d; upon error, puts device state into \u201cconfiguration failure\u201d.","w. performs firmware upgrade if needed, placing device state into \u201cupgrading\u201d; upon error, puts device state into \u201cupgrade failure\u201d.","x. upon configuration success, puts device state of \u201cok\u201d and applies appropriate configuration for camera (e.g., resolutions, users, etc.).","y. if non-blank wifi parameters, automatically perform \u201cwifi test\u201d method to test wifi without disconnecting Ethernet.","z. portal wizard polls device status until changes to \u201cok\u201d or \u201cupgrade failure\/\u201cconfiguration failure\u201d in \u201cstatus\u201d field, along with applicable, if any, with error code reason, in \u201csubState\u201d field; upon error, show details to user, provide options (start over, configure again, reboot, factory reset, etc)","aa. notify user they can move camera to desired location.\n\nCamera Reboots\n","a. gets siteId and server URL from registry.","b. makes pending paid key request to server specifying correct siteId, serial and activation key; gets back pending password.","c. makes connectInfo request to get xmpp server.","d. connects over xmpp with pending password.\n\nIf Camera Reboots Again\n","a. get siteId and server URL from registry.","b. already has password (may or may not be pending) so no need to perform pending paid key request.","c. make connectInfo request to get xmpp server.","d. connect over xmpp with password.\n\nXmpp Connect with Password\n","a. xmpp user is of the form [serial]@[server]\/[siteId]","b. session server performs authentication by making passthrough API request to gateway for given SiteId.","c. Session xmpp server authenticates new session using DeviceKey received in GET request against received xmpp client credential.","d. If authentication fails or GET receives non-response, server returns to camera XMPP connect retry backoff with long backoff.","e. gateway device performs password management.","f. compares password with current key and pending key (if not expired); if matches pending, then update device-auth\/session-key to be pending value, and clear out the device-auth\/pending-expiry.","g. gateway device updates the device\/connection-status point to reflect that camera is connected.","h. gateway device tracks the xmpp session server this camera is connected to via new point device\/proxy-host and updates this info if changed.","i. if deviceConnected returns message, then session server posts connected event containing xmpp user to queue monitored by all session servers.","j. session servers monitor these events and disconnect\/cleanup sessions they have for same user.","k. may use new API endpoint on session server for broadcast messages.\n\nXmpp Connect with Bad Password\n","a. Upon receiving a new connection request, session server performs authentication by making passthrough API request to gateway for given SiteId.","b. Session xmpp server authenticates new session using DeviceKey received in above GET request against received xmpp client credential.","c. If authentication fails or GET receives non-response from virtual gateway.","d. Session server rejects incoming connection (is there a backoff\/retry XMPP response that can be sent here).","e. Session server logs event.","f. Gateway logs event.\n\nXmpp Disconnect\n","a. session server posts disconnected event to gateway (with session server name).","b. gateway updates the device\/connected variable\/point to reflect that camera is disconnected.","c. gateway updates the device\/connection-status variable\/point to reflect that camera is disconnected.","d. gateway clears the device\/proxy-host point that contains the session host to this camera is connected.\n\nLWGW Shutdown\n","a. During LWGW shutdown, gateway can broadcast messages to all XMPP servers to ensure all active XMPP sessions are gracefully shutdown.","b. gateways use REST client to call URI, which will broadcast to all XMPP servers.\n\nTo Configure Camera During Installation\n","a. applies all appropriate configuration for camera (e.g., resolutions, users, etc).","b. returns message for configuration applied, wifi test passed, all settings taken. returns other response code with error code description upon any failure.\n\nTo Reconfigure Wifi SSID and Key\n","a. returns message for wifi credentials set.","b. returns other response code with error code description upon any failure.\n\nAPI Pass-Through Handling for Gateway Fail-Over Case\n","a. When performing passthrough for LWGW, the API endpoint handles the LWGW failover case (e.g., when gateway is not currently running on any session server).","b. passthrough functions in the following way: current session server IP is maintained on the gateway object; server looks up gateway object to get session IP and then sends passthrough request to that session server; if that request returns gateway not found message, server error message, or a network level error (e.g., cannot route to host, etc.), if the gateway is a LWGW then server should lookup the primary\/secondary LW Gateway group for this site; server should then send resume message to primary, followed by rest request; if that fails, then server send resume message to secondary followed by rest request","c. alternatively, passthrough functions in the following way: rather than lookup session server IP on gateway object, passthrough requests should be posted to a passthrough queue that is monitored by all session servers; the session server with the Gateway on it should consume the message (and pass it to the appropriate gateway); the server should monitor for expiry of these messages, and if the gateway is a LWGW then server should lookup the primary\/secondary LW Gateway group for this site; server should then send resume message to primary, followed by rest request; if that fails, then server send resume message to secondary followed by rest request."]}}}},"A detailed description follows for additional flows relating to the camera tunnel of an embodiment.","Motion Detection",{"@attributes":{"id":"p-0340","num":"0000"},"ul":{"@attributes":{"id":"ul0030","list-style":"none"},"li":{"@attributes":{"id":"ul0030-0001","num":"0000"},"ul":{"@attributes":{"id":"ul0031","list-style":"none"},"li":["a. camera sends openhome motion event to session server via xmpp.","b. session server posts motion event to gateway via passthrough API.","c. gateway updates the camera motion variable\/point to reflect the event gateway updates the camera motion variable\/point to reflect the event\n\nCapture Snapshot\n","a. gateway posts openhome snapshot command to session server with camera connected.","b. gateway sends command including xmpp user id to xmpp command Queue monitored by all session servers.","c. session server with given xmpp user id consumes command and sends command to camera (command contains upload URL on gw webapp).","d. gateway starts internal timer to check if a response is received from camera (e.g., 5 sec wait window).","e. if broadcast RabbitMQ not ready, then gateway will use device\/proxy-host value to know which session server to post command to.","f. session server sends command to camera (comprises upload URL on gw webapp)","g. Example XML body:\n        \n        ","h. session server receives response to sendRequestEvent from camera and posts response to gateway.","i. camera uploads to upload URL on gw webapp.","j. passCheck can be verified on server (based upon gateway secret); alternatively, the OpenHome spec calls for Digest Auth here.","k. endpoint responds with message digest password if the URI is expected, otherwise returns non-response.","l. gw webapp stores snapshot, logs history event.","m. event is posted to gateway for deltas.\n\nCapture Clip\n","a. gateway posts openhome video clip capture command to session server with camera connected.","b. gateway sends command including xmpp user id to xmpp command Queue monitored by all session servers.","c. session server with given xmpp user id consumes command and sends command to camera (command comprises upload URL on gw webapp).","d. gateway starts internal timer to check if a response is received from camera (e.g., 5 sec wait window).","e. session server sends command to camera (comprises upload URL on gw webapp).","f. Example URI from session server to camera:\n        \n        ","g. Example XML body:\n        \n        ","h. session server receives response to sendRequestEvent from camera and posts response to gateway.","i. camera uploads to upload URL on gw webapp.","j. passCheck can be verified on server (based upon gateway secret).","k. alternatively, spec calls for Digest Auth here.","l. endpoint responds with message digest password if the URI is expected, otherwise returns non-response.","m. gw webapp stores video clip, logs history event.","n. event is posted to gateway for deltas.\n\nLive Video (Relay)\n","a. Upon user login to portal, portal creates a media relay tunnel by calling relayAPImanager create.","b. RelayAPImanager creates relays and sends ip-config-relay variable (which instructs gateway to create media tunnel) to gateway.","c. Upon receiving media tunnel create ip-config-relay command, gateway posts openhome media channel create command to session server with camera connected.","d. session server sends create media tunnel command to camera (comprises camera relay URL on relay server).","e. Example URI from session server to camera:\n        \n        ","f. Example XML body:\n        \n        ","g. GatewayURL is created from relay server, port, and sessionId info included within ip-config-relay variable.","h. camera creates a TLS tunnel to relay server via POST to <gatewayURL>.","i. When user initiates live video, portal determines user is remote and retrieves URL of Relay server from relayAPImanager.","j. Upon receiving a user pole connection on the relay server (along with valid rtsp request), relay sends streaming command to camera: example: rtsp::\/\/openhome\/streaming\/channels\/1\/rtsp","k. Upon user portal logout, portals calls relayAPImanager to terminate media tunnel.","l. RelayAPImanager send ip-config-relay variable to terminate media tunnel.","m. Gateway sends destroy media tunnel command to camera via XMPP.\n\nCamera Firmware Update\n","a. Gateway checks camera firmware version; if below minimum version, gateway sends command to camera (via session server) to upgrade firmware (command: \/openhome\/system\/updatefirmware).","b. Gateway checks firmware update status by polling: \/openhome\/system\/updatefirmware\/status.","c. Gateway informs portal of upgrade status.","d. Camera auto-reboots after firmware update and reconnects to Session server.\n\nCamera First-Contact Configuration\n","a. After a camera is added successfully and is connected to the session server for the first time, gateway performs first contact configuration as follows.","b. Check firmware version.","c. Configure settings by: download config file using \/openhome\/system\/configurationData\/configFile; or configure each category individually (configure video input channel settings\u2014\/openhome\/system\/video\/inputs\/channels; onfigure audio input channel settings (if any)\u2014\/openhome\/system\/audio\/inputs\/channels; configure video streaming channel settings\u2014\/openhome\/streaming\/channels; configure motion detection settings\u2014example: PUT\/openhome\/custom\/motiondetection\/pir\/0; configure event trigger settings\u2014example: PUT\/openhome\/custom\/event).","d. Reboot camera (\/openhome\/system\/factoryreset) if camera responds with reboot required."]}}}},"Embodiments of the integrated system described herein include the use of security system data to gather fine-grained behavioral patterns and indicators relating to user occupancy or general daily disposition of a property. Under an embodiment, home automation and security systems may be leveraged to gather data from a plurality of in home (or on premises) sensors and detectors. Each sensor or detector may serve as a proxy for risk indicators. As just one example, frequent triggering of smoke detectors may indicate occupants who smoke or may indicate improper use of a fireplace. The smoke alarm data may be interpreted to assign a higher risk of fire to a property.","Home automation and security system data may under an embodiment be used to generate a risk profile or score analogous to a credit score. The risk profile or score would apply to a residence or a property. Unlike a credit score, this risk score may be associated with a physical location. This score could be sold like a credit score to third parties interested in assessing the risk profile of a physical address, be it a single family home, multi-dwelling unit, store front, business, or commercial and\/or government building.","A score associated with a location may reveal risk not evident in usage data associated with an individual. For example, a single individual may own two different properties (an Austin main residence and a lake house) for differing purposes that may lead to differing risks of property damage at each location. Under an embodiment, home automation and home security systems are installed at both properties. Using an algorithm or some combination of data derived from those systems, a score is associated with both the Austin main residence and the lake house outside of Austin. A combination or interpretation of the data may generate a score or indicator showing that the Austin home is continually occupied except when the owner or owner's family is on holiday, whereas the lake home is frequently vacant except when the owner occasionally visits or a neighbor drops off mail at the lake house. Presumably, the profile of those two households\u2014for home owners or renters insurance risk assessment and marketing, mortgage risk, compliance with home owner association provisions, or other purposes\u2014is quite different and knowledge of such would be valuable to firms pricing and marketing such products or enforcing covenants.","Recurrence or presence of particular on-premise activity may indicate or suggest higher or lower prevalence of risk of damage to a property. Under another embodiment, the way an individual lives or behaves in a residence may be reflected in a score or risk profile and may also correlate to other behaviors which might be of interest to third parties. Sources of this particular score may under an embodiment be time based occupancy data from motion detection and frequency of door or window openings; smoke, CO and water detection frequency; percent a home is armed away\/stay\/night; the presence of surveillance cameras, monitored thermostats; abnormal swings or extreme temperatures inside; light and HVAC usage as an indicator of energy usage; and other such data. All this data is generated by home automation and alarm systems and could be aggregated into the cloud to generate such a score similar to the way credit agencies aggregate disparate information to generate a credit score sold to a variety of interested third parties. The credit score may under an embodiment assign a risk of damage at a particular property location.","Under an embodiment, gathering the home automation and\/or security data from a home or business may provide a rich data bank for subsequent or real time analysis. As one example, data analysis methods and algorithms may use data bank data as inputs to generate a profile score assigning risk of damage to a property. Some examples of inputs to the algorithm or data analysis methods include:\n\n","As indicated above, the risk score discussed herein may be tied to a physical location. However, a risk profile may also be associated with an individual's property ownership tendencies. As one example, an individual may own multiple properties. The home automation and security data gathered at each location may indicate persistent behaviors at each location that increase risk to property. For example, an owner may repeatedly fail to arm existing and available security systems at each location as evidenced by alarm system data. As another example, an owner may repeatedly fail to pay utilities as evidenced by frequent detection of power outages and termination of network connectivity. Disruption of utility services may interfere with or impede operation and reliability of safety systems. As another example, frequent water disruptions at cold weather locations as evidence by water meter data may indicate failure to insulate pipes indicating a track record or poor maintenance. In other words, a collection of home alarm and automation data may indicate that an individual's ownership, use and disposition of property itself introduces unnecessary risk of property damage to that individual's properties.","Under yet another embodiment, home automation and security system data may be used to underwrite an individual with respect to personal property. As indicated above, home automation and security data may reveal that an owner may repeatedly fail to arm existing and available security systems, pay utilities or perform upkeep maintenance with respect to real property. These behaviors may correlate with an individual's tendencies with respect to personal property. For example, data analysis may translate into a score rating an individual's ability to maintain personal property under an embodiment. This personal property score may under an embodiment augment existing data with respect to an individual's use of personal property. As one example, an individual's personal property score or risk profile may be combined with driving habits to indicate heightened risk of damage to that individual's automobile."],"BRFSUM":[{},{}],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0034","num":"0033"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0035","num":"0034"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0036","num":"0035"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0037","num":"0036"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0038","num":"0037"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0039","num":"0038"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0040","num":"0039"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0041","num":"0040"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0042","num":"0041"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0043","num":"0042"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0044","num":"0043"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0045","num":"0044"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0046","num":"0045"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0047","num":"0046"},"figref":"FIG. 14"},{"@attributes":{"id":"p-0048","num":"0047"},"figref":"FIG. 15"},{"@attributes":{"id":"p-0049","num":"0048"},"figref":"FIG. 16"},{"@attributes":{"id":"p-0050","num":"0049"},"figref":"FIG. 17"},{"@attributes":{"id":"p-0051","num":"0050"},"figref":"FIG. 18"},{"@attributes":{"id":"p-0052","num":"0051"},"figref":"FIG. 19"},{"@attributes":{"id":"p-0053","num":"0052"},"figref":"FIG. 20"},{"@attributes":{"id":"p-0054","num":"0053"},"figref":"FIG. 21"},{"@attributes":{"id":"p-0055","num":"0054"},"figref":"FIG. 22"},{"@attributes":{"id":"p-0056","num":"0055"},"figref":"FIG. 23"},{"@attributes":{"id":"p-0057","num":"0056"},"figref":"FIG. 24"}]},"DETDESC":[{},{}]}
