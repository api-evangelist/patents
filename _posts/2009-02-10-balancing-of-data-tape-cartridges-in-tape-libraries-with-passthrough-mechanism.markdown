---
title: Balancing of data tape cartridges in tape libraries with pass-through mechanism
abstract: A computer-implemented method for balancing data tape cartridge utilization in an automated tape library system identifies a current number of data tape cartridge mounts per library string and identifies a target number mounts per the library string to identify a difference between the target number and the current number as a delta number of data tape cartridges to move. The number of data tape cartridge mounts per data tape cartridge per library string is identified and a data tape cartridge to move is selected by identifying a unique identifier of the data tape cartridge with the highest number of mounts, and having a lowest number of moves, to form a selected data tape cartridge, and creates a move request for the selected data tape cartridge. The move request is sent to the automated tape library for execution, and a move counter for each data tape cartridge moved is incremented.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=07672754&OS=07672754&RS=07672754
owner: International Business Machines Corporation
number: 07672754
owner_city: Armonk
owner_country: US
publication_date: 20090210
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND OF THE INVENTION","BRIEF SUMMARY OF THE INVENTION","DETAILED DESCRIPTION OF THE INVENTION"],"p":["1. Field of the Invention","The present invention relates generally to data processing systems and, more specifically, to a computer-implemented method for the balancing of data tape cartridge utilization in automated tape libraries with pass-through mechanisms.","2. Description of the Related Art","With the continuously growing amount of information and new regulations for data archiving, more and more data needs to be managed and stored as back up. Typically, tape storage is still the most used backup medium for larger volume of data. With the current focus towards \u201cgreen information technology,\u201d tape as backup medium may become even more important in the future. Capacity and environmental aspects, together with the excellent disaster recovery attributes of tape storage (such as placing data on tape cartridges in offsite vaults), will typically preserve the importance of data stored on tape media relative to other media.","In enterprise data centers, automated tape libraries are commonly used to provide a backup capability for data. Automated tape library systems are generally available from a number of vendors. The automated tape libraries can house hundreds of tape drives and thousands of data tape cartridges. In some cases, automated tape libraries, or so-called tape silos, include a \u201cpass-through mechanism.\u201d For example, the entire library consists of multiple library strings, or tape silos, that are connected to each other via a mechanism that allows traversal of tape cartridges from one tape library string to another tape library string. Each library string, or tape silo, has an inventory of cartridges and tape drives. The inventory of tape cartridges and tape drives differs between the different library strings and tape silos. Cartridges may be one of two types. A first type is a \u201cscratch\u201d type, or empty cartridge. The second type is a \u201cdata\/private\u201d type in which the tape cartridge contains valid data. Scratch cartridges are typically used for new backups.","During backup or restore operations from tape cartridges, a situation can occur over time in which in one library string, or tape silo, all of the drives are statistically used more frequently than drives in another library string, or tape silo. In an extreme case, mount requests cannot be executed because all drives in the library string are busy at the same time. In such cases, the backup server has to wait until one drive becomes free. Such an event typically implies an impact on the backup application, and therefore, users of the library because the backup operation may not complete in time.","Solutions have been provided to move tape cartridges between library strings in the situation when no drive is available for a mount in the current string. The movement of the tape cartridges, however, occurs at the time when the backup operation started, which causes a delay in the backup operation.","According to one embodiment of the present invention, a computer-implemented method for balancing data tape cartridge utilization in an automated tape library system, obtains a current number of data tape cartridge mounts per library string in the automated tape library system to form a total number of mounts per library string, and identifies a target number of data tape cartridge mounts per library string as equal to the number of drives per library string multiplied by the number of total mounts in the automated tape library system and divided by the total number of drives in the automated tape library system to form the target number of data tape cartridge mounts per library string. The computer-implemented method identifies a delta number of data tape cartridges to move, as a difference between the total number of mounts per library string and the target number of data tape cartridge mounts per library string, identifies a number of data tape cartridge mounts per data tape cartridge per library string to form the number of tape data cartridge mounts per data tape cartridge, and identifies a unique identifier of each move candidate, wherein a move candidate is a tape data cartridge in a tape library string having a delta number greater than zero. The computer-implemented method further determines whether the unique identifier of the each move candidate is not in a same library string, and responsive to a determination that the each move candidate is not in the same library string, identifies a set of unique identifiers of data tape cartridges according to the number of data tape cartridge mounts per data tape cartridge, to form a set of highest mount unique identifiers and selects a set of data tape cartridges to move, wherein each data tape cartridge in the set of data tape cartridges to move is selected from the set of highest mount unique identifiers having a lowest number of moves, to form the selected set of data tape cartridges. The computer-implemented method further creates a move request for the selected set of data tape cartridges to form a created move request, sends the created move request to the automated tape library system for execution, and incrementing a move counter for each data tape cartridge moved.","As will be appreciated by one skilled in the art, the present invention may be embodied as a system, method, or computer program product. Accordingly, the present invention may take the form of an entirely hardware embodiment, an entirely software embodiment (including firmware, resident software, micro-code, etc.), or an embodiment combining software and hardware aspects that may all generally be referred to herein as a \u201ccircuit,\u201d \u201cmodule\u201d or \u201csystem.\u201d Furthermore, the present invention may take the form of a computer program product embodied in any tangible medium of expression having computer-usable program code embodied in the medium.","Any combination of one or more computer-usable or computer-readable medium(s) may be utilized. The computer-usable or computer-readable medium may be, for example but not limited to, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, device, or propagation medium. More specific examples (a non-exhaustive list) of the computer-readable medium would include the following: an electrical connection having one or more wires, a portable computer diskette, a hard disk, a random access memory (RAM), a read-only memory (ROM), an erasable programmable read-only memory (EPROM or Flash memory), an optical fiber, a portable compact disc read-only memory (CDROM), an optical storage device, a transmission media such as those supporting the Internet or an intranet, or a magnetic storage device. Note that the computer-usable or computer-readable medium could even be paper or another suitable medium upon which the program is printed, as the program can be electronically captured, via, for instance, optical scanning of the paper or other medium, then compiled, interpreted, or otherwise processed in a suitable manner, if necessary, and then stored in a computer memory. In the context of this document, a computer-usable or computer-readable medium may be any medium that can contain, store, communicate, propagate, or transport the program for use by, or in connection with, the instruction execution system, apparatus, or device. The computer-usable medium may include a propagated data signal with the computer-usable program code embodied therewith, either in baseband or as part of a carrier wave. The computer-usable program code may be transmitted using any appropriate medium, including but not limited to wireless, wire line, optical fiber cable, RF, etc.","Computer program code for carrying out operations of the present invention may be written in any combination of one or more programming languages, including an object-oriented programming language such as Java, Smalltalk, C++ or the like, and conventional procedural programming languages, such as the \u201cC\u201d programming language or similar programming languages. The program code may execute entirely on the user's computer, partly on the user's computer, as a stand-alone software package, partly on the user's computer and partly on a remote computer, or entirely on the remote computer or server. In the latter scenario, the remote computer may be connected to the user's computer through any type of network, including a local area network (LAN) or a wide area network (WAN), or the connection may be made to an external computer (for example, through the Internet using an Internet Service Provider).","The present invention is described below with reference to flowchart illustrations and\/or block diagrams of methods, apparatus (systems) and computer program products, according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and\/or block diagrams, and combinations of blocks in the flowchart illustrations and\/or block diagrams, can be implemented by computer program instructions.","These computer program instructions may be provided to a processor of a general purpose computer, special purpose computer, or other programmable data processing apparatus, to produce a machine, such that the instructions, which execute via the processor of the computer, or other programmable data processing apparatus, create means for implementing the functions\/acts specified in the flowchart and\/or block diagram block or blocks. These computer program instructions may also be stored in a computer-readable medium that can direct a computer, or other programmable data processing apparatus, to function in a particular manner, such that the instructions stored in the computer-readable medium produce an article of manufacture, including instruction means which implement the function\/act specified in the flowchart and\/or block diagram block or blocks.","The computer program instructions may also be loaded onto a computer, or other programmable data processing apparatus, to cause a series of operational steps to be performed on the computer, or other programmable apparatus, to produce a computer-implemented process such that the instructions which execute on the computer, or other programmable apparatus, provide processes for implementing the functions\/acts specified in the flowchart and\/or block diagram block or blocks.","With reference now to the figures, and in particular with reference to , exemplary diagrams of data processing environments are provided in which illustrative embodiments may be implemented. It should be appreciated that  is only exemplary and is not intended to assert or imply any limitation with regard to the environments in which different embodiments may be implemented. Many modifications to the depicted environments may be made.","With reference to , a block diagram of components of system  for balancing data tape cartridge utilization is presented, in accordance with illustrative embodiments. The components of system  may be implemented within or as extensions to system  of . System  is typically implemented as a combination of hardware and software. Components of placement module , tape statistics  and placement rules  combine to form a placement optimization system  capability within system .","For example, placement module  may be implemented as a tape library service in the form of hardware, software or hardware and software to control the selection and movement of tape data tape cartridges. Placement module  interacts with the devices of tape library  by way of an interface typically provided for managing the tape library. Placement module  typically uses a set of commands to direct the tape library to moves specific tape data tape cartridges to a selected location.","Placement module  determines which tape data tape cartridges to relocate based on information captured and maintained in tape statistics . Tape statistics , typically implemented as a combination of hardware and software, stores utilization information generated by tape library . Tape statistics  includes information regarding the number of tape cartridge mounts by device (tape drive) and by string, as well as other utilization statistics representative of the tape library. Utilization information for a specific data tape cartridge is tracked by a unique identifier the data tape cartridge that is typically the volume serial number or \u201cvolser.\u201d","Placement rules , typically implemented as a set of software logic, but may also be a composition of hardware and software or hardware, provides a capability to flexibly determine an action based on an event occurring in the tape library. An event is typically one of a mount request, a mount, a dismount, a cartridge transfer and other cartridge utilization or cartridge inventory associated information. Placement rules  is used by placement module  with data from tape statistics  to select tape cartridges to relocate within tape library . For example, a rule may have a defined condition, such as \u201cwhen the number of mounts for a data tape cartridge is greater than a specified threshold,\u201d and a corresponding action such as \u201cidentify the volser as a candidate for a move.\u201d","With reference to , a block diagram of a tape library system with a pass-through mechanism is presented in accordance with illustrative embodiments. Tape library system  is an example of a tape library system using tape library , with placement module , tape statistics  and placement rules  of placement optimization system  of  while providing more detail of tape library . Placement optimization system  is connected to tape library strings ,  and  represented as tape library  in . Components of placement module , tape statistics  and placement rules  forming placement optimization system  as illustrated, provides an example of how software and hardware may be packaged to provide placement optimization system  of .","Tape library system  includes a pass-through mechanism, such as pass through mechanism , and tape data tape cartridge balancing by placement optimization system . Placement optimization system  is connected to a network, such as network . Additional connections are provided to backup servers , and  and all tape library strings ,  and  pertaining to a single library image of tape library . Each tape library string has its own identifier which might be a unique serial number. Placement optimization system  communicates with the backup application on backup servers , and  through network  to identify the number of tape data tape cartridges per library.","The communication between the backup servers  and  and the tape library strings ,  and  can for example, be based on application programming interfaces currently used, such as Internet small computer system interface or vendor-specific protocols. The communication can also take place via a separate management network which is not shown. Placement optimization system  also communicates to each library string ,  and  via network  to instruct tape library  to move a tape data tape cartridge from one library string to another library string via pass-through mechanisms , , and . The communication can, for example, be based on the small computer system interface command set using a SCSI MOVE MEDIUM command. Placement optimization system  may further maintain a data structure to contain statistical data used in the tape data tape cartridge utilization balancing process.","The different library strings each have an identifier, as in ,  and . Associated with each string is inventory of tape drives such as drives ,  and , and tape cartridges , , and . Further, each string has a control component managing pass-through operations, such as controllers ,  and . A pass-through management component, such as controller , can also be used to instruct one library string, such as library string , to move a tape data tape cartridge to library string . The various library strings are connected via pass-through mechanisms , , and  that allow tape data tape cartridges to be moved between library strings. The pass-through mechanism might be an exchanger which transports the tape cartridges from one library string to another library string through an opening in both library strings.","The library image of tape library  is accessed by a plurality of backup servers , and  which are connected through network . Each backup server hosts a backup application with a capability to write data to tapes housed in tape library strings ,  and , and also reads data from the same tapes. Network  may typically be a storage network implementing various standards based or proprietary network protocols as needed for connectivity and device support.","Using the example of system  of , placement optimization system  may be implemented on an administration client connected to backup servers such as backup server  and  and library strings with pass-through mechanism pertaining to a library image, such as tape library , through a network, such as network . Placement module  of placement optimization system  determines the number of data tape cartridge mounts for each library string within a given time period and calculates an optimal number of mounts for each library string and stores these numbers in the tape statistics  of system  of . Subsequently, the placement module identifies a set of data tape cartridges to be moved based on a predefined number of mounts per data tape cartridge within a given time period and a predefined number of moves of the data tape cartridge during the lifecycle. The placement module further instructs the library string to move selected data tape cartridges to another library string utilizing the pass-through mechanism, and updates the move counter for the data tape cartridges which have been moved. The process of the placement optimization system provides a capability to distribute data tape cartridges across library strings to achieve a balanced number of mounts for each library string in the library image.","The placement optimization system typically includes a data structure, such as a table of values, in which is calculated an optimum number of mounts and the number of data tape cartridges to be moved. The data structure may further comprise a table which is used to select data tape cartridges identified by a unique identifier of a volume\/serial number (volser) and library string identifier, which are candidates for movement based on the data tape cartridges having a combination of the most number of mounts and least number of moves. These data structures are stored in the tape statistics  of system  of .","Movement is triggered for cartridges proactively, prior to an operation requesting the tape cartridge, based on predetermined rules and policies which are stored in placement rules  of  and which are explained later. Proactive movement attempts to prevent problems related to inefficient tape resources placement that may cause performance degradation before a mount request is received by a backup application.","With reference now to , a block diagram of a data processing system is shown, in which illustrative embodiments may be implemented. Data processing system  is an example of a computer, such as that used in placement optimization system  of system  of , in which computer-usable program code or instructions implementing the processes may be located for the illustrative embodiments. In this illustrative example, data processing system  includes communications fabric , which provides communications between processor unit , memory , persistent storage , communications unit , input\/output (I\/O) unit , and display .","Processor unit  serves to execute instructions for software, such as the instructions of placement module  and placement rules  that may be loaded into memory . Processor unit  may be a set of one or more processors or may be a multi-processor core, depending on the particular implementation. Further, processor unit  may be implemented using one or more heterogeneous processor systems in which a main processor is present with secondary processors on a single chip. As another illustrative example, processor unit  may be a symmetric multi-processor system containing multiple processors of the same type.","Memory  and persistent storage  are examples of storage devices. A storage device is any piece of hardware that is capable of storing information, either on a temporary basis and\/or a permanent basis. Memory , in these examples, may be, for example, a random access memory or any other suitable volatile or non-volatile storage device. Persistent storage  may take various forms, depending on the particular implementation. For example, persistent storage  may contain one or more components or devices. For example, persistent storage  may be a hard drive, a flash memory, a rewritable optical disk, a rewritable magnetic tape, or some combination of the above. The media used by persistent storage  also may be removable. For example, a removable hard drive may be used for persistent storage . Persistent storage  provides a capability to store data gathered as tape statistics  or placement rules , of , for processing.","Communications unit , in these examples, provides for communications with other data processing systems or devices. In these examples, communications unit  is a network interface card. Communications unit  may provide communications through the use of either or both physical and wireless communications links.","Input\/output unit  allows for input and output of data with other devices that may be connected to data processing system . For example, input\/output unit  may provide a connection for user input through a keyboard and mouse. Further, input\/output unit  may send output to a printer. Display  provides a mechanism to display information to a user.","Instructions for the operating system and applications or programs are located on persistent storage . These instructions may be loaded into memory  for execution by processor unit . The processes of the different embodiments may be performed by processor unit  using computer-implemented instructions, which may be located in a memory, such as memory . These instructions are referred to as program code, computer-usable program code, or computer-readable program code that may be read and executed by a processor in processor unit . The program code in the different embodiments may be embodied on different physical or tangible computer-readable media, such as memory  or persistent storage .","Program code  is located in a functional form on computer-readable media  that is selectively removable and may be loaded onto or transferred to data processing system  for execution by processor unit . Program code  and computer-readable media  form computer program product  in these examples. In one example, computer-readable media  may be in a tangible form, for example, an optical or magnetic disc that is inserted or placed into a drive or other device that is part of persistent storage  for transfer onto a storage device, such as a hard drive that is part of persistent storage . In a tangible form, computer-readable media  also may take the form of a persistent storage, such as a hard drive, a thumb drive, or a flash memory that is connected to data processing system . The tangible form of computer-readable media  is also referred to as computer-recordable storage media. In some instances, computer-readable media  may not be removable.","Alternatively, program code  may be transferred to data processing system  from computer-readable media  through a communications link to communications unit  and\/or through a connection to input\/output unit . The communications link and\/or the connection may be physical or wireless in the illustrative examples. The computer-readable media also may take the form of non-tangible media, such as communications links or wireless transmissions containing the program code.","In other illustrative embodiments, program code  may be downloaded over a network to persistent storage  from another device or data processing system for use within data processing system . For instance, program code stored in a computer-readable storage medium in a server data processing system may be downloaded over a network from the server to data processing system . The data processing system providing program code  may be a server computer, a client computer, or some other device capable of storing and transmitting program code . Program code  provides an embodiment of the components of placement module , and placement rules  of .","The different components illustrated for data processing system  are not meant to provide architectural limitations to the manner in which different embodiments may be implemented. The different illustrative embodiments may be implemented in a data processing system including components in addition to, or in place of, those illustrated for data processing system . Other components shown in  can be varied from the illustrative examples shown.","The different embodiments may be implemented using any hardware device or system capable of executing program code. As one example, the data processing system may include inorganic components integrated with organic components and\/or may be comprised entirely of organic components excluding a human being. For example, a storage device may be comprised of an organic semiconductor.","As another example, a storage device in data processing system  is any hardware apparatus that may store data. Memory , persistent storage , and computer-readable media  are examples of storage devices in a tangible form.","In another example, a bus system may be used to implement communications fabric  and may be comprised of one or more buses, such as a system bus or an input\/output bus. Of course, the bus system may be implemented using any suitable type of architecture that provides for a transfer of data between different components or devices attached to the bus system. Additionally, a communications unit may include one or more devices used to transmit and receive data, such as a modem or a network adapter. Further, a memory may be, for example, memory  or a cache such as found in an interface and memory controller hub that may be present in communications fabric .","With reference to Table I, a tabular representation of a data structure for maintaining data tape cartridge inventory and movement trigger data, for automated tape library system  of , is presented in accordance with illustrative embodiments. The data structure of Table I is depicted as an exemplary tabular structure but is not limited to the specific embodiment shown.",{"@attributes":{"id":"p-0047","num":"0046"},"tables":{"@attributes":{"id":"TABLE-US-00001","num":"00001"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"63pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"42pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE I"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]},{"entry":[{},"Library String","Current Mounts","Target Mounts","Delta"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"A","300","200","\u2212100"]},{"entry":[{},"B","200","100","\u2212100"]},{"entry":[{},"C","800","1000\u2002","+200"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}}}},"The table illustrates a private or data tape inventory and movement trigger, arranged by tape library string. Table I is an example of collected data that is stored in tape statistics  of placement optimization system  of system  of . The data in this table is collected by placement module  which communicates with tape library  of  via network  of . For example, the library string column has a row containing a unique identifier for each tape library string capable of participating in a data tape movement. In this example, the library string column depicts library string A, library string B and library string C. Each library string has a unique identifier within the library.","The current mounts column shows the number of current tape cartridge mounts for each tape library string. Placement module  obtains the number of mounts from the backup server through network  of . Since there might be multiple backup servers storing data on tapes in one library string, the number of mounts in the current mounts column is typically the sum of all tape mounts in this library string for all backup servers. The current mounts column shows 300 tape mounts for library A, 200 tape mounts for library B, and 800 tape mounts for library C.","The target mounts column represents the target mount count for each library string, in this example, 200 per tape library string A, 100 mounts for library string B and 1000 mounts for library string C. The target mount count per string is stated as (#TargetMounts\/LibString<n>) and is calculated by placement module , of , using an equation shown in Table II. Placement optimization system  communicates to one or more library strings ,  and  by network , all of , to determine the total number of drives per library string expressed as (#Drives\/LibString<n>) and the total number of drives for the library image, expressed as (#TotalDrives). The total number of target tape mounts is derived from the target mounts column.","The delta column shows a delta or mathematical difference between the target match counts column and the actual or current mounts column. A difference greater than zero typically indicates a requirement for balancing. In this example, the delta column shows rows values of minus 100, minus 100 and a plus 200. Tape library strings A and B are over target while tape library string C is under target. The result is used to move data tape cartridges into and out of the tape library. Placement module  of , periodically updates values in the data structure shown in Table I by determining the current mounts count per library string and the target mounts count.","Table II is a textual representation of an equation for calculating tape data tape cartridge optimization using placement module  of , in accordance with illustrative embodiments. Placement optimization system  of  is an example of a combination of hardware and software providing a capability of placement optimization system  of  that determines optimized data tape cartridge utilization in an automated tape library system.",{"@attributes":{"id":"p-0053","num":"0052"},"tables":{"@attributes":{"id":"TABLE-US-00002","num":"00002"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"2"},"colspec":[{"@attributes":{"colname":"1","colwidth":"203pt","align":"left"}},{"@attributes":{"colname":"2","colwidth":"14pt","align":"right"}}],"thead":{"row":[{"entry":"TABLE II"},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{"maths":{"@attributes":{"id":"MATH-US-00001","num":"00001"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mfrac":[{"mrow":[{"mi":"#","mo":["\u2062","\u2062","\u2062"],"mrow":[{"mi":["TargetMounts","LibString"],"mo":"\/"},{"mo":["\u2329","\u232a"],"mi":"n"}],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mi":"#","mo":["\u2062","\u2062","\u2062"],"mrow":[{"mi":["Drives","LibString"],"mo":"\/"},{"mo":["\u2329","\u232a"],"mi":"n"}],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}}]},{"mrow":[{"mi":["#","TotalMounts"],"mo":"\u2062"},{"mi":["#","TotalDrives"],"mo":"\u2062"}]}],"mo":"="}}}},"(A)"]},{"entry":{}},{"entry":[{"maths":{"@attributes":{"id":"MATH-US-00002","num":"00002"},"math":{"@attributes":{"overflow":"scroll"},"mrow":{"mrow":[{"mrow":[{"mi":["TargetMounts","LibString"],"mo":"\/"},{"mo":["\u2329","\u232a"],"mi":"n"}],"mo":["\u2062","\u2062"],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}}},{"mi":"#","mo":["\u2062","\u2062","\u2062","*"],"mrow":[{"mi":["Drives","LibString"],"mo":"\/"},{"mo":["\u2329","\u232a"],"mi":"n"}],"mstyle":{"mspace":{"@attributes":{"width":"0.8em","height":"0.8ex"}}},"mfrac":{"mrow":[{"mi":["#","TotalMounts"],"mo":"\u2062"},{"mi":["#","TotalDrives"],"mo":"\u2062"}]}}],"mo":"="}}}},"(B)"]},{"entry":{"@attributes":{"namest":"1","nameend":"2","align":"center","rowsep":"1"}}}]}}}}},"A basic goal is to continuously or periodically monitor the inventory of data tape cartridges and proactively optimize the placement of the data tape cartridges in the automated tape libraries with a pass-through mechanism. The pass-through mechanism provides a capability that when a data tape cartridge is requested by a backup application; the request can be served immediately without the need to potentially do a traversal of tape cartridges between library strings via the pass-through.","The optimization process of placement optimization system  of  can be running continuously in the background, at certain intervals in the background, or manually triggered by an operator. The first two options are typically performed entirely by the tape library itself without any user intervention. The process of placement optimization system  attempts to ensure that when a private mount is requested by a backup application, the mount request can be served immediately without the need to potentially perform a traversal of cartridges between library strings.","Data tape cartridge optimization is based on the number of cartridge mounts and the number of cartridge moves. Tape drives have to be considered in the equation as well, because optimal placement of cartridges is possible only when there are drives available for a mount request. The relation just described is shown in the equations of Table II.","Equation (A) depicts a relation between a tape library string inventory and an overall tape library string inventory. On the left side of equation (A), is stated the number of target mounts per library string (for each specific library string) divided by the number of drives per library string (for the same specific string). On the right side of equation (A), is stated the number of total mounts in the tape library divided by the total number of drives in the tape library.","Based on the relation in equation (A) showing the number of mounts to the number of drives, the equation for a calculation of the target scratch cartridges in a library string is re-stated as equation (B). Beginning from the left, the number of target mounts per library string (for a specific string number), is identified as being equal to the number of drives per library string, (for the same string number), multiplied by the number of total mounts in the tape library, divided by the total number of drives in the tape library. The relation just described in the equations of Table II is an example of rules that may be used by the placement module. Other rules may be used to alter the allocation of data tape cartridges toward specific library strings in a purposive manner.","Table III, is a tabular representation of a data structure for maintaining tape data tape cartridge mount and movement data, for automated tape library system  of , in accordance with illustrative embodiments. The data structure of Table III is an example of a data structure in the form of table that maintains information by library string for a number of mounts and moves with respect to data tape cartridges as used in equation (B) of Table II. Table II is another example of data stored in tape statistics  of placement optimization system  of system  of .",{"@attributes":{"id":"p-0060","num":"0059"},"tables":{"@attributes":{"id":"TABLE-US-00003","num":"00003"},"table":{"@attributes":{"frame":"none","colsep":"0","rowsep":"0"},"tgroup":{"@attributes":{"align":"left","colsep":"0","rowsep":"0","cols":"5"},"colspec":[{"@attributes":{"colname":"offset","colwidth":"14pt","align":"left"}},{"@attributes":{"colname":"1","colwidth":"49pt","align":"center"}},{"@attributes":{"colname":"2","colwidth":"77pt","align":"center"}},{"@attributes":{"colname":"3","colwidth":"28pt","align":"center"}},{"@attributes":{"colname":"4","colwidth":"49pt","align":"center"}}],"thead":{"row":[{"entry":[{},"TABLE III"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]},{"entry":[{},"Library String","Cartridge volser","Mounts","Moves"]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]},"tbody":{"@attributes":{"valign":"top"},"row":[{"entry":[{},"A","AAAAAA","100","0"]},{"entry":[{},"A","BBBBBB","\u20030","0"]},{"entry":[{},". . .",". . .",". . .",". . ."]},{"entry":[{},"B","DDDDDD","200","2"]},{"entry":[{},"B","EEEEEE","\u200273","1"]},{"entry":[{},". . .",". . .",". . .",". . ."]},{"entry":[{},"C","FFFFFF","120","0"]},{"entry":[{},"C","GGGGGG","150","1"]},{"entry":[{},". . .",". . .",". . .",". . ."]},{"entry":[{},{"@attributes":{"namest":"offset","nameend":"4","align":"center","rowsep":"1"}}]}]}}}}},"In the left column, library string, is stored a unique identifier of each library string. For example, the column indicates library string A, library string B and library string C. The next column, cartridge volser identifies a unique identifier of the data tape cartridge volume serial number (volser) used for each data tape cartridge in each library string. For example, the column indicates volser \u201cAAAAAA\u201d is used in library string \u201cA.\u201d Similar information is shown for library strings \u201cB\u201d and \u201cC.\u201d","The mounts column indicates the number of mounts of each data tape cartridge identified by the volser of the cartridge volser column. Placement optimization system  of , obtains this information from the backup servers  and  of . Usually, only one backup server owns and mounts a given data tape cartridge. For example, the first row of the mounts column indicates 100 mounts for volser \u201cAAAAAA,\u201d while the next row indicates \u201c0\u201d mounts for volser \u201cBBBBBB\u201d on library string \u201cA.\u201d The remaining rows indicate similar information for other volser and library string combinations.","The moves column identifies the number of moves per data tape cartridge per library string. The number indicates how often a given data tape cartridge identified by a unique identifier of volser has been moved over its lifetime. For example, the first row indicates \u201c0\u201d moves, while the fourth row indicates \u201c2\u201d moves for volser \u201cDDDDDD\u201d of library string \u201cB.\u201d","The selection of a data tape cartridge to be moved from one library string to another is based on the number of mounts, from the mounts column, and the number of moves, from the move column. Thereby, a data tape cartridge is identified as a candidate for a move by being in a library string negative delta and having a combination of the most number of mounts and the least number of moves. Placement optimization system  of  provides a capability to programmatically balance the number of data tape cartridges in a library string associated with a single library image based on the number of mounts, moves and drives.","With reference to , a flow diagram of a process for balancing tape data tape cartridge utilization in a tape library image such as tape library  of  is presented, in accordance with illustrative embodiments. Process  is an example of a process using placement optimization system  of  and more particular the placement module  and tape statistics  with placement rules , all of .","Process  starts (step ) and obtains current mounts per library (step ). The current number of mounts per tape library string is determined by the placement module  and stored in tape statistics  of placement optimization system  of system  of . The number of mounts is typically determined for the time between the present and the last time the process ran. The current number of mounts is stored in a data structure, such as the data structure of Table I.","Identify an optimal or target number of mounts for each library string using equation (B) of Table II and store the result in the target mounts column of the data structure of Table I is performed by placement module  (step ). The result forms the target number of data tape cartridges mounts per library string. Identify the delta cartridges to be moved in or out of the tape library for each tape library string and update the data structure of Table I is performed by placement module  (step ). The number of tape cartridges to be moved is the difference between the total current or actual mounts per library string and the target number of data tape cartridge mount counts. When there is difference the cartridges require balancing and when the difference is a negative value, cartridges should be reallocated because the cartridges are not being used.","Identify the mounts per data tape cartridge of each library string, by contacting a backup server ( and  in ), or set of servers, is performed by placement module  (step ). The number of data tape cartridge mounts per data tape cartridge is determined for the time period between the present and the last time process  was executed. The number of mounts and with the data tape cartridge unique identifier (volser) is stored as a result in columns mounts and cartridge volser respectively for each library string indicated in the library string column of the data structure depicted in Table III which is stored in tape statistics .","Select data tape to be moved is performed (step ). The selection is based on information in the data structures of Table I and Table III. From the data structure of Table I, using the delta column a determination is made as to how many data tape cartridges are to be moved in or out of a library string. From the data structure of Table III a determination is made as to the volser of the data tape cartridges to be moved. Data tape cartridges are selected according to the unique identifier of volser which are not in the same library string and where the number of mounts for each data tape cartridge is the highest while the number of moves for the same volser is the lowest. The combination of highest mounts with the lowest moves provides a capability to move active cartridges that have not been moved previously or moved as often as other cartridges.","Create move request is performed to generate the move requests to the tape library system (step ). The move requests cause the tape library system to move the selected data tape cartridges. Placement module  of placement optimization system  of system  of  instructs the control module (, ,  of ) for the respective library string (, ,  of ) to move the data tape cartridges from one library string to another library string via the pass-through mechanism.","Increment move counter for each data tape cartridge moved is performed (step ). The moves column of the data structure of Table III is updated to reflect movement of the data tape cartridges identified by volser which have been moved by the move request in step . Process  terminates hereafter (step ).","In summary, process  provides a capability to ensure that the number of mounts is balanced in each library string of a library image by moving data tape cartridges, which are frequently used by a backup server from one library string to another. The process thereby utilizes placement module  of  which communicates with the backup servers  and  of  to determine the number of mounts, and to the library strings to determine the number of tape drives available. The target mount count for each library string is calculated and a determination is made as to the number of data tape cartridges to be moved. A determination of which data tape cartridges to be moved is performed by analyzing the number of mounts for each data tape cartridge and the number of moves previously made for each candidate volser. Move requests are generated by placement module  for the identified data tape cartridges that instruct the control modules of the library strings to move selected data tape cartridges using the pass-through mechanism, typically before the data tape cartridges are required in the new location.","With respect to , a flow diagram of a process for determining a data tape cartridge volume to move, within the process of  is presented, in accordance with illustrative embodiments. Process  is an example of a process of selecting a data tape to be moved as in step  of process  of  and is executed by the placement optimization system  of system  and more particular by placement module  in conjunction with the data stored in tables I-III of tape statistics  of .","Process  is invoked by step  of process  and calculates the number of cartridges to move (step ). The number of data tape cartridges to move may be determined by summing the delta values of the delta column of the data structure of Table I stored in the tape statistics  of . Identify the volume\/serial number (volser) of each candidate data tape cartridge is performed (step ). The volume serial number information may be obtained from the cartridge volser column of the data structure of Table III. Moves candidates are data tape cartridges that exist in a library string having a delta that is a negative value.","Determine whether the candidate volume\/serial number is not in the same library string is performed to identify a possible move (step ). Moving data tape cartridges within the same library string may not create the balance desired. When a determination is made that the candidate volume\/serial number is not in the same library string, a \u201cyes\u201d is obtained. When a determination is made that the candidate volume\/serial number is in the same library string, a \u201cno\u201d is obtained. When a \u201cno\u201d is obtained in step , process  loops back to step  to identify another candidate volume\/serial number to move. When a \u201cyes\u201d is obtained in step , identify the set of unique identifiers, volume\/serial numbers, of the data tape cartridges according to the number of data tape cartridge mounts per data tape cartridge is the highest is performed (step ). A set of data tape cartridges may result from the process ranked according to the number of mounts for each data tape cartridge in the set of candidates. The set of data tape cartridges with the highest mounts may be then be processed according to a ranking to satisfy the move requirements.","Identify the unique identifiers, volume\/serial numbers, within the set of data tape cartridges with the highest mounts where the number of moves for a respective data tape cartridge is the lowest is performed to identify the data tape cartridge that has also been moved the least (step ). Cartridges that are moved frequently typically indicate an inefficient allocation of cartridges within the tape library system. From the candidates identified, select the unique identifiers, volume\/serial numbers, to move to meet the move requirements indicated in Table III is performed (step ). On completion of the selection return to step  of process  of .","One or more illustrative embodiments provides a capability to identify a situation in an automated tape library system in which balancing of the data tape cartridges across tape library strings is performed. Using statistics from the tape library system the current number of data tape cartridges mounts can be determined and compared to desired or target data tape cartridge mounts. Responsive to a delta from the comparison process, move candidates are identified and further processed to select the data tape cartridges having the most mounts while also having the least moves. The selected data tape cartridges are then moved by the tape library system to balance the allocation of data tape cartridges within the system. The moved data tape cartridges are also marked as moved to update the tape library system statistics. Balancing may also refer to meeting other criteria such as preferred strings having more or less activity as desired rather than an equilibrium scenario.","The flowchart and block diagrams in the figures illustrate the architecture, functionality, and operation of possible implementations of systems, methods and computer program products, according to various embodiments of the present invention. In this regard, each block in the flowchart or block diagrams may represent a module, segment, or portion of code, which comprises one or more executable instructions for implementing the specified logical function(s). It should also be noted that, in some alternative implementations, the functions noted in the block may occur out of the order noted in the figures. For example, two blocks shown in succession may, in fact, be executed substantially concurrently, or the blocks may sometimes be executed in the reverse order, depending upon the functionality involved. It will also be noted that each block of the block diagrams and\/or flowchart illustration, and combinations of blocks in the block diagrams and\/or flowchart illustration, can be implemented by special purpose hardware-based systems that perform the specified functions or acts, or combinations of special purpose hardware and computer instructions.","The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the invention. As used herein, the singular forms \u201ca\u201d, \u201can\u201d and \u201cthe\u201d are intended to include the plural forms as well, unless the context clearly indicates otherwise. It will be further understood that the terms \u201ccomprises\u201d and\/or \u201ccomprising,\u201d when used in this specification, specify the presence of stated features, integers, steps, operations, elements, and\/or components, but do not preclude the presence or addition of one or more other features, integers, steps, operations, elements, components, and\/or groups thereof.","The corresponding structures, materials, acts, and equivalents of all means or step plus function elements in the claims below are intended to include any structure, material, or act for performing the function in combination with other claimed elements, as specifically claimed. The description of the present invention has been presented for purposes of illustration and description, but is not intended to be exhaustive or limited to the invention in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the invention. The embodiment was chosen and described in order to best explain the principles of the invention, the practical application, and to enable others of ordinary skill in the art to understand the invention for various embodiments, with various modifications as are suited to the particular use contemplated.","The invention can take the form of an entirely hardware embodiment, an entirely software embodiment or an embodiment containing both hardware and software elements. In a preferred embodiment, the invention is implemented in software, which includes but is not limited to firmware, resident software, microcode, etc.","Furthermore, the invention can take the form of a computer program product accessible from a computer-usable or computer-readable medium providing program code for use by, or in connection with, a computer or any instruction execution system. For the purposes of this description, a computer-usable or computer-readable medium can be any tangible apparatus that can contain, store, communicate, propagate, or transport the program for use by or in connection with the instruction execution system, apparatus, or device.","The medium can be an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system (or apparatus or device) or a propagation medium. Examples of a computer-readable medium include a semiconductor or solid state memory, magnetic tape, a removable computer diskette, a random access memory (RAM), a read-only memory (ROM), a rigid magnetic disk and an optical disk. Current examples of optical disks include compact disk-read only memory (CD-ROM), compact disk-read\/write (CD-R\/W) and DVD.","A data processing system suitable for storing and\/or executing program code will include at least one processor coupled directly or indirectly to memory elements through a system bus. The memory elements can include local memory employed during actual execution of the program code, bulk storage, and cache memories which provide temporary storage of at least some program code in order to reduce the number of times code must be retrieved from bulk storage during execution.","Input\/output or I\/O devices (including but not limited to keyboards, displays, pointing devices, etc.) can be coupled to the system either directly or through intervening I\/O controllers.","Network adapters may also be coupled to the system to enable the data processing system to become coupled to other data processing systems or remote printers or storage devices through intervening private or public networks. Modems, cable modem and Ethernet cards are just a few of the currently available types of network adapters.","The description of the present invention has been presented for purposes of illustration and description, and is not intended to be exhaustive or limited to the invention in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art. The embodiment was chosen and described in order to best explain the principles of the invention, the practical application, and to enable others of ordinary skill in the art to understand the invention for various embodiments, with various modifications as are suited to the particular use contemplated."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0010","num":"0009"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0011","num":"0010"},"figref":["FIG. 2","FIG. 1"]},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":["FIG. 4","FIG. 2"]},{"@attributes":{"id":"p-0014","num":"0013"},"figref":["FIG. 5","FIG. 4"]}]},"DETDESC":[{},{}]}
