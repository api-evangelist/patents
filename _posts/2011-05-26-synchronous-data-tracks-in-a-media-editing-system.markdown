---
title: Synchronous data tracks in a media editing system
abstract: A media editing system provides an editor with full visibility and editing capability for synchronous data that is adjunct to audio and video. The data tracks include one or more streams of data packets, each stream being of a particular data type. Synchronous data tracks are displayed on the timeline, facilitating data track editing independent of the associated media tracks. The UI also enables selective playback and export of the data tracks along with the corresponding video and audio. The system also enables data streams to be filtered and combined. Data from the data tracks can be extracted and imported into a media asset management system, enabling the data to be searched.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08559793&OS=08559793&RS=08559793
owner: Avid Technology, Inc.
number: 08559793
owner_city: Burlington
owner_country: US
publication_date: 20110526
---

{"@attributes":{"id":"description"},"BRFSUM":[{},{}],"heading":["BACKGROUND","SUMMARY","DETAILED DESCRIPTION"],"p":["In systems for editing and producing video and audio, it is often useful to carry various kinds of data that are adjunct to the audio and video signal data. Some of these data are associated with a video or audio sequence as a whole, or associated with a segment, and are not synchronous. Examples include descriptive metadata, such as information about the people involved in the production, date and location, as well as structural metadata, such as image format\/type (e.g., HD, SD) and bit rate. However an increasing range of information in the form of data streams that are time-synchronized with the audio and video content is also being generated. This information is distinct from the audio and video portions of the signal, and represents additional information pertaining to the production and\/or subject matter of the material.","In existing media editing and production systems, time-synchronous adjunct data are usually embedded within the audio or video signal. In digital video broadcasts, the data is often placed in the ancillary portion of the signal. In file-based media, such as those generated by cameras, disk recorders, video servers, and other video or audio acquisition and playback devices, the data is present in various forms within the media files, often as embedded portions of the video frames.","Such schemes for handling time-synchronous adjunct data streams limit the ability of editors to edit or otherwise manipulate the data streams independently of the picture and audio tracks.","In general, the methods, systems, and computer program products described herein enable time-synchronous data to be represented as distinct entities that are independently editable from the program picture and sound. They further enable the time-synchronous data to be acquired and converted into a flexible format, extracted into indexed asset management systems for analysis, aggregation, and search, and to be accurately created, edited, and played back in sync with picture and sound.","In general, in one aspect, a method of editing a time-based media composition using a media editing software application, wherein the composition includes at least one media track and at least one data track, includes: displaying a timeline representing a current state of the media composition, wherein the timeline includes the at least one media track and the at least one data track, wherein the data track references at least one data stream comprising a stream of data packets, wherein each of the data packets occupies a unique time address corresponding to a media element on the media track; enabling a user of the media editing software application to perform a first editing operation to the time-based media composition, wherein the first editing operation is applied to both the at least one media track and the at least one data track, thereby maintaining temporal synchrony between the at least one media track and the at least one data track; and enabling the user of the media editing software application to perform a second editing operation to the media composition, wherein the second editing operation is applied to only one of the at least one media track and the at least one data track, thereby altering a temporal relationship between at least a portion of the at least one media track and the at least one data track.","Various embodiments include one or more of the following features. At least one of the first and second editing operations includes moving at least one boundary of a segment of the composition. At least one of the first and second editing operations includes altering a temporal location within the composition of a segment of the composition. The time-based media composition is a video composition. The media element is a video frame. The time-based media composition is an audio composition. One of the data tracks references text data. The text data is one of the set consisting of closed captions, open captions, subtitles, and teletext. One of the data tracks references film metadata and\/or camera data. The method further enables a user to combine data referenced by at least one data track and at least one media track into a combination media stream, and to output the combination media stream. The at least one data track includes a plurality of data streams, and the method further enables a user to select and output a subset of the plurality of data streams. Further enabling a user to convert data referenced by the at least one data track into a form that is searchable by a media asset management system, and storing the converted data in a database.","In general, in another aspect, a computer program product includes: a computer-readable medium with computer program instructions encoded thereon, wherein the computer program instructions, when processed by a computer, instruct the computer to perform a method of editing a time-based media composition, wherein the composition includes at least one media track and at least one data track, the method comprising: displaying a timeline representing a current state of the media composition, wherein the timeline includes the at least one media track and the at least one data track, wherein the data track references at least one data stream comprising a stream of data packets, wherein each of the data packets occupies a unique time address corresponding to a media element on the media track; enabling a user of the computer to perform an editing operation to the time-based media composition, wherein the editing operation is applied to both the at least one media track and the at least one data track, thereby maintaining temporal synchrony between the at least one media track and the at least one data track; and enabling the user of the computer to perform an editing operation to the media composition, wherein the editing operation is applied to only one of the at least one media track and the at least one data track, thereby altering a temporal relationship between at least a portion of the at least one media track and the at least one data track.","In general, in a further aspect, a system for editing a time-based media composition, the system including: a memory for storing computer-readable instructions; and a processor connected to the memory, wherein the processor, when executing the computer-readable instructions, causes the media composition system to perform a method of editing a media composition, wherein the composition includes at least one media track and at least one data track, the method comprising: displaying a timeline representing a current state of the media composition, wherein the timeline includes the at least one media track and the at least one data track, wherein the data track references at least one data stream comprising a stream of data packets, wherein each of the data packets occupies a unique time address corresponding to a media element on the media track; enabling a user to perform an editing operation to the time-based media composition, wherein the editing operation is applied to both the at least one media track and the at least one data track, thereby maintaining temporal synchrony between the at least one media track and the at least one data track; and enabling the user to perform an editing operation to the media composition, wherein the editing operation is applied to only one of the at least one media track and the at least one data track, thereby altering a temporal relationship between at least a portion of the at least one media track and the at least one data track.","In general, in still a further aspect a method of editing a video composition using a video editing software application, wherein the video composition includes at least one video track and at least two data tracks, the method including: displaying a timeline representing a current state of the video composition, wherein the timeline includes the at least one video track and the at least two data tracks, wherein each data track references at least one data stream comprising a stream of data packets, wherein each of the data packets occupies a unique time address corresponding to a frame time on the video track, and wherein each of the packets within a given stream are characterized by a common data type, and wherein each of a first data track and a second data track includes a data stream of a first data type; and enabling a user of the video editing software application to select one of the data stream of the first type from the first data track and the data stream of the first type from the second data track, wherein the selected data stream is selectively included in at least one of playback or export of the video composition.","Time-synchronous data pertaining to video and audio programs include descriptive, structural, and enhancement data. Types of time-synchronous data include, but are not limited to: closed and open captions; subtitles; teletext; film metadata, such as edgecodes, keycodes, and pull-down flags; timecodes; camera data, such as position, zoom, iris, and gain; location data, such as GPS coordinates; program description; 3D stereo parameters; aspect ratio conformance, such as Advanced Format Descriptor; and interactive television programming. Audio-specific examples include: gain, pan, and mixing parameters; MIDI data; and audio timecodes. A system for facilitating the editing of video programs with enhancement data is described in U.S. Pat. No. 7,930,624, entitled Editing Time-Based Media with Enhanced Content, which is incorporated herein by reference.","Time-synchronous data are organized into a hierarchy of data structures including clips, tracks, streams, and packets, as shown in . An example of the relationship between these elements is illustrated in . The figure shows single clip  containing two data tracks , . Track  contains one stream of data packets , and track  contains two streams ,  of data packets, such as packet . In some schemes, a packet corresponds to an individual video or audio sample. The format of a packet is illustrated in . The ID includes an identifier of the type of data contained within the PAYLOAD portion of the packet. The length in bytes of the PAYLOAD portion is determined by the LENGTH field. FLAGS indicate if the data is located in a video ancillary data signal, and if it is, in what portion of the signal. CHECKSUM is a value computed from all of the bytes in the packet except the CHECKSUM field itself, and is used to verify the data integrity of the packet.","Data packets are organized into streams, each stream including only a single type of packet, i.e., corresponding to a single synchronous data type. Within each stream, each packet occupies a unique time address, which corresponds to a time interval of a video frame. Thus, there can be no more than one packet at a given frame address, but it is not necessary for each frame address in the range of frames in the content to be assigned a packet in the stream, as shown, for example in the sparse stream illustrated in . Since each of the packets in the stream represents only one data type, they all have the same ID values.","One or more streams are organized into tracks, in which each stream has the same time length, and each track includes no more than one stream of a given type (ID).  illustrates a track containing three streams. The number of streams in a track is limited by the total number of different ID type values, since a given type of stream may only appear once within a given track. The stream data for a track is typically stored in a separate file known as the stream file. The track data structure contains a reference to this file.","Multiple data tracks are assembled into clips, with each track having the same duration and starting time address. Video and\/or audio tracks are included in the clips, and the clip structure ensures that data streams are synchronized with each other and with audio and video content.  illustrates a clip with two data tracks, one video track, and two audio tracks.","Multiple clips are further arranged in a desired order into a sequence. In a sequence, any portion of a data track or data stream (accurate to a video frame time) can be selected and inserted. This enables the user of a digital media production system to alter the order and timing of the data in clips to create a new order and timing.",{"@attributes":{"id":"p-0031","num":"0030"},"figref":"FIG. 7","b":["2","1"]},{"@attributes":{"id":"p-0032","num":"0031"},"figref":["FIG. 8","FIG. 9"],"b":["1","902"]},"The digital media production system processes the sequence by following a chain of references beginning with the reference to a temporal span of a data track of the sequence, which points to the clip encapsulating the data, which in turn points to the data packets themselves. Such a chain of references is illustrated in , showing data packet span  in data track D referencing portion  of the data track , within clip , which in turn references packets P-P () within stream  () of stream file . Sequences, clips, tracks, and data packets may be stored contiguously or in separate locations in memory or disk or other storage systems. In one typical arrangement, sequences, clips, and data packets are stored as separate entities, as illustrated in .","With the described data structure, the digital media processing system is able to perform a number of functions relating to the synchronous data. A fundamental new capability is playback and\/or storing of streams of arbitrary data in absolute synchronization with video and audio. The synchronization may be accurate down to the level of individual video frame times. Note, the synchronization extends through each temporal location of the sequence, and is not limited to start\/end point synchronization. The structure also permits the data streams to be played or processed from multiple disk files, including files that may be stored in different locations. For example, during the editing of a television program, it is often necessary to use footage from archives that have their own streams of closed captions encoded into files. The described system is able to incorporate these files into the production process with transcoding, re-wrapping, combining, or otherwise converting the stream files, thus speeding up the process of editing data-oriented material in a deadline-driven production environment. In another example, it may be necessary to replace a small portion of the data in a sequence to correct a mistake, such as a misspelled caption or incorrect station branding. The described system may be used to prepare a small stream file containing only the corrected data with a reference to the new file in the original sequence in place of the erroneous data. This approach avoids the need to fully recreate the original data track containing the mistake, which results in a more efficient and faster workflow.","The system is able to combine, filter, and convert the streams of data in real-time or as a non-real-time process.  illustrates combining data tracks ,  with video track  using video combiner module  according to rules and\/or parameters  for output to video display . The combiner modifies the individual tracks in the process of combining them into a single combined output. For example, a combiner can combine a subtitle data track with a video track, to produce subtitled video. In another example, a combiner uses GPS location data to position a map showing the current location of the camera shot. In a further example, a combiner uses convergence data from a 3D stereo camera rig to dynamically and intelligently modify the depth of 3D video clips. Yet another application is to use a combiner when down-converting a project from HD to SD to read caption data from the data track and insert it as VBI captions on line 21 of the output video.","The system also permits a user to filter data according to selected rules and parameters to determine what media and data flows to processes downstream of the media editing system. In the example illustrated in , data tracks  and , video track , and audio track  are input to filter , which filters the incoming media and data according to rules\/parameters . Data filtering may be performed within a given data track by filtering individual streams. The filter output is either transmitted onwards, or stored (). In contrast to the combinations described above, filtering does not cause the media and data tracks to interact or be mingled. In one use of filtering, a user may wish to output no more than one data stream of a given type. Thus, for example, if data tracks  and  each contain subtitle streams, such as different language versions, filter  may select just one of them for output. On the other hand, individual streams may be selected according to different requirements. Using the example of two different language subtitle streams again, a user may wish to include subtitle data for both languages in a program edition that enables viewers to select which language subtitles they wish to view. In other circumstances, all streams from a given data track may be output. Another example involves using a filter to ensure that all AFD (Advanced Format Descriptor) values in a sequence conform to a desired output aspect ratio. Further filtering examples include: automatically replacing inappropriate words in closed captions for consumption by young audiences; automatically adjusting closed captions when the time-span for presenting them is decreased; and reading GPS coordinates, converting them to a text string descriptive of their location, e.g., by referring to a map database, and inserting the text into a data track as captions or teletext.","The data may be converted into a form that allows searching or analysis. For example, data may be converted into text and read into a media asset management system, which can then be searched. Searchable data may include closed caption text, program description data, positional data such as GPS coordinates, and interactive program content. For example, a documentary or reality film maker may use GPS location data to search and sort available media based on the locations at which they were shot.  illustrates conversion of data from data track  by conversion module  according to rules , with the result output to database . A typical database entry includes a time field, a value, as well as a reference to the data track from which the data originated.","The data structure described herein permits a digital media production system that includes an interactive non-linear video or audio editing system to also edit and play back data tracks with the same degree of flexibility hitherto available only for media tracks.","An example of a graphical user interface for a non-linear editing system in which an editor is able to manipulate multiple data tracks is illustrated in , which is a schematic view of an editing system display showing a timeline representation of a media sequence. Three data tracks D, D, D (, , ) are shown at the top of the timeline, together with video track V (), and four audio tracks A, A, A, and A (). The indicators\/buttons marked CC, AFD, TT, and G () display the types of data that are present in the corresponding track. In this example, CC denotes closed captions, AFD denotes Advanced Format Descriptor, TT denotes teletext, and G denotes GPS positioning data. The user is able to use the basic video editing tools available to edit picture and sounds, such as cut, copy, paste, slide, insert, overwrite, trim. Track selectors  in the left column enable the user to temporarily enable or disable editing operations on the corresponding tracks. Indicator buttons  are also used to selectively enable or disable data playback of each of the data streams in the corresponding data tracks. This feature is especially useful in testing and troubleshooting to help isolate problems. The number of indicator buttons displayed corresponds to the number of streams in the data track. Track selectors  enable the user to select\/deselect entire tracks for playback.","The various components of the system described herein may be implemented as a computer program using a general-purpose computer system. Such a computer system typically includes a main unit connected to both an output device that displays information to a user and an input device that receives input from a user. The main unit generally includes a processor connected to a memory system via an interconnection mechanism. The input device and output device also are connected to the processor and memory system via the interconnection mechanism.","One or more output devices may be connected to the computer system. Example output devices include, but are not limited to, liquid crystal displays (LCD), plasma displays, cathode ray tubes, video projection systems and other video output devices, printers, devices for communicating over a low or high bandwidth network, including network interface devices, cable modems, and storage devices such as disk or tape. One or more input devices may be connected to the computer system. Example input devices include, but are not limited to, a keyboard, keypad, track ball, mouse, pen and tablet, communication device, touch-screen, and data input devices. The invention is not limited to the particular input or output devices used in combination with the computer system or to those described herein.","The computer system may be a general purpose computer system which is programmable using a computer programming language, a scripting language or even assembly language. The computer system may also be specially programmed, special purpose hardware. In a general-purpose computer system, the processor is typically a commercially available processor. The general-purpose computer also typically has an operating system, which controls the execution of other computer programs and provides scheduling, debugging, input\/output control, accounting, compilation, storage assignment, data management and memory management, and communication control and related services. The computer system may be connected to a local network and\/or to a wide area network, such as the Internet. The connected network may transfer to and from the computer system program instructions for execution on the computer, media data, metadata, review and approval information for a media composition, media annotations, and other data.","A memory system typically includes a computer readable medium. The medium may be volatile or nonvolatile, writeable or nonwriteable, and\/or rewriteable or not rewriteable. A memory system typically stores data in binary form. Such data may define an application program to be executed by the microprocessor, or information stored on the disk to be processed by the application program. The invention is not limited to a particular memory system. Time-based media may be stored on and input from magnetic or optical discs, which may include an array of local or network attached discs.","A system such as described herein may be implemented in software or hardware or firmware, or a combination of the three. The various elements of the system, either individually or in combination may be implemented as one or more computer program products in which computer program instructions are stored on a non-transitory computer readable medium for execution by a computer, or transferred to a computer system via a connected local area or wide are network. Various steps of a process may be performed by a computer executing such computer program instructions. The computer system may be a multiprocessor computer system or may include multiple computers connected over a computer network. The components described herein may be separate modules of a computer program, or may be separate computer programs, which may be operable on separate computers. The data produced by these components may be stored in a memory system or transmitted between computer systems.","Having now described an example embodiment, it should be apparent to those skilled in the art that the foregoing is merely illustrative and not limiting, having been presented by way of example only. Numerous modifications and other embodiments are within the scope of one of ordinary skill in the art and are contemplated as falling within the scope of the invention."],"brief-description-of-drawings":[{},{}],"description-of-drawings":{"heading":"BRIEF DESCRIPTION OF THE DRAWINGS","p":[{"@attributes":{"id":"p-0011","num":"0010"},"figref":"FIG. 1"},{"@attributes":{"id":"p-0012","num":"0011"},"figref":"FIG. 2"},{"@attributes":{"id":"p-0013","num":"0012"},"figref":"FIG. 3"},{"@attributes":{"id":"p-0014","num":"0013"},"figref":"FIG. 4"},{"@attributes":{"id":"p-0015","num":"0014"},"figref":"FIG. 5"},{"@attributes":{"id":"p-0016","num":"0015"},"figref":"FIG. 6"},{"@attributes":{"id":"p-0017","num":"0016"},"figref":"FIG. 7"},{"@attributes":{"id":"p-0018","num":"0017"},"figref":"FIG. 8"},{"@attributes":{"id":"p-0019","num":"0018"},"figref":"FIG. 9"},{"@attributes":{"id":"p-0020","num":"0019"},"figref":"FIG. 10"},{"@attributes":{"id":"p-0021","num":"0020"},"figref":"FIG. 11"},{"@attributes":{"id":"p-0022","num":"0021"},"figref":"FIG. 12"},{"@attributes":{"id":"p-0023","num":"0022"},"figref":"FIG. 13"},{"@attributes":{"id":"p-0024","num":"0023"},"figref":"FIG. 14"}]},"DETDESC":[{},{}]}
